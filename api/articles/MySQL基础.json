{"title":"MySQL基础","uid":"4a207b7e885fdbcca8129599135e5f2e","slug":"MySQL基础","date":"2021-11-10T12:30:04.000Z","updated":"2021-11-11T07:07:12.093Z","comments":true,"path":"api/articles/MySQL基础.json","keywords":null,"cover":"https://img-blog.csdnimg.cn/8a799b9a11d1488288d2b34beffa2209.jpg?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAWUZSNzE4,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center","content":"<h1 id=\"1-MySQL概述\"><a href=\"#1-MySQL概述\" class=\"headerlink\" title=\"1 MySQL概述\"></a>1 MySQL概述</h1><h2 id=\"1-1-数据库概述\"><a href=\"#1-1-数据库概述\" class=\"headerlink\" title=\"1.1 数据库概述\"></a>1.1 数据库概述</h2><h3 id=\"数据库的好处\"><a href=\"#数据库的好处\" class=\"headerlink\" title=\"数据库的好处\"></a>数据库的好处</h3><p>持久化数据到本地<br>可以实现结构化查询，方便管理</p>\n<h3 id=\"数据库相关概念\"><a href=\"#数据库相关概念\" class=\"headerlink\" title=\"数据库相关概念\"></a>数据库相关概念</h3><p>DB：数据库，保存一组有组织的数据的容器<br>DBMS：数据库管理系统，又称为数据库软件（产品），用于管理DB中的数据<br>SQL:结构化查询语言，用于和DBMS通信的语言</p>\n<h3 id=\"数据库存储数据的特点\"><a href=\"#数据库存储数据的特点\" class=\"headerlink\" title=\"数据库存储数据的特点\"></a>数据库存储数据的特点</h3><ol>\n<li>将数据放到表中，表再放到库中</li>\n<li>一个数据库中可以有多个表，每个表都有一个的名字，用来标识自己。表名具有唯一性。</li>\n<li>表具有一些特性，这些特性定义了数据在表中如何存储，类似java中 “类”的设计。</li>\n<li>表由列组成，我们也称为字段。所有表都是由一个或多个列组成的，每一列类似java 中的”属性”</li>\n<li>表中的数据是按行存储的，每一行类似于java中的“对象”。</li>\n</ol>\n<h2 id=\"1-2-MySQL的背景\"><a href=\"#1-2-MySQL的背景\" class=\"headerlink\" title=\"1.2 MySQL的背景\"></a>1.2 MySQL的背景</h2><p>前身属于瑞典的一家公司，MySQL AB</p>\n<p>08年被sun公司收购</p>\n<p>09年sun被oracle收购</p>\n<p><strong>MySQL优点</strong></p>\n<p>1、开源、免费、成本低</p>\n<p>2、性能高、移植性也好</p>\n<p>3、体积小，便于安装</p>\n<h2 id=\"1-3-MySQL产品的介绍和安装\"><a href=\"#1-3-MySQL产品的介绍和安装\" class=\"headerlink\" title=\"1.3 MySQL产品的介绍和安装\"></a>1.3 MySQL产品的介绍和安装</h2><h3 id=\"MySQL服务的启动和停止\"><a href=\"#MySQL服务的启动和停止\" class=\"headerlink\" title=\"MySQL服务的启动和停止\"></a>MySQL服务的启动和停止</h3><p>方式一：计算机——右击管理——服务<br>方式二：通过管理员身份运行</p>\n<pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">net start 服务名（启动服务）\nnet stop 服务名（停止服务）<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<h3 id=\"MySQL服务的登录和退出\"><a href=\"#MySQL服务的登录和退出\" class=\"headerlink\" title=\"MySQL服务的登录和退出\"></a>MySQL服务的登录和退出</h3><p>  方式一：通过mysql自带的客户端（只限于root用户）</p>\n<p>  方式二：通过windows自带的客户端</p>\n<pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">#登录：\nmysql 【-h主机名 -P端口号 】-u用户名 -p密码\n#退出：\nexit或ctrl+C<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"MySQL的语法规范\"><a href=\"#MySQL的语法规范\" class=\"headerlink\" title=\"MySQL的语法规范\"></a>MySQL的语法规范</h3><pre><code>不区分大小写,但建议关键字大写，表名、列名小写\n每条命令最好用分号结尾\n每条命令根据需要，可以进行缩进 或换行\n注释\n    单行注释：#注释文字\n    单行注释：-- 注释文字\n    多行注释：/* 注释文字  */\n</code></pre><h1 id=\"2-基本操作\"><a href=\"#2-基本操作\" class=\"headerlink\" title=\"2. 基本操作\"></a>2. 基本操作</h1><p><strong>存储过程：创建数据库=&gt;确认字段=&gt;创建数据表=&gt;插入数据</strong></p>\n<h3 id=\"创建数据库\"><a href=\"#创建数据库\" class=\"headerlink\" title=\"创建数据库\"></a>创建数据库</h3><pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\"># 展示数据库\nmysql&gt; SHOW DATABASES;\n+--------------------+\n| Database           |\n+--------------------+\n| information_schema |\n| mysql              |\n| performance_schema |\n| sakila             |\n| sys                |\n| world              |\n+--------------------+\n# 打开指定的库\nmysql&gt; use 库名\n# 创建数据库\nmysql&gt; CREATE DATABASE demo;\n# 删除数据库\nmysql&gt; DROP DATABASE demo;\n# 查看服务器的版本\n#方式一：登录到mysql服务端\nmysql&gt; select version();\n#方式二：没有登录到mysql服务端\nmysql --version\n或\nmysql --V<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>●”information_schema”是MySQL系统自带的数据库,主要保存MySQL数据库服务器的系统信息，比如数据库的名称、数据表的名称、字段名称、存取权限、数据文件所在的文件夹和系统使用的文件夹，等等。<br>●”performance_ schema”是MySQL系统自带的数据库，可以用来监控MySQL的各类性能指标。<br>●“sys” 数据库是MySQL系统自带的数据库，主要作用是，以一种更容易被理解的方式展示MySQL数据库服务器的各类性能指标，帮助系统管理员和开发人员监控MySQL的技术性能。<br>●”mysql”数据库保存了MySQL数据库服务器运行时需要的系统信息，比如数据文件夹、当前使用的字符集、约束检查信息，等等。</p>\n<h3 id=\"确认字段\"><a href=\"#确认字段\" class=\"headerlink\" title=\"确认字段\"></a>确认字段</h3><p>MySQL数据表由行与列组成，一行就是一条数据记录， 每一条数据记录都被分成许多列，一列就叫一个字段。每个字段都需要定义数据类型，这个数据类型叫做字段类型。</p>\n<h3 id=\"创建数据表\"><a href=\"#创建数据表\" class=\"headerlink\" title=\"创建数据表\"></a>创建数据表</h3><pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">#展示数据表\nmysql&gt; SHOW TABLES;\n+----------------+\n| Tables_in_demo |\n+----------------+\n| test           |\n+----------------+\n# 查看其它库的所有表\nmysql&gt; show tables from 库名;\n#创建数据表\nmysql&gt; CREATE TABLE demo.test(barcode text,goodname text,price int);\n# 查看表结构\nmysql&gt; desc 表名;\nmysql&gt; show columns from actor;\nmysql&gt; DESCRIBE demo.test;\n+----------+---------+------+-----+---------+-------+\n| Field    | Type    | Null | Key | Default | Extra |\n+----------+---------+------+-----+---------+-------+\n| barcode  | text    | YES  |     | NULL    |       |\n| goodname | text    | YES  |     | NULL    |       |\n| price    | int(11) | YES  |     | NULL    |       |\n+----------+---------+------+-----+---------+-------+<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>●Field: 表示字段名称。<br>●Type: 表示字段类型。<br>●Null: 表示这个字段是否允许是空值(NULL) 。在MySQL里面,空值不等于空字符串。一个空字符串的长度是0,而一个空值的长度是空。而且，在MySQL里面，空值是占用空间的。<br>●Key:我们暂时把它叫做键。<br>●Default: 表示默认值。我们导入的表的所有的字段都允许是空，默认值都是NULL。<br>●Extra:表示附加信息。</p>\n<pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">#其他show语句\n❑ SHOW STATUS，用于显示广泛的服务器状态信息；\n❑ SHOW CREATE DATABASE和SHOW CREATE TABLE，分别用来显示创建特定数据库或表的MySQL语句；\n❑ SHOW GRANTS，用来显示授予用户（所有用户或特定用户）的安全权限；\n❑ SHOW ERRORS 和 SHOW WARNINGS，用来显示服务器错误或警告消息。<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"插入数据\"><a href=\"#插入数据\" class=\"headerlink\" title=\"插入数据\"></a>插入数据</h3><pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">#添加主键\nALTER TABLE demo. test\nADD COLUMN itemnumber int PRIMARY KEY AUTO_INCREMENT ;\n#向表中添加数据\nINSERT INTO demo.test\n(barcode, goodsname,price)\nVALUES ('0001','本' ,3);\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"SQL的语言分类\"><a href=\"#SQL的语言分类\" class=\"headerlink\" title=\"SQL的语言分类\"></a>SQL的语言分类</h2><pre><code>DQL（Data Query Language）：数据查询语言\n    select \nDML(Data Manipulate Language):数据操作语言\n    insert 、update、delete\nDDL（Data Define Languge）：数据定义语言\n    create、drop、alter\nTCL（Transaction Control Language）：事务控制语言\n    commit、rollback\n</code></pre><h1 id=\"3-DQL语言\"><a href=\"#3-DQL语言\" class=\"headerlink\" title=\"3. DQL语言\"></a>3. DQL语言</h1><p>数据查询语言：select </p>\n<pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">/*\n类似于Java中 :System.out.println(要打印的东西);\n特点：\n①通过select查询完的结果 ，是一个虚拟的表格，不是真实存在\n② 要查询的东西 可以是常量值、可以是表达式、可以是字段、可以是函数*/\n\n#检索单个列\nmysql&gt; SELECT 列名 FROM 表名;\n#检索多个列\nmysql&gt; SELECT 列名,列名... FROM 表名;\n#检索所有列\nmysql&gt; SELECT * FROM 表名;\n#使用完全限定的名字\nmysql&gt; SELECT 表名.列名 FROM 数据库.表名;\n#拼接计算字段\nmysql&gt; SELECT CONCAT(列名，列名) FROM 表名;\n#计算字段运算\nmysql&gt; SELECT 列名*5 FROM 表名;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<div class=\"table-container\">\n<table>\n<thead>\n<tr>\n<th>子句</th>\n<th>功能</th>\n<th>示例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>DISTINCT</td>\n<td>去重</td>\n<td>SELECT DISTINCT 列名 FROM 表名;</td>\n</tr>\n<tr>\n<td>LIMIT</td>\n<td>限制行数</td>\n<td>SELECT 列名 FROM 表名 LIMIT 10;<br>SELECT 列名 FROM 表名 LIMIT 10,3; #从行10开始取3行</td>\n</tr>\n<tr>\n<td>ORDER BY</td>\n<td>排序</td>\n<td>SELECT 列名 FROM 表名 ORDER BY 列名 LIMIT 10;   //先排序再取10<br>SELECT 列名 FROM 表名 ORDER BY 列名,列名..;     //按多个列排序</td>\n</tr>\n<tr>\n<td>DESC</td>\n<td>降序排</td>\n<td>SELECT 列名 FROM 表名 ORDER BY 列名 DESC;</td>\n</tr>\n<tr>\n<td>ASC</td>\n<td>升序排</td>\n<td>与不加相同</td>\n</tr>\n<tr>\n<td>WHERE</td>\n<td>数据过滤</td>\n<td>SELECT 列名 FROM 表名 WHERE 条件;</td>\n</tr>\n<tr>\n<td>GROUP BY</td>\n<td>分组数据</td>\n<td>SELECT 列名 FROM 表名 GROUP BY 列名;</td>\n</tr>\n<tr>\n<td>HAVING</td>\n<td>过滤基于分组值</td>\n<td>SELECT 列名 FROM 表名 GROUP BY 列名 HAVING COUNT(*)&gt;=2;;</td>\n</tr>\n<tr>\n<td>UNION (ALL)</td>\n<td>组合查询</td>\n<td>执行多条SELECT语句，并将结果作为单个查询结果集返回</td>\n</tr>\n</tbody>\n</table>\n</div>\n<h3 id=\"SELECT子句顺序\"><a href=\"#SELECT子句顺序\" class=\"headerlink\" title=\"SELECT子句顺序\"></a>SELECT子句顺序</h3><div class=\"table-container\">\n<table>\n<thead>\n<tr>\n<th>子句</th>\n<th>说明</th>\n<th>是否必须使用</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>SELECT</td>\n<td>要返回的列</td>\n<td>是</td>\n</tr>\n<tr>\n<td>FROM</td>\n<td>要检索的表</td>\n<td>仅在表中选择数据</td>\n</tr>\n<tr>\n<td>WHERE</td>\n<td>行过滤</td>\n<td>否</td>\n</tr>\n<tr>\n<td>GROUP BY</td>\n<td>分组说明</td>\n<td>仅在按组计算聚集时</td>\n</tr>\n<tr>\n<td>HAVING</td>\n<td>组过滤</td>\n<td>否</td>\n</tr>\n<tr>\n<td>ORDER BY</td>\n<td>排序</td>\n<td>否</td>\n</tr>\n<tr>\n<td>LIMIT</td>\n<td>要检索的行数</td>\n<td>否</td>\n</tr>\n</tbody>\n</table>\n</div>\n<h3 id=\"WHERE子句操作符\"><a href=\"#WHERE子句操作符\" class=\"headerlink\" title=\"WHERE子句操作符\"></a>WHERE子句操作符</h3><div class=\"table-container\">\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">操作符</th>\n<th style=\"text-align:center\">说明</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">=</td>\n<td style=\"text-align:center\">等于</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">&lt;&gt;或!=</td>\n<td style=\"text-align:center\">不等于</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">&lt;,&lt;=,&gt;,&gt;=</td>\n<td style=\"text-align:center\">小于大于</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">BETWEEN A AND B</td>\n<td style=\"text-align:center\">[A,B]</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">IS NULL</td>\n<td style=\"text-align:center\">空值检查</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">AND OR NOT</td>\n<td style=\"text-align:center\">与 或 非</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">IN (A,B)</td>\n<td style=\"text-align:center\">集合范围匹配</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">()</td>\n<td style=\"text-align:center\">优先运算括号里的</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">LIKE</td>\n<td style=\"text-align:center\">通配符</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>优先级：<strong>AND&gt;OR</strong></p>\n<h3 id=\"通配符LIKE用法\"><a href=\"#通配符LIKE用法\" class=\"headerlink\" title=\"通配符LIKE用法\"></a>通配符LIKE用法</h3><div class=\"table-container\">\n<table>\n<thead>\n<tr>\n<th>通配符</th>\n<th>含义</th>\n<th>示例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>%</td>\n<td>任何字符出现任意次数</td>\n<td>WHERE 列名 LIKE ‘yfr%’：</td>\n</tr>\n<tr>\n<td>_</td>\n<td>只匹配单个字符</td>\n<td>WHERE 列名 LIKE ‘yfr_’：</td>\n</tr>\n</tbody>\n</table>\n</div>\n<h3 id=\"正则表达式\"><a href=\"#正则表达式\" class=\"headerlink\" title=\"正则表达式\"></a>正则表达式</h3><div class=\"table-container\">\n<table>\n<thead>\n<tr>\n<th>关键字</th>\n<th>含义</th>\n<th>示例</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>REGEXP</td>\n<td>包含</td>\n<td>where 列名 REGEXP ‘400’;</td>\n</tr>\n<tr>\n<td>BINARY</td>\n<td>不区分大小匹配</td>\n<td>where 列名 REGEXP BINARY  ‘AS’;</td>\n</tr>\n<tr>\n<td>\\</td>\n<td></td>\n<td>OR匹配</td>\n<td>where 列名 REGEXP ‘400\\</td>\n<td>500’;</td>\n</tr>\n<tr>\n<td>[123]</td>\n<td>匹配几个字符之一</td>\n<td>where 列名 REGEXP ‘[123]400’;</td>\n</tr>\n<tr>\n<td><sup><a href=\"#fn_123\" id=\"reffn_123\">123</a></sup></td>\n<td>匹配几个字符之外所有</td>\n<td>where 列名 REGEXP ‘[\\^123]400’;</td>\n</tr>\n<tr>\n<td>[0-9]</td>\n<td>范围匹配</td>\n<td>where 列名 REGEXP ‘[0-9]400’;</td>\n</tr>\n<tr>\n<td><span>\\</span><span>\\</span></td>\n<td>匹配特殊字符．、[]、</td>\n<td>和-where 列名 REGEXP ‘<span>\\</span><mjx-container class=\"MathJax\" jax=\"SVG\" display=\"true\"><svg style=\"vertical-align: 0\" xmlns=\"http://www.w3.org/2000/svg\" width=\"0.036ex\" height=\"0.036ex\" role=\"img\" focusable=\"false\" viewBox=\"0 0 16 16\"><g stroke=\"currentColor\" fill=\"currentColor\" stroke-width=\"0\" transform=\"scale(1,-1)\"><g data-mml-node=\"math\"><g data-mml-node=\"mspace\"></g></g></g></svg></mjx-container>400’;</td>\n</tr>\n<tr>\n<td>字符类</td>\n<td>匹配字符类</td>\n<td>[ :alpha: ] [:blank:]等等</td>\n</tr>\n<tr>\n<td>{n,m}</td>\n<td>匹配数目范围</td>\n<td>where 列名 REGEXP ‘[0-9]{1,}’;匹配一次以上</td>\n</tr>\n<tr>\n<td>[[:&lt;:]]、[[:&gt;:]]、$、^</td>\n<td>定位符：词的开始/尾，文本的开始/尾</td>\n<td>where 列名 REGEXP ‘^[0-9]’;</td>\n</tr>\n</tbody>\n</table>\n</div>\n<h2 id=\"函数\"><a href=\"#函数\" class=\"headerlink\" title=\"函数\"></a>函数</h2><h3 id=\"文本处理函数\"><a href=\"#文本处理函数\" class=\"headerlink\" title=\"文本处理函数\"></a>文本处理函数</h3><div class=\"table-container\">\n<table>\n<thead>\n<tr>\n<th>函数</th>\n<th></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Concat()</td>\n<td>拼接</td>\n</tr>\n<tr>\n<td>Upper()</td>\n<td>转换成大写</td>\n</tr>\n<tr>\n<td>Lower()</td>\n<td>转换成小写</td>\n</tr>\n<tr>\n<td>Trim()</td>\n<td>去前后指定的空格和字符</td>\n</tr>\n<tr>\n<td>Left()</td>\n<td>返回串左边的字符</td>\n</tr>\n<tr>\n<td>Length()</td>\n<td>返回串的长度</td>\n</tr>\n<tr>\n<td>Locate()</td>\n<td>找出串的一个子串</td>\n</tr>\n<tr>\n<td>Lower()</td>\n<td>将串转换为小写</td>\n</tr>\n<tr>\n<td>LTrim()</td>\n<td>去掉串左边的空格</td>\n</tr>\n<tr>\n<td>Right()</td>\n<td>返回串右边的字符</td>\n</tr>\n<tr>\n<td>RTrim()</td>\n<td>去掉串右边的空格</td>\n</tr>\n<tr>\n<td>Soundex()</td>\n<td>返回串的SOUNDEX值</td>\n</tr>\n<tr>\n<td>SubString()</td>\n<td>返回子串的字符</td>\n</tr>\n<tr>\n<td>Upper()</td>\n<td>将串转换为大写</td>\n</tr>\n<tr>\n<td>Replace()</td>\n<td>替换</td>\n</tr>\n<tr>\n<td>Lpad()</td>\n<td>左填充</td>\n</tr>\n<tr>\n<td>Rpad()</td>\n<td>右填充</td>\n</tr>\n<tr>\n<td>Instr()</td>\n<td>返回子串第一次出现的索引</td>\n</tr>\n</tbody>\n</table>\n</div>\n<h3 id=\"数值和日期时间处理函数\"><a href=\"#数值和日期时间处理函数\" class=\"headerlink\" title=\"数值和日期时间处理函数\"></a>数值和日期时间处理函数</h3><div class=\"table-container\">\n<table>\n<thead>\n<tr>\n<th>数值函数</th>\n<th>日期函数</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Abs()</td>\n<td>AddData()</td>\n</tr>\n<tr>\n<td>Cos()</td>\n<td>AddTime()</td>\n</tr>\n<tr>\n<td>Exp()</td>\n<td>CurData() 当前系统日期</td>\n</tr>\n<tr>\n<td>Mod() 取余</td>\n<td>Date()</td>\n</tr>\n<tr>\n<td>Pi()</td>\n<td>Day()</td>\n</tr>\n<tr>\n<td>Rand()  随机数</td>\n<td>Hour()</td>\n</tr>\n<tr>\n<td>Sin()</td>\n<td>Minute()</td>\n</tr>\n<tr>\n<td>Sqrt()</td>\n<td>Now() 当前系统日期+时间</td>\n</tr>\n<tr>\n<td>Tan()</td>\n<td>Year()</td>\n</tr>\n<tr>\n<td>Round() 四舍五入</td>\n<td>Curtime() 当前系统时间</td>\n</tr>\n<tr>\n<td>Floor() 向下取整</td>\n<td>Str_to_date() 将字符转换成日期</td>\n</tr>\n<tr>\n<td>Ceil() 向上取整</td>\n<td>Date_format() 将日期转换成字符</td>\n</tr>\n<tr>\n<td>Truncate() 截断</td>\n</tr>\n</tbody>\n</table>\n</div>\n<h3 id=\"SQL聚集函数\"><a href=\"#SQL聚集函数\" class=\"headerlink\" title=\"SQL聚集函数\"></a>SQL聚集函数</h3><div class=\"table-container\">\n<table>\n<thead>\n<tr>\n<th>函数</th>\n<th></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>AVG()</td>\n<td>mysql&gt; SELECT AVG(列名) from 表名;</td>\n</tr>\n<tr>\n<td>COUNT()</td>\n<td>mysql&gt; SELECT COUNT(列名) from 表名;</td>\n</tr>\n<tr>\n<td>MAX()</td>\n<td>mysql&gt; SELECT MAX(列名) from 表名;</td>\n</tr>\n<tr>\n<td>MIN()</td>\n<td>mysql&gt; SELECT MIN(列名) from 表名;</td>\n</tr>\n<tr>\n<td>SUM()</td>\n<td>mysql&gt; SELECT SUM(列名) from 表名;</td>\n</tr>\n</tbody>\n</table>\n</div>\n<pre><code>特点：\n1、以上五个分组函数都忽略null值，除了count(*)\n2、sum和avg一般用于处理数值型\n    max、min、count可以处理任何数据类型\n3、都可以搭配distinct使用，用于统计去重后的结果\n4、count的参数可以支持：\n    字段、*、常量值，一般放1\n\n   建议使用 count(*)\n</code></pre><h3 id=\"流程控制函数\"><a href=\"#流程控制函数\" class=\"headerlink\" title=\"流程控制函数\"></a>流程控制函数</h3><div class=\"table-container\">\n<table>\n<thead>\n<tr>\n<th>函数</th>\n<th></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>IF(判断条件，返回1，返回2)</td>\n<td></td>\n</tr>\n<tr>\n<td>case语句</td>\n<td>处理多分支：处理等值判断、处理条件判断</td>\n</tr>\n<tr>\n<td></td>\n</tr>\n</tbody>\n</table>\n</div>\n<h3 id=\"其他函数\"><a href=\"#其他函数\" class=\"headerlink\" title=\"其他函数\"></a>其他函数</h3><div class=\"table-container\">\n<table>\n<thead>\n<tr>\n<th>函数</th>\n<th></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>version() 版本</td>\n<td></td>\n</tr>\n<tr>\n<td>database() 当前库</td>\n<td></td>\n</tr>\n<tr>\n<td>user() 当前连接用户</td>\n<td></td>\n</tr>\n<tr>\n<td>password(‘字符’)：返回该字符的密码形式</td>\n<td></td>\n</tr>\n<tr>\n<td>md5(‘字符’):返回该字符的md5加密形式</td>\n</tr>\n</tbody>\n</table>\n</div>\n<h3 id=\"子查询\"><a href=\"#子查询\" class=\"headerlink\" title=\"子查询\"></a>子查询</h3><p>嵌套在其他查询中的查询,在外面的查询语句，称为主查询或外查询。</p>\n<pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">SELECT cust_id\nFROM orders\nWHERE order_num IN (SELECT order_num\n                     FROM orderitems\n                     WHERE prod_id = 'TNT2');\n/*\n1、子查询都放在小括号内\n2、子查询可以放在from后面、select后面、where后面、having后面，但一般放在条件的右侧\n3、子查询优先于主查询执行，主查询使用了子查询的执行结果\n4、子查询根据查询结果的行数不同分为以下两类：\n① 单行子查询\n\t结果集只有一行\n\t一般搭配单行操作符使用：&gt; &lt; = &lt;&gt; &gt;= &lt;= \n\t非法使用子查询的情况：\n\ta、子查询的结果为一组值\n\tb、子查询的结果为空\n\t\n② 多行子查询\n\t结果集有多行\n\t一般搭配多行操作符使用：any、all、in、not in\n\tin： 属于子查询结果中的任意一个就行\n\tany和all往往可以用其他查询代替\n\t*/<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"连接表jion\"><a href=\"#连接表jion\" class=\"headerlink\" title=\"连接表jion\"></a>连接表jion</h3><p>联结是一种机制，用来在一条SELECT语句中关联表，因此称之为联结。使用特殊的语法，可以联结多个表返回一组输出，联结在运行时关联表中正确的行。</p>\n<pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">#等值联结（equijoin）\nSELECT *\nFROM A,B\nWHERE A.c=B.c;\n\n1.等值连接的结果 = 多个表的交集\n2.n表连接，至少需要n-1个连接条件\n3.多个表不分主次，没有顺序要求\n4.一般为表起别名，提高阅读性和性能\n\n#内部联结\nSELECT *\nFROM A INNER JOIN B\nWHERE A.c=B.c;\n#自然联结\nSELECT *\nFROM A AS a,A AS b\nWHERE a.c=b.c;\n#外部联结\nSELECT *\nFROM A OUTER JOIN B\nWHERE A.c=B.c;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>性能考虑 MySQL在运行时关联指定的每个表以处理联结。这种处理可能是非常耗费资源的，因此应该仔细，不要联结不必要的表。联结的表越多，性能下降越厉害。</p>\n<ul>\n<li>自然联结：无论何时对表进行联结，应该至少有一个列出现在不止一个表中（被联结的列）。自然联结排除多次出现，使每个列只返回一次。</li>\n<li>外部联结：许多联结将一个表中的行与另一个表中的行相关联。但有时候会需要包含没有关联行的那些行。</li>\n</ul>\n<h3 id=\"sql99语法：通过join关键字实现连接\"><a href=\"#sql99语法：通过join关键字实现连接\" class=\"headerlink\" title=\"sql99语法：通过join关键字实现连接\"></a>sql99语法：通过join关键字实现连接</h3><pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">含义：1999年推出的sql语法\n支持：\n等值连接、非等值连接 （内连接）\n外连接\n交叉连接\n\n语法：\n\nselect 字段，...\nfrom 表1\n【inner|left outer|right outer|cross】join 表2 on  连接条件\n【inner|left outer|right outer|cross】join 表3 on  连接条件\n【where 筛选条件】\n【group by 分组字段】\n【having 分组后的筛选条件】\n【order by 排序的字段或表达式】\n\n好处：语句上，连接条件和筛选条件实现了分离，简洁明了！<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"别名\"><a href=\"#别名\" class=\"headerlink\" title=\"别名\"></a>别名</h3><p>AS:别名简化编码</p>\n<pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">SELECT name as n\nFROM papa as p,Baba as b\nWHERE p.c=b.c;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"分页查询\"><a href=\"#分页查询\" class=\"headerlink\" title=\"分页查询\"></a>分页查询</h3><p>应用场景：实际的web项目中需要根据用户的需求提交对应的分页查询的sql语句</p>\n<pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">select 字段|表达式,...\nfrom 表\n【where 条件】\n【group by 分组字段】\n【having 条件】\n【order by 排序的字段】\nlimit 【起始的条目索引，】条目数;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>特点：</p>\n<pre><code>1.起始条目索引从0开始\n\n2.limit子句放在查询语句的最后\n\n3.公式：select * from  表 limit （page-1）*sizePerPage,sizePerPage\n假如:\n每页显示条目数sizePerPage\n要显示的页数 page\n</code></pre><h3 id=\"联合查询\"><a href=\"#联合查询\" class=\"headerlink\" title=\"联合查询\"></a>联合查询</h3><p>union 联合、合并</p>\n<pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">select 字段|常量|表达式|函数 【from 表】 【where 条件】 union 【all】\nselect 字段|常量|表达式|函数 【from 表】 【where 条件】 union 【all】\nselect 字段|常量|表达式|函数 【from 表】 【where 条件】 union  【all】\n.....\nselect 字段|常量|表达式|函数 【from 表】 【where 条件】<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>特点：</p>\n<pre><code>1、多条查询语句的查询的列数必须是一致的\n2、多条查询语句的查询的列的类型几乎相同\n3、union代表去重，union all代表不去重\n</code></pre><h1 id=\"4-DML语言\"><a href=\"#4-DML语言\" class=\"headerlink\" title=\"4. DML语言\"></a>4. DML语言</h1><p>数据操作语言：insert、update、delete</p>\n<h2 id=\"4-1-插入\"><a href=\"#4-1-插入\" class=\"headerlink\" title=\"4.1 插入\"></a>4.1 插入</h2><p>语法：</p>\n<pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">insert into 表名(字段名，...)\nvalues(值1，...);\n\n# 支持一次插入多行，语法如下：\ninsert into 表名【(字段名,..)】 values(值，..),(值，...),...;\n\n#支持子查询，语法如下：\ninsert into 表名 查询语句;\n\ninsert into 表名 set 字段=值,字段=值,...;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>特点：</p>\n<ol>\n<li>字段类型和值类型一致或兼容，而且一一对应</li>\n<li>可以为空的字段，可以不用插入值，或用null填充</li>\n<li>不可以为空的字段，必须插入值</li>\n<li>字段个数和值的个数必须一致</li>\n<li>字段可以省略，但默认所有字段，并且顺序和表中的存储顺序一致</li>\n</ol>\n<h2 id=\"4-2-修改\"><a href=\"#4-2-修改\" class=\"headerlink\" title=\"4.2 修改\"></a>4.2 修改</h2><p>修改单表语法：</p>\n<pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">update 表名 set 字段=新值,字段=新值\n【where 条件】<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n<p>修改多表语法：</p>\n<pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">update 表1 别名1,表2 别名2\nset 字段=新值，字段=新值\nwhere 连接条件\nand 筛选条件<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"4-3-删除\"><a href=\"#4-3-删除\" class=\"headerlink\" title=\"4.3 删除\"></a>4.3 删除</h2><h3 id=\"方式1：delete语句\"><a href=\"#方式1：delete语句\" class=\"headerlink\" title=\"方式1：delete语句\"></a>方式1：delete语句</h3><p>单表的删除： ★</p>\n<pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">delete from 表名 【where 筛选条件】<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>多表的删除：<br>    delete 别名1，别名2<br>    from 表1 别名1，表2 别名2<br>    where 连接条件<br>    and 筛选条件;</p>\n<h3 id=\"方式2：truncate语句\"><a href=\"#方式2：truncate语句\" class=\"headerlink\" title=\"方式2：truncate语句\"></a>方式2：truncate语句</h3><pre><code>truncate table 表名\n</code></pre><p>两种方式的区别【面试题】</p>\n<pre><code>#1.truncate不能加where条件，而delete可以加where条件\n\n#2.truncate的效率高一丢丢\n\n#3.truncate 删除带自增长的列的表后，如果再插入数据，数据从1开始\n#delete 删除带自增长列的表后，如果再插入数据，数据从上一次的断点处开始\n\n#4.truncate删除不能回滚，delete删除可以回滚\n</code></pre><h1 id=\"5-DDL语言\"><a href=\"#5-DDL语言\" class=\"headerlink\" title=\"5. DDL语言\"></a>5. DDL语言</h1><p>数据定义语言：create、drop、alter</p>\n<h3 id=\"5-1-库和表的管理\"><a href=\"#5-1-库和表的管理\" class=\"headerlink\" title=\"5.1 库和表的管理\"></a>5.1 库和表的管理</h3><pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">一、创建库\ncreate database 库名\n二、删除库\ndrop database 库名<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"5-2-创建表-create\"><a href=\"#5-2-创建表-create\" class=\"headerlink\" title=\"5.2 创建表 create\"></a>5.2 创建表 create</h2><p>create table 表名(</p>\n<p>  字段名 字段类型 not null,#非空</p>\n<p>  字段名 字段类型 primary key,#主键</p>\n<p>  字段名 字段类型 unique,#唯一</p>\n<p>  字段名 字段类型 default 值,#默认</p>\n<p>  constraint 约束名 foreign key(字段名) references 主表（被引用列）</p>\n<p>)</p>\n<pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">CREATE TABLE IF NOT EXISTS stuinfo(\n\tstuId INT,\n\tstuName VARCHAR(20),\n\tgender CHAR,\n\tbornDate DATETIME\n);\nDESC studentinfo;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<div class=\"table-container\">\n<table>\n<thead>\n<tr>\n<th></th>\n<th>支持类型</th>\n<th>可以起约束名</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>列级约束</td>\n<td>除了外键</td>\n<td>不可以</td>\n</tr>\n<tr>\n<td>表级约束</td>\n<td>除了非空和默认</td>\n<td>可以，但对主键无效</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>列级约束可以在一个字段上追加多个，中间用空格隔开，没有顺序要求</p>\n<p><strong>常见类型</strong></p>\n<p><img src=\"https://img2018.cnblogs.com/blog/1426438/201904/1426438-20190426204944770-2126795279.png\" alt=\"\"></p>\n<p><strong>常见约束</strong></p>\n<p>NOT NULL：非空，该字段的值必填</p>\n<p>UNIQUE：唯一，该字段的值不可重复</p>\n<p>DEFAULT：默认，该字段的值不用手动插入有默认值</p>\n<p>CHECK：检查，mysql不支持</p>\n<p>PRIMARY KEY：主键，该字段的值不可重复并且非空 unique+not null</p>\n<p>FOREIGN KEY：外键，该字段的值引用了另外的表的字段</p>\n<p><strong>主键和唯一</strong></p>\n<p>1、区别：</p>\n<p>①、一个表至多有一个主键，但可以有多个唯一</p>\n<p>②、主键不允许为空，唯一可以为空</p>\n<p>2、相同点</p>\n<p>都具有唯一性，都支持组合键，但不推荐</p>\n<p><strong>外键：</strong></p>\n<ol>\n<li>用于限制两个表的关系，从表的字段值引用了主表的某字段值</li>\n<li>外键列和主表的被引用列要求类型一致，意义一样，名称无要求</li>\n<li>主表的被引用列要求是一个key（一般就是主键）</li>\n<li>插入数据，先插入主表，删除数据，先删除从表</li>\n</ol>\n<p><strong>可以通过以下两种方式来删除主表的记录</strong></p>\n<pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">#方式一：级联删除\nALTER TABLE stuinfo ADD CONSTRAINT fk_stu_major FOREIGN KEY(majorid) REFERENCES major(id) ON DELETE CASCADE;\n\n#方式二：级联置空\nALTER TABLE stuinfo ADD CONSTRAINT fk_stu_major FOREIGN KEY(majorid) REFERENCES major(id) ON DELETE SET NULL;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h4 id=\"自增长列\"><a href=\"#自增长列\" class=\"headerlink\" title=\"自增长列\"></a><strong>自增长列</strong></h4><p>特点：</p>\n<ol>\n<li>不用手动插入值，可以自动提供序列值，默认从1开始，步长为1</li>\n</ol>\n<p>如果要更改起始值：手动插入值</p>\n<p>如果要更改步长：更改系统变量</p>\n<p>set auto_increment_increment=值;</p>\n<ol>\n<li><p>一个表至多有一个自增长列</p>\n</li>\n<li><p>自增长列只能支持数值型</p>\n</li>\n<li><p>自增长列必须为一个key</p>\n</li>\n</ol>\n<p><strong>创建表时设置自增长列</strong></p>\n<pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">create table 表(\n\t字段名 字段类型 约束 auto_increment\n)<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p><strong>修改表时设置自增长列</strong></p>\n<pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">alter table 表 modify column 字段名 字段类型 约束 auto_increment<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><strong>删除自增长列</strong></p>\n<pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">alter table 表 modify column 字段名 字段类型 约束 <span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<h2 id=\"5-3-修改表-alter\"><a href=\"#5-3-修改表-alter\" class=\"headerlink\" title=\"5.3 修改表 alter\"></a>5.3 修改表 alter</h2><pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">语法：ALTER TABLE 表名 ADD|MODIFY|DROP|CHANGE COLUMN 字段名 【字段类型】;\n\n#修改字段名\nALTER TABLE studentinfo CHANGE  COLUMN sex gender CHAR;\n\n#修改表名\nALTER TABLE stuinfo RENAME [TO]  studentinfo;\n\n#修改字段类型和列级约束\nALTER TABLE studentinfo MODIFY COLUMN borndate DATE ;\n\n#添加字段\nALTER TABLE studentinfo ADD COLUMN email VARCHAR(20) first;\n\n#删除字段\nALTER TABLE studentinfo DROP COLUMN email;\n\n#添加列\nalter table 表名 add column 列名 类型 【first|after 字段名】;\n\n#修改列名\nalter table 表名 change column 旧列名 新列名 类型;\n\n#删除列\nalter table 表名 drop column 列名;\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p><strong>修改表时添加或删除约束</strong></p>\n<pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">1、非空\n添加非空\nalter table 表名 modify column 字段名 字段类型 not null;\n删除非空\nalter table 表名 modify column 字段名 字段类型 ;\n\n2、默认\n添加默认\nalter table 表名 modify column 字段名 字段类型 default 值;\n删除默认\nalter table 表名 modify column 字段名 字段类型 ;\n3、主键\n添加主键\nalter table 表名 add【 constraint 约束名】 primary key(字段名);\n删除主键\nalter table 表名 drop primary key;\n\n4、唯一\n添加唯一\nalter table 表名 add【 constraint 约束名】 unique(字段名);\n删除唯一\nalter table 表名 drop index 索引名;\n5、外键\n添加外键\nalter table 表名 add【 constraint 约束名】 foreign key(字段名) references 主表（被引用列）;\n删除外键\nalter table 表名 drop foreign key 约束名;\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"5-4-删除表\"><a href=\"#5-4-删除表\" class=\"headerlink\" title=\"5.4 删除表\"></a>5.4 删除表</h3><pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">DROP TABLE [IF EXISTS] studentinfo;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><strong>复制表</strong></p>\n<ol>\n<li>复制表的结构<br>create table 表名 like 旧表;</li>\n<li>复制表的结构+数据<br>create table 表名<br>select 查询列表 from 旧表【where 筛选】;</li>\n</ol>\n<h1 id=\"6-TCL语言\"><a href=\"#6-TCL语言\" class=\"headerlink\" title=\"6. TCL语言\"></a>6. TCL语言</h1><p>事务控制语言：commit、rollback</p>\n<h2 id=\"6-1-数据库事务\"><a href=\"#6-1-数据库事务\" class=\"headerlink\" title=\"6.1 数据库事务\"></a>6.1 数据库事务</h2><p><strong>含义</strong>：通过一组逻辑操作单元（一组DML——sql语句），将数据从一种状态切换到另外一种状态</p>\n<p><strong>特点（ACID）：</strong></p>\n<ol>\n<li>原子性：要么都执行，要么都回滚</li>\n<li>一致性：保证数据的状态操作前和操作后保持一致</li>\n<li>隔离性：多个事务同时操作相同数据库的同一个数据时，一个事务的执行不受另外一个事务的干扰</li>\n<li>持久性：一个事务一旦提交，则数据将持久化到本地，除非其他事务对其进行修改</li>\n</ol>\n<h3 id=\"相关步骤：\"><a href=\"#相关步骤：\" class=\"headerlink\" title=\"相关步骤：\"></a>相关步骤：</h3><ol>\n<li>开启事务</li>\n<li>编写事务的一组逻辑操作单元（多条sql语句）</li>\n<li>提交事务或回滚事务</li>\n</ol>\n<h3 id=\"事务的分类：\"><a href=\"#事务的分类：\" class=\"headerlink\" title=\"事务的分类：\"></a>事务的分类：</h3><p><strong>隐式事务</strong>，没有明显的开启和结束事务的标志，比如 insert、update、delete语句本身就是一个事务</p>\n<p><strong>显式事务</strong>，具有明显的开启和结束事务的标志</p>\n<pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">1、开启事务\n取消自动提交事务的功能\n\n2、编写事务的一组逻辑操作单元（多条sql语句）\ninsert\nupdate\ndelete\n\n3、提交事务或回滚事务<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"使用到的关键字\"><a href=\"#使用到的关键字\" class=\"headerlink\" title=\"使用到的关键字\"></a>使用到的关键字</h3><pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">set autocommit=0;\nstart transaction;\ncommit;\nrollback;\n\nsavepoint  断点\ncommit to 断点\nrollback to 断点<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h3 id=\"事务的隔离级别\"><a href=\"#事务的隔离级别\" class=\"headerlink\" title=\"事务的隔离级别:\"></a>事务的隔离级别:</h3><p>事务并发问题如何发生？</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>当多个事务同时操作同一个数据库的相同数据时</p></blockquote>\n<p>事务的并发问题有哪些？</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p><strong>脏读</strong>：一个事务读取到了另外一个事务未提交的数据<br><strong>不可重复读</strong>：同一个事务中，多次读取到的数据不一致<br><strong>幻读</strong>：一个事务读取数据时，另外一个事务进行更新，导致第一个事务读取到了没有更新的数据</p></blockquote>\n<p>如何避免事务的并发问题？</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>通过设置事务的隔离级别<br>1、READ UNCOMMITTED<br>2、READ COMMITTED 可以避免脏读<br>3、REPEATABLE READ 可以避免脏读、不可重复读和一部分幻读<br>4、SERIALIZABLE可以避免脏读、不可重复读和幻读</p></blockquote>\n<p>设置隔离级别：</p>\n<pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">set session|global  transaction isolation level 隔离级别名;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>查看隔离级别：</p>\n<pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">select @@tx_isolation;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<h1 id=\"7-视图\"><a href=\"#7-视图\" class=\"headerlink\" title=\"7. 视图\"></a>7. 视图</h1><p>含义：理解成一张虚拟的表</p>\n<p>视图和表的区别：</p>\n<div class=\"table-container\">\n<table>\n<thead>\n<tr>\n<th></th>\n<th>使用方式</th>\n<th>占用物理空间</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>视图</td>\n<td>完全相同</td>\n<td>占用物理空间</td>\n</tr>\n<tr>\n<td>表</td>\n<td>完全相同</td>\n<td>占用</td>\n</tr>\n<tr>\n<td></td>\n<td></td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>视图的好处：</p>\n<ol>\n<li>sql语句提高重用性，效率高</li>\n<li>和表实现了分离，提高了安全性</li>\n</ol>\n<h2 id=\"7-1-视图的创建、删除、查看\"><a href=\"#7-1-视图的创建、删除、查看\" class=\"headerlink\" title=\"7.1 视图的创建、删除、查看\"></a>7.1 视图的创建、删除、查看</h2><pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">CREATE VIEW  视图名\nAS\n查询语句;\n\n#视图的删除\nDROP VIEW test_v1,test_v2,test_v3;\n\n###视图结构的查看\t\nDESC test_v7;\nSHOW CREATE VIEW test_v7;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"7-2-视图的增删改查\"><a href=\"#7-2-视图的增删改查\" class=\"headerlink\" title=\"7.2 视图的增删改查\"></a>7.2 视图的增删改查</h2><pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">1、查看视图的数据 ★\nSELECT * FROM my_v4;\nSELECT * FROM my_v1 WHERE last_name='Partners';\n\n2、插入视图的数据\nINSERT INTO my_v4(last_name,department_id) VALUES('虚竹',90);\n\n3、修改视图的数据\nUPDATE my_v4 SET last_name ='梦姑' WHERE last_name='虚竹';\n\n4、删除视图的数据\nDELETE FROM my_v4;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p>​    </p>\n<h2 id=\"7-3-某些视图不能更新\"><a href=\"#7-3-某些视图不能更新\" class=\"headerlink\" title=\"7.3 某些视图不能更新\"></a>7.3 某些视图不能更新</h2><p>​    包含以下关键字的sql语句：</p>\n<ul>\n<li>分组函数、distinct、group  by、having、union或者union all</li>\n<li>常量视图</li>\n<li>Select中包含子查询</li>\n<li>join</li>\n<li>from一个不能更新的视图</li>\n<li>where子句的子查询引用了from子句中的表</li>\n<li></li>\n</ul>\n<h2 id=\"7-4-视图逻辑的更新\"><a href=\"#7-4-视图逻辑的更新\" class=\"headerlink\" title=\"7.4 视图逻辑的更新\"></a>7.4 视图逻辑的更新</h2><pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">#方式一：\nCREATE OR REPLACE VIEW test_v7\nAS\nSELECT last_name FROM employees\nWHERE employee_id&gt;100;\n\n#方式二:\nALTER VIEW test_v7\nAS\nSELECT employee_id FROM employees;\n\nSELECT * FROM test_v7;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h1 id=\"8-存储过程\"><a href=\"#8-存储过程\" class=\"headerlink\" title=\"8 存储过程\"></a>8 存储过程</h1><p>含义：一组经过预先编译的sql语句的集合<br>好处：</p>\n<ol>\n<li>提高了sql语句的重用性，减少了开发程序员的压力</li>\n<li>提高了效率</li>\n<li>减少了传输次数</li>\n</ol>\n<p>分类：</p>\n<p>1、无返回无参<br>2、仅仅带in类型，无返回有参<br>3、仅仅带out类型，有返回无参<br>4、既带in又带out，有返回有参<br>5、带inout，有返回有参<br>注意：in、out、inout都可以在一个存储过程中带多个</p>\n<h2 id=\"8-1-创建存储过程\"><a href=\"#8-1-创建存储过程\" class=\"headerlink\" title=\"8.1 创建存储过程\"></a>8.1 创建存储过程</h2><p>语法：</p>\n<pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">create procedure 存储过程名(in|out|inout 参数名  参数类型,...)\nbegin\n\t存储过程体\nend<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<p>类似于方法：</p>\n<pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">修饰符 返回类型 方法名(参数类型 参数名,...){\n\n\t方法体;\n}<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<p><strong>注意</strong></p>\n<ol>\n<li>需要设置新的结束标记delimiter 新的结束标记</li>\n</ol>\n<pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">示例：\ndelimiter $\n\nCREATE PROCEDURE 存储过程名(IN|OUT|INOUT 参数名  参数类型,...)\nBEGIN\n\tsql语句1;\n\tsql语句2;\n\nEND $\n<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<ol>\n<li><p>存储过程体中可以有多条sql语句，如果仅仅一条sql语句，则可以省略begin end</p>\n</li>\n<li><p>参数前面的符号的意思<br>in:该参数只能作为输入 （该参数不能做返回值）<br>out：该参数只能作为输出（该参数只能做返回值）<br>inout：既能做输入又能做输出</p>\n</li>\n</ol>\n<h2 id=\"8-2-调用存储过程\"><a href=\"#8-2-调用存储过程\" class=\"headerlink\" title=\"8.2 调用存储过程\"></a>8.2 调用存储过程</h2><p>call 存储过程名(实参列表)</p>\n<p>学过的函数：LENGTH、SUBSTR、CONCAT等<br>语法：</p>\n<pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">CREATE FUNCTION 函数名(参数名 参数类型,...) RETURNS 返回类型\nBEGIN\n\t函数体\n\nEND<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p><strong>调用函数</strong>：SELECT 函数名（实参列表）</p>\n<p>函数和存储过程的区别</p>\n<div class=\"table-container\">\n<table>\n<thead>\n<tr>\n<th></th>\n<th>关键字</th>\n<th>调用语法</th>\n<th>返回值</th>\n<th>应用场景</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>函数</td>\n<td>FUNCTION</td>\n<td>SELECT</td>\n<td>只能是一个</td>\n<td>一般用于查询结果为一个值并返回时，当有返回值而且仅仅一个</td>\n</tr>\n<tr>\n<td>存储过程</td>\n<td>PROCEDURE</td>\n<td>CALL</td>\n<td>可以有0个或多个</td>\n<td>一般用于更新</td>\n</tr>\n</tbody>\n</table>\n</div>\n<h2 id=\"8-3-查看存储过程\"><a href=\"#8-3-查看存储过程\" class=\"headerlink\" title=\"8.3 查看存储过程\"></a>8.3 查看存储过程</h2><p>show create procedure 存储过程名;</p>\n<h2 id=\"8-4-删除\"><a href=\"#8-4-删除\" class=\"headerlink\" title=\"8.4 删除\"></a><strong>8.4 删除</strong></h2><p>drop procedure 存储过程名;</p>\n<h1 id=\"9-流程控制结构\"><a href=\"#9-流程控制结构\" class=\"headerlink\" title=\"9 流程控制结构\"></a>9 流程控制结构</h1><h2 id=\"9-1-系统变量\"><a href=\"#9-1-系统变量\" class=\"headerlink\" title=\"9.1 系统变量\"></a>9.1 系统变量</h2><p><strong>全局变量</strong></p>\n<p>作用域：针对于所有会话（连接）有效，但不能跨重启</p>\n<pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">查看所有全局变量\nSHOW GLOBAL VARIABLES;\n查看满足条件的部分系统变量\nSHOW GLOBAL VARIABLES LIKE '%char%';\n查看指定的系统变量的值\nSELECT @@global.autocommit;\n为某个系统变量赋值\nSET @@global.autocommit=0;\nSET GLOBAL autocommit=0;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<p><strong>会话变量</strong></p>\n<p>作用域：针对于当前会话（连接）有效</p>\n<pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">查看所有会话变量\nSHOW SESSION VARIABLES;\n查看满足条件的部分会话变量\nSHOW SESSION VARIABLES LIKE '%char%';\n查看指定的会话变量的值\nSELECT @@autocommit;\nSELECT @@session.tx_isolation;\n为某个会话变量赋值\nSET @@session.tx_isolation='read-uncommitted';\nSET SESSION tx_isolation='read-committed';<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>\n<h2 id=\"9-2-自定义变量\"><a href=\"#9-2-自定义变量\" class=\"headerlink\" title=\"9.2 自定义变量\"></a>9.2 自定义变量</h2><p><strong>用户变量</strong></p>\n<p>声明并初始化：</p>\n<pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">SET @变量名=值;\nSET @变量名:=值;\nSELECT @变量名:=值;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p>赋值：</p>\n<pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">方式一：一般用于赋简单的值\nSET 变量名=值;\nSET 变量名:=值;\nSELECT 变量名:=值;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">方式二：一般用于赋表 中的字段值\nSELECT 字段名或表达式 INTO 变量\nFROM 表;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p>使用：</p>\n<pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">select @变量名;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p><strong>局部变量</strong></p>\n<p>声明：</p>\n<pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">declare 变量名 类型 【default 值】;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>赋值：</p>\n<pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">方式一：一般用于赋简单的值\nSET 变量名=值;\nSET 变量名:=值;\nSELECT 变量名:=值;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span><span></span></span></code></pre>\n<pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">方式二：一般用于赋表 中的字段值\nSELECT 字段名或表达式 INTO 变量\nFROM 表;<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n<p>使用：</p>\n<pre class=\"line-numbers language-mysql\" data-language=\"mysql\"><code class=\"language-mysql\">select 变量名<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n<p>二者的区别：</p>\n<div class=\"table-container\">\n<table>\n<thead>\n<tr>\n<th></th>\n<th>作用域</th>\n<th>定义位置</th>\n<th>语法</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>语法</td>\n<td>当前会话</td>\n<td>会话的任何地方</td>\n<td>加@符号，不用指定类型</td>\n</tr>\n<tr>\n<td>局部变量</td>\n<td>定义它的BEGIN END中</td>\n<td>BEGIN END的第一句话</td>\n<td>一般不用加@,需要指定类型</td>\n</tr>\n</tbody>\n</table>\n</div>\n<h2 id=\"9-3-分支\"><a href=\"#9-3-分支\" class=\"headerlink\" title=\"9.3 分支\"></a>9.3 分支</h2><p><strong>if函数</strong><br>    语法：if(条件，值1，值2)<br>    特点：可以用在任何位置</p>\n<p><strong>case语句</strong></p>\n<pre><code>情况一：类似于switch\ncase 表达式\nwhen 值1 then 结果1或语句1(如果是语句，需要加分号) \nwhen 值2 then 结果2或语句2(如果是语句，需要加分号)\n...\nelse 结果n或语句n(如果是语句，需要加分号)\nend 【case】（如果是放在begin end中需要加上case，如果放在select后面不需要）\n\n情况二：类似于多重if\ncase \nwhen 条件1 then 结果1或语句1(如果是语句，需要加分号) \nwhen 条件2 then 结果2或语句2(如果是语句，需要加分号)\n...\nelse 结果n或语句n(如果是语句，需要加分号)\nend 【case】（如果是放在begin end中需要加上case，如果放在select后面不需要）\n</code></pre><p>特点：可以用在任何位置</p>\n<p><strong>if elseif语句</strong></p>\n<pre><code>if 情况1 then 语句1;\nelseif 情况2 then 语句2;\n...\nelse 语句n;\nend if;\n</code></pre><p>特点：只能用在begin end中！！！！！！！！！！！！！！！<br>应用场合</p>\n<ol>\n<li>if函数：简单双分支</li>\n<li>case结构：等值判断 的多分支</li>\n<li>if结构：区间判断 的多分支</li>\n</ol>\n<h2 id=\"9-4-循环\"><a href=\"#9-4-循环\" class=\"headerlink\" title=\"9.4 循环\"></a>9.4 循环</h2><pre><code>【标签：】WHILE 循环条件  DO\n    循环体\nEND WHILE 【标签】;\n</code></pre><p>特点：</p>\n<p>只能放在BEGIN END里面</p>\n<p>如果要搭配leave跳转语句，需要使用标签，否则可以不用标签</p>\n<p>leave类似于java中的break语句，跳出所在循环！！！</p>\n","text":"1 MySQL概述1.1 数据库概述数据库的好处持久化数据到本地可以实现结构化查询，方便管理 数据库相关概念DB：数据库，保存一组有组织的数据的容器DBMS：数据库管理系统，又称为数据库软件（产品），用于管理DB中的数据SQL:结构化查询语言，用于和DBMS通信的语言 数据库存储...","link":"","photos":[],"count_time":{"symbolsCount":"16k","symbolsTime":"15 mins."},"categories":[{"name":"数据库","slug":"数据库","count":1,"path":"api/categories/数据库.json"}],"tags":[{"name":"MySQL","slug":"MySQL","count":2,"path":"api/tags/MySQL.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#1-MySQL%E6%A6%82%E8%BF%B0\"><span class=\"toc-text\">1 MySQL概述</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#1-1-%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A6%82%E8%BF%B0\"><span class=\"toc-text\">1.1 数据库概述</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%A5%BD%E5%A4%84\"><span class=\"toc-text\">数据库的好处</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9B%B8%E5%85%B3%E6%A6%82%E5%BF%B5\"><span class=\"toc-text\">数据库相关概念</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AD%98%E5%82%A8%E6%95%B0%E6%8D%AE%E7%9A%84%E7%89%B9%E7%82%B9\"><span class=\"toc-text\">数据库存储数据的特点</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#1-2-MySQL%E7%9A%84%E8%83%8C%E6%99%AF\"><span class=\"toc-text\">1.2 MySQL的背景</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#1-3-MySQL%E4%BA%A7%E5%93%81%E7%9A%84%E4%BB%8B%E7%BB%8D%E5%92%8C%E5%AE%89%E8%A3%85\"><span class=\"toc-text\">1.3 MySQL产品的介绍和安装</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#MySQL%E6%9C%8D%E5%8A%A1%E7%9A%84%E5%90%AF%E5%8A%A8%E5%92%8C%E5%81%9C%E6%AD%A2\"><span class=\"toc-text\">MySQL服务的启动和停止</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#MySQL%E6%9C%8D%E5%8A%A1%E7%9A%84%E7%99%BB%E5%BD%95%E5%92%8C%E9%80%80%E5%87%BA\"><span class=\"toc-text\">MySQL服务的登录和退出</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#MySQL%E7%9A%84%E8%AF%AD%E6%B3%95%E8%A7%84%E8%8C%83\"><span class=\"toc-text\">MySQL的语法规范</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#2-%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C\"><span class=\"toc-text\">2. 基本操作</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93\"><span class=\"toc-text\">创建数据库</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%A1%AE%E8%AE%A4%E5%AD%97%E6%AE%B5\"><span class=\"toc-text\">确认字段</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E8%A1%A8\"><span class=\"toc-text\">创建数据表</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE\"><span class=\"toc-text\">插入数据</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#SQL%E7%9A%84%E8%AF%AD%E8%A8%80%E5%88%86%E7%B1%BB\"><span class=\"toc-text\">SQL的语言分类</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#3-DQL%E8%AF%AD%E8%A8%80\"><span class=\"toc-text\">3. DQL语言</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#SELECT%E5%AD%90%E5%8F%A5%E9%A1%BA%E5%BA%8F\"><span class=\"toc-text\">SELECT子句顺序</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#WHERE%E5%AD%90%E5%8F%A5%E6%93%8D%E4%BD%9C%E7%AC%A6\"><span class=\"toc-text\">WHERE子句操作符</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%80%9A%E9%85%8D%E7%AC%A6LIKE%E7%94%A8%E6%B3%95\"><span class=\"toc-text\">通配符LIKE用法</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F\"><span class=\"toc-text\">正则表达式</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%87%BD%E6%95%B0\"><span class=\"toc-text\">函数</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0\"><span class=\"toc-text\">文本处理函数</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%95%B0%E5%80%BC%E5%92%8C%E6%97%A5%E6%9C%9F%E6%97%B6%E9%97%B4%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0\"><span class=\"toc-text\">数值和日期时间处理函数</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#SQL%E8%81%9A%E9%9B%86%E5%87%BD%E6%95%B0\"><span class=\"toc-text\">SQL聚集函数</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E5%87%BD%E6%95%B0\"><span class=\"toc-text\">流程控制函数</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%85%B6%E4%BB%96%E5%87%BD%E6%95%B0\"><span class=\"toc-text\">其他函数</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%AD%90%E6%9F%A5%E8%AF%A2\"><span class=\"toc-text\">子查询</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%BF%9E%E6%8E%A5%E8%A1%A8jion\"><span class=\"toc-text\">连接表jion</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#sql99%E8%AF%AD%E6%B3%95%EF%BC%9A%E9%80%9A%E8%BF%87join%E5%85%B3%E9%94%AE%E5%AD%97%E5%AE%9E%E7%8E%B0%E8%BF%9E%E6%8E%A5\"><span class=\"toc-text\">sql99语法：通过join关键字实现连接</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%88%AB%E5%90%8D\"><span class=\"toc-text\">别名</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2\"><span class=\"toc-text\">分页查询</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%81%94%E5%90%88%E6%9F%A5%E8%AF%A2\"><span class=\"toc-text\">联合查询</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#4-DML%E8%AF%AD%E8%A8%80\"><span class=\"toc-text\">4. DML语言</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#4-1-%E6%8F%92%E5%85%A5\"><span class=\"toc-text\">4.1 插入</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#4-2-%E4%BF%AE%E6%94%B9\"><span class=\"toc-text\">4.2 修改</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#4-3-%E5%88%A0%E9%99%A4\"><span class=\"toc-text\">4.3 删除</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%96%B9%E5%BC%8F1%EF%BC%9Adelete%E8%AF%AD%E5%8F%A5\"><span class=\"toc-text\">方式1：delete语句</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%96%B9%E5%BC%8F2%EF%BC%9Atruncate%E8%AF%AD%E5%8F%A5\"><span class=\"toc-text\">方式2：truncate语句</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#5-DDL%E8%AF%AD%E8%A8%80\"><span class=\"toc-text\">5. DDL语言</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#5-1-%E5%BA%93%E5%92%8C%E8%A1%A8%E7%9A%84%E7%AE%A1%E7%90%86\"><span class=\"toc-text\">5.1 库和表的管理</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#5-2-%E5%88%9B%E5%BB%BA%E8%A1%A8-create\"><span class=\"toc-text\">5.2 创建表 create</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E8%87%AA%E5%A2%9E%E9%95%BF%E5%88%97\"><span class=\"toc-text\">自增长列</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#5-3-%E4%BF%AE%E6%94%B9%E8%A1%A8-alter\"><span class=\"toc-text\">5.3 修改表 alter</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#5-4-%E5%88%A0%E9%99%A4%E8%A1%A8\"><span class=\"toc-text\">5.4 删除表</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#6-TCL%E8%AF%AD%E8%A8%80\"><span class=\"toc-text\">6. TCL语言</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#6-1-%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BA%8B%E5%8A%A1\"><span class=\"toc-text\">6.1 数据库事务</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%9B%B8%E5%85%B3%E6%AD%A5%E9%AA%A4%EF%BC%9A\"><span class=\"toc-text\">相关步骤：</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BA%8B%E5%8A%A1%E7%9A%84%E5%88%86%E7%B1%BB%EF%BC%9A\"><span class=\"toc-text\">事务的分类：</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BD%BF%E7%94%A8%E5%88%B0%E7%9A%84%E5%85%B3%E9%94%AE%E5%AD%97\"><span class=\"toc-text\">使用到的关键字</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BA%8B%E5%8A%A1%E7%9A%84%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB\"><span class=\"toc-text\">事务的隔离级别:</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#7-%E8%A7%86%E5%9B%BE\"><span class=\"toc-text\">7. 视图</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#7-1-%E8%A7%86%E5%9B%BE%E7%9A%84%E5%88%9B%E5%BB%BA%E3%80%81%E5%88%A0%E9%99%A4%E3%80%81%E6%9F%A5%E7%9C%8B\"><span class=\"toc-text\">7.1 视图的创建、删除、查看</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#7-2-%E8%A7%86%E5%9B%BE%E7%9A%84%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5\"><span class=\"toc-text\">7.2 视图的增删改查</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#7-3-%E6%9F%90%E4%BA%9B%E8%A7%86%E5%9B%BE%E4%B8%8D%E8%83%BD%E6%9B%B4%E6%96%B0\"><span class=\"toc-text\">7.3 某些视图不能更新</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#7-4-%E8%A7%86%E5%9B%BE%E9%80%BB%E8%BE%91%E7%9A%84%E6%9B%B4%E6%96%B0\"><span class=\"toc-text\">7.4 视图逻辑的更新</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#8-%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B\"><span class=\"toc-text\">8 存储过程</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#8-1-%E5%88%9B%E5%BB%BA%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B\"><span class=\"toc-text\">8.1 创建存储过程</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#8-2-%E8%B0%83%E7%94%A8%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B\"><span class=\"toc-text\">8.2 调用存储过程</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#8-3-%E6%9F%A5%E7%9C%8B%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B\"><span class=\"toc-text\">8.3 查看存储过程</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#8-4-%E5%88%A0%E9%99%A4\"><span class=\"toc-text\">8.4 删除</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#9-%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%E7%BB%93%E6%9E%84\"><span class=\"toc-text\">9 流程控制结构</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#9-1-%E7%B3%BB%E7%BB%9F%E5%8F%98%E9%87%8F\"><span class=\"toc-text\">9.1 系统变量</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#9-2-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F\"><span class=\"toc-text\">9.2 自定义变量</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#9-3-%E5%88%86%E6%94%AF\"><span class=\"toc-text\">9.3 分支</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#9-4-%E5%BE%AA%E7%8E%AF\"><span class=\"toc-text\">9.4 循环</span></a></li></ol></li></ol>","author":{"name":"YFR718","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/47553658?s=400&u=5e0a85700c66d7a2661c5664ec5f24d94e5ed01a&v=4","link":"/","description":"大数据萌新","socials":{"github":"https://github.com/YFR718","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"d","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"环境与包管理","uid":"3c25c67d0781653798d002eeefd584b0","slug":"P3-Anaconda与jupyter notebook","date":"2021-11-11T10:25:42.000Z","updated":"2021-11-11T12:57:37.608Z","comments":true,"path":"api/articles/P3-Anaconda与jupyter notebook.json","keywords":null,"cover":"https://img-blog.csdnimg.cn/23d499d2a47444b3b376f9f321c9ac8b.jpg?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAWUZSNzE4,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center","text":"1. Pip对 Python 包的查找、下载、安装、卸载的功能。 1.1 pip常用命令pip的更新 python -m pip install --upgrade pip pip安装包 pip install 包名==版本号 pip更新包 pip install --upgra...","link":"","photos":[],"count_time":{"symbolsCount":"3.1k","symbolsTime":"3 mins."},"categories":[{"name":"Python","slug":"Python","count":4,"path":"api/categories/Python.json"}],"tags":[],"author":{"name":"YFR718","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/47553658?s=400&u=5e0a85700c66d7a2661c5664ec5f24d94e5ed01a&v=4","link":"/","description":"大数据萌新","socials":{"github":"https://github.com/YFR718","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"d","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"PyMySQL","uid":"31135c47a98e6bfd7ef6f55be399b5e8","slug":"P2-PyMySQL","date":"2021-11-10T02:06:01.000Z","updated":"2021-11-11T09:59:18.865Z","comments":true,"path":"api/articles/P2-PyMySQL.json","keywords":null,"cover":"https://img-blog.csdnimg.cn/593c816f63e9423bb83bbe395daa3c55.jpg?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAWUZSNzE4,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center","text":"1. 连接数据库import pymysql # 创建连接对象 conn = pymysql.connect(host='localhost', port=3306, user='root', password='mysql',database='python', charset...","link":"","photos":[],"count_time":{"symbolsCount":"2.5k","symbolsTime":"2 mins."},"categories":[{"name":"Python","slug":"Python","count":4,"path":"api/categories/Python.json"}],"tags":[{"name":"MySQL","slug":"MySQL","count":2,"path":"api/tags/MySQL.json"}],"author":{"name":"YFR718","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/47553658?s=400&u=5e0a85700c66d7a2661c5664ec5f24d94e5ed01a&v=4","link":"/","description":"大数据萌新","socials":{"github":"https://github.com/YFR718","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"d","csdn":"","juejin":"","customs":{}}}}}