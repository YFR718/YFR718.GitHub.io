[{"id":"3a0647bbf7ec80551437039f438fd197","title":"Sqoop","content":"1111111. Sqoopç®€ä»‹â€‹        Sqoopæ˜¯ä¸€æ¬¾å¼€æºçš„å·¥å…·ï¼Œä¸»è¦ç”¨äºåœ¨Hadoop(Hive)ä¸ä¼ ç»Ÿçš„æ•°æ®åº“(mysqlã€postgresqlâ€¦)é—´è¿›è¡Œæ•°æ®çš„ä¼ é€’ï¼Œå¯ä»¥å°†ä¸€ä¸ªå…³ç³»å‹æ•°æ®åº“ï¼ˆä¾‹å¦‚ ï¼š MySQL ,Oracle ,Postgresç­‰ï¼‰ä¸­çš„æ•°æ®å¯¼è¿›åˆ°Hadoopçš„HDFSä¸­ï¼Œä¹Ÿå¯ä»¥å°†HDFSçš„æ•°æ®å¯¼è¿›åˆ°å…³ç³»å‹æ•°æ®åº“ä¸­ã€‚â€‹        Sqoopé¡¹ç›®å¼€å§‹äº2009å¹´ï¼Œæœ€æ—©æ˜¯ä½œä¸ºHadoopçš„ä¸€ä¸ªç¬¬ä¸‰æ–¹æ¨¡å—å­˜åœ¨ï¼Œåæ¥ä¸ºäº†è®©ä½¿ç”¨è€…èƒ½å¤Ÿå¿«é€Ÿéƒ¨ç½²ï¼Œä¹Ÿä¸ºäº†è®©å¼€å‘äººå‘˜èƒ½å¤Ÿæ›´å¿«é€Ÿçš„è¿­ä»£å¼€å‘ï¼ŒSqoopç‹¬ç«‹æˆä¸ºä¸€ä¸ªApacheé¡¹ç›®ã€‚â€‹        Sqoop2çš„æœ€æ–°ç‰ˆæœ¬æ˜¯1.99.7ã€‚è¯·æ³¨æ„ï¼Œ2ä¸1ä¸å…¼å®¹ï¼Œä¸”ç‰¹å¾ä¸å®Œæ•´ï¼Œå®ƒå¹¶ä¸æ‰“ç®—ç”¨äºç”Ÿäº§éƒ¨ç½²ã€‚SqoopåŸç†ï¼š\n\nå°†å¯¼å…¥æˆ–å¯¼å‡ºå‘½ä»¤ç¿»è¯‘æˆmapreduceç¨‹åºæ¥å®ç°ã€‚\nåœ¨ç¿»è¯‘å‡ºçš„mapreduceä¸­ä¸»è¦æ˜¯å¯¹inputformatå’Œoutputformatè¿›è¡Œå®šåˆ¶ã€‚\n\n2. Sqoopå®‰è£…å®‰è£…Sqoopçš„å‰ææ˜¯å·²ç»å…·å¤‡Javaå’ŒHadoopçš„ç¯å¢ƒã€‚\n2.1 ä¸‹è½½å¹¶è§£å‹\nä¸‹è½½åœ°å€ï¼šhttp://mirrors.hust.edu.cn/apache/sqoop/1.4.6/\n\nä¸Šä¼ å®‰è£…åŒ…sqoop-1.4.6.bin__hadoop-2.0.4-alpha.tar.gzåˆ°è™šæ‹Ÿæœºä¸­\n\nè§£å‹sqoopå®‰è£…åŒ…åˆ°æŒ‡å®šç›®å½•ï¼Œå¦‚ï¼š\n$ tar -zxf sqoop-1.4.6.bin__hadoop-2.0.4-alpha.tar.gz -C /opt/module/\n\n\n2.2 ä¿®æ”¹é…ç½®æ–‡ä»¶Sqoopçš„é…ç½®æ–‡ä»¶ä¸å¤§å¤šæ•°å¤§æ•°æ®æ¡†æ¶ç±»ä¼¼ï¼Œåœ¨sqoopæ ¹ç›®å½•ä¸‹çš„confç›®å½•ä¸­ã€‚\n\né‡å‘½åé…ç½®æ–‡ä»¶\n$ mv sqoop-env-template.sh sqoop-env.sh\n\nä¿®æ”¹é…ç½®æ–‡ä»¶ sqoop-env.sh\nexport HADOOP_COMMON_HOME=/opt/module/hadoop-2.7.2\nexport HADOOP_MAPRED_HOME=/opt/module/hadoop-2.7.2\nexport HIVE_HOME=/opt/module/hive\nexport ZOOKEEPER_HOME=/opt/module/zookeeper-3.4.10\nexport ZOOCFGDIR=/opt/module/zookeeper-3.4.10\nexport HBASE_HOME=/opt/module/hbase\n\n\n2.3 æ‹·è´JDBCé©±åŠ¨æ‹·è´jdbcé©±åŠ¨åˆ°sqoopçš„libç›®å½•ä¸‹ï¼Œå¦‚ï¼š\n$ cp mysql-connector-java-5.1.27-bin.jar /opt/module/sqoop-1.4.6.bin__hadoop-2.0.4-alpha/lib/\n2.4 éªŒè¯Sqoopæˆ‘ä»¬å¯ä»¥é€šè¿‡æŸä¸€ä¸ªcommandæ¥éªŒè¯sqoopé…ç½®æ˜¯å¦æ­£ç¡®ï¼š\n$ bin/sqoop help\nå‡ºç°ä¸€äº›Warningè­¦å‘Šï¼ˆè­¦å‘Šä¿¡æ¯å·²çœç•¥ï¼‰ï¼Œå¹¶ä¼´éšç€å¸®åŠ©å‘½ä»¤çš„è¾“å‡ºï¼š\nAvailable commands:\n  codegen            Generate code to interact with database records\n  create-hive-table     Import a table definition into Hive\n  eval               Evaluate a SQL statement and display the results\n  export             Export an HDFS directory to a database table\n  help               List available commands\n  import             Import a table from a database to HDFS\n  import-all-tables     Import tables from a database to HDFS\n  import-mainframe    Import datasets from a mainframe server to HDFS\n  job                Work with saved jobs\n  list-databases        List available databases on a server\n  list-tables           List available tables in a database\n  merge              Merge results of incremental imports\n  metastore           Run a standalone Sqoop metastore\n  version            Display version information\n2.5 æµ‹è¯•Sqoopæ˜¯å¦èƒ½å¤ŸæˆåŠŸè¿æ¥æ•°æ®åº“$ bin/sqoop list-databases --connect jdbc:mysql://hadoop102:3306/ --username root --password 000000\nå‡ºç°å¦‚ä¸‹è¾“å‡ºï¼š\ninformation_schema\nmetastore\nmysql\noozie\nperformance_schema\n3. Sqoopçš„ç®€å•ä½¿ç”¨æ¡ˆä¾‹3.1 å¯¼å…¥æ•°æ®â€‹        åœ¨Sqoopä¸­ï¼Œâ€œå¯¼å…¥â€æ¦‚å¿µæŒ‡ï¼šä»éå¤§æ•°æ®é›†ç¾¤ï¼ˆRDBMSï¼‰å‘å¤§æ•°æ®é›†ç¾¤ï¼ˆHDFSï¼ŒHIVEï¼ŒHBASEï¼‰ä¸­ä¼ è¾“æ•°æ®ï¼Œå«åšï¼šå¯¼å…¥ï¼Œå³ä½¿ç”¨importå…³é”®å­—ã€‚RDBMSåˆ°HDFS\n\nç¡®å®šMysqlæœåŠ¡å¼€å¯æ­£å¸¸\n\nåœ¨Mysqlä¸­æ–°å»ºä¸€å¼ è¡¨å¹¶æ’å…¥ä¸€äº›æ•°æ®\n$ mysql -uroot -p000000\nmysql&gt; create database company;\nmysql&gt; create table company.staff(id int(4) primary key not null auto_increment, name varchar(255), sex varchar(255));\nmysql&gt; insert into company.staff(name, sex) values('Thomas', 'Male');\nmysql&gt; insert into company.staff(name, sex) values('Catalina', 'FeMale');\n\nå¯¼å…¥æ•°æ® ï¼ˆ1ï¼‰å…¨éƒ¨å¯¼å…¥\n$ bin/sqoop import \\\n--connect jdbc:mysql://hadoop102:3306/company \\\n--username root \\\n--password 000000 \\\n--table staff \\\n--target-dir /user/company \\\n--delete-target-dir \\\n--num-mappers 1 \\\n--fields-terminated-by \"\\t\"\nï¼ˆ2ï¼‰æŸ¥è¯¢å¯¼å…¥\n$ bin/sqoop import \\\n--connect jdbc:mysql://hadoop102:3306/company \\\n--username root \\\n--password 000000 \\\n--target-dir /user/company \\\n--delete-target-dir \\\n--num-mappers 1 \\\n--fields-terminated-by \"\\t\" \\\n--query 'select name,sex from staff where id &lt;=1 and $CONDITIONS;'\næç¤ºï¼šmust contain â€˜å¦‚æœåä½¿ç”¨çš„æ˜¯åŒå¼•å·ï¼Œåˆ™CONDITIONSå‰å¿…é¡»åŠ è½¬ç§»ç¬¦ï¼Œé˜²æ­¢shellè¯†åˆ«ä¸ºè‡ªå·±çš„å˜é‡ã€‚ï¼ˆ3ï¼‰å¯¼å…¥æŒ‡å®šåˆ—\n\n\n$ bin/sqoop import \\\n--connect jdbc:mysql://hadoop102:3306/company \\\n--username root \\\n--password 000000 \\\n--target-dir /user/company \\\n--delete-target-dir \\\n--num-mappers 1 \\\n--fields-terminated-by \"\\t\" \\\n--columns id,sex \\\n--table staff\n  æç¤ºï¼šcolumnsä¸­å¦‚æœæ¶‰åŠåˆ°å¤šåˆ—ï¼Œç”¨é€—å·åˆ†éš”ï¼Œåˆ†éš”æ—¶ä¸è¦æ·»åŠ ç©ºæ ¼  ï¼ˆ4ï¼‰ä½¿ç”¨sqoopå…³é”®å­—ç­›é€‰æŸ¥è¯¢å¯¼å…¥æ•°æ®\n$ bin/sqoop import \\\n--connect jdbc:mysql://hadoop102:3306/company \\\n--username root \\\n--password 000000 \\\n--target-dir /user/company \\\n--delete-target-dir \\\n--num-mappers 1 \\\n--fields-terminated-by \"\\t\" \\\n--table staff \\\n--where \"id=1\"\nRDBMSåˆ°Hive\n$ bin/sqoop import \\\n--connect jdbc:mysql://hadoop102:3306/company \\\n--username root \\\n--password 000000 \\\n--table staff \\\n--num-mappers 1 \\\n--hive-import \\\n--fields-terminated-by \"\\t\" \\\n--hive-overwrite \\\n--hive-table staff_hive\n  æç¤ºï¼šè¯¥è¿‡ç¨‹åˆ†ä¸ºä¸¤æ­¥ï¼Œç¬¬ä¸€æ­¥å°†æ•°æ®å¯¼å…¥åˆ°HDFSï¼Œç¬¬äºŒæ­¥å°†å¯¼å…¥åˆ°HDFSçš„æ•°æ®è¿ç§»åˆ°Hiveä»“åº“ï¼Œç¬¬ä¸€æ­¥é»˜è®¤çš„ä¸´æ—¶ç›®å½•æ˜¯/user/atguigu/è¡¨åRDBMSåˆ°Hbase\n$ bin/sqoop import \\\n--connect jdbc:mysql://hadoop102:3306/company \\\n--username root \\\n--password 000000 \\\n--table company \\\n--columns \"id,name,sex\" \\\n--column-family \"info\" \\\n--hbase-create-table \\\n--hbase-row-key \"id\" \\\n--hbase-table \"hbase_company\" \\\n--num-mappers 1 \\\n--split-by id\n  æç¤ºï¼šsqoop1.4.6åªæ”¯æŒHBase1.0.1ä¹‹å‰çš„ç‰ˆæœ¬çš„è‡ªåŠ¨åˆ›å»ºHBaseè¡¨çš„åŠŸèƒ½  è§£å†³æ–¹æ¡ˆï¼šæ‰‹åŠ¨åˆ›å»ºHBaseè¡¨\nhbase&gt; create 'hbase_company,'info'\n  (5) åœ¨HBaseä¸­scanè¿™å¼ è¡¨å¾—åˆ°å¦‚ä¸‹å†…å®¹\nhbase&gt; scan â€˜hbase_companyâ€™\n3.2 å¯¼å‡ºæ•°æ®â€‹        åœ¨Sqoopä¸­ï¼Œâ€œå¯¼å‡ºâ€æ¦‚å¿µæŒ‡ï¼šä»å¤§æ•°æ®é›†ç¾¤ï¼ˆHDFSï¼ŒHIVEï¼ŒHBASEï¼‰å‘éå¤§æ•°æ®é›†ç¾¤ï¼ˆRDBMSï¼‰ä¸­ä¼ è¾“æ•°æ®ï¼Œå«åšï¼šå¯¼å‡ºï¼Œå³ä½¿ç”¨exportå…³é”®å­—ã€‚HIVE/HDFSåˆ°RDBMS\n$ bin/sqoop export \\\n  --connect jdbc:mysql://hadoop102:3306/company \\\n  --username root \\\n  --password 000000 \\\n  --table staff \\\n  --num-mappers 1 \\\n  --export-dir /user/hive/warehouse/staff_hive \\\n  --input-fields-terminated-by \"\\t\"\n  æç¤ºï¼šMysqlä¸­å¦‚æœè¡¨ä¸å­˜åœ¨ï¼Œä¸ä¼šè‡ªåŠ¨åˆ›å»º\n3.3 è„šæœ¬æ‰“åŒ…  ä½¿ç”¨optæ ¼å¼çš„æ–‡ä»¶æ‰“åŒ…sqoopå‘½ä»¤ï¼Œç„¶åæ‰§è¡Œ\n\nåˆ›å»ºä¸€ä¸ª.optæ–‡ä»¶\n$ mkdir opt\n$ touch opt/job_HDFS2RDBMS.opt\n\nç¼–å†™sqoopè„šæœ¬\n$ vi opt/job_HDFS2RDBMS.opt\n\nexport\n--connect jdbc:mysql://hadoop102:3306/company\n--username root\n--password 000000\n--table staff\n--num-mappers 1\n--export-dir /user/hive/warehouse/staff_hive\n--input-fields-terminated-by \"\\t\"\n\næ‰§è¡Œè¯¥è„šæœ¬\n$ bin/sqoop --options-file opt/job_HDFS2RDBMS.opt\n\n\n4. Sqoopä¸€äº›å¸¸ç”¨å‘½ä»¤åŠå‚æ•°4.1 å¸¸ç”¨å‘½ä»¤åˆ—ä¸¾è¿™é‡Œç»™å¤§å®¶åˆ—å‡ºæ¥äº†ä¸€éƒ¨åˆ†Sqoopæ“ä½œæ—¶çš„å¸¸ç”¨å‚æ•°ï¼Œä»¥ä¾›å‚è€ƒï¼Œéœ€è¦æ·±å…¥å­¦ä¹ çš„å¯ä»¥å‚çœ‹å¯¹åº”ç±»çš„æºä»£ç ã€‚\n\n\n\n\nåºå·\nå‘½ä»¤\nç±»\nè¯´æ˜\n\n\n\n\n1\nimport\nImportTool\nå°†æ•°æ®å¯¼å…¥åˆ°é›†ç¾¤\n\n\n2\nexport\nExportTool\nå°†é›†ç¾¤æ•°æ®å¯¼å‡º\n\n\n3\ncodegen\nCodeGenTool\nè·å–æ•°æ®åº“ä¸­æŸå¼ è¡¨æ•°æ®ç”ŸæˆJavaå¹¶æ‰“åŒ…Jar\n\n\n4\ncreate-hive-table\nCreateHiveTableTool\nåˆ›å»ºHiveè¡¨\n\n\n5\neval\nEvalSqlTool\næŸ¥çœ‹SQLæ‰§è¡Œç»“æœ\n\n\n6\nimport-all-tables\nImportAllTablesTool\nå¯¼å…¥æŸä¸ªæ•°æ®åº“ä¸‹æ‰€æœ‰è¡¨åˆ°HDFSä¸­\n\n\n7\njob\nJobTool\nç”¨æ¥ç”Ÿæˆä¸€ä¸ªsqoopçš„ä»»åŠ¡ï¼Œç”Ÿæˆåï¼Œè¯¥ä»»åŠ¡å¹¶ä¸æ‰§è¡Œï¼Œé™¤éä½¿ç”¨å‘½ä»¤æ‰§è¡Œè¯¥ä»»åŠ¡ã€‚\n\n\n8\nlist-databases\nListDatabasesTool\nåˆ—å‡ºæ‰€æœ‰æ•°æ®åº“å\n\n\n9\nlist-tables\nListTablesTool\nåˆ—å‡ºæŸä¸ªæ•°æ®åº“ä¸‹æ‰€æœ‰è¡¨\n\n\n10\nmerge\nMergeTool\nå°†HDFSä¸­ä¸åŒç›®å½•ä¸‹é¢çš„æ•°æ®åˆåœ¨ä¸€èµ·ï¼Œå¹¶å­˜æ”¾åœ¨æŒ‡å®šçš„ç›®å½•ä¸­\n\n\n11\nmetastore\nMetastoreTool\nè®°å½•sqoop jobçš„å…ƒæ•°æ®ä¿¡æ¯ï¼Œå¦‚æœä¸å¯åŠ¨metastoreå®ä¾‹ï¼Œåˆ™é»˜è®¤çš„å…ƒæ•°æ®å­˜å‚¨ç›®å½•ä¸ºï¼š~/.sqoopï¼Œå¦‚æœè¦æ›´æ”¹å­˜å‚¨ç›®å½•ï¼Œå¯ä»¥åœ¨é…ç½®æ–‡ä»¶sqoop-site.xmlä¸­è¿›è¡Œæ›´æ”¹ã€‚\n\n\n12\nhelp\nHelpTool\næ‰“å°sqoopå¸®åŠ©ä¿¡æ¯\n\n\n13\nversion\nVersionTool\næ‰“å°sqoopç‰ˆæœ¬ä¿¡æ¯\n\n\n\n\n4.2 å‘½ä»¤&amp;å‚æ•°è¯¦è§£åˆšæ‰åˆ—ä¸¾äº†ä¸€äº›Sqoopçš„å¸¸ç”¨å‘½ä»¤ï¼Œå¯¹äºä¸åŒçš„å‘½ä»¤ï¼Œæœ‰ä¸åŒçš„å‚æ•°ï¼Œè®©æˆ‘ä»¬æ¥ä¸€ä¸€åˆ—ä¸¾è¯´æ˜ã€‚\né¦–å…ˆæ¥æˆ‘ä»¬æ¥ä»‹ç»ä¸€ä¸‹å…¬ç”¨çš„å‚æ•°ï¼Œæ‰€è°“å…¬ç”¨å‚æ•°ï¼Œå°±æ˜¯å¤§å¤šæ•°å‘½ä»¤éƒ½æ”¯æŒçš„å‚æ•°ã€‚\n4.2.1 å…¬ç”¨å‚æ•°ï¼šæ•°æ®åº“è¿æ¥\n\n\n\nåºå·\nå‚æ•°\nè¯´æ˜\n\n\n\n\n1\nâ€”connect\nè¿æ¥å…³ç³»å‹æ•°æ®åº“çš„URL\n\n\n2\nâ€”connection-manager\næŒ‡å®šè¦ä½¿ç”¨çš„è¿æ¥ç®¡ç†ç±»\n\n\n3\nâ€”driver\nHadoopæ ¹ç›®å½•\n\n\n4\nâ€”help\næ‰“å°å¸®åŠ©ä¿¡æ¯\n\n\n5\nâ€”password\nè¿æ¥æ•°æ®åº“çš„å¯†ç \n\n\n6\nâ€”username\nè¿æ¥æ•°æ®åº“çš„ç”¨æˆ·å\n\n\n7\nâ€”verbose\nåœ¨æ§åˆ¶å°æ‰“å°å‡ºè¯¦ç»†ä¿¡æ¯\n\n\n\n\n4.2.2 å…¬ç”¨å‚æ•°ï¼šimport\n\n\n\nåºå·\nå‚æ•°\nè¯´æ˜\n\n\n\n\n1\nâ€”enclosed-by \nç»™å­—æ®µå€¼å‰åŠ ä¸ŠæŒ‡å®šçš„å­—ç¬¦\n\n\n2\nâ€”escaped-by \nå¯¹å­—æ®µä¸­çš„åŒå¼•å·åŠ è½¬ä¹‰ç¬¦\n\n\n3\nâ€”fields-terminated-by \nè®¾å®šæ¯ä¸ªå­—æ®µæ˜¯ä»¥ä»€ä¹ˆç¬¦å·ä½œä¸ºç»“æŸï¼Œé»˜è®¤ä¸ºé€—å·\n\n\n4\nâ€”lines-terminated-by \nè®¾å®šæ¯è¡Œè®°å½•ä¹‹é—´çš„åˆ†éš”ç¬¦ï¼Œé»˜è®¤æ˜¯\\n\n\n\n5\nâ€”mysql-delimiters\nMysqlé»˜è®¤çš„åˆ†éš”ç¬¦è®¾ç½®ï¼Œå­—æ®µä¹‹é—´ä»¥é€—å·åˆ†éš”ï¼Œè¡Œä¹‹é—´ä»¥\\nåˆ†éš”ï¼Œé»˜è®¤è½¬ä¹‰ç¬¦æ˜¯\\ï¼Œå­—æ®µå€¼ä»¥å•å¼•å·åŒ…è£¹ã€‚\n\n\n6\nâ€”optionally-enclosed-by \nç»™å¸¦æœ‰åŒå¼•å·æˆ–å•å¼•å·çš„å­—æ®µå€¼å‰ååŠ ä¸ŠæŒ‡å®šå­—ç¬¦ã€‚\n\n\n\n\n4.2.3 å…¬ç”¨å‚æ•°ï¼šexport\n\n\n\nåºå·\nå‚æ•°\nè¯´æ˜\n\n\n\n\n1\nâ€”input-enclosed-by \nå¯¹å­—æ®µå€¼å‰ååŠ ä¸ŠæŒ‡å®šå­—ç¬¦\n\n\n2\nâ€”input-escaped-by \nå¯¹å«æœ‰è½¬ç§»ç¬¦çš„å­—æ®µåšè½¬ä¹‰å¤„ç†\n\n\n3\nâ€”input-fields-terminated-by \nå­—æ®µä¹‹é—´çš„åˆ†éš”ç¬¦\n\n\n4\nâ€”input-lines-terminated-by \nè¡Œä¹‹é—´çš„åˆ†éš”ç¬¦\n\n\n5\nâ€”input-optionally-enclosed-by \nç»™å¸¦æœ‰åŒå¼•å·æˆ–å•å¼•å·çš„å­—æ®µå‰ååŠ ä¸ŠæŒ‡å®šå­—ç¬¦\n\n\n\n\n4.2.4 å…¬ç”¨å‚æ•°ï¼šhive\n\n\n\nåºå·\nå‚æ•°\nè¯´æ˜\n\n\n\n\n1\nâ€”hive-delims-replacement \nç”¨è‡ªå®šä¹‰çš„å­—ç¬¦ä¸²æ›¿æ¢æ‰æ•°æ®ä¸­çš„\\r\\nå’Œ\\013 \\010ç­‰å­—ç¬¦\n\n\n2\nâ€”hive-drop-import-delims\nåœ¨å¯¼å…¥æ•°æ®åˆ°hiveæ—¶ï¼Œå»æ‰æ•°æ®ä¸­çš„\\r\\n\\013\\010è¿™æ ·çš„å­—ç¬¦\n\n\n3\nâ€”map-column-hive \nç”Ÿæˆhiveè¡¨æ—¶ï¼Œå¯ä»¥æ›´æ”¹ç”Ÿæˆå­—æ®µçš„æ•°æ®ç±»å‹\n\n\n4\nâ€”hive-partition-key\nåˆ›å»ºåˆ†åŒºï¼Œåé¢ç›´æ¥è·Ÿåˆ†åŒºåï¼Œåˆ†åŒºå­—æ®µçš„é»˜è®¤ç±»å‹ä¸ºstring\n\n\n5\nâ€”hive-partition-value \nå¯¼å…¥æ•°æ®æ—¶ï¼ŒæŒ‡å®šæŸä¸ªåˆ†åŒºçš„å€¼\n\n\n6\nâ€”hive-home \nhiveçš„å®‰è£…ç›®å½•ï¼Œå¯ä»¥é€šè¿‡è¯¥å‚æ•°è¦†ç›–ä¹‹å‰é»˜è®¤é…ç½®çš„ç›®å½•\n\n\n7\nâ€”hive-import\nå°†æ•°æ®ä»å…³ç³»æ•°æ®åº“ä¸­å¯¼å…¥åˆ°hiveè¡¨ä¸­\n\n\n8\nâ€”hive-overwrite\nè¦†ç›–æ‰åœ¨hiveè¡¨ä¸­å·²ç»å­˜åœ¨çš„æ•°æ®\n\n\n9\nâ€”create-hive-table\né»˜è®¤æ˜¯falseï¼Œå³ï¼Œå¦‚æœç›®æ ‡è¡¨å·²ç»å­˜åœ¨äº†ï¼Œé‚£ä¹ˆåˆ›å»ºä»»åŠ¡å¤±è´¥ã€‚\n\n\n10\nâ€”hive-table\nåé¢æ¥è¦åˆ›å»ºçš„hiveè¡¨,é»˜è®¤ä½¿ç”¨MySQLçš„è¡¨å\n\n\n11\nâ€”table\næŒ‡å®šå…³ç³»æ•°æ®åº“çš„è¡¨å\n\n\n\n\nå…¬ç”¨å‚æ•°ä»‹ç»å®Œä¹‹åï¼Œæˆ‘ä»¬æ¥æŒ‰ç…§å‘½ä»¤ä»‹ç»å‘½ä»¤å¯¹åº”çš„ç‰¹æœ‰å‚æ•°ã€‚\n4.2.5 å‘½ä»¤&amp;å‚æ•°ï¼šimportå°†å…³ç³»å‹æ•°æ®åº“ä¸­çš„æ•°æ®å¯¼å…¥åˆ°HDFSï¼ˆåŒ…æ‹¬Hiveï¼ŒHBaseï¼‰ä¸­ï¼Œå¦‚æœå¯¼å…¥çš„æ˜¯Hiveï¼Œé‚£ä¹ˆå½“Hiveä¸­æ²¡æœ‰å¯¹åº”è¡¨æ—¶ï¼Œåˆ™è‡ªåŠ¨åˆ›å»ºã€‚\n1) å‘½ä»¤ï¼š\nå¦‚ï¼šå¯¼å…¥æ•°æ®åˆ°hiveä¸­\n$ bin/sqoop import \\\n--connect jdbc:mysql://hadoop102:3306/company \\\n--username root \\\n--password 000000 \\\n--table staff \\\n--hive-import\nå¦‚ï¼šå¢é‡å¯¼å…¥æ•°æ®åˆ°hiveä¸­ï¼Œmode=append\nappendå¯¼å…¥ï¼š\n$ bin/sqoop import \\\n--connect jdbc:mysql://hadoop102:3306/company \\\n--username root \\\n--password 000000 \\\n--table staff \\\n--num-mappers 1 \\\n--fields-terminated-by \"\\t\" \\\n--target-dir /user/hive/warehouse/staff_hive \\\n--check-column id \\\n--incremental append \\\n--last-value 3\nå°–å«æç¤ºï¼šappendä¸èƒ½ä¸â€”hive-ç­‰å‚æ•°åŒæ—¶ä½¿ç”¨ï¼ˆAppend mode for hive imports is not yet supported. Please remove the parameter â€”append-modeï¼‰\nå¦‚ï¼šå¢é‡å¯¼å…¥æ•°æ®åˆ°hdfsä¸­ï¼Œmode=lastmodified\nå…ˆåœ¨mysqlä¸­å»ºè¡¨å¹¶æ’å…¥å‡ æ¡æ•°æ®ï¼š\nmysql&gt; create table company.staff_timestamp(id int(4), name varchar(255), sex varchar(255), last_modified timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP);\nmysql&gt; insert into company.staff_timestamp (id, name, sex) values(1, 'AAA', 'female');mysql&gt; insert into company.staff_timestamp (id, name, sex) values(2, 'BBB', 'female');\n#å…ˆå¯¼å…¥ä¸€éƒ¨åˆ†æ•°æ®ï¼š\n$ bin/sqoop import \\\n--connect jdbc:mysql://hadoop102:3306/company \\\n--username root \\\n--password 000000 \\\n--table staff_timestamp \\\n--delete-target-dir \\\n--m 1\n# å†å¢é‡å¯¼å…¥ä¸€éƒ¨åˆ†æ•°æ®ï¼š\nmysql&gt; insert into company.staff_timestamp (id, name, sex) values(3, 'CCC', 'female');\n$ bin/sqoop import \\\n--connect jdbc:mysql://hadoop102:3306/company \\\n--username root \\\n--password 000000 \\\n--table staff_timestamp \\\n--check-column last_modified \\\n--incremental lastmodified \\\n--last-value \"2017-09-28 22:20:38\" \\\n--m 1 \\\n--append\nå°–å«æç¤ºï¼šä½¿ç”¨lastmodifiedæ–¹å¼å¯¼å…¥æ•°æ®è¦æŒ‡å®šå¢é‡æ•°æ®æ˜¯è¦â€”appendï¼ˆè¿½åŠ ï¼‰è¿˜æ˜¯è¦â€”merge-keyï¼ˆåˆå¹¶ï¼‰\nå°–å«æç¤ºï¼šlast-valueæŒ‡å®šçš„å€¼æ˜¯ä¼šåŒ…å«äºå¢é‡å¯¼å…¥çš„æ•°æ®ä¸­\n2) å‚æ•°ï¼š\n\n\n\n\nåºå·\nå‚æ•°\nè¯´æ˜\n\n\n\n\n1\nâ€”append\nå°†æ•°æ®è¿½åŠ åˆ°HDFSä¸­å·²ç»å­˜åœ¨çš„DataSetä¸­ï¼Œå¦‚æœä½¿ç”¨è¯¥å‚æ•°ï¼Œsqoopä¼šæŠŠæ•°æ®å…ˆå¯¼å…¥åˆ°ä¸´æ—¶æ–‡ä»¶ç›®å½•ï¼Œå†åˆå¹¶ã€‚\n\n\n2\nâ€”as-avrodatafile\nå°†æ•°æ®å¯¼å…¥åˆ°ä¸€ä¸ªAvroæ•°æ®æ–‡ä»¶ä¸­\n\n\n3\nâ€”as-sequencefile\nå°†æ•°æ®å¯¼å…¥åˆ°ä¸€ä¸ªsequenceæ–‡ä»¶ä¸­\n\n\n4\nâ€”as-textfile\nå°†æ•°æ®å¯¼å…¥åˆ°ä¸€ä¸ªæ™®é€šæ–‡æœ¬æ–‡ä»¶ä¸­\n\n\n5\nâ€”boundary-query \nè¾¹ç•ŒæŸ¥è¯¢ï¼Œå¯¼å…¥çš„æ•°æ®ä¸ºè¯¥å‚æ•°çš„å€¼ï¼ˆä¸€æ¡sqlè¯­å¥ï¼‰æ‰€æ‰§è¡Œçš„ç»“æœåŒºé—´å†…çš„æ•°æ®ã€‚\n\n\n6\nâ€”columns \næŒ‡å®šè¦å¯¼å…¥çš„å­—æ®µ\n\n\n7\nâ€”direct\nç›´æ¥å¯¼å…¥æ¨¡å¼ï¼Œä½¿ç”¨çš„æ˜¯å…³ç³»æ•°æ®åº“è‡ªå¸¦çš„å¯¼å…¥å¯¼å‡ºå·¥å…·ï¼Œä»¥ä¾¿åŠ å¿«å¯¼å…¥å¯¼å‡ºè¿‡ç¨‹ã€‚\n\n\n8\nâ€”direct-split-size\nåœ¨ä½¿ç”¨ä¸Šé¢directç›´æ¥å¯¼å…¥çš„åŸºç¡€ä¸Šï¼Œå¯¹å¯¼å…¥çš„æµæŒ‰å­—èŠ‚åˆ†å—ï¼Œå³è¾¾åˆ°è¯¥é˜ˆå€¼å°±äº§ç”Ÿä¸€ä¸ªæ–°çš„æ–‡ä»¶\n\n\n9\nâ€”inline-lob-limit\nè®¾å®šå¤§å¯¹è±¡æ•°æ®ç±»å‹çš„æœ€å¤§å€¼\n\n\n10\nâ€”mæˆ–â€“num-mappers\nå¯åŠ¨Nä¸ªmapæ¥å¹¶è¡Œå¯¼å…¥æ•°æ®ï¼Œé»˜è®¤4ä¸ªã€‚\n\n\n11\nâ€”queryæˆ–â€”e \nå°†æŸ¥è¯¢ç»“æœçš„æ•°æ®å¯¼å…¥ï¼Œä½¿ç”¨æ—¶å¿…é¡»ä¼´éšå‚â€”target-dirï¼Œâ€”hive-tableï¼Œå¦‚æœæŸ¥è¯¢ä¸­æœ‰whereæ¡ä»¶ï¼Œåˆ™æ¡ä»¶åå¿…é¡»åŠ ä¸Š$CONDITIONSå…³é”®å­—\n\n\n12\nâ€”split-by \næŒ‰ç…§æŸä¸€åˆ—æ¥åˆ‡åˆ†è¡¨çš„å·¥ä½œå•å…ƒï¼Œä¸èƒ½ä¸â€”autoreset-to-one-mapperè¿ç”¨ï¼ˆè¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼‰\n\n\n13\nâ€”table \nå…³ç³»æ•°æ®åº“çš„è¡¨å\n\n\n14\nâ€”target-dir \næŒ‡å®šHDFSè·¯å¾„\n\n\n15\nâ€”warehouse-dir \nä¸14å‚æ•°ä¸èƒ½åŒæ—¶ä½¿ç”¨ï¼Œå¯¼å…¥æ•°æ®åˆ°HDFSæ—¶æŒ‡å®šçš„ç›®å½•\n\n\n16\nâ€”where\nä»å…³ç³»æ•°æ®åº“å¯¼å…¥æ•°æ®æ—¶çš„æŸ¥è¯¢æ¡ä»¶\n\n\n17\nâ€”zæˆ–â€”compress\nå…è®¸å‹ç¼©\n\n\n18\nâ€”compression-codec\næŒ‡å®šhadoopå‹ç¼©ç¼–ç ç±»ï¼Œé»˜è®¤ä¸ºgzip(Use Hadoop codec default gzip)\n\n\n19\nâ€”null-string \nstringç±»å‹çš„åˆ—å¦‚æœnullï¼Œæ›¿æ¢ä¸ºæŒ‡å®šå­—ç¬¦ä¸²\n\n\n20\nâ€”null-non-string \néstringç±»å‹çš„åˆ—å¦‚æœnullï¼Œæ›¿æ¢ä¸ºæŒ‡å®šå­—ç¬¦ä¸²\n\n\n21\nâ€”check-column \nä½œä¸ºå¢é‡å¯¼å…¥åˆ¤æ–­çš„åˆ—å\n\n\n22\nâ€”incremental \nmodeï¼šappendæˆ–lastmodified\n\n\n23\nâ€”last-value \næŒ‡å®šæŸä¸€ä¸ªå€¼ï¼Œç”¨äºæ ‡è®°å¢é‡å¯¼å…¥çš„ä½ç½®\n\n\n\n\n4.2.6 å‘½ä»¤&amp;å‚æ•°ï¼šexportä»HDFSï¼ˆåŒ…æ‹¬Hiveå’ŒHBaseï¼‰ä¸­å¥–æ•°æ®å¯¼å‡ºåˆ°å…³ç³»å‹æ•°æ®åº“ä¸­ã€‚\n1) å‘½ä»¤ï¼š\nå¦‚ï¼š\n$ bin/sqoop export \\\n--connect jdbc:mysql://hadoop102:3306/company \\\n--username root \\\n--password 000000 \\\n--table staff \\\n--export-dir /user/company \\\n--input-fields-terminated-by \"\\t\" \\\n--num-mappers 1 \n2) å‚æ•°ï¼š\n\n\n\n\nåºå·\nå‚æ•°\nè¯´æ˜\n\n\n\n\n1\nâ€”direct\nåˆ©ç”¨æ•°æ®åº“è‡ªå¸¦çš„å¯¼å…¥å¯¼å‡ºå·¥å…·ï¼Œä»¥ä¾¿äºæé«˜æ•ˆç‡\n\n\n2\nâ€”export-dir \nå­˜æ”¾æ•°æ®çš„HDFSçš„æºç›®å½•\n\n\n3\n-mæˆ–â€”num-mappers \nå¯åŠ¨Nä¸ªmapæ¥å¹¶è¡Œå¯¼å…¥æ•°æ®ï¼Œé»˜è®¤4ä¸ª\n\n\n4\nâ€”table \næŒ‡å®šå¯¼å‡ºåˆ°å“ªä¸ªRDBMSä¸­çš„è¡¨\n\n\n5\nâ€”update-key \nå¯¹æŸä¸€åˆ—çš„å­—æ®µè¿›è¡Œæ›´æ–°æ“ä½œ\n\n\n6\nâ€”update-mode \nupdateonlyallowinsert(é»˜è®¤)\n\n\n7\nâ€”input-null-string \nè¯·å‚è€ƒimportè¯¥ç±»ä¼¼å‚æ•°è¯´æ˜\n\n\n8\nâ€”input-null-non-string \nè¯·å‚è€ƒimportè¯¥ç±»ä¼¼å‚æ•°è¯´æ˜\n\n\n9\nâ€”staging-table \nåˆ›å»ºä¸€å¼ ä¸´æ—¶è¡¨ï¼Œç”¨äºå­˜æ”¾æ‰€æœ‰äº‹åŠ¡çš„ç»“æœï¼Œç„¶åå°†æ‰€æœ‰äº‹åŠ¡ç»“æœä¸€æ¬¡æ€§å¯¼å…¥åˆ°ç›®æ ‡è¡¨ä¸­ï¼Œé˜²æ­¢é”™è¯¯ã€‚\n\n\n10\nâ€”clear-staging-table\nå¦‚æœç¬¬9ä¸ªå‚æ•°éç©ºï¼Œåˆ™å¯ä»¥åœ¨å¯¼å‡ºæ“ä½œæ‰§è¡Œå‰ï¼Œæ¸…ç©ºä¸´æ—¶äº‹åŠ¡ç»“æœè¡¨\n\n\n\n\n4.2.7 å‘½ä»¤&amp;å‚æ•°ï¼šcodegenå°†å…³ç³»å‹æ•°æ®åº“ä¸­çš„è¡¨æ˜ å°„ä¸ºä¸€ä¸ªJavaç±»ï¼Œåœ¨è¯¥ç±»ä¸­æœ‰å„åˆ—å¯¹åº”çš„å„ä¸ªå­—æ®µã€‚\nå¦‚ï¼š\n$ bin/sqoop codegen \\\n--connect jdbc:mysql://hadoop102:3306/company \\\n--username root \\\n--password 000000 \\\n--table staff \\\n--bindir /home/admin/Desktop/staff \\\n--class-name Staff \\\n--fields-terminated-by \"\\t\"\n\n\n\n\nåºå·\nå‚æ•°\nè¯´æ˜\n\n\n\n\n1\nâ€”bindir \næŒ‡å®šç”Ÿæˆçš„Javaæ–‡ä»¶ã€ç¼–è¯‘æˆçš„classæ–‡ä»¶åŠå°†ç”Ÿæˆæ–‡ä»¶æ‰“åŒ…ä¸ºjarçš„æ–‡ä»¶è¾“å‡ºè·¯å¾„\n\n\n2\nâ€”class-name \nè®¾å®šç”Ÿæˆçš„Javaæ–‡ä»¶æŒ‡å®šçš„åç§°\n\n\n3\nâ€”outdir \nç”ŸæˆJavaæ–‡ä»¶å­˜æ”¾çš„è·¯å¾„\n\n\n4\nâ€”package-name \nåŒ…åï¼Œå¦‚com.zï¼Œå°±ä¼šç”Ÿæˆcomå’Œzä¸¤çº§ç›®å½•\n\n\n5\nâ€”input-null-non-string \nåœ¨ç”Ÿæˆçš„Javaæ–‡ä»¶ä¸­ï¼Œå¯ä»¥å°†nullå­—ç¬¦ä¸²æˆ–è€…ä¸å­˜åœ¨çš„å­—ç¬¦ä¸²è®¾ç½®ä¸ºæƒ³è¦è®¾å®šçš„å€¼ï¼ˆä¾‹å¦‚ç©ºå­—ç¬¦ä¸²ï¼‰\n\n\n6\nâ€”input-null-string \nå°†nullå­—ç¬¦ä¸²æ›¿æ¢æˆæƒ³è¦æ›¿æ¢çš„å€¼ï¼ˆä¸€èˆ¬ä¸5åŒæ—¶ä½¿ç”¨ï¼‰\n\n\n7\nâ€”map-column-java \næ•°æ®åº“å­—æ®µåœ¨ç”Ÿæˆçš„Javaæ–‡ä»¶ä¸­ä¼šæ˜ å°„æˆå„ç§å±æ€§ï¼Œä¸”é»˜è®¤çš„æ•°æ®ç±»å‹ä¸æ•°æ®åº“ç±»å‹ä¿æŒå¯¹åº”å…³ç³»ã€‚è¯¥å‚æ•°å¯ä»¥æ”¹å˜é»˜è®¤ç±»å‹ï¼Œä¾‹å¦‚ï¼šâ€”map-column-java id=long, name=String\n\n\n8\nâ€”null-non-string \nåœ¨ç”ŸæˆJavaæ–‡ä»¶æ—¶ï¼Œå¯ä»¥å°†ä¸å­˜åœ¨æˆ–è€…nullçš„å­—ç¬¦ä¸²è®¾ç½®ä¸ºå…¶ä»–å€¼\n\n\n9\nâ€”null-string \nåœ¨ç”ŸæˆJavaæ–‡ä»¶æ—¶ï¼Œå°†nullå­—ç¬¦ä¸²è®¾ç½®ä¸ºå…¶ä»–å€¼ï¼ˆä¸€èˆ¬ä¸8åŒæ—¶ä½¿ç”¨ï¼‰\n\n\n10\nâ€”table \nå¯¹åº”å…³ç³»æ•°æ®åº“ä¸­çš„è¡¨åï¼Œç”Ÿæˆçš„Javaæ–‡ä»¶ä¸­çš„å„ä¸ªå±æ€§ä¸è¯¥è¡¨çš„å„ä¸ªå­—æ®µä¸€ä¸€å¯¹åº”\n\n\n\n\n4.2.8 å‘½ä»¤&amp;å‚æ•°ï¼šcreate-hive-tableç”Ÿæˆä¸å…³ç³»æ•°æ®åº“è¡¨ç»“æ„å¯¹åº”çš„hiveè¡¨ç»“æ„ã€‚\nå‘½ä»¤ï¼š\n$ bin/sqoop create-hive-table \\\n--connect jdbc:mysql://hadoop102:3306/company \\\n--username root \\\n--password 000000 \\\n--table staff \\\n--hive-table hive_staff\nå‚æ•°ï¼š\n\n\n\n\nåºå·\nå‚æ•°\nè¯´æ˜\n\n\n\n\n1\nâ€”hive-home \nHiveçš„å®‰è£…ç›®å½•ï¼Œå¯ä»¥é€šè¿‡è¯¥å‚æ•°è¦†ç›–æ‰é»˜è®¤çš„Hiveç›®å½•\n\n\n2\nâ€”hive-overwrite\nè¦†ç›–æ‰åœ¨Hiveè¡¨ä¸­å·²ç»å­˜åœ¨çš„æ•°æ®\n\n\n3\nâ€”create-hive-table\né»˜è®¤æ˜¯falseï¼Œå¦‚æœç›®æ ‡è¡¨å·²ç»å­˜åœ¨äº†ï¼Œé‚£ä¹ˆåˆ›å»ºä»»åŠ¡ä¼šå¤±è´¥\n\n\n4\nâ€”hive-table\nåé¢æ¥è¦åˆ›å»ºçš„hiveè¡¨\n\n\n5\nâ€”table\næŒ‡å®šå…³ç³»æ•°æ®åº“çš„è¡¨å\n\n\n\n\n4.2.9 å‘½ä»¤&amp;å‚æ•°ï¼ševalå¯ä»¥å¿«é€Ÿçš„ä½¿ç”¨SQLè¯­å¥å¯¹å…³ç³»å‹æ•°æ®åº“è¿›è¡Œæ“ä½œï¼Œç»å¸¸ç”¨äºåœ¨importæ•°æ®ä¹‹å‰ï¼Œäº†è§£ä¸€ä¸‹SQLè¯­å¥æ˜¯å¦æ­£ç¡®ï¼Œæ•°æ®æ˜¯å¦æ­£å¸¸ï¼Œå¹¶å¯ä»¥å°†ç»“æœæ˜¾ç¤ºåœ¨æ§åˆ¶å°ã€‚\nå‘½ä»¤ï¼š\nå¦‚ï¼š\n$ bin/sqoop eval \\\n--connect jdbc:mysql://hadoop102:3306/company \\\n--username root \\\n--password 000000 \\\n--query \"SELECT * FROM staff\"\nå‚æ•°ï¼š\n\n\n\n\nåºå·\nå‚æ•°\nè¯´æ˜\n\n\n\n\n1\nâ€”queryæˆ–â€”e\nåè·ŸæŸ¥è¯¢çš„SQLè¯­å¥\n\n\n\n\n4.2.10 å‘½ä»¤&amp;å‚æ•°ï¼šimport-all-tableså¯ä»¥å°†RDBMSä¸­çš„æ‰€æœ‰è¡¨å¯¼å…¥åˆ°HDFSä¸­ï¼Œæ¯ä¸€ä¸ªè¡¨éƒ½å¯¹åº”ä¸€ä¸ªHDFSç›®å½•\nå‘½ä»¤ï¼š\n$ bin/sqoop import-all-tables \\\n--connect jdbc:mysql://hadoop102:3306/company \\\n--username root \\\n--password 000000 \\\n--warehouse-dir /all_tables\nå‚æ•°ï¼š\n\n\n\n\nåºå·\nå‚æ•°\nè¯´æ˜\n\n\n\n\n1\nâ€”as-avrodatafile\nè¿™äº›å‚æ•°çš„å«ä¹‰å‡å’Œimportå¯¹åº”çš„å«ä¹‰ä¸€è‡´\n\n\n2\nâ€”as-sequencefile\n\n\n\n3\nâ€”as-textfile\n\n\n\n4\nâ€”direct\n\n\n\n5\nâ€”direct-split-size \n\n\n\n6\nâ€”inline-lob-limit \n\n\n\n7\nâ€”mæˆ–â€”num-mappers \n\n\n\n8\nâ€”warehouse-dir \n\n\n\n9\n-zæˆ–â€”compress\n\n\n\n10\nâ€”compression-codec\n\n\n\n\n4.2.11 å‘½ä»¤&amp;å‚æ•°ï¼šjobç”¨æ¥ç”Ÿæˆä¸€ä¸ªsqoopä»»åŠ¡ï¼Œç”Ÿæˆåä¸ä¼šç«‹å³æ‰§è¡Œï¼Œéœ€è¦æ‰‹åŠ¨æ‰§è¡Œã€‚\nå‘½ä»¤ï¼š\n$ bin/sqoop job \\ \n--create myjob -- import-all-tables \\ \n--connect jdbc:mysql://hadoop102:3306/company \\ \n--username root \\ \n--password 000000$ bin/sqoop job \\\n--list$ bin/sqoop job \\\n--exec myjob\nå°–å«æç¤ºï¼šæ³¨æ„import-all-tableså’Œå®ƒå·¦è¾¹çš„â€”ä¹‹é—´æœ‰ä¸€ä¸ªç©ºæ ¼\nå°–å«æç¤ºï¼šå¦‚æœéœ€è¦è¿æ¥metastoreï¼Œåˆ™â€”meta-connect jdbc:hsqldb:hsql://linux01:16000/sqoop\nå‚æ•°ï¼š\n\n\n\n\nåºå·\nå‚æ•°\nè¯´æ˜\n\n\n\n\n1\nâ€”create \nåˆ›å»ºjobå‚æ•°\n\n\n2\nâ€”delete \nåˆ é™¤ä¸€ä¸ªjob\n\n\n3\nâ€”exec \næ‰§è¡Œä¸€ä¸ªjob\n\n\n4\nâ€”help\næ˜¾ç¤ºjobå¸®åŠ©\n\n\n5\nâ€”list\næ˜¾ç¤ºjobåˆ—è¡¨\n\n\n6\nâ€”meta-connect \nç”¨æ¥è¿æ¥metastoreæœåŠ¡\n\n\n7\nâ€”show \næ˜¾ç¤ºä¸€ä¸ªjobçš„ä¿¡æ¯\n\n\n8\nâ€”verbose\næ‰“å°å‘½ä»¤è¿è¡Œæ—¶çš„è¯¦ç»†ä¿¡æ¯\n\n\n\n\nå°–å«æç¤ºï¼šåœ¨æ‰§è¡Œä¸€ä¸ªjobæ—¶ï¼Œå¦‚æœéœ€è¦æ‰‹åŠ¨è¾“å…¥æ•°æ®åº“å¯†ç ï¼Œå¯ä»¥åšå¦‚ä¸‹ä¼˜åŒ–\n&lt;property&gt;\t\n    &lt;name&gt;sqoop.metastore.client.record.password&lt;/name&gt;\t\n    &lt;value&gt;true&lt;/value&gt;\t\n    &lt;description&gt;If true, allow saved passwords in the metastore.&lt;/description&gt;&lt;/property&gt;\n4.2.12 å‘½ä»¤&amp;å‚æ•°ï¼šlist-databaseså‘½ä»¤ï¼š\n$ bin/sqoop list-databases \\\n--connect jdbc:mysql://hadoop102:3306/ \\\n--username root \\\n--password 000000\nå‚æ•°ï¼šä¸å…¬ç”¨å‚æ•°ä¸€æ ·\n4.2.13 å‘½ä»¤&amp;å‚æ•°ï¼šlist-tableså‘½ä»¤ï¼š\n$ bin/sqoop list-tables \\\n--connect jdbc:mysql://hadoop102:3306/company \\\n--username root \\\n--password 000000\nå‚æ•°ï¼šä¸å…¬ç”¨å‚æ•°ä¸€æ ·\n4.2.14 å‘½ä»¤&amp;å‚æ•°ï¼šmergeå°†HDFSä¸­ä¸åŒç›®å½•ä¸‹é¢çš„æ•°æ®åˆå¹¶åœ¨ä¸€èµ·å¹¶æ”¾å…¥æŒ‡å®šç›®å½•ä¸­\næ•°æ®ç¯å¢ƒï¼š\nnew_staff\n1    AAA   male\n2    BBB   male\n3    CCC   male\n4    DDD   male\n\nold_staff\n1    AAA   female\n2    CCC   female\n3    BBB   female\n6    DDD   female\nå°–å«æç¤ºï¼šä¸Šè¾¹æ•°æ®çš„åˆ—ä¹‹é—´çš„åˆ†éš”ç¬¦åº”è¯¥ä¸º\\tï¼Œè¡Œä¸è¡Œä¹‹é—´çš„åˆ†å‰²ç¬¦ä¸º\\nï¼Œå¦‚æœç›´æ¥å¤åˆ¶ï¼Œè¯·æ£€æŸ¥ä¹‹ã€‚\nå‘½ä»¤ï¼š\n# åˆ›å»ºJavaBeanï¼š\n$ bin/sqoop codegen \\\n--connect jdbc:mysql://hadoop102:3306/company \\\n--username root \\\n--password 000000 \\\n--table staff \\\n--bindir /home/admin/Desktop/staff \\\n--class-name Staff \\\n--fields-terminated-by \"\\t\" \n\n# å¼€å§‹åˆå¹¶ï¼š\n$ bin/sqoop merge \\\n--new-data /test/new/ \\\n--onto /test/old/ \\\n--target-dir /test/merged \\\n--jar-file /home/admin/Desktop/staff/Staff.jar \\\n--class-name Staff \\\n--merge-key id\n# ç»“æœï¼š\n1\tAAA\tMALE\n2\tBBB\tMALE\n3\tCCC\tMALE\n4\tDDD\tMALE\n6\tDDD\tFEMALE\nå‚æ•°ï¼š\n\n\n\n\nåºå·\nå‚æ•°\nè¯´æ˜\n\n\n\n\n1\nâ€”new-data \nHDFS å¾…åˆå¹¶çš„æ•°æ®ç›®å½•ï¼Œåˆå¹¶ååœ¨æ–°çš„æ•°æ®é›†ä¸­ä¿ç•™\n\n\n2\nâ€”onto \nHDFSåˆå¹¶åï¼Œé‡å¤çš„éƒ¨åˆ†åœ¨æ–°çš„æ•°æ®é›†ä¸­è¢«è¦†ç›–\n\n\n3\nâ€”merge-key \nåˆå¹¶é”®ï¼Œä¸€èˆ¬æ˜¯ä¸»é”®ID\n\n\n4\nâ€”jar-file \nåˆå¹¶æ—¶å¼•å…¥çš„jaråŒ…ï¼Œè¯¥jaråŒ…æ˜¯é€šè¿‡Codegenå·¥å…·ç”Ÿæˆçš„jaråŒ…\n\n\n5\nâ€”class-name \nå¯¹åº”çš„è¡¨åæˆ–å¯¹è±¡åï¼Œè¯¥classç±»æ˜¯åŒ…å«åœ¨jaråŒ…ä¸­çš„\n\n\n6\nâ€”target-dir \nåˆå¹¶åçš„æ•°æ®åœ¨HDFSé‡Œå­˜æ”¾çš„ç›®å½•\n\n\n\n\n4.2.15 å‘½ä»¤&amp;å‚æ•°ï¼šmetastoreè®°å½•äº†Sqoop jobçš„å…ƒæ•°æ®ä¿¡æ¯ï¼Œå¦‚æœä¸å¯åŠ¨è¯¥æœåŠ¡ï¼Œé‚£ä¹ˆé»˜è®¤jobå…ƒæ•°æ®çš„å­˜å‚¨ç›®å½•ä¸º~/.sqoopï¼Œå¯åœ¨sqoop-site.xmlä¸­ä¿®æ”¹ã€‚\nå‘½ä»¤ï¼š\nå¦‚ï¼šå¯åŠ¨sqoopçš„metastoreæœåŠ¡\n$ bin/sqoop metastore\nå‚æ•°ï¼š\n\n\n\n\nåºå·\nå‚æ•°\nè¯´æ˜\n\n\n\n\n1\nâ€”shutdown\nå…³é—­metastore\n\n\n\n\n","slug":"B15-Sqoop","date":"2021-12-14T06:01:37.000Z","categories_index":"å¤§æ•°æ®","tags_index":"Sqoop","author_index":"YFR718"},{"id":"a3f5b417ccee185425acbc3a549133c3","title":"LeetCodeåšé¢˜è®°å½•","content":"1111111111111111111\né¢˜å‹æ±‡æ€»\n\n\n\nç®—æ³•\nç»†åˆ†\né¢˜ç›®\n\n\n\n\nå“ˆå¸Œ\n\n1\n\n\nåŒæŒ‡é’ˆ\n\n3\n\n\nåŠ¨æ€è§„åˆ’\n\n5\n\n\näºŒåˆ†\n\n4\n\n\n\n\nåˆ·é¢˜æ±‡æ€»\n\n\n\né¢˜å·\né¢˜ç›®\nç®—æ³•\næœ€ä¼˜è§£\næ—¶é—´å¤æ‚åº¦\nå®ƒè§£\nç‹¬ç«‹è§£å†³\néš¾åº¦\nbest\n\n\n\n\n1\nä¸¤æ•°ä¹‹å’Œ\nå“ˆå¸Œ\nğŸ’š\n\n\nğŸ¤©\nğŸ˜˜\nğŸ’–\n\n\n2\nä¸¤æ•°ç›¸åŠ \næ¨¡æ‹Ÿ\nğŸ’š\n\n\nğŸ¤©\nğŸ¤”\nğŸ’–\n\n\n3\næ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²\nåŒæŒ‡é’ˆ\nğŸ’š\n\n\nğŸ¤©\nğŸ¤”\n\n\n\n4\nå¯»æ‰¾ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ä¸­ä½æ•°\näºŒåˆ†\nğŸ’š\n\nğŸ¤£\nğŸ˜­\nğŸ¥µ\nğŸ’–\n\n\n5\næœ€é•¿å›æ–‡å­ä¸²\nä¸­å¿ƒæ‰©æ•£\nğŸ¤\n\nğŸ˜’é©¬æ‹‰è½¦äºŒåˆ†+å“ˆå¸Œ\nğŸ˜­\nğŸ¤”\n\n\n\n6\nZ å­—å½¢å˜æ¢\næ•°å­¦è§„å¾‹\nğŸ’š\n\n\nğŸ¤©\nğŸ¤”\n\n\n\n7\næ•´æ•°åè½¬\nåˆç­‰æ•°å­¦\nğŸ’š\n\n\nğŸ¤©\nğŸ˜˜\nğŸ’–\n\n\n8\nå­—ç¬¦ä¸²è½¬æ¢æ•´æ•° (atoi)\næ¨¡æ‹Ÿ\nğŸ’š\n\n\nğŸ¤©\nğŸ¤”\nğŸ’–\n\n\n9\nå›æ–‡æ•°\næ¨¡æ‹Ÿ\nğŸ’š\n\n\nğŸ¤©\nğŸ˜˜\n\n\n\n10\næ­£åˆ™è¡¨è¾¾å¼åŒ¹é…\ndp\nğŸ’”\nacwing2h13m\n\nğŸ˜­\nğŸ¥µ\n\n\n\n11\nç››æœ€å¤šæ°´çš„å®¹å™¨\nè´ªå¿ƒ+åŒæŒ‡é’ˆ\nğŸ’š\n\n\nğŸ¤”\nğŸ¤”\n\n\n\n12\næ•´æ•°è½¬ç½—é©¬æ•°å­—\nè´ªå¿ƒ\nğŸ’š\n\n\nğŸ¤©\nğŸ¤”\nğŸ’–\n\n\n13\nç½—é©¬æ•°å­—è½¬æ•´æ•°\næ¨¡æ‹Ÿ\nğŸ’š\n\n\nğŸ¤©\nğŸ˜˜\n\n\n\n14\næœ€é•¿å…¬å…±å‰ç¼€\næ¨¡æ‹Ÿ\nğŸ’š\n\n\nğŸ¤”\nğŸ˜˜\n\n\n\n15\nä¸‰æ•°ä¹‹å’Œ\næ’åº+åŒæŒ‡é’ˆ\nğŸ’š\n\n\nğŸ¤”\nğŸ¤”\n\n\n\n16\næœ€æ¥è¿‘çš„ä¸‰æ•°ä¹‹å’Œ\næ’åº+åŒæŒ‡é’ˆ\nğŸ¤\n\n\nğŸ˜­\nğŸ¤”\n\n\n\n17\nç”µè¯å·ç çš„å­—æ¯ç»„åˆ\ndfs\nğŸ’š\n\n\nğŸ¤”\nğŸ¤”\n\n\n\n18\nå››æ•°ä¹‹å’Œ\næ’åº+åŒæŒ‡é’ˆ\nğŸ’š\n\n\nğŸ¤©\nğŸ¤”\n\n\n\n19\nåˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ N ä¸ªç»“ç‚¹\nåŒæŒ‡é’ˆ\nğŸ’š\n\næ ˆâˆš\nğŸ¤©\nğŸ¤”\nğŸ’–\n\n\n20\næœ‰æ•ˆçš„æ‹¬å·\næ ˆ\nğŸ’š\n\n\nğŸ¤©\nğŸ˜˜\nğŸ’–\n\n\n21\nåˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨\næ¨¡æ‹Ÿ\nğŸ’š\n\né€’å½’âˆš\nğŸ¤©\nğŸ˜˜\nğŸ’–\n\n\n22\næ‹¬å·ç”Ÿæˆ\ndfs\nğŸ’”ğŸ’š\n\n\nğŸ˜­\nğŸ¤”\nğŸ’–\n\n\n23\nåˆå¹¶Kä¸ªå‡åºé“¾è¡¨\nå½’å¹¶+åˆå¹¶\nğŸ’š\n\nå †æ’åº\nğŸ¤©\nğŸ¥µ\n\n\n\n24\nä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹\né€’å½’\nğŸ’š\n\n\nğŸ¤©\nğŸ¤”\nğŸ’–\n\n\n25\n kä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨\né€’å½’\nğŸ’š\n\n\nğŸ¤”\nğŸ¥µ\nğŸ’–\n\n\n26\nåˆ é™¤æœ‰åºæ•°ç»„ä¸­çš„é‡å¤é¡¹\nåŒæŒ‡é’ˆ\nğŸ’š\n\n\nğŸ¤©\nğŸ˜˜\nğŸ’–\n\n\n27\nç§»é™¤å…ƒç´ \nåŒæŒ‡é’ˆ\nğŸ’š\n\n\nğŸ¤©\nğŸ˜˜\nğŸ’–\n\n\n28\nå®ç° strStr()\næš´åŠ›\nğŸ¤\n\nKMP\nğŸ¤”\nğŸ˜˜\n\n\n\n29\nä¸¤æ•°ç›¸é™¤\nå€å‡æ³•\nğŸ¤\n\näºŒåˆ†\nğŸ¤”\nğŸ¤”\nå‘å¤ªå¤šäº†\n\n\n30\nä¸²è”æ‰€æœ‰å•è¯çš„å­ä¸²\n\nğŸ’”\nACwing1h42m\n\nğŸ˜­\nğŸ¥µ\n\n\n\n31\nä¸‹ä¸€ä¸ªæ’åˆ—\næ€ç»´\nğŸ’”ğŸ’š\n\n\nğŸ˜­\nğŸ¤”\nğŸ’–\n\n\n32\næœ€é•¿æœ‰æ•ˆæ‹¬å·\n\nğŸ’”\n\n\nğŸ˜­\nğŸ¥µ\n\n\n\n33\næœç´¢æ—‹è½¬æ’åºæ•°ç»„\nä¸¤æ¬¡äºŒåˆ†\nğŸ¤\n\nä¸€æ¬¡äºŒåˆ†\nğŸ¤”\nğŸ¤”\nğŸ’–\n\n\n34\næœ‰åºæ•°ç»„æŸ¥æ‰¾ç¬¬ä¸€æœ€åä¸€ä¸ªä½ç½®\näºŒåˆ†\nğŸ’š\n\n\nğŸ¤©\nğŸ¤”\nğŸ’–\n\n\n35\næœç´¢æ’å…¥ä½ç½®\näºŒåˆ†\nğŸ’š\n\n\nğŸ¤©\nğŸ˜˜\nğŸ’–\n\n\n36\næœ‰æ•ˆçš„æ•°ç‹¬\næš´åŠ›æ¨¡æ‹Ÿ\nğŸ¤\n\nä¸€æ¬¡éå†\nğŸ¤”\nğŸ¤”\n\n\n\n37\nè§£æ•°ç‹¬\ndfs\nğŸ’”ğŸ’š\n\n\nğŸ˜­\nğŸ¥µ\n\n\n\n38\nå¤–è§‚æ•°åˆ—\næ¨¡æ‹Ÿ\nğŸ¤\n\næ‰“è¡¨âˆš\nğŸ¤”\nğŸ¤”\nå¾…ä¼˜åŒ–\n\n\n39\nç»„åˆæ€»å’Œ\ndfs\nğŸ’š\n\n\nğŸ¤©\nğŸ¤”\n\n\n\n40\nç»„åˆæ€»å’Œ II\ndfs\nğŸ’”ğŸ’š\n\n\nğŸ˜­\nğŸ¤”\nå»é‡æ–¹æ³•\n\n\n41\nç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•°\nç½®æ¢\nğŸ¤ğŸ’š\n\nå“ˆå¸Œ\nğŸ¤”\nğŸ¤”\nğŸ’–\n\n\n42\næ¥é›¨æ°´\nè´ªå¿ƒ\nğŸ¤\n\nå•è°ƒæ ˆ\nğŸ¤”\nğŸ¥µ\n\n\n\n43\nå­—ç¬¦ä¸²ç›¸ä¹˜\nå¤§æ•°\nğŸ¤\n\nè¿˜æ²¡åš\nğŸ¤”\nğŸ¤”\n\n\n\n44\né€šé…ç¬¦åŒ¹é…\nDp\nğŸ’”ğŸ’š\n\n\nğŸ˜­\nğŸ¥µ\n\n\n\n45\nè·³è·ƒæ¸¸æˆ II\nè´ªå¿ƒ\nğŸ’š\n\ndpå€¼å¾—ä¸€çœ‹\nğŸ¤©\nğŸ¤”\nğŸ’–\n\n\n46\nå…¨æ’åˆ—\ndfs\nğŸ’š\n\n\nğŸ¤©\nğŸ¤”\nğŸ’–\n\n\n47\nå…¨æ’åˆ— II\ndfs\nğŸ’š\n\n\nğŸ¤”\nğŸ¤”\n\n\n\n48\næ—‹è½¬å›¾åƒ\næ•°å­¦è§„å¾‹\nğŸ’š\n\nACwingâ€™1h40m\nğŸ¤”\nğŸ¤”\nğŸ’–\n\n\n49\nå­—æ¯å¼‚ä½è¯åˆ†ç»„\n\n\n\n\n\n\n\n\n\n50\nPow(x, n)\n\n\n\n\n\n\n\n\n\n51\n\n\n\n\n\n\n\n\n\n\n52\n\n\n\n\n\n\n\n\n\n\n53\n\n\n\n\n\n\n\n\n\n\n54\n\n\n\n\n\n\n\n\n\n\n55\n\n\n\n\n\n\n\n\n\n\n56\n\n\n\n\n\n\n\n\n\n\n57\n\n\n\n\n\n\n\n\n\n\n58\n\n\n\n\n\n\n\n\n\n\n59\n\n\n\n\n\n\n\n\n\n\n60\n\n\n\n\n\n\n\n\n\n\n61\n\n\n\n\n\n\n\n\n\n\n62\n\n\n\n\n\n\n\n\n\n\n63\n\n\n\n\n\n\n\n\n\n\n64\n\n\n\n\n\n\n\n\n\n\n65\n\n\n\n\n\n\n\n\n\n\n66\n\n\n\n\n\n\n\n\n\n\n67\n\n\n\n\n\n\n\n\n\n\n68\n\n\n\n\n\n\n\n\n\n\n69\n\n\n\n\n\n\n\n\n\n\n70\n\n\n\n\n\n\n\n\n\n\n71\n\n\n\n\n\n\n\n\n\n\n72\n\n\n\n\n\n\n\n\n\n\n73\n\n\n\n\n\n\n\n\n\n\n74\n\n\n\n\n\n\n\n\n\n\n75\n\n\n\n\n\n\n\n\n\n\n76\n\n\n\n\n\n\n\n\n\n\n77\n\n\n\n\n\n\n\n\n\n\n78\n\n\n\n\n\n\n\n\n\n\n79\n\n\n\n\n\n\n\n\n\n\n80\n\n\n\n\n\n\n\n\n\n\n81\n\n\n\n\n\n\n\n\n\n\n82\n\n\n\n\n\n\n\n\n\n\n83\n\n\n\n\n\n\n\n\n\n\n84\n\n\n\n\n\n\n\n\n\n\n85\n\n\n\n\n\n\n\n\n\n\n86\n\n\n\n\n\n\n\n\n\n\n87\n\n\n\n\n\n\n\n\n\n\n88\n\n\n\n\n\n\n\n\n\n\n89\n\n\n\n\n\n\n\n\n\n\n90\n\n\n\n\n\n\n\n\n\n\n91\n\n\n\n\n\n\n\n\n\n\n92\n\n\n\n\n\n\n\n\n\n\n93\n\n\n\n\n\n\n\n\n\n\n94\n\n\n\n\n\n\n\n\n\n\n95\n\n\n\n\n\n\n\n\n\n\n96\n\n\n\n\n\n\n\n\n\n\n97\n\n\n\n\n\n\n\n\n\n\n98\n\n\n\n\n\n\n\n\n\n\n\nç®—æ³•åˆ†ç±»å¯¹åº”é¢˜ç›®åˆ†ç±»","slug":"l00","date":"2021-11-05T13:51:29.000Z","categories_index":"LeetCode","tags_index":"","author_index":"YFR718"},{"id":"71dcb878b30b2fb16e5265f7515744d5","title":"ç–‘éš¾æ‚ç—‡é˜Ÿåˆ—","content":"Java\næ•´ç†ç¬”è®°ï¼Œç­‰å¾…å‘å¸ƒ\nå°šç¡…è°·æ•´ç†çš„Javaå­¦ä¹ \nä¹¦5.7è·³è¿‡\n\nLinux\nç¬”è®°æ•´ç†ï¼Œå¾…å‘å¸ƒ\nshellç¼–ç¨‹ç¬”è®°æ•´ç†ï¼Œå¾…å‘å¸ƒ\n\nç®—æ³•\nleetcodeæ¯æ—¥ä¸‰é“é¢˜\nACwingè¯¾ç¨‹å­¦ä¹ \n\nHadoop\nP88 jobæäº¤æºç \nP89 åˆ‡ç‰‡æºç \nP97 ã€98è‡ªå®šä¹‰åˆ†åŒº\nP100~102\nP104 Combiner\nP107 OutPutFormat\nP101 æºç è§£æ\n\n\nHive\nP12 hiveå¯åŠ¨è„šæœ¬\n\nHbase\nP15 root-\n\n","slug":"1-ç–‘éš¾æ‚ç—‡é˜Ÿåˆ—","date":"2021-11-04T05:27:30.000Z","categories_index":"å­¦ä¹ è§„åˆ’","tags_index":"","author_index":"YFR718"},{"id":"f73a8e23e6f6f669cf99c7dba8fa0722","title":"","content":"title: Z1.ç®—æ³•åˆ·é¢˜æ€»ç»“date: 2021-12-10 13:18:02comments: true #æ˜¯å¦å¯è¯„è®ºtoc: true  #æ˜¯å¦æ˜¾ç¤ºæ–‡ç« ç›®å½•cover: https://img-blog.csdnimg.cn/694ad945ebe7403ea1f05e05ab6938f5.jpg?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAWUZSNzE4,size_20,color_FFFFFF,t_70,g_se,x_16#pic_centercategories: \n\nâ€œLeetCodeâ€ #åˆ†ç±»tags: \nç®—æ³•\n\né¢˜ç›®çš„å‘nullå€¼é—®é¢˜\n\n\n\nnullå‡ºç°æƒ…å†µ\n\n\n\n\n\né“¾è¡¨ä¸ºnull\n\n\n\nå­—ç¬¦ä¸²é•¿åº¦ä¸º0\n\n\n\næ•°ç»„é•¿åº¦ä¸º0\n\n\n\n\nå¤šæƒ…å†µè®¨è®º\nnä¸ºå¥‡æ•°ï¼Œnä¸ºå¶æ•°\nä¸ºæ­£æ•°ã€ä¸ºè´Ÿæ•°\n\nintæº¢å‡º\nintèŒƒå›´ï¼š[-pow(2,31),pow(2,31)-1]\nintèŒƒå›´ï¼š[-2147483648ï¼Œ2147483647]\n\næº¢å‡ºçš„åˆ¤æ–­\n//æ•°å­¦æ¨å…¬å¼\nif( x &lt; 0 &amp;&amp; ans &lt; (-Math.pow(2,31) - x %10) / 10) return 0;\nif( x > 0 &amp;&amp; ans > (Math.pow(2,31) - x %10 -1) / 10) return 0;\n\n//å°æŠ€å·§ï¼šçœ‹é™¤10ä¸åŸæ¥çš„å€¼æ˜¯å¦ç›¸ç­‰\nint temp = result;\nresult = (x % 10) + (result * 10);  \nif (result / 10 != temp) return 0;\n\nåŸºç¡€næ•°ä¹‹å’Œ\n\n\n\né¢˜ç›®\næ€è·¯\nå¤æ‚åº¦\né¢˜å·\n\n\n\n\næ— åºæ•°ç»„ï¼Œä¸¤æ•°ä¹‹å’Œ\néå†ï¼Œå“ˆå¸ŒæŸ¥æ‰¾å¦ä¸€ä¸ªæ•°ï¼Œä¸å­˜åœ¨å°±å­˜åœ¨å“ˆå¸Œè¡¨é‡Œ\n$O(n)$\n1\n\n\næ’åºå¥½çš„æ•°ç»„ï¼Œä¸¤æ•°ä¹‹å’Œ\nåŒæŒ‡é’ˆ\n$O(n)$\n\n\n\nä¸‰æ•°ä¹‹å’Œ\næ’åºï¼Œforå¾ªç¯åŠ åŒæ•°ä¹‹å’Œ\n$O(n^2)$\n1516\n\n\nå››æ•°ä¹‹å’Œ\nåŒé‡forå¾ªç¯+åŒæ•°ä¹‹å’Œï¼Œå»é‡æ–¹æ³•ï¼šå’Œå‰ä¸€ä¸ªæ•°ä¸€æ ·å°±è·³è¿‡\n$O(n^3)$\n18\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nåè½¬\n\n\n\né¢˜ç›®\næ€è·¯\nå¤æ‚åº¦\né¢˜å·\n\n\n\n\næ•´æ•°åè½¬\nä¸æ–­å–æœ€åä¸€ä½åŠ åˆ°æ–°ç»“æœçš„åé¢\n$O(n)$\n7\n\n\nåˆ¤æ–­å›æ–‡æ•°\nå¯¹æ•°å­—åè½¬ï¼Œçœ‹æ˜¯å¦ç›¸ç­‰\n$O(n)$\n9\n\n\n\n\n\n\n\n\n\nåŒæŒ‡é’ˆ\nå¥½é©¬ä¸åƒå›å¤´è‰ï¼ŒåŒæŒ‡é’ˆéƒ½æœå•ä¸€æ–¹å‘ç§»åŠ¨\n\nåŒå‘ç§»åŠ¨\n\n\n\né¢˜ç›®\næ€è·¯\nå¤æ‚åº¦\né¢˜å·\n\n\n\n\næœ€é•¿ä¸é‡å¤å­ä¸²\nä¸æ–­ç§»åŠ¨å³æŒ‡é’ˆï¼Œç»´æŠ¤å·¦æŒ‡é’ˆçš„ä½ç½®å’Œæ›´æ–°ç­”æ¡ˆ\n$O(n)$\n3\n\n\nåˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ N ä¸ªç»“ç‚¹\nå³æŒ‡é’ˆåœ¨å·¦æŒ‡é’ˆå‰n-1ä¸ªï¼Œä¸¤æŒ‡é’ˆåŒæ—¶å‘å³èµ°ï¼Œå³æŒ‡é’ˆåˆ°å¤´ï¼Œå·¦æŒ‡é’ˆå°±æ˜¯ç­”æ¡ˆ\n$O(n)$\n19\n\n\nåˆ é™¤æœ‰åºæ•°ç»„ä¸­çš„é‡å¤é¡¹\nå·¦æŒ‡é’ˆæ˜¯æ­£ç¡®çš„ä½ç½®ï¼Œå³æŒ‡é’ˆæ˜¯å½“å‰éå†çš„ä½ç½®\n$O(n)$\n26\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nåå‘ç§»åŠ¨\n\n\n\né¢˜ç›®\næ€è·¯\nå¤æ‚åº¦\né¢˜å·\n\n\n\n\næœ‰åºæ•°ç»„ï¼Œä¸¤æ•°ä¹‹å’Œ\nå·¦å³å’Œå¤§äºtï¼Œå³å‘ä¸­é—´ç§»åŠ¨ï¼Œåä¹‹å·¦å‘ä¸­é—´ç§»åŠ¨\n$O(n)$\n1\n\n\nç››æ°´æœ€å¤šçš„å®¹å™¨\nä¸æ–­å°†çŸ­çš„æŒ‡é’ˆå‘ä¸­é—´ç§»åŠ¨ï¼Œæ›´æ–°ç­”æ¡ˆ\n$O(n)$\n11\n\n\n\n\n\n\n\n\n\næ ˆ\n\n\n\né¢˜ç›®\næ€è·¯\nå¤æ‚åº¦\né¢˜å·\n\n\n\n\næœ‰æ•ˆçš„æ‹¬å·\nå·¦æ‹¬å·å…¥æ ˆï¼Œå³æ‹¬å·å‡ºæ ˆï¼Œè¿›è¡Œåˆ¤æ–­\n$O(n)$\n20\n\n\næœ€é•¿æœ‰æ•ˆæ‹¬å·\næœ‰ç‚¹éš¾å•Š\n$O(n)$\n32\n\n\n\n\n\n\n\n\n\nå•è°ƒæ ˆ\n\n\n\né¢˜ç›®\næ€è·¯\nå¤æ‚åº¦\né¢˜å·\n\n\n\n\næ¥é›¨æ°´\nå•è°ƒé€’å‡æ ˆï¼Œé«˜äºæ ˆé¡¶ï¼Œå–æ•°åŠ é›¨æ°´\n$O(n)$\n42\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\näºŒåˆ†æŸ¥æ‰¾\n\n\n\né¢˜ç›®\næ€è·¯\nå¤æ‚åº¦\né¢˜å·\n\n\n\n\næœç´¢æ—‹è½¬æ’åºæ•°ç»„\nå¯ä»¥ä¸¤æ¬¡äºŒåˆ†ï¼Œä¹Ÿå¯ä»¥ä¸€æ¬¡è§£å†³\n$O(logn)$\n33\n\n\næ’åºæ•°ç»„æŸ¥æ‰¾ç¬¬ä¸€å’Œæœ€åä½ç½®\nä¸¤æ¬¡äºŒåˆ†ï¼Œæˆ–äºŒåˆ†ä¸€æ¬¡å†æ‰©æ•£Â·\n$O(logn)$\n34\n\n\næœç´¢æ’å…¥ä½ç½®\nç®€å•çš„äºŒåˆ†\n$O(logn)$\n35\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\né€’å½’\n\n\n\né¢˜ç›®\næ€è·¯\nå¤æ‚åº¦\né¢˜å·\n\n\n\n\nåˆå¹¶Kä¸ªå‡åºé“¾è¡¨\nå½’å¹¶+åˆå¹¶\n$O(nlogn)$\n4\n\n\nåˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨\nå¤§åŒ–å°ï¼Œå°åŒ–äº†\n$O(n)$\n21\n\n\nä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹\nå¤§åŒ–å°ï¼Œå°åŒ–äº†\n$O(n)$\n24\n\n\nK ä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨\nå¤§åŒ–å°ï¼Œå°åŒ–äº†\n$O(n)$\n25ã€27\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nå½’å¹¶\n\n\n\né¢˜ç›®\næ€è·¯\nå¤æ‚åº¦\né¢˜å·\n\n\n\n\nä¸¤ä¸ªæœ‰åºæ•°ç»„çš„ä¸­ä½æ•°\nåˆ†åˆ«çœ‹ä¸¤æ•°ç»„çš„ä¸­ä½æ•°ï¼Œå°çš„é‚£ä¸ªå·¦è¾¹çš„æ•°ä¸€å®šåœ¨æ•´ä½“ä¸­ä½æ•°å‰é¢\n$O(logn)$\n23\n\n\nåˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨\nå¤§åŒ–å°ï¼Œå°åŒ–äº†\n$O(n)$\n21\n\n\n\n\n\n\n\n\n\nDFS\n\n\n\né¢˜ç›®\næ€è·¯\nå¤æ‚åº¦\né¢˜ç›®\n\n\n\n\næšä¸¾æ‰€æœ‰ç»„åˆ\ndfsæš´æœ\n$O(logn)$\n17\n\n\næ‹¬å·ç”Ÿæˆ\næ§åˆ¶æ‰€æœ‰å‰ç¼€å·¦æ‹¬å·æ•°é‡&gt;=å³æ‹¬å·æ•°é‡\n$O(C^n_{2n})$\n22\n\n\nè§£æ•°ç‹¬\ndfsæš´æœï¼Œæ³¨æ„è¯¥åœå°±åœ\n\n37\n\n\nç»„åˆæ€»å’Œ\ndfsæš´æœï¼Œæ³¨æ„ä¸é‡å¤\n\n39\n\n\nå…¨æ’åˆ—\ndfsæš´æœï¼Œæ³¨æ„ä¸é‡å¤\n\n46ã€47\n\n\n\n\n\n\n\n\n\nDp\n\n\n\né¢˜ç›®\næ€è·¯\nå¤æ‚åº¦\n\n\n\n\n\né€šé…ç¬¦åŒ¹é…\ndp\n$O(n^2)$\n44\n\n\nè·³è·ƒæ¸¸æˆ II\ndp\n$O(n)$\n45\n\n\n\n\n\n\n\n\n\n\næ•°å­¦æ•°å­¦è§„å¾‹\n\n\n\né¢˜ç›®\næ€è·¯\nå¤æ‚åº¦\n\n\n\n\n\nZ å­—å½¢å˜æ¢\nåˆ†åˆ«çœ‹ä¸¤æ•°ç»„çš„ä¸­ä½æ•°ï¼Œå°çš„é‚£ä¸ªå·¦è¾¹çš„æ•°ä¸€å®šåœ¨æ•´ä½“ä¸­ä½æ•°å‰é¢\n$O(logn)$\n6\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\næŒ‡æ•°å˜åŒ–è®¡ç®—å¿«é€Ÿå¹‚å€å‡\n\n\n\né¢˜ç›®\næ€è·¯\nå¤æ‚åº¦\n\n\n\n\n\nä¸¤æ•°ç›¸é™¤\nä»å¤§åˆ°å°å€å‡\n$O(logn)$\n29\n\n\næ—‹è½¬å›¾åƒ\næ‰¾åˆ°æ—‹è½¬çš„è§„å¾‹\n$O(n^2)$\n48\n\n\n\n\n\n\n\n\n\nå­—ç¬¦ä¸²é©¬æ‹‰è½¦\n\n\n\né¢˜ç›®\næ€è·¯\nå¤æ‚åº¦\né¢˜å·\n\n\n\n\næœ€é•¿å›æ–‡å­ä¸²\n\n$O()$\n5\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nKMP\n\n\n\né¢˜ç›®\næ€è·¯\nå¤æ‚åº¦\né¢˜å·\n\n\n\n\næŸ¥æ‰¾å­ä¸²çš„ä½ç½®\næ ‡å‡†KMP\n$O(n)$\n28\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nå­—å…¸åº\n\n\n\né¢˜ç›®\næ€è·¯\nå¤æ‚åº¦\né¢˜å·\n\n\n\n\nä¸‹ä¸€ä¸ªæ’åˆ—\nä»å³å‘å·¦æ‰¾åˆ°ç¬¬ä¸€ä¸ªé€’å‡çš„æ•°å­—ï¼Œå°†å…¶ä¸å³è¾¹ç¬¬ä¸€ä¸ªæ¯”ä»–å¤§çš„äº¤æ¢ï¼Œç„¶åå¯¹åˆšæ‰é‚£ä¸ªæ•°å³è¾¹çš„é€†åº\n$O(n)$\n31\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","slug":"Z1-ç®—æ³•åˆ·é¢˜æ€»ç»“","date":"2021-12-10T05:18:02.659Z","categories_index":"","tags_index":"","author_index":"YFR718"},{"id":"bdaca94a32610d2aa675f6770452dae7","title":"J9.JAVAç¨‹åºè®¾è®¡å¸¸ç”¨","content":"æ•°ç»„//æ•°ç»„åˆ›å»º\nint[] a = new int[100];\nint[] a = new int[]{0,1,2};\n\n//æ•°ç»„é•¿åº¦\nint len = a.length;\n\n//å–æ•°\nfor(int i = 0; i &lt; a.length; i++){\n    System.out.println(a[i]);\n}\nListStringBuilderStringBuilder s = new StringBuilder();\ns.append(')');\ns.deleteCharAt(s.length() - 1);\nMapHashMap// åˆ›å»º\nHashMap&lt;Integer,Integer&gt; ha = new HashMap&lt;Integer,Integer&gt;();\n//æ·»åŠ é”®å€¼å¯¹put(k,v)\nha.put(1,1);\n//è®¿é—®å…ƒç´ get(k)\nha.get(1);\n//åˆ é™¤å…ƒç´ remove(k)\nha.remove(k);\n//æ¸…ç©ºæ•°æ®clear()\nha.clear();\n//åˆ¤æ–­kæ˜¯å¦å­˜åœ¨containsKey()\nha.containsKey(1);\n// è¾“å‡º key å’Œ value\nfor (Integer i : Sites.keySet()) {\nSystem.out.println(\"key: \" + i + \" value: \" + Sites.get(i));\n}\n// è¿”å›æ‰€æœ‰ value å€¼\nfor(String value: Sites.values()) {\n// è¾“å‡ºæ¯ä¸€ä¸ªvalue\nSystem.out.print(value + \", \");\n}\n\n\n\n\n\n\n\n\n\nJava HashMap å¸¸ç”¨æ–¹æ³•åˆ—è¡¨å¦‚ä¸‹ï¼š\n\n\n\n\næ–¹æ³•\næè¿°\n\n\n\n\nclear()\nåˆ é™¤ hashMap ä¸­çš„æ‰€æœ‰é”®/å€¼å¯¹\n\n\nclone()\nå¤åˆ¶ä¸€ä»½ hashMap\n\n\nisEmpty()\nåˆ¤æ–­ hashMap æ˜¯å¦ä¸ºç©º\n\n\nsize()\nè®¡ç®— hashMap ä¸­é”®/å€¼å¯¹çš„æ•°é‡\n\n\nput()\nå°†é”®/å€¼å¯¹æ·»åŠ åˆ° hashMap ä¸­\n\n\nputAll()\nå°†æ‰€æœ‰é”®/å€¼å¯¹æ·»åŠ åˆ° hashMap ä¸­\n\n\nputIfAbsent()\nå¦‚æœ hashMap ä¸­ä¸å­˜åœ¨æŒ‡å®šçš„é”®ï¼Œåˆ™å°†æŒ‡å®šçš„é”®/å€¼å¯¹æ’å…¥åˆ° hashMap ä¸­ã€‚\n\n\nremove()\nåˆ é™¤ hashMap ä¸­æŒ‡å®šé”® key çš„æ˜ å°„å…³ç³»\n\n\ncontainsKey()\næ£€æŸ¥ hashMap ä¸­æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„ key å¯¹åº”çš„æ˜ å°„å…³ç³»ã€‚\n\n\ncontainsValue()\næ£€æŸ¥ hashMap ä¸­æ˜¯å¦å­˜åœ¨æŒ‡å®šçš„ value å¯¹åº”çš„æ˜ å°„å…³ç³»ã€‚\n\n\nreplace()\næ›¿æ¢ hashMap ä¸­æ˜¯æŒ‡å®šçš„ key å¯¹åº”çš„ valueã€‚\n\n\nreplaceAll()\nå°† hashMap ä¸­çš„æ‰€æœ‰æ˜ å°„å…³ç³»æ›¿æ¢æˆç»™å®šçš„å‡½æ•°æ‰€æ‰§è¡Œçš„ç»“æœã€‚\n\n\nget()\nè·å–æŒ‡å®š key å¯¹åº”å¯¹ value\n\n\ngetOrDefault()\nè·å–æŒ‡å®š key å¯¹åº”å¯¹ valueï¼Œå¦‚æœæ‰¾ä¸åˆ° key ï¼Œåˆ™è¿”å›è®¾ç½®çš„é»˜è®¤å€¼\n\n\nforEach()\nå¯¹ hashMap ä¸­çš„æ¯ä¸ªæ˜ å°„æ‰§è¡ŒæŒ‡å®šçš„æ“ä½œã€‚\n\n\nentrySet()\nè¿”å› hashMap ä¸­æ‰€æœ‰æ˜ å°„é¡¹çš„é›†åˆé›†åˆè§†å›¾ã€‚\n\n\nkeySet()\nè¿”å› hashMap ä¸­æ‰€æœ‰ key ç»„æˆçš„é›†åˆè§†å›¾ã€‚\n\n\nvalues()\nè¿”å› hashMap ä¸­å­˜åœ¨çš„æ‰€æœ‰ value å€¼ã€‚\n\n\nmerge()\næ·»åŠ é”®å€¼å¯¹åˆ° hashMap ä¸­\n\n\ncompute()\nå¯¹ hashMap ä¸­æŒ‡å®š key çš„å€¼è¿›è¡Œé‡æ–°è®¡ç®—\n\n\ncomputeIfAbsent()\nå¯¹ hashMap ä¸­æŒ‡å®š key çš„å€¼è¿›è¡Œé‡æ–°è®¡ç®—ï¼Œå¦‚æœä¸å­˜åœ¨è¿™ä¸ª keyï¼Œåˆ™æ·»åŠ åˆ° hasMap ä¸­\n\n\ncomputeIfPresent()\nå¯¹ hashMap ä¸­æŒ‡å®š key çš„å€¼è¿›è¡Œé‡æ–°è®¡ç®—ï¼Œå‰ææ˜¯è¯¥ key å­˜åœ¨äº hashMap ä¸­ã€‚\n\n\n\n\n ","slug":"J9-JAVAç¨‹åºè®¾è®¡å¸¸ç”¨","date":"2021-12-09T02:07:42.000Z","categories_index":"JAVA","tags_index":"java","author_index":"YFR718"},{"id":"1ef108aa9ecabbdf8ffcf18de47743c9","title":"B14.Flink","content":"","slug":"B14-Flink","date":"2021-11-26T06:26:46.000Z","categories_index":"","tags_index":"","author_index":"YFR718"},{"id":"5ba67c79c316c64fb891710085fcb117","title":"B13.Spark","content":"","slug":"B13-Spark","date":"2021-11-26T06:26:30.000Z","categories_index":"","tags_index":"","author_index":"YFR718"},{"id":"6d3c7a83d596d0745187b745b2ec60dc","title":"B12.scala","content":"","slug":"B12-scala","date":"2021-11-26T06:26:22.000Z","categories_index":"","tags_index":"","author_index":"YFR718"},{"id":"b244e3b85104863ef08f66c0cb6a98b0","title":"B11.kafka","content":"","slug":"B11-kafka","date":"2021-11-26T06:25:49.000Z","categories_index":"","tags_index":"","author_index":"YFR718"},{"id":"f6c5ab269c53087419eb1c0be5e917d0","title":"Flume","content":"1. Flume æ¦‚è¿°â€‹        Flume æ˜¯ Cloudera æä¾›çš„ä¸€ä¸ªé«˜å¯ç”¨çš„ï¼Œé«˜å¯é çš„ï¼Œåˆ†å¸ƒå¼çš„æµ·é‡æ—¥å¿—é‡‡é›†ã€èšåˆå’Œä¼ è¾“çš„ç³»ç»Ÿã€‚Flume åŸºäºæµå¼æ¶æ„ï¼Œçµæ´»ç®€å•ã€‚\n\nFlume ç»„æˆæ¶æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\n\nAgentAgent æ˜¯ä¸€ä¸ª JVM è¿›ç¨‹ï¼Œå®ƒä»¥äº‹ä»¶çš„å½¢å¼å°†æ•°æ®ä»æºå¤´é€è‡³ç›®çš„ã€‚Agent ä¸»è¦æœ‰ 3 ä¸ªéƒ¨åˆ†ç»„æˆï¼ŒSourceã€Channelã€Sinkã€‚\nSourceSource æ˜¯è´Ÿè´£æ¥æ”¶æ•°æ®åˆ° Flume Agent çš„ç»„ä»¶ã€‚Source ç»„ä»¶å¯ä»¥å¤„ç†å„ç§ç±»å‹ã€å„ç§æ ¼å¼çš„æ—¥å¿—æ•°æ®ï¼ŒåŒ…æ‹¬ avroã€thriftã€execã€jmsã€spooling directoryã€netcatã€taildirã€sequence generatorã€syslogã€httpã€legacyã€‚\nSinkSink ä¸æ–­åœ°è½®è¯¢ Channel ä¸­çš„äº‹ä»¶ä¸”æ‰¹é‡åœ°ç§»é™¤å®ƒä»¬ï¼Œå¹¶å°†è¿™äº›äº‹ä»¶æ‰¹é‡å†™å…¥åˆ°å­˜å‚¨æˆ–ç´¢å¼•ç³»ç»Ÿã€æˆ–è€…è¢«å‘é€åˆ°å¦ä¸€ä¸ª Flume Agentã€‚Sink ç»„ä»¶ç›®çš„åœ°åŒ…æ‹¬ hdfsã€loggerã€avroã€thriftã€ipcã€fileã€HBaseã€solrã€è‡ªå®šä¹‰ã€‚\nChannelChannel æ˜¯ä½äº Source å’Œ Sink ä¹‹é—´çš„ç¼“å†²åŒºã€‚å› æ­¤ï¼ŒChannel å…è®¸ Source å’Œ Sink è¿ä½œåœ¨ä¸åŒçš„é€Ÿç‡ä¸Šã€‚Channel æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¯ä»¥åŒæ—¶å¤„ç†å‡ ä¸ª Source çš„å†™å…¥æ“ä½œå’Œå‡ ä¸ªSink çš„è¯»å–æ“ä½œã€‚Flume è‡ªå¸¦ä¸¤ç§ Channelï¼šMemory Channel å’Œ File Channelã€‚\nMemory Channel æ˜¯å†…å­˜ä¸­çš„é˜Ÿåˆ—ã€‚Memory Channel åœ¨ä¸éœ€è¦å…³å¿ƒæ•°æ®ä¸¢å¤±çš„æƒ…æ™¯ä¸‹é€‚ç”¨ã€‚å¦‚æœéœ€è¦å…³å¿ƒæ•°æ®ä¸¢å¤±ï¼Œé‚£ä¹ˆ Memory Channel å°±ä¸åº”è¯¥ä½¿ç”¨ï¼Œå› ä¸ºç¨‹åºæ­»äº¡ã€æœºå™¨å®•æœºæˆ–è€…é‡å¯éƒ½ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±ã€‚\nFile Channel å°†æ‰€æœ‰äº‹ä»¶å†™åˆ°ç£ç›˜ã€‚å› æ­¤åœ¨ç¨‹åºå…³é—­æˆ–æœºå™¨å®•æœºçš„æƒ…å†µä¸‹ä¸ä¼šä¸¢å¤±æ•°æ®ã€‚\n\n\nEventä¼ è¾“å•å…ƒï¼ŒFlume æ•°æ®ä¼ è¾“çš„åŸºæœ¬å•å…ƒï¼Œä»¥ Event çš„å½¢å¼å°†æ•°æ®ä»æºå¤´é€è‡³ç›®çš„åœ°ã€‚Event ç”± Header å’Œ Body ä¸¤éƒ¨åˆ†ç»„æˆï¼ŒHeader ç”¨æ¥å­˜æ”¾è¯¥ event çš„ä¸€äº›å±æ€§ï¼Œä¸º K-V ç»“æ„ï¼ŒBody ç”¨æ¥å­˜æ”¾è¯¥æ¡æ•°æ®ï¼Œå½¢å¼ä¸ºå­—èŠ‚æ•°ç»„ã€‚\n\n2. Flume å…¥é—¨2.1 Flume å®‰è£…éƒ¨ç½²å®‰è£…åœ°å€ï¼š\nï¼ˆ1ï¼‰Flume å®˜ç½‘åœ°å€ï¼šhttp://flume.apache.org/ï¼ˆ2ï¼‰æ–‡æ¡£æŸ¥çœ‹åœ°å€ï¼šhttp://flume.apache.org/FlumeUserGuide.htmlï¼ˆ3ï¼‰ä¸‹è½½åœ°å€ï¼šhttp://archive.apache.org/dist/flume/ã€\nå®‰è£…éƒ¨ç½²ï¼š\nï¼ˆ1ï¼‰å°† apache-flume-1.9.0-bin.tar.gz ä¸Šä¼ åˆ° linux çš„/opt/software ç›®å½•ä¸‹ï¼ˆ2ï¼‰è§£å‹ apache-flume-1.9.0-bin.tar.gz åˆ°/opt/module/ç›®å½•ä¸‹\n[atguigu@hadoop102 software]$ tar -zxf /opt/software/apache flume-1.9.0-bin.tar.gz -C /opt/module/\nï¼ˆ3ï¼‰ä¿®æ”¹ apache-flume-1.9.0-bin çš„åç§°ä¸º flume\n[atguigu@hadoop102 module]$ mv /opt/module/apache-flume-1.9.0-bin /opt/module/flume\nï¼ˆ4ï¼‰å°† lib æ–‡ä»¶å¤¹ä¸‹çš„ guava-11.0.2.jar åˆ é™¤ä»¥å…¼å®¹ Hadoop 3.1.3\n[atguigu@hadoop102 lib]$ rm /opt/module/flume/lib/guava-11.0.2.jar\n2.2 å…¥é—¨æ¡ˆä¾‹1ï¼‰ ç›‘æ§ç«¯å£æ•°æ®å®˜æ–¹æ¡ˆä¾‹\næ¡ˆä¾‹éœ€æ±‚ï¼šä½¿ç”¨ Flume ç›‘å¬ä¸€ä¸ªç«¯å£ï¼Œæ”¶é›†è¯¥ç«¯å£æ•°æ®ï¼Œå¹¶æ‰“å°åˆ°æ§åˆ¶å°ã€‚\néœ€æ±‚åˆ†æï¼š\n\n\n\nå®ç°æ­¥éª¤ï¼šï¼ˆ1ï¼‰å®‰è£… netcat å·¥å…·\n[atguigu@hadoop102 software]$ sudo yum install -y nc\nï¼ˆ2ï¼‰åˆ¤æ–­ 44444 ç«¯å£æ˜¯å¦è¢«å ç”¨\n[atguigu@hadoop102 flume-telnet]$ sudo netstat -nlp | grep 44444\nï¼ˆ3ï¼‰åˆ›å»º Flume Agent é…ç½®æ–‡ä»¶ flume-netcat-logger.confï¼ˆ4ï¼‰åœ¨ flume ç›®å½•ä¸‹åˆ›å»º job æ–‡ä»¶å¤¹å¹¶è¿›å…¥ job æ–‡ä»¶å¤¹ã€‚\n[atguigu@hadoop102 flume]$ mkdir job\n[atguigu@hadoop102 flume]$ cd job/\nï¼ˆ5ï¼‰åœ¨ job æ–‡ä»¶å¤¹ä¸‹åˆ›å»º Flume Agent é…ç½®æ–‡ä»¶ flume-netcat-logger.confã€‚\n[atguigu@hadoop102 job]$ vim flume-netcat-logger.conf\nï¼ˆ6ï¼‰åœ¨ flume-netcat-logger.conf æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹ã€‚æ·»åŠ å†…å®¹å¦‚ä¸‹ï¼š\n# Name the components on this agent\n# a1:è¡¨ç¤ºagentçš„åç§°\n# r1:è¡¨ç¤ºa1çš„Sourceçš„åç§°\n# k1:è¡¨ç¤ºa1çš„Sinkçš„åç§°\n# c1:è¡¨ç¤ºa1çš„Channelçš„åç§°\na1.sources = r1\na1.sinks = k1\na1.channels = c1\n\n# Describe/configure the source\n# è¡¨ç¤ºa1çš„è¾“å…¥æºç±»å‹ä¸ºnetcatç«¯å£ç±»å‹\n# è¡¨ç¤ºa1çš„ç›‘å¬çš„ä¸»æœº\n# è¡¨ç¤ºa1çš„ç›‘å¬çš„ç«¯å£å·\na1.sources.r1.type = netcat\na1.sources.r1.bind = localhost\na1.sources.r1.port = 44444\n\n# Describe the sink\n# è¡¨ç¤ºa1çš„è¾“å‡ºç›®çš„åœ°æ˜¯æ§åˆ¶å°loggerç±»å‹\na1.sinks.k1.type = logger\n\n# Use a channel which buffers events in memory\n# è¡¨ç¤ºa1çš„channelç±»å‹æ˜¯memoryå†…å­˜å‹\n# è¡¨ç¤ºa1çš„channelæ€»å®¹é‡1000ä¸ªevent\n# è¡¨ç¤ºa1çš„channelä¼ è¾“æ—¶æ”¶é›†åˆ°äº†100æ¡eventä»¥åå†å»æäº¤äº‹åŠ¡\na1.channels.c1.type = memory\na1.channels.c1.capacity = 1000\na1.channels.c1.transactionCapacity = 100\n\n# Bind the source and sink to the channel\n# è¡¨ç¤ºå°†r1å’Œc1è¿æ¥èµ·æ¥\n# è¡¨ç¤ºå°†k1å’Œc1è¿æ¥èµ·æ¥\na1.sources.r1.channels = c1\na1.sinks.k1.channel = c1\nï¼ˆ7ï¼‰å…ˆå¼€å¯ flume ç›‘å¬ç«¯å£ç¬¬ä¸€ç§å†™æ³•ï¼š\n[atguigu@hadoop102 flume]$ bin/flume-ng agent --conf conf/ --name a1 --conf-file job/flume-netcat-logger.conf -Dflume.root.logger=INFO,console\nç¬¬äºŒç§å†™æ³•ï¼š\n[atguigu@hadoop102 flume]$ bin/flume-ng agent -c conf/ -n a1 -f job/flume-netcat-logger.conf -Dflume.root.logger=INFO,console\nå‚æ•°è¯´æ˜ï¼šâ€”conf/-cï¼šè¡¨ç¤ºé…ç½®æ–‡ä»¶å­˜å‚¨åœ¨ conf/ç›®å½•â€”name/-nï¼šè¡¨ç¤ºç»™ agent èµ·åä¸º a1â€”conf-file/-fï¼šflume æœ¬æ¬¡å¯åŠ¨è¯»å–çš„é…ç½®æ–‡ä»¶æ˜¯åœ¨ job æ–‡ä»¶å¤¹ä¸‹çš„ flume-telnet.confæ–‡ä»¶ã€‚-Dflume.root.logger=INFO,console ï¼š-D è¡¨ç¤º flume è¿è¡Œæ—¶åŠ¨æ€ä¿®æ”¹ flume.root.loggerå‚æ•°å±æ€§å€¼ï¼Œå¹¶å°†æ§åˆ¶å°æ—¥å¿—æ‰“å°çº§åˆ«è®¾ç½®ä¸º INFO çº§åˆ«ã€‚æ—¥å¿—çº§åˆ«åŒ…æ‹¬:logã€infoã€warnã€errorã€‚\nï¼ˆ8ï¼‰ä½¿ç”¨ netcat å·¥å…·å‘æœ¬æœºçš„ 44444 ç«¯å£å‘é€å†…å®¹\n[atguigu@hadoop102 ~]$ nc localhost 44444\nhello \natguigu\nï¼ˆ9ï¼‰åœ¨ Flume ç›‘å¬é¡µé¢è§‚å¯Ÿæ¥æ”¶æ•°æ®æƒ…å†µ\n\n\n\n2ï¼‰ å®æ—¶ç›‘æ§å•ä¸ªè¿½åŠ æ–‡ä»¶\næ¡ˆä¾‹éœ€æ±‚ï¼šå®æ—¶ç›‘æ§ Hive æ—¥å¿—ï¼Œå¹¶ä¸Šä¼ åˆ° HDFS ä¸­ \n\néœ€æ±‚åˆ†æï¼š\n\n\n\n\nå®ç°æ­¥éª¤ï¼šï¼ˆ1)Flume è¦æƒ³å°†æ•°æ®è¾“å‡ºåˆ° HDFSï¼Œä¾èµ– Hadoop ç›¸å…³ jar åŒ…æ£€æŸ¥/etc/profile.d/my_env.sh æ–‡ä»¶ï¼Œç¡®è®¤ Hadoop å’Œ Java ç¯å¢ƒå˜é‡é…ç½®æ­£ç¡®\nJAVA_HOME=/opt/module/jdk1.8.0_212\nHADOOP_HOME=/opt/module/ha/hadoop-3.1.3\nPATH=$PATH:$JAVA_HOME/bin:$HADOOP_HOME/bin:$HADOOP_HOME/sbin\nexport PATH JAVA_HOME HADOOP_HOME\nï¼ˆ2)åˆ›å»º flume-file-hdfs.conf æ–‡ä»¶\n[atguigu@hadoop102 job]$ vim flume-file-hdfs.conf\næ³¨ï¼šè¦æƒ³è¯»å– Linux ç³»ç»Ÿä¸­çš„æ–‡ä»¶ï¼Œå°±å¾—æŒ‰ç…§ Linux å‘½ä»¤çš„è§„åˆ™æ‰§è¡Œå‘½ä»¤ã€‚ç”±äº Hiveæ—¥å¿—åœ¨ Linux ç³»ç»Ÿä¸­æ‰€ä»¥è¯»å–æ–‡ä»¶çš„ç±»å‹é€‰æ‹©ï¼šexec å³ execute æ‰§è¡Œçš„æ„æ€ã€‚è¡¨ç¤ºæ‰§è¡ŒLinux å‘½ä»¤æ¥è¯»å–æ–‡ä»¶ã€‚æ·»åŠ å¦‚ä¸‹å†…å®¹:\n# Name the components on this agent\n# å®šä¹‰source\n# å®šä¹‰sink\n# å®šä¹‰channe\na2.sources = r2\na2.sinks = k2\na2.channels = c2\n\n# Describe/configure the source\n#å®šä¹‰sourceç±»å‹ä¸ºexecå¯æ‰§è¡Œå‘½ä»¤çš„\na2.sources.r2.type = exec\n#æ‰§è¡Œshellè„šæœ¬çš„ç»å¯¹è·¯å¾„\na2.sources.r2.command = tail -F /opt/module/hive/logs/hive.log\na2.sources.r2.shell = /bin/bash -c\n\n# Describe the sink\na2.sinks.k2.type = hdfs\na2.sinks.k2.hdfs.path = hdfs://hadoop102:9820/flume/%Y%m%d/%H\n#ä¸Šä¼ æ–‡ä»¶çš„å‰ç¼€\na2.sinks.k2.hdfs.filePrefix = logs- \n#æ˜¯å¦æŒ‰ç…§æ—¶é—´æ»šåŠ¨æ–‡ä»¶å¤¹\na2.sinks.k2.hdfs.round = true\n#å¤šå°‘æ—¶é—´å•ä½åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹\na2.sinks.k2.hdfs.roundValue = 1\n#é‡æ–°å®šä¹‰æ—¶é—´å•ä½\na2.sinks.k2.hdfs.roundUnit = hour\n#æ˜¯å¦ä½¿ç”¨æœ¬åœ°æ—¶é—´æˆ³\na2.sinks.k2.hdfs.useLocalTimeStamp = true\n#ç§¯æ”’å¤šå°‘ä¸ª Event æ‰ flush åˆ° HDFS ä¸€æ¬¡\na2.sinks.k2.hdfs.batchSize = 100\n#è®¾ç½®æ–‡ä»¶ç±»å‹ï¼Œå¯æ”¯æŒå‹ç¼©\na2.sinks.k2.hdfs.fileType = DataStream\n#å¤šä¹…ç”Ÿæˆä¸€ä¸ªæ–°çš„æ–‡ä»¶\na2.sinks.k2.hdfs.rollInterval = 60\n#è®¾ç½®æ¯ä¸ªæ–‡ä»¶çš„æ»šåŠ¨å¤§å°\na2.sinks.k2.hdfs.rollSize = 134217700\n#æ–‡ä»¶çš„æ»šåŠ¨ä¸ Event æ•°é‡æ— å…³\na2.sinks.k2.hdfs.rollCount = 0\n\n# Use a channel which buffers events in memory\na2.channels.c2.type = memory\na2.channels.c2.capacity = 1000\na2.channels.c2.transactionCapacity = 100\n# Bind the source and sink to the channel\na2.sources.r2.channels = c2\na2.sinks.k2.channel = c2\næ³¨æ„ï¼šå¯¹äºæ‰€æœ‰ä¸æ—¶é—´ç›¸å…³çš„è½¬ä¹‰åºåˆ—ï¼ŒEvent Header ä¸­å¿…é¡»å­˜åœ¨ä»¥ â€œtimestampâ€çš„keyï¼ˆé™¤é hdfs.useLocalTimeStamp è®¾ç½®ä¸º trueï¼Œæ­¤æ–¹æ³•ä¼šä½¿ç”¨ TimestampInterceptor è‡ªåŠ¨æ·»åŠ  timestampï¼‰ã€‚a3.sinks.k3.hdfs.useLocalTimeStamp = true\nï¼ˆ3ï¼‰è¿è¡Œ Flume\n[atguigu@hadoop102 flume]$ bin/flume-ng agent --conf conf/ --name a2 --conf-file job/flume-file-hdfs.conf\nï¼ˆ4ï¼‰å¼€å¯ Hadoop å’Œ Hive å¹¶æ“ä½œ Hive äº§ç”Ÿæ—¥å¿—\n[atguigu@hadoop102 hadoop-2.7.2]$ sbin/start-dfs.sh\n[atguigu@hadoop103 hadoop-2.7.2]$ sbin/start-yarn.sh\n[atguigu@hadoop102 hive]$ bin/hive\nhive (default)&gt;\nï¼ˆ5ï¼‰åœ¨ HDFS ä¸ŠæŸ¥çœ‹æ–‡ä»¶ã€‚\n\n\n3ï¼‰å®æ—¶ç›‘æ§ç›®å½•ä¸‹å¤šä¸ªæ–°æ–‡ä»¶\næ¡ˆä¾‹éœ€æ±‚ï¼šä½¿ç”¨ Flume ç›‘å¬æ•´ä¸ªç›®å½•çš„æ–‡ä»¶ï¼Œå¹¶ä¸Šä¼ è‡³ HDFS \n\néœ€æ±‚åˆ†æï¼š\n\n\nå®ç°æ­¥éª¤ï¼šï¼ˆ1ï¼‰åˆ›å»ºé…ç½®æ–‡ä»¶ flume-dir-hdfs.conf\n[atguigu@hadoop102 job]$ vim flume-dir-hdfs.conf\n #å®šä¹‰source\n#å®šä¹‰sink\n#å®šä¹‰channel\na3.sources = r3\na3.sinks = k3\na3.channels = c3\n\n# Describe/configure the source\n#å®šä¹‰sourceç±»å‹ä¸ºç›®å½•\na3.sources.r3.type = spooldir\n#å®šä¹‰ç›‘æ§ç›®å½•\na3.sources.r3.spoolDir = /opt/module/flume/upload\n#å®šä¹‰æ–‡ä»¶ä¸Šä¼ å®Œï¼Œåç¼€\na3.sources.r3.fileSuffix = .COMPLETED\n#æ˜¯å¦æœ‰æ–‡ä»¶å¤´\na3.sources.r3.fileHeader = true\n#å¿½ç•¥æ‰€æœ‰ä»¥.tmp ç»“å°¾çš„æ–‡ä»¶ï¼Œä¸ä¸Šä¼ \na3.sources.r3.ignorePattern = ([^ ]*\\.tmp)\n\n# Describe the sink\n#sinkç±»å‹ä¸ºhdfs\na3.sinks.k3.type = hdfs\na3.sinks.k3.hdfs.path = hdfs://hadoop102:9820/flume/upload/%Y%m%d/%H\n#ä¸Šä¼ æ–‡ä»¶çš„å‰ç¼€\na3.sinks.k3.hdfs.filePrefix = upload- \n#æ˜¯å¦æŒ‰ç…§æ—¶é—´æ»šåŠ¨æ–‡ä»¶å¤¹\na3.sinks.k3.hdfs.round = true\n#å¤šå°‘æ—¶é—´å•ä½åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹\na3.sinks.k3.hdfs.roundValue = 1\n#é‡æ–°å®šä¹‰æ—¶é—´å•ä½\na3.sinks.k3.hdfs.roundUnit = hour\n#æ˜¯å¦ä½¿ç”¨æœ¬åœ°æ—¶é—´æˆ³\na3.sinks.k3.hdfs.useLocalTimeStamp = true\n#ç§¯æ”’å¤šå°‘ä¸ª Event æ‰ flush åˆ° HDFS ä¸€æ¬¡\na3.sinks.k3.hdfs.batchSize = 100\n#è®¾ç½®æ–‡ä»¶ç±»å‹ï¼Œå¯æ”¯æŒå‹ç¼©\na3.sinks.k3.hdfs.fileType = DataStream\n#å¤šä¹…ç”Ÿæˆä¸€ä¸ªæ–°çš„æ–‡ä»¶\na3.sinks.k3.hdfs.rollInterval = 60\n#è®¾ç½®æ¯ä¸ªæ–‡ä»¶çš„æ»šåŠ¨å¤§å°å¤§æ¦‚æ˜¯ 128M\na3.sinks.k3.hdfs.rollSize = 134217700\n#æ–‡ä»¶çš„æ»šåŠ¨ä¸ Event æ•°é‡æ— å…³\na3.sinks.k3.hdfs.rollCount = 0\n\n# Use a channel which buffers events in memory\na3.channels.c3.type = memory\na3.channels.c3.capacity = 1000\na3.channels.c3.transactionCapacity = 100\n\n# Bind the source and sink to the channel\na3.sources.r3.channels = c3\na3.sinks.k3.channel = c3\n ï¼ˆ2ï¼‰å¯åŠ¨ç›‘æ§æ–‡ä»¶å¤¹å‘½ä»¤\n[atguigu@hadoop102 flume]$ bin/flume-ng agent --conf conf/ --name a3 --conf-file job/flume-dir-hdfs.conf\n è¯´æ˜ï¼šåœ¨ä½¿ç”¨ Spooling Directory Source æ—¶ï¼Œä¸è¦åœ¨ç›‘æ§ç›®å½•ä¸­åˆ›å»ºå¹¶æŒç»­ä¿®æ”¹æ–‡ ä»¶ï¼›ä¸Šä¼ å®Œæˆçš„æ–‡ä»¶ä¼šä»¥.COMPLETED ç»“å°¾ï¼›è¢«ç›‘æ§æ–‡ä»¶å¤¹æ¯ 500 æ¯«ç§’æ‰«æä¸€æ¬¡æ–‡ä»¶å˜åŠ¨ã€‚ \nï¼ˆ3ï¼‰å‘ upload æ–‡ä»¶å¤¹ä¸­æ·»åŠ æ–‡ä»¶ åœ¨/opt/module/flume ç›®å½•ä¸‹åˆ›å»º upload æ–‡ä»¶å¤¹\n[atguigu@hadoop102 flume]$ mkdir upload\n å‘ upload æ–‡ä»¶å¤¹ä¸­æ·»åŠ æ–‡ä»¶\n[atguigu@hadoop102 upload]$ touch atguigu.txt\n[atguigu@hadoop102 upload]$ touch atguigu.tmp\n[atguigu@hadoop102 upload]$ touch atguigu.log\n ï¼ˆ4ï¼‰æŸ¥çœ‹ HDFS ä¸Šçš„æ•°æ®\n\n\n4ï¼‰å®æ—¶ç›‘æ§ç›®å½•ä¸‹çš„å¤šä¸ªè¿½åŠ æ–‡ä»¶\nExec source é€‚ç”¨äºç›‘æ§ä¸€ä¸ªå®æ—¶è¿½åŠ çš„æ–‡ä»¶ï¼Œä¸èƒ½å®ç°æ–­ç‚¹ç»­ä¼ ï¼›\nSpooldir Sourceé€‚åˆç”¨äºåŒæ­¥æ–°æ–‡ä»¶ï¼Œä½†ä¸é€‚åˆå¯¹å®æ—¶è¿½åŠ æ—¥å¿—çš„æ–‡ä»¶è¿›è¡Œç›‘å¬å¹¶åŒæ­¥ï¼›\nTaildir Sourceé€‚åˆç”¨äºç›‘å¬å¤šä¸ªå®æ—¶è¿½åŠ çš„æ–‡ä»¶ï¼Œå¹¶ä¸”èƒ½å¤Ÿå®ç°æ–­ç‚¹ç»­ä¼ ã€‚\n\n\næ¡ˆä¾‹éœ€æ±‚:ä½¿ç”¨ Flume ç›‘å¬æ•´ä¸ªç›®å½•çš„å®æ—¶è¿½åŠ æ–‡ä»¶ï¼Œå¹¶ä¸Šä¼ è‡³ HDFS \n\néœ€æ±‚åˆ†æ:\n\n\nå®ç°æ­¥éª¤ï¼šï¼ˆ1ï¼‰åˆ›å»ºé…ç½®æ–‡ä»¶ flume-taildir-hdfs.conf\n[atguigu@hadoop102 job]$ vim flume-taildir-hdfs.conf\n#å®šä¹‰source\n#å®šä¹‰sink\n#å®šä¹‰channel\na3.sources = r3\na3.sinks = k3\na3.channels = c3\n\n# Describe/configure the source\n#å®šä¹‰sourceç±»å‹\na3.sources.r3.type = TAILDIR\na3.sources.r3.positionFile = /opt/module/flume/tail_dir.json\n#æŒ‡å®šposition_fileä½ç½®\na3.sources.r3.filegroups = f1 f2\n#å®šä¹‰ç›‘æ§ç›®å½•æ–‡ä»¶\na3.sources.r3.filegroups.f1 = /opt/module/flume/files/.*file.*\na3.sources.r3.filegroups.f2 = /opt/module/flume/files2/.*log.*\n\n# Describe the sink\n#sinkç±»å‹ä¸ºhdfs\na3.sinks.k3.type = hdfs\na3.sinks.k3.hdfs.path = hdfs://hadoop102:9820/flume/upload2/%Y%m%d/%H\n#ä¸Šä¼ æ–‡ä»¶çš„å‰ç¼€\na3.sinks.k3.hdfs.filePrefix = upload-\n#æ˜¯å¦æŒ‰ç…§æ—¶é—´æ»šåŠ¨æ–‡ä»¶å¤¹\na3.sinks.k3.hdfs.round = true\n#å¤šå°‘æ—¶é—´å•ä½åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹\na3.sinks.k3.hdfs.roundValue = 1\n#é‡æ–°å®šä¹‰æ—¶é—´å•ä½\na3.sinks.k3.hdfs.roundUnit = hour\n#æ˜¯å¦ä½¿ç”¨æœ¬åœ°æ—¶é—´æˆ³\na3.sinks.k3.hdfs.useLocalTimeStamp = true\n#ç§¯æ”’å¤šå°‘ä¸ª Event æ‰ flush åˆ° HDFS ä¸€æ¬¡\na3.sinks.k3.hdfs.batchSize = 100\n#è®¾ç½®æ–‡ä»¶ç±»å‹ï¼Œå¯æ”¯æŒå‹ç¼©\na3.sinks.k3.hdfs.fileType = DataStream\n#å¤šä¹…ç”Ÿæˆä¸€ä¸ªæ–°çš„æ–‡ä»¶\na3.sinks.k3.hdfs.rollInterval = 60\n#è®¾ç½®æ¯ä¸ªæ–‡ä»¶çš„æ»šåŠ¨å¤§å°å¤§æ¦‚æ˜¯ 128M\na3.sinks.k3.hdfs.rollSize = 134217700\n#æ–‡ä»¶çš„æ»šåŠ¨ä¸ Event æ•°é‡æ— å…³\na3.sinks.k3.hdfs.rollCount = 0\n\n# Use a channel which buffers events in memory\na3.channels.c3.type = memory\na3.channels.c3.capacity = 1000\na3.channels.c3.transactionCapacity = 100\n\n# Bind the source and sink to the channel\na3.sources.r3.channels = c3\na3.sinks.k3.channel = c3\n ï¼ˆ2ï¼‰å¯åŠ¨ç›‘æ§æ–‡ä»¶å¤¹å‘½ä»¤\n[atguigu@hadoop102 flume]$ bin/flume-ng agent --conf conf/ --name a3 --conf-file job/flume-taildir-hdfs.conf\n ï¼ˆ3ï¼‰å‘ files æ–‡ä»¶å¤¹ä¸­è¿½åŠ å†…å®¹ åœ¨/opt/module/flume ç›®å½•ä¸‹åˆ›å»º files æ–‡ä»¶å¤¹\n[atguigu@hadoop102 flume]$ mkdir fileså‘ upload æ–‡ä»¶å¤¹ä¸­æ·»åŠ æ–‡ä»¶\n[atguigu@hadoop102 files]$ echo hello &gt;&gt; file1.txt\n[atguigu@hadoop102 files]$ echo atguigu &gt;&gt; file2.txt\n ï¼ˆ4ï¼‰æŸ¥çœ‹ HDFS ä¸Šçš„æ•°æ®Taildir è¯´æ˜ï¼š \n    Taildir Source ç»´æŠ¤äº†ä¸€ä¸ª json æ ¼å¼çš„ position Fileï¼Œå…¶ä¼šå®šæœŸçš„å¾€ position Fileä¸­æ›´æ–°æ¯ä¸ªæ–‡ä»¶è¯»å–åˆ°çš„æœ€æ–°çš„ä½ç½®ï¼Œå› æ­¤èƒ½å¤Ÿå®ç°æ–­ç‚¹ç»­ä¼ ã€‚Position File çš„æ ¼å¼å¦‚ä¸‹ï¼š\n{\"inode\":2496272,\"pos\":12,\"file\":\"/opt/module/flume/files/file1.txt\"}\n{\"inode\":2496275,\"pos\":12,\"file\":\"/opt/module/flume/files/file2.txt\"}\n æ³¨ï¼šLinux ä¸­å‚¨å­˜æ–‡ä»¶å…ƒæ•°æ®çš„åŒºåŸŸå°±å«åš inodeï¼Œæ¯ä¸ª inode éƒ½æœ‰ä¸€ä¸ªå·ç ï¼Œæ“ä½œç³»ç»Ÿç”¨ inode å·ç æ¥è¯†åˆ«ä¸åŒçš„æ–‡ä»¶ï¼ŒUnix/Linux ç³»ç»Ÿå†…éƒ¨ä¸ä½¿ç”¨æ–‡ä»¶åï¼Œè€Œä½¿ç”¨ inode å·ç æ¥è¯†åˆ«æ–‡ä»¶ã€‚\n\n\n3. Flume è¿›é˜¶3.1 Flume äº‹åŠ¡Putäº‹åŠ¡æµç¨‹\n\ndoPut:å°†æ‰¹æ•°æ®å…ˆå†™å…¥ä¸´æ—¶ç¼“å†²åŒºputList\ndoCommit:æ£€æŸ¥channelå†…å­˜é˜Ÿåˆ—æ˜¯å¦è¶³å¤Ÿåˆå¹¶ã€‚\ndoRolback:channelå†…å­˜é˜Ÿåˆ—ç©ºé—´ä¸è¶³ï¼Œå›æ»šæ•°æ®\n\nTakeäº‹åŠ¡\n\ndoTake:å°†æ•°æ®å–åˆ°ä¸´æ—¶ç¼“å†²åŒºtakeList,å¹¶å°†æ•°æ®å‘é€åˆ°HDFS\ndoCommit:å¦‚æœæ•°æ®å…¨éƒ¨å‘é€æˆåŠŸ,åˆ™æ¸…é™¤ä¸´æ—¶ç¼“å†²åŒºtakeList\ndoRollback:æ•°æ®å‘é€è¿‡ç¨‹ä¸­å¦‚æœå‡ºç°å¼‚å¸¸, rollbackå°†ä¸´æ—¶ç¼“å†²åŒºtakeListä¸­çš„æ•°æ®å½’è¿˜ç»™channelå†…å­˜é˜Ÿåˆ—ã€‚\n\n3.2 Flume Agent å†…éƒ¨åŸç†\né‡è¦ç»„ä»¶ï¼š \n\nChannelSelector \n\nChannelSelector çš„ä½œç”¨å°±æ˜¯é€‰å‡º Event å°†è¦è¢«å‘å¾€å“ªä¸ª Channelã€‚å…¶å…±æœ‰ä¸¤ç§ç±»å‹ï¼Œåˆ†åˆ«æ˜¯ Replicatingï¼ˆå¤åˆ¶ï¼‰å’Œ Multiplexingï¼ˆå¤šè·¯å¤ç”¨ï¼‰ã€‚\nReplicatingSelector ä¼šå°†åŒä¸€ä¸ª Event å‘å¾€æ‰€æœ‰çš„ Channelï¼ŒMultiplexing ä¼šæ ¹æ®ç›¸åº”çš„åŸåˆ™ï¼Œå°†ä¸åŒçš„ Event å‘å¾€ä¸åŒçš„ Channelã€‚ \n\n\nSinkProcessorSinkProcessor å…± æœ‰ ä¸‰ ç§ ç±» å‹ \n\nDefaultSinkProcessor å¯¹ åº” çš„ æ˜¯ å• ä¸ª çš„ Sink \nLoadBalancingSinkProcessor å’ŒFailoverSinkProcessor å¯¹åº”çš„æ˜¯ Sink Groupï¼ŒLoadBalancingSinkProcessor å¯ä»¥å®ç°è´Ÿè½½å‡è¡¡çš„åŠŸèƒ½ï¼ŒFailoverSinkProcessor å¯ä»¥é”™è¯¯æ¢å¤çš„åŠŸèƒ½ã€‚\n\n\n\n3.3 Flume æ‹“æ‰‘ç»“æ„1ï¼‰ç®€å•ä¸²è”\nâ€‹        è¿™ç§æ¨¡å¼æ˜¯å°†å¤šä¸ª flume é¡ºåºè¿æ¥èµ·æ¥äº†ï¼Œä»æœ€åˆçš„ source å¼€å§‹åˆ°æœ€ç»ˆ sink ä¼ é€çš„ç›®çš„å­˜å‚¨ç³»ç»Ÿã€‚æ­¤æ¨¡å¼ä¸å»ºè®®æ¡¥æ¥è¿‡å¤šçš„ flume æ•°é‡ï¼Œ flume æ•°é‡è¿‡å¤šä¸ä»…ä¼šå½±å“ä¼ è¾“é€Ÿç‡ï¼Œè€Œä¸”ä¸€æ—¦ä¼ è¾“è¿‡ç¨‹ä¸­æŸä¸ªèŠ‚ç‚¹ flume å®•æœºï¼Œä¼šå½±å“æ•´ä¸ªä¼ è¾“ç³»ç»Ÿã€‚\n2ï¼‰å¤åˆ¶å’Œå¤šè·¯å¤ç”¨\nâ€‹        Flume æ”¯æŒå°†äº‹ä»¶æµå‘ä¸€ä¸ªæˆ–è€…å¤šä¸ªç›®çš„åœ°ã€‚è¿™ç§æ¨¡å¼å¯ä»¥å°†ç›¸åŒæ•°æ®å¤åˆ¶åˆ°å¤šä¸ªchannel ä¸­ï¼Œæˆ–è€…å°†ä¸åŒæ•°æ®åˆ†å‘åˆ°ä¸åŒçš„ channel ä¸­ï¼Œsink å¯ä»¥é€‰æ‹©ä¼ é€åˆ°ä¸åŒçš„ç›®çš„åœ°ã€‚\n3ï¼‰è´Ÿè½½å‡è¡¡å’Œæ•…éšœè½¬ç§»\nâ€‹        Flumeæ”¯æŒä½¿ç”¨å°†å¤šä¸ªsinké€»è¾‘ä¸Šåˆ†åˆ°ä¸€ä¸ªsinkç»„ï¼Œsinkç»„é…åˆä¸åŒçš„SinkProcessorå¯ä»¥å®ç°è´Ÿè½½å‡è¡¡å’Œé”™è¯¯æ¢å¤çš„åŠŸèƒ½ã€‚\n4ï¼‰èšåˆ\nâ€‹        è¿™ç§æ¨¡å¼æ˜¯æˆ‘ä»¬æœ€å¸¸è§çš„ï¼Œä¹Ÿéå¸¸å®ç”¨ï¼Œæ—¥å¸¸ web åº”ç”¨é€šå¸¸åˆ†å¸ƒåœ¨ä¸Šç™¾ä¸ªæœåŠ¡å™¨ï¼Œå¤§è€…ç”šè‡³ä¸Šåƒä¸ªã€ä¸Šä¸‡ä¸ªæœåŠ¡å™¨ã€‚äº§ç”Ÿçš„æ—¥å¿—ï¼Œå¤„ç†èµ·æ¥ä¹Ÿéå¸¸éº»çƒ¦ã€‚ç”¨ flume çš„è¿™ç§ç»„åˆæ–¹å¼èƒ½å¾ˆå¥½çš„è§£å†³è¿™ä¸€é—®é¢˜ï¼Œæ¯å°æœåŠ¡å™¨éƒ¨ç½²ä¸€ä¸ª flume é‡‡é›†æ—¥å¿—ï¼Œä¼ é€åˆ°ä¸€ä¸ªé›†ä¸­æ”¶é›†æ—¥å¿—çš„flumeï¼Œå†ç”±æ­¤ flume ä¸Šä¼ åˆ° hdfsã€hiveã€hbase ç­‰ï¼Œè¿›è¡Œæ—¥å¿—åˆ†æã€‚\n3.4 Flume ä¼ä¸šå¼€å‘æ¡ˆä¾‹learningã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚\n3.5 è‡ªå®šä¹‰ Interceptor3.6 è‡ªå®šä¹‰ Source3.7 è‡ªå®šä¹‰ Sink3.8 Flume æ•°æ®æµç›‘æ§4. ä¼ä¸šçœŸå®é¢è¯•é¢˜ï¼ˆé‡ç‚¹ï¼‰1ï¼‰ä½ æ˜¯å¦‚ä½•å®ç° Flume æ•°æ®ä¼ è¾“çš„ç›‘æ§çš„\nä½¿ç”¨ç¬¬ä¸‰æ–¹æ¡†æ¶ Ganglia å®æ—¶ç›‘æ§ Flumeã€‚ \n2ï¼‰Flume çš„ Sourceï¼ŒSinkï¼ŒChannel çš„ä½œç”¨ï¼Ÿä½ ä»¬ Source æ˜¯ä»€ä¹ˆç±»å‹ï¼Ÿ\n\nä½œç”¨ \nSource ç»„ä»¶æ˜¯ä¸“é—¨ç”¨æ¥æ”¶é›†æ•°æ®çš„ï¼Œå¯ä»¥å¤„ç†å„ç§ç±»å‹ã€å„ç§æ ¼å¼çš„æ—¥å¿—æ•°æ®ï¼ŒåŒ…æ‹¬ avroã€thriftã€execã€jmsã€spooling directoryã€netcatã€sequence generatorã€syslogã€httpã€legacy\nChannel ç»„ä»¶å¯¹é‡‡é›†åˆ°çš„æ•°æ®è¿›è¡Œç¼“å­˜ï¼Œå¯ä»¥å­˜æ”¾åœ¨ Memory æˆ– File ä¸­ã€‚\nSink ç»„ä»¶æ˜¯ç”¨äºæŠŠæ•°æ®å‘é€åˆ°ç›®çš„åœ°çš„ç»„ä»¶ï¼Œç›®çš„åœ°åŒ…æ‹¬ Hdfsã€Loggerã€avroã€thriftã€ipcã€fileã€Hbaseã€solrã€è‡ªå®šä¹‰ã€‚\n\n\næˆ‘å…¬å¸é‡‡ç”¨çš„ Source ç±»å‹ä¸ºï¼š\nç›‘æ§åå°æ—¥å¿—ï¼šexec\nç›‘æ§åå°äº§ç”Ÿæ—¥å¿—çš„ç«¯å£ï¼šnetcat\n\n\n\n3ï¼‰Flume çš„ Channel Selectors\n\nâ€‹        Channel Selectorsï¼Œå¯ä»¥è®©ä¸åŒçš„é¡¹ç›®æ—¥å¿—é€šè¿‡ä¸åŒçš„Channelåˆ°ä¸åŒçš„Sinkä¸­å»ã€‚å®˜æ–¹æ–‡æ¡£ä¸ŠChannel Selectors æœ‰ä¸¤ç§ç±»å‹:Replicating Channel Selector (default)å’ŒMultiplexing Channel Selectorâ€‹        è¿™ä¸¤ç§Selectorçš„åŒºåˆ«æ˜¯:Replicating ä¼š å°†sourceè¿‡æ¥çš„eventså‘å¾€æ‰€æœ‰channel,è€ŒMultiplexingå¯ä»¥é€‰æ‹©è¯¥å‘å¾€å“ªäº›Channelã€‚ \n4ï¼‰ Flume å‚æ•°è°ƒä¼˜\n\nSource \n    å¢åŠ  Source ä¸ªæ•°ï¼ˆä½¿ç”¨ Tair Dir Source æ—¶å¯å¢åŠ  FileGroups ä¸ªæ•°ï¼‰å¯ä»¥å¢å¤§ Sourceçš„è¯»å–æ•°æ®çš„èƒ½åŠ›ã€‚ä¾‹å¦‚ï¼šå½“æŸä¸€ä¸ªç›®å½•äº§ç”Ÿçš„æ–‡ä»¶è¿‡å¤šæ—¶éœ€è¦å°†è¿™ä¸ªæ–‡ä»¶ç›®å½•æ‹†åˆ†æˆå¤šä¸ªæ–‡ä»¶ç›®å½•ï¼ŒåŒæ—¶é…ç½®å¥½å¤šä¸ª Source ä»¥ä¿è¯ Source æœ‰è¶³å¤Ÿçš„èƒ½åŠ›è·å–åˆ°æ–°äº§ç”Ÿçš„æ•°æ®ã€‚\n    batchSize å‚æ•°å†³å®š Source ä¸€æ¬¡æ‰¹é‡è¿è¾“åˆ° Channel çš„ event æ¡æ•°ï¼Œé€‚å½“è°ƒå¤§è¿™ä¸ªå‚æ•°å¯ä»¥æé«˜ Source æ¬è¿ Event åˆ° Channel æ—¶çš„æ€§èƒ½ã€‚\n\nChannel \n    type é€‰æ‹© memory æ—¶ Channel çš„æ€§èƒ½æœ€å¥½ï¼Œä½†æ˜¯å¦‚æœ Flume è¿›ç¨‹æ„å¤–æŒ‚æ‰å¯èƒ½ä¼šä¸¢å¤±æ•°æ®ã€‚type é€‰æ‹© file æ—¶ Channel çš„å®¹é”™æ€§æ›´å¥½ï¼Œä½†æ˜¯æ€§èƒ½ä¸Šä¼šæ¯” memory channel å·®ã€‚\n    ä½¿ç”¨ file Channel æ—¶ dataDirs é…ç½®å¤šä¸ªä¸åŒç›˜ä¸‹çš„ç›®å½•å¯ä»¥æé«˜æ€§èƒ½ã€‚\n    Capacity å‚æ•°å†³å®š Channel å¯å®¹çº³æœ€å¤§çš„ event æ¡æ•°ã€‚transactionCapacity å‚æ•°å†³å®šæ¯æ¬¡ Source å¾€ channel é‡Œé¢å†™çš„æœ€å¤§ event æ¡æ•°å’Œæ¯æ¬¡ Sink ä» channel é‡Œé¢è¯»çš„æœ€å¤§event æ¡æ•°ã€‚transactionCapacity éœ€è¦å¤§äº Source å’Œ Sink çš„ batchSize å‚æ•°ã€‚\n\nSink å¢åŠ  Sink çš„ä¸ªæ•°å¯ä»¥å¢åŠ  Sink æ¶ˆè´¹ event çš„èƒ½åŠ›ã€‚Sink ä¹Ÿä¸æ˜¯è¶Šå¤šè¶Šå¥½å¤Ÿç”¨å°±è¡Œè¿‡å¤šçš„ Sink ä¼šå ç”¨ç³»ç»Ÿèµ„æºï¼Œé€ æˆç³»ç»Ÿèµ„æºä¸å¿…è¦çš„æµªè´¹ã€‚\n    batchSize å‚æ•°å†³å®š Sink ä¸€æ¬¡æ‰¹é‡ä» Channel è¯»å–çš„ event æ¡æ•°ï¼Œé€‚å½“è°ƒå¤§è¿™ä¸ªå‚æ•°å¯ä»¥æé«˜ Sink ä» Channel æ¬å‡º event çš„æ€§èƒ½ã€‚\n\n\n\n\n5ï¼‰Flume çš„äº‹åŠ¡æœºåˆ¶        Flume çš„äº‹åŠ¡æœºåˆ¶ï¼ˆç±»ä¼¼æ•°æ®åº“çš„äº‹åŠ¡æœºåˆ¶ï¼‰ï¼šFlume ä½¿ç”¨ä¸¤ä¸ªç‹¬ç«‹çš„äº‹åŠ¡åˆ†åˆ«è´Ÿè´£ä»Soucrce åˆ° Channelï¼Œä»¥åŠä» Channel åˆ° Sink çš„äº‹ä»¶ä¼ é€’ã€‚        æ¯”å¦‚ spooling directory source ä¸ºæ–‡ä»¶çš„æ¯ä¸€è¡Œåˆ›å»ºä¸€ä¸ªäº‹ä»¶ï¼Œä¸€æ—¦äº‹åŠ¡ä¸­æ‰€æœ‰çš„äº‹ä»¶å…¨éƒ¨ä¼ é€’åˆ° Channel ä¸”æäº¤æˆåŠŸï¼Œé‚£ä¹ˆ Soucrce å°±å°†è¯¥æ–‡ä»¶æ ‡è®°ä¸ºå®Œæˆã€‚        åŒç†ï¼Œäº‹åŠ¡ä»¥ç±»ä¼¼çš„æ–¹å¼å¤„ç†ä» Channel åˆ° Sink çš„ä¼ é€’è¿‡ç¨‹ï¼Œå¦‚æœå› ä¸ºæŸç§åŸå› ä½¿å¾—äº‹ä»¶æ— æ³•è®°å½•ï¼Œé‚£ä¹ˆäº‹åŠ¡å°†ä¼šå›æ»šã€‚ä¸”æ‰€æœ‰çš„äº‹ä»¶éƒ½ä¼šä¿æŒåˆ° Channel ä¸­ï¼Œç­‰å¾…é‡æ–°ä¼ é€’ã€‚6ï¼‰ Flume é‡‡é›†æ•°æ®ä¼šä¸¢å¤±å—?        æ ¹æ® Flume çš„æ¶æ„åŸç†ï¼ŒFlume æ˜¯ä¸å¯èƒ½ä¸¢å¤±æ•°æ®çš„ï¼Œå…¶å†…éƒ¨æœ‰å®Œå–„çš„äº‹åŠ¡æœºåˆ¶ï¼ŒSource åˆ° Channel æ˜¯äº‹åŠ¡æ€§çš„ï¼ŒChannel åˆ° Sink æ˜¯äº‹åŠ¡æ€§çš„ï¼Œå› æ­¤è¿™ä¸¤ä¸ªç¯èŠ‚ä¸ä¼šå‡ºç°æ•°æ®çš„ä¸¢å¤±ï¼Œå”¯ä¸€å¯èƒ½ä¸¢å¤±æ•°æ®çš„æƒ…å†µæ˜¯ Channel é‡‡ç”¨ memoryChannelï¼Œagent å®•æœºå¯¼è‡´æ•°æ®ä¸¢å¤±ï¼Œæˆ–è€… Channel å­˜å‚¨æ•°æ®å·²æ»¡ï¼Œå¯¼è‡´ Source ä¸å†å†™å…¥ï¼Œæœªå†™å…¥çš„æ•°æ®ä¸¢å¤±ã€‚\nâ€‹        Flume ä¸ä¼šä¸¢å¤±æ•°æ®ï¼Œä½†æ˜¯æœ‰å¯èƒ½é€ æˆæ•°æ®çš„é‡å¤ï¼Œä¾‹å¦‚æ•°æ®å·²ç»æˆåŠŸç”± Sink å‘å‡ºï¼Œä½†æ˜¯æ²¡æœ‰æ¥æ”¶åˆ°å“åº”ï¼ŒSink ä¼šå†æ¬¡å‘é€æ•°æ®ï¼Œæ­¤æ—¶å¯èƒ½ä¼šå¯¼è‡´æ•°æ®çš„é‡å¤ã€‚\n","slug":"B10-Flume","date":"2021-11-26T06:25:34.000Z","categories_index":"å¤§æ•°æ®","tags_index":"Flume","author_index":"YFR718"},{"id":"a21b04ca115a88f58bf8270c3847c249","title":"Zookeeper","content":"Zookeeperç®€ä»‹â€‹        Zookeeper æ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼çš„ï¼Œä¸ºåˆ†å¸ƒå¼æ¡†æ¶æä¾›åè°ƒæœåŠ¡çš„ Apache é¡¹ç›®ã€‚\nâ€‹        Zookeeperä»è®¾è®¡æ¨¡å¼è§’åº¦æ¥ç†è§£ï¼šæ˜¯ä¸€ä¸ªåŸºäºè§‚å¯Ÿè€…æ¨¡å¼è®¾è®¡çš„åˆ†å¸ƒå¼æœåŠ¡ç®¡ç†æ¡†æ¶ï¼Œå®ƒè´Ÿè´£å­˜å‚¨å’Œç®¡ç†å¤§å®¶éƒ½å…³å¿ƒçš„æ•°æ®ï¼Œç„¶ åæ¥å—è§‚å¯Ÿè€…çš„æ³¨ å†Œï¼Œä¸€æ—¦è¿™äº›æ•°æ®çš„çŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼ŒZookeeperå°±å°†è´Ÿè´£é€šçŸ¥å·²ç»åœ¨Zookeeperä¸Šæ³¨å†Œçš„é‚£äº›è§‚å¯Ÿè€…åšå‡ºç›¸åº”çš„ååº”ã€‚\nâ€‹        Zookeeper=æ–‡ä»¶ç³»ç»Ÿ+é€šçŸ¥æœºåˆ¶\nZookeeperç‰¹ç‚¹\n1ï¼‰Zookeeperï¼šä¸€ä¸ªé¢†å¯¼è€…ï¼ˆLeaderï¼‰ï¼Œå¤šä¸ªè·Ÿéšè€…ï¼ˆFollowerï¼‰ç»„æˆçš„é›†ç¾¤ã€‚ \n2ï¼‰é›†ç¾¤ä¸­åªè¦æœ‰åŠæ•°ä»¥ä¸ŠèŠ‚ç‚¹å­˜æ´»ï¼ŒZookeeperé›†ç¾¤å°±èƒ½æ­£å¸¸æœåŠ¡ã€‚æ‰€ä»¥Zookeeperé€‚åˆå®‰è£…å¥‡æ•°å°æœåŠ¡å™¨ã€‚ \n3ï¼‰å…¨å±€æ•°æ®ä¸€è‡´ï¼šæ¯ä¸ªServerä¿å­˜ä¸€ä»½ç›¸åŒçš„æ•°æ®å‰¯æœ¬ï¼ŒClientæ— è®ºè¿æ¥åˆ°å“ªä¸ªServerï¼Œæ•°æ®éƒ½æ˜¯ä¸€è‡´çš„ã€‚ \n4ï¼‰æ›´æ–°è¯·æ±‚é¡ºåºæ‰§è¡Œï¼Œæ¥è‡ªåŒä¸€ä¸ªClientçš„æ›´æ–°è¯·æ±‚æŒ‰å…¶å‘é€é¡ºåºä¾æ¬¡æ‰§è¡Œã€‚ \n5ï¼‰æ•°æ®æ›´æ–°åŸå­æ€§ï¼Œä¸€æ¬¡æ•°æ®æ›´æ–°è¦ä¹ˆæˆåŠŸï¼Œè¦ä¹ˆå¤±è´¥ã€‚ \n6ï¼‰å®æ—¶æ€§ï¼Œåœ¨ä¸€å®šæ—¶é—´èŒƒå›´å†…ï¼ŒClientèƒ½è¯»åˆ°æœ€æ–°æ•°æ®ã€‚\næ•°æ®ç»“æ„\nâ€‹        ZooKeeper æ•°æ®æ¨¡å‹çš„ç»“æ„ä¸ Unix æ–‡ä»¶ç³»ç»Ÿå¾ˆç±»ä¼¼ï¼Œæ•´ä½“ä¸Šå¯ä»¥çœ‹ä½œæ˜¯ä¸€æ£µæ ‘ï¼Œæ¯ä¸ªèŠ‚ç‚¹ç§°åšä¸€ä¸ª ZNodeã€‚æ¯ä¸€ä¸ª ZNode é»˜è®¤èƒ½å¤Ÿå­˜å‚¨ 1MB çš„æ•°æ®ï¼Œæ¯ä¸ª ZNode éƒ½å¯ä»¥é€šè¿‡å…¶è·¯å¾„å”¯ä¸€æ ‡è¯†ã€‚\nåº”ç”¨åœºæ™¯\næä¾›çš„æœåŠ¡åŒ…æ‹¬ï¼šç»Ÿä¸€å‘½åæœåŠ¡ã€ç»Ÿä¸€é…ç½®ç®¡ç†ã€ç»Ÿä¸€é›†ç¾¤ç®¡ç†ã€æœåŠ¡å™¨èŠ‚ç‚¹åŠ¨æ€ä¸Šä¸‹çº¿ã€è½¯è´Ÿè½½å‡è¡¡ç­‰ã€‚\nå®‰è£…ä¸é…ç½®æœ¬åœ°å®‰è£…\nï¼ˆ1ï¼‰å®‰è£… JDKï¼ˆ2ï¼‰æ‹·è´ apache-zookeeper-3.5.7-bin.tar.gz å®‰è£…åŒ…åˆ° Linux ç³»ç»Ÿä¸‹ï¼ˆ3ï¼‰è§£å‹åˆ°æŒ‡å®šç›®å½•ï¼Œä¿®æ”¹åç§°ï¼Œä¿®æ”¹é…ç½®\næ“ä½œ Zookeeper\n#å¯åŠ¨ Zookeeper\n$ bin/zkServer.sh start\n#æŸ¥çœ‹è¿›ç¨‹æ˜¯å¦å¯åŠ¨\n$ jps\n4020 Jps\n4001 QuorumPeerMain\n#æŸ¥çœ‹çŠ¶æ€\n$ bin/zkServer.sh status\nZooKeeper JMX enabled by default\nUsing config: /opt/module/zookeeper-3.5.7/bin/../conf/zoo.cfg\nMode: standalone\n#å¯åŠ¨å®¢æˆ·ç«¯\n$ bin/zkCli.sh\n#é€€å‡ºå®¢æˆ·ç«¯ï¼š\nquit\n#åœæ­¢ Zookeeper\n$ bin/zkServer.sh stop\né…ç½®å‚æ•°è§£è¯»\nZookeeperä¸­çš„é…ç½®æ–‡ä»¶zoo.cfgä¸­å‚æ•°å«ä¹‰è§£è¯»å¦‚ä¸‹ï¼š \n1ï¼‰tickTime = 2000ï¼šé€šä¿¡å¿ƒè·³æ—¶é—´ï¼ŒZookeeperæœåŠ¡å™¨ä¸å®¢æˆ·ç«¯å¿ƒè·³æ—¶é—´ï¼Œå•ä½æ¯«ç§’\n2ï¼‰initLimit = 10ï¼šLFåˆå§‹é€šä¿¡æ—¶é™        Leaderå’ŒFolloweråˆå§‹è¿æ¥æ—¶èƒ½å®¹å¿çš„æœ€å¤šå¿ƒè·³æ•°ï¼ˆtickTimeçš„æ•°é‡ï¼‰3ï¼‰syncLimit = 5ï¼šLFåŒæ­¥é€šä¿¡æ—¶é™        Leaderå’ŒFollowerä¹‹é—´é€šä¿¡æ—¶é—´å¦‚æœè¶…è¿‡syncLimit * tickTimeï¼ŒLeaderè®¤ä¸ºFollweræ­»æ‰ï¼Œä»æœåŠ¡å™¨åˆ—è¡¨ä¸­åˆ é™¤Follwerã€‚ \n4ï¼‰dataDirï¼šä¿å­˜Zookeeperä¸­çš„æ•°æ®æ³¨æ„ï¼šé»˜è®¤çš„tmpç›®å½•ï¼Œå®¹æ˜“è¢«Linuxç³»ç»Ÿå®šæœŸåˆ é™¤ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¸ç”¨é»˜è®¤çš„tmpç›®å½•ã€‚ \n5ï¼‰clientPort = 2181ï¼šå®¢æˆ·ç«¯è¿æ¥ç«¯å£ï¼Œé€šå¸¸ä¸åšä¿®æ”¹ã€‚\nZookeeper é›†ç¾¤æ“ä½œé€‰ä¸¾æœºåˆ¶ï¼ˆé¢è¯•é‡ç‚¹ï¼‰Zookeeperé€‰ä¸¾æœºåˆ¶â€”â€”ç¬¬ä¸€æ¬¡å¯åŠ¨\nSIDï¼šæœåŠ¡å™¨IDã€‚ç”¨æ¥å”¯ä¸€æ ‡è¯†ä¸€å°ZooKeeperé›†ç¾¤ä¸­çš„æœºå™¨ï¼Œæ¯å°æœºå™¨ä¸èƒ½é‡å¤ï¼Œå’Œmyidä¸€è‡´ã€‚\nZXIDï¼šäº‹åŠ¡IDã€‚ZXIDæ˜¯ä¸€ä¸ªäº‹åŠ¡IDï¼Œç”¨æ¥æ ‡è¯†ä¸€æ¬¡æœåŠ¡å™¨çŠ¶æ€çš„å˜æ›´ã€‚åœ¨æŸä¸€æ—¶åˆ»ï¼Œé›†ç¾¤ä¸­çš„æ¯å°æœºå™¨çš„ZXIDå€¼ä¸ä¸€å®šå®Œå…¨ä¸€è‡´ï¼Œè¿™å’ŒZooKeeperæœåŠ¡å™¨å¯¹äºå®¢æˆ·ç«¯â€œæ›´æ–°è¯·æ±‚â€çš„å¤„ç†é€»è¾‘æœ‰å…³ã€‚\nEpochï¼šæ¯ä¸ªLeaderä»»æœŸçš„ä»£å·ã€‚æ²¡æœ‰Leaderæ—¶åŒä¸€è½®æŠ•ç¥¨è¿‡ç¨‹ä¸­çš„é€»è¾‘æ—¶é’Ÿå€¼æ˜¯ç›¸åŒçš„ã€‚æ¯æŠ•å®Œä¸€æ¬¡ç¥¨è¿™ä¸ªæ•°æ®å°±ä¼šå¢åŠ \nï¼ˆ1ï¼‰æœåŠ¡å™¨1å¯ åŠ¨ï¼Œå‘èµ·ä¸€æ¬¡é€‰ä¸¾ã€‚æœåŠ¡å™¨1æŠ•è‡ªå·±ä¸€ç¥¨ã€‚æ­¤æ—¶æœåŠ¡å™¨1ç¥¨æ•°ä¸€ç¥¨ï¼Œä¸å¤ŸåŠæ•°ä»¥ä¸Šï¼ˆ3ç¥¨ï¼‰ï¼Œé€‰ä¸¾æ— æ³•å®Œæˆï¼ŒæœåŠ¡å™¨1çŠ¶æ€ä¿æŒä¸ºLOOKINGï¼› \nï¼ˆ2ï¼‰æœåŠ¡å™¨2å¯åŠ¨ï¼Œå†å‘èµ·ä¸€æ¬¡é€‰ä¸¾ã€‚æœåŠ¡å™¨1å’Œ2åˆ†åˆ«æŠ•è‡ªå·±ä¸€ç¥¨å¹¶äº¤æ¢é€‰ç¥¨ä¿¡æ¯ï¼šæ­¤æ—¶æœåŠ¡å™¨1å‘ç°æœåŠ¡å™¨2çš„myidæ¯”è‡ªå·±ç›®å‰æŠ•ç¥¨æ¨ä¸¾çš„ï¼ˆæœåŠ¡å™¨1ï¼‰ å¤§ï¼Œæ›´æ”¹é€‰ç¥¨ä¸ºæ¨ä¸¾æœåŠ¡å™¨2ã€‚æ­¤æ—¶æœåŠ¡å™¨1ç¥¨æ•°0ç¥¨ï¼ŒæœåŠ¡å™¨2ç¥¨æ•°2ç¥¨ï¼Œæ²¡æœ‰åŠæ•°ä»¥ä¸Šç»“æœï¼Œé€‰ä¸¾æ— æ³•å®Œæˆï¼ŒæœåŠ¡å™¨1ï¼Œ2çŠ¶æ€ä¿æŒLOOKING\nï¼ˆ3ï¼‰æœåŠ¡å™¨3å¯åŠ¨ï¼Œå‘èµ·ä¸€æ¬¡é€‰ä¸¾ã€‚æ­¤æ—¶æœåŠ¡å™¨1å’Œ2éƒ½ä¼šæ›´æ”¹é€‰ç¥¨ä¸ºæœåŠ¡å™¨3ã€‚æ­¤æ¬¡æŠ•ç¥¨ç»“æœï¼šæœåŠ¡å™¨1ä¸º0ç¥¨ï¼ŒæœåŠ¡å™¨2ä¸º0ç¥¨ï¼ŒæœåŠ¡å™¨3ä¸º3ç¥¨ã€‚æ­¤æ—¶æœåŠ¡å™¨3çš„ç¥¨æ•°å·²ç»è¶…è¿‡åŠæ•°ï¼ŒæœåŠ¡å™¨3å½“é€‰Leaderã€‚æœåŠ¡å™¨1ï¼Œ2æ›´æ”¹çŠ¶æ€ä¸ºFOLLOWINGï¼ŒæœåŠ¡å™¨3æ›´æ”¹çŠ¶æ€ä¸ºLEADINGï¼›\nï¼ˆ4ï¼‰æœåŠ¡å™¨4å¯åŠ¨ï¼Œå‘èµ·ä¸€æ¬¡é€‰ä¸¾ã€‚æ­¤æ—¶æœåŠ¡å™¨1ï¼Œ2ï¼Œ3å·²ç»ä¸æ˜¯LOOKINGçŠ¶æ€ï¼Œä¸ä¼šæ›´æ”¹é€‰ç¥¨ä¿¡æ¯ã€‚äº¤æ¢é€‰ç¥¨ä¿¡æ¯ç»“æœï¼šæœåŠ¡å™¨3ä¸º3ç¥¨ï¼ŒæœåŠ¡å™¨4ä¸º 1ç¥¨ã€‚æ­¤æ—¶æœåŠ¡å™¨4æœä»å¤šæ•°ï¼Œæ›´æ”¹é€‰ç¥¨ä¿¡æ¯ä¸ºæœåŠ¡å™¨3ï¼Œå¹¶æ›´æ”¹çŠ¶æ€ä¸ºFOLLOWINGï¼› \nï¼ˆ5ï¼‰æœåŠ¡å™¨5å¯åŠ¨ï¼ŒåŒ4ä¸€æ ·å½“å°å¼Ÿã€‚\nZookeeperé€‰ä¸¾æœºåˆ¶â€”â€”éç¬¬ä¸€æ¬¡å¯åŠ¨\nï¼ˆ1ï¼‰å½“ZooKeeperé›†ç¾¤ä¸­çš„ä¸€å°æœåŠ¡å™¨å‡ºç°ä»¥ä¸‹ä¸¤ç§æƒ…å†µä¹‹ä¸€æ—¶ï¼Œå°±ä¼šå¼€å§‹è¿›å…¥Leaderé€‰ä¸¾ï¼š\nâ€¢ æœåŠ¡å™¨åˆå§‹åŒ–å¯åŠ¨ã€‚\n â€¢ æœåŠ¡å™¨è¿è¡ŒæœŸé—´æ— æ³•å’ŒLeaderä¿æŒè¿æ¥ã€‚ \nï¼ˆ2ï¼‰è€Œå½“ä¸€å°æœºå™¨è¿›å…¥Leaderé€‰ä¸¾æµç¨‹æ—¶ï¼Œå½“å‰é›†ç¾¤ä¹Ÿå¯èƒ½ä¼šå¤„äºä»¥ä¸‹ä¸¤ç§çŠ¶æ€ï¼šâ€¢ é›†ç¾¤ä¸­æœ¬æ¥å°±å·²ç»å­˜åœ¨ä¸€ä¸ªLeaderã€‚        å¯¹äºç¬¬ä¸€ç§å·²ç»å­˜åœ¨Leaderçš„æƒ…å†µï¼Œæœºå™¨è¯•å›¾å»é€‰ä¸¾Leaderæ—¶ï¼Œä¼šè¢«å‘ŠçŸ¥å½“å‰æœåŠ¡å™¨çš„Leaderä¿¡æ¯ï¼Œå¯¹äºè¯¥æœºå™¨æ¥è¯´ï¼Œä»…ä»…éœ€è¦å’ŒLeaderæœºå™¨å»ºç«‹è¿æ¥ï¼Œå¹¶è¿›è¡ŒçŠ¶æ€åŒæ­¥å³å¯ã€‚â€¢ é›†ç¾¤ä¸­ç¡®å®ä¸å­˜åœ¨Leaderã€‚        å‡è®¾ZooKeeperç”±5å°æœåŠ¡å™¨ç»„æˆï¼ŒSIDåˆ†åˆ«ä¸º1ã€2ã€3ã€4ã€5ï¼ŒZXIDåˆ†åˆ«ä¸º8ã€8ã€8ã€7ã€7ï¼Œå¹¶ä¸”æ­¤æ—¶SIDä¸º3çš„æœåŠ¡å™¨æ˜¯Leaderã€‚æŸä¸€æ—¶åˆ»ï¼Œ3å’Œ5æœåŠ¡å™¨å‡ºç°æ•…éšœï¼Œå› æ­¤å¼€å§‹è¿›è¡ŒLeaderé€‰ä¸¾ã€‚\nå®¢æˆ·ç«¯å‘½ä»¤è¡Œæ“ä½œ\n\n\n\nå‘½ä»¤åŸºæœ¬è¯­æ³•\nåŠŸèƒ½æè¿°\n\n\n\n\nhelp\næ˜¾ç¤ºæ‰€æœ‰æ“ä½œå‘½ä»¤\n\n\nls path\nä½¿ç”¨ ls å‘½ä»¤æ¥æŸ¥çœ‹å½“å‰ znode çš„å­èŠ‚ç‚¹ [å¯ç›‘å¬] -w ç›‘å¬å­èŠ‚ç‚¹å˜åŒ–-s é™„åŠ æ¬¡çº§ä¿¡æ¯\n\n\ncreate\næ™®é€šåˆ›å»º-s å«æœ‰åºåˆ—-e ä¸´æ—¶ï¼ˆé‡å¯æˆ–è€…è¶…æ—¶æ¶ˆå¤±ï¼‰\n\n\nget path\nè·å¾—èŠ‚ç‚¹çš„å€¼ [å¯ç›‘å¬] -w ç›‘å¬èŠ‚ç‚¹å†…å®¹å˜åŒ–-s é™„åŠ æ¬¡çº§ä¿¡æ¯\n\n\nset\nè®¾ç½®èŠ‚ç‚¹çš„å…·ä½“å€¼\n\n\nstat\næŸ¥çœ‹èŠ‚ç‚¹çŠ¶æ€\n\n\ndelete\nåˆ é™¤èŠ‚ç‚¹\n\n\ndeletall\né€’å½’åˆ é™¤èŠ‚ç‚¹\n\n\n\n\nznode èŠ‚ç‚¹æ•°æ®ä¿¡æ¯ls -s /\nï¼ˆ1ï¼‰czxidï¼šåˆ›å»ºèŠ‚ç‚¹çš„äº‹åŠ¡ zxid        æ¯æ¬¡ä¿®æ”¹ ZooKeeper çŠ¶æ€éƒ½ä¼šäº§ç”Ÿä¸€ä¸ª ZooKeeper äº‹åŠ¡ IDã€‚äº‹åŠ¡ ID æ˜¯ ZooKeeper ä¸­æ‰€æœ‰ä¿®æ”¹æ€»çš„æ¬¡åºã€‚æ¯æ¬¡ä¿®æ”¹éƒ½æœ‰å”¯ä¸€çš„ zxidï¼Œå¦‚æœ zxid1 å°äº zxid2ï¼Œé‚£ä¹ˆ zxid1 åœ¨ zxid2 ä¹‹å‰å‘ç”Ÿã€‚ï¼ˆ2ï¼‰ctimeï¼šznode è¢«åˆ›å»ºçš„æ¯«ç§’æ•°ï¼ˆä» 1970 å¹´å¼€å§‹ï¼‰ï¼ˆ3ï¼‰mzxidï¼šznode æœ€åæ›´æ–°çš„äº‹åŠ¡ zxidï¼ˆ4ï¼‰mtimeï¼šznode æœ€åä¿®æ”¹çš„æ¯«ç§’æ•°ï¼ˆä» 1970 å¹´å¼€å§‹ï¼‰ï¼ˆ5ï¼‰pZxidï¼šznode æœ€åæ›´æ–°çš„å­èŠ‚ç‚¹ zxidï¼ˆ6ï¼‰cversionï¼šznode å­èŠ‚ç‚¹å˜åŒ–å·ï¼Œznode å­èŠ‚ç‚¹ä¿®æ”¹æ¬¡æ•°ï¼ˆ7ï¼‰dataversionï¼šznode æ•°æ®å˜åŒ–å·ï¼ˆ8ï¼‰aclVersionï¼šznode è®¿é—®æ§åˆ¶åˆ—è¡¨çš„å˜åŒ–å·ï¼ˆ9ï¼‰ephemeralOwnerï¼šå¦‚æœæ˜¯ä¸´æ—¶èŠ‚ç‚¹ï¼Œè¿™ä¸ªæ˜¯ znode æ‹¥æœ‰è€…çš„ session idã€‚å¦‚æœä¸æ˜¯ä¸´æ—¶èŠ‚ç‚¹åˆ™æ˜¯ 0ã€‚ï¼ˆ10ï¼‰dataLengthï¼šznode çš„æ•°æ®é•¿åº¦ï¼ˆ11ï¼‰numChildrenï¼šznode å­èŠ‚ç‚¹æ•°é‡\n","slug":"B9-zookeeper","date":"2021-11-26T06:25:15.000Z","categories_index":"å¤§æ•°æ®","tags_index":"Zookeeper","author_index":"YFR718"},{"id":"4d4adb38002129eb79b23e1030e48e77","title":"mysqlåˆ·é¢˜","content":"ç¬”è®°ç©ºå€¼è¾“å‡ºnullselect ifnull((select ... from ...),null) as ans;\nè·å–å»é‡çš„ç¬¬kåselect ... from \ngroup by ...\norder by ... desc\nlimit k-1,1 ;\nåˆ é™¤æ“ä½œï¼Œä¿ç•™ä¸€éƒ¨åˆ†delect from tablename\nwhere id not in (å­æŸ¥è¯¢)#è¦ä¿ç•™çš„\nå…ˆselectå†delectä¼šæŠ¥é”™ï¼Œä¸­é—´è¦å†åŠ ä¸€å±‚selectdelete\nfrom contacts\nwhere id not in (\n    select * from (\n    select min(id) \n    from contacts \n    group by name) t\n);\nfrom å­æŸ¥è¯¢ ï¼Œå­æŸ¥è¯¢è¦èµ·åˆ«å\nselect * from (\n    min(id)             \n    from contacts             \n    group by name) as t\n)\ninå­æŸ¥è¯¢å¯ä»¥ in ä¸€å¯¹æ•°æ®#æŸ¥è¯¢æ¯ä½åŒå­¦ç¬¬ä¸€æ¬¡ç™»å½•å¹³å°å¬è¯¾çš„è®¾å¤‡ID (device_id)ã€‚\nselect o.student_id,o.device_id\nfrom online_class_situations  as o\nwhere (o.student_id,o.date) in (\n    select distinct student_id,min(date)\n    from online_class_situations\n    where course_number&gt;0\n    group by student_id\n);\n ç»“æœä¸åŒ…å«nullï¼Œå¦‚æœéœ€è¦nullè¦ç‰¹åˆ¤\">å®‰å…¨ä¸ç­‰&lt;&gt; ç»“æœä¸åŒ…å«nullï¼Œå¦‚æœéœ€è¦nullè¦ç‰¹åˆ¤select name \nfrom patients\nwhere infected_by_id &lt;&gt; 2 or infected_by_id is null;\ngroup by ä¸èƒ½ç›´æ¥ç”¨maxselect t.student_id\nfrom (\n    select student_id, count(*) as c\n    from exams e\n    where e.is_pass=0\n    group by e.student_id\n    ) as t\n,(\n    select count(*) cc\n    from exams ee\n    where ee.is_pass=0\n    group by ee.student_id\n) f \nwhere t.c = max(f.cc) #é”™è¯¯\nselect t.student_id\nfrom (\n    select student_id, count(*) as c\n    from exams e\n    where e.is_pass=0\n    group by e.student_id\n    ) as t\n,(select max(cc) acount from (\n    select count(*) cc\n    from exams ee\n    where ee.is_pass=0\n    group by ee.student_id\n) f ) ff\nwhere t.c = ff.acount;\nå¯»æ‰¾è¿ç»­ä¸¤è¡Œselect distinct a.id \nfrom boxes a,boxes b \nwhere abs(a.id-b.id) = 1 and (a.is_empty=1 and b.is_empty=1)\norder by a.id ;\nç©ºå€¼å°±ä¸è¾“å‡ºhaving ... is not null\nä¿ç•™å°æ•°ç‚¹å2ä½round(score,2)\n","slug":"B8-mysqlåˆ·é¢˜","date":"2021-11-26T03:03:44.000Z","categories_index":"æ•°æ®åº“","tags_index":"MySQL","author_index":"YFR718"},{"id":"62ef56c51053b490f9a79e2b56de5f36","title":"J8.JDBC","content":"JDBCæ ¸å¿ƒæŠ€æœ¯ç¬¬1ç« ï¼šJDBCæ¦‚è¿°1.1 æ•°æ®çš„æŒä¹…åŒ–\næŒä¹…åŒ–(persistence)ï¼šæŠŠæ•°æ®ä¿å­˜åˆ°å¯æ‰ç”µå¼å­˜å‚¨è®¾å¤‡ä¸­ä»¥ä¾›ä¹‹åä½¿ç”¨ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œç‰¹åˆ«æ˜¯ä¼ä¸šçº§åº”ç”¨ï¼Œæ•°æ®æŒä¹…åŒ–æ„å‘³ç€å°†å†…å­˜ä¸­çš„æ•°æ®ä¿å­˜åˆ°ç¡¬ç›˜ä¸ŠåŠ ä»¥â€å›ºåŒ–â€ï¼Œè€ŒæŒä¹…åŒ–çš„å®ç°è¿‡ç¨‹å¤§å¤šé€šè¿‡å„ç§å…³ç³»æ•°æ®åº“æ¥å®Œæˆã€‚\n\næŒä¹…åŒ–çš„ä¸»è¦åº”ç”¨æ˜¯å°†å†…å­˜ä¸­çš„æ•°æ®å­˜å‚¨åœ¨å…³ç³»å‹æ•°æ®åº“ä¸­ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥å­˜å‚¨åœ¨ç£ç›˜æ–‡ä»¶ã€XMLæ•°æ®æ–‡ä»¶ä¸­ã€‚\n \n\n\n1.2 Javaä¸­çš„æ•°æ®å­˜å‚¨æŠ€æœ¯\nåœ¨Javaä¸­ï¼Œæ•°æ®åº“å­˜å–æŠ€æœ¯å¯åˆ†ä¸ºå¦‚ä¸‹å‡ ç±»ï¼š\n\nJDBCç›´æ¥è®¿é—®æ•°æ®åº“\nJDO (Java Data Object )æŠ€æœ¯\n\nç¬¬ä¸‰æ–¹O/Rå·¥å…·ï¼Œå¦‚Hibernate, Mybatis ç­‰\n\n\n\nJDBCæ˜¯javaè®¿é—®æ•°æ®åº“çš„åŸºçŸ³ï¼ŒJDOã€Hibernateã€MyBatisç­‰åªæ˜¯æ›´å¥½çš„å°è£…äº†JDBCã€‚\n\n\n1.3 JDBCä»‹ç»\nJDBC(Java Database Connectivity)æ˜¯ä¸€ä¸ªç‹¬ç«‹äºç‰¹å®šæ•°æ®åº“ç®¡ç†ç³»ç»Ÿã€é€šç”¨çš„SQLæ•°æ®åº“å­˜å–å’Œæ“ä½œçš„å…¬å…±æ¥å£ï¼ˆä¸€ç»„APIï¼‰ï¼Œå®šä¹‰äº†ç”¨æ¥è®¿é—®æ•°æ®åº“çš„æ ‡å‡†Javaç±»åº“ï¼Œï¼ˆjava.sql,javax.sqlï¼‰ä½¿ç”¨è¿™äº›ç±»åº“å¯ä»¥ä»¥ä¸€ç§æ ‡å‡†çš„æ–¹æ³•ã€æ–¹ä¾¿åœ°è®¿é—®æ•°æ®åº“èµ„æºã€‚\nJDBCä¸ºè®¿é—®ä¸åŒçš„æ•°æ®åº“æä¾›äº†ä¸€ç§ç»Ÿä¸€çš„é€”å¾„ï¼Œä¸ºå¼€å‘è€…å±è”½äº†ä¸€äº›ç»†èŠ‚é—®é¢˜ã€‚\nJDBCçš„ç›®æ ‡æ˜¯ä½¿Javaç¨‹åºå‘˜ä½¿ç”¨JDBCå¯ä»¥è¿æ¥ä»»ä½•æä¾›äº†JDBCé©±åŠ¨ç¨‹åºçš„æ•°æ®åº“ç³»ç»Ÿï¼Œè¿™æ ·å°±ä½¿å¾—ç¨‹åºå‘˜æ— éœ€å¯¹ç‰¹å®šçš„æ•°æ®åº“ç³»ç»Ÿçš„ç‰¹ç‚¹æœ‰è¿‡å¤šçš„äº†è§£ï¼Œä»è€Œå¤§å¤§ç®€åŒ–å’ŒåŠ å¿«äº†å¼€å‘è¿‡ç¨‹ã€‚\nå¦‚æœæ²¡æœ‰JDBCï¼Œé‚£ä¹ˆJavaç¨‹åºè®¿é—®æ•°æ®åº“æ—¶æ˜¯è¿™æ ·çš„ï¼š\n\n\n\n\næœ‰äº†JDBCï¼ŒJavaç¨‹åºè®¿é—®æ•°æ®åº“æ—¶æ˜¯è¿™æ ·çš„ï¼š\n\n\n\n\næ€»ç»“å¦‚ä¸‹ï¼š\n\n\n1.4 JDBCä½“ç³»ç»“æ„\nJDBCæ¥å£ï¼ˆAPIï¼‰åŒ…æ‹¬ä¸¤ä¸ªå±‚æ¬¡ï¼š\né¢å‘åº”ç”¨çš„APIï¼šJava APIï¼ŒæŠ½è±¡æ¥å£ï¼Œä¾›åº”ç”¨ç¨‹åºå¼€å‘äººå‘˜ä½¿ç”¨ï¼ˆè¿æ¥æ•°æ®åº“ï¼Œæ‰§è¡ŒSQLè¯­å¥ï¼Œè·å¾—ç»“æœï¼‰ã€‚\né¢å‘æ•°æ®åº“çš„APIï¼šJava Driver APIï¼Œä¾›å¼€å‘å•†å¼€å‘æ•°æ®åº“é©±åŠ¨ç¨‹åºç”¨ã€‚\n\n\n\n\n\n\n\n\n\n\n\n\nJDBCæ˜¯sunå…¬å¸æä¾›ä¸€å¥—ç”¨äºæ•°æ®åº“æ“ä½œçš„æ¥å£ï¼Œjavaç¨‹åºå‘˜åªéœ€è¦é¢å‘è¿™å¥—æ¥å£ç¼–ç¨‹å³å¯ã€‚\nä¸åŒçš„æ•°æ®åº“å‚å•†ï¼Œéœ€è¦é’ˆå¯¹è¿™å¥—æ¥å£ï¼Œæä¾›ä¸åŒå®ç°ã€‚ä¸åŒçš„å®ç°çš„é›†åˆï¼Œå³ä¸ºä¸åŒæ•°æ®åº“çš„é©±åŠ¨ã€‚                                                                â€”â€”â€”â€”é¢å‘æ¥å£ç¼–ç¨‹\n1.5 JDBCç¨‹åºç¼–å†™æ­¥éª¤\n\n\n\n\n\n\n\n\n\nè¡¥å……ï¼šODBC(Open Database Connectivityï¼Œå¼€æ”¾å¼æ•°æ®åº“è¿æ¥)ï¼Œæ˜¯å¾®è½¯åœ¨Windowså¹³å°ä¸‹æ¨å‡ºçš„ã€‚ä½¿ç”¨è€…åœ¨ç¨‹åºä¸­åªéœ€è¦è°ƒç”¨ODBC APIï¼Œç”± ODBC é©±åŠ¨ç¨‹åºå°†è°ƒç”¨è½¬æ¢æˆä¸ºå¯¹ç‰¹å®šçš„æ•°æ®åº“çš„è°ƒç”¨è¯·æ±‚ã€‚\nç¬¬2ç« ï¼šè·å–æ•°æ®åº“è¿æ¥2.1 è¦ç´ ä¸€ï¼šDriveræ¥å£å®ç°ç±»2.1.1 Driveræ¥å£ä»‹ç»\njava.sql.Driver æ¥å£æ˜¯æ‰€æœ‰ JDBC é©±åŠ¨ç¨‹åºéœ€è¦å®ç°çš„æ¥å£ã€‚è¿™ä¸ªæ¥å£æ˜¯æä¾›ç»™æ•°æ®åº“å‚å•†ä½¿ç”¨çš„ï¼Œä¸åŒæ•°æ®åº“å‚å•†æä¾›ä¸åŒçš„å®ç°ã€‚\n\nåœ¨ç¨‹åºä¸­ä¸éœ€è¦ç›´æ¥å»è®¿é—®å®ç°äº† Driver æ¥å£çš„ç±»ï¼Œè€Œæ˜¯ç”±é©±åŠ¨ç¨‹åºç®¡ç†å™¨ç±»(java.sql.DriverManager)å»è°ƒç”¨è¿™äº›Driverå®ç°ã€‚\n\nOracleçš„é©±åŠ¨ï¼šoracle.jdbc.driver.OracleDriver\nmySqlçš„é©±åŠ¨ï¼š com.mysql.jdbc.Driver\n\n\nå°†ä¸Šè¿°jaråŒ…æ‹·è´åˆ°Javaå·¥ç¨‹çš„ä¸€ä¸ªç›®å½•ä¸­ï¼Œä¹ æƒ¯ä¸Šæ–°å»ºä¸€ä¸ªlibæ–‡ä»¶å¤¹ã€‚\n\n\nåœ¨é©±åŠ¨jarä¸Šå³é”®â€”&gt;Build Pathâ€”&gt;Add to Build Path\næ³¨æ„ï¼šå¦‚æœæ˜¯Dynamic Web Projectï¼ˆåŠ¨æ€çš„webé¡¹ç›®ï¼‰è¯ï¼Œåˆ™æ˜¯æŠŠé©±åŠ¨jaræ”¾åˆ°WebContentï¼ˆæœ‰çš„å¼€å‘å·¥å…·å«WebRootï¼‰ç›®å½•ä¸­çš„WEB-INFç›®å½•ä¸­çš„libç›®å½•ä¸‹å³å¯\n2.1.2 åŠ è½½ä¸æ³¨å†ŒJDBCé©±åŠ¨\nåŠ è½½é©±åŠ¨ï¼šåŠ è½½ JDBC é©±åŠ¨éœ€è°ƒç”¨ Class ç±»çš„é™æ€æ–¹æ³• forName()ï¼Œå‘å…¶ä¼ é€’è¦åŠ è½½çš„ JDBC é©±åŠ¨çš„ç±»å\n\nClass.forName(â€œcom.mysql.jdbc.Driverâ€);\n\n\næ³¨å†Œé©±åŠ¨ï¼šDriverManager ç±»æ˜¯é©±åŠ¨ç¨‹åºç®¡ç†å™¨ç±»ï¼Œè´Ÿè´£ç®¡ç†é©±åŠ¨ç¨‹åº\n\nä½¿ç”¨DriverManager.registerDriver(com.mysql.jdbc.Driver)æ¥æ³¨å†Œé©±åŠ¨\n\né€šå¸¸ä¸ç”¨æ˜¾å¼è°ƒç”¨ DriverManager ç±»çš„ registerDriver() æ–¹æ³•æ¥æ³¨å†Œé©±åŠ¨ç¨‹åºç±»çš„å®ä¾‹ï¼Œå› ä¸º Driver æ¥å£çš„é©±åŠ¨ç¨‹åºç±»éƒ½åŒ…å«äº†é™æ€ä»£ç å—ï¼Œåœ¨è¿™ä¸ªé™æ€ä»£ç å—ä¸­ï¼Œä¼šè°ƒç”¨ DriverManager.registerDriver() æ–¹æ³•æ¥æ³¨å†Œè‡ªèº«çš„ä¸€ä¸ªå®ä¾‹ã€‚ä¸‹å›¾æ˜¯MySQLçš„Driverå®ç°ç±»çš„æºç ï¼š\n\n\n\n\n\n2.2 è¦ç´ äºŒï¼šURL\nJDBC URL ç”¨äºæ ‡è¯†ä¸€ä¸ªè¢«æ³¨å†Œçš„é©±åŠ¨ç¨‹åºï¼Œé©±åŠ¨ç¨‹åºç®¡ç†å™¨é€šè¿‡è¿™ä¸ª URL é€‰æ‹©æ­£ç¡®çš„é©±åŠ¨ç¨‹åºï¼Œä»è€Œå»ºç«‹åˆ°æ•°æ®åº“çš„è¿æ¥ã€‚\n\nJDBC URLçš„æ ‡å‡†ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼Œå„éƒ¨åˆ†é—´ç”¨å†’å·åˆ†éš”ã€‚ \n\njdbc:å­åè®®:å­åç§°\nåè®®ï¼šJDBC URLä¸­çš„åè®®æ€»æ˜¯jdbc \nå­åè®®ï¼šå­åè®®ç”¨äºæ ‡è¯†ä¸€ä¸ªæ•°æ®åº“é©±åŠ¨ç¨‹åº\nå­åç§°ï¼šä¸€ç§æ ‡è¯†æ•°æ®åº“çš„æ–¹æ³•ã€‚å­åç§°å¯ä»¥ä¾ä¸åŒçš„å­åè®®è€Œå˜åŒ–ï¼Œç”¨å­åç§°çš„ç›®çš„æ˜¯ä¸ºäº†å®šä½æ•°æ®åº“æä¾›è¶³å¤Ÿçš„ä¿¡æ¯ã€‚åŒ…å«ä¸»æœºå(å¯¹åº”æœåŠ¡ç«¯çš„ipåœ°å€)ï¼Œç«¯å£å·ï¼Œæ•°æ®åº“å\n\n\nä¸¾ä¾‹ï¼š\n\n\nå‡ ç§å¸¸ç”¨æ•°æ®åº“çš„ JDBC URL\n\nMySQLçš„è¿æ¥URLç¼–å†™æ–¹å¼ï¼š\n\njdbc:mysql://ä¸»æœºåç§°:mysqlæœåŠ¡ç«¯å£å·/æ•°æ®åº“åç§°?å‚æ•°=å€¼&amp;å‚æ•°=å€¼\njdbc:mysql://localhost:3306/atguigu\njdbc:mysql://localhost:3306/atguigu?useUnicode=true&amp;characterEncoding=utf8ï¼ˆå¦‚æœJDBCç¨‹åºä¸æœåŠ¡å™¨ç«¯çš„å­—ç¬¦é›†ä¸ä¸€è‡´ï¼Œä¼šå¯¼è‡´ä¹±ç ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡å‚æ•°æŒ‡å®šæœåŠ¡å™¨ç«¯çš„å­—ç¬¦é›†ï¼‰\njdbc:mysql://localhost:3306/atguigu?user=root&amp;password=123456\n\n\nOracle 9içš„è¿æ¥URLç¼–å†™æ–¹å¼ï¼š\n\njdbc:oracle:thin:@ä¸»æœºåç§°:oracleæœåŠ¡ç«¯å£å·:æ•°æ®åº“åç§°\njdbc:oracle:thin:@localhost:1521:atguigu\n\n\nSQLServerçš„è¿æ¥URLç¼–å†™æ–¹å¼ï¼š\n\njdbc:sqlserver://ä¸»æœºåç§°:sqlserveræœåŠ¡ç«¯å£å·:DatabaseName=æ•°æ®åº“åç§°\n\njdbc:sqlserver://localhost:1433:DatabaseName=atguigu\n\n\n\n\n\n\n2.3 è¦ç´ ä¸‰ï¼šç”¨æˆ·åå’Œå¯†ç \nuser,passwordå¯ä»¥ç”¨â€œå±æ€§å=å±æ€§å€¼â€æ–¹å¼å‘Šè¯‰æ•°æ®åº“\nå¯ä»¥è°ƒç”¨ DriverManager ç±»çš„ getConnection() æ–¹æ³•å»ºç«‹åˆ°æ•°æ®åº“çš„è¿æ¥\n\n2.4 æ•°æ®åº“è¿æ¥æ–¹å¼ä¸¾ä¾‹2.4.1 è¿æ¥æ–¹å¼ä¸€@Test\n   public void testConnection1() {\n       try {\n           //1.æä¾›java.sql.Driveræ¥å£å®ç°ç±»çš„å¯¹è±¡\n           Driver driver = null;\n           driver = new com.mysql.jdbc.Driver();\n\n           //2.æä¾›urlï¼ŒæŒ‡æ˜å…·ä½“æ“ä½œçš„æ•°æ®\n           String url = \"jdbc:mysql://localhost:3306/test\";\n\n           //3.æä¾›Propertiesçš„å¯¹è±¡ï¼ŒæŒ‡æ˜ç”¨æˆ·åå’Œå¯†ç \n           Properties info = new Properties();\n           info.setProperty(\"user\", \"root\");\n           info.setProperty(\"password\", \"abc123\");\n\n           //4.è°ƒç”¨driverçš„connect()ï¼Œè·å–è¿æ¥\n           Connection conn = driver.connect(url, info);\n           System.out.println(conn);\n       } catch (SQLException e) {\n           e.printStackTrace();\n       }\n   }\n\n\n\n\n\n\n\n\n\nè¯´æ˜ï¼šä¸Šè¿°ä»£ç ä¸­æ˜¾å¼å‡ºç°äº†ç¬¬ä¸‰æ–¹æ•°æ®åº“çš„API\n2.4.2 è¿æ¥æ–¹å¼äºŒ@Test\n   public void testConnection2() {\n       try {\n           //1.å®ä¾‹åŒ–Driver\n           String className = \"com.mysql.jdbc.Driver\";\n           Class clazz = Class.forName(className);\n           Driver driver = (Driver) clazz.newInstance();\n\n           //2.æä¾›urlï¼ŒæŒ‡æ˜å…·ä½“æ“ä½œçš„æ•°æ®\n           String url = \"jdbc:mysql://localhost:3306/test\";\n\n           //3.æä¾›Propertiesçš„å¯¹è±¡ï¼ŒæŒ‡æ˜ç”¨æˆ·åå’Œå¯†ç \n           Properties info = new Properties();\n           info.setProperty(\"user\", \"root\");\n           info.setProperty(\"password\", \"abc123\");\n\n           //4.è°ƒç”¨driverçš„connect()ï¼Œè·å–è¿æ¥\n           Connection conn = driver.connect(url, info);\n           System.out.println(conn);\n\n       } catch (Exception e) {\n           e.printStackTrace();\n       }\n   }\n\n\n\n\n\n\n\n\n\nè¯´æ˜ï¼šç›¸è¾ƒäºæ–¹å¼ä¸€ï¼Œè¿™é‡Œä½¿ç”¨åå°„å®ä¾‹åŒ–Driverï¼Œä¸åœ¨ä»£ç ä¸­ä½“ç°ç¬¬ä¸‰æ–¹æ•°æ®åº“çš„APIã€‚ä½“ç°äº†é¢å‘æ¥å£ç¼–ç¨‹æ€æƒ³ã€‚\n2.4.3 è¿æ¥æ–¹å¼ä¸‰@Test\n   public void testConnection3() {\n       try {\n           //1.æ•°æ®åº“è¿æ¥çš„4ä¸ªåŸºæœ¬è¦ç´ ï¼š\n           String url = \"jdbc:mysql://localhost:3306/test\";\n           String user = \"root\";\n           String password = \"abc123\";\n           String driverName = \"com.mysql.jdbc.Driver\";\n\n           //2.å®ä¾‹åŒ–Driver\n           Class clazz = Class.forName(driverName);\n           Driver driver = (Driver) clazz.newInstance();\n           //3.æ³¨å†Œé©±åŠ¨\n           DriverManager.registerDriver(driver);\n           //4.è·å–è¿æ¥\n           Connection conn = DriverManager.getConnection(url, user, password);\n           System.out.println(conn);\n       } catch (Exception e) {\n           e.printStackTrace();\n       }\n\n   }\n\n\n\n\n\n\n\n\n\nè¯´æ˜ï¼šä½¿ç”¨DriverManagerå®ç°æ•°æ®åº“çš„è¿æ¥ã€‚ä½“ä¼šè·å–è¿æ¥å¿…è¦çš„4ä¸ªåŸºæœ¬è¦ç´ ã€‚\n2.4.4 è¿æ¥æ–¹å¼å››@Test\n   public void testConnection4() {\n       try {\n           //1.æ•°æ®åº“è¿æ¥çš„4ä¸ªåŸºæœ¬è¦ç´ ï¼š\n           String url = \"jdbc:mysql://localhost:3306/test\";\n           String user = \"root\";\n           String password = \"abc123\";\n           String driverName = \"com.mysql.jdbc.Driver\";\n\n           //2.åŠ è½½é©±åŠ¨ ï¼ˆâ‘ å®ä¾‹åŒ–Driver â‘¡æ³¨å†Œé©±åŠ¨ï¼‰\n           Class.forName(driverName);\n\n\n           //Driver driver = (Driver) clazz.newInstance();\n           //3.æ³¨å†Œé©±åŠ¨\n           //DriverManager.registerDriver(driver);\n           /*\n           å¯ä»¥æ³¨é‡Šæ‰ä¸Šè¿°ä»£ç çš„åŸå› ï¼Œæ˜¯å› ä¸ºåœ¨mysqlçš„Driverç±»ä¸­å£°æ˜æœ‰ï¼š\n           static {\n               try {\n                   DriverManager.registerDriver(new Driver());\n               } catch (SQLException var1) {\n                   throw new RuntimeException(\"Can't register driver!\");\n               }\n           }\n\n            */\n\n\n           //3.è·å–è¿æ¥\n           Connection conn = DriverManager.getConnection(url, user, password);\n           System.out.println(conn);\n       } catch (Exception e) {\n           e.printStackTrace();\n       }\n\n   }\n\n\n\n\n\n\n\n\n\nè¯´æ˜ï¼šä¸å¿…æ˜¾å¼çš„æ³¨å†Œé©±åŠ¨äº†ã€‚å› ä¸ºåœ¨DriverManagerçš„æºç ä¸­å·²ç»å­˜åœ¨é™æ€ä»£ç å—ï¼Œå®ç°äº†é©±åŠ¨çš„æ³¨å†Œã€‚\n2.4.5 è¿æ¥æ–¹å¼äº”(æœ€ç»ˆç‰ˆ)@Test\n   public  void testConnection5() throws Exception {\n   \t//1.åŠ è½½é…ç½®æ–‡ä»¶\n       InputStream is = ConnectionTest.class.getClassLoader().getResourceAsStream(\"jdbc.properties\");\n       Properties pros = new Properties();\n       pros.load(is);\n       \n       //2.è¯»å–é…ç½®ä¿¡æ¯\n       String user = pros.getProperty(\"user\");\n       String password = pros.getProperty(\"password\");\n       String url = pros.getProperty(\"url\");\n       String driverClass = pros.getProperty(\"driverClass\");\n\n       //3.åŠ è½½é©±åŠ¨\n       Class.forName(driverClass);\n\n       //4.è·å–è¿æ¥\n       Connection conn = DriverManager.getConnection(url,user,password);\n       System.out.println(conn);\n\n   }\nå…¶ä¸­ï¼Œé…ç½®æ–‡ä»¶å£°æ˜åœ¨å·¥ç¨‹çš„srcç›®å½•ä¸‹ï¼šã€jdbc.propertiesã€‘\nuser=root\npassword=abc123\nurl=jdbc:mysql://localhost:3306/test\ndriverClass=com.mysql.jdbc.Driver\n\n\n\n\n\n\n\n\n\nè¯´æ˜ï¼šä½¿ç”¨é…ç½®æ–‡ä»¶çš„æ–¹å¼ä¿å­˜é…ç½®ä¿¡æ¯ï¼Œåœ¨ä»£ç ä¸­åŠ è½½é…ç½®æ–‡ä»¶\nä½¿ç”¨é…ç½®æ–‡ä»¶çš„å¥½å¤„ï¼š\nâ‘ å®ç°äº†ä»£ç å’Œæ•°æ®çš„åˆ†ç¦»ï¼Œå¦‚æœéœ€è¦ä¿®æ”¹é…ç½®ä¿¡æ¯ï¼Œç›´æ¥åœ¨é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹ï¼Œä¸éœ€è¦æ·±å…¥ä»£ç â‘¡å¦‚æœä¿®æ”¹äº†é…ç½®ä¿¡æ¯ï¼Œçœå»é‡æ–°ç¼–è¯‘çš„è¿‡ç¨‹ã€‚\nç¬¬3ç« ï¼šä½¿ç”¨PreparedStatementå®ç°CRUDæ“ä½œ3.1 æ“ä½œå’Œè®¿é—®æ•°æ®åº“\næ•°æ®åº“è¿æ¥è¢«ç”¨äºå‘æ•°æ®åº“æœåŠ¡å™¨å‘é€å‘½ä»¤å’Œ SQL è¯­å¥ï¼Œå¹¶æ¥å—æ•°æ®åº“æœåŠ¡å™¨è¿”å›çš„ç»“æœã€‚å…¶å®ä¸€ä¸ªæ•°æ®åº“è¿æ¥å°±æ˜¯ä¸€ä¸ªSocketè¿æ¥ã€‚\n\nåœ¨ java.sql åŒ…ä¸­æœ‰ 3 ä¸ªæ¥å£åˆ†åˆ«å®šä¹‰äº†å¯¹æ•°æ®åº“çš„è°ƒç”¨çš„ä¸åŒæ–¹å¼ï¼š\n\nStatementï¼šç”¨äºæ‰§è¡Œé™æ€ SQL è¯­å¥å¹¶è¿”å›å®ƒæ‰€ç”Ÿæˆç»“æœçš„å¯¹è±¡ã€‚ \nPrepatedStatementï¼šSQL è¯­å¥è¢«é¢„ç¼–è¯‘å¹¶å­˜å‚¨åœ¨æ­¤å¯¹è±¡ä¸­ï¼Œå¯ä»¥ä½¿ç”¨æ­¤å¯¹è±¡å¤šæ¬¡é«˜æ•ˆåœ°æ‰§è¡Œè¯¥è¯­å¥ã€‚\nCallableStatementï¼šç”¨äºæ‰§è¡Œ SQL å­˜å‚¨è¿‡ç¨‹\n\n\n\n\n3.2 ä½¿ç”¨Statementæ“ä½œæ•°æ®è¡¨çš„å¼Šç«¯\né€šè¿‡è°ƒç”¨ Connection å¯¹è±¡çš„ createStatement() æ–¹æ³•åˆ›å»ºè¯¥å¯¹è±¡ã€‚è¯¥å¯¹è±¡ç”¨äºæ‰§è¡Œé™æ€çš„ SQL è¯­å¥ï¼Œå¹¶ä¸”è¿”å›æ‰§è¡Œç»“æœã€‚\n\nStatement æ¥å£ä¸­å®šä¹‰äº†ä¸‹åˆ—æ–¹æ³•ç”¨äºæ‰§è¡Œ SQL è¯­å¥ï¼š\nint excuteUpdate(String sql)ï¼šæ‰§è¡Œæ›´æ–°æ“ä½œINSERTã€UPDATEã€DELETE\nResultSet executeQuery(String sql)ï¼šæ‰§è¡ŒæŸ¥è¯¢æ“ä½œSELECT\n\nä½†æ˜¯ä½¿ç”¨Statementæ“ä½œæ•°æ®è¡¨å­˜åœ¨å¼Šç«¯ï¼š\n\né—®é¢˜ä¸€ï¼šå­˜åœ¨æ‹¼ä¸²æ“ä½œï¼Œç¹ç\né—®é¢˜äºŒï¼šå­˜åœ¨SQLæ³¨å…¥é—®é¢˜\n\n\nSQL æ³¨å…¥æ˜¯åˆ©ç”¨æŸäº›ç³»ç»Ÿæ²¡æœ‰å¯¹ç”¨æˆ·è¾“å…¥çš„æ•°æ®è¿›è¡Œå……åˆ†çš„æ£€æŸ¥ï¼Œè€Œåœ¨ç”¨æˆ·è¾“å…¥æ•°æ®ä¸­æ³¨å…¥éæ³•çš„ SQL è¯­å¥æ®µæˆ–å‘½ä»¤(å¦‚ï¼šSELECT user, password FROM user_table WHERE user=â€™aâ€™ OR 1 = â€˜ AND password = â€˜ OR â€˜1â€™ = â€˜1â€™) ï¼Œä»è€Œåˆ©ç”¨ç³»ç»Ÿçš„ SQL å¼•æ“å®Œæˆæ¶æ„è¡Œä¸ºçš„åšæ³•ã€‚\n\nå¯¹äº Java è€Œè¨€ï¼Œè¦é˜²èŒƒ SQL æ³¨å…¥ï¼Œåªè¦ç”¨ PreparedStatement(ä»Statementæ‰©å±•è€Œæ¥) å–ä»£ Statement å°±å¯ä»¥äº†ã€‚\n\nä»£ç æ¼”ç¤ºï¼š\n\n\npublic class StatementTest {\n\n\t// ä½¿ç”¨Statementçš„å¼Šç«¯ï¼šéœ€è¦æ‹¼å†™sqlè¯­å¥ï¼Œå¹¶ä¸”å­˜åœ¨SQLæ³¨å…¥çš„é—®é¢˜\n\t@Test\n\tpublic void testLogin() {\n\t\tScanner scan = new Scanner(System.in);\n\n\t\tSystem.out.print(\"ç”¨æˆ·åï¼š\");\n\t\tString userName = scan.nextLine();\n\t\tSystem.out.print(\"å¯†   ç ï¼š\");\n\t\tString password = scan.nextLine();\n\n\t\t// SELECT user,password FROM user_table WHERE USER = '1' or ' AND PASSWORD = '='1' or '1' = '1';\n\t\tString sql = \"SELECT user,password FROM user_table WHERE USER = '\" + userName + \"' AND PASSWORD = '\" + password\n\t\t\t\t+ \"'\";\n\t\tUser user = get(sql, User.class);\n\t\tif (user != null) {\n\t\t\tSystem.out.println(\"ç™»é™†æˆåŠŸ!\");\n\t\t} else {\n\t\t\tSystem.out.println(\"ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯ï¼\");\n\t\t}\n\t}\n\n\t// ä½¿ç”¨Statementå®ç°å¯¹æ•°æ®è¡¨çš„æŸ¥è¯¢æ“ä½œ\n\tpublic &lt;T&gt; T get(String sql, Class&lt;T&gt; clazz) {\n\t\tT t = null;\n\n\t\tConnection conn = null;\n\t\tStatement st = null;\n\t\tResultSet rs = null;\n\t\ttry {\n\t\t\t// 1.åŠ è½½é…ç½®æ–‡ä»¶\n\t\t\tInputStream is = StatementTest.class.getClassLoader().getResourceAsStream(\"jdbc.properties\");\n\t\t\tProperties pros = new Properties();\n\t\t\tpros.load(is);\n\n\t\t\t// 2.è¯»å–é…ç½®ä¿¡æ¯\n\t\t\tString user = pros.getProperty(\"user\");\n\t\t\tString password = pros.getProperty(\"password\");\n\t\t\tString url = pros.getProperty(\"url\");\n\t\t\tString driverClass = pros.getProperty(\"driverClass\");\n\n\t\t\t// 3.åŠ è½½é©±åŠ¨\n\t\t\tClass.forName(driverClass);\n\n\t\t\t// 4.è·å–è¿æ¥\n\t\t\tconn = DriverManager.getConnection(url, user, password);\n\n\t\t\tst = conn.createStatement();\n\n\t\t\trs = st.executeQuery(sql);\n\n\t\t\t// è·å–ç»“æœé›†çš„å…ƒæ•°æ®\n\t\t\tResultSetMetaData rsmd = rs.getMetaData();\n\n\t\t\t// è·å–ç»“æœé›†çš„åˆ—æ•°\n\t\t\tint columnCount = rsmd.getColumnCount();\n\n\t\t\tif (rs.next()) {\n\n\t\t\t\tt = clazz.newInstance();\n\n\t\t\t\tfor (int i = 0; i &lt; columnCount; i++) {\n\t\t\t\t\t// //1. è·å–åˆ—çš„åç§°\n\t\t\t\t\t// String columnName = rsmd.getColumnName(i+1);\n\n\t\t\t\t\t// 1. è·å–åˆ—çš„åˆ«å\n\t\t\t\t\tString columnName = rsmd.getColumnLabel(i + 1);\n\n\t\t\t\t\t// 2. æ ¹æ®åˆ—åè·å–å¯¹åº”æ•°æ®è¡¨ä¸­çš„æ•°æ®\n\t\t\t\t\tObject columnVal = rs.getObject(columnName);\n\n\t\t\t\t\t// 3. å°†æ•°æ®è¡¨ä¸­å¾—åˆ°çš„æ•°æ®ï¼Œå°è£…è¿›å¯¹è±¡\n\t\t\t\t\tField field = clazz.getDeclaredField(columnName);\n\t\t\t\t\tfield.setAccessible(true);\n\t\t\t\t\tfield.set(t, columnVal);\n\t\t\t\t}\n\t\t\t\treturn t;\n\t\t\t}\n\t\t} catch (Exception e) {\n\t\t\te.printStackTrace();\n\t\t} finally {\n\t\t\t// å…³é—­èµ„æº\n\t\t\tif (rs != null) {\n\t\t\t\ttry {\n\t\t\t\t\trs.close();\n\t\t\t\t} catch (SQLException e) {\n\t\t\t\t\te.printStackTrace();\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (st != null) {\n\t\t\t\ttry {\n\t\t\t\t\tst.close();\n\t\t\t\t} catch (SQLException e) {\n\t\t\t\t\te.printStackTrace();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (conn != null) {\n\t\t\t\ttry {\n\t\t\t\t\tconn.close();\n\t\t\t\t} catch (SQLException e) {\n\t\t\t\t\te.printStackTrace();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n}\nç»¼ä¸Šï¼š\n\n3.3 PreparedStatementçš„ä½¿ç”¨3.3.1 PreparedStatementä»‹ç»\nå¯ä»¥é€šè¿‡è°ƒç”¨ Connection å¯¹è±¡çš„ preparedStatement(String sql) æ–¹æ³•è·å– PreparedStatement å¯¹è±¡\n\nPreparedStatement æ¥å£æ˜¯ Statement çš„å­æ¥å£ï¼Œå®ƒè¡¨ç¤ºä¸€æ¡é¢„ç¼–è¯‘è¿‡çš„ SQL è¯­å¥\n\nPreparedStatement å¯¹è±¡æ‰€ä»£è¡¨çš„ SQL è¯­å¥ä¸­çš„å‚æ•°ç”¨é—®å·(?)æ¥è¡¨ç¤ºï¼Œè°ƒç”¨ PreparedStatement å¯¹è±¡çš„ setXxx() æ–¹æ³•æ¥è®¾ç½®è¿™äº›å‚æ•°. setXxx() æ–¹æ³•æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦è®¾ç½®çš„ SQL è¯­å¥ä¸­çš„å‚æ•°çš„ç´¢å¼•(ä» 1 å¼€å§‹)ï¼Œç¬¬äºŒä¸ªæ˜¯è®¾ç½®çš„ SQL è¯­å¥ä¸­çš„å‚æ•°çš„å€¼\n\n\n3.3.2 PreparedStatement vs Statement\nä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚\n\nPreparedStatement èƒ½æœ€å¤§å¯èƒ½æé«˜æ€§èƒ½ï¼š\n\nDBServerä¼šå¯¹é¢„ç¼–è¯‘è¯­å¥æä¾›æ€§èƒ½ä¼˜åŒ–ã€‚å› ä¸ºé¢„ç¼–è¯‘è¯­å¥æœ‰å¯èƒ½è¢«é‡å¤è°ƒç”¨ï¼Œæ‰€ä»¥è¯­å¥åœ¨è¢«DBServerçš„ç¼–è¯‘å™¨ç¼–è¯‘åçš„æ‰§è¡Œä»£ç è¢«ç¼“å­˜ä¸‹æ¥ï¼Œé‚£ä¹ˆä¸‹æ¬¡è°ƒç”¨æ—¶åªè¦æ˜¯ç›¸åŒçš„é¢„ç¼–è¯‘è¯­å¥å°±ä¸éœ€è¦ç¼–è¯‘ï¼Œåªè¦å°†å‚æ•°ç›´æ¥ä¼ å…¥ç¼–è¯‘è¿‡çš„è¯­å¥æ‰§è¡Œä»£ç ä¸­å°±ä¼šå¾—åˆ°æ‰§è¡Œã€‚\nåœ¨statementè¯­å¥ä¸­,å³ä½¿æ˜¯ç›¸åŒæ“ä½œä½†å› ä¸ºæ•°æ®å†…å®¹ä¸ä¸€æ ·,æ‰€ä»¥æ•´ä¸ªè¯­å¥æœ¬èº«ä¸èƒ½åŒ¹é…,æ²¡æœ‰ç¼“å­˜è¯­å¥çš„æ„ä¹‰.äº‹å®æ˜¯æ²¡æœ‰æ•°æ®åº“ä¼šå¯¹æ™®é€šè¯­å¥ç¼–è¯‘åçš„æ‰§è¡Œä»£ç ç¼“å­˜ã€‚è¿™æ ·æ¯æ‰§è¡Œä¸€æ¬¡éƒ½è¦å¯¹ä¼ å…¥çš„è¯­å¥ç¼–è¯‘ä¸€æ¬¡ã€‚\n(è¯­æ³•æ£€æŸ¥ï¼Œè¯­ä¹‰æ£€æŸ¥ï¼Œç¿»è¯‘æˆäºŒè¿›åˆ¶å‘½ä»¤ï¼Œç¼“å­˜)\n\n\nPreparedStatement å¯ä»¥é˜²æ­¢ SQL æ³¨å…¥ \n\n\n3.3.3 Javaä¸SQLå¯¹åº”æ•°æ®ç±»å‹è½¬æ¢è¡¨\n\n\n\nJavaç±»å‹\nSQLç±»å‹\n\n\n\n\nboolean\nBIT\n\n\nbyte\nTINYINT\n\n\nshort\nSMALLINT\n\n\nint\nINTEGER\n\n\nlong\nBIGINT\n\n\nString\nCHAR,VARCHAR,LONGVARCHAR\n\n\nbyte   array\nBINARY  ,    VAR BINARY\n\n\njava.sql.Date\nDATE\n\n\njava.sql.Time\nTIME\n\n\njava.sql.Timestamp\nTIMESTAMP\n\n\n\n\n3.3.4 ä½¿ç”¨PreparedStatementå®ç°å¢ã€åˆ ã€æ”¹æ“ä½œ//é€šç”¨çš„å¢ã€åˆ ã€æ”¹æ“ä½œï¼ˆä½“ç°ä¸€ï¼šå¢ã€åˆ ã€æ”¹ ï¼› ä½“ç°äºŒï¼šé’ˆå¯¹äºä¸åŒçš„è¡¨ï¼‰\npublic void update(String sql,Object ... args){\n\tConnection conn = null;\n\tPreparedStatement ps = null;\n\ttry {\n\t\t//1.è·å–æ•°æ®åº“çš„è¿æ¥\n\t\tconn = JDBCUtils.getConnection();\n\t\t\n\t\t//2.è·å–PreparedStatementçš„å®ä¾‹ (æˆ–ï¼šé¢„ç¼–è¯‘sqlè¯­å¥)\n\t\tps = conn.prepareStatement(sql);\n\t\t//3.å¡«å……å ä½ç¬¦\n\t\tfor(int i = 0;i &lt; args.length;i++){\n\t\t\tps.setObject(i + 1, args[i]);\n\t\t}\n\t\t\n\t\t//4.æ‰§è¡Œsqlè¯­å¥\n\t\tps.execute();\n\t} catch (Exception e) {\n\t\t\n\t\te.printStackTrace();\n\t}finally{\n\t\t//5.å…³é—­èµ„æº\n\t\tJDBCUtils.closeResource(conn, ps);\n\t\t\n\t}\n}\n3.3.5 ä½¿ç”¨PreparedStatementå®ç°æŸ¥è¯¢æ“ä½œ// é€šç”¨çš„é’ˆå¯¹äºä¸åŒè¡¨çš„æŸ¥è¯¢:è¿”å›ä¸€ä¸ªå¯¹è±¡ (version 1.0)\npublic &lt;T&gt; T getInstance(Class&lt;T&gt; clazz, String sql, Object... args) {\n\n\tConnection conn = null;\n\tPreparedStatement ps = null;\n\tResultSet rs = null;\n\ttry {\n\t\t// 1.è·å–æ•°æ®åº“è¿æ¥\n\t\tconn = JDBCUtils.getConnection();\n\n\t\t// 2.é¢„ç¼–è¯‘sqlè¯­å¥ï¼Œå¾—åˆ°PreparedStatementå¯¹è±¡\n\t\tps = conn.prepareStatement(sql);\n\n\t\t// 3.å¡«å……å ä½ç¬¦\n\t\tfor (int i = 0; i &lt; args.length; i++) {\n\t\t\tps.setObject(i + 1, args[i]);\n\t\t}\n\n\t\t// 4.æ‰§è¡ŒexecuteQuery(),å¾—åˆ°ç»“æœé›†ï¼šResultSet\n\t\trs = ps.executeQuery();\n\n\t\t// 5.å¾—åˆ°ç»“æœé›†çš„å…ƒæ•°æ®ï¼šResultSetMetaData\n\t\tResultSetMetaData rsmd = rs.getMetaData();\n\n\t\t// 6.1é€šè¿‡ResultSetMetaDataå¾—åˆ°columnCount,columnLabelï¼›é€šè¿‡ResultSetå¾—åˆ°åˆ—å€¼\n\t\tint columnCount = rsmd.getColumnCount();\n\t\tif (rs.next()) {\n\t\t\tT t = clazz.newInstance();\n\t\t\tfor (int i = 0; i &lt; columnCount; i++) {// éå†æ¯ä¸€ä¸ªåˆ—\n\n\t\t\t\t// è·å–åˆ—å€¼\n\t\t\t\tObject columnVal = rs.getObject(i + 1);\n\t\t\t\t// è·å–åˆ—çš„åˆ«å:åˆ—çš„åˆ«åï¼Œä½¿ç”¨ç±»çš„å±æ€§åå……å½“\n\t\t\t\tString columnLabel = rsmd.getColumnLabel(i + 1);\n\t\t\t\t// 6.2ä½¿ç”¨åå°„ï¼Œç»™å¯¹è±¡çš„ç›¸åº”å±æ€§èµ‹å€¼\n\t\t\t\tField field = clazz.getDeclaredField(columnLabel);\n\t\t\t\tfield.setAccessible(true);\n\t\t\t\tfield.set(t, columnVal);\n\n\t\t\t}\n\n\t\t\treturn t;\n\n\t\t}\n\t} catch (Exception e) {\n\n\t\te.printStackTrace();\n\t} finally {\n\t\t// 7.å…³é—­èµ„æº\n\t\tJDBCUtils.closeResource(conn, ps, rs);\n\t}\n\n\treturn null;\n\n}\n\n\n\n\n\n\n\n\n\nè¯´æ˜ï¼šä½¿ç”¨PreparedStatementå®ç°çš„æŸ¥è¯¢æ“ä½œå¯ä»¥æ›¿æ¢Statementå®ç°çš„æŸ¥è¯¢æ“ä½œï¼Œè§£å†³Statementæ‹¼ä¸²å’ŒSQLæ³¨å…¥é—®é¢˜ã€‚\n3.4 ResultSetä¸ResultSetMetaData3.4.1 ResultSet\næŸ¥è¯¢éœ€è¦è°ƒç”¨PreparedStatement çš„ executeQuery() æ–¹æ³•ï¼ŒæŸ¥è¯¢ç»“æœæ˜¯ä¸€ä¸ªResultSet å¯¹è±¡\n\nResultSet å¯¹è±¡ä»¥é€»è¾‘è¡¨æ ¼çš„å½¢å¼å°è£…äº†æ‰§è¡Œæ•°æ®åº“æ“ä½œçš„ç»“æœé›†ï¼ŒResultSet æ¥å£ç”±æ•°æ®åº“å‚å•†æä¾›å®ç°\n\nResultSet è¿”å›çš„å®é™…ä¸Šå°±æ˜¯ä¸€å¼ æ•°æ®è¡¨ã€‚æœ‰ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘æ•°æ®è¡¨çš„ç¬¬ä¸€æ¡è®°å½•çš„å‰é¢ã€‚\n\nResultSet å¯¹è±¡ç»´æŠ¤äº†ä¸€ä¸ªæŒ‡å‘å½“å‰æ•°æ®è¡Œçš„æ¸¸æ ‡ï¼Œåˆå§‹çš„æ—¶å€™ï¼Œæ¸¸æ ‡åœ¨ç¬¬ä¸€è¡Œä¹‹å‰ï¼Œå¯ä»¥é€šè¿‡ ResultSet å¯¹è±¡çš„ next() æ–¹æ³•ç§»åŠ¨åˆ°ä¸‹ä¸€è¡Œã€‚è°ƒç”¨ next()æ–¹æ³•æ£€æµ‹ä¸‹ä¸€è¡Œæ˜¯å¦æœ‰æ•ˆã€‚è‹¥æœ‰æ•ˆï¼Œè¯¥æ–¹æ³•è¿”å› trueï¼Œä¸”æŒ‡é’ˆä¸‹ç§»ã€‚ç›¸å½“äºIteratorå¯¹è±¡çš„ hasNext() å’Œ next() æ–¹æ³•çš„ç»“åˆä½“ã€‚\n\nå½“æŒ‡é’ˆæŒ‡å‘ä¸€è¡Œæ—¶, å¯ä»¥é€šè¿‡è°ƒç”¨ getXxx(int index) æˆ– getXxx(int columnName) è·å–æ¯ä¸€åˆ—çš„å€¼ã€‚\n\nä¾‹å¦‚: getInt(1), getString(â€œnameâ€)\næ³¨æ„ï¼šJavaä¸æ•°æ®åº“äº¤äº’æ¶‰åŠåˆ°çš„ç›¸å…³Java APIä¸­çš„ç´¢å¼•éƒ½ä»1å¼€å§‹ã€‚\n\n\nResultSet æ¥å£çš„å¸¸ç”¨æ–¹æ³•ï¼š\n\nboolean next()\n\ngetString()\n\nâ€¦\n\n\n\n\n3.4.2 ResultSetMetaData\nå¯ç”¨äºè·å–å…³äº ResultSet å¯¹è±¡ä¸­åˆ—çš„ç±»å‹å’Œå±æ€§ä¿¡æ¯çš„å¯¹è±¡\n\nResultSetMetaData meta = rs.getMetaData();\n\ngetColumnName(int column)ï¼šè·å–æŒ‡å®šåˆ—çš„åç§°\ngetColumnLabel(int column)ï¼šè·å–æŒ‡å®šåˆ—çš„åˆ«å\ngetColumnCount()ï¼šè¿”å›å½“å‰ ResultSet å¯¹è±¡ä¸­çš„åˆ—æ•°ã€‚ \n\ngetColumnTypeName(int column)ï¼šæ£€ç´¢æŒ‡å®šåˆ—çš„æ•°æ®åº“ç‰¹å®šçš„ç±»å‹åç§°ã€‚ \n\ngetColumnDisplaySize(int column)ï¼šæŒ‡ç¤ºæŒ‡å®šåˆ—çš„æœ€å¤§æ ‡å‡†å®½åº¦ï¼Œä»¥å­—ç¬¦ä¸ºå•ä½ã€‚ \nisNullable(int column)ï¼šæŒ‡ç¤ºæŒ‡å®šåˆ—ä¸­çš„å€¼æ˜¯å¦å¯ä»¥ä¸º nullã€‚ \n\nisAutoIncrement(int column)ï¼šæŒ‡ç¤ºæ˜¯å¦è‡ªåŠ¨ä¸ºæŒ‡å®šåˆ—è¿›è¡Œç¼–å·ï¼Œè¿™æ ·è¿™äº›åˆ—ä»ç„¶æ˜¯åªè¯»çš„ã€‚ \n\n\n\n\n\né—®é¢˜1ï¼šå¾—åˆ°ç»“æœé›†å, å¦‚ä½•çŸ¥é“è¯¥ç»“æœé›†ä¸­æœ‰å“ªäº›åˆ— ï¼Ÿ åˆ—åæ˜¯ä»€ä¹ˆï¼Ÿ\nâ€‹     éœ€è¦ä½¿ç”¨ä¸€ä¸ªæè¿° ResultSet çš„å¯¹è±¡ï¼Œ å³ ResultSetMetaData\né—®é¢˜2ï¼šå…³äºResultSetMetaData\n\nå¦‚ä½•è·å– ResultSetMetaDataï¼š è°ƒç”¨ ResultSet çš„ getMetaData() æ–¹æ³•å³å¯\nè·å– ResultSet ä¸­æœ‰å¤šå°‘åˆ—ï¼šè°ƒç”¨ ResultSetMetaData çš„ getColumnCount() æ–¹æ³•\nè·å– ResultSet æ¯ä¸€åˆ—çš„åˆ—çš„åˆ«åæ˜¯ä»€ä¹ˆï¼šè°ƒç”¨ ResultSetMetaData çš„getColumnLabel() æ–¹æ³•\n\n\n3.5 èµ„æºçš„é‡Šæ”¾\né‡Šæ”¾ResultSet, Statement,Connectionã€‚\næ•°æ®åº“è¿æ¥ï¼ˆConnectionï¼‰æ˜¯éå¸¸ç¨€æœ‰çš„èµ„æºï¼Œç”¨å®Œåå¿…é¡»é©¬ä¸Šé‡Šæ”¾ï¼Œå¦‚æœConnectionä¸èƒ½åŠæ—¶æ­£ç¡®çš„å…³é—­å°†å¯¼è‡´ç³»ç»Ÿå®•æœºã€‚Connectionçš„ä½¿ç”¨åŸåˆ™æ˜¯å°½é‡æ™šåˆ›å»ºï¼Œå°½é‡æ—©çš„é‡Šæ”¾ã€‚\nå¯ä»¥åœ¨finallyä¸­å…³é—­ï¼Œä¿è¯åŠæ—¶å…¶ä»–ä»£ç å‡ºç°å¼‚å¸¸ï¼Œèµ„æºä¹Ÿä¸€å®šèƒ½è¢«å…³é—­ã€‚\n\n3.6 JDBC APIå°ç»“\nä¸¤ç§æ€æƒ³\n\né¢å‘æ¥å£ç¼–ç¨‹çš„æ€æƒ³\n\nORMæ€æƒ³(object relational mapping)\n\nä¸€ä¸ªæ•°æ®è¡¨å¯¹åº”ä¸€ä¸ªjavaç±»\nè¡¨ä¸­çš„ä¸€æ¡è®°å½•å¯¹åº”javaç±»çš„ä¸€ä¸ªå¯¹è±¡\nè¡¨ä¸­çš„ä¸€ä¸ªå­—æ®µå¯¹åº”javaç±»çš„ä¸€ä¸ªå±æ€§\n\n\n\n\n\n\n\n\n\n\n\n\nsqlæ˜¯éœ€è¦ç»“åˆåˆ—åå’Œè¡¨çš„å±æ€§åæ¥å†™ã€‚æ³¨æ„èµ·åˆ«åã€‚\n\nä¸¤ç§æŠ€æœ¯\n\nJDBCç»“æœé›†çš„å…ƒæ•°æ®ï¼šResultSetMetaData\nè·å–åˆ—æ•°ï¼šgetColumnCount()\nè·å–åˆ—çš„åˆ«åï¼šgetColumnLabel()\n\n\né€šè¿‡åå°„ï¼Œåˆ›å»ºæŒ‡å®šç±»çš„å¯¹è±¡ï¼Œè·å–æŒ‡å®šçš„å±æ€§å¹¶èµ‹å€¼\n\n\n\nç¬¬4ç«  æ“ä½œBLOBç±»å‹å­—æ®µ4.1 MySQL BLOBç±»å‹\nMySQLä¸­ï¼ŒBLOBæ˜¯ä¸€ä¸ªäºŒè¿›åˆ¶å¤§å‹å¯¹è±¡ï¼Œæ˜¯ä¸€ä¸ªå¯ä»¥å­˜å‚¨å¤§é‡æ•°æ®çš„å®¹å™¨ï¼Œå®ƒèƒ½å®¹çº³ä¸åŒå¤§å°çš„æ•°æ®ã€‚\næ’å…¥BLOBç±»å‹çš„æ•°æ®å¿…é¡»ä½¿ç”¨PreparedStatementï¼Œå› ä¸ºBLOBç±»å‹çš„æ•°æ®æ— æ³•ä½¿ç”¨å­—ç¬¦ä¸²æ‹¼æ¥å†™çš„ã€‚\n\nMySQLçš„å››ç§BLOBç±»å‹(é™¤äº†åœ¨å­˜å‚¨çš„æœ€å¤§ä¿¡æ¯é‡ä¸Šä¸åŒå¤–ï¼Œä»–ä»¬æ˜¯ç­‰åŒçš„)\n\n\n\nå®é™…ä½¿ç”¨ä¸­æ ¹æ®éœ€è¦å­˜å…¥çš„æ•°æ®å¤§å°å®šä¹‰ä¸åŒçš„BLOBç±»å‹ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼šå¦‚æœå­˜å‚¨çš„æ–‡ä»¶è¿‡å¤§ï¼Œæ•°æ®åº“çš„æ€§èƒ½ä¼šä¸‹é™ã€‚\nå¦‚æœåœ¨æŒ‡å®šäº†ç›¸å…³çš„Blobç±»å‹ä»¥åï¼Œè¿˜æŠ¥é”™ï¼šxxx too largeï¼Œé‚£ä¹ˆåœ¨mysqlçš„å®‰è£…ç›®å½•ä¸‹ï¼Œæ‰¾my.iniæ–‡ä»¶åŠ ä¸Šå¦‚ä¸‹çš„é…ç½®å‚æ•°ï¼š max_allowed_packet=16Mã€‚åŒæ—¶æ³¨æ„ï¼šä¿®æ”¹äº†my.iniæ–‡ä»¶ä¹‹åï¼Œéœ€è¦é‡æ–°å¯åŠ¨mysqlæœåŠ¡ã€‚\n\n4.2 å‘æ•°æ®è¡¨ä¸­æ’å…¥å¤§æ•°æ®ç±»å‹//è·å–è¿æ¥\nConnection conn = JDBCUtils.getConnection();\n\t\t\nString sql = \"insert into customers(name,email,birth,photo)values(?,?,?,?)\";\nPreparedStatement ps = conn.prepareStatement(sql);\n\n// å¡«å……å ä½ç¬¦\nps.setString(1, \"å¾æµ·å¼º\");\nps.setString(2, \"xhq@126.com\");\nps.setDate(3, new Date(new java.util.Date().getTime()));\n// æ“ä½œBlobç±»å‹çš„å˜é‡\nFileInputStream fis = new FileInputStream(\"xhq.png\");\nps.setBlob(4, fis);\n//æ‰§è¡Œ\nps.execute();\n\t\t\nfis.close();\nJDBCUtils.closeResource(conn, ps);\n\n4.3 ä¿®æ”¹æ•°æ®è¡¨ä¸­çš„Blobç±»å‹å­—æ®µConnection conn = JDBCUtils.getConnection();\nString sql = \"update customers set photo = ? where id = ?\";\nPreparedStatement ps = conn.prepareStatement(sql);\n\n// å¡«å……å ä½ç¬¦\n// æ“ä½œBlobç±»å‹çš„å˜é‡\nFileInputStream fis = new FileInputStream(\"coffee.png\");\nps.setBlob(1, fis);\nps.setInt(2, 25);\n\nps.execute();\n\nfis.close();\nJDBCUtils.closeResource(conn, ps);\n4.4 ä»æ•°æ®è¡¨ä¸­è¯»å–å¤§æ•°æ®ç±»å‹String sql = \"SELECT id, name, email, birth, photo FROM customer WHERE id = ?\";\nconn = getConnection();\nps = conn.prepareStatement(sql);\nps.setInt(1, 8);\nrs = ps.executeQuery();\nif(rs.next()){\n\tInteger id = rs.getInt(1);\n    String name = rs.getString(2);\n\tString email = rs.getString(3);\n    Date birth = rs.getDate(4);\n\tCustomer cust = new Customer(id, name, email, birth);\n    System.out.println(cust); \n    //è¯»å–Blobç±»å‹çš„å­—æ®µ\n\tBlob photo = rs.getBlob(5);\n\tInputStream is = photo.getBinaryStream();\n\tOutputStream os = new FileOutputStream(\"c.jpg\");\n\tbyte [] buffer = new byte[1024];\n\tint len = 0;\n\twhile((len = is.read(buffer)) != -1){\n\t\tos.write(buffer, 0, len);\n\t}\n    JDBCUtils.closeResource(conn, ps, rs);\n\t\t\n\tif(is != null){\n\t\tis.close();\n\t}\n\t\t\n\tif(os !=  null){\n\t\tos.close();\n\t}\n    \n}\n\nç¬¬5ç«  æ‰¹é‡æ’å…¥5.1 æ‰¹é‡æ‰§è¡ŒSQLè¯­å¥å½“éœ€è¦æˆæ‰¹æ’å…¥æˆ–è€…æ›´æ–°è®°å½•æ—¶ï¼Œå¯ä»¥é‡‡ç”¨Javaçš„æ‰¹é‡æ›´æ–°æœºåˆ¶ï¼Œè¿™ä¸€æœºåˆ¶å…è®¸å¤šæ¡è¯­å¥ä¸€æ¬¡æ€§æäº¤ç»™æ•°æ®åº“æ‰¹é‡å¤„ç†ã€‚é€šå¸¸æƒ…å†µä¸‹æ¯”å•ç‹¬æäº¤å¤„ç†æ›´æœ‰æ•ˆç‡\nJDBCçš„æ‰¹é‡å¤„ç†è¯­å¥åŒ…æ‹¬ä¸‹é¢ä¸‰ä¸ªæ–¹æ³•ï¼š\n\naddBatch(String)ï¼šæ·»åŠ éœ€è¦æ‰¹é‡å¤„ç†çš„SQLè¯­å¥æˆ–æ˜¯å‚æ•°ï¼›\nexecuteBatch()ï¼šæ‰§è¡Œæ‰¹é‡å¤„ç†è¯­å¥ï¼›\nclearBatch():æ¸…ç©ºç¼“å­˜çš„æ•°æ®\n\né€šå¸¸æˆ‘ä»¬ä¼šé‡åˆ°ä¸¤ç§æ‰¹é‡æ‰§è¡ŒSQLè¯­å¥çš„æƒ…å†µï¼š\n\nå¤šæ¡SQLè¯­å¥çš„æ‰¹é‡å¤„ç†ï¼›\nä¸€ä¸ªSQLè¯­å¥çš„æ‰¹é‡ä¼ å‚ï¼›\n\n5.2 é«˜æ•ˆçš„æ‰¹é‡æ’å…¥ä¸¾ä¾‹ï¼šå‘æ•°æ®è¡¨ä¸­æ’å…¥20000æ¡æ•°æ®\n\næ•°æ®åº“ä¸­æä¾›ä¸€ä¸ªgoodsè¡¨ã€‚åˆ›å»ºå¦‚ä¸‹ï¼š\n\nCREATE TABLE goods(\nid INT PRIMARY KEY AUTO_INCREMENT,\nNAME VARCHAR(20)\n);\n5.2.1 å®ç°å±‚æ¬¡ä¸€ï¼šä½¿ç”¨StatementConnection conn = JDBCUtils.getConnection();\nStatement st = conn.createStatement();\nfor(int i = 1;i &lt;= 20000;i++){\n\tString sql = \"insert into goods(name) values('name_' + \"+ i +\")\";\n\tst.executeUpdate(sql);\n}\n5.2.2 å®ç°å±‚æ¬¡äºŒï¼šä½¿ç”¨PreparedStatementlong start = System.currentTimeMillis();\n\t\t\nConnection conn = JDBCUtils.getConnection();\n\t\t\nString sql = \"insert into goods(name)values(?)\";\nPreparedStatement ps = conn.prepareStatement(sql);\nfor(int i = 1;i &lt;= 20000;i++){\n\tps.setString(1, \"name_\" + i);\n\tps.executeUpdate();\n}\n\t\t\nlong end = System.currentTimeMillis();\nSystem.out.println(\"èŠ±è´¹çš„æ—¶é—´ä¸ºï¼š\" + (end - start));//82340\n\t\t\n\t\t\nJDBCUtils.closeResource(conn, ps);\n5.2.3 å®ç°å±‚æ¬¡ä¸‰/*\n * ä¿®æ”¹1ï¼š ä½¿ç”¨ addBatch() / executeBatch() / clearBatch()\n * ä¿®æ”¹2ï¼šmysqlæœåŠ¡å™¨é»˜è®¤æ˜¯å…³é—­æ‰¹å¤„ç†çš„ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡ä¸€ä¸ªå‚æ•°ï¼Œè®©mysqlå¼€å¯æ‰¹å¤„ç†çš„æ”¯æŒã€‚\n * \t\t ?rewriteBatchedStatements=true å†™åœ¨é…ç½®æ–‡ä»¶çš„urlåé¢\n * ä¿®æ”¹3ï¼šä½¿ç”¨æ›´æ–°çš„mysql é©±åŠ¨ï¼šmysql-connector-java-5.1.37-bin.jar\n * \n */\n@Test\npublic void testInsert1() throws Exception{\n\tlong start = System.currentTimeMillis();\n\t\t\n\tConnection conn = JDBCUtils.getConnection();\n\t\t\n\tString sql = \"insert into goods(name)values(?)\";\n\tPreparedStatement ps = conn.prepareStatement(sql);\n\t\t\n\tfor(int i = 1;i &lt;= 1000000;i++){\n\t\tps.setString(1, \"name_\" + i);\n\t\t\t\n\t\t//1.â€œæ”’â€sql\n\t\tps.addBatch();\n\t\tif(i % 500 == 0){\n\t\t\t//2.æ‰§è¡Œ\n\t\t\tps.executeBatch();\n\t\t\t//3.æ¸…ç©º\n\t\t\tps.clearBatch();\n\t\t}\n\t}\n\t\t\n\tlong end = System.currentTimeMillis();\n\tSystem.out.println(\"èŠ±è´¹çš„æ—¶é—´ä¸ºï¼š\" + (end - start));//20000æ¡ï¼š625                                                                         //1000000æ¡:14733  \n\t\t\n\tJDBCUtils.closeResource(conn, ps);\n}\n5.2.4 å®ç°å±‚æ¬¡å››/*\n* å±‚æ¬¡å››ï¼šåœ¨å±‚æ¬¡ä¸‰çš„åŸºç¡€ä¸Šæ“ä½œ\n* ä½¿ç”¨Connection çš„ setAutoCommit(false)  /  commit()\n*/\n@Test\npublic void testInsert2() throws Exception{\n\tlong start = System.currentTimeMillis();\n\t\t\n\tConnection conn = JDBCUtils.getConnection();\n\t\t\n\t//1.è®¾ç½®ä¸ºä¸è‡ªåŠ¨æäº¤æ•°æ®\n\tconn.setAutoCommit(false);\n\t\t\n\tString sql = \"insert into goods(name)values(?)\";\n\tPreparedStatement ps = conn.prepareStatement(sql);\n\t\t\n\tfor(int i = 1;i &lt;= 1000000;i++){\n\t\tps.setString(1, \"name_\" + i);\n\t\t\t\n\t\t//1.â€œæ”’â€sql\n\t\tps.addBatch();\n\t\t\t\n\t\tif(i % 500 == 0){\n\t\t\t//2.æ‰§è¡Œ\n\t\t\tps.executeBatch();\n\t\t\t//3.æ¸…ç©º\n\t\t\tps.clearBatch();\n\t\t}\n\t}\n\t\t\n\t//2.æäº¤æ•°æ®\n\tconn.commit();\n\t\t\n\tlong end = System.currentTimeMillis();\n\tSystem.out.println(\"èŠ±è´¹çš„æ—¶é—´ä¸ºï¼š\" + (end - start));//1000000æ¡:4978 \n\t\t\n\tJDBCUtils.closeResource(conn, ps);\n}\nç¬¬6ç« ï¼š æ•°æ®åº“äº‹åŠ¡6.1 æ•°æ®åº“äº‹åŠ¡ä»‹ç»\näº‹åŠ¡ï¼šä¸€ç»„é€»è¾‘æ“ä½œå•å…ƒ,ä½¿æ•°æ®ä»ä¸€ç§çŠ¶æ€å˜æ¢åˆ°å¦ä¸€ç§çŠ¶æ€ã€‚\n\näº‹åŠ¡å¤„ç†ï¼ˆäº‹åŠ¡æ“ä½œï¼‰ï¼šä¿è¯æ‰€æœ‰äº‹åŠ¡éƒ½ä½œä¸ºä¸€ä¸ªå·¥ä½œå•å…ƒæ¥æ‰§è¡Œï¼Œå³ä½¿å‡ºç°äº†æ•…éšœï¼Œéƒ½ä¸èƒ½æ”¹å˜è¿™ç§æ‰§è¡Œæ–¹å¼ã€‚å½“åœ¨ä¸€ä¸ªäº‹åŠ¡ä¸­æ‰§è¡Œå¤šä¸ªæ“ä½œæ—¶ï¼Œè¦ä¹ˆæ‰€æœ‰çš„äº‹åŠ¡éƒ½è¢«æäº¤(commit)ï¼Œé‚£ä¹ˆè¿™äº›ä¿®æ”¹å°±æ°¸ä¹…åœ°ä¿å­˜ä¸‹æ¥ï¼›è¦ä¹ˆæ•°æ®åº“ç®¡ç†ç³»ç»Ÿå°†æ”¾å¼ƒæ‰€ä½œçš„æ‰€æœ‰ä¿®æ”¹ï¼Œæ•´ä¸ªäº‹åŠ¡å›æ»š(rollback)åˆ°æœ€åˆçŠ¶æ€ã€‚\n\nä¸ºç¡®ä¿æ•°æ®åº“ä¸­æ•°æ®çš„ä¸€è‡´æ€§ï¼Œæ•°æ®çš„æ“çºµåº”å½“æ˜¯ç¦»æ•£çš„æˆç»„çš„é€»è¾‘å•å…ƒï¼šå½“å®ƒå…¨éƒ¨å®Œæˆæ—¶ï¼Œæ•°æ®çš„ä¸€è‡´æ€§å¯ä»¥ä¿æŒï¼Œè€Œå½“è¿™ä¸ªå•å…ƒä¸­çš„ä¸€éƒ¨åˆ†æ“ä½œå¤±è´¥ï¼Œæ•´ä¸ªäº‹åŠ¡åº”å…¨éƒ¨è§†ä¸ºé”™è¯¯ï¼Œæ‰€æœ‰ä»èµ·å§‹ç‚¹ä»¥åçš„æ“ä½œåº”å…¨éƒ¨å›é€€åˆ°å¼€å§‹çŠ¶æ€ã€‚ \n\n\n6.2 JDBCäº‹åŠ¡å¤„ç†\næ•°æ®ä¸€æ—¦æäº¤ï¼Œå°±ä¸å¯å›æ»šã€‚\n\næ•°æ®ä»€ä¹ˆæ—¶å€™æ„å‘³ç€æäº¤ï¼Ÿ\n\nå½“ä¸€ä¸ªè¿æ¥å¯¹è±¡è¢«åˆ›å»ºæ—¶ï¼Œé»˜è®¤æƒ…å†µä¸‹æ˜¯è‡ªåŠ¨æäº¤äº‹åŠ¡ï¼šæ¯æ¬¡æ‰§è¡Œä¸€ä¸ª SQL è¯­å¥æ—¶ï¼Œå¦‚æœæ‰§è¡ŒæˆåŠŸï¼Œå°±ä¼šå‘æ•°æ®åº“è‡ªåŠ¨æäº¤ï¼Œè€Œä¸èƒ½å›æ»šã€‚\nå…³é—­æ•°æ®åº“è¿æ¥ï¼Œæ•°æ®å°±ä¼šè‡ªåŠ¨çš„æäº¤ã€‚å¦‚æœå¤šä¸ªæ“ä½œï¼Œæ¯ä¸ªæ“ä½œä½¿ç”¨çš„æ˜¯è‡ªå·±å•ç‹¬çš„è¿æ¥ï¼Œåˆ™æ— æ³•ä¿è¯äº‹åŠ¡ã€‚å³åŒä¸€ä¸ªäº‹åŠ¡çš„å¤šä¸ªæ“ä½œå¿…é¡»åœ¨åŒä¸€ä¸ªè¿æ¥ä¸‹ã€‚\n\n\nJDBCç¨‹åºä¸­ä¸ºäº†è®©å¤šä¸ª SQL è¯­å¥ä½œä¸ºä¸€ä¸ªäº‹åŠ¡æ‰§è¡Œï¼š\n\nè°ƒç”¨ Connection å¯¹è±¡çš„ setAutoCommit(false); ä»¥å–æ¶ˆè‡ªåŠ¨æäº¤äº‹åŠ¡\nåœ¨æ‰€æœ‰çš„ SQL è¯­å¥éƒ½æˆåŠŸæ‰§è¡Œåï¼Œè°ƒç”¨ commit(); æ–¹æ³•æäº¤äº‹åŠ¡\nåœ¨å‡ºç°å¼‚å¸¸æ—¶ï¼Œè°ƒç”¨ rollback(); æ–¹æ³•å›æ»šäº‹åŠ¡\n\n\n\n\n\n\n\n\n\n\nè‹¥æ­¤æ—¶ Connection æ²¡æœ‰è¢«å…³é—­ï¼Œè¿˜å¯èƒ½è¢«é‡å¤ä½¿ç”¨ï¼Œåˆ™éœ€è¦æ¢å¤å…¶è‡ªåŠ¨æäº¤çŠ¶æ€ setAutoCommit(true)ã€‚å°¤å…¶æ˜¯åœ¨ä½¿ç”¨æ•°æ®åº“è¿æ¥æ± æŠ€æœ¯æ—¶ï¼Œæ‰§è¡Œclose()æ–¹æ³•å‰ï¼Œå»ºè®®æ¢å¤è‡ªåŠ¨æäº¤çŠ¶æ€ã€‚\n\n\nã€æ¡ˆä¾‹ï¼šç”¨æˆ·AAå‘ç”¨æˆ·BBè½¬è´¦100ã€‘\npublic void testJDBCTransaction() {\n\tConnection conn = null;\n\ttry {\n\t\t// 1.è·å–æ•°æ®åº“è¿æ¥\n\t\tconn = JDBCUtils.getConnection();\n\t\t// 2.å¼€å¯äº‹åŠ¡\n\t\tconn.setAutoCommit(false);\n\t\t// 3.è¿›è¡Œæ•°æ®åº“æ“ä½œ\n\t\tString sql1 = \"update user_table set balance = balance - 100 where user = ?\";\n\t\tupdate(conn, sql1, \"AA\");\n\n\t\t// æ¨¡æ‹Ÿç½‘ç»œå¼‚å¸¸\n\t\t//System.out.println(10 / 0);\n\n\t\tString sql2 = \"update user_table set balance = balance + 100 where user = ?\";\n\t\tupdate(conn, sql2, \"BB\");\n\t\t// 4.è‹¥æ²¡æœ‰å¼‚å¸¸ï¼Œåˆ™æäº¤äº‹åŠ¡\n\t\tconn.commit();\n\t} catch (Exception e) {\n\t\te.printStackTrace();\n\t\t// 5.è‹¥æœ‰å¼‚å¸¸ï¼Œåˆ™å›æ»šäº‹åŠ¡\n\t\ttry {\n\t\t\tconn.rollback();\n\t\t} catch (SQLException e1) {\n\t\t\te1.printStackTrace();\n\t\t}\n    } finally {\n        try {\n\t\t\t//6.æ¢å¤æ¯æ¬¡DMLæ“ä½œçš„è‡ªåŠ¨æäº¤åŠŸèƒ½\n\t\t\tconn.setAutoCommit(true);\n\t\t} catch (SQLException e) {\n\t\t\te.printStackTrace();\n\t\t}\n        //7.å…³é—­è¿æ¥\n\t\tJDBCUtils.closeResource(conn, null, null); \n    }  \n}\n\nå…¶ä¸­ï¼Œå¯¹æ•°æ®åº“æ“ä½œçš„æ–¹æ³•ä¸ºï¼š\n//ä½¿ç”¨äº‹åŠ¡ä»¥åçš„é€šç”¨çš„å¢åˆ æ”¹æ“ä½œï¼ˆversion 2.0ï¼‰\npublic void update(Connection conn ,String sql, Object... args) {\n\tPreparedStatement ps = null;\n\ttry {\n\t\t// 1.è·å–PreparedStatementçš„å®ä¾‹ (æˆ–ï¼šé¢„ç¼–è¯‘sqlè¯­å¥)\n\t\tps = conn.prepareStatement(sql);\n\t\t// 2.å¡«å……å ä½ç¬¦\n\t\tfor (int i = 0; i &lt; args.length; i++) {\n\t\t\tps.setObject(i + 1, args[i]);\n\t\t}\n\t\t// 3.æ‰§è¡Œsqlè¯­å¥\n\t\tps.execute();\n\t} catch (Exception e) {\n\t\te.printStackTrace();\n\t} finally {\n\t\t// 4.å…³é—­èµ„æº\n\t\tJDBCUtils.closeResource(null, ps);\n\n\t}\n}\n6.3 äº‹åŠ¡çš„ACIDå±æ€§\nåŸå­æ€§ï¼ˆAtomicityï¼‰åŸå­æ€§æ˜¯æŒ‡äº‹åŠ¡æ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„å·¥ä½œå•ä½ï¼Œäº‹åŠ¡ä¸­çš„æ“ä½œè¦ä¹ˆéƒ½å‘ç”Ÿï¼Œè¦ä¹ˆéƒ½ä¸å‘ç”Ÿã€‚ \n\nä¸€è‡´æ€§ï¼ˆConsistencyï¼‰äº‹åŠ¡å¿…é¡»ä½¿æ•°æ®åº“ä»ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€å˜æ¢åˆ°å¦å¤–ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€ã€‚\n\néš”ç¦»æ€§ï¼ˆIsolationï¼‰äº‹åŠ¡çš„éš”ç¦»æ€§æ˜¯æŒ‡ä¸€ä¸ªäº‹åŠ¡çš„æ‰§è¡Œä¸èƒ½è¢«å…¶ä»–äº‹åŠ¡å¹²æ‰°ï¼Œå³ä¸€ä¸ªäº‹åŠ¡å†…éƒ¨çš„æ“ä½œåŠä½¿ç”¨çš„æ•°æ®å¯¹å¹¶å‘çš„å…¶ä»–äº‹åŠ¡æ˜¯éš”ç¦»çš„ï¼Œå¹¶å‘æ‰§è¡Œçš„å„ä¸ªäº‹åŠ¡ä¹‹é—´ä¸èƒ½äº’ç›¸å¹²æ‰°ã€‚\n\næŒä¹…æ€§ï¼ˆDurabilityï¼‰æŒä¹…æ€§æ˜¯æŒ‡ä¸€ä¸ªäº‹åŠ¡ä¸€æ—¦è¢«æäº¤ï¼Œå®ƒå¯¹æ•°æ®åº“ä¸­æ•°æ®çš„æ”¹å˜å°±æ˜¯æ°¸ä¹…æ€§çš„ï¼Œæ¥ä¸‹æ¥çš„å…¶ä»–æ“ä½œå’Œæ•°æ®åº“æ•…éšœä¸åº”è¯¥å¯¹å…¶æœ‰ä»»ä½•å½±å“ã€‚\n\n\n6.3.1 æ•°æ®åº“çš„å¹¶å‘é—®é¢˜\nå¯¹äºåŒæ—¶è¿è¡Œçš„å¤šä¸ªäº‹åŠ¡, å½“è¿™äº›äº‹åŠ¡è®¿é—®æ•°æ®åº“ä¸­ç›¸åŒçš„æ•°æ®æ—¶, å¦‚æœæ²¡æœ‰é‡‡å–å¿…è¦çš„éš”ç¦»æœºåˆ¶, å°±ä¼šå¯¼è‡´å„ç§å¹¶å‘é—®é¢˜:\n\nè„è¯»: å¯¹äºä¸¤ä¸ªäº‹åŠ¡ T1, T2, T1 è¯»å–äº†å·²ç»è¢« T2 æ›´æ–°ä½†è¿˜æ²¡æœ‰è¢«æäº¤çš„å­—æ®µã€‚ä¹‹å, è‹¥ T2 å›æ»š, T1è¯»å–çš„å†…å®¹å°±æ˜¯ä¸´æ—¶ä¸”æ— æ•ˆçš„ã€‚\nä¸å¯é‡å¤è¯»: å¯¹äºä¸¤ä¸ªäº‹åŠ¡T1, T2, T1 è¯»å–äº†ä¸€ä¸ªå­—æ®µ, ç„¶å T2 æ›´æ–°äº†è¯¥å­—æ®µã€‚ä¹‹å, T1å†æ¬¡è¯»å–åŒä¸€ä¸ªå­—æ®µ, å€¼å°±ä¸åŒäº†ã€‚\nå¹»è¯»: å¯¹äºä¸¤ä¸ªäº‹åŠ¡T1, T2, T1 ä»ä¸€ä¸ªè¡¨ä¸­è¯»å–äº†ä¸€ä¸ªå­—æ®µ, ç„¶å T2 åœ¨è¯¥è¡¨ä¸­æ’å…¥äº†ä¸€äº›æ–°çš„è¡Œã€‚ä¹‹å, å¦‚æœ T1 å†æ¬¡è¯»å–åŒä¸€ä¸ªè¡¨, å°±ä¼šå¤šå‡ºå‡ è¡Œã€‚\n\n\næ•°æ®åº“äº‹åŠ¡çš„éš”ç¦»æ€§: æ•°æ®åº“ç³»ç»Ÿå¿…é¡»å…·æœ‰éš”ç¦»å¹¶å‘è¿è¡Œå„ä¸ªäº‹åŠ¡çš„èƒ½åŠ›, ä½¿å®ƒä»¬ä¸ä¼šç›¸äº’å½±å“, é¿å…å„ç§å¹¶å‘é—®é¢˜ã€‚\n\nä¸€ä¸ªäº‹åŠ¡ä¸å…¶ä»–äº‹åŠ¡éš”ç¦»çš„ç¨‹åº¦ç§°ä¸ºéš”ç¦»çº§åˆ«ã€‚æ•°æ®åº“è§„å®šäº†å¤šç§äº‹åŠ¡éš”ç¦»çº§åˆ«, ä¸åŒéš”ç¦»çº§åˆ«å¯¹åº”ä¸åŒçš„å¹²æ‰°ç¨‹åº¦, éš”ç¦»çº§åˆ«è¶Šé«˜, æ•°æ®ä¸€è‡´æ€§å°±è¶Šå¥½, ä½†å¹¶å‘æ€§è¶Šå¼±ã€‚\n\n\n6.3.2 å››ç§éš”ç¦»çº§åˆ«\næ•°æ®åº“æä¾›çš„4ç§äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼š\n\n\nOracle æ”¯æŒçš„ 2 ç§äº‹åŠ¡éš”ç¦»çº§åˆ«ï¼šREAD COMMITED, SERIALIZABLEã€‚ Oracle é»˜è®¤çš„äº‹åŠ¡éš”ç¦»çº§åˆ«ä¸º: READ COMMITED ã€‚\n\n\n\nMysql æ”¯æŒ 4 ç§äº‹åŠ¡éš”ç¦»çº§åˆ«ã€‚Mysql é»˜è®¤çš„äº‹åŠ¡éš”ç¦»çº§åˆ«ä¸º: REPEATABLE READã€‚\n\n6.3.3 åœ¨MySqlä¸­è®¾ç½®éš”ç¦»çº§åˆ«\næ¯å¯åŠ¨ä¸€ä¸ª mysql ç¨‹åº, å°±ä¼šè·å¾—ä¸€ä¸ªå•ç‹¬çš„æ•°æ®åº“è¿æ¥. æ¯ä¸ªæ•°æ®åº“è¿æ¥éƒ½æœ‰ä¸€ä¸ªå…¨å±€å˜é‡ @@tx_isolation, è¡¨ç¤ºå½“å‰çš„äº‹åŠ¡éš”ç¦»çº§åˆ«ã€‚\n\næŸ¥çœ‹å½“å‰çš„éš”ç¦»çº§åˆ«: \nSELECT @@tx_isolation;\n\nè®¾ç½®å½“å‰ mySQL è¿æ¥çš„éš”ç¦»çº§åˆ«:  \nset  transaction isolation level read committed;\n\nè®¾ç½®æ•°æ®åº“ç³»ç»Ÿçš„å…¨å±€çš„éš”ç¦»çº§åˆ«:\nset global transaction isolation level read committed;\n\nè¡¥å……æ“ä½œï¼š\n\nåˆ›å»ºmysqlæ•°æ®åº“ç”¨æˆ·ï¼š\ncreate user tom identified by 'abc123';\n\næˆäºˆæƒé™\n#æˆäºˆé€šè¿‡ç½‘ç»œæ–¹å¼ç™»å½•çš„tomç”¨æˆ·ï¼Œå¯¹æ‰€æœ‰åº“æ‰€æœ‰è¡¨çš„å…¨éƒ¨æƒé™ï¼Œå¯†ç è®¾ä¸ºabc123.\ngrant all privileges on *.* to tom@'%'  identified by 'abc123'; \n\n #ç»™tomç”¨æˆ·ä½¿ç”¨æœ¬åœ°å‘½ä»¤è¡Œæ–¹å¼ï¼Œæˆäºˆatguigudbè¿™ä¸ªåº“ä¸‹çš„æ‰€æœ‰è¡¨çš„æ’åˆ æ”¹æŸ¥çš„æƒé™ã€‚\ngrant select,insert,delete,update on atguigudb.* to tom@localhost identified by 'abc123'; \n\n\n\n\n\nç¬¬7ç« ï¼šDAOåŠç›¸å…³å®ç°ç±»\nDAOï¼šData Access Objectè®¿é—®æ•°æ®ä¿¡æ¯çš„ç±»å’Œæ¥å£ï¼ŒåŒ…æ‹¬äº†å¯¹æ•°æ®çš„CRUDï¼ˆCreateã€Retrivalã€Updateã€Deleteï¼‰ï¼Œè€Œä¸åŒ…å«ä»»ä½•ä¸šåŠ¡ç›¸å…³çš„ä¿¡æ¯ã€‚æœ‰æ—¶ä¹Ÿç§°ä½œï¼šBaseDAO\nä½œç”¨ï¼šä¸ºäº†å®ç°åŠŸèƒ½çš„æ¨¡å—åŒ–ï¼Œæ›´æœ‰åˆ©äºä»£ç çš„ç»´æŠ¤å’Œå‡çº§ã€‚\nä¸‹é¢æ˜¯å°šç¡…è°·JavaWebé˜¶æ®µä¹¦åŸé¡¹ç›®ä¸­DAOä½¿ç”¨çš„ä½“ç°ï¼š\n\n\nå±‚æ¬¡ç»“æ„ï¼š\n\nã€BaseDAO.javaã€‘package com.atguigu.bookstore.dao;\n\nimport java.lang.reflect.ParameterizedType;\nimport java.lang.reflect.Type;\nimport java.sql.Connection;\nimport java.sql.SQLException;\nimport java.util.List;\n\nimport org.apache.commons.dbutils.QueryRunner;\nimport org.apache.commons.dbutils.handlers.BeanHandler;\nimport org.apache.commons.dbutils.handlers.BeanListHandler;\nimport org.apache.commons.dbutils.handlers.ScalarHandler;\n\n\n/**\n * å®šä¹‰ä¸€ä¸ªç”¨æ¥è¢«ç»§æ‰¿çš„å¯¹æ•°æ®åº“è¿›è¡ŒåŸºæœ¬æ“ä½œçš„Dao\n * \n * @author HanYanBing\n *\n * @param &lt;T&gt;\n */\npublic abstract class BaseDao&lt;T&gt; {\n\tprivate QueryRunner queryRunner = new QueryRunner();\n\t// å®šä¹‰ä¸€ä¸ªå˜é‡æ¥æ¥æ”¶æ³›å‹çš„ç±»å‹\n\tprivate Class&lt;T&gt; type;\n\n\t// è·å–Tçš„Classå¯¹è±¡ï¼Œè·å–æ³›å‹çš„ç±»å‹ï¼Œæ³›å‹æ˜¯åœ¨è¢«å­ç±»ç»§æ‰¿æ—¶æ‰ç¡®å®š\n\tpublic BaseDao() {\n\t\t// è·å–å­ç±»çš„ç±»å‹\n\t\tClass clazz = this.getClass();\n\t\t// è·å–çˆ¶ç±»çš„ç±»å‹\n\t\t// getGenericSuperclass()ç”¨æ¥è·å–å½“å‰ç±»çš„çˆ¶ç±»çš„ç±»å‹\n\t\t// ParameterizedTypeè¡¨ç¤ºçš„æ˜¯å¸¦æ³›å‹çš„ç±»å‹\n\t\tParameterizedType parameterizedType = (ParameterizedType) clazz.getGenericSuperclass();\n\t\t// è·å–å…·ä½“çš„æ³›å‹ç±»å‹ getActualTypeArgumentsè·å–å…·ä½“çš„æ³›å‹çš„ç±»å‹\n\t\t// è¿™ä¸ªæ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªTypeçš„æ•°ç»„\n\t\tType[] types = parameterizedType.getActualTypeArguments();\n\t\t// è·å–å…·ä½“çš„æ³›å‹çš„ç±»å‹Â·\n\t\tthis.type = (Class&lt;T&gt;) types[0];\n\t}\n\n\t/**\n\t * é€šç”¨çš„å¢åˆ æ”¹æ“ä½œ\n\t * \n\t * @param sql\n\t * @param params\n\t * @return\n\t */\n\tpublic int update(Connection conn,String sql, Object... params) {\n\t\tint count = 0;\n\t\ttry {\n\t\t\tcount = queryRunner.update(conn, sql, params);\n\t\t} catch (SQLException e) {\n\t\t\te.printStackTrace();\n\t\t} \n\t\treturn count;\n\t}\n\n\t/**\n\t * è·å–ä¸€ä¸ªå¯¹è±¡\n\t * \n\t * @param sql\n\t * @param params\n\t * @return\n\t */\n\tpublic T getBean(Connection conn,String sql, Object... params) {\n\t\tT t = null;\n\t\ttry {\n\t\t\tt = queryRunner.query(conn, sql, new BeanHandler&lt;T&gt;(type), params);\n\t\t} catch (SQLException e) {\n\t\t\te.printStackTrace();\n\t\t} \n\t\treturn t;\n\t}\n\n\t/**\n\t * è·å–æ‰€æœ‰å¯¹è±¡\n\t * \n\t * @param sql\n\t * @param params\n\t * @return\n\t */\n\tpublic List&lt;T&gt; getBeanList(Connection conn,String sql, Object... params) {\n\t\tList&lt;T&gt; list = null;\n\t\ttry {\n\t\t\tlist = queryRunner.query(conn, sql, new BeanListHandler&lt;T&gt;(type), params);\n\t\t} catch (SQLException e) {\n\t\t\te.printStackTrace();\n\t\t} \n\t\treturn list;\n\t}\n\n\t/**\n\t * è·å–ä¸€ä¸ªä½†ä¸€å€¼å¾—æ–¹æ³•ï¼Œä¸“é—¨ç”¨æ¥æ‰§è¡Œåƒ select count(*)...è¿™æ ·çš„sqlè¯­å¥\n\t * \n\t * @param sql\n\t * @param params\n\t * @return\n\t */\n\tpublic Object getValue(Connection conn,String sql, Object... params) {\n\t\tObject count = null;\n\t\ttry {\n\t\t\t// è°ƒç”¨queryRunnerçš„queryæ–¹æ³•è·å–ä¸€ä¸ªå•ä¸€çš„å€¼\n\t\t\tcount = queryRunner.query(conn, sql, new ScalarHandler&lt;&gt;(), params);\n\t\t} catch (SQLException e) {\n\t\t\te.printStackTrace();\n\t\t} \n\t\treturn count;\n\t}\n}\nã€BookDAO.javaã€‘package com.atguigu.bookstore.dao;\n\nimport java.sql.Connection;\nimport java.util.List;\n\nimport com.atguigu.bookstore.beans.Book;\nimport com.atguigu.bookstore.beans.Page;\n\npublic interface BookDao {\n\n\t/**\n\t * ä»æ•°æ®åº“ä¸­æŸ¥è¯¢å‡ºæ‰€æœ‰çš„è®°å½•\n\t * \n\t * @return\n\t */\n\tList&lt;Book&gt; getBooks(Connection conn);\n\n\t/**\n\t * å‘æ•°æ®åº“ä¸­æ’å…¥ä¸€æ¡è®°å½•\n\t * \n\t * @param book\n\t */\n\tvoid saveBook(Connection conn,Book book);\n\n\t/**\n\t * ä»æ•°æ®åº“ä¸­æ ¹æ®å›¾ä¹¦çš„idåˆ é™¤ä¸€æ¡è®°å½•\n\t * \n\t * @param bookId\n\t */\n\tvoid deleteBookById(Connection conn,String bookId);\n\n\t/**\n\t * æ ¹æ®å›¾ä¹¦çš„idä»æ•°æ®åº“ä¸­æŸ¥è¯¢å‡ºä¸€æ¡è®°å½•\n\t * \n\t * @param bookId\n\t * @return\n\t */\n\tBook getBookById(Connection conn,String bookId);\n\n\t/**\n\t * æ ¹æ®å›¾ä¹¦çš„idä»æ•°æ®åº“ä¸­æ›´æ–°ä¸€æ¡è®°å½•\n\t * \n\t * @param book\n\t */\n\tvoid updateBook(Connection conn,Book book);\n\n\t/**\n\t * è·å–å¸¦åˆ†é¡µçš„å›¾ä¹¦ä¿¡æ¯\n\t * \n\t * @param pageï¼šæ˜¯åªåŒ…å«äº†ç”¨æˆ·è¾“å…¥çš„pageNoå±æ€§çš„pageå¯¹è±¡\n\t * @return è¿”å›çš„Pageå¯¹è±¡æ˜¯åŒ…å«äº†æ‰€æœ‰å±æ€§çš„Pageå¯¹è±¡\n\t */\n\tPage&lt;Book&gt; getPageBooks(Connection conn,Page&lt;Book&gt; page);\n\n\t/**\n\t * è·å–å¸¦åˆ†é¡µå’Œä»·æ ¼èŒƒå›´çš„å›¾ä¹¦ä¿¡æ¯\n\t * \n\t * @param pageï¼šæ˜¯åªåŒ…å«äº†ç”¨æˆ·è¾“å…¥çš„pageNoå±æ€§çš„pageå¯¹è±¡\n\t * @return è¿”å›çš„Pageå¯¹è±¡æ˜¯åŒ…å«äº†æ‰€æœ‰å±æ€§çš„Pageå¯¹è±¡\n\t */\n\tPage&lt;Book&gt; getPageBooksByPrice(Connection conn,Page&lt;Book&gt; page, double minPrice, double maxPrice);\n\n}\nã€UserDAO.javaã€‘package com.atguigu.bookstore.dao;\n\nimport java.sql.Connection;\n\nimport com.atguigu.bookstore.beans.User;\n\npublic interface UserDao {\n\n\t/**\n\t * æ ¹æ®Userå¯¹è±¡ä¸­çš„ç”¨æˆ·åå’Œå¯†ç ä»æ•°æ®åº“ä¸­è·å–ä¸€æ¡è®°å½•\n\t * \n\t * @param user\n\t * @return User æ•°æ®åº“ä¸­æœ‰è®°å½• null æ•°æ®åº“ä¸­æ— æ­¤è®°å½•\n\t */\n\tUser getUser(Connection conn,User user);\n\n\t/**\n\t * æ ¹æ®Userå¯¹è±¡ä¸­çš„ç”¨æˆ·åä»æ•°æ®åº“ä¸­è·å–ä¸€æ¡è®°å½•\n\t * \n\t * @param user\n\t * @return true æ•°æ®åº“ä¸­æœ‰è®°å½• false æ•°æ®åº“ä¸­æ— æ­¤è®°å½•\n\t */\n\tboolean checkUsername(Connection conn,User user);\n\n\t/**\n\t * å‘æ•°æ®åº“ä¸­æ’å…¥Userå¯¹è±¡\n\t * \n\t * @param user\n\t */\n\tvoid saveUser(Connection conn,User user);\n}\nã€BookDaoImpl.javaã€‘package com.atguigu.bookstore.dao.impl;\n\nimport java.sql.Connection;\nimport java.util.List;\n\nimport com.atguigu.bookstore.beans.Book;\nimport com.atguigu.bookstore.beans.Page;\nimport com.atguigu.bookstore.dao.BaseDao;\nimport com.atguigu.bookstore.dao.BookDao;\n\npublic class BookDaoImpl extends BaseDao&lt;Book&gt; implements BookDao {\n\n\t@Override\n\tpublic List&lt;Book&gt; getBooks(Connection conn) {\n\t\t// è°ƒç”¨BaseDaoä¸­å¾—åˆ°ä¸€ä¸ªListçš„æ–¹æ³•\n\t\tList&lt;Book&gt; beanList = null;\n\t\t// å†™sqlè¯­å¥\n\t\tString sql = \"select id,title,author,price,sales,stock,img_path imgPath from books\";\n\t\tbeanList = getBeanList(conn,sql);\n\t\treturn beanList;\n\t}\n\n\t@Override\n\tpublic void saveBook(Connection conn,Book book) {\n\t\t// å†™sqlè¯­å¥\n\t\tString sql = \"insert into books(title,author,price,sales,stock,img_path) values(?,?,?,?,?,?)\";\n\t\t// è°ƒç”¨BaseDaoä¸­é€šç”¨çš„å¢åˆ æ”¹çš„æ–¹æ³•\n\t\tupdate(conn,sql, book.getTitle(), book.getAuthor(), book.getPrice(), book.getSales(), book.getStock(),book.getImgPath());\n\t}\n\n\t@Override\n\tpublic void deleteBookById(Connection conn,String bookId) {\n\t\t// å†™sqlè¯­å¥\n\t\tString sql = \"DELETE FROM books WHERE id = ?\";\n\t\t// è°ƒç”¨BaseDaoä¸­é€šç”¨å¢åˆ æ”¹çš„æ–¹æ³•\n\t\tupdate(conn,sql, bookId);\n\t\t\t\n\t}\n\n\t@Override\n\tpublic Book getBookById(Connection conn,String bookId) {\n\t\t// è°ƒç”¨BaseDaoä¸­è·å–ä¸€ä¸ªå¯¹è±¡çš„æ–¹æ³•\n\t\tBook book = null;\n\t\t// å†™sqlè¯­å¥\n\t\tString sql = \"select id,title,author,price,sales,stock,img_path imgPath from books where id = ?\";\n\t\tbook = getBean(conn,sql, bookId);\n\t\treturn book;\n\t}\n\n\t@Override\n\tpublic void updateBook(Connection conn,Book book) {\n\t\t// å†™sqlè¯­å¥\n\t\tString sql = \"update books set title = ? , author = ? , price = ? , sales = ? , stock = ? where id = ?\";\n\t\t// è°ƒç”¨BaseDaoä¸­é€šç”¨çš„å¢åˆ æ”¹çš„æ–¹æ³•\n\t\tupdate(conn,sql, book.getTitle(), book.getAuthor(), book.getPrice(), book.getSales(), book.getStock(), book.getId());\n\t}\n\n\t@Override\n\tpublic Page&lt;Book&gt; getPageBooks(Connection conn,Page&lt;Book&gt; page) {\n\t\t// è·å–æ•°æ®åº“ä¸­å›¾ä¹¦çš„æ€»è®°å½•æ•°\n\t\tString sql = \"select count(*) from books\";\n\t\t// è°ƒç”¨BaseDaoä¸­è·å–ä¸€ä¸ªå•ä¸€å€¼çš„æ–¹æ³•\n\t\tlong totalRecord = (long) getValue(conn,sql);\n\t\t// å°†æ€»è®°å½•æ•°è®¾ç½®éƒ½pageå¯¹è±¡ä¸­\n\t\tpage.setTotalRecord((int) totalRecord);\n\n\t\t// è·å–å½“å‰é¡µä¸­çš„è®°å½•å­˜æ”¾çš„List\n\t\tString sql2 = \"select id,title,author,price,sales,stock,img_path imgPath from books limit ?,?\";\n\t\t// è°ƒç”¨BaseDaoä¸­è·å–ä¸€ä¸ªé›†åˆçš„æ–¹æ³•\n\t\tList&lt;Book&gt; beanList = getBeanList(conn,sql2, (page.getPageNo() - 1) * Page.PAGE_SIZE, Page.PAGE_SIZE);\n\t\t// å°†è¿™ä¸ªListè®¾ç½®åˆ°pageå¯¹è±¡ä¸­\n\t\tpage.setList(beanList);\n\t\treturn page;\n\t}\n\n\t@Override\n\tpublic Page&lt;Book&gt; getPageBooksByPrice(Connection conn,Page&lt;Book&gt; page, double minPrice, double maxPrice) {\n\t\t// è·å–æ•°æ®åº“ä¸­å›¾ä¹¦çš„æ€»è®°å½•æ•°\n\t\tString sql = \"select count(*) from books where price between ? and ?\";\n\t\t// è°ƒç”¨BaseDaoä¸­è·å–ä¸€ä¸ªå•ä¸€å€¼çš„æ–¹æ³•\n\t\tlong totalRecord = (long) getValue(conn,sql,minPrice,maxPrice);\n\t\t// å°†æ€»è®°å½•æ•°è®¾ç½®éƒ½pageå¯¹è±¡ä¸­\n\t\tpage.setTotalRecord((int) totalRecord);\n\n\t\t// è·å–å½“å‰é¡µä¸­çš„è®°å½•å­˜æ”¾çš„List\n\t\tString sql2 = \"select id,title,author,price,sales,stock,img_path imgPath from books where price between ? and ? limit ?,?\";\n\t\t// è°ƒç”¨BaseDaoä¸­è·å–ä¸€ä¸ªé›†åˆçš„æ–¹æ³•\n\t\tList&lt;Book&gt; beanList = getBeanList(conn,sql2, minPrice , maxPrice , (page.getPageNo() - 1) * Page.PAGE_SIZE, Page.PAGE_SIZE);\n\t\t// å°†è¿™ä¸ªListè®¾ç½®åˆ°pageå¯¹è±¡ä¸­\n\t\tpage.setList(beanList);\n\t\t\n\t\treturn page;\n\t}\n\n}\nã€UserDaoImpl.javaã€‘package com.atguigu.bookstore.dao.impl;\n\nimport java.sql.Connection;\n\nimport com.atguigu.bookstore.beans.User;\nimport com.atguigu.bookstore.dao.BaseDao;\nimport com.atguigu.bookstore.dao.UserDao;\n\npublic class UserDaoImpl extends BaseDao&lt;User&gt; implements UserDao {\n\n\t@Override\n\tpublic User getUser(Connection conn,User user) {\n\t\t// è°ƒç”¨BaseDaoä¸­è·å–ä¸€ä¸ªå¯¹è±¡çš„æ–¹æ³•\n\t\tUser bean = null;\n\t\t// å†™sqlè¯­å¥\n\t\tString sql = \"select id,username,password,email from users where username = ? and password = ?\";\n\t\tbean = getBean(conn,sql, user.getUsername(), user.getPassword());\n\t\treturn bean;\n\t}\n\n\t@Override\n\tpublic boolean checkUsername(Connection conn,User user) {\n\t\t// è°ƒç”¨BaseDaoä¸­è·å–ä¸€ä¸ªå¯¹è±¡çš„æ–¹æ³•\n\t\tUser bean = null;\n\t\t// å†™sqlè¯­å¥\n\t\tString sql = \"select id,username,password,email from users where username = ?\";\n\t\tbean = getBean(conn,sql, user.getUsername());\n\t\treturn bean != null;\n\t}\n\n\t@Override\n\tpublic void saveUser(Connection conn,User user) {\n\t\t//å†™sqlè¯­å¥\n\t\tString sql = \"insert into users(username,password,email) values(?,?,?)\";\n\t\t//è°ƒç”¨BaseDaoä¸­é€šç”¨çš„å¢åˆ æ”¹çš„æ–¹æ³•\n\t\tupdate(conn,sql, user.getUsername(),user.getPassword(),user.getEmail());\n\t}\n\n}\nã€Book.javaã€‘package com.atguigu.bookstore.beans;\n/**\n * å›¾ä¹¦ç±»\n * @author songhongkang\n *\n */\npublic class Book {\n\n\tprivate Integer id;\n\tprivate String title; // ä¹¦å\n\tprivate String author; // ä½œè€…\n\tprivate double price; // ä»·æ ¼\n\tprivate Integer sales; // é”€é‡\n\tprivate Integer stock; // åº“å­˜\n\tprivate String imgPath = \"static/img/default.jpg\"; // å°é¢å›¾ç‰‡çš„è·¯å¾„\n\t//æ„é€ å™¨ï¼Œget()ï¼Œset()ï¼ŒtoString()æ–¹æ³•ç•¥\n}\nã€Page.javaã€‘package com.atguigu.bookstore.beans;\n\nimport java.util.List;\n/**\n * é¡µç ç±»\n * @author songhongkang\n *\n */\npublic class Page&lt;T&gt; {\n\n\tprivate List&lt;T&gt; list; // æ¯é¡µæŸ¥åˆ°çš„è®°å½•å­˜æ”¾çš„é›†åˆ\n\tpublic static final int PAGE_SIZE = 4; // æ¯é¡µæ˜¾ç¤ºçš„è®°å½•æ•°\n\tprivate int pageNo; // å½“å‰é¡µ\n//\tprivate int totalPageNo; // æ€»é¡µæ•°ï¼Œé€šè¿‡è®¡ç®—å¾—åˆ°\n\tprivate int totalRecord; // æ€»è®°å½•æ•°ï¼Œé€šè¿‡æŸ¥è¯¢æ•°æ®åº“å¾—åˆ°\n\nã€User.javaã€‘package com.atguigu.bookstore.beans;\n/**\n * ç”¨æˆ·ç±»\n * @author songhongkang\n *\n */\npublic class User {\n\n\tprivate Integer id;\n\tprivate String username;\n\tprivate String password;\n\tprivate String email;\n\nç¬¬8ç« ï¼šæ•°æ®åº“è¿æ¥æ± 8.1 JDBCæ•°æ®åº“è¿æ¥æ± çš„å¿…è¦æ€§\nåœ¨ä½¿ç”¨å¼€å‘åŸºäºæ•°æ®åº“çš„webç¨‹åºæ—¶ï¼Œä¼ ç»Ÿçš„æ¨¡å¼åŸºæœ¬æ˜¯æŒ‰ä»¥ä¸‹æ­¥éª¤ï¼šã€€ã€€\n\nåœ¨ä¸»ç¨‹åºï¼ˆå¦‚servletã€beansï¼‰ä¸­å»ºç«‹æ•°æ®åº“è¿æ¥\nè¿›è¡Œsqlæ“ä½œ\næ–­å¼€æ•°æ®åº“è¿æ¥\n\n\nè¿™ç§æ¨¡å¼å¼€å‘ï¼Œå­˜åœ¨çš„é—®é¢˜:\n\næ™®é€šçš„JDBCæ•°æ®åº“è¿æ¥ä½¿ç”¨ DriverManager æ¥è·å–ï¼Œæ¯æ¬¡å‘æ•°æ®åº“å»ºç«‹è¿æ¥çš„æ—¶å€™éƒ½è¦å°† Connection åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå†éªŒè¯ç”¨æˆ·åå’Œå¯†ç (å¾—èŠ±è´¹0.05sï½1sçš„æ—¶é—´)ã€‚éœ€è¦æ•°æ®åº“è¿æ¥çš„æ—¶å€™ï¼Œå°±å‘æ•°æ®åº“è¦æ±‚ä¸€ä¸ªï¼Œæ‰§è¡Œå®Œæˆåå†æ–­å¼€è¿æ¥ã€‚è¿™æ ·çš„æ–¹å¼å°†ä¼šæ¶ˆè€—å¤§é‡çš„èµ„æºå’Œæ—¶é—´ã€‚æ•°æ®åº“çš„è¿æ¥èµ„æºå¹¶æ²¡æœ‰å¾—åˆ°å¾ˆå¥½çš„é‡å¤åˆ©ç”¨ã€‚è‹¥åŒæ—¶æœ‰å‡ ç™¾äººç”šè‡³å‡ åƒäººåœ¨çº¿ï¼Œé¢‘ç¹çš„è¿›è¡Œæ•°æ®åº“è¿æ¥æ“ä½œå°†å ç”¨å¾ˆå¤šçš„ç³»ç»Ÿèµ„æºï¼Œä¸¥é‡çš„ç”šè‡³ä¼šé€ æˆæœåŠ¡å™¨çš„å´©æºƒã€‚\nå¯¹äºæ¯ä¸€æ¬¡æ•°æ®åº“è¿æ¥ï¼Œä½¿ç”¨å®Œåéƒ½å¾—æ–­å¼€ã€‚å¦åˆ™ï¼Œå¦‚æœç¨‹åºå‡ºç°å¼‚å¸¸è€Œæœªèƒ½å…³é—­ï¼Œå°†ä¼šå¯¼è‡´æ•°æ®åº“ç³»ç»Ÿä¸­çš„å†…å­˜æ³„æ¼ï¼Œæœ€ç»ˆå°†å¯¼è‡´é‡å¯æ•°æ®åº“ã€‚ï¼ˆå›å¿†ï¼šä½•ä¸ºJavaçš„å†…å­˜æ³„æ¼ï¼Ÿï¼‰\nè¿™ç§å¼€å‘ä¸èƒ½æ§åˆ¶è¢«åˆ›å»ºçš„è¿æ¥å¯¹è±¡æ•°ï¼Œç³»ç»Ÿèµ„æºä¼šè¢«æ¯«æ— é¡¾åŠçš„åˆ†é…å‡ºå»ï¼Œå¦‚è¿æ¥è¿‡å¤šï¼Œä¹Ÿå¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼ï¼ŒæœåŠ¡å™¨å´©æºƒã€‚ \n\n\n\n8.2 æ•°æ®åº“è¿æ¥æ± æŠ€æœ¯\nä¸ºè§£å†³ä¼ ç»Ÿå¼€å‘ä¸­çš„æ•°æ®åº“è¿æ¥é—®é¢˜ï¼Œå¯ä»¥é‡‡ç”¨æ•°æ®åº“è¿æ¥æ± æŠ€æœ¯ã€‚\næ•°æ®åº“è¿æ¥æ± çš„åŸºæœ¬æ€æƒ³ï¼šå°±æ˜¯ä¸ºæ•°æ®åº“è¿æ¥å»ºç«‹ä¸€ä¸ªâ€œç¼“å†²æ± â€ã€‚é¢„å…ˆåœ¨ç¼“å†²æ± ä¸­æ”¾å…¥ä¸€å®šæ•°é‡çš„è¿æ¥ï¼Œå½“éœ€è¦å»ºç«‹æ•°æ®åº“è¿æ¥æ—¶ï¼Œåªéœ€ä»â€œç¼“å†²æ± â€ä¸­å–å‡ºä¸€ä¸ªï¼Œä½¿ç”¨å®Œæ¯•ä¹‹åå†æ”¾å›å»ã€‚\n\næ•°æ®åº“è¿æ¥æ± è´Ÿè´£åˆ†é…ã€ç®¡ç†å’Œé‡Šæ”¾æ•°æ®åº“è¿æ¥ï¼Œå®ƒå…è®¸åº”ç”¨ç¨‹åºé‡å¤ä½¿ç”¨ä¸€ä¸ªç°æœ‰çš„æ•°æ®åº“è¿æ¥ï¼Œè€Œä¸æ˜¯é‡æ–°å»ºç«‹ä¸€ä¸ªã€‚\n\næ•°æ®åº“è¿æ¥æ± åœ¨åˆå§‹åŒ–æ—¶å°†åˆ›å»ºä¸€å®šæ•°é‡çš„æ•°æ®åº“è¿æ¥æ”¾åˆ°è¿æ¥æ± ä¸­ï¼Œè¿™äº›æ•°æ®åº“è¿æ¥çš„æ•°é‡æ˜¯ç”±æœ€å°æ•°æ®åº“è¿æ¥æ•°æ¥è®¾å®šçš„ã€‚æ— è®ºè¿™äº›æ•°æ®åº“è¿æ¥æ˜¯å¦è¢«ä½¿ç”¨ï¼Œè¿æ¥æ± éƒ½å°†ä¸€ç›´ä¿è¯è‡³å°‘æ‹¥æœ‰è¿™ä¹ˆå¤šçš„è¿æ¥æ•°é‡ã€‚è¿æ¥æ± çš„æœ€å¤§æ•°æ®åº“è¿æ¥æ•°é‡é™å®šäº†è¿™ä¸ªè¿æ¥æ± èƒ½å æœ‰çš„æœ€å¤§è¿æ¥æ•°ï¼Œå½“åº”ç”¨ç¨‹åºå‘è¿æ¥æ± è¯·æ±‚çš„è¿æ¥æ•°è¶…è¿‡æœ€å¤§è¿æ¥æ•°é‡æ—¶ï¼Œè¿™äº›è¯·æ±‚å°†è¢«åŠ å…¥åˆ°ç­‰å¾…é˜Ÿåˆ—ä¸­ã€‚\n\n\n\nå·¥ä½œåŸç†ï¼š\n\n\n\næ•°æ®åº“è¿æ¥æ± æŠ€æœ¯çš„ä¼˜ç‚¹\n1. èµ„æºé‡ç”¨\nç”±äºæ•°æ®åº“è¿æ¥å¾—ä»¥é‡ç”¨ï¼Œé¿å…äº†é¢‘ç¹åˆ›å»ºï¼Œé‡Šæ”¾è¿æ¥å¼•èµ·çš„å¤§é‡æ€§èƒ½å¼€é”€ã€‚åœ¨å‡å°‘ç³»ç»Ÿæ¶ˆè€—çš„åŸºç¡€ä¸Šï¼Œå¦ä¸€æ–¹é¢ä¹Ÿå¢åŠ äº†ç³»ç»Ÿè¿è¡Œç¯å¢ƒçš„å¹³ç¨³æ€§ã€‚\n2. æ›´å¿«çš„ç³»ç»Ÿååº”é€Ÿåº¦\næ•°æ®åº“è¿æ¥æ± åœ¨åˆå§‹åŒ–è¿‡ç¨‹ä¸­ï¼Œå¾€å¾€å·²ç»åˆ›å»ºäº†è‹¥å¹²æ•°æ®åº“è¿æ¥ç½®äºè¿æ¥æ± ä¸­å¤‡ç”¨ã€‚æ­¤æ—¶è¿æ¥çš„åˆå§‹åŒ–å·¥ä½œå‡å·²å®Œæˆã€‚å¯¹äºä¸šåŠ¡è¯·æ±‚å¤„ç†è€Œè¨€ï¼Œç›´æ¥åˆ©ç”¨ç°æœ‰å¯ç”¨è¿æ¥ï¼Œé¿å…äº†æ•°æ®åº“è¿æ¥åˆå§‹åŒ–å’Œé‡Šæ”¾è¿‡ç¨‹çš„æ—¶é—´å¼€é”€ï¼Œä»è€Œå‡å°‘äº†ç³»ç»Ÿçš„å“åº”æ—¶é—´\n3. æ–°çš„èµ„æºåˆ†é…æ‰‹æ®µ\nå¯¹äºå¤šåº”ç”¨å…±äº«åŒä¸€æ•°æ®åº“çš„ç³»ç»Ÿè€Œè¨€ï¼Œå¯åœ¨åº”ç”¨å±‚é€šè¿‡æ•°æ®åº“è¿æ¥æ± çš„é…ç½®ï¼Œå®ç°æŸä¸€åº”ç”¨æœ€å¤§å¯ç”¨æ•°æ®åº“è¿æ¥æ•°çš„é™åˆ¶ï¼Œé¿å…æŸä¸€åº”ç”¨ç‹¬å æ‰€æœ‰çš„æ•°æ®åº“èµ„æº\n4. ç»Ÿä¸€çš„è¿æ¥ç®¡ç†ï¼Œé¿å…æ•°æ®åº“è¿æ¥æ³„æ¼\nåœ¨è¾ƒä¸ºå®Œå–„çš„æ•°æ®åº“è¿æ¥æ± å®ç°ä¸­ï¼Œå¯æ ¹æ®é¢„å…ˆçš„å ç”¨è¶…æ—¶è®¾å®šï¼Œå¼ºåˆ¶å›æ”¶è¢«å ç”¨è¿æ¥ï¼Œä»è€Œé¿å…äº†å¸¸è§„æ•°æ®åº“è¿æ¥æ“ä½œä¸­å¯èƒ½å‡ºç°çš„èµ„æºæ³„éœ²\n\n\n8.3 å¤šç§å¼€æºçš„æ•°æ®åº“è¿æ¥æ± \nJDBC çš„æ•°æ®åº“è¿æ¥æ± ä½¿ç”¨ javax.sql.DataSource æ¥è¡¨ç¤ºï¼ŒDataSource åªæ˜¯ä¸€ä¸ªæ¥å£ï¼Œè¯¥æ¥å£é€šå¸¸ç”±æœåŠ¡å™¨(Weblogic, WebSphere, Tomcat)æä¾›å®ç°ï¼Œä¹Ÿæœ‰ä¸€äº›å¼€æºç»„ç»‡æä¾›å®ç°ï¼š\nDBCP æ˜¯Apacheæä¾›çš„æ•°æ®åº“è¿æ¥æ± ã€‚tomcat æœåŠ¡å™¨è‡ªå¸¦dbcpæ•°æ®åº“è¿æ¥æ± ã€‚é€Ÿåº¦ç›¸å¯¹c3p0è¾ƒå¿«ï¼Œä½†å› è‡ªèº«å­˜åœ¨BUGï¼ŒHibernate3å·²ä¸å†æä¾›æ”¯æŒã€‚\nC3P0 æ˜¯ä¸€ä¸ªå¼€æºç»„ç»‡æä¾›çš„ä¸€ä¸ªæ•°æ®åº“è¿æ¥æ± ï¼Œé€Ÿåº¦ç›¸å¯¹è¾ƒæ…¢ï¼Œç¨³å®šæ€§è¿˜å¯ä»¥ã€‚hibernateå®˜æ–¹æ¨èä½¿ç”¨\nProxool æ˜¯sourceforgeä¸‹çš„ä¸€ä¸ªå¼€æºé¡¹ç›®æ•°æ®åº“è¿æ¥æ± ï¼Œæœ‰ç›‘æ§è¿æ¥æ± çŠ¶æ€çš„åŠŸèƒ½ï¼Œç¨³å®šæ€§è¾ƒc3p0å·®ä¸€ç‚¹\nBoneCP æ˜¯ä¸€ä¸ªå¼€æºç»„ç»‡æä¾›çš„æ•°æ®åº“è¿æ¥æ± ï¼Œé€Ÿåº¦å¿«\nDruid æ˜¯é˜¿é‡Œæä¾›çš„æ•°æ®åº“è¿æ¥æ± ï¼Œæ®è¯´æ˜¯é›†DBCP ã€C3P0 ã€Proxool ä¼˜ç‚¹äºä¸€èº«çš„æ•°æ®åº“è¿æ¥æ± ï¼Œä½†æ˜¯é€Ÿåº¦ä¸ç¡®å®šæ˜¯å¦æœ‰BoneCPå¿«\n\n\nDataSource é€šå¸¸è¢«ç§°ä¸ºæ•°æ®æºï¼Œå®ƒåŒ…å«è¿æ¥æ± å’Œè¿æ¥æ± ç®¡ç†ä¸¤ä¸ªéƒ¨åˆ†ï¼Œä¹ æƒ¯ä¸Šä¹Ÿç»å¸¸æŠŠ DataSource ç§°ä¸ºè¿æ¥æ± \nDataSourceç”¨æ¥å–ä»£DriverManageræ¥è·å–Connectionï¼Œè·å–é€Ÿåº¦å¿«ï¼ŒåŒæ—¶å¯ä»¥å¤§å¹…åº¦æé«˜æ•°æ®åº“è®¿é—®é€Ÿåº¦ã€‚\nç‰¹åˆ«æ³¨æ„ï¼š\næ•°æ®æºå’Œæ•°æ®åº“è¿æ¥ä¸åŒï¼Œæ•°æ®æºæ— éœ€åˆ›å»ºå¤šä¸ªï¼Œå®ƒæ˜¯äº§ç”Ÿæ•°æ®åº“è¿æ¥çš„å·¥å‚ï¼Œå› æ­¤æ•´ä¸ªåº”ç”¨åªéœ€è¦ä¸€ä¸ªæ•°æ®æºå³å¯ã€‚\nå½“æ•°æ®åº“è®¿é—®ç»“æŸåï¼Œç¨‹åºè¿˜æ˜¯åƒä»¥å‰ä¸€æ ·å…³é—­æ•°æ®åº“è¿æ¥ï¼šconn.close(); ä½†conn.close()å¹¶æ²¡æœ‰å…³é—­æ•°æ®åº“çš„ç‰©ç†è¿æ¥ï¼Œå®ƒä»…ä»…æŠŠæ•°æ®åº“è¿æ¥é‡Šæ”¾ï¼Œå½’è¿˜ç»™äº†æ•°æ®åº“è¿æ¥æ± ã€‚\n\n\n\n8.3.1 C3P0æ•°æ®åº“è¿æ¥æ± \nè·å–è¿æ¥æ–¹å¼ä¸€\n\n//ä½¿ç”¨C3P0æ•°æ®åº“è¿æ¥æ± çš„æ–¹å¼ï¼Œè·å–æ•°æ®åº“çš„è¿æ¥ï¼šä¸æ¨è\npublic static Connection getConnection1() throws Exception{\n\tComboPooledDataSource cpds = new ComboPooledDataSource();\n\tcpds.setDriverClass(\"com.mysql.jdbc.Driver\"); \n\tcpds.setJdbcUrl(\"jdbc:mysql://localhost:3306/test\");\n\tcpds.setUser(\"root\");\n\tcpds.setPassword(\"abc123\");\n\t\t\n//\tcpds.setMaxPoolSize(100);\n\t\n\tConnection conn = cpds.getConnection();\n\treturn conn;\n}\n\nè·å–è¿æ¥æ–¹å¼äºŒ\n\n//ä½¿ç”¨C3P0æ•°æ®åº“è¿æ¥æ± çš„é…ç½®æ–‡ä»¶æ–¹å¼ï¼Œè·å–æ•°æ®åº“çš„è¿æ¥ï¼šæ¨è\nprivate static DataSource cpds = new ComboPooledDataSource(\"helloc3p0\");\npublic static Connection getConnection2() throws SQLException{\n\tConnection conn = cpds.getConnection();\n\treturn conn;\n}\nå…¶ä¸­ï¼Œsrcä¸‹çš„é…ç½®æ–‡ä»¶ä¸ºï¼šã€c3p0-config.xmlã€‘\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;c3p0-config&gt;\n\t&lt;named-config name=\"helloc3p0\"&gt;\n\t\t&lt;!-- è·å–è¿æ¥çš„4ä¸ªåŸºæœ¬ä¿¡æ¯ --&gt;\n\t\t&lt;property name=\"user\"&gt;root&lt;/property&gt;\n\t\t&lt;property name=\"password\"&gt;abc123&lt;/property&gt;\n\t\t&lt;property name=\"jdbcUrl\"&gt;jdbc:mysql:///test&lt;/property&gt;\n\t\t&lt;property name=\"driverClass\"&gt;com.mysql.jdbc.Driver&lt;/property&gt;\n\t\t\n\t\t&lt;!-- æ¶‰åŠåˆ°æ•°æ®åº“è¿æ¥æ± çš„ç®¡ç†çš„ç›¸å…³å±æ€§çš„è®¾ç½® --&gt;\n\t\t&lt;!-- è‹¥æ•°æ®åº“ä¸­è¿æ¥æ•°ä¸è¶³æ—¶, ä¸€æ¬¡å‘æ•°æ®åº“æœåŠ¡å™¨ç”³è¯·å¤šå°‘ä¸ªè¿æ¥ --&gt;\n\t\t&lt;property name=\"acquireIncrement\"&gt;5&lt;/property&gt;\n\t\t&lt;!-- åˆå§‹åŒ–æ•°æ®åº“è¿æ¥æ± æ—¶è¿æ¥çš„æ•°é‡ --&gt;\n\t\t&lt;property name=\"initialPoolSize\"&gt;5&lt;/property&gt;\n\t\t&lt;!-- æ•°æ®åº“è¿æ¥æ± ä¸­çš„æœ€å°çš„æ•°æ®åº“è¿æ¥æ•° --&gt;\n\t\t&lt;property name=\"minPoolSize\"&gt;5&lt;/property&gt;\n\t\t&lt;!-- æ•°æ®åº“è¿æ¥æ± ä¸­çš„æœ€å¤§çš„æ•°æ®åº“è¿æ¥æ•° --&gt;\n\t\t&lt;property name=\"maxPoolSize\"&gt;10&lt;/property&gt;\n\t\t&lt;!-- C3P0 æ•°æ®åº“è¿æ¥æ± å¯ä»¥ç»´æŠ¤çš„ Statement çš„ä¸ªæ•° --&gt;\n\t\t&lt;property name=\"maxStatements\"&gt;20&lt;/property&gt;\n\t\t&lt;!-- æ¯ä¸ªè¿æ¥åŒæ—¶å¯ä»¥ä½¿ç”¨çš„ Statement å¯¹è±¡çš„ä¸ªæ•° --&gt;\n\t\t&lt;property name=\"maxStatementsPerConnection\"&gt;5&lt;/property&gt;\n\n\t&lt;/named-config&gt;\n&lt;/c3p0-config&gt;\n8.3.2 DBCPæ•°æ®åº“è¿æ¥æ± \nDBCP æ˜¯ Apache è½¯ä»¶åŸºé‡‘ç»„ç»‡ä¸‹çš„å¼€æºè¿æ¥æ± å®ç°ï¼Œè¯¥è¿æ¥æ± ä¾èµ–è¯¥ç»„ç»‡ä¸‹çš„å¦ä¸€ä¸ªå¼€æºç³»ç»Ÿï¼šCommon-poolã€‚å¦‚éœ€ä½¿ç”¨è¯¥è¿æ¥æ± å®ç°ï¼Œåº”åœ¨ç³»ç»Ÿä¸­å¢åŠ å¦‚ä¸‹ä¸¤ä¸ª jar æ–‡ä»¶ï¼š\nCommons-dbcp.jarï¼šè¿æ¥æ± çš„å®ç°\nCommons-pool.jarï¼šè¿æ¥æ± å®ç°çš„ä¾èµ–åº“\n\n\nTomcat çš„è¿æ¥æ± æ­£æ˜¯é‡‡ç”¨è¯¥è¿æ¥æ± æ¥å®ç°çš„ã€‚è¯¥æ•°æ®åº“è¿æ¥æ± æ—¢å¯ä»¥ä¸åº”ç”¨æœåŠ¡å™¨æ•´åˆä½¿ç”¨ï¼Œä¹Ÿå¯ç”±åº”ç”¨ç¨‹åºç‹¬ç«‹ä½¿ç”¨ã€‚\næ•°æ®æºå’Œæ•°æ®åº“è¿æ¥ä¸åŒï¼Œæ•°æ®æºæ— éœ€åˆ›å»ºå¤šä¸ªï¼Œå®ƒæ˜¯äº§ç”Ÿæ•°æ®åº“è¿æ¥çš„å·¥å‚ï¼Œå› æ­¤æ•´ä¸ªåº”ç”¨åªéœ€è¦ä¸€ä¸ªæ•°æ®æºå³å¯ã€‚\nå½“æ•°æ®åº“è®¿é—®ç»“æŸåï¼Œç¨‹åºè¿˜æ˜¯åƒä»¥å‰ä¸€æ ·å…³é—­æ•°æ®åº“è¿æ¥ï¼šconn.close(); ä½†ä¸Šé¢çš„ä»£ç å¹¶æ²¡æœ‰å…³é—­æ•°æ®åº“çš„ç‰©ç†è¿æ¥ï¼Œå®ƒä»…ä»…æŠŠæ•°æ®åº“è¿æ¥é‡Šæ”¾ï¼Œå½’è¿˜ç»™äº†æ•°æ®åº“è¿æ¥æ± ã€‚\né…ç½®å±æ€§è¯´æ˜\n\n\n\n\n\nå±æ€§\né»˜è®¤å€¼\nè¯´æ˜\n\n\n\n\ninitialSize\n0\nè¿æ¥æ± å¯åŠ¨æ—¶åˆ›å»ºçš„åˆå§‹åŒ–è¿æ¥æ•°é‡\n\n\nmaxActive\n8\nè¿æ¥æ± ä¸­å¯åŒæ—¶è¿æ¥çš„æœ€å¤§çš„è¿æ¥æ•°\n\n\nmaxIdle\n8\nè¿æ¥æ± ä¸­æœ€å¤§çš„ç©ºé—²çš„è¿æ¥æ•°ï¼Œè¶…è¿‡çš„ç©ºé—²è¿æ¥å°†è¢«é‡Šæ”¾ï¼Œå¦‚æœè®¾ç½®ä¸ºè´Ÿæ•°è¡¨ç¤ºä¸é™åˆ¶\n\n\nminIdle\n0\nè¿æ¥æ± ä¸­æœ€å°çš„ç©ºé—²çš„è¿æ¥æ•°ï¼Œä½äºè¿™ä¸ªæ•°é‡ä¼šè¢«åˆ›å»ºæ–°çš„è¿æ¥ã€‚è¯¥å‚æ•°è¶Šæ¥è¿‘maxIdleï¼Œæ€§èƒ½è¶Šå¥½ï¼Œå› ä¸ºè¿æ¥çš„åˆ›å»ºå’Œé”€æ¯ï¼Œéƒ½æ˜¯éœ€è¦æ¶ˆè€—èµ„æºçš„ï¼›ä½†æ˜¯ä¸èƒ½å¤ªå¤§ã€‚\n\n\nmaxWait\næ— é™åˆ¶\næœ€å¤§ç­‰å¾…æ—¶é—´ï¼Œå½“æ²¡æœ‰å¯ç”¨è¿æ¥æ—¶ï¼Œè¿æ¥æ± ç­‰å¾…è¿æ¥é‡Šæ”¾çš„æœ€å¤§æ—¶é—´ï¼Œè¶…è¿‡è¯¥æ—¶é—´é™åˆ¶ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œå¦‚æœè®¾ç½®-1è¡¨ç¤ºæ— é™ç­‰å¾…\n\n\npoolPreparedStatements\nfalse\nå¼€å¯æ± çš„Statementæ˜¯å¦prepared\n\n\nmaxOpenPreparedStatements\næ— é™åˆ¶\nå¼€å¯æ± çš„prepared åçš„åŒæ—¶æœ€å¤§è¿æ¥æ•°\n\n\nminEvictableIdleTimeMillis\n\nè¿æ¥æ± ä¸­è¿æ¥ï¼Œåœ¨æ—¶é—´æ®µå†…ä¸€ç›´ç©ºé—²ï¼Œ è¢«é€å‡ºè¿æ¥æ± çš„æ—¶é—´\n\n\nremoveAbandonedTimeout\n300\nè¶…è¿‡æ—¶é—´é™åˆ¶ï¼Œå›æ”¶æ²¡æœ‰ç”¨(åºŸå¼ƒ)çš„è¿æ¥\n\n\nremoveAbandoned\nfalse\nè¶…è¿‡removeAbandonedTimeoutæ—¶é—´åï¼Œæ˜¯å¦è¿› è¡Œæ²¡ç”¨è¿æ¥ï¼ˆåºŸå¼ƒï¼‰çš„å›æ”¶\n\n\n\n\n\nè·å–è¿æ¥æ–¹å¼ä¸€ï¼š\n\npublic static Connection getConnection3() throws Exception {\n\tBasicDataSource source = new BasicDataSource();\n\t\t\n\tsource.setDriverClassName(\"com.mysql.jdbc.Driver\");\n\tsource.setUrl(\"jdbc:mysql:///test\");\n\tsource.setUsername(\"root\");\n\tsource.setPassword(\"abc123\");\n\t\t\n\t//\n\tsource.setInitialSize(10);\n\t\t\n\tConnection conn = source.getConnection();\n\treturn conn;\n}\n\nè·å–è¿æ¥æ–¹å¼äºŒï¼š\n\n//ä½¿ç”¨dbcpæ•°æ®åº“è¿æ¥æ± çš„é…ç½®æ–‡ä»¶æ–¹å¼ï¼Œè·å–æ•°æ®åº“çš„è¿æ¥ï¼šæ¨è\nprivate static DataSource source = null;\nstatic{\n\ttry {\n\t\tProperties pros = new Properties();\n\t\t\n\t\tInputStream is = DBCPTest.class.getClassLoader().getResourceAsStream(\"dbcp.properties\");\n\t\t\t\n\t\tpros.load(is);\n\t\t//æ ¹æ®æä¾›çš„BasicDataSourceFactoryåˆ›å»ºå¯¹åº”çš„DataSourceå¯¹è±¡\n\t\tsource = BasicDataSourceFactory.createDataSource(pros);\n\t} catch (Exception e) {\n\t\te.printStackTrace();\n\t}\n\t\t\n}\npublic static Connection getConnection4() throws Exception {\n\t\t\n\tConnection conn = source.getConnection();\n\t\n\treturn conn;\n}\nå…¶ä¸­ï¼Œsrcä¸‹çš„é…ç½®æ–‡ä»¶ä¸ºï¼šã€dbcp.propertiesã€‘\ndriverClassName=com.mysql.jdbc.Driver\nurl=jdbc:mysql://localhost:3306/test?rewriteBatchedStatements=true&amp;useServerPrepStmts=false\nusername=root\npassword=abc123\n\ninitialSize=10\n#...\n8.3.3 Druidï¼ˆå¾·é²ä¼Šï¼‰æ•°æ®åº“è¿æ¥æ± Druidæ˜¯é˜¿é‡Œå·´å·´å¼€æºå¹³å°ä¸Šä¸€ä¸ªæ•°æ®åº“è¿æ¥æ± å®ç°ï¼Œå®ƒç»“åˆäº†C3P0ã€DBCPã€Proxoolç­‰DBæ± çš„ä¼˜ç‚¹ï¼ŒåŒæ—¶åŠ å…¥äº†æ—¥å¿—ç›‘æ§ï¼Œå¯ä»¥å¾ˆå¥½çš„ç›‘æ§DBæ± è¿æ¥å’ŒSQLçš„æ‰§è¡Œæƒ…å†µï¼Œå¯ä»¥è¯´æ˜¯é’ˆå¯¹ç›‘æ§è€Œç”Ÿçš„DBè¿æ¥æ± ï¼Œå¯ä»¥è¯´æ˜¯ç›®å‰æœ€å¥½çš„è¿æ¥æ± ä¹‹ä¸€ã€‚\npackage com.atguigu.druid;\n\nimport java.sql.Connection;\nimport java.util.Properties;\n\nimport javax.sql.DataSource;\n\nimport com.alibaba.druid.pool.DruidDataSourceFactory;\n\npublic class TestDruid {\n\tpublic static void main(String[] args) throws Exception {\n\t\tProperties pro = new Properties();\t\t pro.load(TestDruid.class.getClassLoader().getResourceAsStream(\"druid.properties\"));\n\t\tDataSource ds = DruidDataSourceFactory.createDataSource(pro);\n\t\tConnection conn = ds.getConnection();\n\t\tSystem.out.println(conn);\n\t}\n}\n\nå…¶ä¸­ï¼Œsrcä¸‹çš„é…ç½®æ–‡ä»¶ä¸ºï¼šã€druid.propertiesã€‘\nurl=jdbc:mysql://localhost:3306/test?rewriteBatchedStatements=true\nusername=root\npassword=123456\ndriverClassName=com.mysql.jdbc.Driver\n\ninitialSize=10\nmaxActive=20\nmaxWait=1000\nfilters=wall\n\nè¯¦ç»†é…ç½®å‚æ•°ï¼š\n\n\n\n\n\né…ç½®\nç¼ºçœ\nè¯´æ˜\n\n\n\n\nname\n\né…ç½®è¿™ä¸ªå±æ€§çš„æ„ä¹‰åœ¨äºï¼Œå¦‚æœå­˜åœ¨å¤šä¸ªæ•°æ®æºï¼Œç›‘æ§çš„æ—¶å€™å¯ä»¥é€šè¿‡åå­—æ¥åŒºåˆ†å¼€æ¥ã€‚   å¦‚æœæ²¡æœ‰é…ç½®ï¼Œå°†ä¼šç”Ÿæˆä¸€ä¸ªåå­—ï¼Œæ ¼å¼æ˜¯ï¼šâ€DataSource-â€ +   System.identityHashCode(this)\n\n\nurl\n\nè¿æ¥æ•°æ®åº“çš„urlï¼Œä¸åŒæ•°æ®åº“ä¸ä¸€æ ·ã€‚ä¾‹å¦‚ï¼šmysql :   jdbc:mysql://10.20.153.104:3306/druid2      oracle :   jdbc:oracle:thin:@10.20.149.85:1521:ocnauto\n\n\nusername\n\nè¿æ¥æ•°æ®åº“çš„ç”¨æˆ·å\n\n\npassword\n\nè¿æ¥æ•°æ®åº“çš„å¯†ç ã€‚å¦‚æœä½ ä¸å¸Œæœ›å¯†ç ç›´æ¥å†™åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ConfigFilterã€‚è¯¦ç»†çœ‹è¿™é‡Œï¼šhttps://github.com/alibaba/druid/wiki/%E4%BD%BF%E7%94%A8ConfigFilter\n\n\ndriverClassName\n\næ ¹æ®urlè‡ªåŠ¨è¯†åˆ«   è¿™ä¸€é¡¹å¯é…å¯ä¸é…ï¼Œå¦‚æœä¸é…ç½®druidä¼šæ ¹æ®urlè‡ªåŠ¨è¯†åˆ«dbTypeï¼Œç„¶åé€‰æ‹©ç›¸åº”çš„driverClassName(å»ºè®®é…ç½®ä¸‹)\n\n\ninitialSize\n0\nåˆå§‹åŒ–æ—¶å»ºç«‹ç‰©ç†è¿æ¥çš„ä¸ªæ•°ã€‚åˆå§‹åŒ–å‘ç”Ÿåœ¨æ˜¾ç¤ºè°ƒç”¨initæ–¹æ³•ï¼Œæˆ–è€…ç¬¬ä¸€æ¬¡getConnectionæ—¶\n\n\nmaxActive\n8\næœ€å¤§è¿æ¥æ± æ•°é‡\n\n\nmaxIdle\n8\nå·²ç»ä¸å†ä½¿ç”¨ï¼Œé…ç½®äº†ä¹Ÿæ²¡æ•ˆæœ\n\n\nminIdle\n\næœ€å°è¿æ¥æ± æ•°é‡\n\n\nmaxWait\n\nè·å–è¿æ¥æ—¶æœ€å¤§ç­‰å¾…æ—¶é—´ï¼Œå•ä½æ¯«ç§’ã€‚é…ç½®äº†maxWaitä¹‹åï¼Œç¼ºçœå¯ç”¨å…¬å¹³é”ï¼Œå¹¶å‘æ•ˆç‡ä¼šæœ‰æ‰€ä¸‹é™ï¼Œå¦‚æœéœ€è¦å¯ä»¥é€šè¿‡é…ç½®useUnfairLockå±æ€§ä¸ºtrueä½¿ç”¨éå…¬å¹³é”ã€‚\n\n\npoolPreparedStatements\nfalse\næ˜¯å¦ç¼“å­˜preparedStatementï¼Œä¹Ÿå°±æ˜¯PSCacheã€‚PSCacheå¯¹æ”¯æŒæ¸¸æ ‡çš„æ•°æ®åº“æ€§èƒ½æå‡å·¨å¤§ï¼Œæ¯”å¦‚è¯´oracleã€‚åœ¨mysqlä¸‹å»ºè®®å…³é—­ã€‚\n\n\nmaxOpenPreparedStatements\n-1\nè¦å¯ç”¨PSCacheï¼Œå¿…é¡»é…ç½®å¤§äº0ï¼Œå½“å¤§äº0æ—¶ï¼ŒpoolPreparedStatementsè‡ªåŠ¨è§¦å‘ä¿®æ”¹ä¸ºtrueã€‚åœ¨Druidä¸­ï¼Œä¸ä¼šå­˜åœ¨Oracleä¸‹PSCacheå ç”¨å†…å­˜è¿‡å¤šçš„é—®é¢˜ï¼Œå¯ä»¥æŠŠè¿™ä¸ªæ•°å€¼é…ç½®å¤§ä¸€äº›ï¼Œæ¯”å¦‚è¯´100\n\n\nvalidationQuery\n\nç”¨æ¥æ£€æµ‹è¿æ¥æ˜¯å¦æœ‰æ•ˆçš„sqlï¼Œè¦æ±‚æ˜¯ä¸€ä¸ªæŸ¥è¯¢è¯­å¥ã€‚å¦‚æœvalidationQueryä¸ºnullï¼ŒtestOnBorrowã€testOnReturnã€testWhileIdleéƒ½ä¸ä¼šå…¶ä½œç”¨ã€‚\n\n\ntestOnBorrow\ntrue\nç”³è¯·è¿æ¥æ—¶æ‰§è¡ŒvalidationQueryæ£€æµ‹è¿æ¥æ˜¯å¦æœ‰æ•ˆï¼Œåšäº†è¿™ä¸ªé…ç½®ä¼šé™ä½æ€§èƒ½ã€‚\n\n\ntestOnReturn\nfalse\nå½’è¿˜è¿æ¥æ—¶æ‰§è¡ŒvalidationQueryæ£€æµ‹è¿æ¥æ˜¯å¦æœ‰æ•ˆï¼Œåšäº†è¿™ä¸ªé…ç½®ä¼šé™ä½æ€§èƒ½\n\n\ntestWhileIdle\nfalse\nå»ºè®®é…ç½®ä¸ºtrueï¼Œä¸å½±å“æ€§èƒ½ï¼Œå¹¶ä¸”ä¿è¯å®‰å…¨æ€§ã€‚ç”³è¯·è¿æ¥çš„æ—¶å€™æ£€æµ‹ï¼Œå¦‚æœç©ºé—²æ—¶é—´å¤§äºtimeBetweenEvictionRunsMillisï¼Œæ‰§è¡ŒvalidationQueryæ£€æµ‹è¿æ¥æ˜¯å¦æœ‰æ•ˆã€‚\n\n\ntimeBetweenEvictionRunsMillis\n\næœ‰ä¸¤ä¸ªå«ä¹‰ï¼š 1)Destroyçº¿ç¨‹ä¼šæ£€æµ‹è¿æ¥çš„é—´éš”æ—¶é—´2)testWhileIdleçš„åˆ¤æ–­ä¾æ®ï¼Œè¯¦ç»†çœ‹testWhileIdleå±æ€§çš„è¯´æ˜\n\n\nnumTestsPerEvictionRun\n\nä¸å†ä½¿ç”¨ï¼Œä¸€ä¸ªDruidDataSourceåªæ”¯æŒä¸€ä¸ªEvictionRun\n\n\nminEvictableIdleTimeMillis\n\n\n\n\nconnectionInitSqls\n\nç‰©ç†è¿æ¥åˆå§‹åŒ–çš„æ—¶å€™æ‰§è¡Œçš„sql\n\n\nexceptionSorter\n\næ ¹æ®dbTypeè‡ªåŠ¨è¯†åˆ«   å½“æ•°æ®åº“æŠ›å‡ºä¸€äº›ä¸å¯æ¢å¤çš„å¼‚å¸¸æ—¶ï¼ŒæŠ›å¼ƒè¿æ¥\n\n\nfilters\n\nå±æ€§ç±»å‹æ˜¯å­—ç¬¦ä¸²ï¼Œé€šè¿‡åˆ«åçš„æ–¹å¼é…ç½®æ‰©å±•æ’ä»¶ï¼Œå¸¸ç”¨çš„æ’ä»¶æœ‰ï¼š   ç›‘æ§ç»Ÿè®¡ç”¨çš„filter:statæ—¥å¿—ç”¨çš„filter:log4jé˜²å¾¡sqlæ³¨å…¥çš„filter:wall\n\n\nproxyFilters\n\nç±»å‹æ˜¯Listï¼Œå¦‚æœåŒæ—¶é…ç½®äº†filterså’ŒproxyFiltersï¼Œæ˜¯ç»„åˆå…³ç³»ï¼Œå¹¶éæ›¿æ¢å…³ç³»\n\n\n\n\nç¬¬9ç« ï¼šApache-DBUtilså®ç°CRUDæ“ä½œ9.1 Apache-DBUtilsç®€ä»‹\ncommons-dbutils æ˜¯ Apache ç»„ç»‡æä¾›çš„ä¸€ä¸ªå¼€æº JDBCå·¥å…·ç±»åº“ï¼Œå®ƒæ˜¯å¯¹JDBCçš„ç®€å•å°è£…ï¼Œå­¦ä¹ æˆæœ¬æä½ï¼Œå¹¶ä¸”ä½¿ç”¨dbutilsèƒ½æå¤§ç®€åŒ–jdbcç¼–ç çš„å·¥ä½œé‡ï¼ŒåŒæ—¶ä¹Ÿä¸ä¼šå½±å“ç¨‹åºçš„æ€§èƒ½ã€‚\n\nAPIä»‹ç»ï¼š\n\norg.apache.commons.dbutils.QueryRunner\norg.apache.commons.dbutils.ResultSetHandler\nå·¥å…·ç±»ï¼šorg.apache.commons.dbutils.DbUtils   \n\n\nAPIåŒ…è¯´æ˜ï¼š\n\n9.2 ä¸»è¦APIçš„ä½¿ç”¨9.2.1 DbUtils\nDbUtils ï¼šæä¾›å¦‚å…³é—­è¿æ¥ã€è£…è½½JDBCé©±åŠ¨ç¨‹åºç­‰å¸¸è§„å·¥ä½œçš„å·¥å…·ç±»ï¼Œé‡Œé¢çš„æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯é™æ€çš„ã€‚ä¸»è¦æ–¹æ³•å¦‚ä¸‹ï¼š\npublic static void close(â€¦) throws java.sql.SQLExceptionï¼šã€€DbUtilsç±»æä¾›äº†ä¸‰ä¸ªé‡è½½çš„å…³é—­æ–¹æ³•ã€‚è¿™äº›æ–¹æ³•æ£€æŸ¥æ‰€æä¾›çš„å‚æ•°æ˜¯ä¸æ˜¯NULLï¼Œå¦‚æœä¸æ˜¯çš„è¯ï¼Œå®ƒä»¬å°±å…³é—­Connectionã€Statementå’ŒResultSetã€‚\npublic static void closeQuietly(â€¦): è¿™ä¸€ç±»æ–¹æ³•ä¸ä»…èƒ½åœ¨Connectionã€Statementå’ŒResultSetä¸ºNULLæƒ…å†µä¸‹é¿å…å…³é—­ï¼Œè¿˜èƒ½éšè—ä¸€äº›åœ¨ç¨‹åºä¸­æŠ›å‡ºçš„SQLEeceptionã€‚\npublic static void commitAndClose(Connection conn)throws SQLExceptionï¼š ç”¨æ¥æäº¤è¿æ¥çš„äº‹åŠ¡ï¼Œç„¶åå…³é—­è¿æ¥\npublic static void commitAndCloseQuietly(Connection conn)ï¼š ç”¨æ¥æäº¤è¿æ¥ï¼Œç„¶åå…³é—­è¿æ¥ï¼Œå¹¶ä¸”åœ¨å…³é—­è¿æ¥æ—¶ä¸æŠ›å‡ºSQLå¼‚å¸¸ã€‚ \npublic static void rollback(Connection conn)throws SQLExceptionï¼šå…è®¸connä¸ºnullï¼Œå› ä¸ºæ–¹æ³•å†…éƒ¨åšäº†åˆ¤æ–­\npublic static void rollbackAndClose(Connection conn)throws SQLException\nrollbackAndCloseQuietly(Connection)\npublic static boolean loadDriver(java.lang.String driverClassName)ï¼šè¿™ä¸€æ–¹è£…è½½å¹¶æ³¨å†ŒJDBCé©±åŠ¨ç¨‹åºï¼Œå¦‚æœæˆåŠŸå°±è¿”å›trueã€‚ä½¿ç”¨è¯¥æ–¹æ³•ï¼Œä½ ä¸éœ€è¦æ•æ‰è¿™ä¸ªå¼‚å¸¸ClassNotFoundExceptionã€‚\n\n\n\n9.2.2 QueryRunnerç±»\nè¯¥ç±»ç®€å•åŒ–äº†SQLæŸ¥è¯¢ï¼Œå®ƒä¸ResultSetHandlerç»„åˆåœ¨ä¸€èµ·ä½¿ç”¨å¯ä»¥å®Œæˆå¤§éƒ¨åˆ†çš„æ•°æ®åº“æ“ä½œï¼Œèƒ½å¤Ÿå¤§å¤§å‡å°‘ç¼–ç é‡ã€‚\n\nQueryRunnerç±»æä¾›äº†ä¸¤ä¸ªæ„é€ å™¨ï¼š\n\né»˜è®¤çš„æ„é€ å™¨\néœ€è¦ä¸€ä¸ª javax.sql.DataSource æ¥ä½œå‚æ•°çš„æ„é€ å™¨\n\n\nQueryRunnerç±»çš„ä¸»è¦æ–¹æ³•ï¼š\n\næ›´æ–°\npublic int update(Connection conn, String sql, Objectâ€¦ params) throws SQLException:ç”¨æ¥æ‰§è¡Œä¸€ä¸ªæ›´æ–°ï¼ˆæ’å…¥ã€æ›´æ–°æˆ–åˆ é™¤ï¼‰æ“ä½œã€‚\nâ€¦â€¦\n\n\næ’å…¥\npublic  T insert(Connection conn,String sql,ResultSetHandler rsh, Objectâ€¦ params) throws SQLExceptionï¼šåªæ”¯æŒINSERTè¯­å¥ï¼Œå…¶ä¸­ rsh - The handler used to create the result object from the ResultSet of auto-generated keys.  è¿”å›å€¼: An object generated by the handler.å³è‡ªåŠ¨ç”Ÿæˆçš„é”®å€¼\nâ€¦.\n\n\næ‰¹å¤„ç†\npublic int[] batch(Connection conn,String sql,Object[][] params)throws SQLExceptionï¼š INSERT, UPDATE, or DELETEè¯­å¥\npublic  T insertBatch(Connection conn,String sql,ResultSetHandler rsh,Object[][] params)throws SQLExceptionï¼šåªæ”¯æŒINSERTè¯­å¥\nâ€¦..\n\n\næŸ¥è¯¢\npublic Object query(Connection conn, String sql, ResultSetHandler rsh,Objectâ€¦ params) throws SQLExceptionï¼šæ‰§è¡Œä¸€ä¸ªæŸ¥è¯¢æ“ä½œï¼Œåœ¨è¿™ä¸ªæŸ¥è¯¢ä¸­ï¼Œå¯¹è±¡æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ å€¼è¢«ç”¨æ¥ä½œä¸ºæŸ¥è¯¢è¯­å¥çš„ç½®æ¢å‚æ•°ã€‚è¯¥æ–¹æ³•ä¼šè‡ªè¡Œå¤„ç† PreparedStatement å’Œ ResultSet çš„åˆ›å»ºå’Œå…³é—­ã€‚\nâ€¦â€¦ \n\n\n\n\næµ‹è¯•\n\n\n// æµ‹è¯•æ·»åŠ \n@Test\npublic void testInsert() throws Exception {\n\tQueryRunner runner = new QueryRunner();\n\tConnection conn = JDBCUtils.getConnection3();\n\tString sql = \"insert into customers(name,email,birth)values(?,?,?)\";\n\tint count = runner.update(conn, sql, \"ä½•æˆé£\", \"he@qq.com\", \"1992-09-08\");\n\n\tSystem.out.println(\"æ·»åŠ äº†\" + count + \"æ¡è®°å½•\");\n\t\t\n\tJDBCUtils.closeResource(conn, null);\n\n}\n// æµ‹è¯•åˆ é™¤\n@Test\npublic void testDelete() throws Exception {\n\tQueryRunner runner = new QueryRunner();\n\tConnection conn = JDBCUtils.getConnection3();\n\tString sql = \"delete from customers where id &lt; ?\";\n\tint count = runner.update(conn, sql,3);\n\n\tSystem.out.println(\"åˆ é™¤äº†\" + count + \"æ¡è®°å½•\");\n\t\t\n\tJDBCUtils.closeResource(conn, null);\n\n}\n9.2.3 ResultSetHandleræ¥å£åŠå®ç°ç±»\nè¯¥æ¥å£ç”¨äºå¤„ç† java.sql.ResultSetï¼Œå°†æ•°æ®æŒ‰è¦æ±‚è½¬æ¢ä¸ºå¦ä¸€ç§å½¢å¼ã€‚\n\nResultSetHandler æ¥å£æä¾›äº†ä¸€ä¸ªå•ç‹¬çš„æ–¹æ³•ï¼šObject handle (java.sql.ResultSet .rs)ã€‚\n\næ¥å£çš„ä¸»è¦å®ç°ç±»ï¼š\n\nArrayHandlerï¼šæŠŠç»“æœé›†ä¸­çš„ç¬¬ä¸€è¡Œæ•°æ®è½¬æˆå¯¹è±¡æ•°ç»„ã€‚\n\nArrayListHandlerï¼šæŠŠç»“æœé›†ä¸­çš„æ¯ä¸€è¡Œæ•°æ®éƒ½è½¬æˆä¸€ä¸ªæ•°ç»„ï¼Œå†å­˜æ”¾åˆ°Listä¸­ã€‚\n\nBeanHandlerï¼šå°†ç»“æœé›†ä¸­çš„ç¬¬ä¸€è¡Œæ•°æ®å°è£…åˆ°ä¸€ä¸ªå¯¹åº”çš„JavaBeanå®ä¾‹ä¸­ã€‚\n\nBeanListHandlerï¼šå°†ç»“æœé›†ä¸­çš„æ¯ä¸€è¡Œæ•°æ®éƒ½å°è£…åˆ°ä¸€ä¸ªå¯¹åº”çš„JavaBeanå®ä¾‹ä¸­ï¼Œå­˜æ”¾åˆ°Listé‡Œã€‚\n\nColumnListHandlerï¼šå°†ç»“æœé›†ä¸­æŸä¸€åˆ—çš„æ•°æ®å­˜æ”¾åˆ°Listä¸­ã€‚\n\nKeyedHandler(name)ï¼šå°†ç»“æœé›†ä¸­çš„æ¯ä¸€è¡Œæ•°æ®éƒ½å°è£…åˆ°ä¸€ä¸ªMapé‡Œï¼Œå†æŠŠè¿™äº›mapå†å­˜åˆ°ä¸€ä¸ªmapé‡Œï¼Œå…¶keyä¸ºæŒ‡å®šçš„keyã€‚\n\nMapHandlerï¼šå°†ç»“æœé›†ä¸­çš„ç¬¬ä¸€è¡Œæ•°æ®å°è£…åˆ°ä¸€ä¸ªMapé‡Œï¼Œkeyæ˜¯åˆ—åï¼Œvalueå°±æ˜¯å¯¹åº”çš„å€¼ã€‚\n\nMapListHandlerï¼šå°†ç»“æœé›†ä¸­çš„æ¯ä¸€è¡Œæ•°æ®éƒ½å°è£…åˆ°ä¸€ä¸ªMapé‡Œï¼Œç„¶åå†å­˜æ”¾åˆ°List\n\nScalarHandlerï¼šæŸ¥è¯¢å•ä¸ªå€¼å¯¹è±¡\n\n\n\n\n\næµ‹è¯•\n\n/*\n * æµ‹è¯•æŸ¥è¯¢:æŸ¥è¯¢ä¸€æ¡è®°å½•\n * \n * ä½¿ç”¨ResultSetHandlerçš„å®ç°ç±»ï¼šBeanHandler\n */\n@Test\npublic void testQueryInstance() throws Exception{\n\tQueryRunner runner = new QueryRunner();\n\n\tConnection conn = JDBCUtils.getConnection3();\n\t\t\n\tString sql = \"select id,name,email,birth from customers where id = ?\";\n\t\t\n\t//\n\tBeanHandler&lt;Customer&gt; handler = new BeanHandler&lt;&gt;(Customer.class);\n\tCustomer customer = runner.query(conn, sql, handler, 23);\n\tSystem.out.println(customer);\t\n\tJDBCUtils.closeResource(conn, null);\n}\n/*\n * æµ‹è¯•æŸ¥è¯¢:æŸ¥è¯¢å¤šæ¡è®°å½•æ„æˆçš„é›†åˆ\n * \n * ä½¿ç”¨ResultSetHandlerçš„å®ç°ç±»ï¼šBeanListHandler\n */\n@Test\npublic void testQueryList() throws Exception{\n\tQueryRunner runner = new QueryRunner();\n\n\tConnection conn = JDBCUtils.getConnection3();\n\t\t\n\tString sql = \"select id,name,email,birth from customers where id &lt; ?\";\n\t\t\n\t//\n\tBeanListHandler&lt;Customer&gt; handler = new BeanListHandler&lt;&gt;(Customer.class);\n\tList&lt;Customer&gt; list = runner.query(conn, sql, handler, 23);\n\tlist.forEach(System.out::println);\n\t\t\n\tJDBCUtils.closeResource(conn, null);\n}\n/*\n * è‡ªå®šä¹‰ResultSetHandlerçš„å®ç°ç±»\n */\n@Test\npublic void testQueryInstance1() throws Exception{\n\tQueryRunner runner = new QueryRunner();\n\n\tConnection conn = JDBCUtils.getConnection3();\n\t\t\n\tString sql = \"select id,name,email,birth from customers where id = ?\";\n\t\t\n\tResultSetHandler&lt;Customer&gt; handler = new ResultSetHandler&lt;Customer&gt;() {\n\n\t\t@Override\n\t\tpublic Customer handle(ResultSet rs) throws SQLException {\n\t\t\tSystem.out.println(\"handle\");\n//\t\t\treturn new Customer(1,\"Tom\",\"tom@126.com\",new Date(123323432L));\n\t\t\t\t\n\t\t\tif(rs.next()){\n\t\t\t\tint id = rs.getInt(\"id\");\n\t\t\t\tString name = rs.getString(\"name\");\n\t\t\t\tString email = rs.getString(\"email\");\n\t\t\t\tDate birth = rs.getDate(\"birth\");\n\t\t\t\t\t\n\t\t\t\treturn new Customer(id, name, email, birth);\n\t\t\t}\n\t\t\treturn null;\n\t\t\t\t\n\t\t}\n\t};\n\t\t\n\tCustomer customer = runner.query(conn, sql, handler, 23);\n\t\t\n\tSystem.out.println(customer);\n\t\t\n\tJDBCUtils.closeResource(conn, null);\n}\n/*\n * å¦‚ä½•æŸ¥è¯¢ç±»ä¼¼äºæœ€å¤§çš„ï¼Œæœ€å°çš„ï¼Œå¹³å‡çš„ï¼Œæ€»å’Œï¼Œä¸ªæ•°ç›¸å…³çš„æ•°æ®ï¼Œ\n * ä½¿ç”¨ScalarHandler\n * \n */\n@Test\npublic void testQueryValue() throws Exception{\n\tQueryRunner runner = new QueryRunner();\n\n\tConnection conn = JDBCUtils.getConnection3();\n\t\t\n\t//æµ‹è¯•ä¸€ï¼š\n//\tString sql = \"select count(*) from customers where id &lt; ?\";\n//\tScalarHandler handler = new ScalarHandler();\n//\tlong count = (long) runner.query(conn, sql, handler, 20);\n//\tSystem.out.println(count);\n\t\t\n\t//æµ‹è¯•äºŒï¼š\n\tString sql = \"select max(birth) from customers\";\n\tScalarHandler handler = new ScalarHandler();\n\tDate birth = (Date) runner.query(conn, sql, handler);\n\tSystem.out.println(birth);\n\t\t\n\tJDBCUtils.closeResource(conn, null);\n}\nJDBCæ€»ç»“æ€»ç»“\n@Test\npublic void testUpdateWithTx() {\n\t\t\n\tConnection conn = null;\n\ttry {\n\t\t//1.è·å–è¿æ¥çš„æ“ä½œï¼ˆ\n\t\t//â‘  æ‰‹å†™çš„è¿æ¥ï¼šJDBCUtils.getConnection();\n\t\t//â‘¡ ä½¿ç”¨æ•°æ®åº“è¿æ¥æ± ï¼šC3P0;DBCP;Druid\n\t\t//2.å¯¹æ•°æ®è¡¨è¿›è¡Œä¸€ç³»åˆ—CRUDæ“ä½œ\n\t\t//â‘  ä½¿ç”¨PreparedStatementå®ç°é€šç”¨çš„å¢åˆ æ”¹ã€æŸ¥è¯¢æ“ä½œï¼ˆversion 1.0 \\ version 2.0)\n//version2.0çš„å¢åˆ æ”¹public void update(Connection conn,String sql,Object ... args){}\n//version2.0çš„æŸ¥è¯¢ public &lt;T&gt; T getInstance(Connection conn,Class&lt;T&gt; clazz,String sql,Object ... args){}\n\t\t//â‘¡ ä½¿ç”¨dbutilsæä¾›çš„jaråŒ…ä¸­æä¾›çš„QueryRunnerç±»\n\t\t\t\n\t\t//æäº¤æ•°æ®\n\t\tconn.commit();\n\t\t\t\n\t\n\t} catch (Exception e) {\n\t\te.printStackTrace();\n\t\t\t\n\t\t\t\n\t\ttry {\n\t\t\t//å›æ»šæ•°æ®\n\t\t\tconn.rollback();\n\t\t} catch (SQLException e1) {\n\t\t\te1.printStackTrace();\n\t\t}\n\t\t\t\n\t}finally{\n\t\t//3.å…³é—­è¿æ¥ç­‰æ“ä½œ\n\t\t//â‘  JDBCUtils.closeResource();\n\t\t//â‘¡ ä½¿ç”¨dbutilsæä¾›çš„jaråŒ…ä¸­æä¾›çš„DbUtilsç±»æä¾›äº†å…³é—­çš„ç›¸å…³æ“ä½œ\n\t\t\t\n\t}\n}\n","slug":"J8-JDBC","date":"2021-11-25T12:03:14.000Z","categories_index":"JAVA","tags_index":"java","author_index":"YFR718"},{"id":"31b2ee58f98c3235a398e6dd8f51555c","title":"Hbase","content":"","slug":"B7-Hbase","date":"2021-11-19T13:59:53.000Z","categories_index":"æ•°æ®åº“","tags_index":"Hive","author_index":"YFR718"},{"id":"82053cc328c59fdc49cec929f76fa81d","title":"ç¼–ç¨‹é”™è¯¯é”¦é›†","content":"1111111111111111111111\n\n\n\n\n\n\n\næ³¨æ„\n\n\n\n\n\n\n\n\n\nç‰¹åˆ«æ³¨æ„\n\n\nHashMapæ–¹æ³•çš„é”™è¯¯\nif(ha.containKey(target-nums[i])){\nreturn new int[]{ha.get(target-nums[i]),i};\n}\n\n\n\n\n\n\n\n containsKey()\næ–¹æ³•åéƒ½èƒ½å†™é”™ï¼Œå°‘ä¸€ä¸ªsï¼\n\n\npublic int myAtoi(String s) {\n\tif(f==-1 &amp;&amp; ans&lt;(-Math.pow(2,31)-x)/10) return (int)-Math.pow(2,31);\n\t...\n\n\n\n\n\n\n\n\n incompatible types : possible 1 ossy conversi on from double to int\nè¿”å›å€¼ä¸ºintï¼Œå¿…é¡»å¼ºåˆ¶ç±»å‹è½¬æ¢\n\n\nList&lt;List&lt;Integer&gt;&gt; ans = new List&lt;List&lt;Integer&gt;&gt;();//é”™è¯¯\n\n\n\n\n\n\n\n å³è¾¹åº”ä¸ºArraylist\nList&lt;List&lt;Integer&gt;&gt; ans = new ArrayList&lt;List&lt;Integer&gt;&gt;();\n\n\n\n\n\n\n\n\n\ndfsä¸­è¦æ·±å¤åˆ¶ï¼Œå¦åˆ™åé¢å›æº¯ç»“æœä¸ºç©º\n//if(sums == target) ans.add(ls);\nif(sums == target) ans.add(new ArrayList&lt;Integer&gt;(ls));\n\n\n\n\n\n\n\n\n\näºŒç»´Listå®šä¹‰é—®é¢˜\n//List&lt;List&lt;Integer&gt;&gt; ans = new ArrayList&lt;ArrayList&lt;Integer&gt;&gt;();\nList&lt;List&lt;Integer&gt;&gt; ans = new ArrayList&lt;List&lt;Integer&gt;&gt;();\n\n\n","slug":"J7-ç¼–ç¨‹é”™è¯¯é”¦é›†","date":"2021-11-18T08:55:03.000Z","categories_index":"JAVA","tags_index":"","author_index":"YFR718"},{"id":"5703ea14901e0d80ea4ba70122c1bc16","title":"B6.HiveåŸºç¡€","content":"1. Hive åŸºæœ¬æ¦‚å¿µ1.1 Hiveæ¦‚è¿°â€‹        Hiveï¼šç”± Facebook å¼€æºç”¨äºè§£å†³æµ·é‡ç»“æ„åŒ–æ—¥å¿—çš„æ•°æ®ç»Ÿè®¡å·¥å…·ã€‚â€‹        Hive æ˜¯åŸºäº Hadoop çš„ä¸€ä¸ªæ•°æ®ä»“åº“å·¥å…·ï¼Œå¯ä»¥å°†ç»“æ„åŒ–çš„æ•°æ®æ–‡ä»¶æ˜ å°„ä¸ºä¸€å¼ è¡¨ï¼Œå¹¶æä¾›ç±» SQL æŸ¥è¯¢åŠŸèƒ½ã€‚\nHive æœ¬è´¨ï¼šå°† HQL è½¬åŒ–æˆ MapReduce ç¨‹åº\n\nï¼ˆ1ï¼‰Hive å¤„ç†çš„æ•°æ®å­˜å‚¨åœ¨ HDFSï¼ˆ2ï¼‰Hive åˆ†ææ•°æ®åº•å±‚çš„å®ç°æ˜¯ MapReduceï¼ˆ3ï¼‰æ‰§è¡Œç¨‹åºè¿è¡Œåœ¨ Yarn ä¸Š\nHiveä¼˜ç‚¹ï¼š\n\næ“ä½œæ¥å£é‡‡ç”¨ç±» SQL è¯­æ³•ï¼Œæä¾›å¿«é€Ÿå¼€å‘çš„èƒ½åŠ›ï¼ˆç®€å•ã€å®¹æ˜“ä¸Šæ‰‹ï¼‰ã€‚\né¿å…äº†å»å†™ MapReduceï¼Œå‡å°‘å¼€å‘äººå‘˜çš„å­¦ä¹ æˆæœ¬ã€‚ \nHive çš„æ‰§è¡Œå»¶è¿Ÿæ¯”è¾ƒé«˜ï¼Œå› æ­¤ Hive å¸¸ç”¨äºæ•°æ®åˆ†æï¼Œå¯¹å®æ—¶æ€§è¦æ±‚ä¸é«˜çš„åœºåˆã€‚ \nHive ä¼˜åŠ¿åœ¨äºå¤„ç†å¤§æ•°æ®ï¼Œå¯¹äºå¤„ç†å°æ•°æ®æ²¡æœ‰ä¼˜åŠ¿ï¼Œå› ä¸º Hive çš„æ‰§è¡Œå»¶è¿Ÿæ¯”è¾ƒé«˜ã€‚\nHive æ”¯æŒç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°ï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚æ¥å®ç°è‡ªå·±çš„å‡½æ•°ã€‚\n\nHiveç¼ºç‚¹ï¼š\n\nHive çš„ HQL è¡¨è¾¾èƒ½åŠ›æœ‰é™\nè¿­ä»£å¼ç®—æ³•æ— æ³•è¡¨è¾¾\næ•°æ®æŒ–æ˜æ–¹é¢ä¸æ“…é•¿ï¼Œç”±äº MapReduce æ•°æ®å¤„ç†æµç¨‹çš„é™åˆ¶ï¼Œæ•ˆç‡æ›´é«˜çš„ç®—æ³•å´æ— æ³•å®ç°ã€‚\n\n\nHive çš„æ•ˆç‡æ¯”è¾ƒä½\nHive è‡ªåŠ¨ç”Ÿæˆçš„ MapReduce ä½œä¸šï¼Œé€šå¸¸æƒ…å†µä¸‹ä¸å¤Ÿæ™ºèƒ½åŒ–\nHive è°ƒä¼˜æ¯”è¾ƒå›°éš¾ï¼Œç²’åº¦è¾ƒç²—\n\n\n\n1.2 Hiveæ¶æ„åŸç†\n\nç”¨æˆ·æ¥å£ï¼šClientCLIï¼ˆcommand-line interfaceï¼‰ã€JDBC/ODBC(jdbc è®¿é—® hive)ã€WEBUIï¼ˆæµè§ˆå™¨è®¿é—® hiveï¼‰\nå…ƒæ•°æ®ï¼šMetastoreå…ƒæ•°æ®åŒ…æ‹¬ï¼šè¡¨åã€è¡¨æ‰€å±çš„æ•°æ®åº“ï¼ˆé»˜è®¤æ˜¯ defaultï¼‰ã€è¡¨çš„æ‹¥æœ‰è€…ã€åˆ—/åˆ†åŒºå­—æ®µã€è¡¨çš„ç±»å‹ï¼ˆæ˜¯å¦æ˜¯å¤–éƒ¨è¡¨ï¼‰ã€è¡¨çš„æ•°æ®æ‰€åœ¨ç›®å½•ç­‰ï¼›é»˜è®¤å­˜å‚¨åœ¨è‡ªå¸¦çš„ derby æ•°æ®åº“ä¸­ï¼Œæ¨èä½¿ç”¨ MySQL å­˜å‚¨ Metastore\nHadoopä½¿ç”¨ HDFS è¿›è¡Œå­˜å‚¨ï¼Œä½¿ç”¨ MapReduce è¿›è¡Œè®¡ç®—ã€‚\né©±åŠ¨å™¨ï¼šDriverï¼ˆ1ï¼‰è§£æå™¨ï¼ˆSQL Parserï¼‰ï¼šå°† SQL å­—ç¬¦ä¸²è½¬æ¢æˆæŠ½è±¡è¯­æ³•æ ‘ ASTï¼Œè¿™ä¸€æ­¥ä¸€èˆ¬éƒ½ç”¨ç¬¬ä¸‰æ–¹å·¥å…·åº“å®Œæˆï¼Œæ¯”å¦‚ antlrï¼›å¯¹ AST è¿›è¡Œè¯­æ³•åˆ†æï¼Œæ¯”å¦‚è¡¨æ˜¯å¦å­˜åœ¨ã€å­—æ®µæ˜¯å¦å­˜åœ¨ã€SQLè¯­ä¹‰æ˜¯å¦æœ‰è¯¯ã€‚ï¼ˆ2ï¼‰ç¼–è¯‘å™¨ï¼ˆPhysical Planï¼‰ï¼šå°† AST ç¼–è¯‘ç”Ÿæˆé€»è¾‘æ‰§è¡Œè®¡åˆ’ã€‚ï¼ˆ3ï¼‰ä¼˜åŒ–å™¨ï¼ˆQuery Optimizerï¼‰ï¼šå¯¹é€»è¾‘æ‰§è¡Œè®¡åˆ’è¿›è¡Œä¼˜åŒ–ã€‚ï¼ˆ4ï¼‰æ‰§è¡Œå™¨ï¼ˆExecutionï¼‰ï¼šæŠŠé€»è¾‘æ‰§è¡Œè®¡åˆ’è½¬æ¢æˆå¯ä»¥è¿è¡Œçš„ç‰©ç†è®¡åˆ’ã€‚å¯¹äº Hive æ¥è¯´ï¼Œå°±æ˜¯ MR/Sparkã€‚\n\n\nâ€‹        Hive é€šè¿‡ç»™ç”¨æˆ·æä¾›çš„ä¸€ç³»åˆ—äº¤äº’æ¥å£ï¼Œæ¥æ”¶åˆ°ç”¨æˆ·çš„æŒ‡ä»¤(SQL)ï¼Œä½¿ç”¨è‡ªå·±çš„ Driverï¼Œç»“åˆå…ƒæ•°æ®(MetaStore)ï¼Œå°†è¿™äº›æŒ‡ä»¤ç¿»è¯‘æˆ MapReduceï¼Œæäº¤åˆ° Hadoop ä¸­æ‰§è¡Œï¼Œæœ€åï¼Œå°†æ‰§è¡Œè¿”å›çš„ç»“æœè¾“å‡ºåˆ°ç”¨æˆ·äº¤äº’æ¥å£ã€‚\n1.3  Hive å’Œæ•°æ®åº“æ¯”è¾ƒ\næŸ¥è¯¢è¯­è¨€ç”±äº SQL è¢«å¹¿æ³›çš„åº”ç”¨åœ¨æ•°æ®ä»“åº“ä¸­ï¼Œå› æ­¤ï¼Œä¸“é—¨é’ˆå¯¹ Hive çš„ç‰¹æ€§è®¾è®¡äº†ç±» SQL çš„æŸ¥è¯¢è¯­è¨€ HQLã€‚ç†Ÿæ‚‰ SQL å¼€å‘çš„å¼€å‘è€…å¯ä»¥å¾ˆæ–¹ä¾¿çš„ä½¿ç”¨ Hive è¿›è¡Œå¼€å‘ã€‚\næ•°æ®æ›´æ–°ç”±äº Hive æ˜¯é’ˆå¯¹æ•°æ®ä»“åº“åº”ç”¨è®¾è®¡çš„ï¼Œè€Œæ•°æ®ä»“åº“çš„å†…å®¹æ˜¯è¯»å¤šå†™å°‘çš„ã€‚å› æ­¤ï¼ŒHive ä¸­ ä¸å»ºè®®å¯¹æ•°æ®çš„æ”¹å†™ï¼Œæ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯åœ¨åŠ è½½çš„æ—¶å€™ç¡®å®šå¥½çš„ã€‚è€Œæ•°æ®åº“ä¸­çš„æ•°æ®é€šå¸¸æ˜¯éœ€è¦ç»å¸¸è¿›è¡Œä¿®æ”¹çš„ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨ INSERT INTO â€¦ VALUES æ·»åŠ æ•°æ®ï¼Œä½¿ç”¨ UPDATE â€¦ SET ä¿®æ”¹æ•°æ®ã€‚\næ‰§è¡Œå»¶è¿ŸHive åœ¨æŸ¥è¯¢æ•°æ®çš„æ—¶å€™ï¼Œç”±äºæ²¡æœ‰ç´¢å¼•ï¼Œéœ€è¦æ‰«ææ•´ä¸ªè¡¨ï¼Œå› æ­¤å»¶è¿Ÿè¾ƒé«˜ã€‚å¦å¤–ä¸€ä¸ªå¯¼è‡´ Hive æ‰§è¡Œå»¶è¿Ÿé«˜çš„å› ç´ æ˜¯ MapReduce æ¡†æ¶ã€‚ç”±äº MapReduce æœ¬èº«å…·æœ‰è¾ƒé«˜çš„å»¶è¿Ÿï¼Œå› æ­¤åœ¨åˆ©ç”¨ MapReduce æ‰§è¡Œ Hive æŸ¥è¯¢æ—¶ï¼Œä¹Ÿä¼šæœ‰è¾ƒé«˜çš„å»¶è¿Ÿã€‚ç›¸å¯¹çš„ï¼Œæ•°æ®åº“çš„æ‰§è¡Œå»¶è¿Ÿè¾ƒä½ã€‚å½“ç„¶ï¼Œè¿™ä¸ªä½æ˜¯æœ‰æ¡ä»¶çš„ï¼Œå³æ•°æ®è§„æ¨¡è¾ƒå°ï¼Œå½“æ•°æ®è§„æ¨¡å¤§åˆ°è¶…è¿‡æ•°æ®åº“çš„å¤„ç†èƒ½åŠ›çš„æ—¶å€™ï¼ŒHive çš„å¹¶è¡Œè®¡ç®—æ˜¾ç„¶èƒ½ä½“ç°å‡ºä¼˜åŠ¿ã€‚\næ•°æ®è§„æ¨¡ç”±äº Hive å»ºç«‹åœ¨é›†ç¾¤ä¸Šå¹¶å¯ä»¥åˆ©ç”¨ MapReduce è¿›è¡Œå¹¶è¡Œè®¡ç®—ï¼Œå› æ­¤å¯ä»¥æ”¯æŒå¾ˆå¤§è§„æ¨¡çš„æ•°æ®ï¼›å¯¹åº”çš„ï¼Œæ•°æ®åº“å¯ä»¥æ”¯æŒçš„æ•°æ®è§„æ¨¡è¾ƒå°ã€‚\n\n2. Hive å®‰è£…2.1  Hive å®‰è£…åœ°å€1ï¼‰Hive å®˜ç½‘åœ°å€ï¼šhttp://hive.apache.org/2ï¼‰æ–‡æ¡£æŸ¥çœ‹åœ°å€ï¼šhttps://cwiki.apache.org/confluence/display/Hive/GettingStarted3ï¼‰ä¸‹è½½åœ°å€ï¼šhttp://archive.apache.org/dist/hive/4ï¼‰github åœ°å€ï¼šhttps://github.com/apache/hive\n2.2 Hive å®‰è£…éƒ¨ç½²å®‰è£… Hive1ï¼‰æŠŠ apache-hive-3.1.2-bin.tar.gz ä¸Šä¼ åˆ° linux çš„/opt/software ç›®å½•ä¸‹2ï¼‰è§£å‹ apache-hive-3.1.2-bin.tar.gz åˆ°/opt/module/ç›®å½•ä¸‹é¢\n[atguigu@hadoop102 software]$ tar -zxvf /opt/software/apache-hive-3.1.2-bin.tar.gz -C /opt/module/\n3ï¼‰ä¿®æ”¹ apache-hive-3.1.2-bin.tar.gz çš„åç§°ä¸º hive\n[atguigu@hadoop102 software]$ mv /opt/module/apache-hive-3.1.2-bin/ /opt/module/hive\n4ï¼‰ä¿®æ”¹/etc/profile.d/my_env.shï¼Œæ·»åŠ ç¯å¢ƒå˜é‡\n[atguigu@hadoop102 software]$ sudo vim /etc/profile.d/my_env.sh\n5ï¼‰æ·»åŠ å†…å®¹\n#HIVE_HOME\nexport HIVE_HOME=/opt/module/hive\nexport PATH=$PATH:$HIVE_HOME/bin\n6ï¼‰è§£å†³æ—¥å¿— Jar åŒ…å†²çª\n[atguigu@hadoop102 software]$ mv $HIVE_HOME/lib/log4j-slf4j-impl-2.10.0.jar $HIVE_HOME/lib/log4j-slf4j-impl-2.10.0.bak\n7ï¼‰åˆå§‹åŒ–å…ƒæ•°æ®åº“\n[atguigu@hadoop102 hive]$ bin/schematool -dbType derby -initSchema\nå¯åŠ¨å¹¶ä½¿ç”¨ Hive# 1ï¼‰å¯åŠ¨ Hive\n[atguigu@hadoop102 hive]$ bin/hive\n# 2ï¼‰ä½¿ç”¨ Hive\nhive&gt; show databases;\nhive&gt; show tables;\nhive&gt; create table test(id int);\nhive&gt; insert into test values(1);\nhive&gt; select * from test; \n# 3ï¼‰åœ¨ CRT çª—å£ä¸­å¼€å¯å¦ä¸€ä¸ªçª—å£å¼€å¯ Hiveï¼Œåœ¨/tmp/atguigu ç›®å½•ä¸‹ç›‘æ§ hive.log æ–‡ä»¶\nCaused by: ERROR XSDB6: Another instance of Derby may have already booted \nthe database /opt/module/hive/metastore_db.\n at \norg.apache.derby.iapi.error.StandardException.newException(Unknown \nSource)\n at \norg.apache.derby.iapi.error.StandardException.newException(Unknown\n\nSource)\n at \norg.apache.derby.impl.store.raw.data.BaseDataFileFactory.privGetJBMSLockO\nnDB(Unknown Source)\n at \norg.apache.derby.impl.store.raw.data.BaseDataFileFactory.run(Unknown \nSource)\n...\n#åŸå› åœ¨äº Hive é»˜è®¤ä½¿ç”¨çš„å…ƒæ•°æ®åº“ä¸º derbyï¼Œå¼€å¯ Hive ä¹‹åå°±ä¼šå ç”¨å…ƒæ•°æ®åº“ï¼Œä¸”ä¸ä¸å…¶ä»–å®¢æˆ·ç«¯å…±äº«æ•°æ®ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å°† Hive çš„å…ƒæ•°æ®åœ°å€æ”¹ä¸º MySQLã€‚\n2.3 MySQL å®‰è£…1ï¼‰æ£€æŸ¥å½“å‰ç³»ç»Ÿæ˜¯å¦å®‰è£…è¿‡ MySQL\n[atguigu@hadoop102 ~]$ rpm -qa|grep mariadb\nmariadb-libs-5.5.56-2.el7.x86_64 \n//å¦‚æœå­˜åœ¨é€šè¿‡å¦‚ä¸‹å‘½ä»¤å¸è½½\n[atguigu @hadoop102 ~]$ sudo rpm -e --nodeps mariadb-libs\n2ï¼‰å°† MySQL å®‰è£…åŒ…æ‹·è´åˆ°/opt/software ç›®å½•ä¸‹\n[atguigu @hadoop102 software]# ll\næ€»ç”¨é‡ 528384\n-rw-r--r--. 1 root root 609556480 3 æœˆ 21 15:41 mysql-5.7.28-1.el7.x86_64.rpm-bundle.tar\n3ï¼‰è§£å‹ MySQL å®‰è£…åŒ…\n[atguigu @hadoop102 software]# tar -xf mysql-5.7.28-1.el7.x86_64.rpm bundle.tar\n4ï¼‰åœ¨å®‰è£…ç›®å½•ä¸‹æ‰§è¡Œ rpm å®‰è£…\n[atguigu @hadoop102 software]$ \nsudo rpm -ivh mysql-community-common-5.7.28-1.el7.x86_64.rpm\nsudo rpm -ivh mysql-community-libs-5.7.28-1.el7.x86_64.rpm\nsudo rpm -ivh mysql-community-libs-compat-5.7.28-1.el7.x86_64.rpm\nsudo rpm -ivh mysql-community-client-5.7.28-1.el7.x86_64.rpm\nsudo rpm -ivh mysql-community-server-5.7.28-1.el7.x86_64.rpm\næ³¨æ„:æŒ‰ç…§é¡ºåºä¾æ¬¡æ‰§è¡Œå¦‚æœ Linux æ˜¯æœ€å°åŒ–å®‰è£…çš„ï¼Œåœ¨å®‰è£… mysql-community-server-5.7.28-1.el7.x86_64.rpm æ—¶å¯èƒ½ä¼šå‡ºç°å¦‚ä¸‹é”™è¯¯\n[atguigu@hadoop102 software]$ sudo rpm -ivh mysql-community-server-5.7.281.el7.x86_64.rpm\nè­¦å‘Šï¼šmysql-community-server-5.7.28-1.el7.x86_64.rpm: å¤´ V3 DSA/SHA1 Signature, å¯†é’¥ ID 5072e1f5: NOKEY\né”™è¯¯ï¼šä¾èµ–æ£€æµ‹å¤±è´¥ï¼š\n libaio.so.1()(64bit) è¢« mysql-community-server-5.7.28-1.el7.x86_64 éœ€è¦\n libaio.so.1(LIBAIO_0.1)(64bit) è¢« mysql-community-server-5.7.28-1.el7.x86_64 éœ€è¦\n libaio.so.1(LIBAIO_0.4)(64bit) è¢« mysql-community-server-5.7.28-1.el7.x86_64 éœ€è¦\né€šè¿‡ yum å®‰è£…ç¼ºå°‘çš„ä¾èµ–,ç„¶åé‡æ–°å®‰è£… mysql-community-server-5.7.28-1.el7.x86_64 å³å¯\n[atguigu@hadoop102 software] yum install -y libaio\n5ï¼‰åˆ é™¤/etc/my.cnf æ–‡ä»¶ä¸­ datadir æŒ‡å‘çš„ç›®å½•ä¸‹çš„æ‰€æœ‰å†…å®¹,å¦‚æœæœ‰å†…å®¹çš„æƒ…å†µä¸‹: æŸ¥çœ‹ datadir çš„å€¼ï¼š\n[mysqld]\ndatadir=/var/lib/mysql\n åˆ é™¤/var/lib/mysql ç›®å½•ä¸‹çš„æ‰€æœ‰å†…å®¹: \n[atguigu @hadoop102 mysql]# cd /var/lib/mysql\n[atguigu @hadoop102 mysql]# sudo rm -rf ./* //æ³¨æ„æ‰§è¡Œå‘½ä»¤çš„ä½ç½®\n6ï¼‰åˆå§‹åŒ–æ•°æ®åº“\n[atguigu @hadoop102 opt]$ sudo mysqld --initialize --user=mysql\n7ï¼‰æŸ¥çœ‹ä¸´æ—¶ç”Ÿæˆçš„ root ç”¨æˆ·çš„å¯†ç \n[atguigu @hadoop102 opt]$ sudo cat /var/log/mysqld.log \n8ï¼‰å¯åŠ¨ MySQL æœåŠ¡\n[atguigu @hadoop102 opt]$ sudo systemctl start mysqld\n9ï¼‰ç™»å½• MySQL æ•°æ®åº“\n[atguigu @hadoop102 opt]$â€‹ mysql -uroot -p\nEnter password: è¾“å…¥ä¸´æ—¶ç”Ÿæˆçš„å¯†ç \n ç™»å½•æˆåŠŸ.\n10ï¼‰å¿…é¡»å…ˆä¿®æ”¹ root ç”¨æˆ·çš„å¯†ç ,å¦åˆ™æ‰§è¡Œå…¶ä»–çš„æ“ä½œä¼šæŠ¥é”™\nmysql&gt; set password = password(\"æ–°å¯†ç \");\n11ï¼‰ä¿®æ”¹ mysql åº“ä¸‹çš„ user è¡¨ä¸­çš„ root ç”¨æˆ·å…è®¸ä»»æ„ ip è¿æ¥\nmysql&gt; update mysql.user set host='%' where user='root';\nmysql&gt; flush privileges;\n2.4 Hive å…ƒæ•°æ®é…ç½®åˆ° MySQLæ‹·è´é©±åŠ¨å°† MySQL çš„ JDBC é©±åŠ¨æ‹·è´åˆ° Hive çš„ lib ç›®å½•ä¸‹\n[atguigu@hadoop102 software]$ cp /opt/software/mysql-connector-java-5.1.37.jar $HIVE_HOME/lib\né…ç½® Metastore åˆ° MySQL1ï¼‰åœ¨HIVE_HOME/conf ç›®å½•ä¸‹æ–°å»º hive-site.xml æ–‡ä»¶\n[atguigu@hadoop102 software]$ vim $HIVE_HOME/conf/hive-site.xml\næ·»åŠ å¦‚ä¸‹å†…å®¹\n&lt;?xml version=\"1.0\"?&gt;\n&lt;?xml-stylesheet type=\"text/xsl\" href=\"configuration.xsl\"?&gt;\n&lt;configuration&gt;\n &lt;!-- jdbc è¿æ¥çš„ URL --&gt;\n &lt;property&gt;\n &lt;name&gt;javax.jdo.option.ConnectionURL&lt;/name&gt;\n &lt;value&gt;jdbc:mysql://hadoop102:3306/metastore?useSSL=false&lt;/value&gt;\n&lt;/property&gt;\n &lt;!-- jdbc è¿æ¥çš„ Driver--&gt;\n &lt;property&gt;\n &lt;name&gt;javax.jdo.option.ConnectionDriverName&lt;/name&gt;\n &lt;value&gt;com.mysql.jdbc.Driver&lt;/value&gt;\n&lt;/property&gt;\n&lt;!-- jdbc è¿æ¥çš„ username--&gt;\n &lt;property&gt;\n &lt;name&gt;javax.jdo.option.ConnectionUserName&lt;/name&gt;\n &lt;value&gt;root&lt;/value&gt;\n &lt;/property&gt;\n &lt;!-- jdbc è¿æ¥çš„ password --&gt;\n &lt;property&gt;\n &lt;name&gt;javax.jdo.option.ConnectionPassword&lt;/name&gt;\n &lt;value&gt;000000&lt;/value&gt;\n&lt;/property&gt;\n &lt;!-- Hive å…ƒæ•°æ®å­˜å‚¨ç‰ˆæœ¬çš„éªŒè¯ --&gt;\n &lt;property&gt;\n &lt;name&gt;hive.metastore.schema.verification&lt;/name&gt;\n &lt;value&gt;false&lt;/value&gt;\n&lt;/property&gt;\n &lt;!--å…ƒæ•°æ®å­˜å‚¨æˆæƒ--&gt;\n &lt;property&gt;\n &lt;name&gt;hive.metastore.event.db.notification.api.auth&lt;/name&gt;\n &lt;value&gt;false&lt;/value&gt;\n &lt;/property&gt;\n &lt;!-- Hive é»˜è®¤åœ¨ HDFS çš„å·¥ä½œç›®å½• --&gt;\n &lt;property&gt;\n&lt;name&gt;hive.metastore.warehouse.dir&lt;/name&gt;\n &lt;value&gt;/user/hive/warehouse&lt;/value&gt;\n &lt;/property&gt;\n&lt;/configuration&gt; \n2ï¼‰ç™»é™† MySQL\n[atguigu@hadoop102 software]$ mysql -uroot -p000000\n3ï¼‰æ–°å»º Hive å…ƒæ•°æ®åº“\nmysql&gt; create database metastore;\nmysql&gt; quit;\n4ï¼‰ åˆå§‹åŒ– Hive å…ƒæ•°æ®åº“\n[atguigu@hadoop102 software]$ schematool -initSchema -dbType mysql -verbose\nå†æ¬¡å¯åŠ¨ Hive1ï¼‰å¯åŠ¨ Hive\n[atguigu@hadoop102 hive]$ bin/hive\n2ï¼‰ä½¿ç”¨ Hive\nhive&gt; show databases;\nhive&gt; show tables;\nhive&gt; create table test (id int);\nhive&gt; insert into test values(1);\nhive&gt; select * from test; 3ï¼‰åœ¨ CRT çª—å£ä¸­å¼€å¯å¦ä¸€ä¸ªçª—å£å¼€å¯ Hive\nhive&gt; show databases;\nhive&gt; show tables;\nhive&gt; select * from aa;\n2.5 ä½¿ç”¨å…ƒæ•°æ®æœåŠ¡çš„æ–¹å¼è®¿é—® Hive1ï¼‰åœ¨ hive-site.xml æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ä¿¡æ¯\n&lt;!-- æŒ‡å®šå­˜å‚¨å…ƒæ•°æ®è¦è¿æ¥çš„åœ°å€ --&gt;\n&lt;property&gt;\n&lt;name&gt;hive.metastore.uris&lt;/name&gt;\n&lt;value&gt;thrift://hadoop102:9083&lt;/value&gt;\n&lt;/property&gt;\n2ï¼‰å¯åŠ¨ metastore\n[atguigu@hadoop202 hive]$ hive --service metastore\n2020-04-24 16:58:08: Starting Hive Metastore Server\næ³¨æ„: å¯åŠ¨åçª—å£ä¸èƒ½å†æ“ä½œï¼Œéœ€æ‰“å¼€ä¸€ä¸ªæ–°çš„ shell çª—å£åšåˆ«çš„æ“ä½œ3ï¼‰å¯åŠ¨ hive\n[atguigu@hadoop202 hive]$ bin/hive\n2.6 ä½¿ç”¨ JDBC æ–¹å¼è®¿é—® Hive1ï¼‰åœ¨ hive-site.xml æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ä¿¡æ¯\n&lt;!-- æŒ‡å®š hiveserver2 è¿æ¥çš„ host --&gt;\n&lt;property&gt;\n    &lt;name&gt;hive.server2.thrift.bind.host&lt;/name&gt;\n    &lt;value&gt;hadoop102&lt;/value&gt;\n&lt;/property&gt;\n&lt;!-- æŒ‡å®š hiveserver2 è¿æ¥çš„ç«¯å£å· --&gt;\n&lt;property&gt;\n    &lt;name&gt;hive.server2.thrift.port&lt;/name&gt;\n    &lt;value&gt;10000&lt;/value&gt;\n&lt;/property&gt;\n2ï¼‰å¯åŠ¨ hiveserver2\n[atguigu@hadoop102 hive]$ bin/hive --service hiveserver2\n3ï¼‰å¯åŠ¨ beeline å®¢æˆ·ç«¯ï¼ˆéœ€è¦å¤šç­‰å¾…ä¸€ä¼šï¼‰\n[atguigu@hadoop102 hive]$ bin/beeline -u jdbc:hive2://hadoop102:10000 -n atguigu\n4ï¼‰çœ‹åˆ°å¦‚ä¸‹ç•Œé¢\nConnecting to jdbc:hive2://hadoop102:10000\nConnected to: Apache Hive (version 3.1.2)\nDriver: Hive JDBC (version 3.1.2)\nTransaction isolation: TRANSACTION_REPEATABLE_READ\nBeeline version 3.1.2 by Apache Hive\n0: jdbc:hive2://hadoop102:10000&gt;\n5ï¼‰ç¼–å†™ hive æœåŠ¡å¯åŠ¨è„šæœ¬ï¼ˆäº†è§£ï¼‰\n\nå‰å°å¯åŠ¨çš„æ–¹å¼å¯¼è‡´éœ€è¦æ‰“å¼€å¤šä¸ª shell çª—å£ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹å¼åå°æ–¹å¼å¯åŠ¨nohup: æ”¾åœ¨å‘½ä»¤å¼€å¤´ï¼Œè¡¨ç¤ºä¸æŒ‚èµ·,ä¹Ÿå°±æ˜¯å…³é—­ç»ˆç«¯è¿›ç¨‹ä¹Ÿç»§ç»­ä¿æŒè¿è¡ŒçŠ¶æ€/dev/nullï¼šæ˜¯ Linux æ–‡ä»¶ç³»ç»Ÿä¸­çš„ä¸€ä¸ªæ–‡ä»¶ï¼Œè¢«ç§°ä¸ºé»‘æ´ï¼Œæ‰€æœ‰å†™å…¥æ”¹æ–‡ä»¶çš„å†…å®¹éƒ½ä¼šè¢«è‡ªåŠ¨ä¸¢å¼ƒ2&gt;&amp;1 : è¡¨ç¤ºå°†é”™è¯¯é‡å®šå‘åˆ°æ ‡å‡†è¾“å‡ºä¸Š&amp;: æ”¾åœ¨å‘½ä»¤ç»“å°¾,è¡¨ç¤ºåå°è¿è¡Œä¸€èˆ¬ä¼šç»„åˆä½¿ç”¨: nohup [xxx å‘½ä»¤æ“ä½œ]&gt; file 2&gt;&amp;1 &amp;ï¼Œè¡¨ç¤ºå°† xxx å‘½ä»¤è¿è¡Œçš„ç»“æœè¾“å‡ºåˆ° file ä¸­ï¼Œå¹¶ä¿æŒå‘½ä»¤å¯åŠ¨çš„è¿›ç¨‹åœ¨åå°è¿è¡Œã€‚å¦‚ä¸Šå‘½ä»¤ä¸è¦æ±‚æŒæ¡ã€‚\n[atguigu@hadoop202 hive]$ nohup hive --service metastore 2&gt;&amp;1 &amp;\n[atguigu@hadoop202 hive]$ nohup hive --service hiveserver2 2&gt;&amp;1 &amp;\n\nä¸ºäº†æ–¹ä¾¿ä½¿ç”¨ï¼Œå¯ä»¥ç›´æ¥ç¼–å†™è„šæœ¬æ¥ç®¡ç†æœåŠ¡çš„å¯åŠ¨å’Œå…³é—­\n[atguigu@hadoop102 hive]$ vim $HIVE_HOME/bin/hiveservices.sh\nå†…å®¹å¦‚ä¸‹ï¼šæ­¤è„šæœ¬çš„ç¼–å†™ä¸è¦æ±‚æŒæ¡ã€‚ç›´æ¥æ‹¿æ¥ä½¿ç”¨å³å¯ã€‚\n#!/bin/bash\nHIVE_LOG_DIR=$HIVE_HOME/logs\nif [ ! -d $HIVE_LOG_DIR ]\nthen\n\tmkdir -p $HIVE_LOG_DIR\nfi#æ£€æŸ¥è¿›ç¨‹æ˜¯å¦è¿è¡Œæ­£å¸¸ï¼Œå‚æ•° 1 ä¸ºè¿›ç¨‹åï¼Œå‚æ•° 2 ä¸ºè¿›ç¨‹ç«¯å£\nfunction check_process(){\n\tpid=$(ps -ef 2&gt;/dev/null | grep -v grep | grep -i $1 | awk '{print $2}')\n\tppid=$(netstat -nltp 2&gt;/dev/null | grep $2 | awk '{print $7}' | cut -d '/' -f 1)\n\techo $pid\n\t[[ \"$pid\" =~ \"$ppid\" ]] &amp;&amp; [ \"$ppid\" ] &amp;&amp; return 0 || return 1\n}\nfunction hive_start(){\n\tmetapid=$(check_process HiveMetastore 9083)\n\tcmd=\"nohup hive --service metastore &gt;$HIVE_LOG_DIR/metastore.log 2&gt;&amp;1 &amp;\"\n\t[ -z \"$metapid\" ] &amp;&amp; eval $cmd || echo \"Metastroe æœåŠ¡å·²å¯åŠ¨\"\n\tserver2pid=$(check_process HiveServer2 10000)\n\tcmd=\"nohup hiveserver2 &gt;$HIVE_LOG_DIR/hiveServer2.log 2&gt;&amp;1 &amp;\"\n\t[ -z \"$server2pid\" ] &amp;&amp; eval $cmd || echo \"HiveServer2 æœåŠ¡å·²å¯åŠ¨\" \n}\n\nfunction hive_stop(){\n\tmetapid=$(check_process HiveMetastore 9083)\n\t[ \"$metapid\" ] &amp;&amp; kill $metapid || echo \"Metastore æœåŠ¡æœªå¯åŠ¨\"\n\tserver2pid=$(check_process HiveServer2 10000)\n\t[ \"$server2pid\" ] &amp;&amp; kill $server2pid || echo \"HiveServer2 æœåŠ¡æœªå¯åŠ¨\" \n}\ncase $1 in\n\"start\")\n\thive_start\n\t;;\n\"stop\")\n\thive_stop\n\t;;\n\"restart\")\n\thive_stop\n\tsleep 2\n\thive_start\n\t;;\n\"status\")\n\tcheck_process HiveMetastore 9083 &gt;/dev/null &amp;&amp; echo \"Metastore æœåŠ¡è¿è¡Œæ­£å¸¸\" || echo \"Metastore æœåŠ¡è¿è¡Œå¼‚å¸¸\"\n\tcheck_process HiveServer2 10000 &gt;/dev/null &amp;&amp; echo \"HiveServer2 æœåŠ¡è¿è¡Œæ­£å¸¸\" || echo \"HiveServer2 æœåŠ¡è¿è¡Œå¼‚å¸¸\"\n\t;;\n*)\n\techo Invalid Args!\n\techo 'Usage: '$(basename $0)' start|stop|restart|status'\n\t;;\nesac\n3ï¼‰æ·»åŠ æ‰§è¡Œæƒé™\n[atguigu@hadoop102 hive]$ chmod +x $HIVE_HOME/bin/hiveservices.sh\n4ï¼‰å¯åŠ¨ Hive åå°æœåŠ¡\n[atguigu@hadoop102 hive]$ hiveservices.sh start\n\n\n2.7 Hive å¸¸ç”¨äº¤äº’å‘½ä»¤[atguigu@hadoop102 hive]$ bin/hive -help\nusage: hive\n-d,--define &lt;key=value&gt; Variable subsitution to apply to hive\n commands. e.g. -d A=B or --define A=B\n --database &lt;databasename&gt; Specify the database to use\n-e &lt;quoted-query-string&gt; SQL from command line\n-f &lt;filename&gt; SQL from files\n-H,--help Print help information\n --hiveconf &lt;property=value&gt; Use value for given property\n --hivevar &lt;key=value&gt; Variable subsitution to apply to hive\n commands. e.g. --hivevar A=B\n-i &lt;filename&gt; Initialization SQL file\n-S,--silent Silent mode in interactive shell\n-v,--verbose Verbose mode (echo executed SQL to the \nconsole)\n\nâ€œ-eâ€ä¸è¿›å…¥ hive çš„äº¤äº’çª—å£æ‰§è¡Œ sql è¯­å¥\n\n[atguigu@hadoop102 hive]$ bin/hive -e \"select id from student;\"\n\nâ€œ-fâ€æ‰§è¡Œè„šæœ¬ä¸­ sql è¯­å¥ï¼ˆ1ï¼‰åœ¨/opt/module/hive/ä¸‹åˆ›å»º datas ç›®å½•å¹¶åœ¨ datas ç›®å½•ä¸‹åˆ›å»º hivef.sql æ–‡ä»¶\n[atguigu@hadoop102 datas]$ touch hivef.sql\nï¼ˆ2ï¼‰æ–‡ä»¶ä¸­å†™å…¥æ­£ç¡®çš„ sql è¯­å¥\nselect *from student;\nï¼ˆ3ï¼‰æ‰§è¡Œæ–‡ä»¶ä¸­çš„ sql è¯­å¥\n[atguigu@hadoop102 hive]$ bin/hive -f /opt/module/hive/datas/hivef.sql\nï¼ˆ4ï¼‰æ‰§è¡Œæ–‡ä»¶ä¸­çš„ sql è¯­å¥å¹¶å°†ç»“æœå†™å…¥æ–‡ä»¶ä¸­\n[atguigu@hadoop102 hive]$ bin/hive -f /opt/module/hive/datas/hivef.sql &gt; /opt/module/datas/hive_result.txt\n\n\n2.8 Hive å…¶ä»–å‘½ä»¤æ“ä½œ1ï¼‰é€€å‡º hive çª—å£ï¼š\nhive(default)&gt;exit;\nhive(default)&gt;quit;\n2ï¼‰åœ¨ hive cli å‘½ä»¤çª—å£ä¸­å¦‚ä½•æŸ¥çœ‹ hdfs æ–‡ä»¶ç³»ç»Ÿ\nhive(default)&gt;dfs -ls /;\n3ï¼‰æŸ¥çœ‹åœ¨ hive ä¸­è¾“å…¥çš„æ‰€æœ‰å†å²å‘½ä»¤ï¼ˆ1ï¼‰è¿›å…¥åˆ°å½“å‰ç”¨æˆ·çš„æ ¹ç›®å½• /root æˆ–/home/atguiguï¼ˆ2ï¼‰æŸ¥çœ‹. hivehistory æ–‡ä»¶\n[atguig2u@hadoop102 ~]$ cat .hivehistory\n2.9 Hive å¸¸è§å±æ€§é…ç½®Hive è¿è¡Œæ—¥å¿—ä¿¡æ¯é…ç½®1ï¼‰Hive çš„ log é»˜è®¤å­˜æ”¾åœ¨/tmp/atguigu/hive.log ç›®å½•ä¸‹ï¼ˆå½“å‰ç”¨æˆ·åä¸‹ï¼‰2ï¼‰ä¿®æ”¹ hive çš„ log å­˜æ”¾æ—¥å¿—åˆ°/opt/module/hive/logsï¼ˆ1ï¼‰ä¿®æ”¹/opt/module/hive/conf/hive-log4j2.properties.template æ–‡ä»¶åç§°ä¸ºhive-log4j2.properties\n[atguigu@hadoop102 conf]$ pwd\n/opt/module/hive/conf\n[atguigu@hadoop102 conf]$ mv hive-log4j2.properties.template hive log4j2.properties\nï¼ˆ2ï¼‰åœ¨ hive-log4j2.properties æ–‡ä»¶ä¸­ä¿®æ”¹ log å­˜æ”¾ä½ç½®\nhive.log.dir=/opt/module/hive/logs\n2.9.2 æ‰“å° å½“å‰åº“ å’Œ è¡¨å¤´åœ¨ hive-site.xml ä¸­åŠ å…¥å¦‚ä¸‹ä¸¤ä¸ªé…ç½®:\n&lt;property&gt;\n&lt;name&gt;hive.cli.print.header&lt;/name&gt;\n&lt;value&gt;true&lt;/value&gt;\n&lt;/property&gt;\n&lt;property&gt;\n&lt;name&gt;hive.cli.print.current.db&lt;/name&gt;\n&lt;value&gt;true&lt;/value&gt;\n&lt;/property&gt;\n2.9.3 å‚æ•°é…ç½®æ–¹å¼1ï¼‰æŸ¥çœ‹å½“å‰æ‰€æœ‰çš„é…ç½®ä¿¡æ¯hive&gt;set;2ï¼‰å‚æ•°çš„é…ç½®ä¸‰ç§æ–¹å¼ï¼ˆ1ï¼‰é…ç½®æ–‡ä»¶æ–¹å¼é»˜è®¤é…ç½®æ–‡ä»¶ï¼šhive-default.xmlç”¨æˆ·è‡ªå®šä¹‰é…ç½®æ–‡ä»¶ï¼šhive-site.xmlæ³¨æ„ï¼šç”¨æˆ·è‡ªå®šä¹‰é…ç½®ä¼šè¦†ç›–é»˜è®¤é…ç½®ã€‚å¦å¤–ï¼ŒHive ä¹Ÿä¼šè¯»å…¥ Hadoop çš„é…ç½®ï¼Œå› ä¸º Hiveæ˜¯ä½œä¸º Hadoop çš„å®¢æˆ·ç«¯å¯åŠ¨çš„ï¼ŒHive çš„é…ç½®ä¼šè¦†ç›– Hadoop çš„é…ç½®ã€‚é…ç½®æ–‡ä»¶çš„è®¾å®šå¯¹æœ¬æœºå¯åŠ¨çš„æ‰€æœ‰ Hive è¿›ç¨‹éƒ½æœ‰æ•ˆã€‚ï¼ˆ2ï¼‰å‘½ä»¤è¡Œå‚æ•°æ–¹å¼å¯åŠ¨ Hive æ—¶ï¼Œå¯ä»¥åœ¨å‘½ä»¤è¡Œæ·»åŠ -hiveconf param=value æ¥è®¾å®šå‚æ•°ã€‚\n[atguigu@hadoop103 hive]$ bin/hive -hiveconf mapred.reduce.tasks=10;\næ³¨æ„ï¼šä»…å¯¹æœ¬æ¬¡ hive å¯åŠ¨æœ‰æ•ˆæŸ¥çœ‹å‚æ•°è®¾ç½®ï¼š\nhive (default)&gt; set mapred.reduce.tasks;\nï¼ˆ3ï¼‰å‚æ•°å£°æ˜æ–¹å¼å¯ä»¥åœ¨ HQL ä¸­ä½¿ç”¨ SET å…³é”®å­—è®¾å®šå‚æ•°\nhive (default)&gt; set mapred.reduce.tasks=100;\næ³¨æ„ï¼šä»…å¯¹æœ¬æ¬¡ hive å¯åŠ¨æœ‰æ•ˆã€‚æŸ¥çœ‹å‚æ•°è®¾ç½®\nhive (default)&gt; set mapred.reduce.tasks;\nâ€‹        ä¸Šè¿°ä¸‰ç§è®¾å®šæ–¹å¼çš„ä¼˜å…ˆçº§ä¾æ¬¡é€’å¢ã€‚å³é…ç½®æ–‡ä»¶&lt;å‘½ä»¤è¡Œå‚æ•°&lt;å‚æ•°å£°æ˜ã€‚æ³¨æ„æŸäº›ç³»ç»Ÿçº§çš„å‚æ•°ï¼Œä¾‹å¦‚ log4j ç›¸å…³çš„è®¾å®šï¼Œå¿…é¡»ç”¨å‰ä¸¤ç§æ–¹å¼è®¾å®šï¼Œå› ä¸ºé‚£äº›å‚æ•°çš„è¯»å–åœ¨ä¼šè¯å»ºç«‹ä»¥å‰å·²ç»å®Œæˆäº†ã€‚\n3. Hive æ•°æ®ç±»å‹3.1 åŸºæœ¬æ•°æ®ç±»å‹\n\n\n\nHiveæ•°æ®ç±»å‹\nJavaæ•°æ®ç±»å‹\né•¿åº¦\nä¾‹å­\n\n\n\n\nTINYINT\nbyte\n1byteæœ‰ç¬¦å·æ•´æ•°\n20\n\n\nSMALINT\nshort\n2byteæœ‰ç¬¦å·æ•´æ•°\n20\n\n\nINT\nint\n4byteæœ‰ç¬¦å·æ•´æ•°\n20\n\n\nBIG INT\nlong\n8byteæœ‰ç¬¦å·æ•´æ•°\n20\n\n\nBOOL EAN\nboolean\nå¸ƒå°”ç±»å‹ï¼Œtrueæˆ–è€…false\nTRUE FALSE\n\n\nFLOAT\nfloat\nå•ç²¾åº¦æµ®ç‚¹æ•°\n3.14159\n\n\nDOUBLE\ndouble\nåŒç²¾åº¦æµ®ç‚¹æ•°\n3.14159\n\n\nSTRING\nstring\nå­—ç¬¦ç³»åˆ—ã€‚å¯ä»¥æŒ‡å®šå­—ç¬¦é›†ã€‚å¯ä»¥ä½¿ç”¨å•å¼•å·æˆ–è€…åŒå¼•å·ã€‚\n\n\n\nTIMESTAMP\n\næ—¶é—´ç±»å‹\n\n\n\nBINARY\n\nå­—èŠ‚æ•°ç»„\n\n\n\n\nâ€‹        å¯¹äº Hive çš„ String ç±»å‹ç›¸å½“äºæ•°æ®åº“çš„ varchar ç±»å‹ï¼Œè¯¥ç±»å‹æ˜¯ä¸€ä¸ªå¯å˜çš„å­—ç¬¦ä¸²ï¼Œä¸è¿‡å®ƒä¸èƒ½å£°æ˜å…¶ä¸­æœ€å¤šèƒ½å­˜å‚¨å¤šå°‘ä¸ªå­—ç¬¦ï¼Œç†è®ºä¸Šå®ƒå¯ä»¥å­˜å‚¨ 2GB çš„å­—ç¬¦æ•°ã€‚\n3.2 é›†åˆæ•°æ®ç±»å‹\n\n\n\næ•°æ®ç±»å‹\næè¿°\nè¯­æ³•ç¤ºä¾‹\n\n\n\n\nSTRUCT\nå’Œ c è¯­è¨€ä¸­çš„ struct ç±»ä¼¼ï¼Œéƒ½å¯ä»¥é€šè¿‡â€œç‚¹â€ç¬¦å·è®¿é—®å…ƒç´ å†…å®¹ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæŸä¸ªåˆ—çš„æ•°æ®ç±»å‹æ˜¯ STRUCT{first STRING, last STRING},é‚£ä¹ˆç¬¬ 1 ä¸ªå…ƒç´ å¯ä»¥é€šè¿‡å­—æ®µ.first æ¥å¼•ç”¨ã€‚\nstruct\n\n\nMAP\nMAP æ˜¯ä¸€ç»„é”®-å€¼å¯¹å…ƒç»„é›†åˆï¼Œä½¿ç”¨æ•°ç»„è¡¨ç¤ºæ³•å¯ä»¥è®¿é—®æ•°æ®ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæŸä¸ªåˆ—çš„æ•°æ®ç±»å‹æ˜¯ MAPï¼Œå…¶ä¸­é”®-&gt;å€¼å¯¹æ˜¯â€™firstâ€™-&gt;â€™Johnâ€™å’Œâ€™lastâ€™-&gt;â€™Doeâ€™ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡å­—æ®µå[â€˜lastâ€™]è·å–æœ€åä¸€ä¸ªå…ƒç´ \nmap\n\n\nARRAY\næ•°ç»„æ˜¯ä¸€ç»„å…·æœ‰ç›¸åŒç±»å‹å’Œåç§°çš„å˜é‡çš„é›†åˆã€‚è¿™äº›å˜é‡ç§°ä¸ºæ•°ç»„çš„å…ƒç´ ï¼Œæ¯ä¸ªæ•°ç»„å…ƒç´ éƒ½æœ‰ä¸€ä¸ªç¼–å·ï¼Œç¼–å·ä»é›¶å¼€å§‹ã€‚ä¾‹å¦‚ï¼Œæ•°ç»„å€¼ä¸º[â€˜Johnâ€™, â€˜Doeâ€™]ï¼Œé‚£ä¹ˆç¬¬ 2 ä¸ªå…ƒç´ å¯ä»¥é€šè¿‡æ•°ç»„å[1]è¿›è¡Œå¼•ç”¨ã€‚\narray\n\n\n\n\nâ€‹        Hive æœ‰ä¸‰ç§å¤æ‚æ•°æ®ç±»å‹ ARRAYã€MAP å’Œ STRUCTã€‚ARRAY å’Œ MAP ä¸ Java ä¸­çš„ Arrayå’Œ Map ç±»ä¼¼ï¼Œè€Œ STRUCT ä¸ C è¯­è¨€ä¸­çš„ Struct ç±»ä¼¼ï¼Œå®ƒå°è£…äº†ä¸€ä¸ªå‘½åå­—æ®µé›†åˆï¼Œå¤æ‚æ•°æ®ç±»å‹å…è®¸ä»»æ„å±‚æ¬¡çš„åµŒå¥—ã€‚\næ¡ˆä¾‹å®æ“\n\nå‡è®¾æŸè¡¨æœ‰å¦‚ä¸‹ä¸€è¡Œï¼Œæˆ‘ä»¬ç”¨ JSON æ ¼å¼æ¥è¡¨ç¤ºå…¶æ•°æ®ç»“æ„ã€‚åœ¨ Hive ä¸‹è®¿é—®çš„æ ¼å¼ä¸º\n{\n    \"name\": \"songsong\",\n    \"friends\": [\"bingbing\" , \"lili\"] , //åˆ—è¡¨ Array, \n    \"children\": { //é”®å€¼ Map,\n        \"xiao song\": 18 ,\n        \"xiaoxiao song\": 19\n    }\n    \"address\": { //ç»“æ„ Struct,\n        \"street\": \"hui long guan\",\n        \"city\": \"beijing\"\n    } \n}\n\nåŸºäºä¸Šè¿°æ•°æ®ç»“æ„ï¼Œæˆ‘ä»¬åœ¨ Hive é‡Œåˆ›å»ºå¯¹åº”çš„è¡¨ï¼Œå¹¶å¯¼å…¥æ•°æ®ã€‚åˆ›å»ºæœ¬åœ°æµ‹è¯•æ–‡ä»¶ test.txt\nsongsong,bingbing_lili,xiao song:18_xiaoxiao song:19,hui long \nguan_beijing\nyangyang,caicai_susu,xiao yang:18_xiaoxiao yang:19,chao yang_beijing\næ³¨æ„ï¼šMAPï¼ŒSTRUCT å’Œ ARRAY é‡Œçš„å…ƒç´ é—´å…³ç³»éƒ½å¯ä»¥ç”¨åŒä¸€ä¸ªå­—ç¬¦è¡¨ç¤ºï¼Œè¿™é‡Œç”¨â€œ_â€ã€‚ \n\nHive ä¸Šåˆ›å»ºæµ‹è¯•è¡¨ test\ncreate table test(\n    name string,\n    friends array&lt;string&gt;,\n    children map&lt;string, int&gt;,\n    address struct&lt;street:string, city:string&gt; \n)\nrow format delimited fields terminated by ',' #åˆ—åˆ†éš”ç¬¦\ncollection items terminated by '_' #MAP STRUCT å’Œ ARRAY çš„åˆ†éš”ç¬¦(æ•°æ®åˆ†å‰²ç¬¦å·)\nmap keys terminated by ':' #MAP ä¸­çš„ key ä¸ value çš„åˆ†éš”ç¬¦\nlines terminated by '\\n'; #è¡Œåˆ†éš”ç¬¦\n\nå¯¼å…¥æ–‡æœ¬æ•°æ®åˆ°æµ‹è¯•è¡¨load data local inpath â€˜/opt/module/hive/datas/test.txtâ€™ into table test;\n\nè®¿é—®ä¸‰ç§é›†åˆåˆ—é‡Œçš„æ•°æ®ï¼Œä»¥ä¸‹åˆ†åˆ«æ˜¯ ARRAYï¼ŒMAPï¼ŒSTRUCT çš„è®¿é—®æ–¹å¼\nhive (default)&gt; select friends[1],children['xiao song'],address.city from \ntest\nwhere name=\"songsong\";\nOK\n_c0 _c1 city\nlili 18 beijing\nTime taken: 0.076 seconds, Fetched: 1 row(s)\n\n\n3.3 ç±»å‹è½¬åŒ–â€‹        Hive çš„åŸå­æ•°æ®ç±»å‹æ˜¯å¯ä»¥è¿›è¡Œéšå¼è½¬æ¢çš„ï¼Œç±»ä¼¼äº Java çš„ç±»å‹è½¬æ¢ï¼Œä¾‹å¦‚æŸè¡¨è¾¾å¼ä½¿ç”¨ INT ç±»å‹ï¼ŒTINYINT ä¼šè‡ªåŠ¨è½¬æ¢ä¸º INT ç±»å‹ï¼Œä½†æ˜¯ Hive ä¸ä¼šè¿›è¡Œåå‘è½¬åŒ–ï¼Œä¾‹å¦‚ï¼ŒæŸè¡¨è¾¾å¼ä½¿ç”¨ TINYINT ç±»å‹ï¼ŒINT ä¸ä¼šè‡ªåŠ¨è½¬æ¢ä¸º TINYINT ç±»å‹ï¼Œå®ƒä¼šè¿”å›é”™è¯¯ï¼Œé™¤éä½¿ç”¨ CASTæ“ä½œã€‚éšå¼ç±»å‹è½¬æ¢è§„åˆ™å¦‚ä¸‹\n\nä»»ä½•æ•´æ•°ç±»å‹éƒ½å¯ä»¥éšå¼åœ°è½¬æ¢ä¸ºä¸€ä¸ªèŒƒå›´æ›´å¹¿çš„ç±»å‹ï¼Œå¦‚ TINYINT å¯ä»¥è½¬æ¢æˆINTï¼ŒINT å¯ä»¥è½¬æ¢æˆ BIGINTã€‚\næ‰€æœ‰æ•´æ•°ç±»å‹ã€FLOAT å’Œ STRING ç±»å‹éƒ½å¯ä»¥éšå¼åœ°è½¬æ¢æˆ DOUBLEã€‚\nTINYINTã€SMALLINTã€INT éƒ½å¯ä»¥è½¬æ¢ä¸º FLOATã€‚\nBOOLEAN ç±»å‹ä¸å¯ä»¥è½¬æ¢ä¸ºä»»ä½•å…¶å®ƒçš„ç±»å‹ã€‚\n\nå¯ä»¥ä½¿ç”¨ CAST æ“ä½œæ˜¾ç¤ºè¿›è¡Œæ•°æ®ç±»å‹è½¬æ¢        ä¾‹å¦‚ CAST(â€˜1â€™ AS INT)å°†æŠŠå­—ç¬¦ä¸²â€™1â€™ è½¬æ¢æˆæ•´æ•° 1ï¼›å¦‚æœå¼ºåˆ¶ç±»å‹è½¬æ¢å¤±è´¥ï¼Œå¦‚æ‰§è¡ŒCAST(â€˜Xâ€™ AS INT)ï¼Œè¡¨è¾¾å¼è¿”å›ç©ºå€¼ NULLã€‚\n0: jdbc:hive2://hadoop102:10000&gt; select '1'+2, cast('1'as int) + 2;\n+------+------+--+\n| _c0 | _c1 |\n+------+------+--+\n| 3.0 | 3 |\n+------+------+--+\n4. DDL æ•°æ®å®šä¹‰4.1 åˆ›å»ºæ•°æ®åº“CREATE DATABASE [IF NOT EXISTS] database_name\n[COMMENT database_comment]\n[LOCATION hdfs_path]\n[WITH DBPROPERTIES (property_name=property_value, ...)];\n1ï¼‰åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ï¼Œæ•°æ®åº“åœ¨ HDFS ä¸Šçš„é»˜è®¤å­˜å‚¨è·¯å¾„æ˜¯/user/hive/warehouse/*.dbã€‚\nhive (default)&gt; create database db_hive;\n2ï¼‰é¿å…è¦åˆ›å»ºçš„æ•°æ®åº“å·²ç»å­˜åœ¨é”™è¯¯ï¼Œå¢åŠ  if not exists åˆ¤æ–­ã€‚ï¼ˆæ ‡å‡†å†™æ³•ï¼‰\nhive (default)&gt; create database db_hive;\nFAILED: Execution Error, return code 1 from \norg.apache.hadoop.hive.ql.exec.DDLTask. Database db_hive already exists\nhive (default)&gt; create database if not exists db_hive;\n3ï¼‰åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ï¼ŒæŒ‡å®šæ•°æ®åº“åœ¨ HDFS ä¸Šå­˜æ”¾çš„ä½ç½®\nhive (default)&gt; create database db_hive2 location '/db_hive2.db';\n4.2 æŸ¥è¯¢æ•°æ®åº“æ˜¾ç¤ºæ•°æ®åº“1ï¼‰æ˜¾ç¤ºæ•°æ®åº“\nhive&gt; show databases;\n2ï¼‰è¿‡æ»¤æ˜¾ç¤ºæŸ¥è¯¢çš„æ•°æ®åº“\nhive&gt; show databases like 'db_hive*';\nOK\ndb_hive\ndb_hive_1\n æŸ¥çœ‹æ•°æ®åº“è¯¦æƒ…1ï¼‰æ˜¾ç¤ºæ•°æ®åº“ä¿¡æ¯\nhive&gt; desc database db_hive;\nOK\ndb_hive hdfs://hadoop102:9820/user/hive/warehouse/db_hive.db\natguiguUSER\n2ï¼‰æ˜¾ç¤ºæ•°æ®åº“è¯¦ç»†ä¿¡æ¯ï¼Œextended\nhive&gt; desc database extended db_hive;\nOK\ndb_hive hdfs://hadoop102:9820/user/hive/warehouse/db_hive.db\natguiguUSER\n4.2.3 åˆ‡æ¢å½“å‰æ•°æ®åº“\nhive (default)&gt; use db_hive;\n4.3 ä¿®æ”¹æ•°æ®åº“â€‹        ç”¨æˆ·å¯ä»¥ä½¿ç”¨ ALTER DATABASE å‘½ä»¤ä¸ºæŸä¸ªæ•°æ®åº“çš„ DBPROPERTIES è®¾ç½®é”®-å€¼å¯¹å±æ€§å€¼ï¼Œæ¥æè¿°è¿™ä¸ªæ•°æ®åº“çš„å±æ€§ä¿¡æ¯ã€‚\nhive (default)&gt; alter database db_hive \nset dbproperties('createtime'='20170830');\nâ€‹        åœ¨ hive ä¸­æŸ¥çœ‹ä¿®æ”¹ç»“æœ\nhive&gt; desc database extended db_hive;\ndb_name comment location owner_name owner_type parameters\ndb_hive hdfs://hadoop102:9820/user/hive/warehouse/db_hive.db \natguigu USER {createtime=20170830}\n4.4 åˆ é™¤æ•°æ®åº“1ï¼‰åˆ é™¤ç©ºæ•°æ®åº“\nhive&gt;drop database db_hive2;\n2ï¼‰å¦‚æœåˆ é™¤çš„æ•°æ®åº“ä¸å­˜åœ¨ï¼Œæœ€å¥½é‡‡ç”¨ if exists åˆ¤æ–­æ•°æ®åº“æ˜¯å¦å­˜åœ¨\nhive&gt; drop database db_hive;\nFAILED: SemanticException [Error 10072]: Database does not exist: db_hive\nhive&gt; drop database if exists db_hive2;\n3ï¼‰å¦‚æœæ•°æ®åº“ä¸ä¸ºç©ºï¼Œå¯ä»¥é‡‡ç”¨ cascade å‘½ä»¤ï¼Œå¼ºåˆ¶åˆ é™¤\nhive&gt; drop database db_hive;\nFAILED: Execution Error, return code 1 from \norg.apache.hadoop.hive.ql.exec.DDLTask. \nInvalidOperationException(message:Database db_hive is not empty. One or \nmore tables exist.)\nhive&gt; drop database db_hive cascade;\n4.5 åˆ›å»ºè¡¨1ï¼‰å»ºè¡¨è¯­æ³•\nCREATE [EXTERNAL] TABLE [IF NOT EXISTS] table_name\n[(col_name data_type [COMMENT col_comment], ...)]\n[COMMENT table_comment]\n[PARTITIONED BY (col_name data_type [COMMENT col_comment], ...)]\n[CLUSTERED BY (col_name, col_name, ...)\n[SORTED BY (col_name [ASC|DESC], ...)] INTO num_buckets BUCKETS]\n[ROW FORMAT row_format]\n[STORED AS file_format]\n[LOCATION hdfs_path]\n[TBLPROPERTIES (property_name=property_value, ...)]\n[AS select_statement]\n2ï¼‰å­—æ®µè§£é‡Šè¯´æ˜\n\nCREATE TABLE åˆ›å»ºä¸€ä¸ªæŒ‡å®šåå­—çš„è¡¨ã€‚å¦‚æœç›¸åŒåå­—çš„è¡¨å·²ç»å­˜åœ¨ï¼Œåˆ™æŠ›å‡ºå¼‚å¸¸ï¼›ç”¨æˆ·å¯ä»¥ç”¨ IF NOT EXISTS é€‰é¡¹æ¥å¿½ç•¥è¿™ä¸ªå¼‚å¸¸ã€‚\n\nEXTERNAL å…³é”®å­—å¯ä»¥è®©ç”¨æˆ·åˆ›å»ºä¸€ä¸ªå¤–éƒ¨è¡¨ï¼Œåœ¨å»ºè¡¨çš„åŒæ—¶å¯ä»¥æŒ‡å®šä¸€ä¸ªæŒ‡å‘å®é™…æ•°æ®çš„è·¯å¾„ï¼ˆLOCATIONï¼‰ï¼Œåœ¨åˆ é™¤è¡¨çš„æ—¶å€™ï¼Œå†…éƒ¨è¡¨çš„å…ƒæ•°æ®å’Œæ•°æ®ä¼šè¢«ä¸€èµ·åˆ é™¤ï¼Œè€Œå¤–éƒ¨è¡¨åªåˆ é™¤å…ƒæ•°æ®ï¼Œä¸åˆ é™¤æ•°æ®ã€‚ \n\nCOMMENTï¼šä¸ºè¡¨å’Œåˆ—æ·»åŠ æ³¨é‡Šã€‚\n\nPARTITIONED BY åˆ›å»ºåˆ†åŒºè¡¨\n\nCLUSTERED BY åˆ›å»ºåˆ†æ¡¶è¡¨\n\nSORTED BY ä¸å¸¸ç”¨ï¼Œå¯¹æ¡¶ä¸­çš„ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—å¦å¤–æ’åº\n\nROW FORMAT \nDELIMITED [FIELDS TERMINATED BY char] [COLLECTION ITEMS TERMINATED BY char]\n [MAP KEYS TERMINATED BY char] [LINES TERMINATED BY char]\n | SERDE serde_name [WITH SERDEPROPERTIES (property_name=property_value, \nproperty_name=property_value, ...)]\n\n\nâ€‹        ç”¨æˆ·åœ¨å»ºè¡¨çš„æ—¶å€™å¯ä»¥è‡ªå®šä¹‰ SerDe æˆ–è€…ä½¿ç”¨è‡ªå¸¦çš„ SerDeã€‚å¦‚æœæ²¡æœ‰æŒ‡å®š ROW FORMAT æˆ–è€… ROW FORMAT DELIMITEDï¼Œå°†ä¼šä½¿ç”¨è‡ªå¸¦çš„ SerDeã€‚åœ¨å»ºè¡¨çš„æ—¶å€™ï¼Œç”¨æˆ·è¿˜éœ€è¦ä¸ºè¡¨æŒ‡å®šåˆ—ï¼Œç”¨æˆ·åœ¨æŒ‡å®šè¡¨çš„åˆ—çš„åŒæ—¶ä¹Ÿä¼šæŒ‡å®šè‡ªå®šä¹‰çš„ SerDeï¼ŒHive é€šè¿‡ SerDe ç¡®å®šè¡¨çš„å…·ä½“çš„åˆ—çš„æ•°æ®ã€‚â€‹        SerDe æ˜¯ Serialize/Deserilize çš„ç®€ç§°ï¼Œ hive ä½¿ç”¨ Serde è¿›è¡Œè¡Œå¯¹è±¡çš„åºåˆ—ä¸ååºåˆ—åŒ–ã€‚\n\nSTORED AS æŒ‡å®šå­˜å‚¨æ–‡ä»¶ç±»å‹å¸¸ç”¨çš„å­˜å‚¨æ–‡ä»¶ç±»å‹ï¼šSEQUENCEFILEï¼ˆäºŒè¿›åˆ¶åºåˆ—æ–‡ä»¶ï¼‰ã€TEXTFILEï¼ˆæ–‡æœ¬ï¼‰ã€RCFILEï¼ˆåˆ—å¼å­˜å‚¨æ ¼å¼æ–‡ä»¶ï¼‰\n      å¦‚æœæ–‡ä»¶æ•°æ®æ˜¯çº¯æ–‡æœ¬ï¼Œå¯ä»¥ä½¿ç”¨STORED AS TEXTFILEã€‚å¦‚æœæ•°æ®éœ€è¦å‹ç¼©ï¼Œä½¿ç”¨ STORED \nAS SEQUENCEFILEã€‚\nLOCATION ï¼šæŒ‡å®šè¡¨åœ¨ HDFS ä¸Šçš„å­˜å‚¨ä½ç½®ã€‚\nASï¼šåè·ŸæŸ¥è¯¢è¯­å¥ï¼Œæ ¹æ®æŸ¥è¯¢ç»“æœåˆ›å»ºè¡¨ã€‚ \nLIKE å…è®¸ç”¨æˆ·å¤åˆ¶ç°æœ‰çš„è¡¨ç»“æ„ï¼Œä½†æ˜¯ä¸å¤åˆ¶æ•°æ®ã€‚\n\nç®¡ç†è¡¨1ï¼‰ç†è®º        é»˜è®¤åˆ›å»ºçš„è¡¨éƒ½æ˜¯æ‰€è°“çš„ç®¡ç†è¡¨ï¼Œæœ‰æ—¶ä¹Ÿè¢«ç§°ä¸ºå†…éƒ¨è¡¨ã€‚å› ä¸ºè¿™ç§è¡¨ï¼ŒHive ä¼šï¼ˆæˆ–å¤šæˆ–å°‘åœ°ï¼‰æ§åˆ¶ç€æ•°æ®çš„ç”Ÿå‘½å‘¨æœŸã€‚Hive é»˜è®¤æƒ…å†µä¸‹ä¼šå°†è¿™äº›è¡¨çš„æ•°æ®å­˜å‚¨åœ¨ç”±é…ç½®é¡¹hive.metastore.warehouse.dir (å¦‚ï¼Œ/user/hive/warehouse)æ‰€å®šä¹‰çš„ç›®å½•çš„å­ç›®å½•ä¸‹ã€‚å½“æˆ‘ä»¬åˆ é™¤ä¸€ä¸ªç®¡ç†è¡¨æ—¶ï¼ŒHive ä¹Ÿä¼šåˆ é™¤è¿™ä¸ªè¡¨ä¸­æ•°æ®ã€‚ç®¡ç†è¡¨ä¸é€‚åˆå’Œå…¶ä»–å·¥å…·å…±äº«æ•°æ®ã€‚2ï¼‰æ¡ˆä¾‹å®æ“ï¼ˆ0ï¼‰åŸå§‹æ•°æ®\n1001 ss1\n1002 ss2\n1003 ss3\n1004 ss4\n1005 ss5\n1006 ss6\n1007 ss7\n1008 ss8\n1009 ss9\n1010 ss10\n1011 ss11\n1012 ss12\n1013 ss13\n1014 ss14\n1015 ss15\n1016 ss16\nï¼ˆ1ï¼‰æ™®é€šåˆ›å»ºè¡¨\ncreate table if not exists student(\nid int, name string\n)\nrow format delimited fields terminated by '\\t'\nstored as textfile\nlocation '/user/hive/warehouse/student';\nï¼ˆ2ï¼‰æ ¹æ®æŸ¥è¯¢ç»“æœåˆ›å»ºè¡¨ï¼ˆæŸ¥è¯¢çš„ç»“æœä¼šæ·»åŠ åˆ°æ–°åˆ›å»ºçš„è¡¨ä¸­ï¼‰\ncreate table if not exists student2 as select id, name from student;\nï¼ˆ3ï¼‰æ ¹æ®å·²ç»å­˜åœ¨çš„è¡¨ç»“æ„åˆ›å»ºè¡¨\ncreate table if not exists student3 like student;\nï¼ˆ4ï¼‰æŸ¥è¯¢è¡¨çš„ç±»å‹\nhive (default)&gt; desc formatted student2;\nTable Type: MANAGED_TABLE\nå¤–éƒ¨è¡¨1ï¼‰ç†è®º        å› ä¸ºè¡¨æ˜¯å¤–éƒ¨è¡¨ï¼Œæ‰€ä»¥ Hive å¹¶éè®¤ä¸ºå…¶å®Œå…¨æ‹¥æœ‰è¿™ä»½æ•°æ®ã€‚åˆ é™¤è¯¥è¡¨å¹¶ä¸ä¼šåˆ é™¤æ‰è¿™ä»½æ•°æ®ï¼Œä¸è¿‡æè¿°è¡¨çš„å…ƒæ•°æ®ä¿¡æ¯ä¼šè¢«åˆ é™¤æ‰ã€‚2ï¼‰ç®¡ç†è¡¨å’Œå¤–éƒ¨è¡¨çš„ä½¿ç”¨åœºæ™¯        æ¯å¤©å°†æ”¶é›†åˆ°çš„ç½‘ç«™æ—¥å¿—å®šæœŸæµå…¥ HDFS æ–‡æœ¬æ–‡ä»¶ã€‚åœ¨å¤–éƒ¨è¡¨ï¼ˆåŸå§‹æ—¥å¿—è¡¨ï¼‰çš„åŸºç¡€ä¸Šåšå¤§é‡çš„ç»Ÿè®¡åˆ†æï¼Œç”¨åˆ°çš„ä¸­é—´è¡¨ã€ç»“æœè¡¨ä½¿ç”¨å†…éƒ¨è¡¨å­˜å‚¨ï¼Œæ•°æ®é€šè¿‡ SELECT+INSERT è¿›å…¥å†…éƒ¨è¡¨ã€‚3ï¼‰æ¡ˆä¾‹å®æ“        åˆ†åˆ«åˆ›å»ºéƒ¨é—¨å’Œå‘˜å·¥å¤–éƒ¨è¡¨ï¼Œå¹¶å‘è¡¨ä¸­å¯¼å…¥æ•°æ®ã€‚ï¼ˆ0ï¼‰åŸå§‹æ•°æ®dept:\n10 ACCOUNTING 1700\n20 RESEARCH 1800\n30 SALES 1900\n40 OPERATIONS 1700\nempï¼š\n7369 SMITH CLERK 7902 1980-12-17 800.00 20\n7499 ALLEN SALESMAN 7698 1981-2-20 1600.00 300.00 30\n7521 WARD SALESMAN 7698 1981-2-22 1250.00 500.00 30\n7566 JONES MANAGER 7839 1981-4-2 2975.00 20\n7654 MARTIN SALESMAN 7698 1981-9-28 1250.00 1400.00 30\n7698 BLAKE MANAGER 7839 1981-5-1 2850.00 30\n7782 CLARK MANAGER 7839 1981-6-9 2450.00 10\n7788 SCOTT ANALYST 7566 1987-4-19 3000.00 20\n7839 KING PRESIDENT 1981-11-17 5000.00 10\n7844 TURNER SALESMAN 7698 1981-9-8 1500.00 0.00 30\n7876 ADAMS CLERK 7788 1987-5-23 1100.00 20\n7900 JAMES CLERK 7698 1981-12-3 950.00 30\n7902 FORD ANALYST 7566 1981-12-3 3000.00 20\n7934 MILLER CLERK 7782 1982-1-23 1300.00 10\nï¼ˆ1ï¼‰ä¸Šä¼ æ•°æ®åˆ° HDFS\nhive (default)&gt; dfs -mkdir /student;\nhive (default)&gt; dfs -put /opt/module/datas/student.txt /student;\nï¼ˆ2ï¼‰å»ºè¡¨è¯­å¥ï¼Œåˆ›å»ºå¤–éƒ¨è¡¨åˆ›å»ºéƒ¨é—¨è¡¨\ncreate external table if not exists dept(\ndeptno int,\ndname string,\nloc int\n)\nrow format delimited fields terminated by '\\t';\nåˆ›å»ºå‘˜å·¥è¡¨\ncreate external table if not exists emp(\nempno int,\nename string,\njob string,\nmgr int,\nhiredate string,\nsal double,\ncomm double,\ndeptno int)\nrow format delimited fields terminated by '\\t';\nï¼ˆ3ï¼‰æŸ¥çœ‹åˆ›å»ºçš„è¡¨\nhive (default)&gt;show tables;\nï¼ˆ4ï¼‰æŸ¥çœ‹è¡¨æ ¼å¼åŒ–æ•°æ®\nhive (default)&gt; desc formatted dept;\nTable Type: EXTERNAL_TABLE\nï¼ˆ5ï¼‰åˆ é™¤å¤–éƒ¨è¡¨\nhive (default)&gt; drop table dept;\nå¤–éƒ¨è¡¨åˆ é™¤åï¼Œhdfs ä¸­çš„æ•°æ®è¿˜åœ¨ï¼Œä½†æ˜¯ metadata ä¸­ dept çš„å…ƒæ•°æ®å·²è¢«åˆ é™¤\nç®¡ç†è¡¨ä¸å¤–éƒ¨è¡¨çš„äº’ç›¸è½¬æ¢ï¼ˆ1ï¼‰æŸ¥è¯¢è¡¨çš„ç±»å‹\nhive (default)&gt; desc formatted student2;\nTable Type: MANAGED_TABLE\nï¼ˆ2ï¼‰ä¿®æ”¹å†…éƒ¨è¡¨ student2 ä¸ºå¤–éƒ¨è¡¨\nalter table student2 set tblproperties('EXTERNAL'='TRUE');\nï¼ˆ3ï¼‰æŸ¥è¯¢è¡¨çš„ç±»å‹\nhive (default)&gt; desc formatted student2;\nTable Type: EXTERNAL_TABLE\nï¼ˆ4ï¼‰ä¿®æ”¹å¤–éƒ¨è¡¨ student2 ä¸ºå†…éƒ¨è¡¨\nalter table student2 set tblproperties('EXTERNAL'='FALSE');\nï¼ˆ5ï¼‰æŸ¥è¯¢è¡¨çš„ç±»å‹\nhive (default)&gt; desc formatted student2;\nTable Type: MANAGED_TABLE\næ³¨æ„ï¼š(â€˜EXTERNALâ€™=â€™TRUEâ€™)å’Œ(â€˜EXTERNALâ€™=â€™FALSEâ€™)ä¸ºå›ºå®šå†™æ³•ï¼ŒåŒºåˆ†å¤§å°å†™ï¼ \n4.6 ä¿®æ”¹è¡¨é‡å‘½åè¡¨1ï¼‰è¯­æ³•\nALTER TABLE table_name RENAME TO new_table_name\n2ï¼‰å®æ“æ¡ˆä¾‹\nhive (default)&gt; alter table dept_partition2 rename to dept_partition3;\nå¢åŠ ã€ä¿®æ”¹å’Œåˆ é™¤è¡¨åˆ†åŒºè¯¦è§ 7.1 ç« åˆ†åŒºè¡¨åŸºæœ¬æ“ä½œã€‚\nå¢åŠ /ä¿®æ”¹/æ›¿æ¢åˆ—ä¿¡æ¯1ï¼‰è¯­æ³•ï¼ˆ1ï¼‰æ›´æ–°åˆ—\nALTER TABLE table_name CHANGE [COLUMN] col_old_name col_new_name \ncolumn_type [COMMENT col_comment] [FIRST|AFTER column_name]\nï¼ˆ2ï¼‰å¢åŠ å’Œæ›¿æ¢åˆ—\nALTER TABLE table_name ADD|REPLACE COLUMNS (col_name data_type [COMMENT \ncol_comment], ...) \næ³¨ï¼šADD æ˜¯ä»£è¡¨æ–°å¢ä¸€å­—æ®µï¼Œå­—æ®µä½ç½®åœ¨æ‰€æœ‰åˆ—åé¢(partition åˆ—å‰)ï¼ŒREPLACE åˆ™æ˜¯è¡¨ç¤ºæ›¿æ¢è¡¨ä¸­æ‰€æœ‰å­—æ®µã€‚2ï¼‰å®æ“æ¡ˆä¾‹ï¼ˆ1ï¼‰æŸ¥è¯¢è¡¨ç»“æ„\nhive&gt; desc dept;\nï¼ˆ2ï¼‰æ·»åŠ åˆ—\nhive (default)&gt; alter table dept add columns(deptdesc string);\nï¼ˆ3ï¼‰æŸ¥è¯¢è¡¨ç»“æ„\nhive&gt; desc dept;\nï¼ˆ4ï¼‰æ›´æ–°åˆ—\nhive (default)&gt; alter table dept change column deptdesc desc string; \nï¼ˆ5ï¼‰æŸ¥è¯¢è¡¨ç»“æ„\nhive&gt; desc dept;\nï¼ˆ6ï¼‰æ›¿æ¢åˆ—\nhive (default)&gt; alter table dept replace columns(deptno string, dname\nstring, loc string);\nï¼ˆ7ï¼‰æŸ¥è¯¢è¡¨ç»“æ„\nhive&gt; desc dept;\n4.7 åˆ é™¤è¡¨\nhive (default)&gt; drop table dept;\n5. DML æ•°æ®æ“ä½œ5.1 æ•°æ®å¯¼å…¥å‘è¡¨ä¸­è£…è½½æ•°æ®ï¼ˆLoadï¼‰ 1ï¼‰è¯­æ³•\nhive&gt; load data [local] inpath 'æ•°æ®çš„ path' [overwrite] into table \nstudent [partition (partcol1=val1,â€¦)];\nï¼ˆ1ï¼‰load data:è¡¨ç¤ºåŠ è½½æ•°æ®ï¼ˆ2ï¼‰local:è¡¨ç¤ºä»æœ¬åœ°åŠ è½½æ•°æ®åˆ° hive è¡¨ï¼›å¦åˆ™ä» HDFSï¼ˆ3ï¼‰inpath:è¡¨ç¤ºåŠ è½½æ•°æ®çš„è·¯å¾„ï¼ˆ4ï¼‰overwrite:è¡¨ç¤ºè¦†ç›–è¡¨ä¸­å·²æœ‰æ•°æ®ï¼Œå¦åˆ™è¡¨ç¤ºè¿½åŠ ï¼ˆ5ï¼‰into table:è¡¨ç¤ºåŠ è½½åˆ°å“ªå¼ è¡¨ï¼ˆ6ï¼‰student:è¡¨ç¤ºå…·ä½“çš„è¡¨ï¼ˆ7ï¼‰partition:è¡¨ç¤ºä¸Šä¼ åˆ°æŒ‡å®šåˆ†åŒº2ï¼‰å®æ“æ¡ˆä¾‹ï¼ˆ0ï¼‰åˆ›å»ºä¸€å¼ è¡¨\nhive (default)&gt; create table student(id string, name string) row format \ndelimited fields terminated by '\\t';\nï¼ˆ1ï¼‰åŠ è½½æœ¬åœ°æ–‡ä»¶åˆ° hive\nhive (default)&gt; load data local inpath \n'/opt/module/hive/datas/student.txt' into table default.student;\nï¼ˆ2ï¼‰åŠ è½½ HDFS æ–‡ä»¶åˆ° hive ä¸­ä¸Šä¼ æ–‡ä»¶åˆ° HDFS\nhive (default)&gt; dfs -put /opt/module/hive/data/student.txt \n/user/atguigu/hive;\nåŠ è½½ HDFS ä¸Šæ•°æ®\nhive (default)&gt; load data inpath '/user/atguigu/hive/student.txt' into \ntable default.student;\nï¼ˆ3ï¼‰åŠ è½½æ•°æ®è¦†ç›–è¡¨ä¸­å·²æœ‰çš„æ•°æ®ä¸Šä¼ æ–‡ä»¶åˆ° HDFS\nhive (default)&gt; dfs -put /opt/module/data/student.txt /user/atguigu/hive;\nåŠ è½½æ•°æ®è¦†ç›–è¡¨ä¸­å·²æœ‰çš„æ•°æ®\nhive (default)&gt; load data inpath '/user/atguigu/hive/student.txt' \noverwrite into table default.student;\né€šè¿‡æŸ¥è¯¢è¯­å¥å‘è¡¨ä¸­æ’å…¥æ•°æ®ï¼ˆInsertï¼‰1ï¼‰åˆ›å»ºä¸€å¼ è¡¨\nhive (default)&gt; create table student_par(id int, name string) row format \ndelimited fields terminated by '\\t';\n2ï¼‰åŸºæœ¬æ’å…¥æ•°æ®\nhive (default)&gt; insert into table student_par \nvalues(1,'wangwu'),(2,'zhaoliu'); 3ï¼‰åŸºæœ¬æ¨¡å¼æ’å…¥ï¼ˆæ ¹æ®å•å¼ è¡¨æŸ¥è¯¢ç»“æœï¼‰\nhive (default)&gt; insert overwrite table student_par\n select id, name from student where month='201709';\ninsert intoï¼šä»¥è¿½åŠ æ•°æ®çš„æ–¹å¼æ’å…¥åˆ°è¡¨æˆ–åˆ†åŒºï¼ŒåŸæœ‰æ•°æ®ä¸ä¼šåˆ é™¤\ninsert overwriteï¼šä¼šè¦†ç›–è¡¨ä¸­å·²å­˜åœ¨çš„æ•°æ®\næ³¨æ„ï¼šinsert ä¸æ”¯æŒæ’å…¥éƒ¨åˆ†å­—æ®µ4ï¼‰å¤šè¡¨ï¼ˆå¤šåˆ†åŒºï¼‰æ’å…¥æ¨¡å¼ï¼ˆæ ¹æ®å¤šå¼ è¡¨æŸ¥è¯¢ç»“æœï¼‰\nhive (default)&gt; from student\ninsert overwrite table student partition(month='201707')\nselect id, name where month='201709'\ninsert overwrite table student partition(month='201706')\nselect id, name where month='201709';\næŸ¥è¯¢è¯­å¥ä¸­åˆ›å»ºè¡¨å¹¶åŠ è½½æ•°æ®ï¼ˆAs Selectï¼‰è¯¦è§ 4.5.1 ç« åˆ›å»ºè¡¨ã€‚æ ¹æ®æŸ¥è¯¢ç»“æœåˆ›å»ºè¡¨ï¼ˆæŸ¥è¯¢çš„ç»“æœä¼šæ·»åŠ åˆ°æ–°åˆ›å»ºçš„è¡¨ä¸­ï¼‰\ncreate table if not exists student3\nas select id, name from student;\nåˆ›å»ºè¡¨æ—¶é€šè¿‡ Location æŒ‡å®šåŠ è½½æ•°æ®è·¯å¾„1ï¼‰ä¸Šä¼ æ•°æ®åˆ° hdfs ä¸Š\nhive (default)&gt; dfs -mkdir /student;\nhive (default)&gt; dfs -put /opt/module/datas/student.txt /student; 2ï¼‰åˆ›å»ºè¡¨ï¼Œå¹¶æŒ‡å®šåœ¨ hdfs ä¸Šçš„ä½ç½®\nhive (default)&gt; create external table if not exists student5(\n id int, name string\n )\n row format delimited fields terminated by '\\t'\n location '/student; 3ï¼‰æŸ¥è¯¢æ•°æ®\nhive (default)&gt; select * from student5;\nImport æ•°æ®åˆ°æŒ‡å®š Hive è¡¨ä¸­æ³¨æ„ï¼šå…ˆç”¨ export å¯¼å‡ºåï¼Œå†å°†æ•°æ®å¯¼å…¥ã€‚\nhive (default)&gt; import table student2\nfrom '/user/hive/warehouse/export/student';\n5.2 æ•°æ®å¯¼å‡ºInsert å¯¼å‡º1ï¼‰å°†æŸ¥è¯¢çš„ç»“æœå¯¼å‡ºåˆ°æœ¬åœ°\nhive (default)&gt; insert overwrite local directory \n'/opt/module/hive/data/export/student'\nselect * from student;\n2ï¼‰å°†æŸ¥è¯¢çš„ç»“æœæ ¼å¼åŒ–å¯¼å‡ºåˆ°æœ¬åœ°\nhive(default)&gt;insert overwrite local directory \n'/opt/module/hive/data/export/student1'\nROW FORMAT DELIMITED FIELDS TERMINATED BY '\\t'\nselect * from student;\n3ï¼‰å°†æŸ¥è¯¢çš„ç»“æœå¯¼å‡ºåˆ° HDFS ä¸Š(æ²¡æœ‰ local)\nhive (default)&gt; insert overwrite directory '/user/atguigu/student2'\n ROW FORMAT DELIMITED FIELDS TERMINATED BY '\\t' \n select * from student;\nHadoop å‘½ä»¤å¯¼å‡ºåˆ°æœ¬åœ°hive (default)&gt; dfs -get /user/hive/warehouse/student/student.txt\n/opt/module/data/export/student3.txt;\nHive Shell å‘½ä»¤å¯¼å‡ºåŸºæœ¬è¯­æ³•ï¼šï¼ˆhive -f/-e æ‰§è¡Œè¯­å¥æˆ–è€…è„šæœ¬ &gt; fileï¼‰\n[atguigu@hadoop102 hive]$ bin/hive -e 'select * from default.student;' &gt;\n/opt/module/hive/data/export/student4.txt;\nExport å¯¼å‡ºåˆ° HDFS ä¸Š(defahiveult)&gt; export table default.student \nto '/user/hive/warehouse/export/student';\nexport å’Œ import ä¸»è¦ç”¨äºä¸¤ä¸ª Hadoop å¹³å°é›†ç¾¤ä¹‹é—´ Hive è¡¨è¿ç§»ã€‚\n5.2.5 Sqoop å¯¼å‡ºåç»­è¯¾ç¨‹ä¸“é—¨è®²ã€‚\n5.2.6 æ¸…é™¤è¡¨ä¸­æ•°æ®ï¼ˆTruncateï¼‰æ³¨æ„ï¼šTruncate åªèƒ½åˆ é™¤ç®¡ç†è¡¨ï¼Œä¸èƒ½åˆ é™¤å¤–éƒ¨è¡¨ä¸­æ•°æ®hive (default)&gt; truncate table student;\n6.  æŸ¥è¯¢https://cwiki.apache.org/confluence/display/Hive/LanguageManual+SelectæŸ¥è¯¢è¯­å¥è¯­æ³•ï¼š\nSELECT [ALL | DISTINCT] select_expr, select_expr, ...\nFROM table_reference\n[WHERE where_condition]\n[GROUP BY col_list]\n[ORDER BY col_list]\n[CLUSTER BY col_list\n| [DISTRIBUTE BY col_list] [SORT BY col_list]\n]\n[LIMIT number]\n6.1 åŸºæœ¬æŸ¥è¯¢ï¼ˆSelectâ€¦Fromï¼‰å…¨è¡¨å’Œç‰¹å®šåˆ—æŸ¥è¯¢ï¼ˆ0ï¼‰åŸå§‹æ•°æ®\ndept:\n10 ACCOUNTING 1700\n20 RESEARCH 1800\n30 SALES 1900\n40 OPERATIONS 1700\nempï¼š\n7369 SMITH CLERK 7902 1980-12-17 800.00 20\n7499 ALLEN SALESMAN 7698 1981-2-20 1600.00 300.00 30\n7521 WARD SALESMAN 7698 1981-2-22 1250.00 500.00 30\n7566 JONES MANAGER 7839 1981-4-2 2975.00 20\n7654 MARTIN SALESMAN 7698 1981-9-28 1250.00 1400.00 30\n7698 BLAKE MANAGER 7839 1981-5-1 2850.00 30\n7782 CLARK MANAGER 7839 1981-6-9 2450.00 10\n7788 SCOTT ANALYST 7566 1987-4-19 3000.00 20\n7839 KING PRESIDENT 1981-11-17 5000.00 10\n7844 TURNER SALESMAN 7698 1981-9-8 1500.00 0.00 30\n7876 ADAMS CLERK 7788 1987-5-23 1100.00 20\n7900 JAMES CLERK 7698 1981-12-3 950.00 30\n7902 FORD ANALYST 7566 1981-12-3 3000.00 20\n7934 MILLER CLERK 7782 1982-1-23 1300.00 10\nï¼ˆ1ï¼‰åˆ›å»ºéƒ¨é—¨è¡¨\ncreate table if not exists dept(\ndeptno int,\ndname string,\nloc int\n)\nrow format delimited fields terminated by '\\t';\nï¼ˆ2ï¼‰åˆ›å»ºå‘˜å·¥è¡¨\ncreate table if not exists emp(\nempno int,\nename string,\njob string,\nmgr int,\nhiredate string, \nsal double, \ncomm double,\ndeptno int)\nrow format delimited fields terminated by '\\t';\nï¼ˆ3ï¼‰å¯¼å…¥æ•°æ®\nload data local inpath '/opt/module/datas/dept.txt' into table dept;\nload data local inpath '/opt/module/datas/emp.txt' into table emp;\n1ï¼‰å…¨è¡¨æŸ¥è¯¢\nhive (default)&gt; select * from emp;\nhive (default)&gt; select empno,ename,job,mgr,hiredate,sal,comm,deptno from \nemp ;\n2ï¼‰é€‰æ‹©ç‰¹å®šåˆ—æŸ¥è¯¢\nhive (default)&gt; select empno, ename from emp;\næ³¨æ„ï¼š\n\nSQL è¯­è¨€å¤§å°å†™ä¸æ•æ„Ÿã€‚\nSQL å¯ä»¥å†™åœ¨ä¸€è¡Œæˆ–è€…å¤šè¡Œ\nå…³é”®å­—ä¸èƒ½è¢«ç¼©å†™ä¹Ÿä¸èƒ½åˆ†è¡Œ\nå„å­å¥ä¸€èˆ¬è¦åˆ†è¡Œå†™ã€‚\nä½¿ç”¨ç¼©è¿›æé«˜è¯­å¥çš„å¯è¯»æ€§ã€‚\n\nåˆ—åˆ«å\n1ï¼‰é‡å‘½åä¸€ä¸ªåˆ—2ï¼‰ä¾¿äºè®¡ç®—3ï¼‰ç´§è·Ÿåˆ—åï¼Œä¹Ÿå¯ä»¥åœ¨åˆ—åå’Œåˆ«åä¹‹é—´åŠ å…¥å…³é”®å­—â€˜ASâ€™ \n4ï¼‰æ¡ˆä¾‹å®æ“\nhive (default)&gt; select ename AS name, deptno dn from emp;\nç®—æœ¯è¿ç®—ç¬¦ï¼š+ã€-ã€*ã€/ã€%ã€&amp;ã€|ã€^ã€~å¸¸ç”¨å‡½æ•°\n#æ±‚æ€»è¡Œæ•°ï¼ˆcountï¼‰\nhive (default)&gt; select count(*) cnt from emp;\n#æ±‚å·¥èµ„çš„æœ€å¤§å€¼ï¼ˆmaxï¼‰\nhive (default)&gt; select max(sal) max_sal from emp;\n#æ±‚å·¥èµ„çš„æœ€å°å€¼ï¼ˆminï¼‰\nhive (default)&gt; select min(sal) min_sal from emp;\n#æ±‚å·¥èµ„çš„æ€»å’Œï¼ˆsumï¼‰\nhive (default)&gt; select sum(sal) sum_sal from emp; \n#æ±‚å·¥èµ„çš„å¹³å‡å€¼ï¼ˆavgï¼‰\nhive (default)&gt; select avg(sal) avg_sal from emp;\nLimit è¯­å¥å…¸å‹çš„æŸ¥è¯¢ä¼šè¿”å›å¤šè¡Œæ•°æ®ã€‚LIMIT å­å¥ç”¨äºé™åˆ¶è¿”å›çš„è¡Œæ•°ã€‚\nhive (default)&gt; select * from emp limit 5;\nhive (default)&gt; select * from emp limit 2;\nWhere è¯­å¥1ï¼‰ä½¿ç”¨ WHERE å­å¥ï¼Œå°†ä¸æ»¡è¶³æ¡ä»¶çš„è¡Œè¿‡æ»¤æ‰2ï¼‰WHERE å­å¥ç´§éš FROM å­å¥3ï¼‰æ¡ˆä¾‹å®æ“æŸ¥è¯¢å‡ºè–ªæ°´å¤§äº 1000 çš„æ‰€æœ‰å‘˜å·¥\nhive (default)&gt; select * from emp where sal &gt;1000;\næ³¨æ„ï¼šwhere å­å¥ä¸­ä¸èƒ½ä½¿ç”¨å­—æ®µåˆ«åã€‚æ¯”è¾ƒè¿ç®—ç¬¦ï¼ˆBetween/In/ Is Nullï¼‰ \n1ï¼‰ä¸‹é¢è¡¨ä¸­æè¿°äº†è°“è¯æ“ä½œç¬¦ï¼Œè¿™äº›æ“ä½œç¬¦åŒæ ·å¯ä»¥ç”¨äº JOINâ€¦ON å’Œ HAVING è¯­å¥ä¸­ã€‚\n\n\n\n\n=ã€&lt;=&gt;ã€&lt;&gt;ã€!=ã€&lt;=ã€&gt;ã€&gt;=ã€between and ã€is null ã€is not null ã€in ã€not like ã€rlike ã€regexp\n\n\n\n\n\n\n\n\n\n2ï¼‰æ¡ˆä¾‹å®æ“\n#æŸ¥è¯¢å‡ºè–ªæ°´ç­‰äº 5000 çš„æ‰€æœ‰å‘˜å·¥\nhive (default)&gt; select * from emp where sal =5000;\n#æŸ¥è¯¢å·¥èµ„åœ¨ 500 åˆ° 1000 çš„å‘˜å·¥ä¿¡æ¯\nhive (default)&gt; select * from emp where sal between 500 and 1000;\n#æŸ¥è¯¢ comm ä¸ºç©ºçš„æ‰€æœ‰å‘˜å·¥ä¿¡æ¯\nhive (default)&gt; select * from emp where comm is null;\n#æŸ¥è¯¢å·¥èµ„æ˜¯ 1500 æˆ– 5000 çš„å‘˜å·¥ä¿¡æ¯\nhive (default)&gt; select * from emp where sal IN (1500, 5000);\nLike å’Œ RLike1ï¼‰ä½¿ç”¨ LIKE è¿ç®—é€‰æ‹©ç±»ä¼¼çš„å€¼2ï¼‰é€‰æ‹©æ¡ä»¶å¯ä»¥åŒ…å«å­—ç¬¦æˆ–æ•°å­—:\n\n% ä»£è¡¨é›¶ä¸ªæˆ–å¤šä¸ªå­—ç¬¦(ä»»æ„ä¸ªå­—ç¬¦)ã€‚\n_ ä»£è¡¨ä¸€ä¸ªå­—ç¬¦ã€‚\n\n3ï¼‰RLIKE å­å¥RLIKE å­å¥æ˜¯ Hive ä¸­è¿™ä¸ªåŠŸèƒ½çš„ä¸€ä¸ªæ‰©å±•ï¼Œå…¶å¯ä»¥é€šè¿‡ Java çš„æ­£åˆ™è¡¨è¾¾å¼è¿™ä¸ªæ›´å¼ºå¤§çš„è¯­è¨€æ¥æŒ‡å®šåŒ¹é…æ¡ä»¶ã€‚4ï¼‰æ¡ˆä¾‹å®æ“\n#æŸ¥æ‰¾åå­—ä»¥ A å¼€å¤´çš„å‘˜å·¥ä¿¡æ¯\nhive (default)&gt; select * from emp where ename LIKE 'A%';\n#æŸ¥æ‰¾åå­—ä¸­ç¬¬äºŒä¸ªå­—æ¯ä¸º A çš„å‘˜å·¥ä¿¡æ¯\nhive (default)&gt; select * from emp where ename LIKE '_A%';\n#æŸ¥æ‰¾åå­—ä¸­å¸¦æœ‰ A çš„å‘˜å·¥ä¿¡æ¯\nhive (default)&gt; select * from emp where ename RLIKE '[A]';\né€»è¾‘è¿ç®—ç¬¦ï¼ˆAnd/Or/Notï¼‰1ï¼‰æ¡ˆä¾‹å®æ“\n#æŸ¥è¯¢è–ªæ°´å¤§äº 1000ï¼Œéƒ¨é—¨æ˜¯ 30\nhive (default)&gt; select * from emp where sal&gt;1000 and deptno=30;\n#æŸ¥è¯¢è–ªæ°´å¤§äº 1000ï¼Œæˆ–è€…éƒ¨é—¨æ˜¯ 30\nhive (default)&gt; select * from emp where sal&gt;1000 or deptno=30;\n#æŸ¥è¯¢é™¤äº† 20 éƒ¨é—¨å’Œ 30 éƒ¨é—¨ä»¥å¤–çš„å‘˜å·¥ä¿¡æ¯\nhive (default)&gt; select * from emp where deptno not IN(30, 20);\n6.2 åˆ†ç»„Group By è¯­å¥GROUP BY è¯­å¥é€šå¸¸ä¼šå’Œèšåˆå‡½æ•°ä¸€èµ·ä½¿ç”¨ï¼ŒæŒ‰ç…§ä¸€ä¸ªæˆ–è€…å¤šä¸ªåˆ—é˜Ÿç»“æœè¿›è¡Œåˆ†ç»„ï¼Œç„¶åå¯¹æ¯ä¸ªç»„æ‰§è¡Œèšåˆæ“ä½œã€‚1ï¼‰æ¡ˆä¾‹å®æ“ï¼š\n#è®¡ç®— emp è¡¨æ¯ä¸ªéƒ¨é—¨çš„å¹³å‡å·¥èµ„\nhive (default)&gt; select t.deptno, avg(t.sal) avg_sal from emp t group by t.deptno;\n#è®¡ç®— emp æ¯ä¸ªéƒ¨é—¨ä¸­æ¯ä¸ªå²—ä½çš„æœ€é«˜è–ªæ°´\nhive (default)&gt; select t.deptno, t.job, max(t.sal) max_sal from emp t \ngroup by t.deptno, t.job;\nHaving è¯­å¥1ï¼‰having ä¸ where ä¸åŒç‚¹ï¼ˆ1ï¼‰where åé¢ä¸èƒ½å†™åˆ†ç»„å‡½æ•°ï¼Œè€Œ having åé¢å¯ä»¥ä½¿ç”¨åˆ†ç»„å‡½æ•°ã€‚ï¼ˆ2ï¼‰having åªç”¨äº group by åˆ†ç»„ç»Ÿè®¡è¯­å¥ã€‚2ï¼‰æ¡ˆä¾‹å®æ“\n#æ±‚æ¯ä¸ªéƒ¨é—¨çš„å¹³å‡å·¥èµ„\nhive (default)&gt; select deptno, avg(sal) from emp group by deptno;\n#æ±‚æ¯ä¸ªéƒ¨é—¨çš„å¹³å‡è–ªæ°´å¤§äº 2000 çš„éƒ¨é—¨\nhive (default)&gt; select deptno, avg(sal) avg_sal from emp group by deptno \nhaving avg_sal &gt; 2000;\n6.3 Join è¯­å¥Hive æ”¯æŒé€šå¸¸çš„ SQL JOIN è¯­å¥ã€‚ \nç­‰å€¼ Join\n1ï¼‰æ¡ˆä¾‹å®æ“\nï¼ˆ1ï¼‰æ ¹æ®å‘˜å·¥è¡¨å’Œéƒ¨é—¨è¡¨ä¸­çš„éƒ¨é—¨ç¼–å·ç›¸ç­‰ï¼ŒæŸ¥è¯¢å‘˜å·¥ç¼–å·ã€å‘˜å·¥åç§°å’Œéƒ¨é—¨åç§°ï¼›\nhive (default)&gt; select e.empno, e.ename, d.deptno, d.dname from emp e\njoin dept d on e.deptno = d.deptno;\nè¡¨çš„åˆ«å1ï¼‰å¥½å¤„ï¼ˆ1ï¼‰ä½¿ç”¨åˆ«åå¯ä»¥ç®€åŒ–æŸ¥è¯¢ã€‚ï¼ˆ2ï¼‰ä½¿ç”¨è¡¨åå‰ç¼€å¯ä»¥æé«˜æ‰§è¡Œæ•ˆç‡ã€‚2ï¼‰æ¡ˆä¾‹å®æ“\n# åˆå¹¶å‘˜å·¥è¡¨å’Œéƒ¨é—¨è¡¨\nhive (default)&gt; select e.empno, e.ename, d.deptno from emp e join dept d \non e.deptno = d.deptno;\nå†…è¿æ¥\nå†…è¿æ¥ï¼šåªæœ‰è¿›è¡Œè¿æ¥çš„ä¸¤ä¸ªè¡¨ä¸­éƒ½å­˜åœ¨ä¸è¿æ¥æ¡ä»¶ç›¸åŒ¹é…çš„æ•°æ®æ‰ä¼šè¢«ä¿ç•™ä¸‹æ¥ã€‚\nhive (default)&gt; select e.empno, e.ename, d.deptno from emp e join dept d \non e.deptno = d.deptno;\nå·¦å¤–è¿æ¥\n# å·¦å¤–è¿æ¥ï¼šJOIN æ“ä½œç¬¦å·¦è¾¹è¡¨ä¸­ç¬¦åˆ WHERE å­å¥çš„æ‰€æœ‰è®°å½•å°†ä¼šè¢«è¿”å›ã€‚\nhive (default)&gt; select e.empno, e.ename, d.deptno from emp e left join \ndept d on e.deptno = d.deptno;\nå³å¤–è¿æ¥\n#å³å¤–è¿æ¥ï¼šJOIN æ“ä½œç¬¦å³è¾¹è¡¨ä¸­ç¬¦åˆ WHERE å­å¥çš„æ‰€æœ‰è®°å½•å°†ä¼šè¢«è¿”å›ã€‚\nhive (default)&gt; select e.empno, e.ename, d.deptno from emp e right join \ndept d on e.deptno = d.deptno;\næ»¡å¤–è¿æ¥æ»¡å¤–è¿æ¥ï¼šå°†ä¼šè¿”å›æ‰€æœ‰è¡¨ä¸­ç¬¦åˆ WHERE è¯­å¥æ¡ä»¶çš„æ‰€æœ‰è®°å½•ã€‚å¦‚æœä»»ä¸€è¡¨çš„æŒ‡å®šå­—æ®µæ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„å€¼çš„è¯ï¼Œé‚£ä¹ˆå°±ä½¿ç”¨ NULL å€¼æ›¿ä»£ã€‚\nhive (default)&gt; select e.empno, e.ename, d.deptno from emp e full join \ndept d on e.deptno = d.deptno;\nå¤šè¡¨è¿æ¥æ³¨æ„ï¼šè¿æ¥ n ä¸ªè¡¨ï¼Œè‡³å°‘éœ€è¦ n-1 ä¸ªè¿æ¥æ¡ä»¶ã€‚ä¾‹å¦‚ï¼šè¿æ¥ä¸‰ä¸ªè¡¨ï¼Œè‡³å°‘éœ€è¦ä¸¤ä¸ªè¿æ¥æ¡ä»¶ã€‚æ•°æ®å‡†å¤‡1700 Beijing1800 London1900 Tokyo1ï¼‰åˆ›å»ºä½ç½®è¡¨\ncreate table if not exists location(\nloc int,\nloc_name string\n)\nrow format delimited fields terminated by '\\t';\n2ï¼‰å¯¼å…¥æ•°æ®\nhive (default)&gt; load data local inpath '/opt/module/datas/location.txt' \ninto table location;\n3ï¼‰å¤šè¡¨è¿æ¥æŸ¥è¯¢\nhive (default)&gt;SELECT e.ename, d.dname, l.loc_name\nFROM emp e \nJOIN dept d\nON d.deptno = e.deptno \nJOIN location l\nON d.loc = l.loc;\nâ€‹        å¤§å¤šæ•°æƒ…å†µä¸‹ï¼ŒHive ä¼šå¯¹æ¯å¯¹ JOIN è¿æ¥å¯¹è±¡å¯åŠ¨ä¸€ä¸ª MapReduce ä»»åŠ¡ã€‚æœ¬ä¾‹ä¸­ä¼šé¦–å…ˆå¯åŠ¨ä¸€ä¸ª MapReduce job å¯¹è¡¨ e å’Œè¡¨ d è¿›è¡Œè¿æ¥æ“ä½œï¼Œç„¶åä¼šå†å¯åŠ¨ä¸€ä¸ª MapReduce job å°†ç¬¬ä¸€ä¸ª MapReduce job çš„è¾“å‡ºå’Œè¡¨ l;è¿›è¡Œè¿æ¥æ“ä½œã€‚æ³¨æ„ï¼šä¸ºä»€ä¹ˆä¸æ˜¯è¡¨ d å’Œè¡¨ l å…ˆè¿›è¡Œè¿æ¥æ“ä½œå‘¢ï¼Ÿè¿™æ˜¯å› ä¸º Hive æ€»æ˜¯æŒ‰ç…§ä»å·¦åˆ°å³çš„é¡ºåºæ‰§è¡Œçš„ã€‚ä¼˜åŒ–ï¼šå½“å¯¹ 3 ä¸ªæˆ–è€…æ›´å¤šè¡¨è¿›è¡Œ join è¿æ¥æ—¶ï¼Œå¦‚æœæ¯ä¸ª on å­å¥éƒ½ä½¿ç”¨ç›¸åŒçš„è¿æ¥é”®çš„è¯ï¼Œé‚£ä¹ˆåªä¼šäº§ç”Ÿä¸€ä¸ª MapReduce jobã€‚ \nç¬›å¡å°”ç§¯1ï¼‰ç¬›å¡å°”é›†ä¼šåœ¨ä¸‹é¢æ¡ä»¶ä¸‹äº§ç”Ÿï¼ˆ1ï¼‰çœç•¥è¿æ¥æ¡ä»¶ï¼ˆ2ï¼‰è¿æ¥æ¡ä»¶æ— æ•ˆï¼ˆ3ï¼‰æ‰€æœ‰è¡¨ä¸­çš„æ‰€æœ‰è¡Œäº’ç›¸è¿æ¥2ï¼‰æ¡ˆä¾‹å®æ“\nhive (default)&gt; select empno, dname from emp, dept;\n6.4 æ’åºå…¨å±€æ’åºï¼ˆOrder Byï¼‰Order Byï¼šå…¨å±€æ’åºï¼Œåªæœ‰ä¸€ä¸ª Reducer \n1ï¼‰ä½¿ç”¨ ORDER BY å­å¥æ’åºASCï¼ˆascendï¼‰: å‡åºï¼ˆé»˜è®¤ï¼‰DESCï¼ˆdescendï¼‰: é™åº\n2ï¼‰ORDER BY å­å¥åœ¨ SELECT è¯­å¥çš„ç»“å°¾3ï¼‰æ¡ˆä¾‹å®æ“\n#æŸ¥è¯¢å‘˜å·¥ä¿¡æ¯æŒ‰å·¥èµ„å‡åºæ’åˆ—\nhive (default)&gt; select * from emp order by sal;\n#æŸ¥è¯¢å‘˜å·¥ä¿¡æ¯æŒ‰å·¥èµ„é™åºæ’åˆ—\nhive (default)&gt; select * from emp order by sal desc;\næŒ‰ç…§åˆ«åæ’åº\n#æŒ‰ç…§å‘˜å·¥è–ªæ°´çš„ 2 å€æ’åº\nhive (default)&gt; select ename, sal*2 twosal from emp order by twosal;\nå¤šä¸ªåˆ—æ’åº\n#æŒ‰ç…§éƒ¨é—¨å’Œå·¥èµ„å‡åºæ’åº\nhive (default)&gt; select ename, deptno, sal from emp order by deptno, sal;\næ¯ä¸ª Reduce å†…éƒ¨æ’åºï¼ˆSort Byï¼‰Sort Byï¼šå¯¹äºå¤§è§„æ¨¡çš„æ•°æ®é›† order by çš„æ•ˆç‡éå¸¸ä½ã€‚åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œå¹¶ä¸éœ€è¦å…¨å±€æ’åºï¼Œæ­¤æ—¶å¯ä»¥ä½¿ç”¨ sort byã€‚Sort by ä¸ºæ¯ä¸ª reducer äº§ç”Ÿä¸€ä¸ªæ’åºæ–‡ä»¶ã€‚æ¯ä¸ª Reducer å†…éƒ¨è¿›è¡Œæ’åºï¼Œå¯¹å…¨å±€ç»“æœé›†æ¥è¯´ä¸æ˜¯æ’åºã€‚\n#è®¾ç½® reduce ä¸ªæ•°\nhive (default)&gt; set mapreduce.job.reduces=3;\n#æŸ¥çœ‹è®¾ç½® reduce ä¸ªæ•°\nhive (default)&gt; set mapreduce.job.reduces;\n#æ ¹æ®éƒ¨é—¨ç¼–å·é™åºæŸ¥çœ‹å‘˜å·¥ä¿¡æ¯\nhive (default)&gt; select * from emp sort by deptno desc;\n#å°†æŸ¥è¯¢ç»“æœå¯¼å…¥åˆ°æ–‡ä»¶ä¸­ï¼ˆæŒ‰ç…§éƒ¨é—¨ç¼–å·é™åºæ’åºï¼‰\nhive (default)&gt; insert overwrite local directory \n'/opt/module/data/sortby-result'\nselect * from emp sort by deptno desc;\nåˆ†åŒºï¼ˆDistribute Byï¼‰Distribute Byï¼š åœ¨æœ‰äº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦æ§åˆ¶æŸä¸ªç‰¹å®šè¡Œåº”è¯¥åˆ°å“ªä¸ª reducerï¼Œé€šå¸¸æ˜¯ä¸ºäº†è¿›è¡Œåç»­çš„èšé›†æ“ä½œã€‚distribute by å­å¥å¯ä»¥åšè¿™ä»¶äº‹ã€‚distribute by ç±»ä¼¼ MR ä¸­ partitionï¼ˆè‡ªå®šä¹‰åˆ†åŒºï¼‰ï¼Œè¿›è¡Œåˆ†åŒºï¼Œç»“åˆ sort by ä½¿ç”¨ã€‚å¯¹äº distribute by è¿›è¡Œæµ‹è¯•ï¼Œä¸€å®šè¦åˆ†é…å¤š reduce è¿›è¡Œå¤„ç†ï¼Œå¦åˆ™æ— æ³•çœ‹åˆ° distribute by çš„æ•ˆæœã€‚\n1ï¼‰æ¡ˆä¾‹å®æ“ï¼š\n#å…ˆæŒ‰ç…§éƒ¨é—¨ç¼–å·åˆ†åŒºï¼Œå†æŒ‰ç…§å‘˜å·¥ç¼–å·é™åºæ’åºã€‚\nhive (default)&gt; set mapreduce.job.reduces=3;\nhive (default)&gt; insert overwrite local directory \n'/opt/module/data/distribute-result' select * from emp distribute by \ndeptno sort by empno desc;\næ³¨æ„ï¼šâ¢ distribute by çš„åˆ†åŒºè§„åˆ™æ˜¯æ ¹æ®åˆ†åŒºå­—æ®µçš„ hash ç ä¸ reduce çš„ä¸ªæ•°è¿›è¡Œæ¨¡é™¤åï¼Œä½™æ•°ç›¸åŒçš„åˆ†åˆ°ä¸€ä¸ªåŒºã€‚ \nâ¢ Hive è¦æ±‚ DISTRIBUTE BY è¯­å¥è¦å†™åœ¨ SORT BY è¯­å¥ä¹‹å‰ã€‚Cluster By        å½“ distribute by å’Œ sorts by å­—æ®µç›¸åŒæ—¶ï¼Œå¯ä»¥ä½¿ç”¨ cluster by æ–¹å¼ã€‚cluster by é™¤äº†å…·æœ‰ distribute by çš„åŠŸèƒ½å¤–è¿˜å…¼å…· sort by çš„åŠŸèƒ½ã€‚ä½†æ˜¯æ’åºåªèƒ½æ˜¯å‡åºæ’åºï¼Œä¸èƒ½æŒ‡å®šæ’åºè§„åˆ™ä¸º ASC æˆ–è€… DESCã€‚ \nï¼ˆ1ï¼‰ä»¥ä¸‹ä¸¤ç§å†™æ³•ç­‰ä»·\nhive (default)&gt; select * from emp cluster by deptno;\nhive (default)&gt; select * from emp distribute by deptno sort by deptno;\næ³¨æ„ï¼šæŒ‰ç…§éƒ¨é—¨ç¼–å·åˆ†åŒºï¼Œä¸ä¸€å®šå°±æ˜¯å›ºå®šæ­»çš„æ•°å€¼ï¼Œå¯ä»¥æ˜¯ 20 å·å’Œ 30 å·éƒ¨é—¨åˆ†åˆ°ä¸€ä¸ªåˆ†åŒºé‡Œé¢å»ã€‚\n7. åˆ†åŒºè¡¨å’Œåˆ†æ¡¶è¡¨7.1 åˆ†åŒºè¡¨â€‹        åˆ†åŒºè¡¨å®é™…ä¸Šå°±æ˜¯å¯¹åº”ä¸€ä¸ª HDFS æ–‡ä»¶ç³»ç»Ÿä¸Šçš„ç‹¬ç«‹çš„æ–‡ä»¶å¤¹ï¼Œè¯¥æ–‡ä»¶å¤¹ä¸‹æ˜¯è¯¥åˆ†åŒºæ‰€æœ‰çš„æ•°æ®æ–‡ä»¶ã€‚Hive ä¸­çš„åˆ†åŒºå°±æ˜¯åˆ†ç›®å½•ï¼ŒæŠŠä¸€ä¸ªå¤§çš„æ•°æ®é›†æ ¹æ®ä¸šåŠ¡éœ€è¦åˆ†å‰²æˆå°çš„æ•°æ®é›†ã€‚åœ¨æŸ¥è¯¢æ—¶é€šè¿‡ WHERE å­å¥ä¸­çš„è¡¨è¾¾å¼é€‰æ‹©æŸ¥è¯¢æ‰€éœ€è¦çš„æŒ‡å®šçš„åˆ†åŒºï¼Œè¿™æ ·çš„æŸ¥è¯¢æ•ˆç‡ä¼šæé«˜å¾ˆå¤šã€‚åˆ†åŒºè¡¨åŸºæœ¬æ“ä½œ1ï¼‰å¼•å…¥åˆ†åŒºè¡¨ï¼ˆéœ€è¦æ ¹æ®æ—¥æœŸå¯¹æ—¥å¿—è¿›è¡Œç®¡ç†, é€šè¿‡éƒ¨é—¨ä¿¡æ¯æ¨¡æ‹Ÿï¼‰\ndept_20200401.log\ndept_20200402.log\ndept_20200403.log\n2ï¼‰åˆ›å»ºåˆ†åŒºè¡¨è¯­æ³•\nhive (default)&gt; create table dept_partition(\ndeptno int, dname string, loc string\n)\npartitioned by (day string)\nrow format delimited fields terminated by '\\t';\næ³¨æ„ï¼šåˆ†åŒºå­—æ®µä¸èƒ½æ˜¯è¡¨ä¸­å·²ç»å­˜åœ¨çš„æ•°æ®ï¼Œå¯ä»¥å°†åˆ†åŒºå­—æ®µçœ‹ä½œè¡¨çš„ä¼ªåˆ—ã€‚3ï¼‰åŠ è½½æ•°æ®åˆ°åˆ†åŒºè¡¨ä¸­ï¼ˆ1ï¼‰ æ•°æ®å‡†å¤‡\ndept_20200401.log\n10 ACCOUNTING 1700\n20 RESEARCH 1800\n\ndept_20200402.log\n30 SALES 1900\n40 OPERATIONS 1700\n\ndept_20200403.log\n50 TEST 2000\n60 DEV 1900\nï¼ˆ2ï¼‰ åŠ è½½æ•°æ®\nhive (default)&gt; load data local inpath \n'/opt/module/hive/datas/dept_20200401.log' into table dept_partition\npartition(day='20200401');\n\nhive (default)&gt; load data local inpath \n'/opt/module/hive/datas/dept_20200402.log' into table dept_partition \npartition(day='20200402');\n\nhive (default)&gt; load data local inpath \n'/opt/module/hive/datas/dept_20200403.log' into table dept_partition \npartition(day='20200403');\næ³¨æ„ï¼šåˆ†åŒºè¡¨åŠ è½½æ•°æ®æ—¶ï¼Œå¿…é¡»æŒ‡å®šåˆ†åŒº4ï¼‰æŸ¥è¯¢åˆ†åŒºè¡¨ä¸­æ•°æ®\n#å•åˆ†åŒºæŸ¥è¯¢\nhive (default)&gt; select * from dept_partition where day='20200401';\n#å¤šåˆ†åŒºè”åˆæŸ¥è¯¢\nhive (default)&gt; select * from dept_partition where day='20200401'\n union\n select * from dept_partition where day='20200402'\n union\n select * from dept_partition where day='20200403';\nhive (default)&gt; select * from dept_partition where day='20200401' or\nday='20200402' or day='20200403';\n 5ï¼‰å¢åŠ åˆ†åŒº\n#åˆ›å»ºå•ä¸ªåˆ†åŒº\nhive (default)&gt; alter table dept_partition add partition(day='20200404');\n#åŒæ—¶åˆ›å»ºå¤šä¸ªåˆ†åŒº\nhive (default)&gt; alter table dept_partition add partition(day='20200405') \npartition(day='20200406');\n6ï¼‰åˆ é™¤åˆ†åŒº\n#åˆ é™¤å•ä¸ªåˆ†åŒº\nhive (default)&gt; alter table dept_partition drop partition (day='20200406');\n#åŒæ—¶åˆ é™¤å¤šä¸ªåˆ†åŒº\nhive (default)&gt; alter table dept_partition drop partition (day='20200404'), partition(day='20200405');\n7ï¼‰æŸ¥çœ‹åˆ†åŒºè¡¨æœ‰å¤šå°‘åˆ†åŒº\nhive&gt; show partitions dept_partition;\n8ï¼‰æŸ¥çœ‹åˆ†åŒºè¡¨ç»“æ„\nhive&gt; desc formatted dept_partition;\n# Partition Information \n# col_name data_type comment \nmonth string\näºŒçº§åˆ†åŒºæ€è€ƒ: å¦‚ä½•ä¸€å¤©çš„æ—¥å¿—æ•°æ®é‡ä¹Ÿå¾ˆå¤§ï¼Œå¦‚ä½•å†å°†æ•°æ®æ‹†åˆ†? \n1ï¼‰åˆ›å»ºäºŒçº§åˆ†åŒºè¡¨\nhive (default)&gt; create table dept_partition2(\n deptno int, dname string, loc string\n )\n partitioned by (day string, hour string)\n row format delimited fields terminated by '\\t';\n2ï¼‰æ­£å¸¸çš„åŠ è½½æ•°æ®\n# åŠ è½½æ•°æ®åˆ°äºŒçº§åˆ†åŒºè¡¨ä¸­\nhive (default)&gt; load data local inpath \n'/opt/module/hive/datas/dept_20200401.log' into table\ndept_partition2 partition(day='20200401', hour='12');\n# æŸ¥è¯¢åˆ†åŒºæ•°æ®\nhive (default)&gt; select * from dept_partition2 where day='20200401' and hour='12';\n3ï¼‰æŠŠæ•°æ®ç›´æ¥ä¸Šä¼ åˆ°åˆ†åŒºç›®å½•ä¸Šï¼Œè®©åˆ†åŒºè¡¨å’Œæ•°æ®äº§ç”Ÿå…³è”çš„ä¸‰ç§æ–¹å¼ï¼ˆ1ï¼‰æ–¹å¼ä¸€ï¼šä¸Šä¼ æ•°æ®åä¿®å¤\n#ä¸Šä¼ æ•°æ®\nhive (default)&gt; dfs -mkdir -p\n/user/hive/warehouse/mydb.db/dept_partition2/day=20200401/hour=13;\nhive (default)&gt; dfs -put /opt/module/datas/dept_20200401.log \n/user/hive/warehouse/mydb.db/dept_partition2/day=20200401/hour=13;\n#æŸ¥è¯¢æ•°æ®ï¼ˆæŸ¥è¯¢ä¸åˆ°åˆšä¸Šä¼ çš„æ•°æ®ï¼‰\nhive (default)&gt; select * from dept_partition2 where day='20200401' and hour='13';\n#æ‰§è¡Œä¿®å¤å‘½ä»¤\nhive&gt; msck repair table dept_partition2;\n#å†æ¬¡æŸ¥è¯¢æ•°æ®\nhive (default)&gt; select * from dept_partition2 where day='20200401' and hour='13';\nï¼ˆ2ï¼‰æ–¹å¼äºŒï¼šä¸Šä¼ æ•°æ®åæ·»åŠ åˆ†åŒº\n#ä¸Šä¼ æ•°æ®\nhive (default)&gt; dfs -mkdir -p\n/user/hive/warehouse/mydb.db/dept_partition2/day=20200401/hour=14;\nhive (default)&gt; dfs -put /opt/module/hive/datas/dept_20200401.log \n/user/hive/warehouse/mydb.db/dept_partition2/day=20200401/hour=14;\n#æ‰§è¡Œæ·»åŠ åˆ†åŒº\nhive (default)&gt; alter table dept_partition2 add partition(day='201709',hour='14');\n#æŸ¥è¯¢æ•°æ®\nhive (default)&gt; select * from dept_partition2 where day='20200401' and hour='14';\nï¼ˆ3ï¼‰æ–¹å¼ä¸‰ï¼šåˆ›å»ºæ–‡ä»¶å¤¹å load æ•°æ®åˆ°åˆ†åŒº\nåˆ›å»ºç›®å½•\nhive (default)&gt; dfs -mkdir -p\n/user/hive/warehouse/mydb.db/dept_partition2/day=20200401/hour=15;\nä¸Šä¼ æ•°æ®\nhive (default)&gt; load data local inpath \n'/opt/module/hive/datas/dept_20200401.log' into table\ndept_partition2 partition(day='20200401',hour='15');\næŸ¥è¯¢æ•°æ®\nhive (default)&gt; select * from dept_partition2 where day='20200401' and \nhour='15';\nåŠ¨æ€åˆ†åŒºè°ƒæ•´        å…³ç³»å‹æ•°æ®åº“ä¸­ï¼Œå¯¹åˆ†åŒºè¡¨ Insert æ•°æ®æ—¶å€™ï¼Œæ•°æ®åº“è‡ªåŠ¨ä¼šæ ¹æ®åˆ†åŒºå­—æ®µçš„å€¼ï¼Œå°†æ•°æ®æ’å…¥åˆ°ç›¸åº”çš„åˆ†åŒºä¸­ï¼ŒHive ä¸­ä¹Ÿæä¾›äº†ç±»ä¼¼çš„æœºåˆ¶ï¼Œå³åŠ¨æ€åˆ†åŒº(Dynamic Partition)ï¼Œåªä¸è¿‡ï¼Œä½¿ç”¨ Hive çš„åŠ¨æ€åˆ†åŒºï¼Œéœ€è¦è¿›è¡Œç›¸åº”çš„é…ç½®ã€‚1ï¼‰å¼€å¯åŠ¨æ€åˆ†åŒºå‚æ•°è®¾ç½®ï¼ˆ1ï¼‰å¼€å¯åŠ¨æ€åˆ†åŒºåŠŸèƒ½ï¼ˆé»˜è®¤ trueï¼Œå¼€å¯ï¼‰\nhive.exec.dynamic.partition=true\nï¼ˆ2ï¼‰è®¾ç½®ä¸ºéä¸¥æ ¼æ¨¡å¼ï¼ˆåŠ¨æ€åˆ†åŒºçš„æ¨¡å¼ï¼Œé»˜è®¤ strictï¼Œè¡¨ç¤ºå¿…é¡»æŒ‡å®šè‡³å°‘ä¸€ä¸ªåˆ†åŒºä¸ºé™æ€åˆ†åŒºï¼Œnonstrict æ¨¡å¼è¡¨ç¤ºå…è®¸æ‰€æœ‰çš„åˆ†åŒºå­—æ®µéƒ½å¯ä»¥ä½¿ç”¨åŠ¨æ€åˆ†åŒºã€‚ï¼‰\nhive.exec.dynamic.partition.mode=nonstrict\nï¼ˆ3ï¼‰åœ¨æ‰€æœ‰æ‰§è¡Œ MR çš„èŠ‚ç‚¹ä¸Šï¼Œæœ€å¤§ä¸€å…±å¯ä»¥åˆ›å»ºå¤šå°‘ä¸ªåŠ¨æ€åˆ†åŒºã€‚é»˜è®¤ 1000\nhive.exec.max.dynamic.partitions=1000\nï¼ˆ4ï¼‰åœ¨æ¯ä¸ªæ‰§è¡Œ MR çš„èŠ‚ç‚¹ä¸Šï¼Œæœ€å¤§å¯ä»¥åˆ›å»ºå¤šå°‘ä¸ªåŠ¨æ€åˆ†åŒºã€‚è¯¥å‚æ•°éœ€è¦æ ¹æ®å®é™…çš„æ•°æ®æ¥è®¾å®šã€‚æ¯”å¦‚ï¼šæºæ•°æ®ä¸­åŒ…å«äº†ä¸€å¹´çš„æ•°æ®ï¼Œå³ day å­—æ®µæœ‰ 365 ä¸ªå€¼ï¼Œé‚£ä¹ˆè¯¥å‚æ•°å°±éœ€è¦è®¾ç½®æˆå¤§äº 365ï¼Œå¦‚æœä½¿ç”¨é»˜è®¤å€¼ 100ï¼Œåˆ™ä¼šæŠ¥é”™ã€‚\nhive.exec.max.dynamic.partitions.pernode=100\nï¼ˆ5ï¼‰æ•´ä¸ª MR Job ä¸­ï¼Œæœ€å¤§å¯ä»¥åˆ›å»ºå¤šå°‘ä¸ª HDFS æ–‡ä»¶ã€‚é»˜è®¤ 100000\nhive.exec.max.created.files=100000\nï¼ˆ6ï¼‰å½“æœ‰ç©ºåˆ†åŒºç”Ÿæˆæ—¶ï¼Œæ˜¯å¦æŠ›å‡ºå¼‚å¸¸ã€‚ä¸€èˆ¬ä¸éœ€è¦è®¾ç½®ã€‚é»˜è®¤ false\nhive.error.on.empty.partition=false\n2ï¼‰æ¡ˆä¾‹å®æ“éœ€æ±‚ï¼šå°† dept è¡¨ä¸­çš„æ•°æ®æŒ‰ç…§åœ°åŒºï¼ˆloc å­—æ®µï¼‰ï¼Œæ’å…¥åˆ°ç›®æ ‡è¡¨ dept_partition çš„ç›¸åº”åˆ†åŒºä¸­ã€‚\n#åˆ›å»ºç›®æ ‡åˆ†åŒºè¡¨\nhive (default)&gt; create table dept_partition_dy(id int, name string) \npartitioned by (loc int) row format delimited fields terminated by '\\t';\n#è®¾ç½®åŠ¨æ€åˆ†åŒº\nset hive.exec.dynamic.partition.mode = nonstrict;\nhive (default)&gt; insert into table dept_partition_dy partition(loc) select \ndeptno, dname, loc from dept;\n#æŸ¥çœ‹ç›®æ ‡åˆ†åŒºè¡¨çš„åˆ†åŒºæƒ…å†µ\nhive (default)&gt; show partitions dept_partition;\næ€è€ƒï¼šç›®æ ‡åˆ†åŒºè¡¨æ˜¯å¦‚ä½•åŒ¹é…åˆ°åˆ†åŒºå­—æ®µçš„ï¼Ÿ\n7.2 åˆ†æ¡¶è¡¨â€‹        åˆ†åŒºæä¾›ä¸€ä¸ªéš”ç¦»æ•°æ®å’Œä¼˜åŒ–æŸ¥è¯¢çš„ä¾¿åˆ©æ–¹å¼ã€‚ä¸è¿‡ï¼Œå¹¶éæ‰€æœ‰çš„æ•°æ®é›†éƒ½å¯å½¢æˆåˆç†çš„åˆ†åŒºã€‚å¯¹äºä¸€å¼ è¡¨æˆ–è€…åˆ†åŒºï¼ŒHive å¯ä»¥è¿›ä¸€æ­¥ç»„ç»‡æˆæ¡¶ï¼Œä¹Ÿå°±æ˜¯æ›´ä¸ºç»†ç²’åº¦çš„æ•°æ®èŒƒå›´åˆ’åˆ†ã€‚â€‹        åˆ†æ¡¶æ˜¯å°†æ•°æ®é›†åˆ†è§£æˆæ›´å®¹æ˜“ç®¡ç†çš„è‹¥å¹²éƒ¨åˆ†çš„å¦ä¸€ä¸ªæŠ€æœ¯ã€‚â€‹        åˆ†åŒºé’ˆå¯¹çš„æ˜¯æ•°æ®çš„å­˜å‚¨è·¯å¾„ï¼›åˆ†æ¡¶é’ˆå¯¹çš„æ˜¯æ•°æ®æ–‡ä»¶ã€‚1ï¼‰å…ˆåˆ›å»ºåˆ†æ¡¶è¡¨ï¼ˆ1ï¼‰æ•°æ®å‡†å¤‡\n1001 ss1\n1002 ss2\n1003 ss3\n1004 ss4\n1005 ss5\n1006 ss6\n1007 ss7\n1008 ss8\n1009 ss9\n1010 ss10\n1011 ss11\n1012 ss12\n1013 ss13\n1014 ss14\n1015 ss15\n1016 ss16\nï¼ˆ2ï¼‰åˆ›å»ºåˆ†æ¡¶è¡¨\ncreate table stu_buck(id int, name string)\nclustered by(id) \ninto 4 buckets\nrow format delimited fields terminated by '\\t';\nï¼ˆ3ï¼‰æŸ¥çœ‹è¡¨ç»“æ„\nhive (default)&gt; desc formatted stu_buck;\nNum Buckets: 4 \nï¼ˆ4ï¼‰å¯¼å…¥æ•°æ®åˆ°åˆ†æ¡¶è¡¨ä¸­ï¼Œload çš„æ–¹å¼\nhive (default)&gt; load data inpath '/student.txt' into table stu_buck;\nï¼ˆ5ï¼‰æŸ¥çœ‹åˆ›å»ºçš„åˆ†æ¡¶è¡¨ä¸­æ˜¯å¦åˆ†æˆ 4 ä¸ªæ¡¶ï¼ˆ6ï¼‰æŸ¥è¯¢åˆ†æ¡¶çš„æ•°æ®\nhive(default)&gt; select * from stu_buck;\nï¼ˆ7ï¼‰åˆ†æ¡¶è§„åˆ™ï¼š        æ ¹æ®ç»“æœå¯çŸ¥ï¼šHive çš„åˆ†æ¡¶é‡‡ç”¨å¯¹åˆ†æ¡¶å­—æ®µçš„å€¼è¿›è¡Œå“ˆå¸Œï¼Œç„¶åé™¤ä»¥æ¡¶çš„ä¸ªæ•°æ±‚ä½™çš„æ–¹å¼å†³å®šè¯¥æ¡è®°å½•å­˜æ”¾åœ¨å“ªä¸ªæ¡¶å½“ä¸­2ï¼‰åˆ†æ¡¶è¡¨æ“ä½œéœ€è¦æ³¨æ„çš„äº‹é¡¹: \nï¼ˆ1ï¼‰reduce çš„ä¸ªæ•°è®¾ç½®ä¸º-1,è®© Job è‡ªè¡Œå†³å®šéœ€è¦ç”¨å¤šå°‘ä¸ª reduce æˆ–è€…å°† reduce çš„ä¸ªæ•°è®¾ç½®ä¸ºå¤§äºç­‰äºåˆ†æ¡¶è¡¨çš„æ¡¶æ•°ï¼ˆ2ï¼‰ä» hdfs ä¸­ load æ•°æ®åˆ°åˆ†æ¡¶è¡¨ä¸­ï¼Œé¿å…æœ¬åœ°æ–‡ä»¶æ‰¾ä¸åˆ°é—®é¢˜\nï¼ˆ3ï¼‰ä¸è¦ä½¿ç”¨æœ¬åœ°æ¨¡å¼3ï¼‰insert æ–¹å¼å°†æ•°æ®å¯¼å…¥åˆ†æ¡¶è¡¨\nhive(default)&gt;insert into table stu_buck select * from student_insert;\n7.3 æŠ½æ ·æŸ¥è¯¢â€‹        å¯¹äºéå¸¸å¤§çš„æ•°æ®é›†ï¼Œæœ‰æ—¶ç”¨æˆ·éœ€è¦ä½¿ç”¨çš„æ˜¯ä¸€ä¸ªå…·æœ‰ä»£è¡¨æ€§çš„æŸ¥è¯¢ç»“æœè€Œä¸æ˜¯å…¨éƒ¨ç»“æœã€‚Hive å¯ä»¥é€šè¿‡å¯¹è¡¨è¿›è¡ŒæŠ½æ ·æ¥æ»¡è¶³è¿™ä¸ªéœ€æ±‚ã€‚è¯­æ³•: TABLESAMPLE(BUCKET x OUT OF y)æŸ¥è¯¢è¡¨ stu_buck ä¸­çš„æ•°æ®ã€‚\nhive (default)&gt; select * from stu_buck tablesample(bucket 1 out of 4 on id);\n# æ³¨æ„ï¼šx çš„å€¼å¿…é¡»å°äºç­‰äº y çš„å€¼ï¼Œå¦åˆ™\nFAILED: SemanticException [Error 10061]: Numerator should not be bigger \nthan denominator in sample clause for table stu_buck\nç¬¬ 8 ç«  å‡½æ•°8.1 ç³»ç»Ÿå†…ç½®å‡½æ•°# æŸ¥çœ‹ç³»ç»Ÿè‡ªå¸¦çš„å‡½æ•°\nhive&gt; show functions;\n# æ˜¾ç¤ºè‡ªå¸¦çš„å‡½æ•°çš„ç”¨æ³•\nhive&gt; desc function upper;\n# è¯¦ç»†æ˜¾ç¤ºè‡ªå¸¦çš„å‡½æ•°çš„ç”¨æ³•\nhive&gt; desc function extended upper;\n8.2 å¸¸ç”¨å†…ç½®å‡½æ•°ç©ºå­—æ®µèµ‹å€¼1ï¼‰å‡½æ•°è¯´æ˜        NVLï¼šç»™å€¼ä¸º NULL çš„æ•°æ®èµ‹å€¼ï¼Œå®ƒçš„æ ¼å¼æ˜¯ NVL( valueï¼Œdefault_value)ã€‚å®ƒçš„åŠŸèƒ½æ˜¯å¦‚æœ value ä¸º NULLï¼Œåˆ™ NVL å‡½æ•°è¿”å› default_value çš„å€¼ï¼Œå¦åˆ™è¿”å› value çš„å€¼ï¼Œå¦‚æœä¸¤ä¸ªå‚æ•°éƒ½ä¸º NULL ï¼Œåˆ™è¿”å› NULLã€‚ 2ï¼‰æ•°æ®å‡†å¤‡ï¼šé‡‡ç”¨å‘˜å·¥è¡¨3ï¼‰æŸ¥è¯¢ï¼šå¦‚æœå‘˜å·¥çš„ comm ä¸º NULLï¼Œåˆ™ç”¨-1 ä»£æ›¿\nhive (default)&gt; select comm,nvl(comm, -1) from emp;\nOK\ncomm _c1\n\nNULL -1.0\n300.0 300.0\n500.0 500.0\nNULL -1.0\n1400.0 1400.0\nNULL -1.0\nNULL -1.0\nNULL -1.0\nNULL -1.0\n0.0 0.0\nNULL -1.0\nNULL -1.0\nNULL -1.0\nNULL -1.0\n4ï¼‰æŸ¥è¯¢ï¼šå¦‚æœå‘˜å·¥çš„ comm ä¸º NULLï¼Œåˆ™ç”¨é¢†å¯¼ id ä»£æ›¿\nhive (default)&gt; select comm, nvl(comm,mgr) from emp;\nOK\ncomm _c1\nNULL 7902.0\n300.0 300.0\n500.0 500.0\nNULL 7839.0\n1400.0 1400.0\nNULL 7839.0\nNULL 7839.0\nNULL 7566.0\nNULL NULL\n0.0 0.0\nNULL 7788.0\nNULL 7698.0\nNULL 7566.0\nNULL 7782.0\nCASE WHEN THEN ELSE END1ï¼‰æ•°æ®å‡†å¤‡\n2ï¼‰éœ€æ±‚æ±‚å‡ºä¸åŒéƒ¨é—¨ç”·å¥³å„å¤šå°‘äººã€‚ç»“æœå¦‚ä¸‹ï¼š\ndept_Id ç”· å¥³\nA 2 1\nB 1 2\n3ï¼‰åˆ›å»ºæœ¬åœ° emp_sex.txtï¼Œå¯¼å…¥æ•°æ®\n[atguigu@hadoop102 datas]$ vi emp_sex.txt\næ‚Ÿç©º A ç”·\nå¤§æµ· A ç”·\nå®‹å®‹ B ç”·\nå‡¤å§ A å¥³\nå©·å§ B å¥³\nå©·å©· B å¥³ \n4ï¼‰åˆ›å»º hive è¡¨å¹¶å¯¼å…¥æ•°æ®\ncreate table emp_sex(\nname string, \ndept_id string, \nsex string) \nrow format delimited fields terminated by \"\\t\";\nload data local inpath '/opt/module/hive/data/emp_sex.txt' into table \nemp_sex;\n5ï¼‰æŒ‰éœ€æ±‚æŸ¥è¯¢æ•°æ®\nselect\n dept_id,\n sum(case sex when 'ç”·' then 1 else 0 end) male_count,\n sum(case sex when 'å¥³' then 1 else 0 end) female_count\nfrom emp_sex\ngroup by dept_id;\nè¡Œè½¬åˆ—1ï¼‰ç›¸å…³å‡½æ•°è¯´æ˜        CONCAT(string A/col, string B/colâ€¦)ï¼šè¿”å›è¾“å…¥å­—ç¬¦ä¸²è¿æ¥åçš„ç»“æœï¼Œæ”¯æŒä»»æ„ä¸ªè¾“å…¥å­—ç¬¦ä¸²;        CONCAT_WS(separator, str1, str2,â€¦)ï¼šå®ƒæ˜¯ä¸€ä¸ªç‰¹æ®Šå½¢å¼çš„ CONCAT()ã€‚ç¬¬ä¸€ä¸ªå‚æ•°å‰©ä½™å‚æ•°é—´çš„åˆ†éš”ç¬¦ã€‚åˆ†éš”ç¬¦å¯ä»¥æ˜¯ä¸å‰©ä½™å‚æ•°ä¸€æ ·çš„å­—ç¬¦ä¸²ã€‚å¦‚æœåˆ†éš”ç¬¦æ˜¯ NULLï¼Œè¿”å›å€¼ä¹Ÿå°†ä¸º NULLã€‚è¿™ä¸ªå‡½æ•°ä¼šè·³è¿‡åˆ†éš”ç¬¦å‚æ•°åçš„ä»»ä½• NULL å’Œç©ºå­—ç¬¦ä¸²ã€‚åˆ†éš”ç¬¦å°†è¢«åŠ åˆ°è¢«è¿æ¥çš„å­—ç¬¦ä¸²ä¹‹é—´;        æ³¨æ„: CONCAT_WS must be â€œstring or array        COLLECT_SET(col)ï¼šå‡½æ•°åªæ¥å—åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå®ƒçš„ä¸»è¦ä½œç”¨æ˜¯å°†æŸå­—æ®µçš„å€¼è¿›è¡Œå»é‡æ±‡æ€»ï¼Œäº§ç”Ÿ Array ç±»å‹å­—æ®µã€‚2ï¼‰æ•°æ®å‡†å¤‡\n3ï¼‰éœ€æ±‚\n# æŠŠæ˜Ÿåº§å’Œè¡€å‹ä¸€æ ·çš„äººå½’ç±»åˆ°ä¸€èµ·ã€‚ç»“æœå¦‚ä¸‹ï¼š\nå°„æ‰‹åº§,A å¤§æµ·|å‡¤å§\nç™½ç¾Šåº§,A å­™æ‚Ÿç©º|çŒªå…«æˆ’\nç™½ç¾Šåº§,B å®‹å®‹|è‹è€å¸ˆ\n4ï¼‰åˆ›å»ºæœ¬åœ° constellation.txtï¼Œå¯¼å…¥æ•°æ®\n[atguigu@hadoop102 datas]$ vim person_info.txt\nå­™æ‚Ÿç©º ç™½ç¾Šåº§ A\nå¤§æµ· å°„æ‰‹åº§ A\nå®‹å®‹ ç™½ç¾Šåº§ B\nçŒªå…«æˆ’ ç™½ç¾Šåº§ A\nå‡¤å§ å°„æ‰‹åº§ A\nè‹è€å¸ˆ ç™½ç¾Šåº§ B\n 5ï¼‰åˆ›å»º hive è¡¨å¹¶å¯¼å…¥æ•°æ®\ncreate table person_info(\nname string, \nconstellation string, \nblood_type string) \nrow format delimited fields terminated by \"\\t\";\nload data local inpath \"/opt/module/hive/data/person_info.txt\" into table \nperson_info;\n6ï¼‰æŒ‰éœ€æ±‚æŸ¥è¯¢æ•°æ®\nSELECT\nt1.c_b,\nCONCAT_WS(\"|\",collect_set(t1.name))\nFROM (\nSELECT\nNAME,\nCONCAT_WS(',',constellation,blood_type) c_b\nFROM person_info\n)t1\nGROUP BY t1.c_b\nåˆ—è½¬è¡Œ1ï¼‰å‡½æ•°è¯´æ˜        EXPLODE(col)ï¼šå°† hive ä¸€åˆ—ä¸­å¤æ‚çš„ Array æˆ–è€… Map ç»“æ„æ‹†åˆ†æˆå¤šè¡Œã€‚        LATERAL VIEWç”¨æ³•ï¼šLATERAL VIEW udtf(expression) tableAlias AS columnAliasè§£é‡Šï¼šç”¨äºå’Œ split, explode ç­‰ UDTF ä¸€èµ·ä½¿ç”¨ï¼Œå®ƒèƒ½å¤Ÿå°†ä¸€åˆ—æ•°æ®æ‹†æˆå¤šè¡Œæ•°æ®ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šå¯ä»¥å¯¹æ‹†åˆ†åçš„æ•°æ®è¿›è¡Œèšåˆã€‚\n2ï¼‰æ•°æ®å‡†å¤‡\nmovie category\nã€Šç–‘çŠ¯è¿½è¸ªã€‹ æ‚¬ç–‘,åŠ¨ä½œ,ç§‘å¹»,å‰§æƒ…\nã€ŠLie to meã€‹ æ‚¬ç–‘,è­¦åŒª,åŠ¨ä½œ,å¿ƒç†,å‰§æƒ…\nã€Šæˆ˜ç‹¼ 2ã€‹ æˆ˜äº‰,åŠ¨ä½œ,ç¾éš¾\n3ï¼‰éœ€æ±‚\nå°†ç”µå½±åˆ†ç±»ä¸­çš„æ•°ç»„æ•°æ®å±•å¼€ã€‚ç»“æœå¦‚ä¸‹ï¼š\nã€Šç–‘çŠ¯è¿½è¸ªã€‹ æ‚¬ç–‘\nã€Šç–‘çŠ¯è¿½è¸ªã€‹ åŠ¨ä½œ\nã€Šç–‘çŠ¯è¿½è¸ªã€‹ ç§‘å¹»\nã€Šç–‘çŠ¯è¿½è¸ªã€‹ å‰§æƒ…\nã€ŠLie to meã€‹ æ‚¬ç–‘\nã€ŠLie to meã€‹ è­¦åŒª\nã€ŠLie to meã€‹ åŠ¨ä½œ\nã€ŠLie to meã€‹ å¿ƒç†\nã€ŠLie to meã€‹ å‰§æƒ…\nã€Šæˆ˜ç‹¼ 2ã€‹ æˆ˜äº‰\nã€Šæˆ˜ç‹¼ 2ã€‹ åŠ¨ä½œ\nã€Šæˆ˜ç‹¼ 2ã€‹ ç¾éš¾\n4ï¼‰åˆ›å»ºæœ¬åœ° movie.txtï¼Œå¯¼å…¥æ•°æ®\n[atguigu@hadoop102 datas]$ vi movie_info.txt\nã€Šç–‘çŠ¯è¿½è¸ªã€‹ æ‚¬ç–‘,åŠ¨ä½œ,ç§‘å¹»,å‰§æƒ…\nã€ŠLie to meã€‹æ‚¬ç–‘,è­¦åŒª,åŠ¨ä½œ,å¿ƒç†,å‰§æƒ…\nã€Šæˆ˜ç‹¼ 2ã€‹ æˆ˜äº‰,åŠ¨ä½œ,ç¾éš¾\n5ï¼‰åˆ›å»º hive è¡¨å¹¶å¯¼å…¥æ•°æ®\ncreate table movie_info(\n movie string,\n category string)\nrow format delimited fields terminated by \"\\t\";\nload data local inpath \"/opt/module/data/movie.txt\" into table \nmovie_info;\n6ï¼‰æŒ‰éœ€æ±‚æŸ¥è¯¢æ•°æ®\nSELECT\nmovie,\ncategory_name\nFROM\nmovie_info\nlateral VIEW\nexplode(split(category,\",\")) movie_info_tmp AS category_name;\nçª—å£å‡½æ•°ï¼ˆå¼€çª—å‡½æ•°ï¼‰1ï¼‰ç›¸å…³å‡½æ•°è¯´æ˜OVER()ï¼šæŒ‡å®šåˆ†æå‡½æ•°å·¥ä½œçš„æ•°æ®çª—å£å¤§å°ï¼Œè¿™ä¸ªæ•°æ®çª—å£å¤§å°å¯èƒ½ä¼šéšç€è¡Œçš„å˜è€Œå˜åŒ–ã€‚CURRENT ROWï¼šå½“å‰è¡Œn PRECEDINGï¼šå¾€å‰ n è¡Œæ•°æ®n FOLLOWINGï¼šå¾€å n è¡Œæ•°æ®UNBOUNDEDï¼šèµ·ç‚¹ï¼Œ        UNBOUNDED PRECEDING è¡¨ç¤ºä»å‰é¢çš„èµ·ç‚¹ï¼Œ        UNBOUNDED FOLLOWING è¡¨ç¤ºåˆ°åé¢çš„ç»ˆç‚¹LAG(col,n,default_val)ï¼šå¾€å‰ç¬¬ n è¡Œæ•°æ®LEAD(col,n, default_val)ï¼šå¾€åç¬¬ n è¡Œæ•°æ®NTILE(n)ï¼šæŠŠæœ‰åºçª—å£çš„è¡Œåˆ†å‘åˆ°æŒ‡å®šæ•°æ®çš„ç»„ä¸­ï¼Œå„ä¸ªç»„æœ‰ç¼–å·ï¼Œç¼–å·ä» 1 å¼€å§‹ï¼Œå¯¹äºæ¯ä¸€è¡Œï¼ŒNTILE è¿”å›æ­¤è¡Œæ‰€å±çš„ç»„çš„ç¼–å·ã€‚æ³¨æ„ï¼šn å¿…é¡»ä¸º int ç±»å‹ã€‚2ï¼‰æ•°æ®å‡†å¤‡ï¼šnameï¼Œorderdateï¼Œcost\njack,2017-01-01,10\ntony,2017-01-02,15\njack,2017-02-03,23\ntony,2017-01-04,29\njack,2017-01-05,46\njack,2017-04-06,42\ntony,2017-01-07,50\njack,2017-01-08,55\nmart,2017-04-08,62\nmart,2017-04-09,68\nneil,2017-05-10,12\nmart,2017-04-11,75\nneil,2017-06-12,80\nmart,2017-04-13,94\n3ï¼‰éœ€æ±‚ï¼ˆ1ï¼‰æŸ¥è¯¢åœ¨ 2017 å¹´ 4 æœˆä»½è´­ä¹°è¿‡çš„é¡¾å®¢åŠæ€»äººæ•°ï¼ˆ2ï¼‰æŸ¥è¯¢é¡¾å®¢çš„è´­ä¹°æ˜ç»†åŠæœˆè´­ä¹°æ€»é¢ï¼ˆ3ï¼‰ä¸Šè¿°çš„åœºæ™¯, å°†æ¯ä¸ªé¡¾å®¢çš„ cost æŒ‰ç…§æ—¥æœŸè¿›è¡Œç´¯åŠ ï¼ˆ4ï¼‰æŸ¥è¯¢æ¯ä¸ªé¡¾å®¢ä¸Šæ¬¡çš„è´­ä¹°æ—¶é—´ï¼ˆ5ï¼‰æŸ¥è¯¢å‰ 20%æ—¶é—´çš„è®¢å•ä¿¡æ¯4ï¼‰åˆ›å»ºæœ¬åœ° business.txtï¼Œå¯¼å…¥æ•°æ®\n[atguigu@hadoop102 datas]$ vi business.txt\n5ï¼‰åˆ›å»º hive è¡¨å¹¶å¯¼å…¥æ•°æ®\ncreate table business(\nname string,\norderdate string,\ncost int\n) ROW FORMAT DELIMITED FIELDS TERMINATED BY ',';\nload data local inpath \"/opt/module/data/business.txt\" into table \nbusiness;\n6ï¼‰æŒ‰éœ€æ±‚æŸ¥è¯¢æ•°æ®ï¼ˆ1ï¼‰ æŸ¥è¯¢åœ¨ 2017 å¹´ 4 æœˆä»½è´­ä¹°è¿‡çš„é¡¾å®¢åŠæ€»äººæ•°\nselect name,count(*) over () \nfrom business\nwhere substring(orderdate,1,7) = '2017-04'\ngroup by name; \nï¼ˆ2ï¼‰ æŸ¥è¯¢é¡¾å®¢çš„è´­ä¹°æ˜ç»†åŠæœˆè´­ä¹°æ€»é¢\nselect name,orderdate,cost,sum(cost) over(partition by month(orderdate)) \nfrom business;\nï¼ˆ3ï¼‰ å°†æ¯ä¸ªé¡¾å®¢çš„ cost æŒ‰ç…§æ—¥æœŸè¿›è¡Œç´¯åŠ \nselect name,orderdate,cost,\nsum(cost) over() as sample1,#æ‰€æœ‰è¡Œç›¸åŠ \nsum(cost) over(partition by name) as sample2,#æŒ‰ name åˆ†ç»„ï¼Œç»„å†…æ•°æ®ç›¸åŠ \nsum(cost) over(partition by name order by orderdate) as sample3,#æŒ‰ nameåˆ†ç»„ï¼Œç»„å†…æ•°æ®ç´¯åŠ \nsum(cost) over(partition by name order by orderdate rows between \nUNBOUNDED PRECEDING and current row ) as sample4 ,#å’Œ sample3 ä¸€æ ·,ç”±èµ·ç‚¹åˆ°å½“å‰è¡Œçš„èšåˆ\nsum(cost) over(partition by name order by orderdate rows between 1 \nPRECEDING and current row) as sample5, #å½“å‰è¡Œå’Œå‰é¢ä¸€è¡Œåšèšåˆ\nsum(cost) over(partition by name order by orderdate rows between 1 \nPRECEDING AND 1 FOLLOWING ) as sample6,#å½“å‰è¡Œå’Œå‰è¾¹ä¸€è¡ŒåŠåé¢ä¸€è¡Œ\nsum(cost) over(partition by name order by orderdate rows between current \nrow and UNBOUNDED FOLLOWING ) as sample7 #å½“å‰è¡ŒåŠåé¢æ‰€æœ‰è¡Œ\nfrom business; \n#rows å¿…é¡»è·Ÿåœ¨ order by å­å¥ä¹‹åï¼Œå¯¹æ’åºçš„ç»“æœè¿›è¡Œé™åˆ¶ï¼Œä½¿ç”¨å›ºå®šçš„è¡Œæ•°æ¥é™åˆ¶åˆ†åŒºä¸­çš„æ•°æ®è¡Œæ•°é‡\nï¼ˆ4ï¼‰ æŸ¥çœ‹é¡¾å®¢ä¸Šæ¬¡çš„è´­ä¹°æ—¶é—´\nselect name,orderdate,cost,\nlag(orderdate,1,'1900-01-01') over(partition by name order by orderdate ) \nas time1, lag(orderdate,2) over (partition by name order by orderdate) as \ntime2 \nfrom business; \nï¼ˆ5ï¼‰ æŸ¥è¯¢å‰ 20%æ—¶é—´çš„è®¢å•ä¿¡æ¯\nselect * from (\n select name,orderdate,cost, ntile(5) over(order by orderdate) sorted\n from business\n) t\nwhere sorted = 1;\nRank1ï¼‰å‡½æ•°è¯´æ˜\nRANK() æ’åºç›¸åŒæ—¶ä¼šé‡å¤ï¼Œæ€»æ•°ä¸ä¼šå˜DENSE_RANK() æ’åºç›¸åŒæ—¶ä¼šé‡å¤ï¼Œæ€»æ•°ä¼šå‡å°‘ROW_NUMBER() ä¼šæ ¹æ®é¡ºåºè®¡ç®—\n2ï¼‰æ•°æ®å‡†å¤‡\n3ï¼‰éœ€æ±‚è®¡ç®—æ¯é—¨å­¦ç§‘æˆç»©æ’åã€‚4ï¼‰åˆ›å»ºæœ¬åœ° score.txtï¼Œå¯¼å…¥æ•°æ®\n[atguigu@hadoop102 datas]$ vi score.txt\n5ï¼‰åˆ›å»º hive è¡¨å¹¶å¯¼å…¥æ•°æ®\ncreate table score(\nname string,\nsubject string, \nscore int) \nrow format delimited fields terminated by \"\\t\";\nload data local inpath '/opt/module/data/score.txt' into table score;\n6ï¼‰æŒ‰éœ€æ±‚æŸ¥è¯¢æ•°æ®\nselect name,\nsubject,\nscore,\nrank() over(partition by subject order by score desc) rp,\ndense_rank() over(partition by subject order by score desc) drp,\nrow_number() over(partition by subject order by score desc) rmp\nfrom score;\n\nname subject score rp drp rmp\nå­™æ‚Ÿç©º æ•°å­¦ 95 1 1 1\nå®‹å®‹ æ•°å­¦ 86 2 2 2\nå©·å©· æ•°å­¦ 85 3 3 3\nå¤§æµ· æ•°å­¦ 56 4 4 4\nå®‹å®‹ è‹±è¯­ 84 1 1 1\nå¤§æµ· è‹±è¯­ 84 1 1 2\nå©·å©· è‹±è¯­ 78 3 2 3\nå­™æ‚Ÿç©º è‹±è¯­ 68 4 3 4\nå¤§æµ· è¯­æ–‡ 94 1 1 1\nå­™æ‚Ÿç©º è¯­æ–‡ 87 2 2 2\nå©·å©· è¯­æ–‡ 65 3 3 3\nå®‹å®‹ è¯­æ–‡ 64 4 4 4\nâ€‹        æ‰©å±•ï¼šæ±‚å‡ºæ¯é—¨å­¦ç§‘å‰ä¸‰åçš„å­¦ç”Ÿï¼Ÿ\n8.3 è‡ªå®šä¹‰å‡½æ•°1ï¼‰Hive è‡ªå¸¦äº†ä¸€äº›å‡½æ•°ï¼Œæ¯”å¦‚ï¼šmax/min ç­‰ï¼Œä½†æ˜¯æ•°é‡æœ‰é™ï¼Œè‡ªå·±å¯ä»¥é€šè¿‡è‡ªå®šä¹‰ UDF æ¥æ–¹ä¾¿çš„æ‰©å±•ã€‚2ï¼‰å½“ Hive æä¾›çš„å†…ç½®å‡½æ•°æ— æ³•æ»¡è¶³ä½ çš„ä¸šåŠ¡å¤„ç†éœ€è¦æ—¶ï¼Œæ­¤æ—¶å°±å¯ä»¥è€ƒè™‘ä½¿ç”¨ç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°ï¼ˆUDFï¼šuser-defined functionï¼‰ã€‚ \n3ï¼‰æ ¹æ®ç”¨æˆ·è‡ªå®šä¹‰å‡½æ•°ç±»åˆ«åˆ†ä¸ºä»¥ä¸‹ä¸‰ç§ï¼šï¼ˆ1ï¼‰UDFï¼ˆUser-Defined-Functionï¼‰            ä¸€è¿›ä¸€å‡ºï¼ˆ2ï¼‰UDAFï¼ˆUser-Defined Aggregation Functionï¼‰            èšé›†å‡½æ•°ï¼Œå¤šè¿›ä¸€å‡º            ç±»ä¼¼äºï¼šcount/max/minï¼ˆ3ï¼‰UDTFï¼ˆUser-Defined Table-Generating Functionsï¼‰            ä¸€è¿›å¤šå‡º            å¦‚ lateral view explode()4ï¼‰å®˜æ–¹æ–‡æ¡£åœ°å€https://cwiki.apache.org/confluence/display/Hive/HivePlugins5ï¼‰ç¼–ç¨‹æ­¥éª¤ï¼š \nï¼ˆ1ï¼‰ç»§æ‰¿ Hive æä¾›çš„ç±»\norg.apache.hadoop.hive.ql.udf.generic.GenericUDF\norg.apache.hadoop.hive.ql.udf.generic.GenericUDTF;\nï¼ˆ2ï¼‰å®ç°ç±»ä¸­çš„æŠ½è±¡æ–¹æ³•\nï¼ˆ3ï¼‰åœ¨ hive çš„å‘½ä»¤è¡Œçª—å£åˆ›å»ºå‡½æ•°\n#æ·»åŠ  jar\nadd jar linux_jar_path\n#åˆ›å»º function\ncreate [temporary] function [dbname.]function_name AS class_name;\nï¼ˆ4ï¼‰åœ¨ hive çš„å‘½ä»¤è¡Œçª—å£åˆ é™¤å‡½æ•°\ndrop [temporary] function [if exists] [dbname.]function_name;\n8.4 è‡ªå®šä¹‰ UDF å‡½æ•°0ï¼‰éœ€æ±‚:è‡ªå®šä¹‰ä¸€ä¸ª UDF å®ç°è®¡ç®—ç»™å®šå­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œä¾‹å¦‚ï¼š\nhive(default)&gt; select my_len(\"abcd\"); \n4 \n1ï¼‰åˆ›å»ºä¸€ä¸ª Maven å·¥ç¨‹ Hive\n2ï¼‰å¯¼å…¥ä¾èµ–\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.hive&lt;/groupId&gt;\n        &lt;artifactId&gt;hive-exec&lt;/artifactId&gt;\n        &lt;version&gt;3.1.2&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n3ï¼‰åˆ›å»ºä¸€ä¸ªç±»\npackage com.atguigu.hive;\nimport org.apache.hadoop.hive.ql.exec.UDFArgumentException;\nimport org.apache.hadoop.hive.ql.exec.UDFArgumentLengthException;\nimport org.apache.hadoop.hive.ql.exec.UDFArgumentTypeException;\nimport org.apache.hadoop.hive.ql.metadata.HiveException;\nimport org.apache.hadoop.hive.ql.udf.generic.GenericUDF;\nimport org.apache.hadoop.hive.serde2.objectinspector.ObjectInspector;\nimport \n    org.apache.hadoop.hive.serde2.objectinspector.primitive.PrimitiveObjectIn\n    spectorFactory;\n/**\n\n* è‡ªå®šä¹‰ UDF å‡½æ•°ï¼Œéœ€è¦ç»§æ‰¿ GenericUDF ç±»\n* éœ€æ±‚: è®¡ç®—æŒ‡å®šå­—ç¬¦ä¸²çš„é•¿åº¦\n  */\npublic class MyStringLength extends GenericUDF {\n    /**\n   *\n * @param arguments è¾“å…¥å‚æ•°ç±»å‹çš„é‰´åˆ«å™¨å¯¹è±¡\n * @return è¿”å›å€¼ç±»å‹çš„é‰´åˆ«å™¨å¯¹è±¡\n * @throws UDFArgumentException\n   */\n    @Override\n    public ObjectInspector initialize(ObjectInspector[] arguments) throws UDFArgumentException {\n        // åˆ¤æ–­è¾“å…¥å‚æ•°çš„ä¸ªæ•°\n        if(arguments.length !=1){\n            throw new UDFArgumentLengthException(\"Input Args Length Error!!!\");\n        }\n        // åˆ¤æ–­è¾“å…¥å‚æ•°çš„ç±»å‹\n        if(!arguments[0].getCategory().equals(ObjectInspector.Category.PRIMITIVE)){\n            throw new UDFArgumentTypeException(0,\"Input Args Type Error!!!\");\n        }\n        //å‡½æ•°æœ¬èº«è¿”å›å€¼ä¸º intï¼Œéœ€è¦è¿”å› int ç±»å‹çš„é‰´åˆ«å™¨å¯¹è±¡\n        return PrimitiveObjectInspectorFactory.javaIntObjectInspector;\n    }\n    /**\n\n * å‡½æ•°çš„é€»è¾‘å¤„ç†\n * @param arguments è¾“å…¥çš„å‚æ•°\n * @return è¿”å›å€¼\n * @throws HiveException\n   */\n    @Override\n    public Object evaluate(DeferredObject[] arguments) throws HiveException {\n        if(arguments[0].get() == null){\n            return 0;\n        }\n        return arguments[0].get().toString().length();\n    }\n    @Override\n    public String getDisplayString(String[] children) {\n        return \"\";\n    } \n} \n4ï¼‰æ‰“æˆ jar åŒ…ä¸Šä¼ åˆ°æœåŠ¡å™¨/opt/module/data/myudf.jar5ï¼‰å°† jar åŒ…æ·»åŠ åˆ° hive çš„ classpath\nhive (default)&gt; add jar /opt/module/data/myudf.jar;\n6ï¼‰åˆ›å»ºä¸´æ—¶å‡½æ•°ä¸å¼€å‘å¥½çš„ java class å…³è”\nhive (default)&gt; create temporary function my_len as \"com.atguigu.hive.\nMyStringLength\";\n7ï¼‰å³å¯åœ¨ hql ä¸­ä½¿ç”¨è‡ªå®šä¹‰çš„å‡½æ•°\nhive (default)&gt; select ename,my_len(ename) ename_len from emp;\n8.5 è‡ªå®šä¹‰ UDTF å‡½æ•°0ï¼‰éœ€æ±‚        è‡ªå®šä¹‰ä¸€ä¸ª UDTF å®ç°å°†ä¸€ä¸ªä»»æ„åˆ†å‰²ç¬¦çš„å­—ç¬¦ä¸²åˆ‡å‰²æˆç‹¬ç«‹çš„å•è¯ï¼Œä¾‹å¦‚ï¼š\nhive(default)&gt; select myudtf(\"hello,world,hadoop,hive\", \",\");\nhello\nworld\nhadoop\nhive\n1ï¼‰ä»£ç å®ç°\n* package com.atguigu.udtf;\nimport org.apache.hadoop.hive.ql.exec.UDFArgumentException;\nimport org.apache.hadoop.hive.ql.metadata.HiveException;\nimport org.apache.hadoop.hive.ql.udf.generic.GenericUDTF;\nimport org.apache.hadoop.hive.serde2.objectinspector.ObjectInspector;\nimport \n    org.apache.hadoop.hive.serde2.objectinspector.ObjectInspectorFactory;\nimport \n    org.apache.hadoop.hive.serde2.objectinspector.StructObjectInspector;\nimport \n    org.apache.hadoop.hive.serde2.objectinspector.primitive.PrimitiveObjectIn\n    spectorFactory;\nimport java.util.ArrayList;\nimport java.util.List;\npublic class MyUDTF extends GenericUDTF {\n    private ArrayList&lt;String&gt; outList = new ArrayList&lt;&gt;();\n    @Override\n    public StructObjectInspector initialize(StructObjectInspector argOIs) \n        throws UDFArgumentException {\n        //1.å®šä¹‰è¾“å‡ºæ•°æ®çš„åˆ—åå’Œç±»å‹\n        List&lt;String&gt; fieldNames = new ArrayList&lt;&gt;();\n        List&lt;ObjectInspector&gt; fieldOIs = new ArrayList&lt;&gt;();\n        //2.æ·»åŠ è¾“å‡ºæ•°æ®çš„åˆ—åå’Œç±»å‹\n        fieldNames.add(\"lineToWord\");\n        fieldOIs.add(PrimitiveObjectInspectorFactory.javaStringObjectInspector);\n        return \n            ObjectInspectorFactory.getStandardStructObjectInspector(fieldNames, fieldOIs);\n    }\n    @Override\n    public void process(Object[] args) throws HiveException {\n        //1.è·å–åŸå§‹æ•°æ®\n        String arg = args[0].toString();\n        //2.è·å–æ•°æ®ä¼ å…¥çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œæ­¤å¤„ä¸ºåˆ†éš”ç¬¦\n        String splitKey = args[1].toString();\n        //3.å°†åŸå§‹æ•°æ®æŒ‰ç…§ä¼ å…¥çš„åˆ†éš”ç¬¦è¿›è¡Œåˆ‡åˆ†\n        String[] fields = arg.split(splitKey);\n        //4.éå†åˆ‡åˆ†åçš„ç»“æœï¼Œå¹¶å†™å‡º\n        for (String field : fields) {\n            //é›†åˆä¸ºå¤ç”¨çš„ï¼Œé¦–å…ˆæ¸…ç©ºé›†åˆ\n            outList.clear();\n            //å°†æ¯ä¸€ä¸ªå•è¯æ·»åŠ è‡³é›†åˆ\n            outList.add(field);\n            //å°†é›†åˆå†…å®¹å†™å‡º\n            forward(outList);\n        }\n    }\n    @Override\n    public void close() throws HiveException {\n    } \n} \n2ï¼‰æ‰“æˆ jar åŒ…ä¸Šä¼ åˆ°æœåŠ¡å™¨/opt/module/hive/data/myudtf.jar3ï¼‰å°† jar åŒ…æ·»åŠ åˆ° hive çš„ classpath ä¸‹\nhive (default)&gt; add jar /opt/module/hive/data/myudtf.jar;\n4ï¼‰åˆ›å»ºä¸´æ—¶å‡½æ•°ä¸å¼€å‘å¥½çš„ java class å…³è”\nhive (default)&gt; create temporary function myudtf as \n\"com.atguigu.hive.MyUDTF\";\n5ï¼‰ä½¿ç”¨è‡ªå®šä¹‰çš„å‡½æ•°\nhive (default)&gt; select myudtf(\"hello,world,hadoop,hive\",\",\"); \nç¬¬ 9 ç«  å‹ç¼©å’Œå­˜å‚¨9.1 Hadoop å‹ç¼©é…ç½®MR æ”¯æŒçš„å‹ç¼©ç¼–ç \n\n\nâ€‹        http://google.github.io/snappy/â€‹        On a single core of a Core i7 processor in 64-bit mode, Snappy compresses at about 250MB/sec or more and decompresses at about 500 MB/sec or more.å‹ç¼©å‚æ•°é…ç½®â€‹        è¦åœ¨ Hadoop ä¸­å¯ç”¨å‹ç¼©ï¼Œå¯ä»¥é…ç½®å¦‚ä¸‹å‚æ•°ï¼ˆmapred-site.xml æ–‡ä»¶ä¸­ï¼‰ï¼š\nå‹ç¼©å‚æ•°é…ç½®        è¦åœ¨ Hadoop ä¸­å¯ç”¨å‹ç¼©ï¼Œå¯ä»¥é…ç½®å¦‚ä¸‹å‚æ•°ï¼ˆmapred-site.xml æ–‡ä»¶ä¸­ï¼‰ï¼š\n\n9.2 å¼€å¯ Map è¾“å‡ºé˜¶æ®µå‹ç¼©ï¼ˆMR å¼•æ“ï¼‰å¼€å¯ map è¾“å‡ºé˜¶æ®µå‹ç¼©å¯ä»¥å‡å°‘ job ä¸­ map å’Œ Reduce task é—´æ•°æ®ä¼ è¾“é‡ã€‚å…·ä½“é…ç½®å¦‚ä¸‹ï¼š1ï¼‰æ¡ˆä¾‹å®æ“ï¼š\n# å¼€å¯ hive ä¸­é—´ä¼ è¾“æ•°æ®å‹ç¼©åŠŸèƒ½\nhive (default)&gt;set hive.exec.compress.intermediate=true;\n# å¼€å¯ mapreduce ä¸­ map è¾“å‡ºå‹ç¼©åŠŸèƒ½\nhive (default)&gt;set mapreduce.map.output.compress=true;\n# è®¾ç½® mapreduce ä¸­ map è¾“å‡ºæ•°æ®çš„å‹ç¼©æ–¹å¼\nhive (default)&gt;set mapreduce.map.output.compress.codec=org.apache.hadoop.io.compress.SnappyCodec;\n# æ‰§è¡ŒæŸ¥è¯¢è¯­å¥\nhive (default)&gt; select count(ename) name from emp;\n9.3 å¼€å¯ Reduce è¾“å‡ºé˜¶æ®µå‹ç¼©â€‹        å½“ Hive å°† è¾“ å‡º å†™ å…¥ åˆ° è¡¨ ä¸­ æ—¶ ï¼Œ è¾“å‡ºå†…å®¹åŒæ ·å¯ä»¥è¿›è¡Œå‹ç¼©ã€‚å±æ€§hive.exec.compress.outputæ§åˆ¶ç€è¿™ä¸ªåŠŸèƒ½ã€‚ç”¨æˆ·å¯èƒ½éœ€è¦ä¿æŒé»˜è®¤è®¾ç½®æ–‡ä»¶ä¸­çš„é»˜è®¤å€¼falseï¼Œè¿™æ ·é»˜è®¤çš„è¾“å‡ºå°±æ˜¯éå‹ç¼©çš„çº¯æ–‡æœ¬æ–‡ä»¶äº†ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡åœ¨æŸ¥è¯¢è¯­å¥æˆ–æ‰§è¡Œè„šæœ¬ä¸­è®¾ç½®è¿™ä¸ªå€¼ä¸º trueï¼Œæ¥å¼€å¯è¾“å‡ºç»“æœå‹ç¼©åŠŸèƒ½ã€‚1ï¼‰æ¡ˆä¾‹å®æ“ï¼š\n# å¼€å¯ hive æœ€ç»ˆè¾“å‡ºæ•°æ®å‹ç¼©åŠŸèƒ½\nhive (default)&gt;set hive.exec.compress.output=true;\n# å¼€å¯ mapreduce æœ€ç»ˆè¾“å‡ºæ•°æ®å‹ç¼©\nhive (default)&gt;set mapreduce.output.fileoutputformat.compress=true;\n# è®¾ç½® mapreduce æœ€ç»ˆæ•°æ®è¾“å‡ºå‹ç¼©æ–¹å¼\nhive (default)&gt; set mapreduce.output.fileoutputformat.compress.codec =\norg.apache.hadoop.io.compress.SnappyCodec;\n# è®¾ç½® mapreduce æœ€ç»ˆæ•°æ®è¾“å‡ºå‹ç¼©ä¸ºå—å‹ç¼©\nhive (default)&gt; set \nmapreduce.output.fileoutputformat.compress.type=BLOCK;\n# æµ‹è¯•ä¸€ä¸‹è¾“å‡ºç»“æœæ˜¯å¦æ˜¯å‹ç¼©æ–‡ä»¶\nhive (default)&gt; insert overwrite local directory\n'/opt/module/data/distribute-result' select * from emp distribute by \ndeptno sort by empno desc;\n9.4 æ–‡ä»¶å­˜å‚¨æ ¼å¼â€‹        Hive æ”¯æŒçš„å­˜å‚¨æ•°æ®çš„æ ¼å¼ä¸»è¦æœ‰ï¼šTEXTFILE ã€SEQUENCEFILEã€ORCã€PARQUETã€‚\n\nåˆ—å¼å­˜å‚¨å’Œè¡Œå¼å­˜å‚¨å¦‚å›¾æ‰€ç¤ºå·¦è¾¹ä¸ºé€»è¾‘è¡¨ï¼Œå³è¾¹ç¬¬ä¸€ä¸ªä¸ºè¡Œå¼å­˜å‚¨ï¼Œç¬¬äºŒä¸ªä¸ºåˆ—å¼å­˜å‚¨ã€‚1ï¼‰è¡Œå­˜å‚¨çš„ç‰¹ç‚¹        æŸ¥è¯¢æ»¡è¶³æ¡ä»¶çš„ä¸€æ•´è¡Œæ•°æ®çš„æ—¶å€™ï¼Œåˆ—å­˜å‚¨åˆ™éœ€è¦å»æ¯ä¸ªèšé›†çš„å­—æ®µæ‰¾åˆ°å¯¹åº”çš„æ¯ä¸ªåˆ—çš„å€¼ï¼Œè¡Œå­˜å‚¨åªéœ€è¦æ‰¾åˆ°å…¶ä¸­ä¸€ä¸ªå€¼ï¼Œå…¶ä½™çš„å€¼éƒ½åœ¨ç›¸é‚»åœ°æ–¹ï¼Œæ‰€ä»¥æ­¤æ—¶è¡Œå­˜å‚¨æŸ¥è¯¢çš„é€Ÿåº¦æ›´å¿«ã€‚2ï¼‰åˆ—å­˜å‚¨çš„ç‰¹ç‚¹        å› ä¸ºæ¯ä¸ªå­—æ®µçš„æ•°æ®èšé›†å­˜å‚¨ï¼Œåœ¨æŸ¥è¯¢åªéœ€è¦å°‘æ•°å‡ ä¸ªå­—æ®µçš„æ—¶å€™ï¼Œèƒ½å¤§å¤§å‡å°‘è¯»å–çš„æ•°æ®é‡ï¼›æ¯ä¸ªå­—æ®µçš„æ•°æ®ç±»å‹ä¸€å®šæ˜¯ç›¸åŒçš„ï¼Œåˆ—å¼å­˜å‚¨å¯ä»¥é’ˆå¯¹æ€§çš„è®¾è®¡æ›´å¥½çš„è®¾è®¡å‹ç¼©ç®—æ³•ã€‚        TEXTFILE å’Œ SEQUENCEFILE çš„å­˜å‚¨æ ¼å¼éƒ½æ˜¯åŸºäºè¡Œå­˜å‚¨çš„ï¼›        ORC å’Œ PARQUET æ˜¯åŸºäºåˆ—å¼å­˜å‚¨çš„ã€‚TextFile æ ¼å¼        é»˜è®¤æ ¼å¼ï¼Œæ•°æ®ä¸åšå‹ç¼©ï¼Œç£ç›˜å¼€é”€å¤§ï¼Œæ•°æ®è§£æå¼€é”€å¤§ã€‚å¯ç»“åˆ Gzipã€Bzip2 ä½¿ç”¨ï¼Œä½†ä½¿ç”¨ Gzip è¿™ç§æ–¹å¼ï¼Œhive ä¸ä¼šå¯¹æ•°æ®è¿›è¡Œåˆ‡åˆ†ï¼Œä»è€Œæ— æ³•å¯¹æ•°æ®è¿›è¡Œå¹¶è¡Œæ“ä½œã€‚Orc æ ¼å¼        Orc (Optimized Row Columnar)æ˜¯ Hive 0.11 ç‰ˆé‡Œå¼•å…¥çš„æ–°çš„å­˜å‚¨æ ¼å¼ã€‚        å¦‚ä¸‹å›¾æ‰€ç¤ºå¯ä»¥çœ‹åˆ°æ¯ä¸ª Orc æ–‡ä»¶ç”± 1 ä¸ªæˆ–å¤šä¸ª stripe ç»„æˆï¼Œæ¯ä¸ª stripe ä¸€èˆ¬ä¸º HDFSçš„å—å¤§å°ï¼Œæ¯ä¸€ä¸ª stripe åŒ…å«å¤šæ¡è®°å½•ï¼Œè¿™äº›è®°å½•æŒ‰ç…§åˆ—è¿›è¡Œç‹¬ç«‹å­˜å‚¨ï¼Œå¯¹åº”åˆ° Parquetä¸­çš„ row group çš„æ¦‚å¿µã€‚æ¯ä¸ª Stripe é‡Œæœ‰ä¸‰éƒ¨åˆ†ç»„æˆï¼Œåˆ†åˆ«æ˜¯ Index Dataï¼ŒRow Dataï¼ŒStripe Footerï¼š\n\n1ï¼‰Index Dataï¼šä¸€ä¸ªè½»é‡çº§çš„ indexï¼Œé»˜è®¤æ˜¯æ¯éš” 1W è¡Œåšä¸€ä¸ªç´¢å¼•ã€‚è¿™é‡Œåšçš„ç´¢å¼•åº”è¯¥åªæ˜¯è®°å½•æŸè¡Œçš„å„å­—æ®µåœ¨ Row Data ä¸­çš„ offsetã€‚ \n2ï¼‰Row Dataï¼šå­˜çš„æ˜¯å…·ä½“çš„æ•°æ®ï¼Œå…ˆå–éƒ¨åˆ†è¡Œï¼Œç„¶åå¯¹è¿™äº›è¡ŒæŒ‰åˆ—è¿›è¡Œå­˜å‚¨ã€‚å¯¹æ¯ä¸ªåˆ—è¿›è¡Œäº†ç¼–ç ï¼Œåˆ†æˆå¤šä¸ª Stream æ¥å­˜å‚¨ã€‚ \n3ï¼‰Stripe Footerï¼šå­˜çš„æ˜¯å„ä¸ª Stream çš„ç±»å‹ï¼Œé•¿åº¦ç­‰ä¿¡æ¯ã€‚\nâ€‹        æ¯ä¸ªæ–‡ä»¶æœ‰ä¸€ä¸ª File Footerï¼Œè¿™é‡Œé¢å­˜çš„æ˜¯æ¯ä¸ª Stripe çš„è¡Œæ•°ï¼Œæ¯ä¸ª Column çš„æ•°æ®ç±»å‹ä¿¡æ¯ç­‰ï¼›æ¯ä¸ªæ–‡ä»¶çš„å°¾éƒ¨æ˜¯ä¸€ä¸ª PostScriptï¼Œè¿™é‡Œé¢è®°å½•äº†æ•´ä¸ªæ–‡ä»¶çš„å‹ç¼©ç±»å‹ä»¥åŠFileFooter çš„é•¿åº¦ä¿¡æ¯ç­‰ã€‚åœ¨è¯»å–æ–‡ä»¶æ—¶ï¼Œä¼š seek åˆ°æ–‡ä»¶å°¾éƒ¨è¯» PostScriptï¼Œä»é‡Œé¢è§£æåˆ°File Footer é•¿åº¦ï¼Œå†è¯» FileFooterï¼Œä»é‡Œé¢è§£æåˆ°å„ä¸ª Stripe ä¿¡æ¯ï¼Œå†è¯»å„ä¸ª Stripeï¼Œå³ä»åå¾€å‰è¯»ã€‚\nParquet æ ¼å¼        Parquet æ–‡ä»¶æ˜¯ä»¥äºŒè¿›åˆ¶æ–¹å¼å­˜å‚¨çš„ï¼Œæ‰€ä»¥æ˜¯ä¸å¯ä»¥ç›´æ¥è¯»å–çš„ï¼Œæ–‡ä»¶ä¸­åŒ…æ‹¬è¯¥æ–‡ä»¶çš„æ•°æ®å’Œå…ƒæ•°æ®ï¼Œå› æ­¤ Parquet æ ¼å¼æ–‡ä»¶æ˜¯è‡ªè§£æçš„ã€‚ï¼ˆ1ï¼‰è¡Œç»„(Row Group)ï¼šæ¯ä¸€ä¸ªè¡Œç»„åŒ…å«ä¸€å®šçš„è¡Œæ•°ï¼Œåœ¨ä¸€ä¸ª HDFS æ–‡ä»¶ä¸­è‡³å°‘å­˜å‚¨ä¸€ä¸ªè¡Œç»„ï¼Œç±»ä¼¼äº orc çš„ stripe çš„æ¦‚å¿µã€‚ï¼ˆ2ï¼‰åˆ—å—(Column Chunk)ï¼šåœ¨ä¸€ä¸ªè¡Œç»„ä¸­æ¯ä¸€åˆ—ä¿å­˜åœ¨ä¸€ä¸ªåˆ—å—ä¸­ï¼Œè¡Œç»„ä¸­çš„æ‰€æœ‰åˆ—è¿ç»­çš„å­˜å‚¨åœ¨è¿™ä¸ªè¡Œç»„æ–‡ä»¶ä¸­ã€‚ä¸€ä¸ªåˆ—å—ä¸­çš„å€¼éƒ½æ˜¯ç›¸åŒç±»å‹çš„ï¼Œä¸åŒçš„åˆ—å—å¯èƒ½ä½¿ç”¨ä¸åŒçš„ç®—æ³•è¿›è¡Œå‹ç¼©ã€‚ï¼ˆ3ï¼‰é¡µ(Page)ï¼šæ¯ä¸€ä¸ªåˆ—å—åˆ’åˆ†ä¸ºå¤šä¸ªé¡µï¼Œä¸€ä¸ªé¡µæ˜¯æœ€å°çš„ç¼–ç çš„å•ä½ï¼Œåœ¨åŒä¸€ä¸ªåˆ—å—çš„ä¸åŒé¡µå¯èƒ½ä½¿ç”¨ä¸åŒçš„ç¼–ç æ–¹å¼ã€‚        é€šå¸¸æƒ…å†µä¸‹ï¼Œåœ¨å­˜å‚¨ Parquet æ•°æ®çš„æ—¶å€™ä¼šæŒ‰ç…§ Block å¤§å°è®¾ç½®è¡Œç»„çš„å¤§å°ï¼Œç”±äºä¸€èˆ¬æƒ…å†µä¸‹æ¯ä¸€ä¸ª Mapper ä»»åŠ¡å¤„ç†æ•°æ®çš„æœ€å°å•ä½æ˜¯ä¸€ä¸ª Blockï¼Œè¿™æ ·å¯ä»¥æŠŠæ¯ä¸€ä¸ªè¡Œç»„ç”±ä¸€ä¸ª Mapper ä»»åŠ¡å¤„ç†ï¼Œå¢å¤§ä»»åŠ¡æ‰§è¡Œå¹¶è¡Œåº¦ã€‚Parquet æ–‡ä»¶çš„æ ¼å¼ã€‚        ä¸Šå›¾å±•ç¤ºäº†ä¸€ä¸ª Parquet æ–‡ä»¶çš„å†…å®¹ï¼Œä¸€ä¸ªæ–‡ä»¶ä¸­å¯ä»¥å­˜å‚¨å¤šä¸ªè¡Œç»„ï¼Œæ–‡ä»¶çš„é¦–ä½éƒ½æ˜¯è¯¥æ–‡ä»¶çš„ Magic Codeï¼Œç”¨äºæ ¡éªŒå®ƒæ˜¯å¦æ˜¯ä¸€ä¸ª Parquet æ–‡ä»¶ï¼ŒFooter length è®°å½•äº†æ–‡ä»¶å…ƒæ•°æ®çš„å¤§å°ï¼Œé€šè¿‡è¯¥å€¼å’Œæ–‡ä»¶é•¿åº¦å¯ä»¥è®¡ç®—å‡ºå…ƒæ•°æ®çš„åç§»é‡ï¼Œæ–‡ä»¶çš„å…ƒæ•°æ®ä¸­åŒ…æ‹¬æ¯ä¸€ä¸ªè¡Œç»„çš„å…ƒæ•°æ®ä¿¡æ¯å’Œè¯¥æ–‡ä»¶å­˜å‚¨æ•°æ®çš„ Schema ä¿¡æ¯ã€‚é™¤äº†æ–‡ä»¶ä¸­æ¯ä¸€ä¸ªè¡Œç»„çš„å…ƒæ•°æ®ï¼Œæ¯ä¸€é¡µçš„å¼€å§‹éƒ½ä¼šå­˜å‚¨è¯¥é¡µçš„å…ƒæ•°æ®ï¼Œåœ¨ Parquet ä¸­ï¼Œæœ‰ä¸‰ç§ç±»å‹çš„é¡µï¼šæ•°æ®é¡µã€å­—å…¸é¡µå’Œç´¢å¼•é¡µã€‚æ•°æ®é¡µç”¨äºå­˜å‚¨å½“å‰è¡Œç»„ä¸­è¯¥åˆ—çš„å€¼ï¼Œå­—å…¸é¡µå­˜å‚¨è¯¥åˆ—å€¼çš„ç¼–ç å­—å…¸ï¼Œæ¯ä¸€ä¸ªåˆ—å—ä¸­æœ€å¤šåŒ…å«ä¸€ä¸ªå­—å…¸é¡µï¼Œç´¢å¼•é¡µç”¨æ¥å­˜å‚¨å½“å‰è¡Œç»„ä¸‹è¯¥åˆ—çš„ç´¢å¼•ï¼Œç›®å‰ Parquet ä¸­è¿˜ä¸æ”¯æŒç´¢å¼•é¡µã€‚ä¸»æµæ–‡ä»¶å­˜å‚¨æ ¼å¼å¯¹æ¯”å®éªŒ        ä»å­˜å‚¨æ–‡ä»¶çš„å‹ç¼©æ¯”å’ŒæŸ¥è¯¢é€Ÿåº¦ä¸¤ä¸ªè§’åº¦å¯¹æ¯”ã€‚        å­˜å‚¨æ–‡ä»¶çš„å‹ç¼©æ¯”æµ‹è¯•ï¼š1ï¼‰æµ‹è¯•æ•°æ®2ï¼‰TextFileï¼ˆ1)åˆ›å»ºè¡¨ï¼Œå­˜å‚¨æ•°æ®æ ¼å¼ä¸º TEXTFILE\ncreate table log_text (\n    track_time string,\n    url string,\n    session_id string,\n    referer string,\n    ip string,\n    end_user_id string,\n    city_id string\n)\nrow format delimited fields terminated by '\\t'\nstored as textfile;\nï¼ˆ2ï¼‰å‘è¡¨ä¸­åŠ è½½æ•°æ®\nhive (default)&gt; load data local inpath '/opt/module/hive/datas/log.data' \ninto table log_text ;\nï¼ˆ3ï¼‰æŸ¥çœ‹è¡¨ä¸­æ•°æ®å¤§å°\nhive (default)&gt; dfs -du -h /user/hive/warehouse/log_text;\n18.13 M /user/hive/warehouse/log_text/log.data\n3ï¼‰ORCï¼ˆ1ï¼‰åˆ›å»ºè¡¨ï¼Œå­˜å‚¨æ•°æ®æ ¼å¼ä¸º ORC\ncreate table log_orc(\n    track_time string,\n    url string,\n    session_id string,\n    referer string,\n    ip string,\n    end_user_id string,\n    city_id string\n)\nrow format delimited fields terminated by '\\t'\nstored as orc\ntblproperties(\"orc.compress\"=\"NONE\"); -- è®¾ç½® orc å­˜å‚¨ä¸ä½¿ç”¨å‹ç¼©\nï¼ˆ2ï¼‰å‘è¡¨ä¸­åŠ è½½æ•°æ®\nhive (default)&gt; insert into table log_orc select * from log_text;\nï¼ˆ3ï¼‰æŸ¥çœ‹è¡¨ä¸­æ•°æ®å¤§å°\nhive (default)&gt; dfs -du -h /user/hive/warehouse/log_orc/ ;\n7.7 M /user/hive/warehouse/log_orc/000000_0\n4ï¼‰Parquetï¼ˆ1ï¼‰åˆ›å»ºè¡¨ï¼Œå­˜å‚¨æ•°æ®æ ¼å¼ä¸º parquet\ncreate table log_parquet(\n    track_time string,\n    url string,\n    session_id string,\n    referer string,\n    ip string,\n    end_user_id string,\n    city_id string\n)\nrow format delimited fields terminated by '\\t'\nstored as parquet;\nï¼ˆ2ï¼‰å‘è¡¨ä¸­åŠ è½½æ•°æ®\nhive (default)&gt; insert into table log_parquet select * from log_text;\nï¼ˆ3ï¼‰æŸ¥çœ‹è¡¨ä¸­æ•°æ®å¤§å°\nhive (default)&gt; dfs -du -h /user/hive/warehouse/log_parquet/;\n13.1 M /user/hive/warehouse/log_parquet/000000_0\nå­˜å‚¨æ–‡ä»¶çš„å¯¹æ¯”æ€»ç»“ï¼šORC &gt; Parquet &gt; textFileå­˜å‚¨æ–‡ä»¶çš„æŸ¥è¯¢é€Ÿåº¦æµ‹è¯•ï¼š \n# TextFile\nhive (default)&gt; insert overwrite local directory \n'/opt/module/data/log_text' select substring(url,1,4) from log_text;\n# ORC\nhive (default)&gt; insert overwrite local directory \n'/opt/module/data/log_orc' select substring(url,1,4) from log_orc;\n# Parquet\nhive (default)&gt; insert overwrite local directory \n'/opt/module/data/log_parquet' select substring(url,1,4) from \nlog_parquet;\nå­˜å‚¨æ–‡ä»¶çš„æŸ¥è¯¢é€Ÿåº¦æ€»ç»“ï¼šæŸ¥è¯¢é€Ÿåº¦ç›¸è¿‘ã€‚\n9.5 å­˜å‚¨å’Œå‹ç¼©ç»“åˆæµ‹è¯•å­˜å‚¨å’Œå‹ç¼©å®˜ç½‘ï¼šhttps://cwiki.apache.org/confluence/display/Hive/LanguageManual+ORCORC å­˜å‚¨æ–¹å¼çš„å‹ç¼©ï¼š\n\næ³¨æ„ï¼šæ‰€æœ‰å…³äº ORCFile çš„å‚æ•°éƒ½æ˜¯åœ¨ HQL è¯­å¥çš„ TBLPROPERTIES å­—æ®µé‡Œé¢å‡ºç°1ï¼‰åˆ›å»ºä¸€ä¸ª ZLIB å‹ç¼©çš„ ORC å­˜å‚¨æ–¹å¼ï¼ˆ1ï¼‰å»ºè¡¨è¯­å¥\ncreate table log_orc_zlib(\n    track_time string,\n    url string,\n    session_id string,\n    referer string,\n    ip string,\n    end_user_id string,\n    city_id string\n)\nrow format delimited fields terminated by '\\t'\nstored as orc\ntblproperties(\"orc.compress\"=\"ZLIB\");\nï¼ˆ2ï¼‰æ’å…¥æ•°æ®\ninsert into log_orc_zlib select * from log_text;\nï¼ˆ3ï¼‰æŸ¥çœ‹æ’å…¥åæ•°æ®\nhive (default)&gt; dfs -du -h /user/hive/warehouse/log_orc_zlib/ ;\n2.78 M /user/hive/warehouse/log_orc_none/000000_0\n2ï¼‰åˆ›å»ºä¸€ä¸ª SNAPPY å‹ç¼©çš„ ORC å­˜å‚¨æ–¹å¼ï¼ˆ1ï¼‰å»ºè¡¨è¯­å¥\ncreate table log_orc_snappy(\n    track_time string,\n    url string,\n    session_id string,\n    referer string,\n    ip string,\n    end_user_id string,\n    city_id string\n)\nrow format delimited fields terminated by '\\t'\nstored as orc\ntblproperties(\"orc.compress\"=\"SNAPPY\");\nï¼ˆ2ï¼‰æ’å…¥æ•°æ®\ninsert into log_orc_snappy select * from log_text;\nï¼ˆ3ï¼‰æŸ¥çœ‹æ’å…¥åæ•°æ®\nhive (default)&gt; dfs -du -h /user/hive/warehouse/log_orc_snappy/;\n3.75 M /user/hive/warehouse/log_orc_snappy/000000_0\nZLIB æ¯” Snappy å‹ç¼©çš„è¿˜å°ã€‚åŸå› æ˜¯ ZLIB é‡‡ç”¨çš„æ˜¯ deflate å‹ç¼©ç®—æ³•ã€‚æ¯” snappy å‹ç¼©çš„å‹ç¼©ç‡é«˜ã€‚3ï¼‰åˆ›å»ºä¸€ä¸ª SNAPPY å‹ç¼©çš„ parquet å­˜å‚¨æ–¹å¼ï¼ˆ1ï¼‰å»ºè¡¨è¯­å¥\ncreate table log_parquet_snappy(\n    track_time string,\n    url string,\n    session_id string,\n    referer string,\n    ip string,\n    end_user_id string,\n    city_id string\n)\nrow format delimited fields terminated by '\\t'\nstored as parquet\ntblproperties(\"parquet.compression\"=\"SNAPPY\");\nï¼ˆ2ï¼‰æ’å…¥æ•°æ®\ninsert into log_parquet_snappy select * from log_text;\nï¼ˆ3ï¼‰æŸ¥çœ‹æ’å…¥åæ•°æ®\nhive (default)&gt; dfs -du -h /user/hive/warehouse/log_parquet_snappy/;\n6.39 MB /user/hive/warehouse/ log_parquet_snappy /000000_0\n4ï¼‰å­˜å‚¨æ–¹å¼å’Œå‹ç¼©æ€»ç»“åœ¨å®é™…çš„é¡¹ç›®å¼€å‘å½“ä¸­ï¼Œhive è¡¨çš„æ•°æ®å­˜å‚¨æ ¼å¼ä¸€èˆ¬é€‰æ‹©ï¼šorc æˆ– parquetã€‚å‹ç¼©æ–¹å¼ä¸€èˆ¬é€‰æ‹© snappyï¼Œlzoã€‚ \nç¬¬ 10 ç«  ä¼ä¸šçº§è°ƒä¼˜10.1 æ‰§è¡Œè®¡åˆ’ï¼ˆExplainï¼‰ 1ï¼‰åŸºæœ¬è¯­æ³•\nEXPLAIN [EXTENDED | DEPENDENCY | AUTHORIZATION] query\n2ï¼‰æ¡ˆä¾‹å®æ“ï¼ˆ1ï¼‰æŸ¥çœ‹ä¸‹é¢è¿™æ¡è¯­å¥çš„æ‰§è¡Œè®¡åˆ’æ²¡æœ‰ç”Ÿæˆ MR ä»»åŠ¡çš„\nhive (default)&gt; explain select * from emp;\nExplain\nSTAGE DEPENDENCIES:\n Stage-0 is a root stage\nSTAGE PLANS:\n Stage: Stage-0\n Fetch Operator\n limit: -1\n Processor Tree:\n TableScan\n alias: emp\n Statistics: Num rows: 1 Data size: 7020 Basic stats: COMPLETE \nColumn stats: NONE\n Select Operator\n expressions: empno (type: int), ename (type: string), job \n(type: string), mgr (type: int), hiredate (type: string), sal (type: \n                                                               double), comm (type: double), deptno (type: int)\n outputColumnNames: _col0, _col1, _col2, _col3, _col4, _col5, \n_col6, _col7\n Statistics: Num rows: 1 Data size: 7020 Basic stats: COMPLETE \nColumn stats: NONE\n ListSink\næœ‰ç”Ÿæˆ MR ä»»åŠ¡çš„\nhive (default)&gt; explain select deptno, avg(sal) avg_sal from emp group by \ndeptno;\nExplain\nSTAGE DEPENDENCIES:\n Stage-1 is a root stage\n Stage-0 depends on stages: Stage-1\nSTAGE PLANS:\n Stage: Stage-1\n Map Reduce\n Map Operator Tree:\n TableScan\n alias: emp\n Statistics: Num rows: 1 Data size: 7020 Basic stats: COMPLETE \nColumn stats: NONE\n Select Operator\n expressions: sal (type: double), deptno (type: int)\n outputColumnNames: sal, deptno\n Statistics: Num rows: 1 Data size: 7020 Basic stats: COMPLETE \nColumn stats: NONE\n Group By Operator\n aggregations: sum(sal), count(sal)\n keys: deptno (type: int)\n mode: hash\n outputColumnNames: _col0, _col1, _col2\n Statistics: Num rows: 1 Data size: 7020 Basic stats:\n\nCOMPLETE Column stats: NONE\n Reduce Output Operator\n key expressions: _col0 (type: int)\n sort order: +\n Map-reduce partition columns: _col0 (type: int)\n Statistics: Num rows: 1 Data size: 7020 Basic stats: \nCOMPLETE Column stats: NONE\n value expressions: _col1 (type: double), _col2 (type: \nbigint)\n Execution mode: vectorized\n Reduce Operator Tree:\n Group By Operator\n aggregations: sum(VALUE._col0), count(VALUE._col1)\n keys: KEY._col0 (type: int)\n mode: mergepartial\n outputColumnNames: _col0, _col1, _col2\n Statistics: Num rows: 1 Data size: 7020 Basic stats: COMPLETE \nColumn stats: NONE\n Select Operator\n expressions: _col0 (type: int), (_col1 / _col2) (type: double)\n outputColumnNames: _col0, _col1\n Statistics: Num rows: 1 Data size: 7020 Basic stats: COMPLETE \nColumn stats: NONE\n File Output Operator\n compressed: false\n Statistics: Num rows: 1 Data size: 7020 Basic stats: COMPLETE \nColumn stats: NONE\n table:\n input format: \norg.apache.hadoop.mapred.SequenceFileInputFormat\n output format: \norg.apache.hadoop.hive.ql.io.HiveSequenceFileOutputFormat\n serde: org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe\n Stage: Stage-0\n Fetch Operator\n limit: -1\n Processor Tree:\n ListSink\nï¼ˆ2ï¼‰æŸ¥çœ‹è¯¦ç»†æ‰§è¡Œè®¡åˆ’\nhive (default)&gt; explain extended select * from emp;\nhive (default)&gt; explain extended select deptno, avg(sal) avg_sal from emp \ngroup by deptno;\n10.2 Fetch æŠ“å–â€‹        Fetch æŠ“å–æ˜¯æŒ‡ï¼ŒHive ä¸­å¯¹æŸäº›æƒ…å†µçš„æŸ¥è¯¢å¯ä»¥ä¸å¿…ä½¿ç”¨ MapReduce è®¡ç®—ã€‚ä¾‹å¦‚ï¼šSELECT * FROM employees;åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒHive å¯ä»¥ç®€å•åœ°è¯»å– employee å¯¹åº”çš„å­˜å‚¨ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œç„¶åè¾“å‡ºæŸ¥è¯¢ç»“æœåˆ°æ§åˆ¶å°ã€‚â€‹        åœ¨ hive-default.xml.template æ–‡ä»¶ä¸­ hive.fetch.task.conversion é»˜è®¤æ˜¯ moreï¼Œè€ç‰ˆæœ¬ hiveé»˜è®¤æ˜¯ minimalï¼Œè¯¥å±æ€§ä¿®æ”¹ä¸º more ä»¥åï¼Œåœ¨å…¨å±€æŸ¥æ‰¾ã€å­—æ®µæŸ¥æ‰¾ã€limit æŸ¥æ‰¾ç­‰éƒ½ä¸èµ°mapreduceã€‚\n&lt;property&gt;\n    &lt;name&gt;hive.fetch.task.conversion&lt;/name&gt;\n    &lt;value&gt;more&lt;/value&gt;\n    &lt;description&gt;\n        Expects one of [none, minimal, more].\n        Some select queries can be converted to single FETCH task minimizing latency.\n        Currently the query should be single sourced not having any subquery \n        and should not have any aggregations or distincts (which incurs RS), \n        lateral views and joins.\n        0. none : disable hive.fetch.task.conversion\n        1. minimal : SELECT STAR, FILTER on partition columns, LIMIT only\n        2. more : SELECT, FILTER, LIMIT only (support TABLESAMPLE and virtual columns)\n    &lt;/description&gt;\n&lt;/property&gt;\n1ï¼‰æ¡ˆä¾‹å®æ“ï¼šï¼ˆ1ï¼‰æŠŠ hive.fetch.task.conversion è®¾ç½®æˆ noneï¼Œç„¶åæ‰§è¡ŒæŸ¥è¯¢è¯­å¥ï¼Œéƒ½ä¼šæ‰§è¡Œ mapreduceç¨‹åºã€‚\nhive (default)&gt; set hive.fetch.task.conversion=none;\nhive (default)&gt; select * from emp;\nhive (default)&gt; select ename from emp;\nhive (default)&gt; select ename from emp limit 3;\nï¼ˆ2ï¼‰æŠŠ hive.fetch.task.conversion è®¾ç½®æˆ moreï¼Œç„¶åæ‰§è¡ŒæŸ¥è¯¢è¯­å¥ï¼Œå¦‚ä¸‹æŸ¥è¯¢æ–¹å¼éƒ½ä¸ä¼šæ‰§è¡Œ mapreduce ç¨‹åºã€‚\nhive (default)&gt; set hive.fetch.task.conversion=more;\nhive (default)&gt; select * from emp;\nhive (default)&gt; select ename from emp;\nhive (default)&gt; select ename from emp limit 3;\n10.3 æœ¬åœ°æ¨¡å¼â€‹        å¤§å¤šæ•°çš„ Hadoop Job æ˜¯éœ€è¦ Hadoop æä¾›çš„å®Œæ•´çš„å¯æ‰©å±•æ€§æ¥å¤„ç†å¤§æ•°æ®é›†çš„ã€‚ä¸è¿‡ï¼Œæœ‰æ—¶ Hive çš„è¾“å…¥æ•°æ®é‡æ˜¯éå¸¸å°çš„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸ºæŸ¥è¯¢è§¦å‘æ‰§è¡Œä»»åŠ¡æ¶ˆè€—çš„æ—¶é—´å¯èƒ½ä¼šæ¯”å®é™… job çš„æ‰§è¡Œæ—¶é—´è¦å¤šçš„å¤šã€‚å¯¹äºå¤§å¤šæ•°è¿™ç§æƒ…å†µï¼ŒHive å¯ä»¥é€šè¿‡æœ¬åœ°æ¨¡å¼åœ¨å•å°æœºå™¨ä¸Šå¤„ç†æ‰€æœ‰çš„ä»»åŠ¡ã€‚å¯¹äºå°æ•°æ®é›†ï¼Œæ‰§è¡Œæ—¶é—´å¯ä»¥æ˜æ˜¾è¢«ç¼©çŸ­ã€‚â€‹        ç”¨æˆ·å¯ä»¥é€šè¿‡è®¾ç½® hive.exec.mode.local.auto çš„å€¼ä¸º trueï¼Œæ¥è®© Hive åœ¨é€‚å½“çš„æ—¶å€™è‡ªåŠ¨å¯åŠ¨è¿™ä¸ªä¼˜åŒ–ã€‚\nset hive.exec.mode.local.auto=true; #å¼€å¯æœ¬åœ° mr\n#è®¾ç½® local mr çš„æœ€å¤§è¾“å…¥æ•°æ®é‡ï¼Œå½“è¾“å…¥æ•°æ®é‡å°äºè¿™ä¸ªå€¼æ—¶é‡‡ç”¨ local mr çš„æ–¹å¼ï¼Œé»˜è®¤ä¸º 134217728ï¼Œå³ 128M\nset hive.exec.mode.local.auto.inputbytes.max=50000000;\n#è®¾ç½® local mr çš„æœ€å¤§è¾“å…¥æ–‡ä»¶ä¸ªæ•°ï¼Œå½“è¾“å…¥æ–‡ä»¶ä¸ªæ•°å°äºè¿™ä¸ªå€¼æ—¶é‡‡ç”¨ local mr çš„æ–¹å¼ï¼Œé»˜è®¤ä¸º 4\nset hive.exec.mode.local.auto.input.files.max=10;\n1ï¼‰æ¡ˆä¾‹å®æ“ï¼šï¼ˆ2ï¼‰å…³é—­æœ¬åœ°æ¨¡å¼ï¼ˆé»˜è®¤æ˜¯å…³é—­çš„ï¼‰ï¼Œå¹¶æ‰§è¡ŒæŸ¥è¯¢è¯­å¥\nhive (default)&gt; select count(*) from emp group by deptno;\nï¼ˆ1ï¼‰å¼€å¯æœ¬åœ°æ¨¡å¼ï¼Œå¹¶æ‰§è¡ŒæŸ¥è¯¢è¯­å¥\nhive (default)&gt; set hive.exec.mode.local.auto=true;\nhive (default)&gt; select count(*) from emp group by deptno;\n10.4 è¡¨çš„ä¼˜åŒ–å°è¡¨å¤§è¡¨ Joinï¼ˆMapJOINï¼‰ \nâ€‹        å°† key ç›¸å¯¹åˆ†æ•£ï¼Œå¹¶ä¸”æ•°æ®é‡å°çš„è¡¨æ”¾åœ¨ join çš„å·¦è¾¹ï¼Œå¯ä»¥ä½¿ç”¨ map join è®©å°çš„ç»´åº¦è¡¨å…ˆè¿›å†…å­˜ã€‚åœ¨ map ç«¯å®Œæˆ joinã€‚â€‹        å®é™…æµ‹è¯•å‘ç°ï¼šæ–°ç‰ˆçš„ hive å·²ç»å¯¹å°è¡¨ JOIN å¤§è¡¨å’Œå¤§è¡¨ JOIN å°è¡¨è¿›è¡Œäº†ä¼˜åŒ–ã€‚å°è¡¨æ”¾åœ¨å·¦è¾¹å’Œå³è¾¹å·²ç»æ²¡æœ‰åŒºåˆ«ã€‚æ¡ˆä¾‹å®æ“1ï¼‰éœ€æ±‚ä»‹ç»æµ‹è¯•å¤§è¡¨ JOIN å°è¡¨å’Œå°è¡¨ JOIN å¤§è¡¨çš„æ•ˆç‡2ï¼‰å¼€å¯ MapJoin å‚æ•°è®¾ç½®\nï¼ˆ1ï¼‰è®¾ç½®è‡ªåŠ¨é€‰æ‹© Mapjoin\nset hive.auto.convert.join = true; é»˜è®¤ä¸º true\nï¼ˆ2ï¼‰å¤§è¡¨å°è¡¨çš„é˜ˆå€¼è®¾ç½®ï¼ˆé»˜è®¤ 25M ä»¥ä¸‹è®¤ä¸ºæ˜¯å°è¡¨ï¼‰ï¼š\nset hive.mapjoin.smalltable.filesize = 25000000;\n3ï¼‰MapJoin å·¥ä½œæœºåˆ¶\n\n4ï¼‰å»ºå¤§è¡¨ã€å°è¡¨å’Œ JOIN åè¡¨çš„è¯­å¥\n# åˆ›å»ºå¤§è¡¨\ncreate table bigtable(id bigint, t bigint, uid string, keyword string, \nurl_rank int, click_num int, click_url string) row format delimited \nfields terminated by '\\t';\n# åˆ›å»ºå°è¡¨\ncreate table smalltable(id bigint, t bigint, uid string, keyword string, \nurl_rank int, click_num int, click_url string) row format delimited \nfields terminated by '\\t';\n# åˆ›å»º join åè¡¨çš„è¯­å¥\ncreate table jointable(id bigint, t bigint, uid string, keyword string, \nurl_rank int, click_num int, click_url string) row format delimited \nfields terminated by '\\t';\n5ï¼‰åˆ†åˆ«å‘å¤§è¡¨å’Œå°è¡¨ä¸­å¯¼å…¥æ•°æ®\nhive (default)&gt; load data local inpath '/opt/module/data/bigtable' into \ntable bigtable;\nhive (default)&gt;load data local inpath '/opt/module/data/smalltable' into \ntable smalltable;\n6ï¼‰å°è¡¨ JOIN å¤§è¡¨è¯­å¥\ninsert overwrite table jointable\nselect b.id, b.t, b.uid, b.keyword, b.url_rank, b.click_num, b.click_url\nfrom smalltable s\njoin bigtable b\non b.id = s.id;\n7ï¼‰å¤§è¡¨ JOIN å°è¡¨è¯­å¥\ninsert overwrite table jointable\nselect b.id, b.t, b.uid, b.keyword, b.url_rank, b.click_num, b.click_url\nfrom bigtable b\njoin smalltable s\non s.id = b.id;\nå¤§è¡¨ Join å¤§è¡¨1ï¼‰ç©º KEY è¿‡æ»¤        æœ‰æ—¶ join è¶…æ—¶æ˜¯å› ä¸ºæŸäº› key å¯¹åº”çš„æ•°æ®å¤ªå¤šï¼Œè€Œç›¸åŒ key å¯¹åº”çš„æ•°æ®éƒ½ä¼šå‘é€åˆ°ç›¸åŒçš„ reducer ä¸Šï¼Œä»è€Œå¯¼è‡´å†…å­˜ä¸å¤Ÿã€‚æ­¤æ—¶æˆ‘ä»¬åº”è¯¥ä»”ç»†åˆ†æè¿™äº›å¼‚å¸¸çš„ keyï¼Œå¾ˆå¤šæƒ…å†µä¸‹ï¼Œè¿™äº› key å¯¹åº”çš„æ•°æ®æ˜¯å¼‚å¸¸æ•°æ®ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ SQL è¯­å¥ä¸­è¿›è¡Œè¿‡æ»¤ã€‚ä¾‹å¦‚ key å¯¹åº”çš„å­—æ®µä¸ºç©ºï¼Œæ“ä½œå¦‚ä¸‹ï¼šæ¡ˆä¾‹å®æ“ï¼ˆ1ï¼‰é…ç½®å†å²æœåŠ¡å™¨é…ç½® mapred-site.xml\n&lt;property&gt;\n    &lt;name&gt;mapreduce.jobhistory.address&lt;/name&gt;\n    &lt;value&gt;hadoop102:10020&lt;/value&gt;\n&lt;/property&gt;\n&lt;property&gt;\n    &lt;name&gt;mapreduce.jobhistory.webapp.address&lt;/name&gt;\n    &lt;value&gt;hadoop102:19888&lt;/value&gt;\n&lt;/property&gt;\n# å¯åŠ¨å†å²æœåŠ¡å™¨\nsbin/mr-jobhistory-daemon.sh start historyserver\n# æŸ¥çœ‹ jobhistory\nhttp://hadoop102:19888/jobhistory\nï¼ˆ2ï¼‰åˆ›å»ºåŸå§‹æ•°æ®ç©º id è¡¨\n# åˆ›å»ºç©º id è¡¨\ncreate table nullidtable(id bigint, t bigint, uid string, keyword string, \nurl_rank int, click_num int, click_url string) row format delimited \nfields terminated by '\\t';\nï¼ˆ3ï¼‰åˆ†åˆ«åŠ è½½åŸå§‹æ•°æ®å’Œç©º id æ•°æ®åˆ°å¯¹åº”è¡¨ä¸­\nhive (default)&gt; load data local inpath '/opt/module/data/nullid' into \ntable nullidtable;\nï¼ˆ4ï¼‰æµ‹è¯•ä¸è¿‡æ»¤ç©º id\nhive (default)&gt; insert overwrite table jointable select n.* from \nnullidtable n left join bigtable o on n.id = o.id;\nï¼ˆ5ï¼‰æµ‹è¯•è¿‡æ»¤ç©º id\nhive (default)&gt; insert overwrite table jointable select n.* from (select \nfrom nullidtable where id is not null) n left join bigtable o on n.id = o.id;\n2ï¼‰ç©º key è½¬æ¢        æœ‰æ—¶è™½ç„¶æŸä¸ª key ä¸ºç©ºå¯¹åº”çš„æ•°æ®å¾ˆå¤šï¼Œä½†æ˜¯ç›¸åº”çš„æ•°æ®ä¸æ˜¯å¼‚å¸¸æ•°æ®ï¼Œå¿…é¡»è¦åŒ…å«åœ¨join çš„ç»“æœä¸­ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥è¡¨ a ä¸­ key ä¸ºç©ºçš„å­—æ®µèµ‹ä¸€ä¸ªéšæœºçš„å€¼ï¼Œä½¿å¾—æ•°æ®éšæœºå‡åŒ€åœ°åˆ†ä¸åˆ°ä¸åŒçš„ reducer ä¸Šã€‚ä¾‹å¦‚ï¼šæ¡ˆä¾‹å®æ“ï¼šä¸éšæœºåˆ†å¸ƒç©º null å€¼ï¼šï¼ˆ1ï¼‰è®¾ç½® 5 ä¸ª reduce ä¸ªæ•°\nset mapreduce.job.reduces = 5;\nï¼ˆ2ï¼‰JOIN ä¸¤å¼ è¡¨\ninsert overwrite table jointable\nselect n.* from nullidtable n left join bigtable b on n.id = b.id;\nç»“æœï¼šå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¯ä»¥çœ‹å‡ºæ¥ï¼Œå‡ºç°äº†æ•°æ®å€¾æ–œï¼ŒæŸäº› reducer çš„èµ„æºæ¶ˆè€—è¿œå¤§äºå…¶ä»– reducerã€‚\n\néšæœºåˆ†å¸ƒç©º null å€¼ ï¼ˆ1ï¼‰è®¾ç½® 5 ä¸ª reduce ä¸ªæ•°\nset mapreduce.job.reduces = 5;\nï¼ˆ2ï¼‰JOIN ä¸¤å¼ è¡¨\ninsert overwrite table jointable\nselect n.* from nullidtable n full join bigtable o on \nnvl(n.id,rand()) = o.id;\nç»“æœï¼šå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¯ä»¥çœ‹å‡ºæ¥ï¼Œæ¶ˆé™¤äº†æ•°æ®å€¾æ–œï¼Œè´Ÿè½½å‡è¡¡ reducer çš„èµ„æºæ¶ˆè€—\n\n3ï¼‰SMB(Sort Merge Bucket join)ï¼ˆ1ï¼‰åˆ›å»ºç¬¬äºŒå¼ å¤§è¡¨\ncreate table bigtable2(\n    id bigint,\n    t bigint,\n    uid string,\n    keyword string,\n    url_rank int,\n    click_num int,\n    click_url string)\nrow format delimited fields terminated by '\\t';\nload data local inpath '/opt/module/data/bigtable' into table bigtable2;\næµ‹è¯•å¤§è¡¨ç›´æ¥ JOIN\ninsert overwrite table jointable\nselect b.id, b.t, b.uid, b.keyword, b.url_rank, b.click_num, b.click_url\nfrom bigtable s\njoin bigtable2 b\non b.id = s.id;\nï¼ˆ2ï¼‰åˆ›å»ºåˆ†é€šè¡¨ 1,æ¡¶çš„ä¸ªæ•°ä¸è¦è¶…è¿‡å¯ç”¨ CPU çš„æ ¸æ•°\ncreate table bigtable_buck1(\n    id bigint,\n    t bigint,\n    uid string,\n    keyword string,\n    url_rank int,\n    click_num int,\n    click_url string)\nclustered by(id) \nsorted by(id)\ninto 6 buckets\nrow format delimited fields terminated by '\\t';\nload data local inpath '/opt/module/data/bigtable' into table \nbigtable_buck1;\nï¼ˆ3ï¼‰åˆ›å»ºåˆ†é€šè¡¨ 2,æ¡¶çš„ä¸ªæ•°ä¸è¦è¶…è¿‡å¯ç”¨ CPU çš„æ ¸æ•°\ncreate table bigtable_buck2(\n    id bigint,\n    t bigint,\n    uid string,\n    keyword string,\n    url_rank int,\n    click_num int,\n    click_url string)\nclustered by(id)\nsorted by(id) \ninto 6 buckets\nrow format delimited fields terminated by '\\t';\nload data local inpath '/opt/module/data/bigtable' into table \nbigtable_buck2;\nï¼ˆ4ï¼‰è®¾ç½®å‚æ•°\nset hive.optimize.bucketmapjoin = true;\nset hive.optimize.bucketmapjoin.sortedmerge = true;\nset \nhive.input.format=org.apache.hadoop.hive.ql.io.BucketizedHiveInputFormat;\nï¼ˆ5ï¼‰æµ‹è¯•\ninsert overwrite table jointable\nselect b.id, b.t, b.uid, b.keyword, b.url_rank, b.click_num, b.click_url\nfrom bigtable_buck1 s\njoin bigtable_buck2 b\non b.id = s.id;\nGroup By        é»˜è®¤æƒ…å†µä¸‹ï¼ŒMap é˜¶æ®µåŒä¸€ Key æ•°æ®åˆ†å‘ç»™ä¸€ä¸ª reduceï¼Œå½“ä¸€ä¸ª key æ•°æ®è¿‡å¤§æ—¶å°±å€¾æ–œäº†ã€‚\n\nâ€‹        å¹¶ä¸æ˜¯æ‰€æœ‰çš„èšåˆæ“ä½œéƒ½éœ€è¦åœ¨ Reduce ç«¯å®Œæˆï¼Œå¾ˆå¤šèšåˆæ“ä½œéƒ½å¯ä»¥å…ˆåœ¨ Map ç«¯è¿›è¡Œéƒ¨åˆ†èšåˆï¼Œæœ€ååœ¨ Reduce ç«¯å¾—å‡ºæœ€ç»ˆç»“æœã€‚1ï¼‰å¼€å¯ Map ç«¯èšåˆå‚æ•°è®¾ç½®\n# æ˜¯å¦åœ¨ Map ç«¯è¿›è¡Œèšåˆï¼Œé»˜è®¤ä¸º True\nset hive.map.aggr = true\n# åœ¨ Map ç«¯è¿›è¡Œèšåˆæ“ä½œçš„æ¡ç›®æ•°ç›®\nset hive.groupby.mapaggr.checkinterval = 100000\n# æœ‰æ•°æ®å€¾æ–œçš„æ—¶å€™è¿›è¡Œè´Ÿè½½å‡è¡¡ï¼ˆé»˜è®¤æ˜¯ falseï¼‰\nset hive.groupby.skewindata = true\nâ€‹        å½“é€‰é¡¹è®¾å®šä¸º trueï¼Œç”Ÿæˆçš„æŸ¥è¯¢è®¡åˆ’ä¼šæœ‰ä¸¤ä¸ª MR Jobã€‚ç¬¬ä¸€ä¸ª MR Job ä¸­ï¼ŒMap çš„è¾“å‡ºç»“æœä¼šéšæœºåˆ†å¸ƒåˆ° Reduce ä¸­ï¼Œæ¯ä¸ª Reduce åšéƒ¨åˆ†èšåˆæ“ä½œï¼Œå¹¶è¾“å‡ºç»“æœï¼Œè¿™æ ·å¤„ç†çš„ç»“æœæ˜¯ç›¸åŒçš„ Group By Key æœ‰å¯èƒ½è¢«åˆ†å‘åˆ°ä¸åŒçš„ Reduce ä¸­ï¼Œä»è€Œè¾¾åˆ°è´Ÿè½½å‡è¡¡çš„ç›®çš„ï¼›ç¬¬äºŒä¸ª MR Job å†æ ¹æ®é¢„å¤„ç†çš„æ•°æ®ç»“æœæŒ‰ç…§ Group By Key åˆ†å¸ƒåˆ° Reduce ä¸­ï¼ˆè¿™ä¸ªè¿‡ç¨‹å¯ä»¥ä¿è¯ç›¸åŒçš„ Group By Key è¢«åˆ†å¸ƒåˆ°åŒä¸€ä¸ª Reduce ä¸­ï¼‰ï¼Œæœ€åå®Œæˆæœ€ç»ˆçš„èšåˆæ“ä½œã€‚\nhive (default)&gt; select deptno from emp group by deptno;\nStage-Stage-1: Map: 1 Reduce: 5 Cumulative CPU: 23.68 sec HDFS Read: \n19987 HDFS Write: 9 SUCCESS\nTotal MapReduce CPU Time Spent: 23 seconds 680 msec\nOK\ndeptno\n10\n20\n30\nä¼˜åŒ–ä»¥å\nhive (default)&gt; set hive.groupby.skewindata = true;\nhive (default)&gt; select deptno from emp group by deptno;\nStage-Stage-1: Map: 1 Reduce: 5 Cumulative CPU: 28.53 sec HDFS Read: \n18209 HDFS Write: 534 SUCCESS\nStage-Stage-2: Map: 1 Reduce: 5 Cumulative CPU: 38.32 sec HDFS Read: \n15014 HDFS Write: 9 SUCCESS\nTotal MapReduce CPU Time Spent: 1 minutes 6 seconds 850 msec\nOK\ndeptno\n10\n20\n30\nCount(Distinct) å»é‡ç»Ÿè®¡        æ•°æ®é‡å°çš„æ—¶å€™æ— æ‰€è°“ï¼Œæ•°æ®é‡å¤§çš„æƒ…å†µä¸‹ï¼Œç”±äº COUNT DISTINCT æ“ä½œéœ€è¦ç”¨ä¸€ä¸ªReduce Task æ¥å®Œæˆï¼Œè¿™ä¸€ä¸ª Reduce éœ€è¦å¤„ç†çš„æ•°æ®é‡å¤ªå¤§ï¼Œå°±ä¼šå¯¼è‡´æ•´ä¸ª Job å¾ˆéš¾å®Œæˆï¼Œä¸€èˆ¬ COUNT DISTINCT ä½¿ç”¨å…ˆ GROUP BY å† COUNT çš„æ–¹å¼æ›¿æ¢,ä½†æ˜¯éœ€è¦æ³¨æ„ group by é€ æˆçš„æ•°æ®å€¾æ–œé—®é¢˜. \n1ï¼‰æ¡ˆä¾‹å®æ“ï¼ˆ1ï¼‰åˆ›å»ºä¸€å¼ å¤§è¡¨\nhive (default)&gt; create table bigtable(id bigint, time bigint, uid string, \nkeyword\nstring, url_rank int, click_num int, click_url string) row format \ndelimited\nfields terminated by '\\t';\nï¼ˆ2ï¼‰åŠ è½½æ•°æ®\nhive (default)&gt; load data local inpath '/opt/module/data/bigtable' into \ntable bigtable;\nï¼ˆ3ï¼‰è®¾ç½® 5 ä¸ª reduce ä¸ªæ•°\nset mapreduce.job.reduces = 5;\nï¼ˆ4ï¼‰æ‰§è¡Œå»é‡ id æŸ¥è¯¢\nhive (default)&gt; select count(distinct id) from bigtable;\nStage-Stage-1: Map: 1 Reduce: 1 Cumulative CPU: 7.12 sec HDFS Read: \n120741990 HDFS Write: 7 SUCCESS\nTotal MapReduce CPU Time Spent: 7 seconds 120 msec\nOK\nc0\n100001\nTime taken: 23.607 seconds, Fetched: 1 row(s)\nï¼ˆ5ï¼‰é‡‡ç”¨ GROUP by å»é‡ id\nhive (default)&gt; select count(id) from (select id from bigtable group by \nid) a;\nStage-Stage-1: Map: 1 Reduce: 5 Cumulative CPU: 17.53 sec HDFS Read: \n120752703 HDFS Write: 580 SUCCESS\nStage-Stage-2: Map: 1 Reduce: 1 Cumulative CPU: 4.29 sec2 HDFS Read: \n9409 HDFS Write: 7 SUCCESS\nTotal MapReduce CPU Time Spent: 21 seconds 820 msec\nOK\n_c0\n100001\nTime taken: 50.795 seconds, Fetched: 1 row(s)\nè™½ç„¶ä¼šå¤šç”¨ä¸€ä¸ª Job æ¥å®Œæˆï¼Œä½†åœ¨æ•°æ®é‡å¤§çš„æƒ…å†µä¸‹ï¼Œè¿™ä¸ªç»å¯¹æ˜¯å€¼å¾—çš„ã€‚ç¬›å¡å°”ç§¯        å°½é‡é¿å…ç¬›å¡å°”ç§¯ï¼Œjoin çš„æ—¶å€™ä¸åŠ  on æ¡ä»¶ï¼Œæˆ–è€…æ— æ•ˆçš„ on æ¡ä»¶ï¼ŒHive åªèƒ½ä½¿ç”¨ 1 ä¸ªreducer æ¥å®Œæˆç¬›å¡å°”ç§¯ã€‚\nè¡Œåˆ—è¿‡æ»¤åˆ—å¤„ç†ï¼šåœ¨ SELECT ä¸­ï¼Œåªæ‹¿éœ€è¦çš„åˆ—ï¼Œå¦‚æœæœ‰åˆ†åŒºï¼Œå°½é‡ä½¿ç”¨åˆ†åŒºè¿‡æ»¤ï¼Œå°‘ç”¨ SELECT *ã€‚è¡Œå¤„ç†ï¼šåœ¨åˆ†åŒºå‰ªè£ä¸­ï¼Œå½“ä½¿ç”¨å¤–å…³è”æ—¶ï¼Œå¦‚æœå°†å‰¯è¡¨çš„è¿‡æ»¤æ¡ä»¶å†™åœ¨ Where åé¢ï¼Œé‚£ä¹ˆå°±ä¼šå…ˆå…¨è¡¨å…³è”ï¼Œä¹‹åå†è¿‡æ»¤ï¼Œæ¯”å¦‚ï¼šæ¡ˆä¾‹å®æ“ï¼š1ï¼‰æµ‹è¯•å…ˆå…³è”ä¸¤å¼ è¡¨ï¼Œå†ç”¨ where æ¡ä»¶è¿‡æ»¤\nhive (default)&gt; select o.id from bigtable b\njoin bigtable o on o.id = b.id\nwhere o.id &lt;= 10;\nTime taken: 34.406 seconds, Fetched: 100 row(s)\n2ï¼‰é€šè¿‡å­æŸ¥è¯¢åï¼Œå†å…³è”è¡¨\nhive (default)&gt; select b.id from bigtable b\njoin (select id from bigtable where id &lt;= 10) o on b.id = o.id;\nTime taken: 30.058 seconds, Fetched: 100 row(s)\nåˆ†åŒºè¯¦è§ 7.1 ç« ã€‚åˆ†æ¡¶è¯¦è§ 7.2 ç« ã€‚ \n10.5 åˆç†è®¾ç½® Map åŠ Reduce æ•°1ï¼‰é€šå¸¸æƒ…å†µä¸‹ï¼Œä½œä¸šä¼šé€šè¿‡ input çš„ç›®å½•äº§ç”Ÿä¸€ä¸ªæˆ–è€…å¤šä¸ª map ä»»åŠ¡ã€‚        ä¸»è¦çš„å†³å®šå› ç´ æœ‰ï¼šinput çš„æ–‡ä»¶æ€»ä¸ªæ•°ï¼Œinput çš„æ–‡ä»¶å¤§å°ï¼Œé›†ç¾¤è®¾ç½®çš„æ–‡ä»¶å—å¤§å°ã€‚2ï¼‰æ˜¯ä¸æ˜¯ map æ•°è¶Šå¤šè¶Šå¥½ï¼Ÿ        ç­”æ¡ˆæ˜¯å¦å®šçš„ã€‚å¦‚æœä¸€ä¸ªä»»åŠ¡æœ‰å¾ˆå¤šå°æ–‡ä»¶ï¼ˆè¿œè¿œå°äºå—å¤§å° 128mï¼‰ï¼Œåˆ™æ¯ä¸ªå°æ–‡ä»¶ä¹Ÿä¼šè¢«å½“åšä¸€ä¸ªå—ï¼Œç”¨ä¸€ä¸ª map ä»»åŠ¡æ¥å®Œæˆï¼Œè€Œä¸€ä¸ª map ä»»åŠ¡å¯åŠ¨å’Œåˆå§‹åŒ–çš„æ—¶é—´è¿œè¿œå¤§äºé€»è¾‘å¤„ç†çš„æ—¶é—´ï¼Œå°±ä¼šé€ æˆå¾ˆå¤§çš„èµ„æºæµªè´¹ã€‚è€Œä¸”ï¼ŒåŒæ—¶å¯æ‰§è¡Œçš„ map æ•°æ˜¯å—é™çš„ã€‚3ï¼‰æ˜¯ä¸æ˜¯ä¿è¯æ¯ä¸ª map å¤„ç†æ¥è¿‘ 128m çš„æ–‡ä»¶å—ï¼Œå°±é«˜æ•æ— å¿§äº†ï¼Ÿ        ç­”æ¡ˆä¹Ÿæ˜¯ä¸ä¸€å®šã€‚æ¯”å¦‚æœ‰ä¸€ä¸ª 127m çš„æ–‡ä»¶ï¼Œæ­£å¸¸ä¼šç”¨ä¸€ä¸ª map å»å®Œæˆï¼Œä½†è¿™ä¸ªæ–‡ä»¶åªæœ‰ä¸€ä¸ªæˆ–è€…ä¸¤ä¸ªå°å­—æ®µï¼Œå´æœ‰å‡ åƒä¸‡çš„è®°å½•ï¼Œå¦‚æœ map å¤„ç†çš„é€»è¾‘æ¯”è¾ƒå¤æ‚ï¼Œç”¨ä¸€ä¸ª mapä»»åŠ¡å»åšï¼Œè‚¯å®šä¹Ÿæ¯”è¾ƒè€—æ—¶ã€‚\nâ€‹        é’ˆå¯¹ä¸Šé¢çš„é—®é¢˜ 2 å’Œ 3ï¼Œæˆ‘ä»¬éœ€è¦é‡‡å–ä¸¤ç§æ–¹å¼æ¥è§£å†³ï¼šå³å‡å°‘ map æ•°å’Œå¢åŠ  map æ•°ï¼›å¤æ‚æ–‡ä»¶å¢åŠ  Map æ•° \nâ€‹        å½“ input çš„æ–‡ä»¶éƒ½å¾ˆå¤§ï¼Œä»»åŠ¡é€»è¾‘å¤æ‚ï¼Œmap æ‰§è¡Œéå¸¸æ…¢çš„æ—¶å€™ï¼Œå¯ä»¥è€ƒè™‘å¢åŠ  Map æ•°ï¼Œæ¥ä½¿å¾—æ¯ä¸ª map å¤„ç†çš„æ•°æ®é‡å‡å°‘ï¼Œä»è€Œæé«˜ä»»åŠ¡çš„æ‰§è¡Œæ•ˆç‡ã€‚â€‹        å¢åŠ  map çš„æ–¹æ³•ä¸ºï¼šæ ¹æ®â€‹        computeSliteSize(Math.max(minSize,Math.min(maxSize,blocksize)))=blocksize=128M å…¬å¼ï¼Œè°ƒæ•´ maxSize æœ€å¤§å€¼ã€‚è®© maxSize æœ€å¤§å€¼ä½äº blocksize å°±å¯ä»¥å¢åŠ  map çš„ä¸ªæ•°ã€‚æ¡ˆä¾‹å®æ“ï¼š\n# æ‰§è¡ŒæŸ¥è¯¢\nhive (default)&gt; select count(*) from emp;\nHadoop job information for Stage-1: number of mappers: 1; number of \nreducers: 1\n# è®¾ç½®æœ€å¤§åˆ‡ç‰‡å€¼ä¸º 100 ä¸ªå­—èŠ‚\nhive (default)&gt; set mapreduce.input.fileinputformat.split.maxsize=100;\nhive (default)&gt; select count(*) from emp;\nHadoop job information for Stage-1: number of mappers: 6; number of \nreducers: 1\nå°æ–‡ä»¶è¿›è¡Œåˆå¹¶1ï¼‰åœ¨ map æ‰§è¡Œå‰åˆå¹¶å°æ–‡ä»¶ï¼Œå‡å°‘ map æ•°ï¼šCombineHiveInputFormat å…·æœ‰å¯¹å°æ–‡ä»¶è¿›è¡Œåˆå¹¶çš„åŠŸèƒ½ï¼ˆç³»ç»Ÿé»˜è®¤çš„æ ¼å¼ï¼‰ã€‚HiveInputFormat æ²¡æœ‰å¯¹å°æ–‡ä»¶åˆå¹¶åŠŸèƒ½ã€‚\nset hive.input.format= \norg.apache.hadoop.hive.ql.io.CombineHiveInputFormat;\n2ï¼‰åœ¨ Map-Reduce çš„ä»»åŠ¡ç»“æŸæ—¶åˆå¹¶å°æ–‡ä»¶çš„è®¾ç½®ï¼š \nâ€‹        åœ¨ map-only ä»»åŠ¡ç»“æŸæ—¶åˆå¹¶å°æ–‡ä»¶ï¼Œé»˜è®¤ true\nSET hive.merge.mapfiles = true;\nâ€‹        åœ¨ map-reduce ä»»åŠ¡ç»“æŸæ—¶åˆå¹¶å°æ–‡ä»¶ï¼Œé»˜è®¤ false\nSET hive.merge.mapredfiles = true;\nâ€‹        åˆå¹¶æ–‡ä»¶çš„å¤§å°ï¼Œé»˜è®¤ 256M\nSET hive.merge.size.per.task = 268435456;\nâ€‹        å½“è¾“å‡ºæ–‡ä»¶çš„å¹³å‡å¤§å°å°äºè¯¥å€¼æ—¶ï¼Œå¯åŠ¨ä¸€ä¸ªç‹¬ç«‹çš„ map-reduce ä»»åŠ¡è¿›è¡Œæ–‡ä»¶ merge\nSET hive.merge.smallfiles.avgsize = 16777216;\nåˆç†è®¾ç½® Reduce æ•° \n1ï¼‰è°ƒæ•´ reduce ä¸ªæ•°æ–¹æ³•ä¸€ï¼ˆ1ï¼‰æ¯ä¸ª Reduce å¤„ç†çš„æ•°æ®é‡é»˜è®¤æ˜¯ 256MB\nhive.exec.reducers.bytes.per.reducer=256000000\nï¼ˆ2ï¼‰æ¯ä¸ªä»»åŠ¡æœ€å¤§çš„ reduce æ•°ï¼Œé»˜è®¤ä¸º 1009\nhive.exec.reducers.max=1009\nï¼ˆ3ï¼‰è®¡ç®— reducer æ•°çš„å…¬å¼\nN=min(å‚æ•° 2ï¼Œæ€»è¾“å…¥æ•°æ®é‡/å‚æ•° 1)\n2ï¼‰è°ƒæ•´ reduce ä¸ªæ•°æ–¹æ³•äºŒ        åœ¨ hadoop çš„ mapred-default.xml æ–‡ä»¶ä¸­ä¿®æ”¹        è®¾ç½®æ¯ä¸ª job çš„ Reduce ä¸ªæ•°\nset mapreduce.job.reduces = 15;\n3ï¼‰reduce ä¸ªæ•°å¹¶ä¸æ˜¯è¶Šå¤šè¶Šå¥½ï¼ˆ1ï¼‰è¿‡å¤šçš„å¯åŠ¨å’Œåˆå§‹åŒ– reduce ä¹Ÿä¼šæ¶ˆè€—æ—¶é—´å’Œèµ„æºï¼›ï¼ˆ2ï¼‰å¦å¤–ï¼Œæœ‰å¤šå°‘ä¸ª reduceï¼Œå°±ä¼šæœ‰å¤šå°‘ä¸ªè¾“å‡ºæ–‡ä»¶ï¼Œå¦‚æœç”Ÿæˆäº†å¾ˆå¤šä¸ªå°æ–‡ä»¶ï¼Œé‚£ä¹ˆå¦‚æœè¿™äº›å°æ–‡ä»¶ä½œä¸ºä¸‹ä¸€ä¸ªä»»åŠ¡çš„è¾“å…¥ï¼Œåˆ™ä¹Ÿä¼šå‡ºç°å°æ–‡ä»¶è¿‡å¤šçš„é—®é¢˜ï¼›        åœ¨è®¾ç½® reduce ä¸ªæ•°çš„æ—¶å€™ä¹Ÿéœ€è¦è€ƒè™‘è¿™ä¸¤ä¸ªåŸåˆ™ï¼šå¤„ç†å¤§æ•°æ®é‡åˆ©ç”¨åˆé€‚çš„ reduce æ•°ï¼›ä½¿å•ä¸ª reduce ä»»åŠ¡å¤„ç†æ•°æ®é‡å¤§å°è¦åˆé€‚ï¼›\n10.6 å¹¶è¡Œæ‰§è¡Œâ€‹        Hive ä¼šå°†ä¸€ä¸ªæŸ¥è¯¢è½¬åŒ–æˆä¸€ä¸ªæˆ–è€…å¤šä¸ªé˜¶æ®µã€‚è¿™æ ·çš„é˜¶æ®µå¯ä»¥æ˜¯ MapReduce é˜¶æ®µã€æŠ½æ ·é˜¶æ®µã€åˆå¹¶é˜¶æ®µã€limit é˜¶æ®µã€‚æˆ–è€… Hive æ‰§è¡Œè¿‡ç¨‹ä¸­å¯èƒ½éœ€è¦çš„å…¶ä»–é˜¶æ®µã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒHive ä¸€æ¬¡åªä¼šæ‰§è¡Œä¸€ä¸ªé˜¶æ®µã€‚ä¸è¿‡ï¼ŒæŸä¸ªç‰¹å®šçš„ job å¯èƒ½åŒ…å«ä¼—å¤šçš„é˜¶æ®µï¼Œè€Œè¿™äº›é˜¶æ®µå¯èƒ½å¹¶éå®Œå…¨äº’ç›¸ä¾èµ–çš„ï¼Œä¹Ÿå°±æ˜¯è¯´æœ‰äº›é˜¶æ®µæ˜¯å¯ä»¥å¹¶è¡Œæ‰§è¡Œçš„ï¼Œè¿™æ ·å¯èƒ½ä½¿å¾—æ•´ä¸ª job çš„æ‰§è¡Œæ—¶é—´ç¼©çŸ­ã€‚ä¸è¿‡ï¼Œå¦‚æœæœ‰æ›´å¤šçš„é˜¶æ®µå¯ä»¥å¹¶è¡Œæ‰§è¡Œï¼Œé‚£ä¹ˆ job å¯èƒ½å°±è¶Šå¿«å®Œæˆã€‚é€šè¿‡è®¾ç½®å‚æ•° hive.exec.parallel å€¼ä¸º trueï¼Œå°±å¯ä»¥å¼€å¯å¹¶å‘æ‰§è¡Œã€‚ä¸è¿‡ï¼Œåœ¨å…±äº«é›†ç¾¤ä¸­ï¼Œéœ€è¦æ³¨æ„ä¸‹ï¼Œå¦‚æœ job ä¸­å¹¶è¡Œé˜¶æ®µå¢å¤šï¼Œé‚£ä¹ˆé›†ç¾¤åˆ©ç”¨ç‡å°±ä¼šå¢åŠ ã€‚\nset hive.exec.parallel=true; //æ‰“å¼€ä»»åŠ¡å¹¶è¡Œæ‰§è¡Œ\nset hive.exec.parallel.thread.number=16; //åŒä¸€ä¸ª sql å…è®¸æœ€å¤§å¹¶è¡Œåº¦ï¼Œé»˜è®¤ä¸º8ã€‚\nâ€‹        å½“ç„¶ï¼Œå¾—æ˜¯åœ¨ç³»ç»Ÿèµ„æºæ¯”è¾ƒç©ºé—²çš„æ—¶å€™æ‰æœ‰ä¼˜åŠ¿ï¼Œå¦åˆ™ï¼Œæ²¡èµ„æºï¼Œå¹¶è¡Œä¹Ÿèµ·ä¸æ¥ã€‚\n10.7 ä¸¥æ ¼æ¨¡å¼Hive å¯ä»¥é€šè¿‡è®¾ç½®é˜²æ­¢ä¸€äº›å±é™©æ“ä½œï¼š1ï¼‰åˆ†åŒºè¡¨ä¸ä½¿ç”¨åˆ†åŒºè¿‡æ»¤         å°† hive.strict.checks.no.partition.filter è®¾ç½®ä¸º true æ—¶ï¼Œå¯¹äºåˆ†åŒºè¡¨ï¼Œé™¤é where è¯­å¥ä¸­å«æœ‰åˆ†åŒºå­—æ®µè¿‡æ»¤æ¡ä»¶æ¥é™åˆ¶èŒƒå›´ï¼Œå¦åˆ™ä¸å…è®¸æ‰§è¡Œã€‚æ¢å¥è¯è¯´ï¼Œå°±æ˜¯ç”¨æˆ·ä¸å…è®¸æ‰«ææ‰€æœ‰åˆ†åŒºã€‚è¿›è¡Œè¿™ä¸ªé™åˆ¶çš„åŸå› æ˜¯ï¼Œé€šå¸¸åˆ†åŒºè¡¨éƒ½æ‹¥æœ‰éå¸¸å¤§çš„æ•°æ®é›†ï¼Œè€Œä¸”æ•°æ®å¢åŠ è¿…é€Ÿã€‚æ²¡æœ‰è¿›è¡Œåˆ†åŒºé™åˆ¶çš„æŸ¥è¯¢å¯èƒ½ä¼šæ¶ˆè€—ä»¤äººä¸å¯æ¥å—çš„å·¨å¤§èµ„æºæ¥å¤„ç†è¿™ä¸ªè¡¨ã€‚2ï¼‰ä½¿ç”¨ order by æ²¡æœ‰ limit è¿‡æ»¤        å°† hive.strict.checks.orderby.no.limit è®¾ç½®ä¸º true æ—¶ï¼Œå¯¹äºä½¿ç”¨äº† order by è¯­å¥çš„æŸ¥è¯¢ï¼Œè¦æ±‚å¿…é¡»ä½¿ç”¨ limit è¯­å¥ã€‚å› ä¸º order by ä¸ºäº†æ‰§è¡Œæ’åºè¿‡ç¨‹ä¼šå°†æ‰€æœ‰çš„ç»“æœæ•°æ®åˆ†å‘åˆ°åŒä¸€ä¸ªReducer ä¸­è¿›è¡Œå¤„ç†ï¼Œå¼ºåˆ¶è¦æ±‚ç”¨æˆ·å¢åŠ è¿™ä¸ª LIMIT è¯­å¥å¯ä»¥é˜²æ­¢ Reducer é¢å¤–æ‰§è¡Œå¾ˆé•¿ä¸€æ®µæ—¶é—´ã€‚3ï¼‰ç¬›å¡å°”ç§¯        å°† hive.strict.checks.cartesian.product è®¾ç½®ä¸º true æ—¶ï¼Œä¼šé™åˆ¶ç¬›å¡å°”ç§¯çš„æŸ¥è¯¢ã€‚å¯¹å…³ç³»å‹æ•°æ®åº“éå¸¸äº†è§£çš„ç”¨æˆ·å¯èƒ½æœŸæœ›åœ¨ æ‰§è¡Œ JOIN æŸ¥è¯¢çš„æ—¶å€™ä¸ä½¿ç”¨ ON è¯­å¥è€Œæ˜¯ä½¿ç”¨ where è¯­å¥ï¼Œè¿™æ ·å…³ç³»æ•°æ®åº“çš„æ‰§è¡Œä¼˜åŒ–å™¨å°±å¯ä»¥é«˜æ•ˆåœ°å°† WHERE è¯­å¥è½¬åŒ–æˆé‚£ä¸ª ON è¯­å¥ã€‚ä¸å¹¸çš„æ˜¯ï¼ŒHive å¹¶ä¸ä¼šæ‰§è¡Œè¿™ç§ä¼˜åŒ–ï¼Œå› æ­¤ï¼Œå¦‚æœè¡¨è¶³å¤Ÿå¤§ï¼Œé‚£ä¹ˆè¿™ä¸ªæŸ¥è¯¢å°±ä¼šå‡ºç°ä¸å¯æ§çš„æƒ…å†µã€‚\n10.8 JVM é‡ç”¨è¯¦è§ hadoop ä¼˜åŒ–æ–‡æ¡£ä¸­ jvm é‡ç”¨\n10.9 å‹ç¼©è¯¦è§ç¬¬ 9 ç« ã€‚\nç¬¬ 11 ç«  Hive å®æˆ˜11.1 éœ€æ±‚æè¿°ç»Ÿè®¡ç¡…è°·å½±éŸ³è§†é¢‘ç½‘ç«™çš„å¸¸è§„æŒ‡æ ‡ï¼Œå„ç§ TopN æŒ‡æ ‡ï¼šâ€” ç»Ÿè®¡è§†é¢‘è§‚çœ‹æ•° Top10â€” ç»Ÿè®¡è§†é¢‘ç±»åˆ«çƒ­åº¦ Top10â€” ç»Ÿè®¡å‡ºè§†é¢‘è§‚çœ‹æ•°æœ€é«˜çš„ 20 ä¸ªè§†é¢‘çš„æ‰€å±ç±»åˆ«ä»¥åŠç±»åˆ«åŒ…å« Top20 è§†é¢‘çš„ä¸ªæ•°â€” ç»Ÿè®¡è§†é¢‘è§‚çœ‹æ•° Top50 æ‰€å…³è”è§†é¢‘çš„æ‰€å±ç±»åˆ«æ’åºâ€” ç»Ÿè®¡æ¯ä¸ªç±»åˆ«ä¸­çš„è§†é¢‘çƒ­åº¦ Top10,ä»¥ Music ä¸ºä¾‹â€” ç»Ÿè®¡æ¯ä¸ªç±»åˆ«è§†é¢‘è§‚çœ‹æ•° Top10 â€” ç»Ÿè®¡ä¸Šä¼ è§†é¢‘æœ€å¤šçš„ç”¨æˆ· Top10 ä»¥åŠä»–ä»¬ä¸Šä¼ çš„è§†é¢‘è§‚çœ‹æ¬¡æ•°åœ¨å‰ 20 çš„è§†é¢‘\n11.2 æ•°æ®ç»“æ„1ï¼‰è§†é¢‘è¡¨ç”¨æˆ·è¡¨\n11.3 å‡†å¤‡å·¥ä½œå‡†å¤‡è¡¨1ï¼‰éœ€è¦å‡†å¤‡çš„è¡¨        åˆ›å»ºåŸå§‹æ•°æ®è¡¨ï¼šgulivideo_oriï¼Œgulivideo_user_oriï¼Œ        åˆ›å»ºæœ€ç»ˆè¡¨ï¼šgulivideo_orcï¼Œgulivideo_user_orc 2ï¼‰åˆ›å»ºåŸå§‹æ•°æ®è¡¨ï¼š ï¼ˆ1)gulivideo_ori\ncreate table gulivideo_ori(\n    videoId string, \n    uploader string, \n    age int, \n    category array&lt;string&gt;, \n    length int, \n    views int, \n    rate float, \n    ratings int, \n    comments int,\n    relatedId array&lt;string&gt;)\nrow format delimited fields terminated by \"\\t\"\ncollection items terminated by \"&amp;\"\nstored as textfile;\nï¼ˆ2ï¼‰åˆ›å»ºåŸå§‹æ•°æ®è¡¨: gulivideo_user_ori\ncreate table gulivideo_user_ori(\n    uploader string,\n    videos int,\n    friends int)\nrow format delimited \nfields terminated by \"\\t\" \nstored as textfile;\n2ï¼‰åˆ›å»º orc å­˜å‚¨æ ¼å¼å¸¦ snappy å‹ç¼©çš„è¡¨ï¼šï¼ˆ1ï¼‰gulivideo_orc\ncreate table gulivideo_orc(\n    videoId string, \n    uploader string, \n    age int, \n    category array&lt;string&gt;, \n    length int, \n    views int, \n    rate float, \n    ratings int, \n    comments int,\n    relatedId array&lt;string&gt;)\nstored as orc\ntblproperties(\"orc.compress\"=\"SNAPPY\");\nï¼ˆ2ï¼‰gulivideo_user_orc\ncreate table gulivideo_user_orc(\n    uploader string,\n    videos int,\n    friends int)\nrow format delimited \nfields terminated by \"\\t\" \nstored as orc\ntblproperties(\"orc.compress\"=\"SNAPPY\");\nï¼ˆ3ï¼‰å‘ ori è¡¨æ’å…¥æ•°æ®\nload data local inpath \"/opt/module/data/video\" into table gulivideo_ori;\nload data local inpath \"/opt/module/user\" into table gulivideo_user_ori; \nï¼ˆ4ï¼‰å‘ orc è¡¨æ’å…¥æ•°æ®\ninsert into table gulivideo_orc select * from gulivideo_ori;\ninsert into table gulivideo_user_orc select * from gulivideo_user_ori;\nå®‰è£… Tez å¼•æ“ï¼ˆäº†è§£ï¼‰Tez æ˜¯ä¸€ä¸ª Hive çš„è¿è¡Œå¼•æ“ï¼Œæ€§èƒ½ä¼˜äº MRã€‚ä¸ºä»€ä¹ˆä¼˜äº MR å‘¢ï¼Ÿçœ‹ä¸‹ã€‚\n\nâ€‹        ç”¨ Hive ç›´æ¥ç¼–å†™ MR ç¨‹åºï¼Œå‡è®¾æœ‰å››ä¸ªæœ‰ä¾èµ–å…³ç³»çš„ MR ä½œä¸šï¼Œä¸Šå›¾ä¸­ï¼Œç»¿è‰²æ˜¯ ReduceTaskï¼Œäº‘çŠ¶è¡¨ç¤ºå†™å±è”½ï¼Œéœ€è¦å°†ä¸­é—´ç»“æœæŒä¹…åŒ–å†™åˆ° HDFSã€‚â€‹        Tez å¯ä»¥å°†å¤šä¸ªæœ‰ä¾èµ–çš„ä½œä¸šè½¬æ¢ä¸ºä¸€ä¸ªä½œä¸šï¼Œè¿™æ ·åªéœ€å†™ä¸€æ¬¡ HDFSï¼Œä¸”ä¸­é—´èŠ‚ç‚¹è¾ƒå°‘ï¼Œä»è€Œå¤§å¤§æå‡ä½œä¸šçš„è®¡ç®—æ€§èƒ½ã€‚ \n1ï¼‰å°† tez å®‰è£…åŒ…æ‹·è´åˆ°é›†ç¾¤ï¼Œå¹¶è§£å‹ tar åŒ…\n[atguigu@hadoop102 software]$ mkdir /opt/module/tez\n[atguigu@hadoop102 software]$ tar -zxvf /opt/software/tez-0.10.1-\nSNAPSHOT-minimal.tar.gz -C /opt/module/tez\n2ï¼‰ä¸Šä¼  tez ä¾èµ–åˆ° HDFS\n[atguigu@hadoop102 software]$ hadoop fs -mkdir /tez\n[atguigu@hadoop102 software]$ hadoop fs -put /opt/software/tez-0.10.1-\nSNAPSHOT.tar.gz /tez\n3ï¼‰æ–°å»º tez-site.xml[atguigu@hadoop102 software]HADOOP_HOME/etc/hadoop/tez-site.xmlæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;?xml-stylesheet type=\"text/xsl\" href=\"configuration.xsl\"?&gt;\n&lt;configuration&gt;\n    &lt;property&gt;\n        &lt;name&gt;tez.lib.uris&lt;/name&gt;\n        &lt;value&gt;${fs.defaultFS}/tez/tez-0.10.1-SNAPSHOT.tar.gz&lt;/value&gt;\n    &lt;/property&gt;\n    &lt;property&gt;\n        &lt;name&gt;tez.use.cluster.hadoop-libs&lt;/name&gt;\n        &lt;value&gt;true&lt;/value&gt;\n    &lt;/property&gt;\n    &lt;property&gt;\n        &lt;name&gt;tez.am.resource.memory.mb&lt;/name&gt;\n        &lt;value&gt;1024&lt;/value&gt;\n\n    &lt;/property&gt;\n    &lt;property&gt;\n        &lt;name&gt;tez.am.resource.cpu.vcores&lt;/name&gt;\n        &lt;value&gt;1&lt;/value&gt;\n    &lt;/property&gt;\n    &lt;property&gt;\n        &lt;name&gt;tez.container.max.java.heap.fraction&lt;/name&gt;\n        &lt;value&gt;0.4&lt;/value&gt;\n    &lt;/property&gt;\n    &lt;property&gt;\n        &lt;name&gt;tez.task.resource.memory.mb&lt;/name&gt;\n        &lt;value&gt;1024&lt;/value&gt;\n    &lt;/property&gt;\n    &lt;property&gt;\n        &lt;name&gt;tez.task.resource.cpu.vcores&lt;/name&gt;\n        &lt;value&gt;1&lt;/value&gt;\n    &lt;/property&gt;\n&lt;/configuration&gt;\n4ï¼‰ä¿®æ”¹ Hadoop ç¯å¢ƒå˜é‡\n[atguigu@hadoop102 software]$ vim\n$HADOOP_HOME/etc/hadoop/shellprofile.d/tez.sh\nâ€‹        æ·»åŠ  Tez çš„ Jar åŒ…ç›¸å…³ä¿¡æ¯\nhadoop_add_profile tez\nfunction _tez_hadoop_classpath\n{\n hadoop_add_classpath \"$HADOOP_HOME/etc/hadoop\" after\n hadoop_add_classpath \"/opt/module/tez/*\" after\n hadoop_add_classpath \"/opt/module/tez/lib/*\" after\n} \n\n5ï¼‰ä¿®æ”¹ Hive çš„è®¡ç®—å¼•æ“\n[atguigu@hadoop102 software]$ vim $HIVE_HOME/conf/hive-site.xml\næ·»åŠ \n&lt;property&gt;\n &lt;name&gt;hive.execution.engine&lt;/name&gt;\n &lt;value&gt;tez&lt;/value&gt;\n&lt;/property&gt;\n&lt;property&gt;\n &lt;name&gt;hive.tez.container.size&lt;/name&gt;\n &lt;value&gt;1024&lt;/value&gt;\n&lt;/property&gt;\n6ï¼‰è§£å†³æ—¥å¿— Jar åŒ…å†²çª\n[atguigu@hadoop102 software]$ rm /opt/module/tez/lib/slf4j-log4j12-\n1.7.10.jar\n11.4 ä¸šåŠ¡åˆ†æç»Ÿè®¡è§†é¢‘è§‚çœ‹æ•° Top10æ€è·¯ï¼šä½¿ç”¨ order by æŒ‰ç…§ views å­—æ®µåšä¸€ä¸ªå…¨å±€æ’åºå³å¯ï¼ŒåŒæ—¶æˆ‘ä»¬è®¾ç½®åªæ˜¾ç¤ºå‰ 10æ¡ã€‚æœ€ç»ˆä»£ç ï¼š\nSELECT \n videoId,\n views\nFROM \n gulivideo_orc\nORDER BY \n views DESC\nLIMIT 10;\nç»Ÿè®¡è§†é¢‘ç±»åˆ«çƒ­åº¦ Top10æ€è·¯ï¼š \nï¼ˆ1ï¼‰å³ç»Ÿè®¡æ¯ä¸ªç±»åˆ«æœ‰å¤šå°‘ä¸ªè§†é¢‘ï¼Œæ˜¾ç¤ºå‡ºåŒ…å«è§†é¢‘æœ€å¤šçš„å‰ 10 ä¸ªç±»åˆ«ã€‚ï¼ˆ2ï¼‰æˆ‘ä»¬éœ€è¦æŒ‰ç…§ç±»åˆ« group by èšåˆï¼Œç„¶å count ç»„å†…çš„ videoId ä¸ªæ•°å³å¯ã€‚ï¼ˆ3ï¼‰å› ä¸ºå½“å‰è¡¨ç»“æ„ä¸ºï¼šä¸€ä¸ªè§†é¢‘å¯¹åº”ä¸€ä¸ªæˆ–å¤šä¸ªç±»åˆ«ã€‚æ‰€ä»¥å¦‚æœè¦ group by ç±»åˆ«ï¼Œéœ€è¦å…ˆå°†ç±»åˆ«è¿›è¡Œåˆ—è½¬è¡Œ(å±•å¼€)ï¼Œç„¶åå†è¿›è¡Œ count å³å¯ã€‚ï¼ˆ4ï¼‰æœ€åæŒ‰ç…§çƒ­åº¦æ’åºï¼Œæ˜¾ç¤ºå‰ 10 æ¡ã€‚\n# æœ€ç»ˆä»£ç ï¼š\nSELECT \n t1.category_name , \n COUNT(t1.videoId) hot\nFROM \n(\n    SELECT \n    videoId, \n    category_name \n    FROM \n    gulivideo_orc \n    lateral VIEW explode(category) gulivideo_orc_tmp AS category_name\n) t1\nGROUP BY \n t1.category_name \nORDER BY\n hot \nDESC \nLIMIT 10\nç»Ÿè®¡å‡ºè§†é¢‘è§‚çœ‹æ•°æœ€é«˜çš„ 20 ä¸ªè§†é¢‘çš„æ‰€å±ç±»åˆ«ä»¥åŠç±»åˆ«åŒ…å«Top20 è§†é¢‘çš„ä¸ªæ•°æ€è·¯ï¼šï¼ˆ1ï¼‰å…ˆæ‰¾åˆ°è§‚çœ‹æ•°æœ€é«˜çš„ 20 ä¸ªè§†é¢‘æ‰€å±æ¡ç›®çš„æ‰€æœ‰ä¿¡æ¯ï¼Œé™åºæ’åˆ—ï¼ˆ2ï¼‰æŠŠè¿™ 20 æ¡ä¿¡æ¯ä¸­çš„ category åˆ†è£‚å‡ºæ¥(åˆ—è½¬è¡Œ) ï¼ˆ3ï¼‰æœ€åæŸ¥è¯¢è§†é¢‘åˆ†ç±»åç§°å’Œè¯¥åˆ†ç±»ä¸‹æœ‰å¤šå°‘ä¸ª Top20 çš„è§†é¢‘æœ€ç»ˆä»£ç ï¼š\nSELECT \n t2.category_name,\n COUNT(t2.videoId) video_sum\nFROM \n(\n    SELECT\n    t1.videoId,\n    category_name\n    FROM \n    (\n        SELECT \n        videoId, \n        views ,\n        category \n        FROM \n        gulivideo_orc\n        ORDER BY \n        views \n        DESC \n        LIMIT 20 \n    ) t1\n    lateral VIEW explode(t1.category) t1_tmp AS category_name\n) t2\nGROUP BY t2.category_name\nç»Ÿè®¡è§†é¢‘è§‚çœ‹æ•° Top50 æ‰€å…³è”è§†é¢‘çš„æ‰€å±ç±»åˆ«æ’åºä»£ç ï¼š\nSELECT\n t6.category_name,\n t6.video_sum,\n rank() over(ORDER BY t6.video_sum DESC ) rk\nFROM\n(\n    SELECT\n    t5.category_name,\n    COUNT(t5.relatedid_id) video_sum\n    FROM\n    (\n        SELECT\n        t4.relatedid_id,\n        category_name\n        FROM\n        (\n            SELECT \n            t2.relatedid_id ,\n            t3.category \n            FROM \n            (\n                SELECT \n                relatedid_id\n                FROM \n                (\n                    SELECT \n                    videoId, \n                    views,\n                    relatedid \n                    FROM \n                    gulivideo_orc\n                    ORDER BY\n                    views \n                    DESC \n                    LIMIT 50\n                )t1\n                lateral VIEW explode(t1.relatedid) t1_tmp AS relatedid_id\n            )t2 \n            JOIN \n            gulivideo_orc t3 \n            ON \n            t2.relatedid_id = t3.videoId \n        ) t4 \n        lateral VIEW explode(t4.category) t4_tmp AS category_name\n    ) t5\n    GROUP BY\n    t5.category_name\n    ORDER BY \n    video_sum\n    DESC \n) t6\nç»Ÿè®¡æ¯ä¸ªç±»åˆ«ä¸­çš„è§†é¢‘çƒ­åº¦ Top10ï¼Œä»¥ Music ä¸ºä¾‹æ€è·¯ï¼š \nï¼ˆ1ï¼‰è¦æƒ³ç»Ÿè®¡ Music ç±»åˆ«ä¸­çš„è§†é¢‘çƒ­åº¦ Top10ï¼Œéœ€è¦å…ˆæ‰¾åˆ° Music ç±»åˆ«ï¼Œé‚£ä¹ˆå°±éœ€è¦å°†category å±•å¼€ï¼Œæ‰€ä»¥å¯ä»¥åˆ›å»ºä¸€å¼ è¡¨ç”¨äºå­˜æ”¾ categoryId å±•å¼€çš„æ•°æ®ã€‚ï¼ˆ2ï¼‰å‘ category å±•å¼€çš„è¡¨ä¸­æ’å…¥æ•°æ®ã€‚ï¼ˆ3ï¼‰ç»Ÿè®¡å¯¹åº”ç±»åˆ«ï¼ˆMusicï¼‰ä¸­çš„è§†é¢‘çƒ­åº¦ã€‚ç»Ÿè®¡ Music ç±»åˆ«çš„ Top10ï¼ˆä¹Ÿå¯ä»¥ç»Ÿè®¡å…¶ä»–ï¼‰\nSELECT \n t1.videoId, \n t1.views,\n t1.category_name\nFROM \n(\n    SELECT\n    videoId,\n    views,\n    category_name\n    FROM gulivideo_orc\n    lateral VIEW explode(category) gulivideo_orc_tmp AS category_name\n)t1 \nWHERE \n t1.category_name = \"Music\" \nORDER BY \n t1.views \nDESC \nLIMIT 10\nç»Ÿè®¡æ¯ä¸ªç±»åˆ«è§†é¢‘è§‚çœ‹æ•° Top10æœ€ç»ˆä»£ç ï¼š\nSELECT \n t2.videoId,\n t2.views,\n t2.category_name,\n t2.rk\nFROM \n(\n    SELECT \n    t1.videoId,\n    t1.views,\n    t1.category_name,\n    rank() over(PARTITION BY t1.category_name ORDER BY t1.views DESC ) rk\n    FROM \n    (\n        SELECT\n        videoId,\n        views,\n        category_name\n        FROM gulivideo_orc\n        lateral VIEW explode(category) gulivideo_orc_tmp AS category_name\n    )t1\n)t2\nWHERE t2.rk &lt;=10\nç»Ÿè®¡ä¸Šä¼ è§†é¢‘æœ€å¤šçš„ç”¨æˆ· Top10ä»¥åŠä»–ä»¬ä¸Šä¼ çš„è§†é¢‘è§‚çœ‹æ¬¡æ•°åœ¨å‰ 20 çš„è§†é¢‘æ€è·¯ï¼š \nï¼ˆ1ï¼‰æ±‚å‡ºä¸Šä¼ è§†é¢‘æœ€å¤šçš„ 10 ä¸ªç”¨æˆ·ï¼ˆ2ï¼‰å…³è” gulivideo_orc è¡¨ï¼Œæ±‚å‡ºè¿™ 10 ä¸ªç”¨æˆ·ä¸Šä¼ çš„æ‰€æœ‰çš„è§†é¢‘ï¼ŒæŒ‰ç…§è§‚çœ‹æ•°å–å‰ 20æœ€ç»ˆä»£ç :\nSELECT \n t2.videoId,\n t2.views,\n t2.uploader\nFROM\n(\n    SELECT \n    uploader,\n    videos\n    FROM gulivideo_user_orc \n    ORDER BY \n    videos\n    DESC\n    LIMIT 10 \n) t1\nJOIN gulivideo_orc t2 \nON t1.uploader = t2.uploader\nORDER BY \n t2.views \nDESC\nLIMIT 20\né™„å½•ï¼šå¸¸è§é”™è¯¯åŠè§£å†³æ–¹æ¡ˆ0ï¼‰å¦‚æœæ›´æ¢ Tez å¼•æ“åï¼Œæ‰§è¡Œä»»åŠ¡å¡ä½ï¼Œå¯ä»¥å°è¯•è°ƒèŠ‚å®¹é‡è°ƒåº¦å™¨çš„èµ„æºè°ƒåº¦ç­–ç•¥å°†$HADOOP_HOME/etc/hadoop/capacity-scheduler.xml æ–‡ä»¶ä¸­çš„\n&lt;property&gt;\n    &lt;name&gt;yarn.scheduler.capacity.maximum-am-resource-percent&lt;/name&gt;\n    &lt;value&gt;0.1&lt;/value&gt;\n    &lt;description&gt;\n        Maximum percent of resources in the cluster which can be used to run \n        application masters i.e. controls number of concurrent running\n        applications.\n    &lt;/description&gt;\n&lt;/property&gt;\næ”¹æˆ\n&lt;property&gt;\n    &lt;name&gt;yarn.scheduler.capacity.maximum-am-resource-percent&lt;/name&gt;\n    &lt;value&gt;1&lt;/value&gt;\n    &lt;description&gt;\n        Maximum percent of resources in the cluster which can be used to run \n        application masters i.e. controls number of concurrent running\n        applications.\n    &lt;/description&gt;\n&lt;/property&gt;\n1ï¼‰è¿æ¥ä¸ä¸Š mysql æ•°æ®åº“ï¼ˆ1ï¼‰å¯¼é”™é©±åŠ¨åŒ…ï¼Œåº”è¯¥æŠŠ mysql-connector-java-5.1.27-bin.jar å¯¼å…¥/opt/module/hive/lib çš„ä¸æ˜¯è¿™ä¸ªåŒ…ã€‚é”™æŠŠ mysql-connector-java-5.1.27.tar.gz å¯¼å…¥ hive/lib åŒ…ä¸‹ã€‚ï¼ˆ2ï¼‰ä¿®æ”¹ user è¡¨ä¸­çš„ä¸»æœºåç§°æ²¡æœ‰éƒ½ä¿®æ”¹ä¸º%ï¼Œè€Œæ˜¯ä¿®æ”¹ä¸º localhost2ï¼‰hive é»˜è®¤çš„è¾“å…¥æ ¼å¼å¤„ç†æ˜¯ CombineHiveInputFormatï¼Œä¼šå¯¹å°æ–‡ä»¶è¿›è¡Œåˆå¹¶ã€‚\nhive (default)&gt; set hive.input.format;\nhive.input.format=org.apache.hadoop.hive.ql.io.CombineHiveInputFormat\n# å¯ä»¥é‡‡ç”¨ HiveInputFormat å°±ä¼šæ ¹æ®åˆ†åŒºæ•°è¾“å‡ºç›¸åº”çš„æ–‡ä»¶ã€‚\nhive (default)&gt; set \nhive.input.format=org.apache.hadoop.hive.ql.io.HiveInputFormat;\n3ï¼‰ä¸èƒ½æ‰§è¡Œ mapreduce ç¨‹åºå¯èƒ½æ˜¯ hadoop çš„ yarn æ²¡å¼€å¯ã€‚4ï¼‰å¯åŠ¨ mysql æœåŠ¡æ—¶ï¼ŒæŠ¥ MySQL server PID file could not be found! å¼‚å¸¸ã€‚ åœ¨/var/lock/subsys/mysql è·¯å¾„ä¸‹åˆ›å»º hadoop102.pidï¼Œå¹¶åœ¨æ–‡ä»¶ä¸­æ·»åŠ å†…å®¹ï¼š43965ï¼‰æŠ¥ service mysql status MySQL is not running, but lock file (/var/lock/subsys/mysql[å¤±è´¥])å¼‚ å¸¸ã€‚è§£å†³æ–¹æ¡ˆï¼šåœ¨/var/lib/mysql ç›®å½•ä¸‹åˆ›å»ºï¼š -rw-rwâ€”â€”. 1 mysql mysql 5 12 æœˆ 22 16:41 hadoop102.pid æ–‡ä»¶ï¼Œå¹¶ä¿®æ”¹æƒé™ä¸º 777ã€‚\n 6ï¼‰JVM å †å†…å­˜æº¢å‡ºæè¿°ï¼šjava.lang.OutOfMemoryError: Java heap spaceè§£å†³ï¼šåœ¨ yarn-site.xml ä¸­åŠ å…¥å¦‚ä¸‹ä»£ç \n&lt;property&gt;\n    &lt;name&gt;yarn.scheduler.maximum-allocation-mb&lt;/name&gt;\n    &lt;value&gt;2048&lt;/value&gt;\n&lt;/property&gt;\n&lt;property&gt;\n    &lt;name&gt;yarn.scheduler.minimum-allocation-mb&lt;/name&gt;\n    &lt;value&gt;2048&lt;/value&gt;\n&lt;/property&gt;\n&lt;property&gt;\n    &lt;name&gt;yarn.nodemanager.vmem-pmem-ratio&lt;/name&gt;\n    &lt;value&gt;2.1&lt;/value&gt;\n&lt;/property&gt;\n&lt;property&gt;\n    &lt;name&gt;mapred.child.java.opts&lt;/name&gt;\n    &lt;value&gt;-Xmx1024m&lt;/value&gt;\n&lt;/property&gt;\n7ï¼‰è™šæ‹Ÿå†…å­˜é™åˆ¶åœ¨ yarn-site.xml ä¸­æ·»åŠ å¦‚ä¸‹é…ç½®:\n&lt;property&gt;\n    &lt;name&gt;yarn.nodemanager.vmem-check-enabled&lt;/name&gt;\n    &lt;value&gt;false&lt;/value&gt;\n&lt;/property&gt;\n","slug":"B6-HiveåŸºç¡€","date":"2021-11-17T14:38:57.000Z","categories_index":"æ•°æ®åº“","tags_index":"Hive","author_index":"YFR718"},{"id":"60afbd6afe5dbba07afaea373a4f245b","title":"B5.Hadoopæ¡ˆä¾‹","content":"MapReduceWordCountæ¡ˆä¾‹å®æ“\nåˆ›å»ºmavenå·¥ç¨‹ï¼ŒMapReduceDemo\n\nåœ¨pom.xmlæ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹ä¾èµ–\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt;\n        &lt;artifactId&gt;hadoop-client&lt;/artifactId&gt;\n        &lt;version&gt;3.1.3&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;junit&lt;/groupId&gt;\n        &lt;artifactId&gt;junit&lt;/artifactId&gt;\n        &lt;version&gt;4.12&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n        &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\n        &lt;version&gt;1.7.30&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n\n\nåœ¨é¡¹ç›®çš„src/main/resourcesç›®å½•ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œå‘½åä¸ºâ€œlog4j.propertiesâ€ï¼Œåœ¨æ–‡ä»¶ä¸­å¡«å…¥ã€‚\nlog4j.rootLogger=INFO, stdout  \nlog4j.appender.stdout=org.apache.log4j.ConsoleAppender  \nlog4j.appender.stdout.layout=org.apache.log4j.PatternLayout  \nlog4j.appender.stdout.layout.ConversionPattern=%d %p [%c] - %m%n  \nlog4j.appender.logfile=org.apache.log4j.FileAppender  \nlog4j.appender.logfile.File=target/spring.log  \nlog4j.appender.logfile.layout=org.apache.log4j.PatternLayout  \nlog4j.appender.logfile.layout.ConversionPattern=%d %p [%c] - %m%n\n\nåˆ›å»ºåŒ…åï¼šcom.atguigu.mapreduce.wordcount\n\nç¼–å†™Mapperç±»\npackage com.atguigu.mapreduce.wordcount;\nimport java.io.IOException;\nimport org.apache.hadoop.io.IntWritable;\nimport org.apache.hadoop.io.LongWritable;\nimport org.apache.hadoop.io.Text;\nimport org.apache.hadoop.mapreduce.Mapper;\n\npublic class WordCountMapper extends Mapper&lt;LongWritable, Text, Text, IntWritable&gt;{\n\t\n\tText k = new Text();\n\tIntWritable v = new IntWritable(1);\n\t\n\t@Override\n\tprotected void map(LongWritable key, Text value, Context context)\tthrows IOException, InterruptedException {\n\t\t\n\t\t// 1 è·å–ä¸€è¡Œ\n\t\tString line = value.toString();\n\t\t\n\t\t// 2 åˆ‡å‰²\n\t\tString[] words = line.split(\" \");\n\t\t\n\t\t// 3 è¾“å‡º\n\t\tfor (String word : words) {\n\t\t\t\n\t\t\tk.set(word);\n\t\t\tcontext.write(k, v);\n\t\t}\n\t}\n}\n\nç¼–å†™Reducerç±»\npackage com.atguigu.mapreduce.wordcount;\nimport java.io.IOException;\nimport org.apache.hadoop.io.IntWritable;\nimport org.apache.hadoop.io.Text;\nimport org.apache.hadoop.mapreduce.Reducer;\n\npublic class WordCountReducer extends Reducer&lt;Text, IntWritable, Text, IntWritable&gt;{\n\nint sum;\nIntWritable v = new IntWritable();\n\n\t@Override\n\tprotected void reduce(Text key, Iterable&lt;IntWritable&gt; values,Context context) throws IOException, InterruptedException {\n\t\t\n\t\t// 1 ç´¯åŠ æ±‚å’Œ\n\t\tsum = 0;\n\t\tfor (IntWritable count : values) {\n\t\t\tsum += count.get();\n\t\t}\n\t\t\n\t\t// 2 è¾“å‡º\n         v.set(sum);\n\t\tcontext.write(key,v);\n\t}\n}\n\nç¼–å†™Driveré©±åŠ¨ç±»\npackage com.atguigu.mapreduce.wordcount;\nimport java.io.IOException;\nimport org.apache.hadoop.conf.Configuration;\nimport org.apache.hadoop.fs.Path;\nimport org.apache.hadoop.io.IntWritable;\nimport org.apache.hadoop.io.Text;\nimport org.apache.hadoop.mapreduce.Job;\nimport org.apache.hadoop.mapreduce.lib.input.FileInputFormat;\nimport org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;\n\npublic class WordCountDriver {\n\n\tpublic static void main(String[] args) throws IOException, ClassNotFoundException, InterruptedException {\n\n\t\t// 1 è·å–é…ç½®ä¿¡æ¯ä»¥åŠè·å–jobå¯¹è±¡\n\t\tConfiguration conf = new Configuration();\n\t\tJob job = Job.getInstance(conf);\n\n\t\t// 2 å…³è”æœ¬Driverç¨‹åºçš„jar\n\t\tjob.setJarByClass(WordCountDriver.class);\n\n\t\t// 3 å…³è”Mapperå’ŒReducerçš„jar\n\t\tjob.setMapperClass(WordCountMapper.class);\n\t\tjob.setReducerClass(WordCountReducer.class);\n\n\t\t// 4 è®¾ç½®Mapperè¾“å‡ºçš„kvç±»å‹\n\t\tjob.setMapOutputKeyClass(Text.class);\n\t\tjob.setMapOutputValueClass(IntWritable.class);\n\n\t\t// 5 è®¾ç½®æœ€ç»ˆè¾“å‡ºkvç±»å‹\n\t\tjob.setOutputKeyClass(Text.class);\n\t\tjob.setOutputValueClass(IntWritable.class);\n\t\t\n\t\t// 6 è®¾ç½®è¾“å…¥å’Œè¾“å‡ºè·¯å¾„\n\t\tFileInputFormat.setInputPaths(job, new Path(args[0]));\n\t\tFileOutputFormat.setOutputPath(job, new Path(args[1]));\n\n\t\t// 7 æäº¤job\n\t\tboolean result = job.waitForCompletion(true);\n\t\tSystem.exit(result ? 0 : 1);\n\t}\n}\n\næœ¬åœ°æµ‹è¯•\nï¼ˆ1ï¼‰éœ€è¦é¦–å…ˆé…ç½®å¥½HADOOP_HOMEå˜é‡ä»¥åŠWindowsè¿è¡Œä¾èµ–\nï¼ˆ2ï¼‰åœ¨IDEA/Eclipseä¸Šè¿è¡Œç¨‹åº\n\né›†ç¾¤ä¸Šæµ‹è¯•\nï¼ˆ1ï¼‰ç”¨mavenæ‰“jaråŒ…ï¼Œéœ€è¦æ·»åŠ çš„æ‰“åŒ…æ’ä»¶ä¾èµ–\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.6.1&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;1.8&lt;/source&gt;\n                &lt;target&gt;1.8&lt;/target&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;descriptorRefs&gt;\n                    &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n                &lt;/descriptorRefs&gt;\n            &lt;/configuration&gt;\n            &lt;executions&gt;\n                &lt;execution&gt;\n                    &lt;id&gt;make-assembly&lt;/id&gt;\n                    &lt;phase&gt;package&lt;/phase&gt;\n                    &lt;goals&gt;\n                        &lt;goal&gt;single&lt;/goal&gt;\n                    &lt;/goals&gt;\n                &lt;/execution&gt;\n            &lt;/executions&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\nï¼ˆ2ï¼‰å°†ç¨‹åºæ‰“æˆjaråŒ…\nï¼ˆ3ï¼‰ä¿®æ”¹ä¸å¸¦ä¾èµ–çš„jaråŒ…åç§°ä¸ºwc.jarï¼Œå¹¶æ‹·è´è¯¥jaråŒ…åˆ°Hadoopé›†ç¾¤çš„/opt/module/hadoop-3.1.3è·¯å¾„ã€‚\nï¼ˆ4ï¼‰å¯åŠ¨Hadoopé›†ç¾¤\n[atguigu@hadoop102 hadoop-3.1.3]sbin/start-dfs.sh\n\n[atguigu@hadoop103 hadoop-3.1.3]$ sbin/start-yarn.sh\nï¼ˆ5ï¼‰æ‰§è¡ŒWordCountç¨‹åº\n[atguigu@hadoop102 hadoop-3.1.3]$ hadoop jar wc.jar\n\n com.atguigu.mapreduce.wordcount.WordCountDriver /user/atguigu/input /user/atguigu/output\n\n\nåºåˆ—åŒ–æ¡ˆä¾‹å®æ“ç»Ÿè®¡æ¯ä¸€ä¸ªæ‰‹æœºå·è€—è´¹çš„æ€»ä¸Šè¡Œæµé‡ã€æ€»ä¸‹è¡Œæµé‡ã€æ€»æµé‡\nè¾“å…¥æ•°æ®æ ¼å¼ï¼š\n\n\n\n\nid\næ‰‹æœºå·ç \nç½‘ç»œip\nä¸Šè¡Œæµ\nä¸‹è¡Œæµé‡\nç½‘ç»œçŠ¶æ€ç \n\n\n\n\n7\n13560436666\n13560436666\n1116\n954\n200\n\n\n\n\næœŸæœ›è¾“å‡ºæ•°æ®æ ¼å¼:\n\n\n\n\næ‰‹æœºå·ç \nä¸Šè¡Œæµé‡\nä¸‹è¡Œæµé‡\næ€»æµé‡\n\n\n\n\n13560436666\n1116\n954\n2070\n\n\n\n\nMapé˜¶æ®µ(1)è¯»å–ä¸€è¡Œæ•°æ®,åˆ‡åˆ†å­—æ®µ(2) æŠ½å–æ‰‹æœºå·ã€ä¸Šè¡Œæµé‡ã€ä¸‹è¡Œæµé‡(3)ä»¥æ‰‹æœºå·ä¸ºkey, beanå¯¹è±¡ä¸ºvalueè¾“å‡º,å³context. write(æ‰‹æœºå·,bean);(4) beanå¯¹è±¡è¦æƒ³èƒ½å¤Ÿä¼ è¾“ï¼Œå¿…é¡»å®ç°åºåˆ—åŒ–æ¥å£\nReduceé˜¶æ®µ(1) ç´¯åŠ ä¸Šè¡Œæµé‡å’Œä¸‹è¡Œæµé‡å¾—åˆ°æ€»æµé‡ã€‚\nç¼–å†™æµé‡ç»Ÿè®¡çš„Beanå¯¹è±¡\npackage com.atguigu.mapreduce.writable;\n\nimport org.apache.hadoop.io.Writable;\nimport java.io.DataInput;\nimport java.io.DataOutput;\nimport java.io.IOException;\n\n//1 ç»§æ‰¿Writableæ¥å£\npublic class FlowBean implements Writable {\n\n    private long upFlow; //ä¸Šè¡Œæµé‡\n    private long downFlow; //ä¸‹è¡Œæµé‡\n    private long sumFlow; //æ€»æµé‡\n\n    //2 æä¾›æ— å‚æ„é€ \n    public FlowBean() {\n    }\n\n    //3 æä¾›ä¸‰ä¸ªå‚æ•°çš„getterå’Œsetteræ–¹æ³•\n    public long getUpFlow() {\n        return upFlow;\n    }\n\n    public void setUpFlow(long upFlow) {\n        this.upFlow = upFlow;\n    }\n\n    public long getDownFlow() {\n        return downFlow;\n    }\n\n    public void setDownFlow(long downFlow) {\n        this.downFlow = downFlow;\n    }\n\n    public long getSumFlow() {\n        return sumFlow;\n    }\n\n    public void setSumFlow(long sumFlow) {\n        this.sumFlow = sumFlow;\n    }\n\n    public void setSumFlow() {\n        this.sumFlow = this.upFlow + this.downFlow;\n    }\n\n    //4 å®ç°åºåˆ—åŒ–å’Œååºåˆ—åŒ–æ–¹æ³•,æ³¨æ„é¡ºåºä¸€å®šè¦ä¿æŒä¸€è‡´\n    @Override\n    public void write(DataOutput dataOutput) throws IOException {\n        dataOutput.writeLong(upFlow);\n        dataOutput.writeLong(downFlow);\n        dataOutput.writeLong(sumFlow);\n    }\n\n    @Override\n    public void readFields(DataInput dataInput) throws IOException {\n        this.upFlow = dataInput.readLong();\n        this.downFlow = dataInput.readLong();\n        this.sumFlow = dataInput.readLong();\n    }\n\n    //5 é‡å†™ToString\n    @Override\n    public String toString() {\n        return upFlow + \"\\t\" + downFlow + \"\\t\" + sumFlow;\n    }\n}\nç¼–å†™Mapperç±»\npackage com.atguigu.mapreduce.writable;\n\nimport org.apache.hadoop.io.LongWritable;\nimport org.apache.hadoop.io.Text;\nimport org.apache.hadoop.mapreduce.Mapper;\nimport java.io.IOException;\n\npublic class FlowMapper extends Mapper&lt;LongWritable, Text, Text, FlowBean&gt; {\n    private Text outK = new Text();\n    private FlowBean outV = new FlowBean();\n\n    @Override\n    protected void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException {\n\n        //1 è·å–ä¸€è¡Œæ•°æ®,è½¬æˆå­—ç¬¦ä¸²\n        String line = value.toString();\n\n        //2 åˆ‡å‰²æ•°æ®\n        String[] split = line.split(\"\\t\");\n\n        //3 æŠ“å–æˆ‘ä»¬éœ€è¦çš„æ•°æ®:æ‰‹æœºå·,ä¸Šè¡Œæµé‡,ä¸‹è¡Œæµé‡\n        String phone = split[1];\n        String up = split[split.length - 3];\n        String down = split[split.length - 2];\n\n        //4 å°è£…outK outV\n        outK.set(phone);\n        outV.setUpFlow(Long.parseLong(up));\n        outV.setDownFlow(Long.parseLong(down));\n        outV.setSumFlow();\n\n        //5 å†™å‡ºoutK outV\n        context.write(outK, outV);\n    }\n}\nç¼–å†™Reducerç±»\npackage com.atguigu.mapreduce.writable;\n\nimport org.apache.hadoop.io.Text;\nimport org.apache.hadoop.mapreduce.Reducer;\nimport java.io.IOException;\n\npublic class FlowReducer extends Reducer&lt;Text, FlowBean, Text, FlowBean&gt; {\n    private FlowBean outV = new FlowBean();\n    @Override\n    protected void reduce(Text key, Iterable&lt;FlowBean&gt; values, Context context) throws IOException, InterruptedException {\n\n        long totalUp = 0;\n        long totalDown = 0;\n\n        //1 éå†values,å°†å…¶ä¸­çš„ä¸Šè¡Œæµé‡,ä¸‹è¡Œæµé‡åˆ†åˆ«ç´¯åŠ \n        for (FlowBean flowBean : values) {\n            totalUp += flowBean.getUpFlow();\n            totalDown += flowBean.getDownFlow();\n        }\n\n        //2 å°è£…outKV\n        outV.setUpFlow(totalUp);\n        outV.setDownFlow(totalDown);\n        outV.setSumFlow();\n\n        //3 å†™å‡ºoutK outV\n        context.write(key,outV);\n    }\n}\nç¼–å†™Driveré©±åŠ¨ç±»\npackage com.atguigu.mapreduce.writable;\n\nimport org.apache.hadoop.conf.Configuration;\nimport org.apache.hadoop.fs.Path;\nimport org.apache.hadoop.io.Text;\nimport org.apache.hadoop.mapreduce.Job;\nimport org.apache.hadoop.mapreduce.lib.input.FileInputFormat;\nimport org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;\nimport java.io.IOException;\n\npublic class FlowDriver {\n    public static void main(String[] args) throws IOException, ClassNotFoundException, InterruptedException {\n\n        //1 è·å–jobå¯¹è±¡\n        Configuration conf = new Configuration();\n        Job job = Job.getInstance(conf);\n\n        //2 å…³è”æœ¬Driverç±»\n        job.setJarByClass(FlowDriver.class);\n\n        //3 å…³è”Mapperå’ŒReducer\n        job.setMapperClass(FlowMapper.class);\n        job.setReducerClass(FlowReducer.class);\n        \n\t\t//4 è®¾ç½®Mapç«¯è¾“å‡ºKVç±»å‹\n        job.setMapOutputKeyClass(Text.class);\n        job.setMapOutputValueClass(FlowBean.class);\n        \n\t\t//5 è®¾ç½®ç¨‹åºæœ€ç»ˆè¾“å‡ºçš„KVç±»å‹\n        job.setOutputKeyClass(Text.class);\n        job.setOutputValueClass(FlowBean.class);\n        \n\t\t//6 è®¾ç½®ç¨‹åºçš„è¾“å…¥è¾“å‡ºè·¯å¾„\n        FileInputFormat.setInputPaths(job, new Path(\"D:\\\\inputflow\"));\n        FileOutputFormat.setOutputPath(job, new Path(\"D:\\\\flowoutput\"));\n        \n\t\t//7 æäº¤Job\n        boolean b = job.waitForCompletion(true);\n        System.exit(b ? 0 : 1);\n    }\n}\nCombineTextInputFormatæ¡ˆä¾‹å®æ“å°†è¾“å…¥çš„å¤§é‡å°æ–‡ä»¶åˆå¹¶æˆä¸€ä¸ªåˆ‡ç‰‡ç»Ÿä¸€å¤„ç†ã€‚\nï¼ˆ1ï¼‰ä¸åšä»»ä½•å¤„ç†ï¼Œè¿è¡Œ1.8èŠ‚çš„WordCountæ¡ˆä¾‹ç¨‹åºï¼Œè§‚å¯Ÿåˆ‡ç‰‡ä¸ªæ•°ä¸º4ã€‚\nnumber of splits:4\nï¼ˆ2ï¼‰åœ¨WordcountDriverä¸­å¢åŠ å¦‚ä¸‹ä»£ç ï¼Œè¿è¡Œç¨‹åºï¼Œå¹¶è§‚å¯Ÿè¿è¡Œçš„åˆ‡ç‰‡ä¸ªæ•°ä¸º3ã€‚ï¼ˆaï¼‰é©±åŠ¨ç±»ä¸­æ·»åŠ ä»£ç å¦‚ä¸‹ï¼š\n// å¦‚æœä¸è®¾ç½®InputFormatï¼Œå®ƒé»˜è®¤ç”¨çš„æ˜¯TextInputFormat.class\njob.setInputFormatClass(CombineTextInputFormat.class);\n\n//è™šæ‹Ÿå­˜å‚¨åˆ‡ç‰‡æœ€å¤§å€¼è®¾ç½®4m\nCombineTextInputFormat.setMaxInputSplitSize(job, 4194304);\nâ€‹        ï¼ˆbï¼‰è¿è¡Œå¦‚æœä¸º3ä¸ªåˆ‡ç‰‡ã€‚\nnumber of splits:3\nï¼ˆ3ï¼‰åœ¨WordcountDriverä¸­å¢åŠ å¦‚ä¸‹ä»£ç ï¼Œè¿è¡Œç¨‹åºï¼Œå¹¶è§‚å¯Ÿè¿è¡Œçš„åˆ‡ç‰‡ä¸ªæ•°ä¸º1ã€‚        ï¼ˆaï¼‰é©±åŠ¨ä¸­æ·»åŠ ä»£ç å¦‚ä¸‹ï¼š\n// å¦‚æœä¸è®¾ç½®InputFormatï¼Œå®ƒé»˜è®¤ç”¨çš„æ˜¯TextInputFormat.class\njob.setInputFormatClass(CombineTextInputFormat.class);\n\n//è™šæ‹Ÿå­˜å‚¨åˆ‡ç‰‡æœ€å¤§å€¼è®¾ç½®20m\nCombineTextInputFormat.setMaxInputSplitSize(job, 20971520);\nâ€‹        ï¼ˆbï¼‰è¿è¡Œå¦‚æœä¸º1ä¸ªåˆ‡ç‰‡\nnumber of splits:1\nPartitionåˆ†åŒºæ¡ˆä¾‹å®æ“å°†ç»Ÿè®¡ç»“æœæŒ‰ç…§æ‰‹æœºå½’å±åœ°ä¸åŒçœä»½è¾“å‡ºåˆ°ä¸åŒæ–‡ä»¶ä¸­ï¼ˆåˆ†åŒºï¼‰\nåœ¨ä¸Šé¢çš„åŸºç¡€ä¸Šï¼Œå¢åŠ ä¸€ä¸ªåˆ†åŒºç±»\npackage com.atguigu.mapreduce.partitioner;\nimport org.apache.hadoop.io.Text;\nimport org.apache.hadoop.mapreduce.Partitioner;\n\npublic class ProvincePartitioner extends Partitioner&lt;Text, FlowBean&gt; {\n\n    @Override\n    public int getPartition(Text text, FlowBean flowBean, int numPartitions) {\n        //è·å–æ‰‹æœºå·å‰ä¸‰ä½prePhone\n        String phone = text.toString();\n        String prePhone = phone.substring(0, 3);\n\n        //å®šä¹‰ä¸€ä¸ªåˆ†åŒºå·å˜é‡partition,æ ¹æ®prePhoneè®¾ç½®åˆ†åŒºå·\n        int partition;\n\n        if(\"136\".equals(prePhone)){\n            partition = 0;\n        }else if(\"137\".equals(prePhone)){\n            partition = 1;\n        }else if(\"138\".equals(prePhone)){\n            partition = 2;\n        }else if(\"139\".equals(prePhone)){\n            partition = 3;\n        }else {\n            partition = 4;\n        }\n\n        //æœ€åè¿”å›åˆ†åŒºå·partition\n        return partition;\n    }\n}\nåœ¨é©±åŠ¨å‡½æ•°ä¸­å¢åŠ è‡ªå®šä¹‰æ•°æ®åˆ†åŒºè®¾ç½®å’ŒReduceTaskè®¾ç½®\npackage com.atguigu.mapreduce.partitioner;\nimport org.apache.hadoop.conf.Configuration;\nimport org.apache.hadoop.fs.Path;\nimport org.apache.hadoop.io.Text;\nimport org.apache.hadoop.mapreduce.Job;\nimport org.apache.hadoop.mapreduce.lib.input.FileInputFormat;\nimport org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;\nimport java.io.IOException;\n\npublic class FlowDriver {\n\n    public static void main(String[] args) throws IOException, ClassNotFoundException, InterruptedException {\n\n        //1 è·å–jobå¯¹è±¡\n        Configuration conf = new Configuration();\n        Job job = Job.getInstance(conf);\n\n        //2 å…³è”æœ¬Driverç±»\n        job.setJarByClass(FlowDriver.class);\n\n        //3 å…³è”Mapperå’ŒReducer\n        job.setMapperClass(FlowMapper.class);\n        job.setReducerClass(FlowReducer.class);\n\n        //4 è®¾ç½®Mapç«¯è¾“å‡ºæ•°æ®çš„KVç±»å‹\n        job.setMapOutputKeyClass(Text.class);\n        job.setMapOutputValueClass(FlowBean.class);\n\n        //5 è®¾ç½®ç¨‹åºæœ€ç»ˆè¾“å‡ºçš„KVç±»å‹\n        job.setOutputKeyClass(Text.class);\n        job.setOutputValueClass(FlowBean.class);\n\n        //8 æŒ‡å®šè‡ªå®šä¹‰åˆ†åŒºå™¨\n        job.setPartitionerClass(ProvincePartitioner.class);\n\n        //9 åŒæ—¶æŒ‡å®šç›¸åº”æ•°é‡çš„ReduceTask\n        job.setNumReduceTasks(5);\n\n        //6 è®¾ç½®è¾“å…¥è¾“å‡ºè·¯å¾„\n        FileInputFormat.setInputPaths(job, new Path(\"D:\\\\inputflow\"));\n        FileOutputFormat.setOutputPath(job, new Path(\"D\\\\partitionout\"));\n\n        //7 æäº¤Job\n        boolean b = job.waitForCompletion(true);\n        System.exit(b ? 0 : 1);\n    }\n}\nWritableComparableæ’åºæ¡ˆä¾‹å®æ“ï¼ˆå…¨æ’åºï¼‰æ ¹æ®å‰é¢åºåˆ—åŒ–æ¡ˆä¾‹äº§ç”Ÿçš„ç»“æœå†æ¬¡å¯¹æ€»æµé‡è¿›è¡Œå€’åºæ’åºã€‚\nFlowBeanå¯¹è±¡åœ¨åœ¨éœ€æ±‚1åŸºç¡€ä¸Šå¢åŠ äº†æ¯”è¾ƒåŠŸèƒ½\npackage com.atguigu.mapreduce.writablecompable;\n\nimport org.apache.hadoop.io.WritableComparable;\nimport java.io.DataInput;\nimport java.io.DataOutput;\nimport java.io.IOException;\n\npublic class FlowBean implements WritableComparable&lt;FlowBean&gt; {\n\n    private long upFlow; //ä¸Šè¡Œæµé‡\n    private long downFlow; //ä¸‹è¡Œæµé‡\n    private long sumFlow; //æ€»æµé‡\n\n    //æä¾›æ— å‚æ„é€ \n    public FlowBean() {\n    }\n\n    //ç”Ÿæˆä¸‰ä¸ªå±æ€§çš„getterå’Œsetteræ–¹æ³•\n    public long getUpFlow() {\n        return upFlow;\n    }\n\n    public void setUpFlow(long upFlow) {\n        this.upFlow = upFlow;\n    }\n\n    public long getDownFlow() {\n        return downFlow;\n    }\n\n    public void setDownFlow(long downFlow) {\n        this.downFlow = downFlow;\n    }\n\n    public long getSumFlow() {\n        return sumFlow;\n    }\n\n    public void setSumFlow(long sumFlow) {\n        this.sumFlow = sumFlow;\n    }\n\n    public void setSumFlow() {\n        this.sumFlow = this.upFlow + this.downFlow;\n    }\n\n    //å®ç°åºåˆ—åŒ–å’Œååºåˆ—åŒ–æ–¹æ³•,æ³¨æ„é¡ºåºä¸€å®šè¦ä¸€è‡´\n    @Override\n    public void write(DataOutput out) throws IOException {\n        out.writeLong(this.upFlow);\n        out.writeLong(this.downFlow);\n        out.writeLong(this.sumFlow);\n\n    }\n\n    @Override\n    public void readFields(DataInput in) throws IOException {\n        this.upFlow = in.readLong();\n        this.downFlow = in.readLong();\n        this.sumFlow = in.readLong();\n    }\n\n    //é‡å†™ToString,æœ€åè¦è¾“å‡ºFlowBean\n    @Override\n    public String toString() {\n        return upFlow + \"\\t\" + downFlow + \"\\t\" + sumFlow;\n    }\n\n    @Override\n    public int compareTo(FlowBean o) {\n\n        //æŒ‰ç…§æ€»æµé‡æ¯”è¾ƒ,å€’åºæ’åˆ—\n        if(this.sumFlow &gt; o.sumFlow){\n            return -1;\n        }else if(this.sumFlow &lt; o.sumFlow){\n            return 1;\n        }else {\n            return 0;\n        }\n    }\n}\nç¼–å†™Mapperç±»\npackage com.atguigu.mapreduce.writablecompable;\n\nimport org.apache.hadoop.io.LongWritable;\nimport org.apache.hadoop.io.Text;\nimport org.apache.hadoop.mapreduce.Mapper;\nimport java.io.IOException;\n\npublic class FlowMapper extends Mapper&lt;LongWritable, Text, FlowBean, Text&gt; {\n    private FlowBean outK = new FlowBean();\n    private Text outV = new Text();\n\n    @Override\n    protected void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException {\n\n        //1 è·å–ä¸€è¡Œæ•°æ®\n        String line = value.toString();\n\n        //2 æŒ‰ç…§\"\\t\",åˆ‡å‰²æ•°æ®\n        String[] split = line.split(\"\\t\");\n\n        //3 å°è£…outK outV\n        outK.setUpFlow(Long.parseLong(split[1]));\n        outK.setDownFlow(Long.parseLong(split[2]));\n        outK.setSumFlow();\n        outV.set(split[0]);\n\n        //4 å†™å‡ºoutK outV\n        context.write(outK,outV);\n    }\n}\nç¼–å†™Reducerç±»\npackage com.atguigu.mapreduce.writablecompable;\n\nimport org.apache.hadoop.io.Text;\nimport org.apache.hadoop.mapreduce.Reducer;\nimport java.io.IOException;\n\npublic class FlowReducer extends Reducer&lt;FlowBean, Text, Text, FlowBean&gt; {\n    @Override\n    protected void reduce(FlowBean key, Iterable&lt;Text&gt; values, Context context) throws IOException, InterruptedException {\n\n        //éå†valuesé›†åˆ,å¾ªç¯å†™å‡º,é¿å…æ€»æµé‡ç›¸åŒçš„æƒ…å†µ\n        for (Text value : values) {\n            //è°ƒæ¢KVä½ç½®,åå‘å†™å‡º\n            context.write(value,key);\n        }\n    }\n}\nç¼–å†™Driverç±»\npackage com.atguigu.mapreduce.writablecompable;\n\nimport org.apache.hadoop.conf.Configuration;\nimport org.apache.hadoop.fs.Path;\nimport org.apache.hadoop.io.Text;\nimport org.apache.hadoop.mapreduce.Job;\nimport org.apache.hadoop.mapreduce.lib.input.FileInputFormat;\nimport org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;\nimport java.io.IOException;\n\npublic class FlowDriver {\n\n    public static void main(String[] args) throws IOException, ClassNotFoundException, InterruptedException {\n\n        //1 è·å–jobå¯¹è±¡\n        Configuration conf = new Configuration();\n        Job job = Job.getInstance(conf);\n\n        //2 å…³è”æœ¬Driverç±»\n        job.setJarByClass(FlowDriver.class);\n\n        //3 å…³è”Mapperå’ŒReducer\n        job.setMapperClass(FlowMapper.class);\n        job.setReducerClass(FlowReducer.class);\n\n        //4 è®¾ç½®Mapç«¯è¾“å‡ºæ•°æ®çš„KVç±»å‹\n        job.setMapOutputKeyClass(FlowBean.class);\n        job.setMapOutputValueClass(Text.class);\n\n        //5 è®¾ç½®ç¨‹åºæœ€ç»ˆè¾“å‡ºçš„KVç±»å‹\n        job.setOutputKeyClass(Text.class);\n        job.setOutputValueClass(FlowBean.class);\n\n        //6 è®¾ç½®è¾“å…¥è¾“å‡ºè·¯å¾„\n        FileInputFormat.setInputPaths(job, new Path(\"D:\\\\inputflow2\"));\n        FileOutputFormat.setOutputPath(job, new Path(\"D:\\\\comparout\"));\n\n        //7 æäº¤Job\n        boolean b = job.waitForCompletion(true);\n        System.exit(b ? 0 : 1);\n    }\n}\nWritableComparableæ’åºæ¡ˆä¾‹å®æ“ï¼ˆåŒºå†…æ’åºï¼‰è¦æ±‚æ¯ä¸ªçœä»½æ‰‹æœºå·è¾“å‡ºçš„æ–‡ä»¶ä¸­æŒ‰ç…§æ€»æµé‡å†…éƒ¨æ’åºã€‚åŸºäºå‰ä¸€ä¸ªéœ€æ±‚ï¼Œå¢åŠ è‡ªå®šä¹‰åˆ†åŒºç±»ï¼Œåˆ†åŒºæŒ‰ç…§çœä»½æ‰‹æœºå·è®¾ç½®ã€‚\nå¢åŠ è‡ªå®šä¹‰åˆ†åŒºç±»\npackage com.atguigu.mapreduce.partitionercompable;\n\nimport org.apache.hadoop.io.Text;\nimport org.apache.hadoop.mapreduce.Partitioner;\n\npublic class ProvincePartitioner2 extends Partitioner&lt;FlowBean, Text&gt; {\n\n    @Override\n    public int getPartition(FlowBean flowBean, Text text, int numPartitions) {\n        //è·å–æ‰‹æœºå·å‰ä¸‰ä½\n        String phone = text.toString();\n        String prePhone = phone.substring(0, 3);\n\n        //å®šä¹‰ä¸€ä¸ªåˆ†åŒºå·å˜é‡partition,æ ¹æ®prePhoneè®¾ç½®åˆ†åŒºå·\n        int partition;\n        if(\"136\".equals(prePhone)){\n            partition = 0;\n        }else if(\"137\".equals(prePhone)){\n            partition = 1;\n        }else if(\"138\".equals(prePhone)){\n            partition = 2;\n        }else if(\"139\".equals(prePhone)){\n            partition = 3;\n        }else {\n            partition = 4;\n        }\n\n        //æœ€åè¿”å›åˆ†åŒºå·partition\n        return partition;\n    }\n}\nåœ¨é©±åŠ¨ç±»ä¸­æ·»åŠ åˆ†åŒºç±»\n// è®¾ç½®è‡ªå®šä¹‰åˆ†åŒºå™¨\njob.setPartitionerClass(ProvincePartitioner2.class);\n\n// è®¾ç½®å¯¹åº”çš„ReduceTaskçš„ä¸ªæ•°\njob.setNumReduceTasks(5);\nCombineråˆå¹¶æ¡ˆä¾‹å®æ“ç»Ÿè®¡è¿‡ç¨‹ä¸­å¯¹æ¯ä¸€ä¸ªMapTaskçš„è¾“å‡ºè¿›è¡Œå±€éƒ¨æ±‡æ€»ï¼Œä»¥å‡å°ç½‘ç»œä¼ è¾“é‡å³é‡‡ç”¨CombineråŠŸèƒ½ã€‚ \næœŸæœ›ï¼šCombineè¾“å…¥æ•°æ®å¤šï¼Œè¾“å‡ºæ—¶ç»è¿‡åˆå¹¶ï¼Œè¾“å‡ºæ•°æ®é™ä½ã€‚\næ–¹æ¡ˆä¸€1)å¢åŠ ä¸€ä¸ªWordcountCombinerç±»ç»§æ‰¿Reducer2)åœ¨WordcountCombinerä¸­(1) ç»Ÿè®¡å•è¯æ±‡æ€»(2)å°†ç»Ÿè®¡ç»“æœè¾“å‡º\nå¢åŠ ä¸€ä¸ªWordCountCombinerç±»ç»§æ‰¿Reducer\npackage com.atguigu.mapreduce.combiner;\n\nimport org.apache.hadoop.io.IntWritable;\nimport org.apache.hadoop.io.Text;\nimport org.apache.hadoop.mapreduce.Reducer;\nimport java.io.IOException;\n\npublic class WordCountCombiner extends Reducer&lt;Text, IntWritable, Text, IntWritable&gt; {\n\nprivate IntWritable outV = new IntWritable();\n\n    @Override\n    protected void reduce(Text key, Iterable&lt;IntWritable&gt; values, Context context) throws IOException, InterruptedException {\n\n        int sum = 0;\n        for (IntWritable value : values) {\n            sum += value.get();\n        }\n\n        //å°è£…outKV\n        outV.set(sum);\n\n        //å†™å‡ºoutKV\n        context.write(key,outV);\n    }\n}\nåœ¨WordcountDriveré©±åŠ¨ç±»ä¸­æŒ‡å®šCombiner\n// æŒ‡å®šéœ€è¦ä½¿ç”¨combinerï¼Œä»¥åŠç”¨å“ªä¸ªç±»ä½œä¸ºcombinerçš„é€»è¾‘\njob.setCombinerClass(WordCountCombiner.class);\næ–¹æ¡ˆäºŒ1 )å°†Wordc ountReducerä½œä¸ºCombineråœ¨    WWordc ountDriveré©±åŠ¨ç±»ä¸­æŒ‡å®š    job. setCombiner Clas s(WordcountR educer. class);\nå°†WordcountReducerä½œä¸ºCombineråœ¨WordcountDriveré©±åŠ¨ç±»ä¸­æŒ‡å®š\n// æŒ‡å®šéœ€è¦ä½¿ç”¨Combinerï¼Œä»¥åŠç”¨å“ªä¸ªç±»ä½œä¸ºCombinerçš„é€»è¾‘\njob.setCombinerClass(WordCountReducer.class);\nè‡ªå®šä¹‰OutputFormatæ¡ˆä¾‹å®æ“è¿‡æ»¤è¾“å…¥çš„logæ—¥å¿—ï¼ŒåŒ…å«atguiguçš„ç½‘ç«™è¾“å‡ºåˆ°e:/atguigu.logï¼Œä¸åŒ…å«atguiguçš„ç½‘ç«™è¾“å‡ºåˆ°e:/other.logã€‚\nè¾“å…¥æ•°æ®ï¼š\nhttp://www.baidu.comhttp://www.google.comã€‚ã€‚ã€‚\nè‡ªå®šä¹‰ä¸€ä¸ªOutputFormatç±»(1) åˆ›å»ºä¸€ä¸ªç±»L ogRecordWniterç»§æ‰¿RecordWniter(a)åˆ›å»ºä¸¤ä¸ªæ–‡ä»¶çš„è¾“å‡ºæµ: atguiguOutã€otherOut(b)å¦‚æœè¾“å…¥æ•°æ®åŒ…å«atguigu,è¾“å‡ºåˆ°atguiguOutæµå¦‚æœä¸åŒ…å«atguigu,è¾“å‡ºåˆ°otherOutæµ\n5ã€é©±åŠ¨ç±»Driver.//è¦å°†è‡ªå®šä¹‰çš„è¾“å‡ºæ ¼å¼ç»„ä»¶è®¾ç½®åˆ°jobä¸­job. setOutputF ormatCla s(Lo gOutputF ormat. class);\nç¼–å†™LogMapperç±»\npackage com.atguigu.mapreduce.outputformat;\n\nimport org.apache.hadoop.io.LongWritable;\nimport org.apache.hadoop.io.NullWritable;\nimport org.apache.hadoop.io.Text;\nimport org.apache.hadoop.mapreduce.Mapper;\n\nimport java.io.IOException;\n\npublic class LogMapper extends Mapper&lt;LongWritable, Text,Text, NullWritable&gt; {\n    @Override\n    protected void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException {\n        //ä¸åšä»»ä½•å¤„ç†,ç›´æ¥å†™å‡ºä¸€è¡Œlogæ•°æ®\n        context.write(value,NullWritable.get());\n    }\n}\nç¼–å†™LogReducerç±»\npackage com.atguigu.mapreduce.outputformat;\n\nimport org.apache.hadoop.io.NullWritable;\nimport org.apache.hadoop.io.Text;\nimport org.apache.hadoop.mapreduce.Reducer;\n\nimport java.io.IOException;\n\npublic class LogReducer extends Reducer&lt;Text, NullWritable,Text, NullWritable&gt; {\n    @Override\n    protected void reduce(Text key, Iterable&lt;NullWritable&gt; values, Context context) throws IOException, InterruptedException {\n        // é˜²æ­¢æœ‰ç›¸åŒçš„æ•°æ®,è¿­ä»£å†™å‡º\n        for (NullWritable value : values) {\n            context.write(key,NullWritable.get());\n        }\n    }\n}\nè‡ªå®šä¹‰ä¸€ä¸ªLogOutputFormatç±»\npackage com.atguigu.mapreduce.outputformat;\n\nimport org.apache.hadoop.io.NullWritable;\nimport org.apache.hadoop.io.Text;\nimport org.apache.hadoop.mapreduce.RecordWriter;\nimport org.apache.hadoop.mapreduce.TaskAttemptContext;\nimport org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;\n\nimport java.io.IOException;\n\npublic class LogOutputFormat extends FileOutputFormat&lt;Text, NullWritable&gt; {\n    @Override\n    public RecordWriter&lt;Text, NullWritable&gt; getRecordWriter(TaskAttemptContext job) throws IOException, InterruptedException {\n        //åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„RecordWriterè¿”å›\n        LogRecordWriter logRecordWriter = new LogRecordWriter(job);\n        return logRecordWriter;\n    }\n}\nç¼–å†™LogRecordWriterç±»\npackage com.atguigu.mapreduce.outputformat;\n\nimport org.apache.hadoop.fs.FSDataOutputStream;\nimport org.apache.hadoop.fs.FileSystem;\nimport org.apache.hadoop.fs.Path;\nimport org.apache.hadoop.io.IOUtils;\nimport org.apache.hadoop.io.NullWritable;\nimport org.apache.hadoop.io.Text;\nimport org.apache.hadoop.mapreduce.RecordWriter;\nimport org.apache.hadoop.mapreduce.TaskAttemptContext;\n\nimport java.io.IOException;\n\npublic class LogRecordWriter extends RecordWriter&lt;Text, NullWritable&gt; {\n\n    private FSDataOutputStream atguiguOut;\n    private FSDataOutputStream otherOut;\n\n    public LogRecordWriter(TaskAttemptContext job) {\n        try {\n            //è·å–æ–‡ä»¶ç³»ç»Ÿå¯¹è±¡\n            FileSystem fs = FileSystem.get(job.getConfiguration());\n            //ç”¨æ–‡ä»¶ç³»ç»Ÿå¯¹è±¡åˆ›å»ºä¸¤ä¸ªè¾“å‡ºæµå¯¹åº”ä¸åŒçš„ç›®å½•\n            atguiguOut = fs.create(new Path(\"d:/hadoop/atguigu.log\"));\n            otherOut = fs.create(new Path(\"d:/hadoop/other.log\"));\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    @Override\n    public void write(Text key, NullWritable value) throws IOException, InterruptedException {\n        String log = key.toString();\n        //æ ¹æ®ä¸€è¡Œçš„logæ•°æ®æ˜¯å¦åŒ…å«atguigu,åˆ¤æ–­ä¸¤æ¡è¾“å‡ºæµè¾“å‡ºçš„å†…å®¹\n        if (log.contains(\"atguigu\")) {\n            atguiguOut.writeBytes(log + \"\\n\");\n        } else {\n            otherOut.writeBytes(log + \"\\n\");\n        }\n    }\n\n    @Override\n    public void close(TaskAttemptContext context) throws IOException, InterruptedException {\n        //å…³æµ\n        IOUtils.closeStream(atguiguOut);\n        IOUtils.closeStream(otherOut);\n    }\n}\nç¼–å†™LogDriverç±»\npackage com.atguigu.mapreduce.outputformat;\n\nimport org.apache.hadoop.conf.Configuration;\nimport org.apache.hadoop.fs.Path;\nimport org.apache.hadoop.io.NullWritable;\nimport org.apache.hadoop.io.Text;\nimport org.apache.hadoop.mapreduce.Job;\nimport org.apache.hadoop.mapreduce.lib.input.FileInputFormat;\nimport org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;\n\nimport java.io.IOException;\n\npublic class LogDriver {\n    public static void main(String[] args) throws IOException, ClassNotFoundException, InterruptedException {\n\n        Configuration conf = new Configuration();\n        Job job = Job.getInstance(conf);\n\n        job.setJarByClass(LogDriver.class);\n        job.setMapperClass(LogMapper.class);\n        job.setReducerClass(LogReducer.class);\n\n        job.setMapOutputKeyClass(Text.class);\n        job.setMapOutputValueClass(NullWritable.class);\n\n        job.setOutputKeyClass(Text.class);\n        job.setOutputValueClass(NullWritable.class);\n\n        //è®¾ç½®è‡ªå®šä¹‰çš„outputformat\n        job.setOutputFormatClass(LogOutputFormat.class);\n\n        FileInputFormat.setInputPaths(job, new Path(\"D:\\\\input\"));\n        //è™½ç„¶æˆ‘ä»¬è‡ªå®šä¹‰äº†outputformatï¼Œä½†æ˜¯å› ä¸ºæˆ‘ä»¬çš„outputformatç»§æ‰¿è‡ªfileoutputformat\n        //è€Œfileoutputformatè¦è¾“å‡ºä¸€ä¸ª_SUCCESSæ–‡ä»¶ï¼Œæ‰€ä»¥åœ¨è¿™è¿˜å¾—æŒ‡å®šä¸€ä¸ªè¾“å‡ºç›®å½•\n        FileOutputFormat.setOutputPath(job, new Path(\"D:\\\\logoutput\"));\n\n        boolean b = job.waitForCompletion(true);\n        System.exit(b ? 0 : 1);\n    }\n}\nReduce Joinæ¡ˆä¾‹å®æ“è®¢å•æ•°æ®è¡¨t_order\n\n\n\n\nid\npid\namount\n\n\n\n\n1001\n01\n1\n\n\n1002\n02\n2\n\n\n1003\n03\n3\n\n\n1004\n01\n4\n\n\n1005\n02\n5\n\n\n1006\n03\n6\n\n\n\n\nå•†å“ä¿¡æ¯è¡¨t_product\n\n\n\n\npid\npname\n\n\n\n\n01\nå°ç±³\n\n\n02\nåä¸º\n\n\n03\næ ¼åŠ›\n\n\n\n\nå°†å•†å“ä¿¡æ¯è¡¨ä¸­æ•°æ®æ ¹æ®å•†å“pidåˆå¹¶åˆ°è®¢å•æ•°æ®è¡¨ä¸­ã€‚\n\n\n\n\nid\npname\namount\n\n\n\n\n1001\nå°ç±³\n1\n\n\n1004\nå°ç±³\n4\n\n\n1002\nåä¸º\n2\n\n\n1005\nåä¸º\n5\n\n\n1003\næ ¼åŠ›\n3\n\n\n1006\næ ¼åŠ›\n6\n\n\n\n\né€šè¿‡å°†å…³è”æ¡ä»¶ä½œä¸ºMapè¾“å‡ºçš„keyï¼Œå°†ä¸¤è¡¨æ»¡è¶³Joinæ¡ä»¶çš„æ•°æ®å¹¶æºå¸¦æ•°æ®æ‰€æ¥æºçš„æ–‡ä»¶ä¿¡æ¯ï¼Œå‘å¾€åŒä¸€ä¸ªReduceTaskï¼Œåœ¨Reduceä¸­è¿›è¡Œæ•°æ®çš„ä¸²è”ã€‚\nåˆ›å»ºå•†å“å’Œè®¢å•åˆå¹¶åçš„TableBeanç±»\npackage com.atguigu.mapreduce.reducejoin;\n\nimport org.apache.hadoop.io.Writable;\n\nimport java.io.DataInput;\nimport java.io.DataOutput;\nimport java.io.IOException;\n\npublic class TableBean implements Writable {\n\n    private String id; //è®¢å•id\n    private String pid; //äº§å“id\n    private int amount; //äº§å“æ•°é‡\n    private String pname; //äº§å“åç§°\n    private String flag; //åˆ¤æ–­æ˜¯orderè¡¨è¿˜æ˜¯pdè¡¨çš„æ ‡å¿—å­—æ®µ\n\n    public TableBean() {\n    }\n\n    public String getId() {\n        return id;\n    }\n\n    public void setId(String id) {\n        this.id = id;\n    }\n\n    public String getPid() {\n        return pid;\n    }\n\n    public void setPid(String pid) {\n        this.pid = pid;\n    }\n\n    public int getAmount() {\n        return amount;\n    }\n\n    public void setAmount(int amount) {\n        this.amount = amount;\n    }\n\n    public String getPname() {\n        return pname;\n    }\n\n    public void setPname(String pname) {\n        this.pname = pname;\n    }\n\n    public String getFlag() {\n        return flag;\n    }\n\n    public void setFlag(String flag) {\n        this.flag = flag;\n    }\n\n    @Override\n    public String toString() {\n        return id + \"\\t\" + pname + \"\\t\" + amount;\n    }\n\n    @Override\n    public void write(DataOutput out) throws IOException {\n        out.writeUTF(id);\n        out.writeUTF(pid);\n        out.writeInt(amount);\n        out.writeUTF(pname);\n        out.writeUTF(flag);\n    }\n\n    @Override\n    public void readFields(DataInput in) throws IOException {\n        this.id = in.readUTF();\n        this.pid = in.readUTF();\n        this.amount = in.readInt();\n        this.pname = in.readUTF();\n        this.flag = in.readUTF();\n    }\n}\nç¼–å†™TableMapperç±»\npackage com.atguigu.mapreduce.reducejoin;\n\nimport org.apache.hadoop.io.LongWritable;\nimport org.apache.hadoop.io.Text;\nimport org.apache.hadoop.mapreduce.InputSplit;\nimport org.apache.hadoop.mapreduce.Mapper;\nimport org.apache.hadoop.mapreduce.lib.input.FileSplit;\n\nimport java.io.IOException;\n\npublic class TableMapper extends Mapper&lt;LongWritable,Text,Text,TableBean&gt; {\n\n    private String filename;\n    private Text outK = new Text();\n    private TableBean outV = new TableBean();\n\n    @Override\n    protected void setup(Context context) throws IOException, InterruptedException {\n        //è·å–å¯¹åº”æ–‡ä»¶åç§°\n        InputSplit split = context.getInputSplit();\n        FileSplit fileSplit = (FileSplit) split;\n        filename = fileSplit.getPath().getName();\n    }\n\n    @Override\n    protected void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException {\n\n        //è·å–ä¸€è¡Œ\n        String line = value.toString();\n\n        //åˆ¤æ–­æ˜¯å“ªä¸ªæ–‡ä»¶,ç„¶åé’ˆå¯¹æ–‡ä»¶è¿›è¡Œä¸åŒçš„æ“ä½œ\n        if(filename.contains(\"order\")){  //è®¢å•è¡¨çš„å¤„ç†\n            String[] split = line.split(\"\\t\");\n            //å°è£…outK\n            outK.set(split[1]);\n            //å°è£…outV\n            outV.setId(split[0]);\n            outV.setPid(split[1]);\n            outV.setAmount(Integer.parseInt(split[2]));\n            outV.setPname(\"\");\n            outV.setFlag(\"order\");\n        }else {                             //å•†å“è¡¨çš„å¤„ç†\n            String[] split = line.split(\"\\t\");\n            //å°è£…outK\n            outK.set(split[0]);\n            //å°è£…outV\n            outV.setId(\"\");\n            outV.setPid(split[0]);\n            outV.setAmount(0);\n            outV.setPname(split[1]);\n            outV.setFlag(\"pd\");\n        }\n\n        //å†™å‡ºKV\n        context.write(outK,outV);\n    }\n}\nç¼–å†™TableReducerç±»\npackage com.atguigu.mapreduce.reducejoin;\n\nimport org.apache.commons.beanutils.BeanUtils;\nimport org.apache.hadoop.io.NullWritable;\nimport org.apache.hadoop.io.Text;\nimport org.apache.hadoop.mapreduce.Reducer;\n\nimport java.io.IOException;\nimport java.lang.reflect.InvocationTargetException;\nimport java.util.ArrayList;\n\npublic class TableReducer extends Reducer&lt;Text,TableBean,TableBean, NullWritable&gt; {\n\n    @Override\n    protected void reduce(Text key, Iterable&lt;TableBean&gt; values, Context context) throws IOException, InterruptedException {\n\n        ArrayList&lt;TableBean&gt; orderBeans = new ArrayList&lt;&gt;();\n        TableBean pdBean = new TableBean();\n\n        for (TableBean value : values) {\n\n            //åˆ¤æ–­æ•°æ®æ¥è‡ªå“ªä¸ªè¡¨\n            if(\"order\".equals(value.getFlag())){   //è®¢å•è¡¨\n\n\t\t\t  //åˆ›å»ºä¸€ä¸ªä¸´æ—¶TableBeanå¯¹è±¡æ¥æ”¶value\n                TableBean tmpOrderBean = new TableBean();\n\n                try {\n                    BeanUtils.copyProperties(tmpOrderBean,value);\n                } catch (IllegalAccessException e) {\n                    e.printStackTrace();\n                } catch (InvocationTargetException e) {\n                    e.printStackTrace();\n                }\n\n\t\t\t  //å°†ä¸´æ—¶TableBeanå¯¹è±¡æ·»åŠ åˆ°é›†åˆorderBeans\n                orderBeans.add(tmpOrderBean);\n            }else {                                    //å•†å“è¡¨\n                try {\n                    BeanUtils.copyProperties(pdBean,value);\n                } catch (IllegalAccessException e) {\n                    e.printStackTrace();\n                } catch (InvocationTargetException e) {\n                    e.printStackTrace();\n                }\n            }\n        }\n\n        //éå†é›†åˆorderBeans,æ›¿æ¢æ‰æ¯ä¸ªorderBeançš„pidä¸ºpname,ç„¶åå†™å‡º\n        for (TableBean orderBean : orderBeans) {\n\n            orderBean.setPname(pdBean.getPname());\n\n\t\t   //å†™å‡ºä¿®æ”¹åçš„orderBeanå¯¹è±¡\n            context.write(orderBean,NullWritable.get());\n        }\n    }\n}\nç¼–å†™TableDriverç±»\npackage com.atguigu.mapreduce.reducejoin;\n\nimport org.apache.hadoop.conf.Configuration;\nimport org.apache.hadoop.fs.Path;\nimport org.apache.hadoop.io.NullWritable;\nimport org.apache.hadoop.io.Text;\nimport org.apache.hadoop.mapreduce.Job;\nimport org.apache.hadoop.mapreduce.lib.input.FileInputFormat;\nimport org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;\n\nimport java.io.IOException;\n\npublic class TableDriver {\n    public static void main(String[] args) throws IOException, ClassNotFoundException, InterruptedException {\n        Job job = Job.getInstance(new Configuration());\n\n        job.setJarByClass(TableDriver.class);\n        job.setMapperClass(TableMapper.class);\n        job.setReducerClass(TableReducer.class);\n\n        job.setMapOutputKeyClass(Text.class);\n        job.setMapOutputValueClass(TableBean.class);\n\n        job.setOutputKeyClass(TableBean.class);\n        job.setOutputValueClass(NullWritable.class);\n\n        FileInputFormat.setInputPaths(job, new Path(\"D:\\\\input\"));\n        FileOutputFormat.setOutputPath(job, new Path(\"D:\\\\output\"));\n\n        boolean b = job.waitForCompletion(true);\n        System.exit(b ? 0 : 1);\n    }\n}\nç¼ºç‚¹ï¼šè¿™ç§æ–¹å¼ä¸­ï¼Œåˆå¹¶çš„æ“ä½œæ˜¯åœ¨Reduceé˜¶æ®µå®Œæˆï¼ŒReduceç«¯çš„å¤„ç†å‹åŠ›å¤ªå¤§ï¼ŒMapèŠ‚ç‚¹çš„è¿ç®—è´Ÿè½½åˆ™å¾ˆä½ï¼Œèµ„æºåˆ©ç”¨ç‡ä¸é«˜ï¼Œä¸”åœ¨Reduceé˜¶æ®µææ˜“äº§ç”Ÿæ•°æ®å€¾æ–œã€‚\nè§£å†³æ–¹æ¡ˆï¼šMapç«¯å®ç°æ•°æ®åˆå¹¶ã€‚\nMap Joinæ¡ˆä¾‹å®æ“å…ˆåœ¨MapJoinDriveré©±åŠ¨ç±»ä¸­æ·»åŠ ç¼“å­˜æ–‡ä»¶\npackage com.atguigu.mapreduce.mapjoin;\n\nimport org.apache.hadoop.conf.Configuration;\nimport org.apache.hadoop.fs.Path;\nimport org.apache.hadoop.io.NullWritable;\nimport org.apache.hadoop.io.Text;\nimport org.apache.hadoop.mapreduce.Job;\nimport org.apache.hadoop.mapreduce.lib.input.FileInputFormat;\nimport org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;\n\nimport java.io.IOException;\nimport java.net.URI;\nimport java.net.URISyntaxException;\n\npublic class MapJoinDriver {\n\n    public static void main(String[] args) throws IOException, URISyntaxException, ClassNotFoundException, InterruptedException {\n\n        // 1 è·å–jobä¿¡æ¯\n        Configuration conf = new Configuration();\n        Job job = Job.getInstance(conf);\n        // 2 è®¾ç½®åŠ è½½jaråŒ…è·¯å¾„\n        job.setJarByClass(MapJoinDriver.class);\n        // 3 å…³è”mapper\n        job.setMapperClass(MapJoinMapper.class);\n        // 4 è®¾ç½®Mapè¾“å‡ºKVç±»å‹\n        job.setMapOutputKeyClass(Text.class);\n        job.setMapOutputValueClass(NullWritable.class);\n        // 5 è®¾ç½®æœ€ç»ˆè¾“å‡ºKVç±»å‹\n        job.setOutputKeyClass(Text.class);\n        job.setOutputValueClass(NullWritable.class);\n\n        // åŠ è½½ç¼“å­˜æ•°æ®\n        job.addCacheFile(new URI(\"file:///D:/input/tablecache/pd.txt\"));\n        // Mapç«¯Joinçš„é€»è¾‘ä¸éœ€è¦Reduceé˜¶æ®µï¼Œè®¾ç½®reduceTaskæ•°é‡ä¸º0\n        job.setNumReduceTasks(0);\n\n        // 6 è®¾ç½®è¾“å…¥è¾“å‡ºè·¯å¾„\n        FileInputFormat.setInputPaths(job, new Path(\"D:\\\\input\"));\n        FileOutputFormat.setOutputPath(job, new Path(\"D:\\\\output\"));\n        // 7 æäº¤\n        boolean b = job.waitForCompletion(true);\n        System.exit(b ? 0 : 1);\n    }\n}\nåœ¨MapJoinMapperç±»ä¸­çš„setupæ–¹æ³•ä¸­è¯»å–ç¼“å­˜æ–‡ä»¶\npackage com.atguigu.mapreduce.mapjoin;\n\nimport org.apache.commons.lang.StringUtils;\nimport org.apache.hadoop.fs.FSDataInputStream;\nimport org.apache.hadoop.fs.FileSystem;\nimport org.apache.hadoop.fs.Path;\nimport org.apache.hadoop.io.IOUtils;\nimport org.apache.hadoop.io.LongWritable;\nimport org.apache.hadoop.io.NullWritable;\nimport org.apache.hadoop.io.Text;\nimport org.apache.hadoop.mapreduce.Mapper;\n\nimport java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.net.URI;\nimport java.util.HashMap;\nimport java.util.Map;\n\npublic class MapJoinMapper extends Mapper&lt;LongWritable, Text, Text, NullWritable&gt; {\n\n    private Map&lt;String, String&gt; pdMap = new HashMap&lt;&gt;();\n    private Text text = new Text();\n\n    //ä»»åŠ¡å¼€å§‹å‰å°†pdæ•°æ®ç¼“å­˜è¿›pdMap\n    @Override\n    protected void setup(Context context) throws IOException, InterruptedException {\n\n        //é€šè¿‡ç¼“å­˜æ–‡ä»¶å¾—åˆ°å°è¡¨æ•°æ®pd.txt\n        URI[] cacheFiles = context.getCacheFiles();\n        Path path = new Path(cacheFiles[0]);\n\n        //è·å–æ–‡ä»¶ç³»ç»Ÿå¯¹è±¡,å¹¶å¼€æµ\n        FileSystem fs = FileSystem.get(context.getConfiguration());\n        FSDataInputStream fis = fs.open(path);\n\n        //é€šè¿‡åŒ…è£…æµè½¬æ¢ä¸ºreader,æ–¹ä¾¿æŒ‰è¡Œè¯»å–\n        BufferedReader reader = new BufferedReader(new InputStreamReader(fis, \"UTF-8\"));\n\n        //é€è¡Œè¯»å–ï¼ŒæŒ‰è¡Œå¤„ç†\n        String line;\n        while (StringUtils.isNotEmpty(line = reader.readLine())) {\n            //åˆ‡å‰²ä¸€è¡Œ    \n//01\tå°ç±³\n            String[] split = line.split(\"\\t\");\n            pdMap.put(split[0], split[1]);\n        }\n\n        //å…³æµ\n        IOUtils.closeStream(reader);\n    }\n\n    @Override\n    protected void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException {\n\n        //è¯»å–å¤§è¡¨æ•°æ®    \n//1001\t01\t1\n        String[] fields = value.toString().split(\"\\t\");\n\n        //é€šè¿‡å¤§è¡¨æ¯è¡Œæ•°æ®çš„pid,å»pdMapé‡Œé¢å–å‡ºpname\n        String pname = pdMap.get(fields[1]);\n\n        //å°†å¤§è¡¨æ¯è¡Œæ•°æ®çš„pidæ›¿æ¢ä¸ºpname\n        text.set(fields[0] + \"\\t\" + pname + \"\\t\" + fields[2]);\n\n        //å†™å‡º\n        context.write(text,NullWritable.get());\n    }\n}\næ•°æ®æ¸…æ´—ï¼ˆETLï¼‰å»é™¤æ—¥å¿—ä¸­å­—æ®µä¸ªæ•°å°äºç­‰äº11çš„æ—¥å¿—ã€‚\néœ€è¦åœ¨Mapé˜¶æ®µå¯¹è¾“å…¥çš„æ•°æ®æ ¹æ®è§„åˆ™è¿›è¡Œè¿‡æ»¤æ¸…æ´—ã€‚\nç¼–å†™WebLogMapperç±»\npackage com.atguigu.mapreduce.weblog;\nimport java.io.IOException;\nimport org.apache.hadoop.io.LongWritable;\nimport org.apache.hadoop.io.NullWritable;\nimport org.apache.hadoop.io.Text;\nimport org.apache.hadoop.mapreduce.Mapper;\n\npublic class WebLogMapper extends Mapper&lt;LongWritable, Text, Text, NullWritable&gt;{\n\t\n\t@Override\n\tprotected void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException {\n\t\t\n\t\t// 1 è·å–1è¡Œæ•°æ®\n\t\tString line = value.toString();\n\t\t\n\t\t// 2 è§£ææ—¥å¿—\n\t\tboolean result = parseLog(line,context);\n\t\t\n\t\t// 3 æ—¥å¿—ä¸åˆæ³•é€€å‡º\n\t\tif (!result) {\n\t\t\treturn;\n\t\t}\n\t\t\n\t\t// 4 æ—¥å¿—åˆæ³•å°±ç›´æ¥å†™å‡º\n\t\tcontext.write(value, NullWritable.get());\n\t}\n\n\t// 2 å°è£…è§£ææ—¥å¿—çš„æ–¹æ³•\n\tprivate boolean parseLog(String line, Context context) {\n\n\t\t// 1 æˆªå–\n\t\tString[] fields = line.split(\" \");\n\t\t\n\t\t// 2 æ—¥å¿—é•¿åº¦å¤§äº11çš„ä¸ºåˆæ³•\n\t\tif (fields.length &gt; 11) {\n\t\t\treturn true;\n\t\t}else {\n\t\t\treturn false;\n\t\t}\n\t}\n}\nç¼–å†™WebLogDriverç±»\npackage com.atguigu.mapreduce.weblog;\nimport org.apache.hadoop.conf.Configuration;\nimport org.apache.hadoop.fs.Path;\nimport org.apache.hadoop.io.NullWritable;\nimport org.apache.hadoop.io.Text;\nimport org.apache.hadoop.mapreduce.Job;\nimport org.apache.hadoop.mapreduce.lib.input.FileInputFormat;\nimport org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;\n\npublic class WebLogDriver {\n\tpublic static void main(String[] args) throws Exception {\n\n// è¾“å…¥è¾“å‡ºè·¯å¾„éœ€è¦æ ¹æ®è‡ªå·±ç”µè„‘ä¸Šå®é™…çš„è¾“å…¥è¾“å‡ºè·¯å¾„è®¾ç½®\n        args = new String[] { \"D:/input/inputlog\", \"D:/output1\" };\n\n\t\t// 1 è·å–jobä¿¡æ¯\n\t\tConfiguration conf = new Configuration();\n\t\tJob job = Job.getInstance(conf);\n\n\t\t// 2 åŠ è½½jaråŒ…\n\t\tjob.setJarByClass(LogDriver.class);\n\n\t\t// 3 å…³è”map\n\t\tjob.setMapperClass(WebLogMapper.class);\n\n\t\t// 4 è®¾ç½®æœ€ç»ˆè¾“å‡ºç±»å‹\n\t\tjob.setOutputKeyClass(Text.class);\n\t\tjob.setOutputValueClass(NullWritable.class);\n\n\t\t// è®¾ç½®reducetaskä¸ªæ•°ä¸º0\n\t\tjob.setNumReduceTasks(0);\n\n\t\t// 5 è®¾ç½®è¾“å…¥å’Œè¾“å‡ºè·¯å¾„\n\t\tFileInputFormat.setInputPaths(job, new Path(args[0]));\n\t\tFileOutputFormat.setOutputPath(job, new Path(args[1]));\n\n\t\t// 6 æäº¤\n         boolean b = job.waitForCompletion(true);\n         System.exit(b ? 0 : 1);\n\t}\n}\nå‹ç¼©å®æ“æ¡ˆä¾‹Mapè¾“å‡ºç«¯é‡‡ç”¨å‹ç¼©å³ä½¿ä½ çš„MapReduceçš„è¾“å…¥è¾“å‡ºæ–‡ä»¶éƒ½æ˜¯æœªå‹ç¼©çš„æ–‡ä»¶ï¼Œä½ ä»ç„¶å¯ä»¥å¯¹Mapä»»åŠ¡çš„ä¸­é—´ç»“æœè¾“å‡ºåšå‹ç¼©ï¼Œå› ä¸ºå®ƒè¦å†™åœ¨ç¡¬ç›˜å¹¶ä¸”é€šè¿‡ç½‘ç»œä¼ è¾“åˆ°ReduceèŠ‚ç‚¹ï¼Œå¯¹å…¶å‹ç¼©å¯ä»¥æé«˜å¾ˆå¤šæ€§èƒ½ï¼Œè¿™äº›å·¥ä½œåªè¦è®¾ç½®ä¸¤ä¸ªå±æ€§å³å¯ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹ä»£ç æ€ä¹ˆè®¾ç½®ã€‚\nç»™å¤§å®¶æä¾›çš„Hadoopæºç æ”¯æŒçš„å‹ç¼©æ ¼å¼æœ‰ï¼šBZip2Codecã€DefaultCodec\npackage com.atguigu.mapreduce.compress;\nimport java.io.IOException;\nimport org.apache.hadoop.conf.Configuration;\nimport org.apache.hadoop.fs.Path;\nimport org.apache.hadoop.io.IntWritable;\nimport org.apache.hadoop.io.Text;\nimport org.apache.hadoop.io.compress.BZip2Codec;\t\nimport org.apache.hadoop.io.compress.CompressionCodec;\nimport org.apache.hadoop.io.compress.GzipCodec;\nimport org.apache.hadoop.mapreduce.Job;\nimport org.apache.hadoop.mapreduce.lib.input.FileInputFormat;\nimport org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;\n\npublic class WordCountDriver {\n\n\tpublic static void main(String[] args) throws IOException, ClassNotFoundException, InterruptedException {\n\n\t\tConfiguration conf = new Configuration();\n\n\t\t// å¼€å¯mapç«¯è¾“å‡ºå‹ç¼©\n\t\tconf.setBoolean(\"mapreduce.map.output.compress\", true);\n\n\t\t// è®¾ç½®mapç«¯è¾“å‡ºå‹ç¼©æ–¹å¼\n\t\tconf.setClass(\"mapreduce.map.output.compress.codec\", BZip2Codec.class,CompressionCodec.class);\n\n\t\tJob job = Job.getInstance(conf);\n\n\t\tjob.setJarByClass(WordCountDriver.class);\n\n\t\tjob.setMapperClass(WordCountMapper.class);\n\t\tjob.setReducerClass(WordCountReducer.class);\n\n\t\tjob.setMapOutputKeyClass(Text.class);\n\t\tjob.setMapOutputValueClass(IntWritable.class);\n\n\t\tjob.setOutputKeyClass(Text.class);\n\t\tjob.setOutputValueClass(IntWritable.class);\n\n\t\tFileInputFormat.setInputPaths(job, new Path(args[0]));\n\t\tFileOutputFormat.setOutputPath(job, new Path(args[1]));\n\n\t\tboolean result = job.waitForCompletion(true);\n\n\t\tSystem.exit(result ? 0 : 1);\n\t}\n}\nMapperä¿æŒä¸å˜\npackage com.atguigu.mapreduce.compress;\nimport java.io.IOException;\nimport org.apache.hadoop.io.IntWritable;\nimport org.apache.hadoop.io.LongWritable;\nimport org.apache.hadoop.io.Text;\nimport org.apache.hadoop.mapreduce.Mapper;\n\npublic class WordCountMapper extends Mapper&lt;LongWritable, Text, Text, IntWritable&gt;{\n\n\tText k = new Text();\n\tIntWritable v = new IntWritable(1);\n\n\t@Override\n\tprotected void map(LongWritable key, Text value, Context context)throws IOException, InterruptedException {\n\n\t\t// 1 è·å–ä¸€è¡Œ\n\t\tString line = value.toString();\n\n\t\t// 2 åˆ‡å‰²\n\t\tString[] words = line.split(\" \");\n\n\t\t// 3 å¾ªç¯å†™å‡º\n\t\tfor(String word:words){\n\t\t\tk.set(word);\n\t\t\tcontext.write(k, v);\n\t\t}\n\t}\n}\nReducerä¿æŒä¸å˜\npackage com.atguigu.mapreduce.compress;\nimport java.io.IOException;\nimport org.apache.hadoop.io.IntWritable;\nimport org.apache.hadoop.io.Text;\nimport org.apache.hadoop.mapreduce.Reducer;\n\npublic class WordCountReducer extends Reducer&lt;Text, IntWritable, Text, IntWritable&gt;{\n\n\tIntWritable v = new IntWritable();\n\n\t@Override\n\tprotected void reduce(Text key, Iterable&lt;IntWritable&gt; values,\n\t\t\tContext context) throws IOException, InterruptedException {\n\t\t\n\t\tint sum = 0;\n\n\t\t// 1 æ±‡æ€»\n\t\tfor(IntWritable value:values){\n\t\t\tsum += value.get();\n\t\t}\n\t\t\n         v.set(sum);\n\n         // 2 è¾“å‡º\n\t\tcontext.write(key, v);\n\t}\n}\nReduceè¾“å‡ºç«¯é‡‡ç”¨å‹ç¼©åŸºäºWordCountæ¡ˆä¾‹å¤„ç†ã€‚\nä¿®æ”¹é©±åŠ¨\npackage com.atguigu.mapreduce.compress;\nimport java.io.IOException;\nimport org.apache.hadoop.conf.Configuration;\nimport org.apache.hadoop.fs.Path;\nimport org.apache.hadoop.io.IntWritable;\nimport org.apache.hadoop.io.Text;\nimport org.apache.hadoop.io.compress.BZip2Codec;\nimport org.apache.hadoop.io.compress.DefaultCodec;\nimport org.apache.hadoop.io.compress.GzipCodec;\nimport org.apache.hadoop.io.compress.Lz4Codec;\nimport org.apache.hadoop.io.compress.SnappyCodec;\nimport org.apache.hadoop.mapreduce.Job;\nimport org.apache.hadoop.mapreduce.lib.input.FileInputFormat;\nimport org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;\n\npublic class WordCountDriver {\n\n\tpublic static void main(String[] args) throws IOException, ClassNotFoundException, InterruptedException {\n\t\t\n\t\tConfiguration conf = new Configuration();\n\t\t\n\t\tJob job = Job.getInstance(conf);\n\t\t\n\t\tjob.setJarByClass(WordCountDriver.class);\n\t\t\n\t\tjob.setMapperClass(WordCountMapper.class);\n\t\tjob.setReducerClass(WordCountReducer.class);\n\t\t\n\t\tjob.setMapOutputKeyClass(Text.class);\n\t\tjob.setMapOutputValueClass(IntWritable.class);\n\t\t\n\t\tjob.setOutputKeyClass(Text.class);\n\t\tjob.setOutputValueClass(IntWritable.class);\n\t\t\n\t\tFileInputFormat.setInputPaths(job, new Path(args[0]));\n\t\tFileOutputFormat.setOutputPath(job, new Path(args[1]));\n\t\t\n\t\t// è®¾ç½®reduceç«¯è¾“å‡ºå‹ç¼©å¼€å¯\n\t\tFileOutputFormat.setCompressOutput(job, true);\n\n\t\t// è®¾ç½®å‹ç¼©çš„æ–¹å¼\n\t    FileOutputFormat.setOutputCompressorClass(job, BZip2Codec.class); \n//\t    FileOutputFormat.setOutputCompressorClass(job, GzipCodec.class); \n//\t    FileOutputFormat.setOutputCompressorClass(job, DefaultCodec.class); \n\t    \n\t\tboolean result = job.waitForCompletion(true);\n\t\t\n\t\tSystem.exit(result?0:1);\n\t}\n}\nMapperå’ŒReducerä¿æŒä¸å˜\nYarnæ³¨ï¼šè°ƒæ•´ä¸‹åˆ—å‚æ•°ä¹‹å‰å°½é‡æ‹æ‘„Linuxå¿«ç…§ï¼Œå¦åˆ™åç»­çš„æ¡ˆä¾‹ï¼Œè¿˜éœ€è¦é‡å†™å‡†å¤‡é›†ç¾¤ã€‚\nYarnç”Ÿäº§ç¯å¢ƒæ ¸å¿ƒå‚æ•°é…ç½®æ¡ˆä¾‹1ï¼‰éœ€æ±‚ï¼šä»1Gæ•°æ®ä¸­ï¼Œç»Ÿè®¡æ¯ä¸ªå•è¯å‡ºç°æ¬¡æ•°ã€‚æœåŠ¡å™¨3å°ï¼Œæ¯å°é…ç½®4Gå†…å­˜ï¼Œ4æ ¸CPUï¼Œ4çº¿ç¨‹ã€‚\n2ï¼‰éœ€æ±‚åˆ†æï¼š\n1G / 128m = 8ä¸ªMapTaskï¼›1ä¸ªReduceTaskï¼›1ä¸ªmrAppMaster\nå¹³å‡æ¯ä¸ªèŠ‚ç‚¹è¿è¡Œ10ä¸ª / 3å° â‰ˆ 3ä¸ªä»»åŠ¡ï¼ˆ4   3   3ï¼‰\n3ï¼‰ä¿®æ”¹yarn-site.xmlé…ç½®å‚æ•°å¦‚ä¸‹ï¼š\n&lt;!-- é€‰æ‹©è°ƒåº¦å™¨ï¼Œé»˜è®¤å®¹é‡ --&gt;\n&lt;property&gt;\n\t&lt;description&gt;The class to use as the resource scheduler.&lt;/description&gt;\n\t&lt;name&gt;yarn.resourcemanager.scheduler.class&lt;/name&gt;\n\t&lt;value&gt;org.apache.hadoop.yarn.server.resourcemanager.scheduler.capacity.CapacityScheduler&lt;/value&gt;\n&lt;/property&gt;\n\n&lt;!-- ResourceManagerå¤„ç†è°ƒåº¦å™¨è¯·æ±‚çš„çº¿ç¨‹æ•°é‡,é»˜è®¤50ï¼›å¦‚æœæäº¤çš„ä»»åŠ¡æ•°å¤§äº50ï¼Œå¯ä»¥å¢åŠ è¯¥å€¼ï¼Œä½†æ˜¯ä¸èƒ½è¶…è¿‡3å° * 4çº¿ç¨‹ = 12çº¿ç¨‹ï¼ˆå»é™¤å…¶ä»–åº”ç”¨ç¨‹åºå®é™…ä¸èƒ½è¶…è¿‡8ï¼‰ --&gt;\n&lt;property&gt;\n\t&lt;description&gt;Number of threads to handle scheduler interface.&lt;/description&gt;\n\t&lt;name&gt;yarn.resourcemanager.scheduler.client.thread-count&lt;/name&gt;\n\t&lt;value&gt;8&lt;/value&gt;\n&lt;/property&gt;\n\n&lt;!-- æ˜¯å¦è®©yarnè‡ªåŠ¨æ£€æµ‹ç¡¬ä»¶è¿›è¡Œé…ç½®ï¼Œé»˜è®¤æ˜¯falseï¼Œå¦‚æœè¯¥èŠ‚ç‚¹æœ‰å¾ˆå¤šå…¶ä»–åº”ç”¨ç¨‹åºï¼Œå»ºè®®æ‰‹åŠ¨é…ç½®ã€‚å¦‚æœè¯¥èŠ‚ç‚¹æ²¡æœ‰å…¶ä»–åº”ç”¨ç¨‹åºï¼Œå¯ä»¥é‡‡ç”¨è‡ªåŠ¨ --&gt;\n&lt;property&gt;\n\t&lt;description&gt;Enable auto-detection of node capabilities such as\n\tmemory and CPU.\n\t&lt;/description&gt;\n\t&lt;name&gt;yarn.nodemanager.resource.detect-hardware-capabilities&lt;/name&gt;\n\t&lt;value&gt;false&lt;/value&gt;\n&lt;/property&gt;\n\n&lt;!-- æ˜¯å¦å°†è™šæ‹Ÿæ ¸æ•°å½“ä½œCPUæ ¸æ•°ï¼Œé»˜è®¤æ˜¯falseï¼Œé‡‡ç”¨ç‰©ç†CPUæ ¸æ•° --&gt;\n&lt;property&gt;\n\t&lt;description&gt;Flag to determine if logical processors(such as\n\thyperthreads) should be counted as cores. Only applicable on Linux\n\twhen yarn.nodemanager.resource.cpu-vcores is set to -1 and\n\tyarn.nodemanager.resource.detect-hardware-capabilities is true.\n\t&lt;/description&gt;\n\t&lt;name&gt;yarn.nodemanager.resource.count-logical-processors-as-cores&lt;/name&gt;\n\t&lt;value&gt;false&lt;/value&gt;\n&lt;/property&gt;\n\n&lt;!-- è™šæ‹Ÿæ ¸æ•°å’Œç‰©ç†æ ¸æ•°ä¹˜æ•°ï¼Œé»˜è®¤æ˜¯1.0 --&gt;\n&lt;property&gt;\n\t&lt;description&gt;Multiplier to determine how to convert phyiscal cores to\n\tvcores. This value is used if yarn.nodemanager.resource.cpu-vcores\n\tis set to -1(which implies auto-calculate vcores) and\n\tyarn.nodemanager.resource.detect-hardware-capabilities is set to true. The\tnumber of vcores will be calculated as\tnumber of CPUs * multiplier.\n\t&lt;/description&gt;\n\t&lt;name&gt;yarn.nodemanager.resource.pcores-vcores-multiplier&lt;/name&gt;\n\t&lt;value&gt;1.0&lt;/value&gt;\n&lt;/property&gt;\n\n&lt;!-- NodeManagerä½¿ç”¨å†…å­˜æ•°ï¼Œé»˜è®¤8Gï¼Œä¿®æ”¹ä¸º4Gå†…å­˜ --&gt;\n&lt;property&gt;\n\t&lt;description&gt;Amount of physical memory, in MB, that can be allocated \n\tfor containers. If set to -1 and\n\tyarn.nodemanager.resource.detect-hardware-capabilities is true, it is\n\tautomatically calculated(in case of Windows and Linux).\n\tIn other cases, the default is 8192MB.\n\t&lt;/description&gt;\n\t&lt;name&gt;yarn.nodemanager.resource.memory-mb&lt;/name&gt;\n\t&lt;value&gt;4096&lt;/value&gt;\n&lt;/property&gt;\n\n&lt;!-- nodemanagerçš„CPUæ ¸æ•°ï¼Œä¸æŒ‰ç…§ç¡¬ä»¶ç¯å¢ƒè‡ªåŠ¨è®¾å®šæ—¶é»˜è®¤æ˜¯8ä¸ªï¼Œä¿®æ”¹ä¸º4ä¸ª --&gt;\n&lt;property&gt;\n\t&lt;description&gt;Number of vcores that can be allocated\n\tfor containers. This is used by the RM scheduler when allocating\n\tresources for containers. This is not used to limit the number of\n\tCPUs used by YARN containers. If it is set to -1 and\n\tyarn.nodemanager.resource.detect-hardware-capabilities is true, it is\n\tautomatically determined from the hardware in case of Windows and Linux.\n\tIn other cases, number of vcores is 8 by default.&lt;/description&gt;\n\t&lt;name&gt;yarn.nodemanager.resource.cpu-vcores&lt;/name&gt;\n\t&lt;value&gt;4&lt;/value&gt;\n&lt;/property&gt;\n\n&lt;!-- å®¹å™¨æœ€å°å†…å­˜ï¼Œé»˜è®¤1G --&gt;\n&lt;property&gt;\n\t&lt;description&gt;The minimum allocation for every container request at the RM\tin MBs. Memory requests lower than this will be set to the value of this\tproperty. Additionally, a node manager that is configured to have less memory\tthan this value will be shut down by the resource manager.\n\t&lt;/description&gt;\n\t&lt;name&gt;yarn.scheduler.minimum-allocation-mb&lt;/name&gt;\n\t&lt;value&gt;1024&lt;/value&gt;\n&lt;/property&gt;\n\n&lt;!-- å®¹å™¨æœ€å¤§å†…å­˜ï¼Œé»˜è®¤8Gï¼Œä¿®æ”¹ä¸º2G --&gt;\n&lt;property&gt;\n\t&lt;description&gt;The maximum allocation for every container request at the RM\tin MBs. Memory requests higher than this will throw an\tInvalidResourceRequestException.\n\t&lt;/description&gt;\n\t&lt;name&gt;yarn.scheduler.maximum-allocation-mb&lt;/name&gt;\n\t&lt;value&gt;2048&lt;/value&gt;\n&lt;/property&gt;\n\n&lt;!-- å®¹å™¨æœ€å°CPUæ ¸æ•°ï¼Œé»˜è®¤1ä¸ª --&gt;\n&lt;property&gt;\n\t&lt;description&gt;The minimum allocation for every container request at the RM\tin terms of virtual CPU cores. Requests lower than this will be set to the\tvalue of this property. Additionally, a node manager that is configured to\thave fewer virtual cores than this value will be shut down by the resource\tmanager.\n\t&lt;/description&gt;\n\t&lt;name&gt;yarn.scheduler.minimum-allocation-vcores&lt;/name&gt;\n\t&lt;value&gt;1&lt;/value&gt;\n&lt;/property&gt;\n\n&lt;!-- å®¹å™¨æœ€å¤§CPUæ ¸æ•°ï¼Œé»˜è®¤4ä¸ªï¼Œä¿®æ”¹ä¸º2ä¸ª --&gt;\n&lt;property&gt;\n\t&lt;description&gt;The maximum allocation for every container request at the RM\tin terms of virtual CPU cores. Requests higher than this will throw an\n\tInvalidResourceRequestException.&lt;/description&gt;\n\t&lt;name&gt;yarn.scheduler.maximum-allocation-vcores&lt;/name&gt;\n\t&lt;value&gt;2&lt;/value&gt;\n&lt;/property&gt;\n\n&lt;!-- è™šæ‹Ÿå†…å­˜æ£€æŸ¥ï¼Œé»˜è®¤æ‰“å¼€ï¼Œä¿®æ”¹ä¸ºå…³é—­ --&gt;\n&lt;property&gt;\n\t&lt;description&gt;Whether virtual memory limits will be enforced for\n\tcontainers.&lt;/description&gt;\n\t&lt;name&gt;yarn.nodemanager.vmem-check-enabled&lt;/name&gt;\n\t&lt;value&gt;false&lt;/value&gt;\n&lt;/property&gt;\n\n&lt;!-- è™šæ‹Ÿå†…å­˜å’Œç‰©ç†å†…å­˜è®¾ç½®æ¯”ä¾‹,é»˜è®¤2.1 --&gt;\n&lt;property&gt;\n\t&lt;description&gt;Ratio between virtual memory to physical memory when\tsetting memory limits for containers. Container allocations are\texpressed in terms of physical memory, and virtual memory usage\tis allowed to exceed this allocation by this ratio.\n\t&lt;/description&gt;\n\t&lt;name&gt;yarn.nodemanager.vmem-pmem-ratio&lt;/name&gt;\n\t&lt;value&gt;2.1&lt;/value&gt;\n&lt;/property&gt;\n\nå…³é—­è™›æ‹Ÿå†…å­˜æ£€æŸ¥åŸå› \n\n&lt;property&gt;\n&lt;description&gt;Ratio between virtual memory to physi cal memory when setting memory liits for C0 ntainers. Container allocations are expressed in terms of physical memory, and vitual memory usage is allowed to exceed this allocation by this ratio.\n&lt;/description&gt;\n&lt;name&gt;yarn.nodemanager.vmem-pmem-ratio&lt;/name&gt;\n&lt;value&gt;2.1 &lt;/value&gt;\n&lt;/property&gt;\n4ï¼‰åˆ†å‘é…ç½®ã€‚\næ³¨æ„ï¼šå¦‚æœé›†ç¾¤çš„ç¡¬ä»¶èµ„æºä¸ä¸€è‡´ï¼Œè¦æ¯ä¸ªNodeManagerå•ç‹¬é…ç½®\n5ï¼‰é‡å¯é›†ç¾¤\n[atguigu@hadoop102 hadoop-3.1.3]$ sbin/stop-yarn.sh\n[atguigu@hadoop103 hadoop-3.1.3]$ sbin/start-yarn.sh\n6ï¼‰æ‰§è¡ŒWordCountç¨‹åº\n[atguigu@hadoop102 hadoop-3.1.3]$ hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-3.1.3.jar wordcount /input /output\n7ï¼‰è§‚å¯ŸYarnä»»åŠ¡æ‰§è¡Œé¡µé¢\nhttp://hadoop103:8088/cluster/apps\nå®¹é‡è°ƒåº¦å™¨å¤šé˜Ÿåˆ—æäº¤æ¡ˆä¾‹1ï¼‰åœ¨ç”Ÿäº§ç¯å¢ƒæ€ä¹ˆåˆ›å»ºé˜Ÿåˆ—ï¼Ÿ\nï¼ˆ1ï¼‰è°ƒåº¦å™¨é»˜è®¤å°±1ä¸ªdefaulté˜Ÿåˆ—ï¼Œä¸èƒ½æ»¡è¶³ç”Ÿäº§è¦æ±‚ã€‚\n   ï¼ˆ2ï¼‰æŒ‰ç…§æ¡†æ¶ï¼šhive /spark/ flink æ¯ä¸ªæ¡†æ¶çš„ä»»åŠ¡æ”¾å…¥æŒ‡å®šçš„é˜Ÿåˆ—ï¼ˆä¼ä¸šç”¨çš„ä¸æ˜¯ç‰¹åˆ«å¤šï¼‰\nï¼ˆ3ï¼‰æŒ‰ç…§ä¸šåŠ¡æ¨¡å—ï¼šç™»å½•æ³¨å†Œã€è´­ç‰©è½¦ã€ä¸‹å•ã€ä¸šåŠ¡éƒ¨é—¨1ã€ä¸šåŠ¡éƒ¨é—¨2\n2ï¼‰åˆ›å»ºå¤šé˜Ÿåˆ—çš„å¥½å¤„ï¼Ÿ\nï¼ˆ1ï¼‰å› ä¸ºæ‹…å¿ƒå‘˜å·¥ä¸å°å¿ƒï¼Œå†™é€’å½’æ­»å¾ªç¯ä»£ç ï¼ŒæŠŠæ‰€æœ‰èµ„æºå…¨éƒ¨è€—å°½ã€‚\nï¼ˆ2ï¼‰å®ç°ä»»åŠ¡çš„é™çº§ä½¿ç”¨ï¼Œç‰¹æ®Šæ—¶æœŸä¿è¯é‡è¦çš„ä»»åŠ¡é˜Ÿåˆ—èµ„æºå……è¶³ã€‚11.11 6.18\nä¸šåŠ¡éƒ¨é—¨1ï¼ˆé‡è¦ï¼‰=ã€‹ä¸šåŠ¡éƒ¨é—¨2ï¼ˆæ¯”è¾ƒé‡è¦ï¼‰=ã€‹ä¸‹å•ï¼ˆä¸€èˆ¬ï¼‰=ã€‹è´­ç‰©è½¦ï¼ˆä¸€èˆ¬ï¼‰=ã€‹ç™»å½•æ³¨å†Œï¼ˆæ¬¡è¦ï¼‰\nâ€‹    éœ€æ±‚1ï¼šdefaulté˜Ÿåˆ—å æ€»å†…å­˜çš„40%ï¼Œæœ€å¤§èµ„æºå®¹é‡å æ€»èµ„æº60%ï¼Œhiveé˜Ÿåˆ—å æ€»å†…å­˜çš„60%ï¼Œæœ€å¤§èµ„æºå®¹é‡å æ€»èµ„æº80%ã€‚\nâ€‹    éœ€æ±‚2ï¼šé…ç½®é˜Ÿåˆ—ä¼˜å…ˆçº§\né…ç½®å¤šé˜Ÿåˆ—çš„å®¹é‡è°ƒåº¦å™¨1ï¼‰åœ¨capacity-scheduler.xmlä¸­é…ç½®å¦‚ä¸‹ï¼š\nï¼ˆ1ï¼‰ä¿®æ”¹å¦‚ä¸‹é…ç½®\n&lt;!-- æŒ‡å®šå¤šé˜Ÿåˆ—ï¼Œå¢åŠ hiveé˜Ÿåˆ— --&gt;\n&lt;property&gt;\n    &lt;name&gt;yarn.scheduler.capacity.root.queues&lt;/name&gt;\n    &lt;value&gt;default,hive&lt;/value&gt;\n    &lt;description&gt;\n      The queues at the this level (root is the root queue).\n    &lt;/description&gt;\n&lt;/property&gt;\n\n&lt;!-- é™ä½defaulté˜Ÿåˆ—èµ„æºé¢å®šå®¹é‡ä¸º40%ï¼Œé»˜è®¤100% --&gt;\n&lt;property&gt;\n    &lt;name&gt;yarn.scheduler.capacity.root.default.capacity&lt;/name&gt;\n    &lt;value&gt;40&lt;/value&gt;\n&lt;/property&gt;\n\n&lt;!-- é™ä½defaulté˜Ÿåˆ—èµ„æºæœ€å¤§å®¹é‡ä¸º60%ï¼Œé»˜è®¤100% --&gt;\n&lt;property&gt;\n    &lt;name&gt;yarn.scheduler.capacity.root.default.maximum-capacity&lt;/name&gt;\n    &lt;value&gt;60&lt;/value&gt;\n&lt;/property&gt;\nï¼ˆ2ï¼‰ä¸ºæ–°åŠ é˜Ÿåˆ—æ·»åŠ å¿…è¦å±æ€§ï¼š\n&lt;!-- æŒ‡å®šhiveé˜Ÿåˆ—çš„èµ„æºé¢å®šå®¹é‡ --&gt;\n&lt;property&gt;\n    &lt;name&gt;yarn.scheduler.capacity.root.hive.capacity&lt;/name&gt;\n    &lt;value&gt;60&lt;/value&gt;\n&lt;/property&gt;\n\n&lt;!-- ç”¨æˆ·æœ€å¤šå¯ä»¥ä½¿ç”¨é˜Ÿåˆ—å¤šå°‘èµ„æºï¼Œ1è¡¨ç¤º --&gt;\n&lt;property&gt;\n    &lt;name&gt;yarn.scheduler.capacity.root.hive.user-limit-factor&lt;/name&gt;\n    &lt;value&gt;1&lt;/value&gt;\n&lt;/property&gt;\n\n&lt;!-- æŒ‡å®šhiveé˜Ÿåˆ—çš„èµ„æºæœ€å¤§å®¹é‡ --&gt;\n&lt;property&gt;\n    &lt;name&gt;yarn.scheduler.capacity.root.hive.maximum-capacity&lt;/name&gt;\n    &lt;value&gt;80&lt;/value&gt;\n&lt;/property&gt;\n\n&lt;!-- å¯åŠ¨hiveé˜Ÿåˆ— --&gt;\n&lt;property&gt;\n    &lt;name&gt;yarn.scheduler.capacity.root.hive.state&lt;/name&gt;\n    &lt;value&gt;RUNNING&lt;/value&gt;\n&lt;/property&gt;\n\n&lt;!-- å“ªäº›ç”¨æˆ·æœ‰æƒå‘é˜Ÿåˆ—æäº¤ä½œä¸š --&gt;\n&lt;property&gt;\n    &lt;name&gt;yarn.scheduler.capacity.root.hive.acl_submit_applications&lt;/name&gt;\n    &lt;value&gt;*&lt;/value&gt;\n&lt;/property&gt;\n\n&lt;!-- å“ªäº›ç”¨æˆ·æœ‰æƒæ“ä½œé˜Ÿåˆ—ï¼Œç®¡ç†å‘˜æƒé™ï¼ˆæŸ¥çœ‹/æ€æ­»ï¼‰ --&gt;\n&lt;property&gt;\n    &lt;name&gt;yarn.scheduler.capacity.root.hive.acl_administer_queue&lt;/name&gt;\n    &lt;value&gt;*&lt;/value&gt;\n&lt;/property&gt;\n\n&lt;!-- å“ªäº›ç”¨æˆ·æœ‰æƒé…ç½®æäº¤ä»»åŠ¡ä¼˜å…ˆçº§ --&gt;\n&lt;property&gt;\n    &lt;name&gt;yarn.scheduler.capacity.root.hive.acl_application_max_priority&lt;/name&gt;\n    &lt;value&gt;*&lt;/value&gt;\n&lt;/property&gt;\n\n&lt;!-- ä»»åŠ¡çš„è¶…æ—¶æ—¶é—´è®¾ç½®ï¼šyarn application -appId appId -updateLifetime Timeout\nå‚è€ƒèµ„æ–™ï¼šhttps://blog.cloudera.com/enforcing-application-lifetime-slas-yarn/ --&gt;\n\n&lt;!-- å¦‚æœapplicationæŒ‡å®šäº†è¶…æ—¶æ—¶é—´ï¼Œåˆ™æäº¤åˆ°è¯¥é˜Ÿåˆ—çš„applicationèƒ½å¤ŸæŒ‡å®šçš„æœ€å¤§è¶…æ—¶æ—¶é—´ä¸èƒ½è¶…è¿‡è¯¥å€¼ã€‚ \n--&gt;\n&lt;property&gt;\n    &lt;name&gt;yarn.scheduler.capacity.root.hive.maximum-application-lifetime&lt;/name&gt;\n    &lt;value&gt;-1&lt;/value&gt;\n&lt;/property&gt;\n\n&lt;!-- å¦‚æœapplicationæ²¡æŒ‡å®šè¶…æ—¶æ—¶é—´ï¼Œåˆ™ç”¨default-application-lifetimeä½œä¸ºé»˜è®¤å€¼ --&gt;\n&lt;property&gt;\n    &lt;name&gt;yarn.scheduler.capacity.root.hive.default-application-lifetime&lt;/name&gt;\n    &lt;value&gt;-1&lt;/value&gt;\n&lt;/property&gt;\n2ï¼‰åˆ†å‘é…ç½®æ–‡ä»¶\n3ï¼‰é‡å¯Yarnæˆ–è€…æ‰§è¡Œyarn rmadmin -refreshQueuesåˆ·æ–°é˜Ÿåˆ—ï¼Œå°±å¯ä»¥çœ‹åˆ°ä¸¤æ¡é˜Ÿåˆ—ï¼š\n[atguigu@hadoop102 hadoop-3.1.3]$ yarn rmadmin -refreshQueues\nå…¬å¹³è°ƒåº¦å™¨æ¡ˆä¾‹åˆ›å»ºä¸¤ä¸ªé˜Ÿåˆ—ï¼Œåˆ†åˆ«æ˜¯testå’Œatguiguï¼ˆä»¥ç”¨æˆ·æ‰€å±ç»„å‘½åï¼‰ã€‚æœŸæœ›å®ç°ä»¥ä¸‹æ•ˆæœï¼šè‹¥ç”¨æˆ·æäº¤ä»»åŠ¡æ—¶æŒ‡å®šé˜Ÿåˆ—ï¼Œåˆ™ä»»åŠ¡æäº¤åˆ°æŒ‡å®šé˜Ÿåˆ—è¿è¡Œï¼›è‹¥æœªæŒ‡å®šé˜Ÿåˆ—ï¼Œtestç”¨æˆ·æäº¤çš„ä»»åŠ¡åˆ°root.group.testé˜Ÿåˆ—è¿è¡Œï¼Œatguiguæäº¤çš„ä»»åŠ¡åˆ°root.group.atguigué˜Ÿåˆ—è¿è¡Œï¼ˆæ³¨ï¼šgroupä¸ºç”¨æˆ·æ‰€å±ç»„ï¼‰ã€‚\nå…¬å¹³è°ƒåº¦å™¨çš„é…ç½®æ¶‰åŠåˆ°ä¸¤ä¸ªæ–‡ä»¶ï¼Œä¸€ä¸ªæ˜¯yarn-site.xmlï¼Œå¦ä¸€ä¸ªæ˜¯å…¬å¹³è°ƒåº¦å™¨é˜Ÿåˆ—åˆ†é…æ–‡ä»¶fair-scheduler.xmlï¼ˆæ–‡ä»¶åå¯è‡ªå®šä¹‰ï¼‰ã€‚\nï¼ˆ1ï¼‰é…ç½®æ–‡ä»¶å‚è€ƒèµ„æ–™ï¼š\nhttps://hadoop.apache.org/docs/r3.1.3/hadoop-yarn/hadoop-yarn-site/FairScheduler.html\nï¼ˆ2ï¼‰ä»»åŠ¡é˜Ÿåˆ—æ”¾ç½®è§„åˆ™å‚è€ƒèµ„æ–™ï¼š\nhttps://blog.cloudera.com/untangling-apache-hadoop-yarn-part-4-fair-scheduler-queue-basics/\nä¿®æ”¹yarn-site.xmlæ–‡ä»¶ï¼ŒåŠ å…¥ä»¥ä¸‹å‚æ•°\n&lt;property&gt;\n    &lt;name&gt;yarn.resourcemanager.scheduler.class&lt;/name&gt;\n    &lt;value&gt;org.apache.hadoop.yarn.server.resourcemanager.scheduler.fair.FairScheduler&lt;/value&gt;\n    &lt;description&gt;é…ç½®ä½¿ç”¨å…¬å¹³è°ƒåº¦å™¨&lt;/description&gt;\n&lt;/property&gt;\n\n&lt;property&gt;\n    &lt;name&gt;yarn.scheduler.fair.allocation.file&lt;/name&gt;\n    &lt;value&gt;/opt/module/hadoop-3.1.3/etc/hadoop/fair-scheduler.xml&lt;/value&gt;\n    &lt;description&gt;æŒ‡æ˜å…¬å¹³è°ƒåº¦å™¨é˜Ÿåˆ—åˆ†é…é…ç½®æ–‡ä»¶&lt;/description&gt;\n&lt;/property&gt;\n\n&lt;property&gt;\n    &lt;name&gt;yarn.scheduler.fair.preemption&lt;/name&gt;\n    &lt;value&gt;false&lt;/value&gt;\n    &lt;description&gt;ç¦æ­¢é˜Ÿåˆ—é—´èµ„æºæŠ¢å &lt;/description&gt;\n&lt;/property&gt;\né…ç½®fair-scheduler.xml\n&lt;?xml version=\"1.0\"?&gt;\n&lt;allocations&gt;\n  &lt;!-- å•ä¸ªé˜Ÿåˆ—ä¸­Application Masterå ç”¨èµ„æºçš„æœ€å¤§æ¯”ä¾‹,å–å€¼0-1 ï¼Œä¼ä¸šä¸€èˆ¬é…ç½®0.1 --&gt;\n  &lt;queueMaxAMShareDefault&gt;0.5&lt;/queueMaxAMShareDefault&gt;\n  &lt;!-- å•ä¸ªé˜Ÿåˆ—æœ€å¤§èµ„æºçš„é»˜è®¤å€¼ test atguigu default --&gt;\n  &lt;queueMaxResourcesDefault&gt;4096mb,4vcores&lt;/queueMaxResourcesDefault&gt;\n\n  &lt;!-- å¢åŠ ä¸€ä¸ªé˜Ÿåˆ—test --&gt;\n  &lt;queue name=\"test\"&gt;\n    &lt;!-- é˜Ÿåˆ—æœ€å°èµ„æº --&gt;\n    &lt;minResources&gt;2048mb,2vcores&lt;/minResources&gt;\n    &lt;!-- é˜Ÿåˆ—æœ€å¤§èµ„æº --&gt;\n    &lt;maxResources&gt;4096mb,4vcores&lt;/maxResources&gt;\n    &lt;!-- é˜Ÿåˆ—ä¸­æœ€å¤šåŒæ—¶è¿è¡Œçš„åº”ç”¨æ•°ï¼Œé»˜è®¤50ï¼Œæ ¹æ®çº¿ç¨‹æ•°é…ç½® --&gt;\n    &lt;maxRunningApps&gt;4&lt;/maxRunningApps&gt;\n    &lt;!-- é˜Ÿåˆ—ä¸­Application Masterå ç”¨èµ„æºçš„æœ€å¤§æ¯”ä¾‹ --&gt;\n    &lt;maxAMShare&gt;0.5&lt;/maxAMShare&gt;\n    &lt;!-- è¯¥é˜Ÿåˆ—èµ„æºæƒé‡,é»˜è®¤å€¼ä¸º1.0 --&gt;\n    &lt;weight&gt;1.0&lt;/weight&gt;\n    &lt;!-- é˜Ÿåˆ—å†…éƒ¨çš„èµ„æºåˆ†é…ç­–ç•¥ --&gt;\n    &lt;schedulingPolicy&gt;fair&lt;/schedulingPolicy&gt;\n  &lt;/queue&gt;\n  &lt;!-- å¢åŠ ä¸€ä¸ªé˜Ÿåˆ—atguigu --&gt;\n  &lt;queue name=\"atguigu\" type=\"parent\"&gt;\n    &lt;!-- é˜Ÿåˆ—æœ€å°èµ„æº --&gt;\n    &lt;minResources&gt;2048mb,2vcores&lt;/minResources&gt;\n    &lt;!-- é˜Ÿåˆ—æœ€å¤§èµ„æº --&gt;\n    &lt;maxResources&gt;4096mb,4vcores&lt;/maxResources&gt;\n    &lt;!-- é˜Ÿåˆ—ä¸­æœ€å¤šåŒæ—¶è¿è¡Œçš„åº”ç”¨æ•°ï¼Œé»˜è®¤50ï¼Œæ ¹æ®çº¿ç¨‹æ•°é…ç½® --&gt;\n    &lt;maxRunningApps&gt;4&lt;/maxRunningApps&gt;\n    &lt;!-- é˜Ÿåˆ—ä¸­Application Masterå ç”¨èµ„æºçš„æœ€å¤§æ¯”ä¾‹ --&gt;\n    &lt;maxAMShare&gt;0.5&lt;/maxAMShare&gt;\n    &lt;!-- è¯¥é˜Ÿåˆ—èµ„æºæƒé‡,é»˜è®¤å€¼ä¸º1.0 --&gt;\n    &lt;weight&gt;1.0&lt;/weight&gt;\n    &lt;!-- é˜Ÿåˆ—å†…éƒ¨çš„èµ„æºåˆ†é…ç­–ç•¥ --&gt;\n    &lt;schedulingPolicy&gt;fair&lt;/schedulingPolicy&gt;\n  &lt;/queue&gt;\n\n  &lt;!-- ä»»åŠ¡é˜Ÿåˆ—åˆ†é…ç­–ç•¥,å¯é…ç½®å¤šå±‚è§„åˆ™,ä»ç¬¬ä¸€ä¸ªè§„åˆ™å¼€å§‹åŒ¹é…,ç›´åˆ°åŒ¹é…æˆåŠŸ --&gt;\n  &lt;queuePlacementPolicy&gt;\n    &lt;!-- æäº¤ä»»åŠ¡æ—¶æŒ‡å®šé˜Ÿåˆ—,å¦‚æœªæŒ‡å®šæäº¤é˜Ÿåˆ—,åˆ™ç»§ç»­åŒ¹é…ä¸‹ä¸€ä¸ªè§„åˆ™; falseè¡¨ç¤ºï¼šå¦‚æœæŒ‡å®šé˜Ÿåˆ—ä¸å­˜åœ¨,ä¸å…è®¸è‡ªåŠ¨åˆ›å»º--&gt;\n    &lt;rule name=\"specified\" create=\"false\"/&gt;\n    &lt;!-- æäº¤åˆ°root.group.usernameé˜Ÿåˆ—,è‹¥root.groupä¸å­˜åœ¨,ä¸å…è®¸è‡ªåŠ¨åˆ›å»ºï¼›è‹¥root.group.userä¸å­˜åœ¨,å…è®¸è‡ªåŠ¨åˆ›å»º --&gt;\n    &lt;rule name=\"nestedUserQueue\" create=\"true\"&gt;\n        &lt;rule name=\"primaryGroup\" create=\"false\"/&gt;\n    &lt;/rule&gt;\n    &lt;!-- æœ€åä¸€ä¸ªè§„åˆ™å¿…é¡»ä¸ºrejectæˆ–è€…defaultã€‚Rejectè¡¨ç¤ºæ‹’ç»åˆ›å»ºæäº¤å¤±è´¥ï¼Œdefaultè¡¨ç¤ºæŠŠä»»åŠ¡æäº¤åˆ°defaulté˜Ÿåˆ— --&gt;\n    &lt;rule name=\"reject\" /&gt;\n  &lt;/queuePlacementPolicy&gt;\n&lt;/allocations&gt;\nåˆ†å‘é…ç½®å¹¶é‡å¯Yarn\n[atguigu@hadoop102 hadoop]$ xsync yarn-site.xml\n[atguigu@hadoop102 hadoop]$ xsync fair-scheduler.xml\n\n[atguigu@hadoop103 hadoop-3.1.3]$ sbin/stop-yarn.sh\n[atguigu@hadoop103 hadoop-3.1.3]$ sbin/start-yarn.sh\næµ‹è¯•æäº¤ä»»åŠ¡1ï¼‰æäº¤ä»»åŠ¡æ—¶æŒ‡å®šé˜Ÿåˆ—ï¼ŒæŒ‰ç…§é…ç½®è§„åˆ™ï¼Œä»»åŠ¡ä¼šåˆ°æŒ‡å®šçš„root.testé˜Ÿåˆ— \n[atguigu@hadoop102 hadoop-3.1.3]$ hadoop jar /opt/module/hadoop-3.1.3/share/hadoop/mapreduce/hadoop-mapreduce-examples-3.1.3.jar pi -Dmapreduce.job.queuename=root.test 1 1\nâ€‹                                   \n2ï¼‰æäº¤ä»»åŠ¡æ—¶ä¸æŒ‡å®šé˜Ÿåˆ—ï¼ŒæŒ‰ç…§é…ç½®è§„åˆ™ï¼Œä»»åŠ¡ä¼šåˆ°root.atguigu.atguigué˜Ÿåˆ—\n[atguigu@hadoop102 hadoop-3.1.3]$ hadoop jar /opt/module/hadoop-3.1.3/share/hadoop/mapreduce/hadoop-mapreduce-examples-3.1.3.jar pi 1 1\nâ€‹     \nYarnçš„Toolæ¥å£æ¡ˆä¾‹0ï¼‰å›é¡¾ï¼š\n[atguigu@hadoop102 hadoop-3.1.3]$ hadoop jar wc.jar com.atguigu.mapreduce.wordcount2.WordCountDriver /input /output1\nâ€‹    æœŸæœ›å¯ä»¥åŠ¨æ€ä¼ å‚ï¼Œç»“æœæŠ¥é”™ï¼Œè¯¯è®¤ä¸ºæ˜¯ç¬¬ä¸€ä¸ªè¾“å…¥å‚æ•°ã€‚\n[atguigu@hadoop102 hadoop-3.1.3]$ hadoop jar wc.jar com.atguigu.mapreduce.wordcount2.WordCountDriver -Dmapreduce.job.queuename=root.test /input /output1\n1ï¼‰éœ€æ±‚ï¼šè‡ªå·±å†™çš„ç¨‹åºä¹Ÿå¯ä»¥åŠ¨æ€ä¿®æ”¹å‚æ•°ã€‚ç¼–å†™Yarnçš„Toolæ¥å£ã€‚\n2ï¼‰å…·ä½“æ­¥éª¤ï¼š\nï¼ˆ1ï¼‰æ–°å»ºMavené¡¹ç›®YarnDemoï¼Œpomå¦‚ä¸‹ï¼š\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.atguigu.hadoop&lt;/groupId&gt;\n    &lt;artifactId&gt;yarn_tool_test&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt;\n            &lt;artifactId&gt;hadoop-client&lt;/artifactId&gt;\n            &lt;version&gt;3.1.3&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/project&gt;\nï¼ˆ2ï¼‰æ–°å»ºcom.atguigu.yarnæŠ¥å\nï¼ˆ3ï¼‰åˆ›å»ºç±»WordCountå¹¶å®ç°Toolæ¥å£ï¼š\npackage com.atguigu.yarn;\n\nimport org.apache.hadoop.conf.Configuration;\nimport org.apache.hadoop.fs.Path;\nimport org.apache.hadoop.io.IntWritable;\nimport org.apache.hadoop.io.LongWritable;\nimport org.apache.hadoop.io.Text;\nimport org.apache.hadoop.mapreduce.Job;\nimport org.apache.hadoop.mapreduce.Mapper;\nimport org.apache.hadoop.mapreduce.Reducer;\nimport org.apache.hadoop.mapreduce.lib.input.FileInputFormat;\nimport org.apache.hadoop.mapreduce.lib.output.FileOutputFormat;\nimport org.apache.hadoop.util.Tool;\n\nimport java.io.IOException;\n\npublic class WordCount implements Tool {\n\n    private Configuration conf;\n\n    @Override\n    public int run(String[] args) throws Exception {\n\n        Job job = Job.getInstance(conf);\n\n        job.setJarByClass(WordCountDriver.class);\n\n        job.setMapperClass(WordCountMapper.class);\n        job.setReducerClass(WordCountReducer.class);\n\n        job.setMapOutputKeyClass(Text.class);\n        job.setMapOutputValueClass(IntWritable.class);\n        job.setOutputKeyClass(Text.class);\n        job.setOutputValueClass(IntWritable.class);\n\n        FileInputFormat.setInputPaths(job, new Path(args[0]));\n        FileOutputFormat.setOutputPath(job, new Path(args[1]));\n\n        return job.waitForCompletion(true) ? 0 : 1;\n    }\n\n    @Override\n    public void setConf(Configuration conf) {\n        this.conf = conf;\n    }\n\n    @Override\n    public Configuration getConf() {\n        return conf;\n    }\n\n    public static class WordCountMapper extends Mapper&lt;LongWritable, Text, Text, IntWritable&gt; {\n\n        private Text outK = new Text();\n        private IntWritable outV = new IntWritable(1);\n\n        @Override\n        protected void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException {\n\n            String line = value.toString();\n            String[] words = line.split(\" \");\n\n            for (String word : words) {\n                outK.set(word);\n\n                context.write(outK, outV);\n            }\n        }\n    }\n\n    public static class WordCountReducer extends Reducer&lt;Text, IntWritable, Text, IntWritable&gt; {\n        private IntWritable outV = new IntWritable();\n\n        @Override\n        protected void reduce(Text key, Iterable&lt;IntWritable&gt; values, Context context) throws IOException, InterruptedException {\n\n            int sum = 0;\n\n            for (IntWritable value : values) {\n                sum += value.get();\n            }\n            outV.set(sum);\n\n            context.write(key, outV);\n        }\n    }\n}\nï¼ˆ4ï¼‰æ–°å»ºWordCountDriver\npackage com.atguigu.yarn;\n\nimport org.apache.hadoop.conf.Configuration;\nimport org.apache.hadoop.util.Tool;\nimport org.apache.hadoop.util.ToolRunner;\nimport java.util.Arrays;\n\npublic class WordCountDriver {\n\n    private static Tool tool;\n\n    public static void main(String[] args) throws Exception {\n        // 1. åˆ›å»ºé…ç½®æ–‡ä»¶\n        Configuration conf = new Configuration();\n\n        // 2. åˆ¤æ–­æ˜¯å¦æœ‰toolæ¥å£\n        switch (args[0]){\n            case \"wordcount\":\n                tool = new WordCount();\n                break;\n            default:\n                throw new RuntimeException(\" No such tool: \"+ args[0] );\n        }\n        // 3. ç”¨Toolæ‰§è¡Œç¨‹åº\n        // Arrays.copyOfRange å°†è€æ•°ç»„çš„å…ƒç´ æ”¾åˆ°æ–°æ•°ç»„é‡Œé¢\n        int run = ToolRunner.run(conf, tool, Arrays.copyOfRange(args, 1, args.length));\n\n        System.exit(run);\n    }\n}\n3ï¼‰åœ¨HDFSä¸Šå‡†å¤‡è¾“å…¥æ–‡ä»¶ï¼Œå‡è®¾ä¸º/inputç›®å½•ï¼Œå‘é›†ç¾¤æäº¤è¯¥JaråŒ…\n3ï¼‰åœ¨HDFSä¸Šå‡†å¤‡è¾“å…¥æ–‡ä»¶ï¼Œå‡è®¾ä¸º/inputç›®å½•ï¼Œå‘é›†ç¾¤æäº¤è¯¥JaråŒ…\n[atguigu@hadoop102 hadoop-3.1.3]$ yarn jar YarnDemo.jar com.atguigu.yarn.WordCountDriver wordcount /input /output\næ³¨æ„æ­¤æ—¶æäº¤çš„3ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªç”¨äºç”Ÿæˆç‰¹å®šçš„Toolï¼Œç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªä¸ºè¾“å…¥è¾“å‡ºç›®å½•ã€‚æ­¤æ—¶å¦‚æœæˆ‘ä»¬å¸Œæœ›åŠ å…¥è®¾ç½®å‚æ•°ï¼Œå¯ä»¥åœ¨wordcountåé¢æ·»åŠ å‚æ•°ï¼Œä¾‹å¦‚ï¼š\n[atguigu@hadoop102 hadoop-3.1.3]$ yarn jar YarnDemo.jar com.atguigu.yarn.WordCountDriver wordcount -Dmapreduce.job.queuename=root.test /input /output1\n4ï¼‰æ³¨ï¼šä»¥ä¸Šæ“ä½œå…¨éƒ¨åšå®Œè¿‡åï¼Œå¿«ç…§å›å»æˆ–è€…æ‰‹åŠ¨å°†é…ç½®æ–‡ä»¶ä¿®æ”¹æˆä¹‹å‰çš„çŠ¶æ€ï¼Œå› ä¸ºæœ¬èº«èµ„æºå°±ä¸å¤Ÿï¼Œåˆ†æˆäº†è¿™ä¹ˆå¤šï¼Œä¸æ–¹ä¾¿ä»¥åæµ‹è¯•ã€‚\n","slug":"B5-MapReduceæ¡ˆä¾‹","date":"2021-11-17T11:17:27.000Z","categories_index":"å¤§æ•°æ®","tags_index":"Hadoop","author_index":"YFR718"},{"id":"c8964ce203e761cbb3c6f466ff1217cb","title":"B4.å¤§æ•°æ®å¸¸ç”¨shellè„šæœ¬","content":"å¸¸è§shellè„šæœ¬é›†ç¾¤è§æ–‡ä»¶åŒæ­¥#!/bin/bash\n\n#1. åˆ¤æ–­å‚æ•°ä¸ªæ•°\nif [ $# -lt 1 ]\nthen\n    echo Not Enough Arguement!\n    exit;\nfi\n\n#2. éå†é›†ç¾¤æ‰€æœ‰æœºå™¨\nfor host in hadoop102 hadoop103 hadoop104\ndo\n    echo ====================  $host  ====================\n    #3. éå†æ‰€æœ‰ç›®å½•ï¼ŒæŒ¨ä¸ªå‘é€\n\n    for file in $@\n    do\n        #4. åˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨\n        if [ -e $file ]\n            then\n                #5. è·å–çˆ¶ç›®å½•\n                pdir=$(cd -P $(dirname $file); pwd)\n\n                #6. è·å–å½“å‰æ–‡ä»¶çš„åç§°\n                fname=$(basename $file)\n                ssh $host \"mkdir -p $pdir\"\n                rsync -av $pdir/$fname $host:$pdir\n            else\n                echo $file does not exists!\n        fi\n    done\ndone\n\nå¯åŠ¨åœæ­¢hadoopé›†ç¾¤\n#!/bin/bash\n\nif [ $# -lt 1 ]\nthen\n    echo \"No Args Input...\"\n    exit ;\nfi\n\ncase $1 in\n\"start\")\n        echo \" =================== å¯åŠ¨ hadoopé›†ç¾¤ ===================\"\n\n        echo \" --------------- å¯åŠ¨ hdfs ---------------\"\n        ssh hadoop102 \"/opt/module/hadoop-3.1.3/sbin/start-dfs.sh\"\n        echo \" --------------- å¯åŠ¨ yarn ---------------\"\n        ssh hadoop103 \"/opt/module/hadoop-3.1.3/sbin/start-yarn.sh\"\n        echo \" --------------- å¯åŠ¨ historyserver ---------------\"\n        ssh hadoop102 \"/opt/module/hadoop-3.1.3/bin/mapred --daemon start historyserver\"\n;;\n\"stop\")\n        echo \" =================== å…³é—­ hadoopé›†ç¾¤ ===================\"\n\n        echo \" --------------- å…³é—­ historyserver ---------------\"\n        ssh hadoop102 \"/opt/module/hadoop-3.1.3/bin/mapred --daemon stop historyserver\"\n        echo \" --------------- å…³é—­ yarn ---------------\"\n        ssh hadoop103 \"/opt/module/hadoop-3.1.3/sbin/stop-yarn.sh\"\n        echo \" --------------- å…³é—­ hdfs ---------------\"\n        ssh hadoop102 \"/opt/module/hadoop-3.1.3/sbin/stop-dfs.sh\"\n;;\n*)\n    echo \"Input Args Error...\"\n;;\nesac\n\n\næŸ¥çœ‹é›†ç¾¤jps#!/bin/bash\n\nfor host in hadoop102 hadoop103 hadoop104\ndo\n        echo =============== $host ===============\n        ssh $host jps\ndone\n\nhive#!/bin/bash \nHIVE_LOG_DIR=$HIVE_HOME/logs\nif [ ! -d $HIVE_LOG_DIR ]\nthen\n    mkdir -p $HIVE_LOG_DIR\nfi\n#æ£€æŸ¥è¿›ç¨‹æ˜¯å¦è¿è¡Œæ­£å¸¸ï¼Œå‚æ•° 1ä¸ºè¿›ç¨‹åï¼Œå‚æ•° 2ä¸ºè¿›ç¨‹ç«¯å£\nfunction check_process() \n{\n   pid=$(ps -ef 2&gt;/dev/null | grep -v grep | grep -i $1 | awk '{print $2}')\n   ppid=$(netstat -nltp 2&gt;/dev/null | grep $2 | awk '{print $7}' | cut -d '/' -f 1)\n   echo $pid  \n   [[ \"$pid\" =~ \"$ppid\" ]] &amp;&amp; [ \"$ppid\" ] &amp;&amp; return 0 || return 1\n}\nfunction hive_start() \n{\n   metapid=$(check_process HiveMetastore 9083)\n   cmd=\"nohup hive --service metastore &gt;$HIVE_LOG_DIR/metastore.log 2&gt;&amp;1 &amp;\"\n   [ -z \"$metapid\" ] &amp;&amp; eval $cmd || echo \"MetastroeæœåŠ¡å·²å¯åŠ¨\"\n   server2pid=$(check_process HiveServer2 10000)\n   cmd=\"nohup hiveserver2 &gt;$HIVE_LOG_DIR/hiveServer2.log 2&gt;&amp;1 &amp;\"\n   [ -z \"$server2pid\" ] &amp;&amp; eval $cmd || echo \"HiveServer2æœåŠ¡å·²å¯åŠ¨\"\n}\nfunction hive_stop() \n{\n    metapid=$(check_process HiveMetastore 9083)\n    [ \"$metapid\" ] &amp;&amp; kill $metapid || echo \"MetastoreæœåŠ¡æœªå¯åŠ¨\"\n    server2pid=$(check_process HiveServer2 10000)\n    [ \"$server2pid\" ] &amp;&amp; kill $server2pid || echo \"HiveServer2æœåŠ¡æœªå¯åŠ¨\"\n}\ncase $1 in\n\"start\")\nhive_start\n;;\n\"stop\")\nhive_stop\n;;\n\"restart\")\nhive_stop\nsleep 2\nhive_start\n;;\n\n","slug":"B4-å¤§æ•°æ®å¸¸ç”¨shellè„šæœ¬","date":"2021-11-16T08:46:58.000Z","categories_index":"å¤§æ•°æ®","tags_index":"shell","author_index":"YFR718"},{"id":"35292c50fe93e1c9375839d3cf5431cb","title":"shellç¼–ç¨‹ing","content":"shellç¼–ç¨‹\nshellåŸºç¡€Shellæ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œè§£é‡Šå™¨ï¼Œå®ƒæ¥æ”¶åº”ç”¨ç¨‹åº/ç”¨æˆ·å‘½ä»¤,ç„¶åè°ƒç”¨æ“ä½œç³»ç»Ÿå†…æ ¸ã€‚\nShelè§£æå™¨ï¼ˆ1ï¼‰Linuxæä¾›çš„Shellè§£æå™¨æœ‰ï¼š\n[atguigu@hadoop101 ~]$ cat /etc/shells \n/bin/sh\n/bin/bash\n/sbin/nologin\n/bin/dash\n/bin/tcsh\n/bin/csh\nï¼ˆ2ï¼‰bashå’Œshçš„å…³ç³»\n[atguigu@hadoop101 bin]$ ll | grep bash\n-rwxr-xr-x. 1 root root 941880 5æœˆ  11 2016 bash\nlrwxrwxrwx. 1 root root      4 5æœˆ  27 2017 sh -&gt; bash\nï¼ˆ3ï¼‰Centosé»˜è®¤çš„è§£æå™¨æ˜¯bash\n[atguigu@hadoop102 bin]$ echo $SHELL\n/bin/bash\nShellè„šæœ¬å…¥é—¨1ï¼è„šæœ¬æ ¼å¼è„šæœ¬ä»¥==#!/bin/bash==å¼€å¤´ï¼ˆæŒ‡å®šè§£æå™¨ï¼‰2ï¼ç¬¬ä¸€ä¸ªShellè„šæœ¬ï¼šhelloworld\n[atguigu@hadoop101 datas]$ touch helloworld.sh\n[atguigu@hadoop101 datas]$ vi helloworld.sh\nåœ¨helloworld.shä¸­è¾“å…¥å¦‚ä¸‹å†…å®¹\n#!/bin/bash\necho \"helloworld\"\nè„šæœ¬çš„å¸¸ç”¨æ‰§è¡Œæ–¹å¼ç¬¬ä¸€ç§ï¼šé‡‡ç”¨bashæˆ–sh+è„šæœ¬çš„ç›¸å¯¹è·¯å¾„æˆ–ç»å¯¹è·¯å¾„ï¼ˆä¸ç”¨èµ‹äºˆè„šæœ¬+xæƒé™ï¼‰\n#\tsh+è„šæœ¬çš„ç›¸å¯¹è·¯å¾„\n[atguigu@hadoop101 datas]$ sh helloworld.sh \nHelloworld\n#\tsh+è„šæœ¬çš„ç»å¯¹è·¯å¾„\n[atguigu@hadoop101 datas]$ sh /home/atguigu/datas/helloworld.sh \nhelloworld\n#\tbash+è„šæœ¬çš„ç›¸å¯¹è·¯å¾„\n[atguigu@hadoop101 datas]$ bash helloworld.sh \nHelloworld\n#\tbash+è„šæœ¬çš„ç»å¯¹è·¯å¾„\n[atguigu@hadoop101 datas]$ bash /home/atguigu/datas/helloworld.sh \nHelloworld\nç¬¬äºŒç§ï¼šé‡‡ç”¨è¾“å…¥è„šæœ¬çš„ç»å¯¹è·¯å¾„æˆ–ç›¸å¯¹è·¯å¾„æ‰§è¡Œè„šæœ¬ï¼ˆå¿…é¡»å…·æœ‰å¯æ‰§è¡Œæƒé™+xï¼‰\n#é¦–å…ˆè¦èµ‹äºˆhelloworld.sh è„šæœ¬çš„+xæƒé™\n[atguigu@hadoop101 datas]$ chmod 777 helloworld.sh\n#æ‰§è¡Œè„šæœ¬\nç›¸å¯¹è·¯å¾„\n[atguigu@hadoop101 datas]$ ./helloworld.sh \nHelloworld\n#ç»å¯¹è·¯å¾„\n[atguigu@hadoop101 datas]$ /home/atguigu/datas/helloworld.sh \nHelloworld\næ³¨æ„ï¼šç¬¬ä¸€ç§æ‰§è¡Œæ–¹æ³•ï¼Œæœ¬è´¨æ˜¯bashè§£æå™¨å¸®ä½ æ‰§è¡Œè„šæœ¬ï¼Œæ‰€ä»¥è„šæœ¬æœ¬èº«ä¸éœ€è¦æ‰§è¡Œæƒé™ã€‚ç¬¬äºŒç§æ‰§è¡Œæ–¹æ³•ï¼Œæœ¬è´¨æ˜¯è„šæœ¬éœ€è¦è‡ªå·±æ‰§è¡Œï¼Œæ‰€ä»¥éœ€è¦æ‰§è¡Œæƒé™ã€‚\nShellä¸­å˜é‡\n\n\n\nå¸¸ç”¨ç³»ç»Ÿå˜é‡\n\n\n\n\n\n$HOME\n\n\n\n$PWD\n\n\n\n$SHELL\n\n\n\n$USER\n\n\n\n\næ˜¾ç¤ºå½“å‰Shellä¸­æ‰€æœ‰å˜é‡ï¼šset\nè‡ªå®šä¹‰å˜é‡#å®šä¹‰å˜é‡ï¼š\nå˜é‡=å€¼ \n#æ’¤é”€å˜é‡ï¼š\nunset å˜é‡\n#å£°æ˜é™æ€å˜é‡ï¼š\nreadonlyå˜é‡ï¼Œæ³¨æ„ï¼šä¸èƒ½unset\n#å¯æŠŠå˜é‡æå‡ä¸ºå…¨å±€ç¯å¢ƒå˜é‡ï¼Œå¯ä¾›å…¶ä»–Shellç¨‹åºä½¿ç”¨\nexport å˜é‡å\n[atguigu@hadoop101 datas]$ vim helloworld.sh \n\n# åœ¨helloworld.shæ–‡ä»¶ä¸­å¢åŠ echo $B\n#!/bin/bash\necho \"helloworld\"\necho $B\n[atguigu@hadoop101 datas]$ ./helloworld.sh \nHelloworld\nå‘ç°å¹¶æ²¡æœ‰æ‰“å°è¾“å‡ºå˜é‡Bçš„å€¼ã€‚\n[atguigu@hadoop101 datas]$ export B\n[atguigu@hadoop101 datas]$ ./helloworld.sh \nhelloworld\n2\nå˜é‡å®šä¹‰è§„åˆ™    ï¼ˆ1ï¼‰å˜é‡åç§°å¯ä»¥ç”±å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿ç»„æˆï¼Œä½†æ˜¯ä¸èƒ½ä»¥æ•°å­—å¼€å¤´ï¼Œç¯å¢ƒå˜é‡åå»ºè®®å¤§å†™ã€‚    ï¼ˆ2ï¼‰ç­‰å·ä¸¤ä¾§ä¸èƒ½æœ‰ç©ºæ ¼    ï¼ˆ3ï¼‰åœ¨bashä¸­ï¼Œå˜é‡é»˜è®¤ç±»å‹éƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œæ— æ³•ç›´æ¥è¿›è¡Œæ•°å€¼è¿ç®—ã€‚    ï¼ˆ4ï¼‰å˜é‡çš„å€¼å¦‚æœæœ‰ç©ºæ ¼ï¼Œéœ€è¦ä½¿ç”¨åŒå¼•å·æˆ–å•å¼•å·æ‹¬èµ·æ¥ã€‚\nç‰¹æ®Šå˜é‡\n\n\n\nç‰¹æ®Šå˜é‡\n\n\n\n\n\n$n\nnä¸ºæ•°å­—ï¼Œä»£è¡¨è¯¥è„šæœ¬åç§°ï¼Œ1-ä»£è¡¨ç¬¬ä¸€åˆ°ç¬¬ä¹ä¸ªå‚æ•°ï¼Œåä»¥ä¸Šçš„å‚æ•°ï¼Œåä»¥ä¸Šçš„å‚æ•°éœ€è¦ç”¨å¤§æ‹¬å·åŒ…å«ï¼Œå¦‚{10}\n\n\n$#\nè·å–æ‰€æœ‰è¾“å…¥å‚æ•°==ä¸ªæ•°==ï¼Œå¸¸ç”¨äºå¾ªç¯\n\n\n$*\nè¿™ä¸ªå˜é‡ä»£è¡¨å‘½ä»¤è¡Œä¸­æ‰€æœ‰çš„å‚æ•°ï¼Œ$*æŠŠæ‰€æœ‰çš„å‚æ•°çœ‹æˆä¸€ä¸ªæ•´ä½“\n\n\n$@\nè¿™ä¸ªå˜é‡ä¹Ÿä»£è¡¨å‘½ä»¤è¡Œä¸­æ‰€æœ‰çš„å‚æ•°ï¼Œä¸è¿‡$@æŠŠæ¯ä¸ªå‚æ•°åŒºåˆ†å¯¹å¾…\n\n\n$ï¼Ÿ\næœ€åä¸€æ¬¡æ‰§è¡Œçš„å‘½ä»¤çš„è¿”å›çŠ¶æ€ã€‚å¦‚æœè¿™ä¸ªå˜é‡çš„å€¼ä¸º0ï¼Œè¯æ˜ä¸Šä¸€ä¸ªå‘½ä»¤æ­£ç¡®æ‰§è¡Œï¼›å¦‚æœè¿™ä¸ªå˜é‡çš„å€¼ä¸ºé0ï¼ˆå…·ä½“æ˜¯å“ªä¸ªæ•°ï¼Œç”±å‘½ä»¤è‡ªå·±æ¥å†³å®šï¼‰ï¼Œåˆ™è¯æ˜ä¸Šä¸€ä¸ªå‘½ä»¤æ‰§è¡Œä¸æ­£ç¡®äº†ã€‚\n\n\n\n\n\n\n\n# $0 $# $* $@ç”¨æ³•\n[atguigu@hadoop101 datas]$ vim parameter.sh\n#!/bin/bash\necho \"$0  $1   $2\"\necho $#\necho $*\necho $@\n[atguigu@hadoop101 datas]$ bash parameter.sh 1 2 3\nparameter.sh  1   2\n3\n1 2 3\n1 2 3\n# $ï¼Ÿ ç”¨æ³•\n[atguigu@hadoop101 datas]$ ./helloworld.sh \nhello world\t\n[atguigu@hadoop101 datas]$ echo $?\n0\nè¿ç®—ç¬¦\n\n\n\nè¿ç®—ç¬¦\n\n\n\n\n\n$((è¿ç®—å¼))\n\n\n\n$[è¿ç®—å¼]\nS=$[(2+3)*4]\n\n\n\nexpr  + , - , *, /, %\nexpr `expr 2 + 3` * 4\n\n\n\n\næ¡ä»¶åˆ¤æ–­\n\n\n\n[ condition ]\nï¼ˆæ³¨æ„conditionå‰åè¦æœ‰ç©ºæ ¼ï¼‰\n\n\n\n\n\n\nä¸¤ä¸ªæ•´æ•°ä¹‹é—´æ¯”è¾ƒ\n\n\n\n\n\n=\nå­—ç¬¦ä¸²æ¯”è¾ƒ\n-lt\nå°äºï¼ˆless thanï¼‰\n\n\n-le\nå°äºç­‰äºï¼ˆless equalï¼‰\n-eq\nç­‰äºï¼ˆequalï¼‰\n\n\n-gt\nå¤§äºï¼ˆgreater thanï¼‰\n-ge\nå¤§äºç­‰äºï¼ˆgreater equalï¼‰\n\n\n-ne\nä¸ç­‰äºï¼ˆNot equalï¼‰\n\n\n\n\næŒ‰ç…§æ–‡ä»¶æƒé™è¿›è¡Œåˆ¤æ–­\n\n\n\n\n\n-r\nè¯»çš„æƒé™ï¼ˆreadï¼‰\n-w\næœ‰å†™çš„æƒé™ï¼ˆwriteï¼‰\n\n\n-x\næœ‰æ‰§è¡Œçš„æƒé™ï¼ˆexecuteï¼‰\n\n\n\n\næŒ‰ç…§æ–‡ä»¶ç±»å‹è¿›è¡Œåˆ¤æ–­\n\n\n\n\n\n-f\næ–‡ä»¶å­˜åœ¨å¹¶ä¸”æ˜¯ä¸€ä¸ªå¸¸è§„çš„æ–‡ä»¶ï¼ˆfileï¼‰\n-e\næ–‡ä»¶å­˜åœ¨ï¼ˆexistenceï¼‰\n\n\n-d\næ–‡ä»¶å­˜åœ¨å¹¶æ˜¯ä¸€ä¸ªç›®å½•ï¼ˆdirectoryï¼‰\n\n\n\n\n\n# 23æ˜¯å¦å¤§äºç­‰äº22\n[atguigu@hadoop101 datas]$ [ 23 -ge 22 ]\n[atguigu@hadoop101 datas]$ echo $?\n0\n# helloworld.shæ˜¯å¦å…·æœ‰å†™æƒé™\n[atguigu@hadoop101 datas]$ [ -w helloworld.sh ]\n[atguigu@hadoop101 datas]$ echo $?\n0\n# /home/atguigu/cls.txtç›®å½•ä¸­çš„æ–‡ä»¶æ˜¯å¦å­˜åœ¨\n[atguigu@hadoop101 datas]$ [ -e /home/atguigu/cls.txt ]\n[atguigu@hadoop101 datas]$ echo $?\n1\n# å¤šæ¡ä»¶åˆ¤æ–­ï¼ˆ&amp;&amp; è¡¨ç¤ºå‰ä¸€æ¡å‘½ä»¤æ‰§è¡ŒæˆåŠŸæ—¶ï¼Œæ‰æ‰§è¡Œåä¸€æ¡å‘½ä»¤ï¼Œ|| è¡¨ç¤ºä¸Šä¸€æ¡å‘½ä»¤æ‰§è¡Œå¤±è´¥åï¼Œæ‰æ‰§è¡Œä¸‹ä¸€æ¡å‘½ä»¤ï¼‰\n[atguigu@hadoop101 ~]$ [ condition ] &amp;&amp; echo OK || echo notok\nOK\n[atguigu@hadoop101 datas]$ [ condition ] &amp;&amp; [ ] || echo notok\nnotok\n\næµç¨‹æ§åˆ¶if. case. for. whileif [ æ¡ä»¶åˆ¤æ–­å¼ ];then \n  ç¨‹åº \nfi \n# [ æ¡ä»¶åˆ¤æ–­å¼ ]ï¼Œä¸­æ‹¬å·å’Œæ¡ä»¶åˆ¤æ–­å¼ä¹‹é—´å¿…é¡»æœ‰ç©ºæ ¼\n# ifåè¦æœ‰ç©ºæ ¼\n\nif [ æ¡ä»¶åˆ¤æ–­å¼ ] \n  then \n    ç¨‹åº \nfi\n# åˆ—\nif [ $1 -eq \"1\" ]\nthen\n        echo \"banzhang zhen shuai\"\nelif [ $1 -eq \"2\" ]\nthen\n        echo \"cls zhen mei\"\nfi\n\ncase $å˜é‡å in \n  \"å€¼1\"ï¼‰ \n    å¦‚æœå˜é‡çš„å€¼ç­‰äºå€¼1ï¼Œåˆ™æ‰§è¡Œç¨‹åº1 \n    ;; \n  \"å€¼2\"ï¼‰ \n    å¦‚æœå˜é‡çš„å€¼ç­‰äºå€¼2ï¼Œåˆ™æ‰§è¡Œç¨‹åº2 \n    ;; \n  â€¦çœç•¥å…¶ä»–åˆ†æ”¯â€¦ \n  *ï¼‰ \n    å¦‚æœå˜é‡çš„å€¼éƒ½ä¸æ˜¯ä»¥ä¸Šçš„å€¼ï¼Œåˆ™æ‰§è¡Œæ­¤ç¨‹åº \n    ;; \nesac\n#æ³¨æ„äº‹é¡¹ï¼š\n#1)\tcaseè¡Œå°¾å¿…é¡»ä¸ºå•è¯â€œinâ€ï¼Œæ¯ä¸€ä¸ªæ¨¡å¼åŒ¹é…å¿…é¡»ä»¥å³æ‹¬å·â€œï¼‰â€ç»“æŸã€‚\n#2)\tåŒåˆ†å·â€œ;;â€è¡¨ç¤ºå‘½ä»¤åºåˆ—ç»“æŸï¼Œç›¸å½“äºjavaä¸­çš„breakã€‚\n#3)\tæœ€åçš„â€œ*ï¼‰â€è¡¨ç¤ºé»˜è®¤æ¨¡å¼ï¼Œç›¸å½“äºjavaä¸­çš„defaultã€‚\n#\ncase $1 in\n\"1\")\n        echo \"banzhang\"\n;;\n\n\"2\")\n        echo \"cls\"\n;;\n*)\n        echo \"renyao\"\n;;\nesac\n\nfor (( åˆå§‹å€¼;å¾ªç¯æ§åˆ¶æ¡ä»¶;å˜é‡å˜åŒ– )) \n  do \n    ç¨‹åº \n  done\n# åˆ—\ns=0\nfor((i=0;i&lt;=100;i++))\ndo\n        s=$[$s+$i]\ndone\n\n\nfor å˜é‡ in å€¼1 å€¼2 å€¼3â€¦ \n  do \n    ç¨‹åº \n  done\n \n# åˆ—\nfor i in $*\n    do\n      echo \"ban zhang love $i \"\n    done\nwhile [ æ¡ä»¶åˆ¤æ–­å¼ ] \n  do \n    ç¨‹åº\n  done\n\n# åˆ—\ns=0\ni=1\nwhile [ $i -le 100 ]\ndo\n        s=$[$s+$i]\n        i=$[$i+1]\ndone\n\nreadè¯»å–æ§åˆ¶å°è¾“å…¥read(é€‰é¡¹)(å‚æ•°)\né€‰é¡¹ï¼š\n-pï¼šæŒ‡å®šè¯»å–å€¼æ—¶çš„æç¤ºç¬¦ï¼›\n-tï¼šæŒ‡å®šè¯»å–å€¼æ—¶ç­‰å¾…çš„æ—¶é—´ï¼ˆç§’ï¼‰ã€‚\nå‚æ•°ï¼šå˜é‡ï¼ŒæŒ‡å®šè¯»å–å€¼çš„å˜é‡å\nread -t 7 -p \"Enter your name in 7 seconds \" NAME\necho $NAME\n\nshellé«˜çº§ç³»ç»Ÿå‡½æ•°basenameåŸºæœ¬è¯­æ³•\nbasename [string / pathname] [suffix] \nåŠŸèƒ½æè¿°ï¼šbasenameå‘½ä»¤ä¼šåˆ æ‰æ‰€æœ‰çš„å‰ç¼€åŒ…æ‹¬æœ€åä¸€ä¸ªï¼ˆâ€˜/â€™ï¼‰å­—ç¬¦ï¼Œç„¶åå°†å­—ç¬¦ä¸²æ˜¾ç¤ºå‡ºæ¥ã€‚\né€‰é¡¹ï¼š\nsuffixä¸ºåç¼€ï¼Œå¦‚æœsuffixè¢«æŒ‡å®šäº†ï¼Œbasenameä¼šå°†pathnameæˆ–stringä¸­çš„suffixå»æ‰ã€‚\n# æˆªå–è¯¥/home/atguigu/banzhang.txtè·¯å¾„çš„æ–‡ä»¶åç§°\n[atguigu@hadoop101 datas]$ basename /home/atguigu/banzhang.txt \nbanzhang.txt\n[atguigu@hadoop101 datas]$ basename /home/atguigu/banzhang.txt .txt\nbanzhang\ndirnameåŸºæœ¬è¯­æ³•\ndirname æ–‡ä»¶ç»å¯¹è·¯å¾„    \nåŠŸèƒ½æè¿°ï¼šä»ç»™å®šçš„åŒ…å«ç»å¯¹è·¯å¾„çš„æ–‡ä»¶åä¸­å»é™¤æ–‡ä»¶åï¼ˆéç›®å½•çš„éƒ¨åˆ†ï¼‰ï¼Œç„¶åè¿”å›å‰©ä¸‹çš„è·¯å¾„ï¼ˆç›®å½•çš„éƒ¨åˆ†ï¼‰\n# è·å–banzhang.txtæ–‡ä»¶çš„è·¯å¾„\n[atguigu@hadoop101 ~]$ dirname /home/atguigu/banzhang.txt \n/home/atguigu\nè‡ªå®šä¹‰å‡½æ•°åŸºæœ¬è¯­æ³•\n[ function ] funname[()]\n{\n\tAction;\n\t[return int;]\n}\nfunname\nç»éªŒæŠ€å·§\nâ€‹    ï¼ˆ1ï¼‰å¿…é¡»åœ¨è°ƒç”¨å‡½æ•°åœ°æ–¹ä¹‹å‰ï¼Œå…ˆå£°æ˜å‡½æ•°ï¼Œshellè„šæœ¬æ˜¯é€è¡Œè¿è¡Œã€‚ä¸ä¼šåƒå…¶å®ƒè¯­è¨€ä¸€æ ·å…ˆç¼–è¯‘ã€‚\nâ€‹    ï¼ˆ2ï¼‰å‡½æ•°è¿”å›å€¼ï¼Œåªèƒ½é€šè¿‡$?ç³»ç»Ÿå˜é‡è·å¾—ï¼Œå¯ä»¥æ˜¾ç¤ºåŠ ï¼šreturnè¿”å›ï¼Œå¦‚æœä¸åŠ ï¼Œå°†ä»¥æœ€åä¸€æ¡å‘½ä»¤è¿è¡Œç»“æœï¼Œä½œä¸ºè¿”å›å€¼ã€‚returnåè·Ÿæ•°å€¼n(0-255)\nè®¡ç®—ä¸¤ä¸ªè¾“å…¥å‚æ•°çš„å’Œ\n[atguigu@hadoop101 datas]$ touch fun.sh\n[atguigu@hadoop101 datas]$ vim fun.sh\n\n#!/bin/bash\nfunction sum()\n{\n    s=0\n    s=$[ $1 + $2 ]\n    echo \"$s\"\n}\n\nread -p \"Please input the number1: \" n1;\nread -p \"Please input the number2: \" n2;\nsum $n1 $n2;\n\n[atguigu@hadoop101 datas]$ chmod 777 fun.sh\n[atguigu@hadoop101 datas]$ ./fun.sh \nPlease input the number1: 2\nPlease input the number2: 5\n7\nShellå·¥å…·cutcutçš„å·¥ä½œå°±æ˜¯â€œå‰ªâ€ï¼Œå…·ä½“çš„è¯´å°±æ˜¯åœ¨æ–‡ä»¶ä¸­è´Ÿè´£å‰ªåˆ‡æ•°æ®ç”¨çš„ã€‚cut å‘½ä»¤ä»æ–‡ä»¶çš„æ¯ä¸€è¡Œå‰ªåˆ‡å­—èŠ‚ã€å­—ç¬¦å’Œå­—æ®µå¹¶å°†è¿™äº›å­—èŠ‚ã€å­—ç¬¦å’Œå­—æ®µè¾“å‡ºã€‚\nåŸºæœ¬ç”¨æ³•\ncut [é€‰é¡¹å‚æ•°]  filename\nè¯´æ˜ï¼šé»˜è®¤åˆ†éš”ç¬¦æ˜¯åˆ¶è¡¨ç¬¦\n\n\n\n\né€‰é¡¹å‚æ•°\nåŠŸèƒ½\n\n\n\n\n-f\nåˆ—å·ï¼Œæå–ç¬¬å‡ åˆ—\n\n\n-d\nåˆ†éš”ç¬¦ï¼ŒæŒ‰ç…§æŒ‡å®šåˆ†éš”ç¬¦åˆ†å‰²åˆ—\n\n\n\n\næ¡ˆä¾‹å®æ“\n#ï¼ˆ0ï¼‰æ•°æ®å‡†å¤‡\n[atguigu@hadoop101 datas]$ touch cut.txt\n[atguigu@hadoop101 datas]$ vim cut.txt\ndong shen\nguan zhen\nwo  wo\nlai  lai\nle  le\n#ï¼ˆ1ï¼‰åˆ‡å‰²cut.txtç¬¬ä¸€åˆ—\n[atguigu@hadoop101 datas]$ cut -d \" \" -f 1 cut.txt \ndong\nguan\nwo\nlai\nle\n#ï¼ˆ2ï¼‰åˆ‡å‰²cut.txtç¬¬äºŒã€ä¸‰åˆ—\n[atguigu@hadoop101 datas]$ cut -d \" \" -f 2,3 cut.txt \nshen\nzhen\n wo\n lai\n le\n#ï¼ˆ3ï¼‰åœ¨cut.txtæ–‡ä»¶ä¸­åˆ‡å‰²å‡ºguan\n[atguigu@hadoop101 datas]$ cat cut.txt | grep \"guan\" | cut -d \" \" -f 1\nguan\n#ï¼ˆ4ï¼‰é€‰å–ç³»ç»ŸPATHå˜é‡å€¼ï¼Œç¬¬2ä¸ªâ€œï¼šâ€å¼€å§‹åçš„æ‰€æœ‰è·¯å¾„ï¼š\n[atguigu@hadoop101 datas]$ echo $PATH\n/usr/lib64/qt-3.3/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/home/atguigu/bin\n\n[atguigu@hadoop102 datas]$ echo $PATH | cut -d: -f 2-\n/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/home/atguigu/bin\n#ï¼ˆ5ï¼‰åˆ‡å‰²ifconfig åæ‰“å°çš„IPåœ°å€\n[atguigu@hadoop101 datas]$ ifconfig eth0 | grep \"inet addr\" | cut -d: -f 2 | cut -d\" \" -f1\n192.168.1.102\nsedâ€‹        sedæ˜¯ä¸€ç§æµç¼–è¾‘å™¨ï¼Œå®ƒä¸€æ¬¡å¤„ç†ä¸€è¡Œå†…å®¹ã€‚å¤„ç†æ—¶ï¼ŒæŠŠå½“å‰å¤„ç†çš„è¡Œå­˜å‚¨åœ¨ä¸´æ—¶ç¼“å†²åŒºä¸­ï¼Œç§°ä¸ºâ€œæ¨¡å¼ç©ºé—´â€ï¼Œæ¥ç€ç”¨sedå‘½ä»¤å¤„ç†ç¼“å†²åŒºä¸­çš„å†…å®¹ï¼Œå¤„ç†å®Œæˆåï¼ŒæŠŠç¼“å†²åŒºçš„å†…å®¹é€å¾€å±å¹•ã€‚æ¥ç€å¤„ç†ä¸‹ä¸€è¡Œï¼Œè¿™æ ·ä¸æ–­é‡å¤ï¼Œç›´åˆ°æ–‡ä»¶æœ«å°¾ã€‚æ–‡ä»¶å†…å®¹å¹¶æ²¡æœ‰æ”¹å˜ï¼Œé™¤éä½ ä½¿ç”¨é‡å®šå‘å­˜å‚¨è¾“å‡ºã€‚\nåŸºæœ¬ç”¨æ³•sed [é€‰é¡¹å‚æ•°]  â€˜commandâ€™  filename\n\n\n\n\né€‰é¡¹å‚æ•°\nåŠŸèƒ½\n\n\n\n\n-e\nç›´æ¥åœ¨æŒ‡ä»¤åˆ—æ¨¡å¼ä¸Šè¿›è¡Œsedçš„åŠ¨ä½œç¼–è¾‘ã€‚\n\n\n\n\n\n\n\n\nå‘½ä»¤\nåŠŸèƒ½æè¿°\n\n\n\n\na\næ–°å¢ï¼Œaçš„åé¢å¯ä»¥æ¥å­—ä¸²ï¼Œåœ¨ä¸‹ä¸€è¡Œå‡ºç°\n\n\nd\nåˆ é™¤\n\n\ns\næŸ¥æ‰¾å¹¶æ›¿æ¢\n\n\n\n\næ¡ˆä¾‹å®æ“\n#ï¼ˆ0ï¼‰æ•°æ®å‡†å¤‡\n[atguigu@hadoop102 datas]$ touch sed.txt\n[atguigu@hadoop102 datas]$ vim sed.txt\ndong shen\nguan zhen\nwo  wo\nlai  lai\nle  le\n#ï¼ˆ1ï¼‰å°†â€œmei nvâ€è¿™ä¸ªå•è¯æ’å…¥åˆ°sed.txtç¬¬äºŒè¡Œä¸‹ï¼Œæ‰“å°ã€‚\n[atguigu@hadoop102 datas]$ sed '2a mei nv' sed.txt \ndong shen\nguan zhen\nmei nv\nwo  wo\nlai  lai\nle  le\n[atguigu@hadoop102 datas]$ cat sed.txt \ndong shen\nguan zhen\nwo  wo\nlai  lai\nle  le\n#æ³¨æ„ï¼šæ–‡ä»¶å¹¶æ²¡æœ‰æ”¹å˜\n#ï¼ˆ2ï¼‰åˆ é™¤sed.txtæ–‡ä»¶æ‰€æœ‰åŒ…å«woçš„è¡Œ\n[atguigu@hadoop102 datas]$ sed '/wo/d' sed.txt\ndong shen\nguan zhen\nlai  lai\nle  le\n#ï¼ˆ3ï¼‰å°†sed.txtæ–‡ä»¶ä¸­woæ›¿æ¢ä¸ºni\n[atguigu@hadoop102 datas]$ sed 's/wo/ni/g' sed.txt \ndong shen\nguan zhen\nni  ni\nlai  lai\nle  le\n#æ³¨æ„ï¼šâ€˜gâ€™è¡¨ç¤ºglobalï¼Œå…¨éƒ¨æ›¿æ¢\n#ï¼ˆ4ï¼‰å°†sed.txtæ–‡ä»¶ä¸­çš„ç¬¬äºŒè¡Œåˆ é™¤å¹¶å°†woæ›¿æ¢ä¸ºni\n[atguigu@hadoop102 datas]$ sed -e '2d' -e 's/wo/ni/g' sed.txt \ndong shen\nni  ni\nlai  lai\nle  le\nawrkä¸€ä¸ªå¼ºå¤§çš„æ–‡æœ¬åˆ†æå·¥å…·ï¼ŒæŠŠæ–‡ä»¶é€è¡Œçš„è¯»å…¥ï¼Œä»¥ç©ºæ ¼ä¸ºé»˜è®¤åˆ†éš”ç¬¦å°†æ¯è¡Œåˆ‡ç‰‡ï¼Œåˆ‡å¼€çš„éƒ¨åˆ†å†è¿›è¡Œåˆ†æå¤„ç†ã€‚\nåŸºæœ¬ç”¨æ³•\nawk [é€‰é¡¹å‚æ•°] â€˜pattern1{action1} pattern2{action2}â€¦â€™ filename\npatternï¼šè¡¨ç¤ºAWKåœ¨æ•°æ®ä¸­æŸ¥æ‰¾çš„å†…å®¹ï¼Œå°±æ˜¯åŒ¹é…æ¨¡å¼\nactionï¼šåœ¨æ‰¾åˆ°åŒ¹é…å†…å®¹æ—¶æ‰€æ‰§è¡Œçš„ä¸€ç³»åˆ—å‘½ä»¤\n\n\n\n\né€‰é¡¹å‚æ•°\nåŠŸèƒ½\n\n\n\n\n-F\næŒ‡å®šè¾“å…¥æ–‡ä»¶æŠ˜åˆ†éš”ç¬¦\n\n\n-v\nèµ‹å€¼ä¸€ä¸ªç”¨æˆ·å®šä¹‰å˜é‡\n\n\n\n\n#ï¼ˆ0ï¼‰æ•°æ®å‡†å¤‡\n[atguigu@hadoop102 datas]$ sudo cp /etc/passwd ./\n#ï¼ˆ1ï¼‰æœç´¢passwdæ–‡ä»¶ä»¥rootå…³é”®å­—å¼€å¤´çš„æ‰€æœ‰è¡Œï¼Œå¹¶è¾“å‡ºè¯¥è¡Œçš„ç¬¬7åˆ—ã€‚\n[atguigu@hadoop102 datas]$ awk -F: '/^root/{print $7}' passwd \n/bin/bash\n#ï¼ˆ2ï¼‰æœç´¢passwdæ–‡ä»¶ä»¥rootå…³é”®å­—å¼€å¤´çš„æ‰€æœ‰è¡Œï¼Œå¹¶è¾“å‡ºè¯¥è¡Œçš„ç¬¬1åˆ—å’Œç¬¬7åˆ—ï¼Œä¸­é—´ä»¥â€œï¼Œâ€å·åˆ†å‰²ã€‚\n[atguigu@hadoop102 datas]$ awk -F: '/^root/{print $1\",\"$7}' passwd \nroot,/bin/bash\næ³¨æ„ï¼šåªæœ‰åŒ¹é…äº†patternçš„è¡Œæ‰ä¼šæ‰§è¡Œaction\n#ï¼ˆ3ï¼‰åªæ˜¾ç¤º/etc/passwdçš„ç¬¬ä¸€åˆ—å’Œç¬¬ä¸ƒåˆ—ï¼Œä»¥é€—å·åˆ†å‰²ï¼Œä¸”åœ¨æ‰€æœ‰è¡Œå‰é¢æ·»åŠ åˆ—åuserï¼Œshellåœ¨æœ€åä¸€è¡Œæ·»åŠ \"dahaigeï¼Œ/bin/zuishuai\"ã€‚\n[atguigu@hadoop102 datas]$ awk -F : 'BEGIN{print \"user, shell\"} {print $1\",\"$7} END{print \"dahaige,/bin/zuishuai\"}' passwd\nuser, shell\nroot,/bin/bash\nbin,/sbin/nologin\nã€‚ã€‚ã€‚\natguigu,/bin/bash\ndahaige,/bin/zuishuai\n#æ³¨æ„ï¼šBEGIN åœ¨æ‰€æœ‰æ•°æ®è¯»å–è¡Œä¹‹å‰æ‰§è¡Œï¼›END åœ¨æ‰€æœ‰æ•°æ®æ‰§è¡Œä¹‹åæ‰§è¡Œã€‚\n#ï¼ˆ4ï¼‰å°†passwdæ–‡ä»¶ä¸­çš„ç”¨æˆ·idå¢åŠ æ•°å€¼1å¹¶è¾“å‡º\n[atguigu@hadoop102 datas]$ awk -v i=1 -F: '{print $3+i}' passwd\n1\n2\n3\n4\nawkçš„å†…ç½®å˜é‡\n\n\n\n\nå˜é‡\nè¯´æ˜\n\n\n\n\nFILENAME\næ–‡ä»¶å\n\n\nNR\nå·²è¯»çš„è®°å½•æ•°\n\n\nNF\næµè§ˆè®°å½•çš„åŸŸçš„ä¸ªæ•°ï¼ˆåˆ‡å‰²åï¼Œåˆ—çš„ä¸ªæ•°ï¼‰\n\n\n\n\n# ï¼ˆ1ï¼‰ç»Ÿè®¡passwdæ–‡ä»¶åï¼Œæ¯è¡Œçš„è¡Œå·ï¼Œæ¯è¡Œçš„åˆ—æ•°\n[atguigu@hadoop102 datas]$ awk -F: '{print \"filename:\"  FILENAME \", linenumber:\" NR  \",columns:\" NF}' passwd \nfilename:passwd, linenumber:1,columns:7\nfilename:passwd, linenumber:2,columns:7\nfilename:passwd, linenumber:3,columns:7\n#ï¼ˆ2ï¼‰åˆ‡å‰²IP\n[atguigu@hadoop102 datas]$ ifconfig eth0 | grep \"inet addr\" | awk -F: '{print $2}' | awk -F \" \" '{print $1}' \n192.168.1.102\n#ï¼ˆ3ï¼‰æŸ¥è¯¢sed.txtä¸­ç©ºè¡Œæ‰€åœ¨çš„è¡Œå·\n[atguigu@hadoop102 datas]$ awk '/^$/{print NR}' sed.txt \n5\nsortsortå‘½ä»¤æ˜¯åœ¨Linuxé‡Œéå¸¸æœ‰ç”¨ï¼Œå®ƒå°†æ–‡ä»¶è¿›è¡Œæ’åºï¼Œå¹¶å°†æ’åºç»“æœæ ‡å‡†è¾“å‡ºã€‚\nåŸºæœ¬è¯­æ³•\nsort(é€‰é¡¹)(å‚æ•°)\n\n\n\n\né€‰é¡¹\nè¯´æ˜\n\n\n\n\n-n\nä¾ç…§æ•°å€¼çš„å¤§å°æ’åº\n\n\n-r\nä»¥ç›¸åçš„é¡ºåºæ¥æ’åº\n\n\n-t\nè®¾ç½®æ’åºæ—¶æ‰€ç”¨çš„åˆ†éš”å­—ç¬¦\n\n\n-k\næŒ‡å®šéœ€è¦æ’åºçš„åˆ—\n\n\n\n\nå‚æ•°ï¼šæŒ‡å®šå¾…æ’åºçš„æ–‡ä»¶åˆ—è¡¨\n#ï¼ˆ0ï¼‰æ•°æ®å‡†å¤‡\n[atguigu@hadoop102 datas]$ touch sort.sh\n[atguigu@hadoop102 datas]$ vim sort.sh \nbb:40:5.4\nbd:20:4.2\nxz:50:2.3\ncls:10:3.5\nss:30:1.6\n#ï¼ˆ1ï¼‰æŒ‰ç…§â€œï¼šâ€åˆ†å‰²åçš„ç¬¬ä¸‰åˆ—å€’åºæ’åºã€‚\n[atguigu@hadoop102 datas]$ sort -t : -nrk 3  sort.sh \nbb:40:5.4\nbd:20:4.2\ncls:10:3.5\nxz:50:2.3\nss:30:1.6\né¢è¯•é¢˜é—®é¢˜1ï¼šä½¿ç”¨Linuxå‘½ä»¤æŸ¥è¯¢file1ä¸­ç©ºè¡Œæ‰€åœ¨çš„è¡Œå·\n[atguigu@hadoop102 datas]$ awk '/^$/{print NR}' sed.txt \n5\né—®é¢˜2ï¼šæœ‰æ–‡ä»¶chengji.txtå†…å®¹å¦‚ä¸‹:å¼ ä¸‰ 40æå›› 50ç‹äº” 60ä½¿ç”¨Linuxå‘½ä»¤è®¡ç®—ç¬¬äºŒåˆ—çš„å’Œå¹¶è¾“å‡º\n[atguigu@hadoop102 datas]$ cat chengji.txt | awk -F \" \" '{sum+=$2} END{print sum}'\n150\né—®é¢˜3ï¼šShellè„šæœ¬é‡Œå¦‚ä½•æ£€æŸ¥ä¸€ä¸ªæ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Ÿå¦‚æœä¸å­˜åœ¨è¯¥å¦‚ä½•å¤„ç†ï¼Ÿ\n#!/bin/bash\n\nif [ -f file.txt ]; then\n   echo \"æ–‡ä»¶å­˜åœ¨!\"\nelse\n   echo \"æ–‡ä»¶ä¸å­˜åœ¨!\"\nfi\né—®é¢˜4ï¼šç”¨shellå†™ä¸€ä¸ªè„šæœ¬ï¼Œå¯¹æ–‡æœ¬ä¸­æ— åºçš„ä¸€åˆ—æ•°å­—æ’åº\n[root@CentOS6-2 ~]# cat test.txt\n9\n8\n7\n6\n5\n4\n3\n2\n10\n1\n[root@CentOS6-2 ~]# sort -n test.txt|awk '{a+=$0;print $0}END{print \"SUM=\"a}'\n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\nSUM=55\né—®é¢˜5ï¼šè¯·ç”¨shellè„šæœ¬å†™å‡ºæŸ¥æ‰¾å½“å‰æ–‡ä»¶å¤¹ï¼ˆ/homeï¼‰ä¸‹æ‰€æœ‰çš„æ–‡æœ¬æ–‡ä»¶å†…å®¹ä¸­åŒ…å«æœ‰å­—ç¬¦â€shenâ€çš„æ–‡ä»¶åç§°\n[atguigu@hadoop102 datas]$ grep -r \"shen\" /home | cut -d \":\" -f 1\n/home/atguigu/datas/sed.txt\n/home/atguigu/datas/cut.txt\n","slug":"B3-shellç¼–ç¨‹","date":"2021-11-16T08:46:40.000Z","categories_index":"å¤§æ•°æ®","tags_index":"Hadoop","author_index":"YFR718"},{"id":"144f0b4d9b9f80ea377106e9c6a54a45","title":"LinuxåŸºç¡€","content":"Linuxæ¦‚è¿°Linuxçš„åˆ›å§‹äºº:Linus Torvalds æ—çº³æ–¯\nLinuxä¸»è¦çš„å‘è¡Œç‰ˆ:Ubuntu(ä¹Œç­å›¾)ã€RedHat(çº¢å¸½)ã€CentOSã€Debain[è¶å˜]ã€Fedoraã€SuSEã€OpenSUSE\nLinuxç”±Unixå‘å±•è€Œæ¥ã€‚\nlinuxä¸windowsåŒºåˆ«VMWareå®‰è£…è§å­¦ä¹ èµ„æ–™\nâ­è™šæ‹Ÿæœºçš„ç½‘ç»œè¿æ¥ä¸‰ç§æ¨¡å¼\n\n\n\næ¨¡å¼\nç‰¹ç‚¹\n\n\n\n\næ¡¥è¿æ¥\nVMWareè™šæ‹Ÿå‡ºæ¥çš„æ“ä½œç³»ç»Ÿå°±åƒæ˜¯å±€åŸŸç½‘ä¸­çš„ä¸€å°ç‹¬ç«‹çš„ä¸»æœºï¼Œå®ƒå¯ä»¥è®¿é—®ç½‘å†…ä»»ä½•ä¸€å°æœºå™¨ã€‚éœ€è¦æ‰‹å·¥ä¸ºè™šæ‹Ÿç³»ç»Ÿé…ç½®IPåœ°å€ã€å­ç½‘æ©ç ï¼Œè€Œä¸”è¿˜è¦å’Œå®¿ä¸»æœºå™¨å¤„äºåŒä¸€ç½‘æ®µï¼Œè¿™æ ·è™šæ‹Ÿç³»ç»Ÿæ‰èƒ½å’Œå®¿ä¸»æœºå™¨è¿›è¡Œé€šä¿¡ã€‚åŒæ—¶ï¼Œç”±äºè¿™ä¸ªè™šæ‹Ÿç³»ç»Ÿæ˜¯å±€åŸŸç½‘ä¸­çš„ä¸€ä¸ªç‹¬ç«‹çš„ä¸»æœºç³»ç»Ÿï¼Œé‚£ä¹ˆå°±å¯ä»¥æ‰‹å·¥é…ç½®å®ƒçš„TCP/IPé…ç½®ä¿¡æ¯ï¼Œä»¥å®ç°é€šè¿‡å±€åŸŸç½‘çš„ç½‘å…³æˆ–è·¯ç”±å™¨è®¿é—®äº’è”ç½‘ã€‚å¯èƒ½ç…§æˆipå†²çªã€‚\n\n\nNAT\nç½‘ç»œåœ°å€è½¬æ¢æ–¹å¼ï¼Œé€šè¿‡å®¿ä¸»æœºå™¨æ‰€åœ¨çš„ç½‘ç»œæ¥è®¿é—®å…¬ç½‘ã€‚ä½¿ç”¨NATæ¨¡å¼å¯ä»¥å®ç°åœ¨è™šæ‹Ÿç³»ç»Ÿé‡Œè®¿é—®äº’è”ç½‘ã€‚NATæ¨¡å¼ä¸‹çš„è™šæ‹Ÿç³»ç»Ÿçš„TCP/IPé…ç½®ä¿¡æ¯æ˜¯ç”±VMnet8(NAT)è™šæ‹Ÿç½‘ç»œçš„DHCPæœåŠ¡å™¨æä¾›çš„ï¼Œæ— æ³•è¿›è¡Œæ‰‹å·¥ä¿®æ”¹ï¼Œå› æ­¤è™šæ‹Ÿç³»ç»Ÿä¹Ÿå°±æ— æ³•å’Œæœ¬å±€åŸŸç½‘ä¸­çš„å…¶ä»–çœŸå®ä¸»æœºè¿›è¡Œé€šè®¯ã€‚\n\n\nä»…ä¸»æœºæ¨¡å¼\næ‰€æœ‰çš„è™šæ‹Ÿç³»ç»Ÿæ˜¯å¯ä»¥ç›¸äº’é€šä¿¡çš„ï¼Œä½†è™šæ‹Ÿç³»ç»Ÿå’ŒçœŸå®çš„ç½‘ç»œæ˜¯è¢«éš”ç¦»å¼€çš„ã€‚\n\n\n\n\nCentOSå®‰è£…è§å­¦ä¹ èµ„æ–™\nlinuxç›®å½•ç»“æ„linuxçš„æ–‡ä»¶ç³»ç»Ÿæ˜¯é‡‡ç”¨çº§å±‚å¼çš„æ ‘çŠ¶ç›®å½•ç»“æ„ï¼Œåœ¨æ­¤ç»“æ„ä¸­çš„æœ€ä¸Šå±‚æ˜¯æ ¹ç›®å½•â€œ/â€ï¼Œç„¶ååœ¨æ­¤ç›®å½•ä¸‹å†åˆ›å»ºå…¶ä»–çš„ç›®å½•ã€‚\n\n\n\n\nç›®å½•ç»“æ„\nå«ä¹‰\n\n\n\n\n/bin  (/usr/bin ã€ /usr/local/bin)â­\nBinaryçš„ç¼©å†™, è¿™ä¸ªç›®å½•å­˜æ”¾äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶å’Œæœ€ç»å¸¸ä½¿ç”¨çš„å‘½ä»¤\n\n\n/sbin  (/usr/sbin ã€ /usr/local/sbin)\nSuper Userï¼Œè¿™é‡Œå­˜æ”¾çš„æ˜¯ç³»ç»Ÿç®¡ç†å‘˜ä½¿ç”¨çš„ç³»ç»Ÿç®¡ç†ç¨‹åºã€‚\n\n\n/homeâ­\nå­˜æ”¾æ™®é€šç”¨æˆ·çš„ä¸»ç›®å½•ï¼Œåœ¨Linuxä¸­æ¯ä¸ªç”¨æˆ·éƒ½æœ‰ä¸€ä¸ªè‡ªå·±çš„ç›®å½•ï¼Œä¸€èˆ¬è¯¥ç›®å½•åæ˜¯ä»¥ç”¨æˆ·çš„è´¦å·å‘½åçš„ã€‚\n\n\n/root â­\nç³»ç»Ÿç®¡ç†å‘˜ï¼Œä¹Ÿç§°ä½œè¶…çº§æƒé™è€…çš„ç”¨æˆ·ä¸»ç›®å½•ã€‚\n\n\n/lib\nç³»ç»Ÿå¼€æœºæ‰€éœ€è¦æœ€åŸºæœ¬çš„åŠ¨æ€è¿æ¥å…±äº«åº“ï¼Œå…¶ä½œç”¨ç±»ä¼¼äºWindowsé‡Œçš„DLLæ–‡ä»¶ã€‚å‡ ä¹æ‰€æœ‰çš„åº”ç”¨ç¨‹åºéƒ½éœ€è¦ç”¨åˆ°è¿™äº›å…±äº«åº“ã€‚\n\n\n/lost+found\nè¿™ä¸ªç›®å½•ä¸€èˆ¬æƒ…å†µä¸‹æ˜¯ç©ºçš„ï¼Œå½“ç³»ç»Ÿéæ³•å…³æœºåï¼Œè¿™é‡Œå°±å­˜æ”¾äº†ä¸€äº›æ–‡ä»¶ã€‚\n\n\n/etc â­\næ‰€æœ‰çš„ç³»ç»Ÿç®¡ç†æ‰€éœ€è¦çš„é…ç½®æ–‡ä»¶å’Œå­ç›®å½• my.conf\n\n\n/usr â­\nç”¨æˆ·å¾ˆå¤šåº”ç”¨ç¨‹åºå’Œæ–‡ä»¶éƒ½æ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹ï¼Œç±»ä¼¼ä¸windowsä¸‹çš„program filesç›®å½•ã€‚\n\n\n/boot â­\nå¯åŠ¨Linuxæ—¶ä½¿ç”¨çš„ä¸€äº›æ ¸å¿ƒæ–‡ä»¶ï¼ŒåŒ…æ‹¬ä¸€äº›è¿æ¥æ–‡ä»¶ä»¥åŠé•œåƒæ–‡ä»¶\n\n\n/proc\nè™šæ‹Ÿçš„ç›®å½•ï¼Œå®ƒæ˜¯ç³»ç»Ÿå†…å­˜çš„æ˜ å°„ï¼Œè®¿é—®è¿™ä¸ªç›®å½•æ¥è·å–ç³»ç»Ÿä¿¡æ¯ã€‚\n\n\n/srv\nserviceï¼Œè¯¥ç›®å½•å­˜æ”¾ä¸€äº›æœåŠ¡å¯åŠ¨ä¹‹åéœ€è¦æå–çš„æ•°æ®ã€‚\n\n\n/sys\nè¿™æ˜¯linux2.6å†…æ ¸çš„ä¸€ä¸ªå¾ˆå¤§çš„å˜åŒ–ã€‚è¯¥ç›®å½•ä¸‹å®‰è£…äº†2.6å†…æ ¸ä¸­æ–°å‡ºç°çš„ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿ sysfs ã€‚\n\n\n/tmp\nå­˜æ”¾ä¸€äº›ä¸´æ—¶æ–‡ä»¶çš„ã€‚\n\n\n/dev\nç±»ä¼¼äºwindowsçš„è®¾å¤‡ç®¡ç†å™¨ï¼ŒæŠŠæ‰€æœ‰çš„ç¡¬ä»¶ç”¨æ–‡ä»¶çš„å½¢å¼å­˜å‚¨ã€‚\n\n\n/media â­\nlinuxç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ«ä¸€äº›è®¾å¤‡ï¼Œä¾‹å¦‚Uç›˜ã€å…‰é©±ç­‰ç­‰ï¼Œå½“è¯†åˆ«åï¼Œlinuxä¼šæŠŠè¯†åˆ«çš„è®¾å¤‡æŒ‚è½½åˆ°è¿™ä¸ªç›®å½•ä¸‹ã€‚\n\n\n/mnt â­\nè®©ç”¨æˆ·ä¸´æ—¶æŒ‚è½½åˆ«çš„æ–‡ä»¶ç³»ç»Ÿçš„ï¼Œæˆ‘ä»¬å¯ä»¥å°†å¤–éƒ¨çš„å­˜å‚¨æŒ‚è½½åœ¨/mnt/ä¸Šï¼Œç„¶åè¿›å…¥è¯¥ç›®å½•å°±å¯ä»¥æŸ¥çœ‹é‡Œçš„å†…å®¹äº†ã€‚ d:/myshare\n\n\n/opt\nç»™ä¸»æœºé¢å¤–å®‰è£…è½¯ä»¶æ‰€æ‘†æ”¾çš„ç›®å½•ã€‚\n\n\n/usr/local â­\nå¦ä¸€ä¸ªç»™ä¸»æœºé¢å¤–å®‰è£…è½¯ä»¶æ‰€==å®‰è£…çš„ç›®å½•==ã€‚ä¸€èˆ¬æ˜¯é€šè¿‡ç¼–è¯‘æºç æ–¹å¼å®‰è£…çš„ç¨‹åºã€‚\n\n\n/var â­\nä¸æ–­æ‰©å……ç€çš„ä¸œè¥¿ï¼Œä¹ æƒ¯å°†ç»å¸¸è¢«ä¿®æ”¹çš„ç›®å½•æ”¾åœ¨è¿™ä¸ªç›®å½•ä¸‹ã€‚åŒ…æ‹¬å„ç§æ—¥å¿—æ–‡ä»¶ã€‚\n\n\n/selinux  [security-enhanced linux]  ç±»ä¼¼ 360\nSELinuxæ˜¯ä¸€ç§å®‰å…¨å­ç³»ç»Ÿ,å®ƒèƒ½æ§åˆ¶ç¨‹åºåªèƒ½è®¿é—®ç‰¹å®šæ–‡ä»¶ã€‚\n\n\n\n\nVI/VIMVI/VIMä¸€èˆ¬æ¨¡å¼ä»¥ vim æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶å°±ç›´æ¥è¿›å…¥ä¸€èˆ¬æ¨¡å¼äº†(è¿™æ˜¯é»˜è®¤çš„æ¨¡å¼)ã€‚åœ¨è¿™ä¸ªæ¨¡å¼ä¸­ï¼Œ ä½ å¯ä»¥ä½¿ç”¨ã€ä¸Šä¸‹å·¦å³ã€æŒ‰é”®æ¥ç§»åŠ¨å…‰æ ‡ï¼Œä½ å¯ä»¥ä½¿ç”¨ã€åˆ é™¤å­—ç¬¦ã€æˆ–ã€åˆ é™¤æ•´è¡Œã€æ¥å¤„ç†æ¡£æ¡ˆå†…å®¹ï¼Œ ä¹Ÿå¯ä»¥ä½¿ç”¨ã€å¤åˆ¶ã€è´´ä¸Šã€æ¥å¤„ç†ä½ çš„æ–‡ä»¶æ•°æ®ã€‚åœ¨æ­£å¸¸æ¨¡å¼ä¸‹å¯ä»¥ä½¿ç”¨å¿«æ·é”®\nVI/VIMç¼–è¾‘æ¨¡å¼æŒ‰ä¸‹iï¼ˆinsertï¼‰, I, o, O, a, A, r, Rç­‰ä»»ä½•ä¸€ä¸ªå­—æ¯ä¹‹åæ‰ä¼šè¿›å…¥ç¼–è¾‘æ¨¡å¼, ä¸€èˆ¬æ¥è¯´æŒ‰iå³å¯.\nVI/VIMæŒ‡ä»¤æ¨¡å¼åœ¨è¿™ä¸ªæ¨¡å¼å½“ä¸­ï¼Œ å¯ä»¥æä¾›ä½ ç›¸å…³æŒ‡ä»¤ï¼Œå®Œæˆè¯»å–ã€å­˜ç›˜ã€æ›¿æ¢ã€ç¦»å¼€ vim ã€æ˜¾ç¤ºè¡Œå·ç­‰çš„åŠ¨ä½œåˆ™æ˜¯åœ¨æ­¤æ¨¡å¼ä¸­è¾¾æˆçš„ï¼\nVI/VIMæ¨¡å¼é—´è½¬æ¢ä¸€èˆ¬æ¨¡å¼+i=&gt;ç¼–è¾‘æ¨¡å¼        ç¼–è¾‘æ¨¡å¼+ESC=&gt;ä¸€èˆ¬æ¨¡å¼\nä¸€èˆ¬æ¨¡å¼+ï¼š=&gt;å‘½ä»¤æ¨¡å¼      å‘½ä»¤æ¨¡å¼+ESC=&gt;ä¸€èˆ¬æ¨¡å¼\n\n\n\n\nå‘½ä»¤\nåŠŸèƒ½\n\n\n\n\n:w\nä¿å­˜\n\n\n:q\né€€å‡º\n\n\n:!\nå¼ºåˆ¶æ‰§è¡Œ\n\n\n/è¦æŸ¥æ‰¾çš„è¯\nn æŸ¥æ‰¾ä¸‹ä¸€ä¸ªï¼ŒN å¾€ä¸ŠæŸ¥æ‰¾\n\n\n? è¦æŸ¥æ‰¾çš„è¯\nnæ˜¯æŸ¥æ‰¾ä¸Šä¸€ä¸ªï¼Œshift+næ˜¯å¾€ä¸‹æŸ¥æ‰¾\n\n\n:set nu\næ˜¾ç¤ºè¡Œå·\n\n\n:set nonu\nå…³é—­è¡Œå·\n\n\n\n\n\n\n\n\nè¯­æ³•\nåŠŸèƒ½æè¿°\n\n\n\n\nyy\nå¤åˆ¶å…‰æ ‡å½“å‰ä¸€è¡Œ\n\n\nyæ•°å­—y\nå¤åˆ¶ä¸€æ®µï¼ˆä»ç¬¬å‡ è¡Œåˆ°ç¬¬å‡ è¡Œï¼‰\n\n\np\nç®­å¤´ç§»åŠ¨åˆ°ç›®çš„è¡Œç²˜è´´\n\n\nu\næ’¤é”€ä¸Šä¸€æ­¥\n\n\ndd\nåˆ é™¤å…‰æ ‡å½“å‰è¡Œ\n\n\ndæ•°å­—d\nåˆ é™¤å…‰æ ‡ï¼ˆå«ï¼‰åå¤šå°‘è¡Œ\n\n\nx\nåˆ é™¤ä¸€ä¸ªå­—æ¯ï¼Œç›¸å½“äºdel\n\n\nX\nåˆ é™¤ä¸€ä¸ªå­—æ¯ï¼Œç›¸å½“äºBackspace\n\n\nyw\nå¤åˆ¶ä¸€ä¸ªè¯\n\n\ndw\nåˆ é™¤ä¸€ä¸ªè¯\n\n\nshift+^\nç§»åŠ¨åˆ°è¡Œå¤´\n\n\nshift+$\nç§»åŠ¨åˆ°è¡Œå°¾\n\n\n1+shift+g\nç§»åŠ¨åˆ°é¡µå¤´ï¼Œæ•°å­—\n\n\nshift+g\nç§»åŠ¨åˆ°é¡µå°¾\n\n\næ•°å­—N+shift+g\nç§»åŠ¨åˆ°ç›®æ ‡è¡Œ\n\n\n\n\nç³»ç»Ÿç®¡ç†æ“ä½œå’Œè¿œç¨‹æ“ä½œ# æŸ¥çœ‹ç½‘ç»œIPå’Œç½‘å…³\nifconfig\n# é…ç½®ç½‘ç»œipåœ°å€\n# é…ç½®ä¸»æœºå\n# é˜²ç«å¢™é…ç½®\n\n# æµ‹è¯•ä¸»æœºä¹‹é—´ç½‘ç»œè¿é€šæ€§\nping ç›®çš„ä¸»æœº\n\n\n\n\nå…³æœºé‡å¯å‘½ä»¤\n\n\n\n\n\nshutdown  â€“h  now\nç«‹è¯¥è¿›è¡Œå…³æœº\n\n\nshutdown  â€“r   now\nç°åœ¨é‡æ–°å¯åŠ¨è®¡ç®—æœº\n\n\nhalt\nç«‹è¯¥è¿›è¡Œå…³æœº\n\n\nreboot\nç°åœ¨é‡æ–°å¯åŠ¨è®¡ç®—æœº\n\n\nsync\næŠŠå†…å­˜çš„æ•°æ®åŒæ­¥åˆ°ç£ç›˜.\n\n\n\n\nåˆ‡æ¢æˆç³»ç»Ÿç®¡ç†å‘˜èº«ä»½.: su - ç”¨æˆ·å\næ³¨æ„ç»†èŠ‚:ä¸ç®¡æ˜¯é‡å¯ç³»ç»Ÿè¿˜æ˜¯å…³é—­ç³»ç»Ÿï¼Œé¦–å…ˆè¦è¿è¡Œsyncå‘½ä»¤ï¼ŒæŠŠå†…å­˜ä¸­çš„æ•°æ®å†™åˆ°ç£ç›˜ä¸­\nç”¨æˆ·ç®¡ç†Linuxç³»ç»Ÿæ˜¯ä¸€ä¸ªå¤šç”¨æˆ·å¤šä»»åŠ¡çš„æ“ä½œç³»ç»Ÿï¼Œä»»ä½•ä¸€ä¸ªè¦ä½¿ç”¨ç³»ç»Ÿèµ„æºçš„ç”¨æˆ·ï¼Œéƒ½å¿…é¡»é¦–å…ˆå‘ç³»ç»Ÿç®¡ç†å‘˜ç”³è¯·ä¸€ä¸ªè´¦å·ï¼Œç„¶åä»¥è¿™ä¸ªè´¦å·çš„èº«ä»½è¿›å…¥ç³»ç»Ÿã€‚\nç”¨æˆ·ç»„:ç±»ä¼¼äºè§’è‰²ï¼Œç³»ç»Ÿå¯ä»¥å¯¹æœ‰å…±æ€§çš„å¤šä¸ªç”¨æˆ·è¿›è¡Œç»Ÿä¸€çš„ç®¡ç†ã€‚\n#æ·»åŠ ç”¨æˆ·\nuseradd [-d å®¶ç›®å½•] [-g ç”¨æˆ·ç»„]  ç”¨æˆ·å\n#æŒ‡å®š/ä¿®æ”¹å¯†ç \npasswd    ç”¨æˆ·å   \n#åˆ é™¤ç”¨æˆ·\nuserdel   ç”¨æˆ·å\n#æŸ¥è¯¢ç”¨æˆ·ä¿¡æ¯\nid  ç”¨æˆ·å\n#åˆ‡æ¢ç”¨æˆ·\nsu  â€“  åˆ‡æ¢ç”¨æˆ·å\n#æŸ¥çœ‹å½“å‰ç”¨æˆ·/ç™»å½•ç”¨æˆ·\nwhoami/ who am I\n#æ–°å¢ç»„\ngroupadd ç»„å\n#ä¿®æ”¹ç”¨æˆ·çš„ç»„\nusermod  â€“g æ–°çš„ç»„å ç”¨æˆ·å\n#æŸ¥çœ‹æ–‡ä»¶/ç›®å½•æ‰€åœ¨ç»„/æ‰€æœ‰è€…\nls â€“ahl\n#ä¿®æ”¹æ–‡ä»¶æ‰€æœ‰è€…\nchown ç”¨æˆ·å æ–‡ä»¶å\n#ä¿®æ”¹æ–‡ä»¶æ‰€åœ¨çš„ç»„\nchgrp ç»„å æ–‡ä»¶å\n\n\n\nç»†èŠ‚è¯´æ˜ä»æƒé™é«˜çš„ç”¨æˆ·åˆ‡æ¢åˆ°æƒé™ä½çš„ç”¨æˆ·ï¼Œä¸éœ€è¦è¾“å…¥å¯†ç ï¼Œåä¹‹éœ€è¦ã€‚å½“éœ€è¦è¿”å›åˆ°åŸæ¥ç”¨æˆ·æ—¶ï¼Œä½¿ç”¨exitæŒ‡ä»¤å¦‚æœ su â€“ æ²¡æœ‰å¸¦ç”¨æˆ·åï¼Œåˆ™é»˜è®¤åˆ‡æ¢åˆ°rootç”¨æˆ·\n\n\n\n\n\nç”¨æˆ·å’Œç»„çš„ç›¸å…³æ–‡ä»¶\nå«ä¹‰\næ¯è¡Œå«ä¹‰\n\n\n\n\n/etc/passwd\nç”¨æˆ·ï¼ˆuserï¼‰çš„é…ç½®æ–‡ä»¶ï¼Œè®°å½•ç”¨æˆ·çš„å„ç§ä¿¡æ¯\nç”¨æˆ·å:å£ä»¤:ç”¨æˆ·æ ‡è¯†å·:ç»„æ ‡è¯†å·:æ³¨é‡Šæ€§æè¿°:ä¸»ç›®å½•:ç™»å½•Shell\n\n\n/etc/shadow\nå£ä»¤çš„é…ç½®æ–‡ä»¶\nç™»å½•å:åŠ å¯†å£ä»¤:æœ€åä¸€æ¬¡ä¿®æ”¹æ—¶é—´:æœ€å°æ—¶é—´é—´éš”:æœ€å¤§æ—¶é—´é—´éš”:è­¦å‘Šæ—¶é—´:ä¸æ´»åŠ¨æ—¶é—´:å¤±æ•ˆæ—¶é—´:ä¿ç•™\n\n\n/etc/group\nç»„(group)çš„é…ç½®æ–‡ä»¶ï¼Œè®°å½•LinuxåŒ…å«çš„ç»„çš„ä¿¡æ¯\nç»„å:å£ä»¤:ç»„æ ‡è¯†å·:ç»„å†…ç”¨æˆ·åˆ—è¡¨\n\n\n\n\n\n\n\n\nè¿è¡Œçº§åˆ«\n\n\n\nçº§åˆ«\n\n\n\n\n\n0\nå…³æœº\n\n\n1\nå•ç”¨æˆ· [ç±»ä¼¼å®‰å…¨æ¨¡å¼ï¼Œ è¿™ä¸ªæ¨¡å¼å¯ä»¥å¸®åŠ©æ‰¾å›rootå¯†ç ]\n\n\n2\nå¤šç”¨æˆ·çŠ¶æ€æ²¡æœ‰ç½‘ç»œæœåŠ¡\n\n\n3\nå¤šç”¨æˆ·çŠ¶æ€æœ‰ç½‘ç»œæœåŠ¡ [ä½¿ç”¨]\n\n\n4\nç³»ç»Ÿæœªä½¿ç”¨ä¿ç•™ç»™ç”¨æˆ·\n\n\n5\nå›¾å½¢ç•Œé¢ ã€ã€‘\n\n\n6\nç³»ç»Ÿé‡å¯\n\n\n\n\n\n\n\nå¸¸ç”¨è¿è¡Œçº§åˆ«æ˜¯3å’Œ5 ï¼Œè¦ä¿®æ”¹é»˜è®¤çš„è¿è¡Œçº§åˆ«å¯æ”¹æ–‡ä»¶\n/etc/inittabçš„id:5:initdefault:è¿™ä¸€è¡Œä¸­çš„æ•°å­—\nå‘½ä»¤ï¼šinit [012356] httpsåè®®\næ‰¾å›rootå¯†ç â­1.å¯åŠ¨æ—¶-&gt;å¿«é€Ÿè¾“å…¥enter-&gt;è¾“å…¥e-&gt; è¿›å…¥åˆ°ç¼–è¾‘ç•Œé¢-&gt; é€‰æ‹©ä¸­é—´æœ‰kernel é¡¹-&gt; è¾“å…¥e(edit)-&gt; åœ¨è¯¥è¡Œçš„æœ€åå†™å…¥ 1 [è¡¨ç¤ºä¿®æ”¹å†…æ ¸ï¼Œä¸´æ—¶ç”Ÿæ•ˆ]-&gt; è¾“å…¥enter-&gt; è¾“å…¥b [boot]-&gt; è¿›å…¥åˆ°å•ç”¨æ¨¡å¼ ã€è¿™é‡Œå°±å¯ä»¥åšè¡¥æ•‘å·¥ä½œã€‘\nå¸¸ç”¨å‘½ä»¤\n\n\n\nå¸®åŠ©å‘½ä»¤\n\n\n\n\n\nman [å‘½ä»¤æˆ–é…ç½®æ–‡ä»¶]\nè·å¾—å¸®åŠ©ä¿¡æ¯\n\n\nhelp å‘½ä»¤\nè·å¾—shellå†…ç½®å‘½ä»¤çš„å¸®åŠ©ä¿¡æ¯\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\næ–‡ä»¶ç›®å½•ç¾å‘½ä»¤\n\n\n\n\n\n\npwd\næ˜¾ç¤ºå½“å‰å·¥ä½œç›®å½•çš„ç»å¯¹è·¯å¾„\n\n\n\nls  [é€‰é¡¹]\n-a ï¼šæ˜¾ç¤ºå½“å‰ç›®å½•æ‰€æœ‰çš„æ–‡ä»¶å’Œç›®å½•ï¼ŒåŒ…æ‹¬éšè—çš„ (æ–‡ä»¶åä»¥.å¼€å¤´å°±æ˜¯éšè—)ã€‚-l  ï¼šä»¥åˆ—è¡¨çš„æ–¹å¼æ˜¾ç¤ºä¿¡æ¯-h  : æ˜¾ç¤ºæ–‡ä»¶å¤§å°æ—¶ï¼Œä»¥ k , m, Gå•ä½æ˜¾ç¤º\n\n\n\ncd [å‚æ•°]\ncd ~  æˆ–è€…cd ï¼šå›åˆ°è‡ªå·±çš„å®¶ç›®å½•cd ..  å›åˆ°å½“å‰ç›®å½•çš„ä¸Šä¸€çº§ç›®å½•\n\n\n\nmkdir æ–‡ä»¶å\nåˆ›å»ºç›®å½•-p ï¼šåˆ›å»ºå¤šçº§ç›®å½•\nmkdir -p /home/animal/tiger\n\n\nrmdir æ–‡ä»¶å\nåˆ é™¤ç©ºç›®å½•\n\n\n\ntouch æ–‡ä»¶å\nåˆ›å»ºç©ºæ–‡ä»¶\ntouch hello.txt\n\n\ncp [å‚æ•°] æºæ–‡ä»¶ ç›®çš„ç›®å½•\næ‹·è´æ–‡ä»¶åˆ°æŒ‡å®šç›®å½•-r ï¼šé€’å½’å¤åˆ¶æ•´ä¸ªæ–‡ä»¶å¤¹\n\n\n\nrm [é€‰é¡¹] æ–‡ä»¶/ç›®\n-r ï¼šé€’å½’åˆ é™¤æ•´ä¸ªæ–‡ä»¶å¤¹-f ï¼š å¼ºåˆ¶åˆ é™¤ä¸æç¤º-v:    æ˜¾ç¤ºæŒ‡ä»¤çš„è¯¦ç»†æ‰§è¡Œè¿‡ç¨‹\nrm â€“rf /home/bbb\n\n\nmv\nç§»åŠ¨æ–‡ä»¶ä¸ç›®å½•ï¼šmv /temp/movefile /targetFolder é‡å‘½å ï¼šmv oldNameFile newNameFile\n\n\n\ncat [é€‰é¡¹] è¦æŸ¥çœ‹çš„æ–‡ä»¶\næŸ¥çœ‹æ–‡ä»¶å†…å®¹-n ï¼šæ˜¾ç¤ºè¡Œå·\ncat a.txt \\\nmore\n\n\nmore\næŒ‰é¡µæ˜¾ç¤ºæ–‡æœ¬å†…å®¹\n\n\n\nless\nåˆ†å±æŸ¥çœ‹æ–‡ä»¶å†…å®¹\n\n\n\necho [é€‰é¡¹] [å†…å®¹]\nè¾“å‡ºå†…å®¹åˆ°æ§åˆ¶å° -eï¼š æ”¯æŒåæ–œçº¿æ§åˆ¶çš„å­—ç¬¦è½¬æ¢\n\n\n\nhead\næ˜¾ç¤ºæ–‡ä»¶å¤´éƒ¨å†…å®¹-n : æŸ¥çœ‹å‰å‡ è¡Œå†…å®¹\n\n\n\ntai\nè¾“å‡ºæ–‡ä»¶ä¸­å°¾éƒ¨çš„å†…å®¹-n : æŸ¥çœ‹å‰å‡ è¡Œå†…å®¹\n\n\n\n&gt;\nè¾“å‡ºé‡å®šå‘ï¼Œè¦†ç›–å†™\nls -l &gt;æ–‡ä»¶\n\n\n&gt;&gt;\nåˆ—è¡¨çš„å†…å®¹è¿½åŠ åˆ°æ–‡ä»¶\nls -al &gt;&gt;æ–‡ä»¶\n\n\nln\nè½¯é“¾æ¥ï¼Œç±»ä¼¼äºwindowsé‡Œçš„å¿«æ·æ–¹å¼rm -rf houzi ï¼ˆåˆ é™¤è½¯è¿æ¥ï¼‰\nln -s [åŸæ–‡ä»¶æˆ–ç›®å½•] [è½¯é“¾æ¥å]\n\n\nhistory\næŸ¥çœ‹å·²ç»æ‰§è¡Œè¿‡å†å²å‘½ä»¤\n\n\n\n\n\n\n\n\nmore æ“ä½œ\nåŠŸèƒ½è¯´æ˜\n\n\n\n\nç©ºç™½é”® (space)\nä»£è¡¨å‘ä¸‹ç¿»ä¸€é¡µï¼›\n\n\nEnter\nä»£è¡¨å‘ä¸‹ç¿»ã€ä¸€è¡Œã€ï¼›\n\n\nq\nä»£è¡¨ç«‹åˆ»ç¦»å¼€ more ï¼Œä¸å†æ˜¾ç¤ºè¯¥æ–‡ä»¶å†…å®¹ã€‚\n\n\nCtrl+F\nå‘ä¸‹æ»šåŠ¨ä¸€å±\n\n\nCtrl+B\nè¿”å›ä¸Šä¸€å±\n\n\n=\nè¾“å‡ºå½“å‰è¡Œçš„è¡Œå·\n\n\n:f\nè¾“å‡ºæ–‡ä»¶åå’Œå½“å‰è¡Œçš„è¡Œå·\n\n\n\n\n\n\n\n\nless  æ“ä½œ\nåŠŸèƒ½è¯´æ˜\n\n\n\n\nç©ºç™½é”®\nå‘ä¸‹ç¿»åŠ¨ä¸€é¡µï¼›\n\n\n[pagedown]\nå‘ä¸‹ç¿»åŠ¨ä¸€é¡µ\n\n\n[pageup]\nå‘ä¸Šç¿»åŠ¨ä¸€é¡µï¼›\n\n\n/å­—ä¸²\nå‘ä¸‹æœå¯»ã€å­—ä¸²ã€çš„åŠŸèƒ½ï¼›nï¼šå‘ä¸‹æŸ¥æ‰¾ï¼›Nï¼šå‘ä¸ŠæŸ¥æ‰¾ï¼›\n\n\n?å­—ä¸²\nå‘ä¸Šæœå¯»ã€å­—ä¸²ã€çš„åŠŸèƒ½ï¼›nï¼šå‘ä¸ŠæŸ¥æ‰¾ï¼›Nï¼šå‘ä¸‹æŸ¥æ‰¾ï¼›\n\n\nq\nç¦»å¼€ less è¿™ä¸ªç¨‹åºï¼›\n\n\n\n\n\n\n\n\necho  æ§åˆ¶å­—ç¬¦\nä½œç”¨\n\n\n\n\n\\\nè¾“å‡º\\æœ¬èº«\n\n\n\\n\næ¢è¡Œç¬¦\n\n\n\\t\nåˆ¶è¡¨ç¬¦ï¼Œä¹Ÿå°±æ˜¯Tabé”®\n\n\n\n\næ—¶é—´æ—¥æœŸç±»å‘½ä»¤1) date ï¼ˆåŠŸèƒ½æè¿°ï¼šæ˜¾ç¤ºå½“å‰æ—¶é—´ï¼‰2) date +%Y ï¼ˆåŠŸèƒ½æè¿°ï¼šæ˜¾ç¤ºå½“å‰å¹´ä»½ï¼‰3) date +%m ï¼ˆåŠŸèƒ½æè¿°ï¼šæ˜¾ç¤ºå½“å‰æœˆä»½ï¼‰4) date +%d ï¼ˆåŠŸèƒ½æè¿°ï¼šæ˜¾ç¤ºå½“å‰æ˜¯å“ªä¸€å¤©ï¼‰5) date â€œ+%Y-%m-%d %H:%M:%Sâ€ï¼ˆåŠŸèƒ½æè¿°ï¼šæ˜¾ç¤ºå¹´æœˆæ—¥æ—¶åˆ†ç§’ï¼‰6) date -s å­—ç¬¦ä¸²æ—¶é—´ ï¼ˆè®¾å®šç³»ç»Ÿæ—¶é—´ï¼‰7) cal æŸ¥çœ‹æ—¥å†\næƒé™ç±»å‘½ä»¤-rwxrw-râ€” 1 root police 1213 Feb 2 09:39 abc.txt\n0-9ä½è¯´æ˜\n\nç¬¬0ä½ç¡®å®šæ–‡ä»¶ç±»å‹(è¯´æ˜: -:æ™®é€šæ–‡ä»¶, d:ç›®å½•ï¼Œl : è¿æ¥æ–‡ä»¶, c: å­—ç¬¦è®¾å¤‡æ–‡ä»¶[é”®ç›˜,é¼ æ ‡] b: å—è®¾å¤‡æ–‡ä»¶[ç¡¬ç›˜] )\nç¬¬1-3ä½ç¡®å®šæ‰€æœ‰è€…ï¼ˆè¯¥æ–‡ä»¶çš„æ‰€æœ‰è€…ï¼‰æ‹¥æœ‰è¯¥æ–‡ä»¶çš„æƒé™ã€‚R: è¯» ï¼Œ w : å†™æƒé™ x: æ‰§è¡Œæƒé™ \nç¬¬4-6ä½ç¡®å®šæ‰€å±ç»„ï¼ˆåŒç”¨æˆ·ç»„çš„ï¼‰æ‹¥æœ‰è¯¥æ–‡ä»¶çš„æƒé™\nç¬¬7-9ä½ç¡®å®šå…¶ä»–ç”¨æˆ·æ‹¥æœ‰è¯¥æ–‡ä»¶çš„æƒé™\n1: å¦‚æœæ˜¯æ–‡ä»¶ï¼Œè¡¨ç¤ºç¡¬é“¾æ¥çš„æ•°ç›®ï¼Œ å¦‚æœæ˜¯ç›®å½•ï¼Œåˆ™è¡¨ç¤ºæœ‰å¤šå°‘ä¸ªå­ç›®å½•\n1213ï¼š è¡¨ç¤ºæ–‡ä»¶å¤§å°ï¼Œå¦‚æœæ˜¯ç›®å½•ï¼Œåˆ™ç»Ÿä¸€ä¸º 4096\n\nrwxä½œç”¨åˆ°æ–‡ä»¶â­\n1) [ r ]ä»£è¡¨å¯è¯»(read): å¯ä»¥è¯»å–,æŸ¥çœ‹2) [ w ]ä»£è¡¨å¯å†™(write): å¯ä»¥ä¿®æ”¹,ä½†æ˜¯ä¸ä»£è¡¨å¯ä»¥åˆ é™¤è¯¥æ–‡ä»¶,åˆ é™¤ä¸€ä¸ªæ–‡ä»¶çš„å‰ææ¡ä»¶æ˜¯å¯¹è¯¥æ–‡ä»¶æ‰€åœ¨çš„ç›®å½•æœ‰å†™æƒé™ï¼Œæ‰èƒ½åˆ é™¤è¯¥æ–‡ä»¶.3) [ x ]ä»£è¡¨å¯æ‰§è¡Œ(execute):å¯ä»¥è¢«æ‰§è¡Œ  \nrwxä½œç”¨åˆ°ç›®å½•â­\n1) [ r ]ä»£è¡¨å¯è¯»(read): å¯ä»¥è¯»å–ï¼ŒlsæŸ¥çœ‹ç›®å½•å†…å®¹2) [ w ]ä»£è¡¨å¯å†™(write): å¯ä»¥ä¿®æ”¹,ç›®å½•å†…åˆ›å»º+åˆ é™¤+é‡å‘½åç›®å½•3) [ x ]ä»£è¡¨å¯æ‰§è¡Œ(execute):å¯ä»¥è¿›å…¥è¯¥ç›®å½•  \nå˜æ›´æƒé™ç¬¬ä¸€ç§æ–¹å¼ï¼š+ ã€-ã€= u:æ‰€æœ‰è€…  g:æ‰€æœ‰ç»„  o:å…¶ä»–äºº  a:æ‰€æœ‰äºº(uã€gã€oçš„æ€»å’Œ)\n  1) chmod   u=rwx,g=rx,o=x   æ–‡ä»¶ã€ç›®å½• ã€è¡¨ç¤ºï¼šç»™æ‰€æœ‰è€…rwx, ç»™æ‰€åœ¨ç»„çš„ç”¨æˆ· rx, ç»™å…¶ä»–äºº xã€‘  2) chmod   o+w    æ–‡ä»¶ã€ç›®å½• ã€è¡¨ç¤ºï¼šç»™å…¶å®ƒç”¨æˆ·å¢åŠ w çš„æƒé™ã€‘  3) chmod   a-x    æ–‡ä»¶ã€ç›®å½•    ã€è¡¨ç¤ºï¼šç»™æ‰€æœ‰ç”¨æˆ· å»æ‰ xæƒé™ã€‘\nç¬¬äºŒç§æ–¹å¼ï¼šé€šè¿‡æ•°å­—å˜æ›´æƒé™ r=4 w=2 x=1   rwx=4+2+1=7 chmod u=rwx,g=rx,o=x    æ–‡ä»¶ã€ç›®å½•ç›¸å½“äº chmod   751  æ–‡ä»¶ã€ç›®å½•\nä¿®æ”¹æ–‡ä»¶æ‰€æœ‰è€…chown  newowner  file  æ”¹å˜æ–‡ä»¶çš„æ‰€æœ‰è€…chown  newowner:newgroup  file  æ”¹å˜ç”¨æˆ·çš„æ‰€æœ‰è€…å’Œæ‰€æœ‰ç»„-R   å¦‚æœæ˜¯ç›®å½• åˆ™ä½¿å…¶ä¸‹æ‰€æœ‰å­æ–‡ä»¶æˆ–ç›®å½•é€’å½’ç”Ÿæ•ˆ\nä¿®æ”¹æ–‡ä»¶æ‰€åœ¨ç»„chgrp newgroup file \næœç´¢æŸ¥æ‰¾ç±»å‘½ä»¤\nfindï¼šfindæŒ‡ä»¤å°†ä»æŒ‡å®šç›®å½•å‘ä¸‹é€’å½’åœ°éå†å…¶å„ä¸ªå­ç›®å½•ï¼Œå°†æ»¡è¶³æ¡ä»¶çš„æ–‡ä»¶æˆ–è€…ç›®å½•æ˜¾ç¤ºåœ¨ç»ˆç«¯ã€‚\n\n\n\n\né€‰é¡¹\nåŠŸèƒ½\n\n\n\n\n-name&lt;æŸ¥è¯¢æ–¹å¼&gt;\næŒ‰ç…§æŒ‡å®šçš„æ–‡ä»¶åæŸ¥æ‰¾æ¨¡å¼æŸ¥æ‰¾æ–‡ä»¶ , å¯ä»¥ä½¿ç”¨é€šé…ç¬¦ * ï¼Ÿ\n\n\n-user&lt;ç”¨æˆ·å&gt;\næŸ¥æ‰¾å±äºæŒ‡å®šç”¨æˆ·åæ‰€æœ‰æ–‡ä»¶\n\n\n-size&lt;æ–‡ä»¶å¤§å°&gt;\næŒ‰ç…§æŒ‡å®šçš„æ–‡ä»¶å¤§å°æŸ¥æ‰¾æ–‡ä»¶ã€‚\n\n\n\n\nfind /home  -name hello.txt \nlocateï¼šå¿«é€Ÿå®šä½æ–‡ä»¶è·¯å¾„ã€‚locate hello.txt\ngrepï¼šè¿‡æ»¤æŸ¥æ‰¾ \n\n\n\n\né€‰é¡¹\nåŠŸèƒ½\n\n\n\n\n-n\næ˜¾ç¤ºåŒ¹é…è¡ŒåŠè¡Œå·ã€‚\n\n\n-i\nå¿½ç•¥å­—æ¯å¤§å°å†™\n\n\n\n\ngrep â€“n  if /etc/profile [åœ¨/etc/profile ä¸­æŸ¥æ‰¾ if ,å¹¶æ˜¾ç¤ºè¡Œï¼ŒåŒºåˆ«å¤§å°å†™]\n\n\n\n\nå‹ç¼©å’Œè§£å‹ç±»å‘½ä»¤\n\n\n\n\n\ngzip æ–‡ä»¶\nå‹ç¼©æ–‡ä»¶ï¼Œåªèƒ½å°†æ–‡ä»¶å‹ç¼©ä¸º*.gzæ–‡ä»¶\n\n\ngunzip æ–‡ä»¶.gz\nè§£å‹ç¼©æ–‡ä»¶å‘½ä»¤\n\n\nzip   [é€‰é¡¹] XXX.zip\nå‹ç¼©æ–‡ä»¶å’Œç›®å½•-rï¼šé€’å½’å‹ç¼©ï¼Œå³å‹ç¼©ç›®å½•\n\n\nunzip [é€‰é¡¹] XXX.zip\nè§£å‹ç¼©æ–‡ä»¶-d&lt;ç›®å½•&gt; ï¼šæŒ‡å®šè§£å‹åæ–‡ä»¶çš„å­˜æ”¾ç›®å½•\n\n\ntar\næ‰“åŒ…æŒ‡ä»¤\n\n\n\n\n\n\n\n\ntar é€‰é¡¹\nåŠŸèƒ½\n\n\n\n\n-c\näº§ç”Ÿ.taræ‰“åŒ…æ–‡ä»¶\n\n\n-v\næ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯\n\n\n-f\næŒ‡å®šå‹ç¼©åçš„æ–‡ä»¶å\n\n\n-z\næ‰“åŒ…åŒæ—¶å‹ç¼©\n\n\n-x\nè§£åŒ….taræ–‡ä»¶\n\n\n\n\n# å‹ç¼©å¤šä¸ªæ–‡ä»¶, å°†/homne/a1.txt å’Œ/homne/a2.txt å‹ç¼©æˆ a.tar.gz\ntar -zcvf a.tar.gz al.txt a2.txt [æ³¨æ„ï¼Œ è·¯å¾„è¦å†™æ¸…æ¥š]\n# å°†/home çš„æ–‡ä»¶å¤¹å‹ç¼©æˆmyhome.tar.gz\ntar -zcvf myhome.tar:gz /home/ [æ³¨æ„ï¼Œ è·¯å¾„å†™æ¸…æ¥š]\n# å°† a.tar.gz è§£å‹åˆ°å½“å‰ç›®å½•\ntar -zxvf a.tar.gz\n# å°†myhome.tar:gzè§£å‹åˆ°/opt/tmp2 ç›®å½•ä¸‹[ -C ]\ntar -zxvf myhome.tar.gz _C /opt/tmp2 [æ³¨ æ„; /opt/tmp2äº‹å…ˆéœ€è¦åˆ›å»ºå¥½]\nç£ç›˜åˆ†åŒºç±»\n\n\n\nç£ç›˜åˆ†åŒºç±»\n\n\n\n\n\ndf é€‰é¡¹\nåˆ—å‡ºæ–‡ä»¶ç³»ç»Ÿçš„æ•´ä½“ç£ç›˜ä½¿ç”¨é‡ï¼Œæ£€æŸ¥æ–‡ä»¶ç³»ç»Ÿçš„ç£ç›˜ç©ºé—´å ç”¨æƒ…å†µ  -h    ä»¥äººä»¬è¾ƒæ˜“é˜…è¯»çš„ GBytes, MBytes, KBytes ç­‰æ ¼å¼è‡ªè¡Œæ˜¾ç¤ºï¼›\n\n\nfdisk -l\næŸ¥çœ‹ç£ç›˜åˆ†åŒºè¯¦æƒ…-l æ˜¾ç¤ºæ‰€æœ‰ç¡¬ç›˜çš„åˆ†åŒºåˆ—è¡¨\n\n\nmount å‚æ•°\næŒ‚è½½è®¾å¤‡\n\n\numount è®¾å¤‡æ–‡ä»¶åæˆ–æŒ‚è½½ç‚¹\nå¸è½½è®¾å¤‡\n\n\n\n\n\n\n\n\nmount   å‚æ•°\nåŠŸèƒ½\n\n\n\n\n-t vfstype\næŒ‡å®šæ–‡ä»¶ç³»ç»Ÿçš„ç±»å‹ï¼Œé€šå¸¸ä¸å¿…æŒ‡å®šã€‚mount ä¼šè‡ªåŠ¨é€‰æ‹©æ­£ç¡®çš„ç±»å‹ã€‚å¸¸ç”¨ç±»å‹æœ‰ï¼š  å…‰ç›˜æˆ–å…‰ç›˜é•œåƒï¼šiso9660  DOS fat16æ–‡ä»¶ç³»ç»Ÿï¼šmsdos  Windows 9x fat32æ–‡ä»¶ç³»ç»Ÿï¼švfat  Windows NT ntfsæ–‡ä»¶ç³»ç»Ÿï¼šntfs  Mount Windowsæ–‡ä»¶ç½‘ç»œå…±äº«ï¼šsmbfs  UNIX(LINUX) æ–‡ä»¶ç½‘ç»œå…±äº«ï¼šnfs\n\n\n-o options\nä¸»è¦ç”¨æ¥æè¿°è®¾å¤‡æˆ–æ¡£æ¡ˆçš„æŒ‚æ¥æ–¹å¼ã€‚å¸¸ç”¨çš„å‚æ•°æœ‰ï¼š  loopï¼šç”¨æ¥æŠŠä¸€ä¸ªæ–‡ä»¶å½“æˆç¡¬ç›˜åˆ†åŒºæŒ‚æ¥ä¸Šç³»ç»Ÿ  roï¼šé‡‡ç”¨åªè¯»æ–¹å¼æŒ‚æ¥è®¾å¤‡  rwï¼šé‡‡ç”¨è¯»å†™æ–¹å¼æŒ‚æ¥è®¾å¤‡  ã€€ iocharsetï¼šæŒ‡å®šè®¿é—®æ–‡ä»¶ç³»ç»Ÿæ‰€ç”¨å­—ç¬¦é›†\n\n\ndevice\nè¦æŒ‚æ¥(mount)çš„è®¾å¤‡\n\n\ndir\nè®¾å¤‡åœ¨ç³»ç»Ÿä¸Šçš„æŒ‚æ¥ç‚¹(mount point)\n\n\n\n\nè¿›ç¨‹çº¿ç¨‹ç±»å‘½ä»¤\n\n\n\nè¿›ç¨‹çº¿ç¨‹ç±»\n\n\n\n\n\nps\næŸ¥çœ‹å½“å‰ç³»ç»Ÿè¿›ç¨‹çŠ¶æ€\n\n\nps aux  \\\ngrep xxx\næŸ¥çœ‹ç³»ç»Ÿä¸­æ‰€æœ‰è¿›ç¨‹\n\n\nps -ef \\\ngrep xxx\nå¯ä»¥æŸ¥çœ‹å­çˆ¶è¿›ç¨‹ä¹‹é—´çš„å…³ç³»\n\n\n\n\n\n\n\n\n\n\n\nps  é€‰é¡¹\nåŠŸèƒ½\n\n\n\n\n-a\né€‰æ‹©æ‰€æœ‰è¿›ç¨‹\n\n\n-u\næ˜¾ç¤ºæ‰€æœ‰ç”¨æˆ·çš„æ‰€æœ‰è¿›ç¨‹\n\n\n-x\næ˜¾ç¤ºæ²¡æœ‰ç»ˆç«¯çš„è¿›ç¨‹\n\n\n\n\nåŠŸèƒ½è¯´æ˜ï¼ˆ1ï¼‰ps auxæ˜¾ç¤ºä¿¡æ¯è¯´æ˜USERï¼šè¯¥è¿›ç¨‹æ˜¯ç”±å“ªä¸ªç”¨æˆ·äº§ç”Ÿçš„PIDï¼šè¿›ç¨‹çš„IDå·%CPUï¼šè¯¥è¿›ç¨‹å ç”¨CPUèµ„æºçš„ç™¾åˆ†æ¯”ï¼Œå ç”¨è¶Šé«˜ï¼Œè¿›ç¨‹è¶Šè€—è´¹èµ„æºï¼›%MEMï¼šè¯¥è¿›ç¨‹å ç”¨ç‰©ç†å†…å­˜çš„ç™¾åˆ†æ¯”ï¼Œå ç”¨è¶Šé«˜ï¼Œè¿›ç¨‹è¶Šè€—è´¹èµ„æºï¼›VSZï¼šè¯¥è¿›ç¨‹å ç”¨è™šæ‹Ÿå†…å­˜çš„å¤§å°ï¼Œå•ä½KBï¼›RSSï¼šè¯¥è¿›ç¨‹å ç”¨å®é™…ç‰©ç†å†…å­˜çš„å¤§å°ï¼Œå•ä½KBï¼›TTYï¼šè¯¥è¿›ç¨‹æ˜¯åœ¨å“ªä¸ªç»ˆç«¯ä¸­è¿è¡Œçš„ã€‚å…¶ä¸­tty1-tty7ä»£è¡¨æœ¬åœ°æ§åˆ¶å°ç»ˆç«¯ï¼Œtty1-tty6æ˜¯æœ¬åœ°çš„å­—ç¬¦ç•Œé¢ç»ˆç«¯ï¼Œtty7æ˜¯å›¾å½¢ç»ˆç«¯ã€‚pts/0-255ä»£è¡¨è™šæ‹Ÿç»ˆç«¯ã€‚STATï¼šè¿›ç¨‹çŠ¶æ€ã€‚å¸¸è§çš„çŠ¶æ€æœ‰ï¼šRï¼šè¿è¡Œã€Sï¼šç¡çœ ã€Tï¼šåœæ­¢çŠ¶æ€ã€sï¼šåŒ…å«å­è¿›ç¨‹ã€+ï¼šä½äºåå°STARTï¼šè¯¥è¿›ç¨‹çš„å¯åŠ¨æ—¶é—´TIMEï¼šè¯¥è¿›ç¨‹å ç”¨CPUçš„è¿ç®—æ—¶é—´ï¼Œæ³¨æ„ä¸æ˜¯ç³»ç»Ÿæ—¶é—´COMMANDï¼šäº§ç”Ÿæ­¤è¿›ç¨‹çš„å‘½ä»¤åï¼ˆ2ï¼‰ps -efæ˜¾ç¤ºä¿¡æ¯è¯´æ˜UIDï¼šç”¨æˆ·IDPIDï¼šè¿›ç¨‹IDPPIDï¼šçˆ¶è¿›ç¨‹IDCï¼šCPUç”¨äºè®¡ç®—æ‰§è¡Œä¼˜å…ˆçº§çš„å› å­ã€‚æ•°å€¼è¶Šå¤§ï¼Œè¡¨æ˜è¿›ç¨‹æ˜¯CPUå¯†é›†å‹è¿ç®—ï¼Œæ‰§è¡Œä¼˜å…ˆçº§ä¼šé™ä½ï¼›æ•°å€¼è¶Šå°ï¼Œè¡¨æ˜è¿›ç¨‹æ˜¯I/Oå¯†é›†å‹è¿ç®—ï¼Œæ‰§è¡Œä¼˜å…ˆçº§ä¼šæé«˜STIMEï¼šè¿›ç¨‹å¯åŠ¨çš„æ—¶é—´TTYï¼šå®Œæ•´çš„ç»ˆç«¯åç§°TIMEï¼šCPUæ—¶é—´CMDï¼šå¯åŠ¨è¿›ç¨‹æ‰€ç”¨çš„å‘½ä»¤å’Œå‚æ•°\n\n\n\n\nkill ç»ˆæ­¢è¿›ç¨‹\n\n\n\n\n\nkill [é€‰é¡¹] è¿›ç¨‹å·\né€šè¿‡è¿›ç¨‹å·æ€æ­»è¿›ç¨‹-9 è¡¨ç¤ºå¼ºè¿«è¿›ç¨‹ç«‹å³åœæ­¢\n\n\nkillall è¿›ç¨‹åç§°\né€šè¿‡è¿›ç¨‹åç§°æ€æ­»è¿›ç¨‹ï¼Œä¹Ÿæ”¯æŒé€šé…ç¬¦ï¼Œè¿™åœ¨ç³»ç»Ÿå› è´Ÿè½½è¿‡å¤§è€Œå˜å¾—å¾ˆæ…¢æ—¶å¾ˆæœ‰ç”¨\n\n\n\n\n\n\n\n\npstree æŸ¥çœ‹è¿›ç¨‹æ ‘\n\n\n\n\n\npstree [é€‰é¡¹]\n\n\n\n-p\næ˜¾ç¤ºè¿›ç¨‹çš„PID\n\n\n-u\næ˜¾ç¤ºè¿›ç¨‹çš„æ‰€å±ç”¨æˆ·\n\n\n\n\n\n\n\n\ntop æŸ¥çœ‹ç³»ç»Ÿå¥åº·çŠ¶æ€\n\n\n\n\n\n\ntop [é€‰é¡¹]\n\n\n\n\n\n-d ç§’æ•°\næŒ‡å®štopå‘½ä»¤æ¯éš”å‡ ç§’æ›´æ–°ã€‚é»˜è®¤æ˜¯3ç§’åœ¨topå‘½ä»¤çš„äº¤äº’æ¨¡å¼å½“ä¸­å¯ä»¥æ‰§è¡Œçš„å‘½ä»¤ï¼š\n\n\n\n-i\nä½¿topä¸æ˜¾ç¤ºä»»ä½•é—²ç½®æˆ–è€…åƒµæ­»è¿›ç¨‹ã€‚\n\n\n\n-p\né€šè¿‡æŒ‡å®šç›‘æ§è¿›ç¨‹IDæ¥ä»…ä»…ç›‘æ§æŸä¸ªè¿›ç¨‹çš„çŠ¶æ€ã€‚\n\n\n\n\n\n\n\n\ntop æ“ä½œ\nåŠŸèƒ½\n\n\n\n\nP\nä»¥CPUä½¿ç”¨ç‡æ’åºï¼Œé»˜è®¤å°±æ˜¯æ­¤é¡¹\n\n\nM\nä»¥å†…å­˜çš„ä½¿ç”¨ç‡æ’åº\n\n\nN\nä»¥PIDæ’åº\n\n\nq\né€€å‡ºtop\n\n\n\n\næŸ¥è¯¢ç»“æœå­—æ®µè§£é‡Š\nç¬¬ä¸€è¡Œä¿¡æ¯ä¸ºä»»åŠ¡é˜Ÿåˆ—ä¿¡æ¯\n\n\n\n\nå†…å®¹\nè¯´æ˜\n\n\n\n\n12:26:46\nç³»ç»Ÿå½“å‰æ—¶é—´\n\n\nup 1 day, 13:32\nç³»ç»Ÿçš„è¿è¡Œæ—¶é—´ï¼Œæœ¬æœºå·²ç»è¿è¡Œ1å¤©  13å°æ—¶32åˆ†é’Ÿ\n\n\n2 users\nå½“å‰ç™»å½•äº†ä¸¤ä¸ªç”¨æˆ·\n\n\nload average:   0.00, 0.00, 0.00\nç³»ç»Ÿåœ¨ä¹‹å‰1åˆ†é’Ÿï¼Œ5åˆ†é’Ÿï¼Œ15åˆ†é’Ÿçš„å¹³å‡è´Ÿè½½ã€‚ä¸€èˆ¬è®¤ä¸ºå°äº1æ—¶ï¼Œè´Ÿè½½è¾ƒå°ã€‚å¦‚æœå¤§äº1ï¼Œç³»ç»Ÿå·²ç»è¶…å‡ºè´Ÿè·ã€‚\n\n\n\n\nç¬¬äºŒè¡Œä¸ºè¿›ç¨‹ä¿¡æ¯\n\n\n\n\nTasks: 95 total\nç³»ç»Ÿä¸­çš„è¿›ç¨‹æ€»æ•°\n\n\n\n\n1 running\næ­£åœ¨è¿è¡Œçš„è¿›ç¨‹æ•°\n\n\n94 sleeping\nç¡çœ çš„è¿›ç¨‹\n\n\n0 stopped\næ­£åœ¨åœæ­¢çš„è¿›ç¨‹\n\n\n0 zombie\nåƒµå°¸è¿›ç¨‹ã€‚å¦‚æœä¸æ˜¯0ï¼Œéœ€è¦æ‰‹å·¥æ£€æŸ¥åƒµå°¸è¿›ç¨‹\n\n\n\n\nç¬¬ä¸‰è¡Œä¸ºCPUä¿¡æ¯\n\n\n\n\nCpu(s): 0.1%us\nç”¨æˆ·æ¨¡å¼å ç”¨çš„CPUç™¾åˆ†æ¯”\n\n\n\n\n0.1%sy\nç³»ç»Ÿæ¨¡å¼å ç”¨çš„CPUç™¾åˆ†æ¯”\n\n\n0.0%ni\næ”¹å˜è¿‡ä¼˜å…ˆçº§çš„ç”¨æˆ·è¿›ç¨‹å ç”¨çš„CPUç™¾åˆ†æ¯”\n\n\n99.7%id\nç©ºé—²CPUçš„CPUç™¾åˆ†æ¯”\n\n\n0.1%wa\nç­‰å¾…è¾“å…¥/è¾“å‡ºçš„è¿›ç¨‹çš„å ç”¨CPUç™¾åˆ†æ¯”\n\n\n0.0%hi\nç¡¬ä¸­æ–­è¯·æ±‚æœåŠ¡å ç”¨çš„CPUç™¾åˆ†æ¯”\n\n\n0.1%si\nè½¯ä¸­æ–­è¯·æ±‚æœåŠ¡å ç”¨çš„CPUç™¾åˆ†æ¯”\n\n\n0.0%st\nstï¼ˆSteal timeï¼‰è™šæ‹Ÿæ—¶é—´ç™¾åˆ†æ¯”ã€‚å°±æ˜¯å½“æœ‰è™šæ‹Ÿæœºæ—¶ï¼Œè™šæ‹ŸCPUç­‰å¾…å®é™…CPUçš„æ—¶é—´ç™¾åˆ†æ¯”ã€‚\n\n\n\n\nç¬¬å››è¡Œä¸ºç‰©ç†å†…å­˜ä¿¡æ¯\n\n\n\n\nMem:  625344k total\nç‰©ç†å†…å­˜çš„æ€»é‡ï¼Œå•ä½KB\n\n\n\n\n571504k used\nå·²ç»ä½¿ç”¨çš„ç‰©ç†å†…å­˜æ•°é‡\n\n\n53840k free\nç©ºé—²çš„ç‰©ç†å†…å­˜æ•°é‡ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯è™šæ‹Ÿæœºï¼Œæ€»å…±åªåˆ†é…äº†628MBå†…å­˜ï¼Œæ‰€ä»¥åªæœ‰53MBçš„ç©ºé—²å†…å­˜äº†\n\n\n65800k buffers\nä½œä¸ºç¼“å†²çš„å†…å­˜æ•°é‡\n\n\n\n\nç¬¬äº”è¡Œä¸ºäº¤æ¢åˆ†åŒºï¼ˆswapï¼‰ä¿¡æ¯\n\n\n\n\nSwap:  524280k total\näº¤æ¢åˆ†åŒºï¼ˆè™šæ‹Ÿå†…å­˜ï¼‰çš„æ€»å¤§å°\n\n\n\n\n0k used\nå·²ç»ä½¿ç”¨çš„äº¤äº’åˆ†åŒºçš„å¤§å°\n\n\n524280k free\nç©ºé—²äº¤æ¢åˆ†åŒºçš„å¤§å°\n\n\n409280k cached\nä½œä¸ºç¼“å­˜çš„äº¤äº’åˆ†åŒºçš„å¤§å°\n\n\n\n\n\n\n\n\nnetstat\nç¤ºç½‘ç»œç»Ÿè®¡ä¿¡æ¯å’Œç«¯å£å ç”¨æƒ…å†µ\n\n\n\n\n\nnetstat -anp \\\ngrep è¿›ç¨‹å·\næŸ¥çœ‹è¯¥è¿›ç¨‹ç½‘ç»œä¿¡æ¯\n\n\n\nnetstat -nlp \\\ngrep ç«¯å£å·\næŸ¥çœ‹ç½‘ç»œç«¯å£å·å ç”¨æƒ…å†µ\n\n\n\n\n-n\næ‹’ç»æ˜¾ç¤ºåˆ«åï¼Œèƒ½æ˜¾ç¤ºæ•°å­—çš„å…¨éƒ¨è½¬åŒ–æˆæ•°å­—\n\n\n\n-l\nä»…åˆ—å‡ºæœ‰åœ¨listenï¼ˆç›‘å¬ï¼‰çš„æœåŠ¡çŠ¶æ€\n\n\n\n\ncrondç³»ç»Ÿå®šæ—¶ä»»åŠ¡\n\n\n\ncrond æœåŠ¡ç®¡ç†\n\n\n\n\n\n\nservice crond restart\né‡æ–°å¯åŠ¨crondæœåŠ¡\n\n\n\ncrontab [é€‰é¡¹]\n-e\nç¼–è¾‘crontabå®šæ—¶ä»»åŠ¡\n\n\n\n-l\næŸ¥è¯¢crontabä»»åŠ¡\n\n\n\n-r\nåˆ é™¤å½“å‰ç”¨æˆ·æ‰€æœ‰çš„crontabä»»åŠ¡\n\n\n\n\nï¼ˆ1ï¼‰è¿›å…¥crontabç¼–è¾‘ç•Œé¢ã€‚ä¼šæ‰“å¼€vimç¼–è¾‘ä½ çš„å·¥ä½œã€‚\n*     æ‰§è¡Œçš„ä»»åŠ¡\n\n\n\n\né¡¹ç›®\nå«ä¹‰\nèŒƒå›´\n\n\n\n\nç¬¬ä¸€ä¸ªâ€œ*â€\nä¸€å°æ—¶å½“ä¸­çš„ç¬¬å‡ åˆ†é’Ÿ\n0-59\n\n\nç¬¬äºŒä¸ªâ€œ*â€\nä¸€å¤©å½“ä¸­çš„ç¬¬å‡ å°æ—¶\n0-23\n\n\nç¬¬ä¸‰ä¸ªâ€œ*â€\nä¸€ä¸ªæœˆå½“ä¸­çš„ç¬¬å‡ å¤©\n1-31\n\n\nç¬¬å››ä¸ªâ€œ*â€\nä¸€å¹´å½“ä¸­çš„ç¬¬å‡ æœˆ\n1-12\n\n\nç¬¬äº”ä¸ªâ€œ*â€\nä¸€å‘¨å½“ä¸­çš„æ˜ŸæœŸå‡ \n0-7ï¼ˆ0å’Œ7éƒ½ä»£è¡¨æ˜ŸæœŸæ—¥ï¼‰\n\n\n\n\nï¼ˆ2ï¼‰ç‰¹æ®Šç¬¦å·\n\n\n\n\nç‰¹æ®Šç¬¦å·\nå«ä¹‰\n\n\n\n\n*\nä»£è¡¨ä»»ä½•æ—¶é—´ã€‚æ¯”å¦‚ç¬¬ä¸€ä¸ªâ€œ*â€å°±ä»£è¡¨ä¸€å°æ—¶ä¸­æ¯åˆ†é’Ÿéƒ½æ‰§è¡Œä¸€æ¬¡çš„æ„æ€ã€‚\n\n\nï¼Œ\nä»£è¡¨ä¸è¿ç»­çš„æ—¶é—´ã€‚æ¯”å¦‚â€œ0 8,12,16   * å‘½ä»¤â€ï¼Œå°±ä»£è¡¨åœ¨æ¯å¤©çš„8ç‚¹0åˆ†ï¼Œ12ç‚¹0åˆ†ï¼Œ16ç‚¹0åˆ†éƒ½æ‰§è¡Œä¸€æ¬¡å‘½ä»¤\n\n\n-\nä»£è¡¨è¿ç»­çš„æ—¶é—´èŒƒå›´ã€‚æ¯”å¦‚â€œ0 5     1-6å‘½ä»¤â€ï¼Œä»£è¡¨åœ¨å‘¨ä¸€åˆ°å‘¨å…­çš„å‡Œæ™¨5ç‚¹0åˆ†æ‰§è¡Œå‘½ä»¤\n\n\n*/n\nä»£è¡¨æ¯éš”å¤šä¹…æ‰§è¡Œä¸€æ¬¡ã€‚æ¯”å¦‚â€œ/10      * å‘½ä»¤â€ï¼Œä»£è¡¨æ¯éš”10åˆ†é’Ÿå°±æ‰§è¡Œä¸€éå‘½ä»¤\n\n\n\n\nï¼ˆ3ï¼‰ç‰¹å®šæ—¶é—´æ‰§è¡Œå‘½ä»¤\n\n\n\n\næ—¶é—´\nå«ä¹‰\n\n\n\n\n45 22   * å‘½ä»¤\nåœ¨22ç‚¹45åˆ†æ‰§è¡Œå‘½ä»¤\n\n\n0 17   1 å‘½ä»¤\næ¯å‘¨1 çš„17ç‚¹0åˆ†æ‰§è¡Œå‘½ä»¤\n\n\n0 5 1,15   å‘½ä»¤\næ¯æœˆ1å·å’Œ15å·çš„å‡Œæ™¨5ç‚¹0åˆ†æ‰§è¡Œå‘½ä»¤\n\n\n40 4   1-5 å‘½ä»¤\næ¯å‘¨ä¸€åˆ°å‘¨äº”çš„å‡Œæ™¨4ç‚¹40åˆ†æ‰§è¡Œå‘½ä»¤\n\n\n/10 4    å‘½ä»¤\næ¯å¤©çš„å‡Œæ™¨4ç‚¹ï¼Œæ¯éš”10åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡å‘½ä»¤\n\n\n0 0 1,15 * 1 å‘½ä»¤\næ¯æœˆ1å·å’Œ15å·ï¼Œæ¯å‘¨1çš„0ç‚¹0åˆ†éƒ½ä¼šæ‰§è¡Œå‘½ä»¤ã€‚æ³¨æ„ï¼šæ˜ŸæœŸå‡ å’Œå‡ å·æœ€å¥½ä¸è¦åŒæ—¶å‡ºç°ï¼Œå› ä¸ºä»–ä»¬å®šä¹‰çš„éƒ½æ˜¯å¤©ã€‚éå¸¸å®¹æ˜“è®©ç®¡ç†å‘˜æ··ä¹±ã€‚\n\n\n\n\n# æ¯éš”1åˆ†é’Ÿï¼Œå‘/root/bailongma.txtæ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ª11çš„æ•°å­—\n*/1 * * * * /bin/echo â€11â€ &gt;&gt; /root/bailongma.txt\n\nè½¯ä»¶åŒ…ç®¡ç†RPMRPMï¼ˆRedHat Package Managerï¼‰ï¼ŒRedHatè½¯ä»¶åŒ…ç®¡ç†å·¥å…·ï¼Œç±»ä¼¼windowsé‡Œé¢çš„setup.exe æ˜¯Linuxè¿™ç³»åˆ—æ“ä½œç³»ç»Ÿé‡Œé¢çš„æ‰“åŒ…å®‰è£…å·¥å…·ï¼Œå®ƒè™½ç„¶æ˜¯RedHatçš„æ ‡å¿—ï¼Œä½†ç†å¿µæ˜¯é€šç”¨çš„ã€‚RPMåŒ…çš„åç§°æ ¼å¼Apache-1.3.23-11.i386.rpm\n\nâ€œapacheâ€ è½¯ä»¶åç§°\nâ€œ1.3.23-11â€è½¯ä»¶çš„ç‰ˆæœ¬å·ï¼Œä¸»ç‰ˆæœ¬å’Œæ­¤ç‰ˆæœ¬\nâ€œi386â€æ˜¯è½¯ä»¶æ‰€è¿è¡Œçš„ç¡¬ä»¶å¹³å°ï¼ŒIntel 32ä½å¾®å¤„ç†å™¨çš„ç»Ÿç§°\nâ€œrpmâ€æ–‡ä»¶æ‰©å±•åï¼Œä»£è¡¨RPMåŒ…\n\n\n\n\n\nRPMå‘½ä»¤\n\n\n\n\n\n\nrpm -qa\næŸ¥è¯¢æ‰€å®‰è£…çš„æ‰€æœ‰rpmè½¯ä»¶åŒ…\n\n\n\nrpm -e RPMè½¯ä»¶åŒ…\nå¸è½½è½¯ä»¶åŒ…\n\n\n\nrpm -e â€”nodeps è½¯ä»¶åŒ…\nå¸è½½è½¯ä»¶æ—¶ï¼Œä¸æ£€æŸ¥ä¾èµ–ã€‚\n\n\n\nrpm -ivh RPMåŒ…å…¨å\n-i\n-i=installï¼Œå®‰è£…\n\n\n\n-v\n-v=verboseï¼Œæ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯\n\n\n\n-h\n-h=hashï¼Œè¿›åº¦æ¡\n\n\n\nâ€”nodeps\nâ€”nodepsï¼Œä¸æ£€æµ‹ä¾èµ–è¿›åº¦\n\n\n\n\n# ç”±äºè½¯ä»¶åŒ…æ¯”è¾ƒå¤šï¼Œä¸€èˆ¬éƒ½ä¼šé‡‡å–è¿‡æ»¤ã€‚rpm -qa | grep rpmè½¯ä»¶åŒ…\n[root@hadoop101 Packages]# rpm -qa |grep firefox \nfirefox-45.0.1-1.el6.centos.x86_64\n# å¸è½½ firefox\n[root@hadoop101 Packages]# rpm -e firefox\n# å®‰è£… firefox\n[root@hadoop101 Packages]# rpm -ivh firefox-45.0.1-1.el6.centos.x86_64.rpm \nwarning: firefox-45.0.1-1.el6.centos.x86_64.rpm: Header V3 RSA/SHA1 Signature, key ID c105b9de: NOKEY\nPreparing...                ########################################### [100%]\n   1:firefox                ########################################### [100%]\nYUMYUMï¼ˆå…¨ç§°ä¸º Yellow dog Updater, Modifiedï¼‰æ˜¯ä¸€ä¸ªåœ¨Fedoraå’ŒRedHatä»¥åŠCentOSä¸­çš„Shellå‰ç«¯è½¯ä»¶åŒ…ç®¡ç†å™¨ã€‚åŸºäºRPMåŒ…ç®¡ç†ï¼Œèƒ½å¤Ÿä»æŒ‡å®šçš„æœåŠ¡å™¨è‡ªåŠ¨ä¸‹è½½RPMåŒ…å¹¶ä¸”å®‰è£…ï¼Œå¯ä»¥è‡ªåŠ¨å¤„ç†ä¾èµ–æ€§å…³ç³»ï¼Œå¹¶ä¸”ä¸€æ¬¡å®‰è£…æ‰€æœ‰ä¾èµ–çš„è½¯ä»¶åŒ…ï¼Œæ— é¡»ç¹çåœ°ä¸€æ¬¡æ¬¡ä¸‹è½½ã€å®‰è£…ã€‚\n\n\n\n\nYUMçš„å¸¸ç”¨å‘½ä»¤\n\n\n\n\n\n\nyum [é€‰é¡¹] [å‚æ•°]\né€‰é¡¹\nåŠŸèƒ½\n\n\n\n-y\nå¯¹æ‰€æœ‰æé—®éƒ½å›ç­”â€œyesâ€\n\n\n\nå‚æ•°\nåŠŸèƒ½\n\n\n\ninstall\nå®‰è£…rpmè½¯ä»¶åŒ…\n\n\n\nupdate\næ›´æ–°rpmè½¯ä»¶åŒ…\n\n\n\ncheck-update\næ£€æŸ¥æ˜¯å¦æœ‰å¯ç”¨çš„æ›´æ–°rpmè½¯ä»¶åŒ…\n\n\n\nremove\nåˆ é™¤æŒ‡å®šçš„rpmè½¯ä»¶åŒ…\n\n\n\nlist\næ˜¾ç¤ºè½¯ä»¶åŒ…ä¿¡æ¯\n\n\n\nclean\næ¸…ç†yumè¿‡æœŸçš„ç¼“å­˜\n\n\n\ndeplist\næ˜¾ç¤ºyumè½¯ä»¶åŒ…çš„æ‰€æœ‰ä¾èµ–å…³ç³»\n\n\n\n\n# é‡‡ç”¨yumæ–¹å¼å®‰è£…firefox\n[root@hadoop101 ~]#yum -y install firefox.x86_64\n\nä¿®æ”¹ç½‘ç»œYUMæº\n#å‰ææ¡ä»¶linuxç³»ç»Ÿå¿…é¡»å¯ä»¥è”ç½‘\n#åœ¨Linuxç¯å¢ƒä¸­è®¿é—®è¯¥ç½‘ç»œåœ°å€ï¼šhttp://mirrors.163.com/.help/centos.htmlï¼Œåœ¨ä½¿ç”¨è¯´æ˜ä¸­ç‚¹å‡»CentOS6-&gt;å†ç‚¹å‡»ä¿å­˜\n#æŸ¥çœ‹æ–‡ä»¶ä¿å­˜çš„ä½ç½®ï¼Œåœ¨æ‰“å¼€çš„ç»ˆç«¯ä¸­è¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼Œå°±å¯ä»¥æ‰¾åˆ°æ–‡ä»¶çš„ä¿å­˜ä½ç½®ã€‚\n[atguigu@hadoop101 ä¸‹è½½]$ pwd\n/home/atguigu/ä¸‹è½½\n#2.æ›¿æ¢æœ¬åœ°yumæ–‡ä»¶\n#æŠŠä¸‹è½½çš„æ–‡ä»¶ç§»åŠ¨åˆ°/etc/yum.repos.d/ç›®å½•\n[root@hadoop101 ä¸‹è½½]# mv CentOS6-Base-163.repo /etc/yum.repos.d/\t\n#è¿›å…¥åˆ°/etc/yum.repos.d/ç›®å½•\n[root@hadoop101 yum.repos.d]# pwd\n/etc/yum.repos.d\n#ç”¨CentOS6-Base-163.repoæ›¿æ¢CentOS-Base.repo\n[root@hadoop101 yum.repos.d]# mv CentOS6-Base-163.repo  CentOS-Base.repo\n#3ï¼å®‰è£…å‘½ä»¤\n[root@hadoop101 yum.repos.d]#yum clean all\n[root@hadoop101 yum.repos.d]#yum makecache\nyum makecacheå°±æ˜¯æŠŠæœåŠ¡å™¨çš„åŒ…ä¿¡æ¯ä¸‹è½½åˆ°æœ¬åœ°ç”µè„‘ç¼“å­˜èµ·æ¥\n#4ï¼æµ‹è¯•\n[root@hadoop101 yum.repos.d]#yum list | grep firefox\n[root@hadoop101 ~]#yum -y install firefox.x86_64\n\nå¸¸è§é”™è¯¯åŠè§£å†³æ–¹æ¡ˆç™¾åº¦&amp;è€ƒæ»¡åˆ†é—®é¢˜ï¼šLinuxå¸¸ç”¨å‘½ä»¤å‚è€ƒç­”æ¡ˆï¼šfindã€dfã€tarã€psã€topã€netstatç­‰ã€‚ï¼ˆå°½é‡è¯´ä¸€äº›é«˜çº§å‘½ä»¤ï¼‰10.2 ç“œå­äºŒæ‰‹è½¦é—®é¢˜ï¼šLinuxæŸ¥çœ‹å†…å­˜ã€ç£ç›˜å­˜å‚¨ã€io è¯»å†™ã€ç«¯å£å ç”¨ã€è¿›ç¨‹ç­‰å‘½ä»¤ç­”æ¡ˆï¼š1ã€æŸ¥çœ‹å†…å­˜ï¼štop2ã€æŸ¥çœ‹ç£ç›˜å­˜å‚¨æƒ…å†µï¼šdf -h3ã€æŸ¥çœ‹ç£ç›˜IOè¯»å†™æƒ…å†µï¼šiotopï¼ˆéœ€è¦å®‰è£…ä¸€ä¸‹ï¼šyum install iotopï¼‰ã€iotop -oï¼ˆç›´æ¥æŸ¥çœ‹è¾“å‡ºæ¯”è¾ƒé«˜çš„ç£ç›˜è¯»å†™ç¨‹åºï¼‰4ã€æŸ¥çœ‹ç«¯å£å ç”¨æƒ…å†µï¼šnetstat -tunlp | grep ç«¯å£å·5ã€æŸ¥çœ‹è¿›ç¨‹ï¼šps aux\n","slug":"B0-LinuxåŸºç¡€","date":"2021-11-16T08:35:41.000Z","categories_index":"å¤§æ•°æ®","tags_index":"Linux","author_index":"YFR718"},{"id":"d627fd9c1bed4de81fff7ae3f54e977a","title":"HadoopåŸºç¡€","content":"0. å¤§æ•°æ®æ¦‚å¿µå¤§æ•°æ®ï¼ˆBig Dataï¼‰ï¼šæŒ‡æ— æ³•åœ¨==ä¸€å®šæ—¶é—´èŒƒå›´å†…==ç”¨å¸¸è§„è½¯ä»¶å·¥å…·è¿›è¡Œæ•æ‰ã€ç®¡ç†å’Œå¤„ç†çš„æ•°æ®é›†åˆï¼Œæ˜¯éœ€è¦æ–°å¤„ç†æ¨¡å¼æ‰èƒ½å…·æœ‰æ›´å¼ºçš„å†³ç­–åŠ›ã€æ´å¯Ÿå‘ç°åŠ›å’Œæµç¨‹ä¼˜åŒ–èƒ½åŠ›çš„==æµ·é‡ã€é«˜å¢é•¿ç‡å’Œå¤šæ ·åŒ–==çš„==ä¿¡æ¯èµ„äº§==ã€‚å¤§æ•°æ®ä¸»è¦è§£å†³ï¼Œæµ·é‡æ•°æ®çš„é‡‡é›†ã€å­˜å‚¨å’Œåˆ†æè®¡ç®—é—®é¢˜ã€‚\nâ­å¤§æ•°æ®ç‰¹ç‚¹ï¼ˆ4Vï¼‰ ï¼š\n\nVolumeï¼ˆå¤§é‡ï¼‰\nVelocityï¼ˆé«˜é€Ÿï¼‰\nVarietyï¼ˆå¤šæ ·ï¼‰\nValueï¼ˆä½ä»·å€¼å¯†åº¦ï¼‰\n\n1. Hadoop æ¦‚è¿°\nHadoopæ˜¯ä»€ä¹ˆ1ï¼‰Hadoopæ˜¯ä¸€ä¸ªç”±ApacheåŸºé‡‘ä¼šæ‰€å¼€å‘çš„åˆ†å¸ƒå¼ç³»ç»ŸåŸºç¡€æ¶æ„ã€‚2ï¼‰ä¸»è¦è§£å†³ï¼Œæµ·é‡æ•°æ®çš„å­˜å‚¨å’Œæµ·é‡æ•°æ®çš„åˆ†æè®¡ç®—é—®é¢˜ã€‚3ï¼‰å¹¿ä¹‰ä¸Šæ¥è¯´ï¼ŒHadoopé€šå¸¸æ˜¯æŒ‡ä¸€ä¸ªæ›´å¹¿æ³›çš„æ¦‚å¿µâ€”â€”Hadoopç”Ÿæ€åœˆã€‚\n\nHadoopå‘å±•å†å²\n1ï¼‰Hadoopåˆ›å§‹äººDoug\n2ï¼‰2001å¹´å¹´åº•Luceneæˆä¸ºApacheåŸºé‡‘ä¼šçš„ä¸€ä¸ªå­é¡¹ç›®ã€‚3ï¼‰å¯¹äºæµ·é‡æ•°æ®çš„åœºæ™¯ï¼ŒLuceneæ¡†æ¶é¢å¯¹ä¸GoogleåŒæ ·çš„å›°éš¾ï¼Œå­˜å‚¨æµ·é‡æ•°æ®å›°éš¾ï¼Œæ£€ç´¢æµ·é‡é€Ÿåº¦æ…¢ã€‚4ï¼‰å­¦ä¹ å’Œæ¨¡ä»¿Googleè§£å†³è¿™äº›é—®é¢˜çš„åŠæ³• ï¼šå¾®å‹ç‰ˆNutchã€‚5ï¼‰å¯ä»¥è¯´Googleæ˜¯Hadoopçš„æ€æƒ³ä¹‹æºï¼ˆGoogleåœ¨å¤§æ•°æ®æ–¹é¢çš„ä¸‰ç¯‡è®ºæ–‡ï¼‰\nGFS â€”-&gt;HDFSã€Map-Reduce â€”-&gt;MRã€BigTable â€”-&gt;HBase6ï¼‰2003-2004å¹´ï¼ŒGoogleå…¬å¼€äº†éƒ¨åˆ†GFSå’ŒMapReduceæ€æƒ³çš„ç»†èŠ‚ï¼Œä»¥æ­¤ä¸ºåŸºç¡€Doug Cuttingç­‰äººç”¨äº†2å¹´ä¸šä½™æ—¶é—´å®ç°äº†DFSå’ŒMapReduceæœºåˆ¶ï¼Œä½¿Nutchæ€§èƒ½é£™å‡ã€‚\n7ï¼‰2005 å¹´Hadoop ä½œä¸º Luceneçš„å­é¡¹ç›® Nutchçš„ä¸€éƒ¨åˆ†æ­£å¼å¼•å…¥ApacheåŸºé‡‘ä¼šã€‚8ï¼‰2006 å¹´ 3 æœˆä»½ï¼ŒMap-Reduceå’ŒNutch Distributed File System ï¼ˆNDFSï¼‰åˆ†åˆ«è¢«çº³å…¥åˆ° Hadoop é¡¹ç›®ä¸­ï¼ŒHadoopå°±æ­¤æ­£å¼è¯ç”Ÿï¼Œæ ‡å¿—ç€å¤§æ•°æ®æ—¶ä»£æ¥ä¸´ã€‚\n9ï¼‰åå­—æ¥æºäºDoug Cuttingå„¿å­çš„ç©å…·å¤§è±¡\n\n\nHadoop ä¼˜åŠ¿ï¼ˆ4 é«˜ï¼‰\né«˜å¯é æ€§ï¼šHadoopåº•å±‚ç»´æŠ¤å¤šä¸ªæ•°æ®å‰¯æœ¬ï¼Œæ‰€ä»¥å³ä½¿HadoopæŸä¸ªè®¡ç®—å…ƒç´ æˆ–å­˜å‚¨å‡ºç°æ•…éšœï¼Œä¹Ÿä¸ä¼šå¯¼è‡´æ•°æ®çš„ä¸¢å¤±ã€‚\né«˜æ‰©å±•æ€§ï¼šåœ¨é›†ç¾¤é—´åˆ†é…ä»»åŠ¡æ•°æ®ï¼Œå¯æ–¹ä¾¿çš„æ‰©å±•æ•°ä»¥åƒè®¡çš„èŠ‚ç‚¹ã€‚\né«˜æ•ˆæ€§ï¼šåœ¨MapReduceçš„æ€æƒ³ä¸‹ï¼ŒHadoopæ˜¯å¹¶è¡Œå·¥ä½œçš„ï¼Œä»¥åŠ å¿«ä»»åŠ¡å¤„ç†é€Ÿåº¦ã€‚\né«˜å®¹é”™æ€§ï¼šèƒ½å¤Ÿè‡ªåŠ¨å°†å¤±è´¥çš„ä»»åŠ¡é‡æ–°åˆ†é…ã€‚\n\nHadoop ç»„æˆï¼ˆé¢è¯•é‡ç‚¹ï¼‰ â­â­\n\n\n\nHadoop1.x\nHadoop2.x\n\n\n\n\nMapReduceï¼ˆè®¡ç®—+èµ„æºè°ƒåº¦ï¼‰\nMapReduceï¼ˆè®¡ç®—ï¼‰\n\n\n\nYarnï¼ˆèµ„æºè°ƒåº¦ï¼‰\n\n\nHDFSï¼ˆæ•°æ®å­˜å‚¨ï¼‰\nHDFSï¼ˆæ•°æ®å­˜å‚¨ï¼‰\n\n\nCommonï¼ˆè¾…åŠ©å·¥å…·ï¼‰\nCommonï¼ˆè¾…åŠ©å·¥å…·ï¼‰\n\n\n\n\nåœ¨ Hadoop1.x æ—¶ä»£ ï¼Œ Hadoopä¸­çš„MapReduceåŒæ—¶å¤„ç†ä¸šåŠ¡é€»è¾‘è¿ç®—å’Œèµ„æºçš„è°ƒåº¦ï¼Œè€¦åˆæ€§è¾ƒå¤§ã€‚åœ¨Hadoop2.xæ—¶ä»£ï¼Œå¢åŠ äº†Yarnã€‚Yarnåªè´Ÿè´£èµ„ æº çš„ è°ƒ åº¦ ï¼Œ MapReduce åªè´Ÿè´£è¿ç®—ã€‚åœ¨Hadoop3.xåœ¨ç»„æˆä¸Šæ²¡æœ‰å˜åŒ–ã€‚\nHDFS æ¶æ„æ¦‚è¿°Hadoop Distributed File Systemï¼Œç®€ç§° HDFSï¼Œæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿã€‚ \nHDFSæ¶æ„ç»„æˆ1ï¼‰NameNodeï¼ˆnnï¼‰ï¼šå­˜å‚¨æ–‡ä»¶çš„å…ƒæ•°æ®ï¼Œå¦‚æ–‡ä»¶åï¼Œæ–‡ä»¶ç›®å½•ç»“æ„ï¼Œæ–‡ä»¶å±æ€§ï¼ˆç”Ÿæˆæ—¶é—´ã€å‰¯æœ¬æ•°ã€æ–‡ä»¶æƒé™ï¼‰ï¼Œä»¥åŠæ¯ä¸ªæ–‡ä»¶çš„å—åˆ—è¡¨å’Œå—æ‰€åœ¨çš„DataNodeç­‰ã€‚2ï¼‰DataNode(dn)ï¼šåœ¨æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿå­˜å‚¨æ–‡ä»¶å—æ•°æ®ï¼Œä»¥åŠå—æ•°æ®çš„æ ¡éªŒå’Œã€‚3ï¼‰Secondary NameNode(2nn)ï¼šæ¯éš”ä¸€æ®µæ—¶é—´å¯¹NameNodeå…ƒæ•°æ®å¤‡ä»½ã€‚\nYARN æ¶æ„æ¦‚è¿°Yet Another Resource Negotiator ç®€ç§° YARN ï¼Œå¦ä¸€ç§èµ„æºåè°ƒè€…ï¼Œæ˜¯ Hadoop çš„èµ„æºç®¡ç†å™¨ã€‚ \nYarnæ¶æ„çš„ç»„æˆ\n1ï¼‰    ResourceManagerï¼ˆRMï¼‰ï¼šæ•´ä¸ªé›†ç¾¤èµ„æºï¼ˆå†…å­˜ã€CPUç­‰ï¼‰çš„è€å¤§2ï¼‰    NodeManagerï¼ˆNMï¼‰ï¼šå•ä¸ªèŠ‚ç‚¹æœåŠ¡å™¨èµ„æºè€å¤§3ï¼‰    ApplicationMasterï¼ˆAMï¼‰ï¼šå•ä¸ªä»»åŠ¡è¿è¡Œçš„è€å¤§4ï¼‰    Containerï¼šå®¹å™¨ï¼Œç›¸å½“ä¸€å°ç‹¬ç«‹çš„æœåŠ¡å™¨ï¼Œé‡Œé¢å°è£…äº†ä»»åŠ¡è¿è¡Œæ‰€éœ€è¦çš„èµ„æºï¼Œå¦‚å†…å­˜ã€CPUã€ç£ç›˜ã€ç½‘ç»œ\n\nMapReduce æ¶æ„æ¦‚è¿°MapReduce å°†è®¡ç®—è¿‡ç¨‹åˆ†ä¸ºä¸¤ä¸ªé˜¶æ®µï¼šMap å’ŒReduce \n1ï¼‰Map é˜¶æ®µå¹¶è¡Œå¤„ç†è¾“å…¥æ•°æ®2ï¼‰Reduce é˜¶æ®µå¯¹ Map ç»“æœè¿›è¡Œæ±‡æ€»\nå¤§æ•°æ®æŠ€æœ¯ç”Ÿæ€ä½“ç³»HDFSã€YARNã€MapReduceä¸‰è€…å…³ç³»\n\nå¤§æ•°æ®æŠ€æœ¯ç”Ÿæ€ä½“ç³»\n\nå›¾ä¸­æ¶‰åŠçš„æŠ€æœ¯åè¯è§£é‡Šå¦‚ä¸‹ï¼š1ï¼‰Sqoopï¼šSqoop æ˜¯ä¸€æ¬¾å¼€æºçš„å·¥å…·ï¼Œä¸»è¦ç”¨äºåœ¨Hadoopã€Hive ä¸ä¼ ç»Ÿçš„æ•°æ®åº“ï¼ˆMySQLï¼‰é—´è¿›è¡Œæ•°æ®çš„ä¼ é€’ï¼Œå¯ä»¥å°†ä¸€ä¸ªå…³ç³»å‹æ•°æ®åº“ï¼ˆä¾‹å¦‚ ï¼šMySQLï¼ŒOracle ç­‰ï¼‰ä¸­çš„æ•°æ®å¯¼è¿›åˆ°Hadoop çš„HDFS ä¸­ï¼Œä¹Ÿå¯ä»¥å°†HDFS çš„æ•°æ®å¯¼è¿›åˆ°å…³ç³»å‹æ•°æ®åº“ä¸­ã€‚2ï¼‰Flumeï¼šFlume æ˜¯ä¸€ä¸ªé«˜å¯ç”¨çš„ï¼Œé«˜å¯é çš„ï¼Œåˆ†å¸ƒå¼çš„æµ·é‡æ—¥å¿—é‡‡é›†ã€èšåˆå’Œä¼ è¾“çš„ç³»ç»Ÿï¼Œ Flume æ”¯æŒåœ¨æ—¥å¿—ç³»ç»Ÿä¸­å®šåˆ¶å„ç±»æ•°æ®å‘é€æ–¹ï¼Œç”¨äºæ”¶é›†æ•°æ®ï¼›3ï¼‰Kafkaï¼šKafka æ˜¯ä¸€ç§é«˜ååé‡çš„åˆ†å¸ƒå¼å‘å¸ƒè®¢é˜…æ¶ˆæ¯ç³»ç»Ÿï¼›4ï¼‰Sparkï¼šSpark æ˜¯å½“å‰æœ€æµè¡Œçš„å¼€æºå¤§æ•°æ®å†…å­˜è®¡ç®—æ¡†æ¶ã€‚å¯ä»¥åŸºäº Hadoop ä¸Šå­˜å‚¨çš„å¤§æ•°æ®è¿›è¡Œè®¡ç®—ã€‚5ï¼‰Flinkï¼šFlink æ˜¯å½“å‰æœ€æµè¡Œçš„å¼€æºå¤§æ•°æ®å†…å­˜è®¡ç®—æ¡†æ¶ã€‚ç”¨äºå®æ—¶è®¡ç®—çš„åœºæ™¯è¾ƒå¤šã€‚6ï¼‰Oozieï¼šOozie æ˜¯ä¸€ä¸ªç®¡ç†Hadoop ä½œä¸šï¼ˆjobï¼‰çš„å·¥ä½œæµç¨‹è°ƒåº¦ç®¡ç†ç³»ç»Ÿã€‚7ï¼‰Hbaseï¼šHBase æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼çš„ã€é¢å‘åˆ—çš„å¼€æºæ•°æ®åº“ã€‚HBase ä¸åŒäºä¸€èˆ¬çš„å…³ç³»æ•°æ®åº“ï¼Œå®ƒæ˜¯ä¸€ä¸ªé€‚åˆäºéç»“æ„åŒ–æ•°æ®å­˜å‚¨çš„æ•°æ®åº“ã€‚8ï¼‰Hiveï¼šHive æ˜¯åŸºäº Hadoop çš„ä¸€ä¸ªæ•°æ®ä»“åº“å·¥å…·ï¼Œå¯ä»¥å°†ç»“æ„åŒ–çš„æ•°æ®æ–‡ä»¶æ˜ å°„ä¸ºä¸€å¼ æ•°æ®åº“è¡¨ï¼Œå¹¶æä¾›ç®€å•çš„ SQL æŸ¥è¯¢åŠŸèƒ½ï¼Œå¯ä»¥å°† SQL è¯­å¥è½¬æ¢ä¸º MapReduce ä»»åŠ¡è¿›è¡Œè¿è¡Œã€‚å…¶ä¼˜ç‚¹æ˜¯å­¦ä¹ æˆæœ¬ä½ï¼Œå¯ä»¥é€šè¿‡ç±» SQL è¯­å¥å¿«é€Ÿå®ç°ç®€å•çš„ MapReduce ç»Ÿè®¡ï¼Œä¸å¿…å¼€å‘ä¸“é—¨çš„MapReduce åº”ç”¨ï¼Œååˆ†é€‚åˆæ•°æ®ä»“åº“çš„ç»Ÿè®¡åˆ†æã€‚9ï¼‰ZooKeeperï¼šå®ƒæ˜¯ä¸€ä¸ªé’ˆå¯¹å¤§å‹åˆ†å¸ƒå¼ç³»ç»Ÿçš„å¯é åè°ƒç³»ç»Ÿï¼Œæä¾›çš„åŠŸèƒ½åŒ…æ‹¬ï¼šé…ç½®ç»´æŠ¤ã€åå­—æœåŠ¡ã€åˆ†å¸ƒå¼åŒæ­¥ã€ç»„æœåŠ¡ç­‰ã€‚ \næ¨èç³»ç»Ÿæ¡†æ¶å›¾ \n\n2. Hadoop è¿è¡Œç¯å¢ƒæ­å»ºï¼ˆå¼€å‘é‡ç‚¹ï¼‰åŸºç¡€ç¯å¢ƒå‡†å¤‡\nå®‰è£…VMwareã€xshell\né…ç½®é™æ€IPã€hostnameã€hosts\nåˆ›å»ºç”¨æˆ·ï¼Œè®¾ç½®æƒé™ï¼Œå…‹éš†ç¯å¢ƒ\nå®‰è£…JDKã€å®‰è£…Hadoop\n\nHadoop è¿è¡Œæ¨¡å¼æœ¬åœ°è¿è¡Œæ¨¡å¼å•¥éƒ½ä¸ç”¨é…ç½®ï¼Œç›´æ¥è¿è¡Œå³å¯\nå®Œå…¨åˆ†å¸ƒå¼è¿è¡Œæ¨¡å¼ï¼ˆå¼€å‘é‡ç‚¹ï¼‰â­â­â­\né…ç½®å°è™šæ‹Ÿæœº\nè®¾ç½®å…å¯†é€šä¿¡ã€shellè„šæœ¬åˆ†å‘å®‰è£…çš„JDKã€Hadoopç¯å¢ƒ\né…ç½®é›†ç¾¤ã€å†å²æœåŠ¡å™¨ã€æ—¥å¿—æœåŠ¡å™¨\nshellæ§åˆ¶é›†ç¾¤å¯åœå’Œjpsæƒ…å†µ\n\né›†ç¾¤éƒ¨ç½²è§„åˆ’ï¼š\n\nNameNodeå’Œ SecondaryNameNodeä¸è¦å®‰è£…åœ¨åŒä¸€å°æœåŠ¡å™¨\nResourceManagerä¹Ÿå¾ˆæ¶ˆè€—å†…å­˜ï¼Œä¸è¦å’ŒNameNodeã€SecondaryNameNodeé…ç½®åœ¨ é…ç½®åœ¨ åŒä¸€å°æœºå™¨ä¸Šã€‚\n\n\n\n\n\n\nhadoop102\nhadoop103\nhadoop104\n\n\n\n\nHDFS\nNameNodeDataNode\nDataNode\nSecondaryNameNodeDataNode\n\n\nYARN\nNodeManager\nResourceManagerNodeManager\nNodeManager\n\n\n\n\nå¸¸ç”¨ç«¯å£å·è¯´æ˜â­â­\n\n\n\nç«¯å£åç§°\nHadoop2.x\nHadoop3.x\n\n\n\n\nNameNodeå†…éƒ¨é€šä¿¡ç«¯å£\n8020 / 9000\n8020 / 9000/9820\n\n\nNameNode HTTP UI\n50070\n9870\n\n\nMapReduceæŸ¥çœ‹æ‰§è¡Œä»»åŠ¡ç«¯å£\n8088\n8088\n\n\nå†å²æœåŠ¡å™¨é€šä¿¡ç«¯å£\n19888\n19888\n\n\n\n\n\n\n\n\n\nweb\næœåŠ¡\n\n\n\n\nHDFS\n9870\n8020\n\n\nYARN\n8088\n8032\n\n\nhistory\n19888\n10020\n\n\n\n\nå¸¸ç”¨é…ç½®æ–‡ä»¶â­â­\n\n\n\né…ç½®æ–‡ä»¶\n2.x/3.x\né…ç½®å†…å®¹\n\n\n\n\næ ¸å¿ƒé…ç½®æ–‡ä»¶\ncore-site.xml\nNameNodeçš„åœ°å€æŒ‡å®šhadoopæ•°æ®çš„å­˜å‚¨ç›®å½•\n\n\nHDFSé…ç½®æ–‡ä»¶\nhdfs-site.xml\nnn webç«¯è®¿é—®åœ°å€2nn webç«¯è®¿é—®åœ°å€\n\n\nYARNé…ç½®æ–‡ä»¶\nyarn-site.xml\næŒ‡å®šMRèµ°shuffleResourceManagerçš„åœ°å€ç¯å¢ƒå˜é‡çš„ç»§æ‰¿\n\n\nMapReduceé…ç½®æ–‡ä»¶\nmapred-site.xml\næŒ‡å®šMapReduceç¨‹åºè¿è¡Œåœ¨Yarnä¸Š\n\n\n\nslaves/workers\n\n\n\n\né…ç½® core-site.xml\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;?xml-stylesheet type=\"text/xsl\" href=\"configuration.xsl\"?&gt;\n\n&lt;configuration&gt;\n    &lt;!-- æŒ‡å®šNameNodeçš„åœ°å€ --&gt;\n    &lt;property&gt;\n        &lt;name&gt;fs.defaultFS&lt;/name&gt;\n        &lt;value&gt;hdfs://hadoop102:8020&lt;/value&gt;\n    &lt;/property&gt;\n    \n    &lt;!-- æŒ‡å®šhadoopæ•°æ®çš„å­˜å‚¨ç›®å½• --&gt;\n    &lt;property&gt;\n        &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;\n        &lt;value&gt;/opt/module/hadoop-3.1.3/data&lt;/value&gt;\n    &lt;/property&gt;\n\n    &lt;!-- é…ç½®HDFSç½‘é¡µç™»å½•ä½¿ç”¨çš„é™æ€ç”¨æˆ·ä¸ºatguigu --&gt;\n    &lt;property&gt;\n        &lt;name&gt;hadoop.http.staticuser.user&lt;/name&gt;\n        &lt;value&gt;atguigu&lt;/value&gt;\n    &lt;/property&gt;\n&lt;/configuration&gt;\n\né…ç½® hdfs-site.xml\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;?xml-stylesheet type=\"text/xsl\" href=\"configuration.xsl\"?&gt;\n\n&lt;configuration&gt;\n\t&lt;!-- nn webç«¯è®¿é—®åœ°å€--&gt;\n\t&lt;property&gt;\n        &lt;name&gt;dfs.namenode.http-address&lt;/name&gt;\n        &lt;value&gt;hadoop102:9870&lt;/value&gt;\n    &lt;/property&gt;\n\t&lt;!-- 2nn webç«¯è®¿é—®åœ°å€--&gt;\n    &lt;property&gt;\n        &lt;name&gt;dfs.namenode.secondary.http-address&lt;/name&gt;\n        &lt;value&gt;hadoop104:9868&lt;/value&gt;\n    &lt;/property&gt;\n&lt;/configuration&gt;\n\né…ç½® yarn-site.xml\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;?xml-stylesheet type=\"text/xsl\" href=\"configuration.xsl\"?&gt;\n&lt;configuration&gt;\n    &lt;!-- æŒ‡å®šMRèµ°shuffle --&gt;\n    &lt;property&gt;\n        &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;\n        &lt;value&gt;mapreduce_shuffle&lt;/value&gt;\n    &lt;/property&gt;\n\n    &lt;!-- æŒ‡å®šResourceManagerçš„åœ°å€--&gt;\n    &lt;property&gt;\n        &lt;name&gt;yarn.resourcemanager.hostname&lt;/name&gt;\n        &lt;value&gt;hadoop103&lt;/value&gt;\n    &lt;/property&gt;\n\n    &lt;!-- ç¯å¢ƒå˜é‡çš„ç»§æ‰¿ --&gt;\n    &lt;property&gt;\n        &lt;name&gt;yarn.nodemanager.env-whitelist&lt;/name&gt;\n        &lt;value&gt;JAVA_HOME,HADOOP_COMMON_HOME,HADOOP_HDFS_HOME,HADOOP_CONF_DIR,CLASSPATH_PREPEND_DISTCACHE,HADOOP_YARN_HOME,HADOOP_MAPRED_HOME&lt;/value&gt;\n    &lt;/property&gt;\n&lt;/configuration&gt;\n\n\né…ç½® mapred-site.xml\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;?xml-stylesheet type=\"text/xsl\" href=\"configuration.xsl\"?&gt;\n\n&lt;configuration&gt;\n\t&lt;!-- æŒ‡å®šMapReduceç¨‹åºè¿è¡Œåœ¨Yarnä¸Š --&gt;\n    &lt;property&gt;\n        &lt;name&gt;mapreduce.framework.name&lt;/name&gt;\n        &lt;value&gt;yarn&lt;/value&gt;\n    &lt;/property&gt;\n&lt;/configuration&gt;\n\né…ç½®å†å²æœåŠ¡å™¨ï¼šé…ç½® mapred-site.xml\n&lt;!-- å†å²æœåŠ¡å™¨ç«¯åœ°å€ --&gt;\n&lt;property&gt;\n    &lt;name&gt;mapreduce.jobhistory.address&lt;/name&gt;\n    &lt;value&gt;hadoop102:10020&lt;/value&gt;\n&lt;/property&gt;\n\n&lt;!-- å†å²æœåŠ¡å™¨webç«¯åœ°å€ --&gt;\n&lt;property&gt;\n    &lt;name&gt;mapreduce.jobhistory.webapp.address&lt;/name&gt;\n    &lt;value&gt;hadoop102:19888&lt;/value&gt;\n&lt;/property&gt;\n\né…ç½®æ—¥å¿—çš„èšé›†ï¼šé…ç½® yarn-site.xml\n&lt;!-- å¼€å¯æ—¥å¿—èšé›†åŠŸèƒ½ --&gt;\n&lt;property&gt;\n    &lt;name&gt;yarn.log-aggregation-enable&lt;/name&gt;\n    &lt;value&gt;true&lt;/value&gt;\n&lt;/property&gt;\n&lt;!-- è®¾ç½®æ—¥å¿—èšé›†æœåŠ¡å™¨åœ°å€ --&gt;\n&lt;property&gt;  \n    &lt;name&gt;yarn.log.server.url&lt;/name&gt;  \n    &lt;value&gt;http://hadoop102:19888/jobhistory/logs&lt;/value&gt;\n&lt;/property&gt;\n&lt;!-- è®¾ç½®æ—¥å¿—ä¿ç•™æ—¶é—´ä¸º7å¤© --&gt;\n&lt;property&gt;\n    &lt;name&gt;yarn.log-aggregation.retain-seconds&lt;/name&gt;\n    &lt;value&gt;604800&lt;/value&gt;\n&lt;/property&gt;\n\n3. HDFSHDFSæ¦‚è¿°HDFSï¼ˆHadoop Distributed File Systemï¼‰ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œç”¨äºå­˜å‚¨æ–‡ä»¶ï¼Œé€šè¿‡ç›®å½•æ ‘æ¥å®šä½æ–‡ä»¶ï¼›å…¶æ¬¡ï¼Œå®ƒæ˜¯åˆ†å¸ƒå¼çš„ï¼Œç”±å¾ˆå¤šæœåŠ¡å™¨è”åˆèµ·æ¥å®ç°å…¶åŠŸèƒ½ï¼Œé›†ç¾¤ä¸­çš„æœåŠ¡å™¨æœ‰å„è‡ªçš„è§’è‰²ã€‚\nHDFSçš„ä½¿ç”¨åœºæ™¯ï¼šé€‚åˆä¸€æ¬¡å†™å…¥ï¼Œå¤šæ¬¡è¯»å‡ºçš„åœºæ™¯ã€‚ä¸€ä¸ªæ–‡ä»¶ç»è¿‡åˆ›å»ºã€å†™å…¥å’Œå…³é—­ä¹‹åå°±ä¸éœ€è¦æ”¹å˜ã€‚\nHDFSä¼˜ç¼ºç‚¹HDFSä¼˜ç‚¹\n1ï¼‰    é«˜å®¹é”™æ€§â¢    æ•°æ®è‡ªåŠ¨ä¿å­˜å¤šä¸ªå‰¯æœ¬ã€‚å®ƒé€šè¿‡å¢åŠ å‰¯æœ¬çš„å½¢å¼ï¼Œæé«˜å®¹é”™æ€§ã€‚\nâ¢    æŸä¸€ä¸ªå‰¯æœ¬ä¸¢å¤±ä»¥åï¼Œå®ƒå¯ä»¥è‡ªåŠ¨æ¢å¤ã€‚\n2ï¼‰    é€‚åˆå¤„ç†å¤§æ•°æ®â¢    æ•°æ®è§„æ¨¡ï¼šèƒ½å¤Ÿå¤„ç†æ•°æ®è§„æ¨¡è¾¾åˆ°GBã€TBã€ç”šè‡³PBçº§åˆ«çš„æ•°æ®ï¼›â¢    æ–‡ä»¶è§„æ¨¡ï¼šèƒ½å¤Ÿå¤„ç†ç™¾ä¸‡è§„æ¨¡ä»¥ä¸Šçš„æ–‡ä»¶æ•°é‡ï¼Œæ•°é‡ç›¸å½“ä¹‹å¤§ã€‚3ï¼‰    å¯æ„å»ºåœ¨å»‰ä»·æœºå™¨ä¸Šï¼Œé€šè¿‡å¤šå‰¯æœ¬æœºåˆ¶ï¼Œæé«˜å¯é æ€§ã€‚\nHDFSç¼ºç‚¹\n1ï¼‰    ä¸é€‚åˆä½å»¶æ—¶æ•°æ®è®¿é—®ï¼Œæ¯”å¦‚æ¯«ç§’çº§çš„å­˜å‚¨æ•°æ®ï¼Œæ˜¯åšä¸åˆ°çš„ã€‚2ï¼‰    æ— æ³•é«˜æ•ˆçš„å¯¹å¤§é‡å°æ–‡ä»¶è¿›è¡Œå­˜å‚¨ã€‚â¢    å­˜å‚¨å¤§é‡å°æ–‡ä»¶çš„è¯ï¼Œå®ƒä¼šå ç”¨NameNodeå¤§é‡çš„å†…å­˜æ¥å­˜å‚¨æ–‡ä»¶ç›®å½•å’Œå—ä¿¡æ¯ã€‚è¿™æ ·æ˜¯ä¸å¯å–çš„ï¼Œå› ä¸ºNameNodeçš„å†…å­˜æ€»æ˜¯æœ‰é™çš„ï¼›â¢    å°æ–‡ä»¶å­˜å‚¨çš„å¯»å€æ—¶é—´ä¼šè¶…è¿‡è¯»å–æ—¶é—´ï¼Œå®ƒè¿åäº†HDFSçš„è®¾è®¡ç›®æ ‡ã€‚\n3ï¼‰    ä¸æ”¯æŒå¹¶å‘å†™å…¥ã€æ–‡ä»¶éšæœºä¿®æ”¹ã€‚â¢    ä¸€ä¸ªæ–‡ä»¶åªèƒ½æœ‰ä¸€ä¸ªå†™ï¼Œä¸å…è®¸å¤šä¸ªçº¿ç¨‹åŒæ—¶å†™ï¼›\nâ¢    ä»…æ”¯æŒæ•°æ®appendï¼ˆè¿½åŠ ï¼‰ï¼Œä¸æ”¯æŒæ–‡ä»¶çš„éšæœºä¿®æ”¹ã€‚\nHDFSç»„æˆæ¶æ„\n\n\n\nHDFSç»„æˆæ¶æ„\n\n\n\n\n\nNameNodeï¼ˆnnï¼‰\nå°±æ˜¯Masterï¼Œå®ƒæ˜¯ä¸€ä¸ªä¸»ç®¡ã€ç®¡ç†è€…ã€‚\n\n\n\nï¼ˆ1ï¼‰    ç®¡ç†HDFSçš„åç§°ç©ºé—´ï¼›ï¼ˆ2ï¼‰    é…ç½®å‰¯æœ¬ç­–ç•¥ï¼›ï¼ˆ3ï¼‰    ç®¡ç†æ•°æ®å—ï¼ˆBlockï¼‰æ˜ å°„ä¿¡æ¯ï¼›ï¼ˆ4ï¼‰    å¤„ç†å®¢æˆ·ç«¯è¯»å†™è¯·æ±‚ã€‚\n\n\nDataNode\nå°±æ˜¯Slaveã€‚NameNodeä¸‹è¾¾å‘½ä»¤ï¼ŒDataNodeæ‰§è¡Œå®é™…çš„æ“ä½œã€‚\n\n\n\nï¼ˆ1ï¼‰    å­˜å‚¨å®é™…çš„æ•°æ®å—ï¼›ï¼ˆ2ï¼‰    æ‰§è¡Œæ•°æ®å—çš„è¯»/å†™æ“ä½œã€‚\n\n\nClient\nå°±æ˜¯å®¢æˆ·ç«¯ã€‚\n\n\n\nï¼ˆ1ï¼‰    æ–‡ä»¶åˆ‡åˆ†ã€‚æ–‡ä»¶ä¸Šä¼ HDFSçš„æ—¶å€™ï¼ŒClientå°†æ–‡ä»¶åˆ‡åˆ†æˆä¸€ä¸ªä¸€ä¸ªçš„Blockï¼Œç„¶åè¿›è¡Œä¸Šä¼ ï¼›ï¼ˆ2ï¼‰    ä¸NameNodeäº¤äº’ï¼Œè·å–æ–‡ä»¶çš„ä½ç½®ä¿¡æ¯ï¼›ï¼ˆ3ï¼‰    ä¸DataNodeäº¤äº’ï¼Œè¯»å–æˆ–è€…å†™å…¥æ•°æ®ï¼›ï¼ˆ4ï¼‰    Clientæä¾›ä¸€äº›å‘½ä»¤æ¥ç®¡ç†HDFSï¼Œæ¯”å¦‚NameNodeæ ¼å¼åŒ–ï¼›\n\n\nSecondary NameNode\nå¹¶éNameNodeçš„çƒ­å¤‡ä»½ï¼Œå½“NameNodeæŒ‚æ‰çš„æ—¶å€™ï¼Œå®ƒå¹¶ä¸èƒ½é©¬ä¸Šæ›¿æ¢NameNodeå¹¶æä¾›æœåŠ¡ã€‚\n\n\n\nï¼ˆ1ï¼‰    è¾…åŠ©NameNodeï¼Œåˆ†æ‹…å…¶å·¥ä½œé‡ï¼Œæ¯”å¦‚å®šæœŸåˆå¹¶Fsimageå’ŒEditsï¼Œå¹¶æ¨é€ç»™NameNode ï¼›ï¼ˆ2ï¼‰    åœ¨ç´§æ€¥æƒ…å†µä¸‹ï¼Œå¯è¾…åŠ©æ¢å¤NameNodeã€‚\n\n\n\n\nHDFS æ–‡ä»¶å—å¤§å°ï¼ˆé¢è¯•é‡ç‚¹ï¼‰ â­â­HDFSä¸­çš„æ–‡ä»¶åœ¨ç‰©ç†ä¸Šæ˜¯åˆ†å—å­˜å‚¨ï¼ˆBlockï¼‰ï¼Œå—çš„å¤§å°å¯ä»¥é€šè¿‡é…ç½®å‚æ•°( dfs.blocksizeï¼‰æ¥è§„å®šï¼Œé»˜è®¤å¤§å°åœ¨Hadoop2.x/3.xç‰ˆæœ¬ä¸­æ˜¯128Mï¼Œ1.xç‰ˆæœ¬ä¸­æ˜¯64Mã€‚\n1ï¼‰é›†ç¾¤ä¸­çš„block\n2ï¼‰å¦‚æœå¯»å€æ—¶é—´çº¦ä¸º10msï¼Œå³æŸ¥æ‰¾åˆ°ç›®æ ‡blockçš„æ—¶é—´ä¸º10msã€‚3ï¼‰å¯»å€æ—¶é—´ä¸ºä¼ è¾“æ—¶é—´çš„1%æ—¶ï¼Œåˆ™ä¸ºæœ€ä½³çŠ¶æ€ã€‚ï¼ˆä¸“å®¶ï¼‰å› æ­¤ï¼Œä¼ è¾“æ—¶é—´=10ms/0.01=1000ms=1s4ï¼‰è€Œç›®å‰ç£ç›˜çš„ä¼ è¾“é€Ÿç‡æ™®éä¸º100MB/sã€‚\n5ï¼‰ blockå¤§å°=1s*100MB/s=100MB\næ€è€ƒï¼šä¸ºä»€ä¹ˆå—çš„å¤§å°ä¸èƒ½è®¾ç½®å¤ªå°ï¼Œä¹Ÿä¸èƒ½è®¾ç½®å¤ªå¤§ï¼Ÿ\nï¼ˆ1ï¼‰    HDFSçš„å—è®¾ç½®å¤ªå°ï¼Œä¼šå¢åŠ å¯»å€æ—¶é—´ï¼Œç¨‹åºä¸€ç›´åœ¨æ‰¾å—çš„å¼€å§‹ä½ç½®ï¼›ï¼ˆ2ï¼‰    å¦‚æœå—è®¾ç½®çš„å¤ªå¤§ï¼Œä»ç£ç›˜ä¼ è¾“æ•°æ®çš„æ—¶é—´ä¼šæ˜æ˜¾å¤§äºå®šä½è¿™ä¸ªå—å¼€å§‹ä½ç½®æ‰€éœ€çš„æ—¶é—´ã€‚å¯¼è‡´ç¨‹åºåœ¨å¤„ç†è¿™å—æ•°æ®æ—¶ï¼Œä¼šéå¸¸æ…¢ã€‚\næ€»ç»“ï¼šHDFSå—çš„å¤§å°è®¾ç½®ä¸»è¦å–å†³äº==ç£ç›˜ä¼ è¾“é€Ÿç‡==ã€‚\nHDFS çš„Shell æ“ä½œhadoop fs å…·ä½“å‘½ä»¤  OR  hdfs dfs å…·ä½“å‘½ä»¤ ä¸¤ä¸ªæ˜¯å®Œå…¨ç›¸åŒçš„ã€‚ \n// å‘½ä»¤å¤§å…¨\n[-cat [-ignoreCrc] &lt;src&gt; ...]\n[-chgrp [-R] GROUP PATH...]\n[-chmod [-R] &lt;MODE[,MODE]... | OCTALMODE&gt; PATH...]\n[-chown [-R] [OWNER][:[GROUP]] PATH...]\n[-copyFromLocal [-f] [-p] &lt;localsrc&gt; ... &lt;dst&gt;]\n[-copyToLocal [-p] [-ignoreCrc] [-crc] &lt;src&gt; ... &lt;localdst&gt;]\n[-count [-q] &lt;path&gt; ...]\n[-cp [-f] [-p] &lt;src&gt; ... &lt;dst&gt;]\n[-df [-h] [&lt;path&gt; ...]]\n[-du [-s] [-h] &lt;path&gt; ...]\n[-get [-p] [-ignoreCrc] [-crc] &lt;src&gt; ... &lt;localdst&gt;]\n[-getmerge [-nl] &lt;src&gt; &lt;localdst&gt;]\n[-help [cmd ...]]\n[-ls [-d] [-h] [-R] [&lt;path&gt; ...]]\n[-mkdir [-p] &lt;path&gt; ...]\n[-moveFromLocal &lt;localsrc&gt; ... &lt;dst&gt;]\n[-moveToLocal &lt;src&gt; &lt;localdst&gt;]\n[-mv &lt;src&gt; ... &lt;dst&gt;]\n[-put [-f] [-p] &lt;localsrc&gt; ... &lt;dst&gt;]\n[-rm [-f] [-r|-R] [-skipTrash] &lt;src&gt; ...]\n[-rmdir [--ignore-fail-on-non-empty] &lt;dir&gt; ...]&lt;acl_spec&gt; &lt;path&gt;]]\n[-setrep [-R] [-w] &lt;rep&gt; &lt;path&gt; ...]\n[-stat [format] &lt;path&gt; ...]\n[-tail [-f] &lt;file&gt;]\n[-test -[defsz] &lt;path&gt;]\n[-text [-ignoreCrc] &lt;src&gt; ...]\n\n\n\n\nå¸¸ç”¨å‘½ä»¤å®æ“\n\n\n\n\n\nsbin/start-dfs.shsbin/start-yarn.sh\nå¯åŠ¨Hadoopé›†ç¾¤\n\n\nhadoop fs -help rm\nè¾“å‡ºè¿™ä¸ªå‘½ä»¤å‚æ•°\n\n\nhadoop fs -mkdir /a\nåˆ›å»º/sanguoæ–‡ä»¶å¤¹\n\n\nhadoop fs -moveFromLocal ./a.txt /a\nä»æœ¬åœ°å‰ªåˆ‡ç²˜è´´åˆ°HDFS\n\n\nhadoop fs -copyFromLocal a.txt /a\nä»æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿä¸­æ‹·è´æ–‡ä»¶åˆ°HDFSè·¯å¾„å»\n\n\nhadoop fs -put ./a.txt /sangauo\nç­‰åŒäºcopyFromLocalï¼Œç”Ÿäº§ç¯å¢ƒæ›´ä¹ æƒ¯ç”¨put\n\n\nhadoop fs -appendToFile a.txt /a/a.txt\nè¿½åŠ ä¸€ä¸ªæ–‡ä»¶åˆ°å·²ç»å­˜åœ¨çš„æ–‡ä»¶æœ«å°¾\n\n\nhadoop fs -copyToLocal /a/a.txt ./\nä»HDFSæ‹·è´åˆ°æœ¬åœ°\n\n\nhadoop fs -get /a/a.txt ./a.txt\nç­‰åŒäºcopyToLocalï¼Œç”Ÿäº§ç¯å¢ƒæ›´ä¹ æƒ¯ç”¨get\n\n\nhadoop fs -ls /a\næ˜¾ç¤ºç›®å½•ä¿¡æ¯\n\n\nhadoop fs -cat /a/a.txt\næ˜¾ç¤ºæ–‡ä»¶å†…å®¹\n\n\nhadoop fs -chmod 666\n-chgrpã€-chmodã€-chownï¼š\n\n\nhadoop fs -chown yfr:yfr  /a/a.txt\nLinuxæ–‡ä»¶ç³»ç»Ÿä¸­çš„ç”¨æ³•ä¸€æ ·ï¼Œä¿®æ”¹æ–‡ä»¶æ‰€å±æƒé™\n\n\nhadoop fs -mkdir /a\nåˆ›å»ºè·¯å¾„\n\n\nhadoop fs -cp /a/a.txt /b\nä»HDFSçš„ä¸€ä¸ªè·¯å¾„æ‹·è´åˆ°HDFSçš„å¦ä¸€ä¸ªè·¯å¾„\n\n\nhadoop fs -mv /a/a.txt /b\nåœ¨HDFSç›®å½•ä¸­ç§»åŠ¨æ–‡ä»¶\n\n\nhadoop fs -tail /a/a.txt\næ˜¾ç¤ºä¸€ä¸ªæ–‡ä»¶çš„æœ«å°¾1kbçš„æ•°æ®\n\n\nhadoop fs -rm /a/a.txt\nåˆ é™¤æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹\n\n\nhadoop fs -rm -r /a\nåˆ é™¤æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹\n\n\nhadoop fs -du -s -h /a\né€’å½’åˆ é™¤ç›®å½•åŠç›®å½•é‡Œé¢å†…å®¹\n\n\nhadoop fs -du -h /a\nç»Ÿè®¡æ–‡ä»¶å¤¹çš„å¤§å°ä¿¡æ¯\n\n\nhadoop fs -setrep 10 /a/a.txt\nè®¾ç½®HDFSä¸­æ–‡ä»¶çš„å‰¯æœ¬æ•°é‡\n\n\n\n\n\n\n\n\n\n\n\nHDFSçš„APIæ“ä½œ//HDFSæ–‡ä»¶ä¸Šä¼ \n@Test\npublic void testCopyFromLocalFile() throws IOException, InterruptedException, URISyntaxException {\n\n    // 1 è·å–æ–‡ä»¶ç³»ç»Ÿ\n    Configuration configuration = new Configuration();\n    configuration.set(\"dfs.replication\", \"2\");\n    FileSystem fs = FileSystem.get(new URI(\"hdfs://hadoop102:8020\"), configuration, \"atguigu\");\n\n    // 2 ä¸Šä¼ æ–‡ä»¶\n    fs.copyFromLocalFile(new Path(\"d:/sunwukong.txt\"), new Path(\"/xiyou/huaguoshan\"));\n\n    // 3 å…³é—­èµ„æº\n    fs.close();\nï½\n//HDFSæ–‡ä»¶ä¸‹è½½\n@Test\npublic void testCopyToLocalFile() throws IOException, InterruptedException, URISyntaxException{\n\n    // 1 è·å–æ–‡ä»¶ç³»ç»Ÿ\n    Configuration configuration = new Configuration();\n    FileSystem fs = FileSystem.get(new URI(\"hdfs://hadoop102:8020\"), configuration, \"atguigu\");\n    \n    // 2 æ‰§è¡Œä¸‹è½½æ“ä½œ\n    // boolean delSrc æŒ‡æ˜¯å¦å°†åŸæ–‡ä»¶åˆ é™¤\n    // Path src æŒ‡è¦ä¸‹è½½çš„æ–‡ä»¶è·¯å¾„\n    // Path dst æŒ‡å°†æ–‡ä»¶ä¸‹è½½åˆ°çš„è·¯å¾„\n    // boolean useRawLocalFileSystem æ˜¯å¦å¼€å¯æ–‡ä»¶æ ¡éªŒ\n    fs.copyToLocalFile(false, new Path(\"/xiyou/huaguoshan/sunwukong.txt\"), new Path(\"d:/sunwukong2.txt\"), true);\n    \n    // 3 å…³é—­èµ„æº\n    fs.close();\n}\n//HDFSæ›´åå’Œç§»åŠ¨\n@Test\npublic void testRename() throws IOException, InterruptedException, URISyntaxException{\n\n\t// 1 è·å–æ–‡ä»¶ç³»ç»Ÿ\n\tConfiguration configuration = new Configuration();\n\tFileSystem fs = FileSystem.get(new URI(\"hdfs://hadoop102:8020\"), configuration, \"atguigu\"); \n\t\t\n\t// 2 ä¿®æ”¹æ–‡ä»¶åç§°\n\tfs.rename(new Path(\"/xiyou/huaguoshan/sunwukong.txt\"), new Path(\"/xiyou/huaguoshan/meihouwang.txt\"));\n\t\t\n\t// 3 å…³é—­èµ„æº\n\tfs.close();\n}\n\n//HDFSåˆ é™¤æ–‡ä»¶å’Œç›®å½•\n@Test\npublic void testDelete() throws IOException, InterruptedException, URISyntaxException{\n\n\t// 1 è·å–æ–‡ä»¶ç³»ç»Ÿ\n\tConfiguration configuration = new Configuration();\n\tFileSystem fs = FileSystem.get(new URI(\"hdfs://hadoop102:8020\"), configuration, \"atguigu\");\n\t\t\n\t// 2 æ‰§è¡Œåˆ é™¤\n\tfs.delete(new Path(\"/xiyou\"), true);\n\t\t\n\t// 3 å…³é—­èµ„æº\n\tfs.close();\n}\n//æŸ¥çœ‹æ–‡ä»¶åç§°ã€æƒé™ã€é•¿åº¦ã€å—ä¿¡æ¯\n@Test\npublic void testListFiles() throws IOException, InterruptedException, URISyntaxException {\n\n\t// 1è·å–æ–‡ä»¶ç³»ç»Ÿ\n\tConfiguration configuration = new Configuration();\n\tFileSystem fs = FileSystem.get(new URI(\"hdfs://hadoop102:8020\"), configuration, \"atguigu\");\n\n\t// 2 è·å–æ–‡ä»¶è¯¦æƒ…\n\tRemoteIterator&lt;LocatedFileStatus&gt; listFiles = fs.listFiles(new Path(\"/\"), true);\n\n\twhile (listFiles.hasNext()) {\n\t\tLocatedFileStatus fileStatus = listFiles.next();\n\n\t\tSystem.out.println(\"========\" + fileStatus.getPath() + \"=========\");\n\t\tSystem.out.println(fileStatus.getPermission());\n\t\tSystem.out.println(fileStatus.getOwner());\n\t\tSystem.out.println(fileStatus.getGroup());\n\t\tSystem.out.println(fileStatus.getLen());\n\t\tSystem.out.println(fileStatus.getModificationTime());\n\t\tSystem.out.println(fileStatus.getReplication());\n\t\tSystem.out.println(fileStatus.getBlockSize());\n\t\tSystem.out.println(fileStatus.getPath().getName());\n\n\t\t// è·å–å—ä¿¡æ¯\n\t\tBlockLocation[] blockLocations = fileStatus.getBlockLocations();\n\t\tSystem.out.println(Arrays.toString(blockLocations));\n\t}\n\t// 3 å…³é—­èµ„æº\n\tfs.close();\n}\n//HDFSæ–‡ä»¶å’Œæ–‡ä»¶å¤¹åˆ¤æ–­\n@Test\npublic void testListStatus() throws IOException, InterruptedException, URISyntaxException{\n\n    // 1 è·å–æ–‡ä»¶é…ç½®ä¿¡æ¯\n    Configuration configuration = new Configuration();\n    FileSystem fs = FileSystem.get(new URI(\"hdfs://hadoop102:8020\"), configuration, \"atguigu\");\n\n    // 2 åˆ¤æ–­æ˜¯æ–‡ä»¶è¿˜æ˜¯æ–‡ä»¶å¤¹\n    FileStatus[] listStatus = fs.listStatus(new Path(\"/\"));\n\n    for (FileStatus fileStatus : listStatus) {\n\n        // å¦‚æœæ˜¯æ–‡ä»¶\n        if (fileStatus.isFile()) {\n            System.out.println(\"f:\"+fileStatus.getPath().getName());\n        }else {\n            System.out.println(\"d:\"+fileStatus.getPath().getName());\n        }\n    }\n\n    // 3 å…³é—­èµ„æº\n    fs.close();\n}\nHDFSçš„è¯»å†™æµç¨‹ï¼ˆé¢è¯•é‡ç‚¹ï¼‰â­â­HDFSå†™æ•°æ®æµç¨‹\nï¼ˆ1ï¼‰å®¢æˆ·ç«¯é€šè¿‡Distributed FileSystemæ¨¡å—å‘NameNodeè¯·æ±‚ä¸Šä¼ æ–‡ä»¶ï¼ŒNameNodeæ£€æŸ¥ç›®æ ‡æ–‡ä»¶æ˜¯å¦å·²å­˜åœ¨ï¼Œçˆ¶ç›®å½•æ˜¯å¦å­˜åœ¨ã€‚ï¼ˆ2ï¼‰NameNodeè¿”å›æ˜¯å¦å¯ä»¥ä¸Šä¼ ã€‚ï¼ˆ3ï¼‰å®¢æˆ·ç«¯è¯·æ±‚ç¬¬ä¸€ä¸ª Blockä¸Šä¼ åˆ°å“ªå‡ ä¸ªDataNodeæœåŠ¡å™¨ä¸Šã€‚ï¼ˆ4ï¼‰NameNodeè¿”å›3ä¸ªDataNodeèŠ‚ç‚¹ï¼Œåˆ†åˆ«ä¸ºdn1ã€dn2ã€dn3ã€‚ï¼ˆ5ï¼‰å®¢æˆ·ç«¯é€šè¿‡FSDataOutputStreamæ¨¡å—è¯·æ±‚dn1ä¸Šä¼ æ•°æ®ï¼Œdn1æ”¶åˆ°è¯·æ±‚ä¼šç»§ç»­è°ƒç”¨dn2ï¼Œç„¶ådn2è°ƒç”¨dn3ï¼Œå°†è¿™ä¸ªé€šä¿¡ç®¡é“å»ºç«‹å®Œæˆã€‚ï¼ˆ6ï¼‰dn1ã€dn2ã€dn3é€çº§åº”ç­”å®¢æˆ·ç«¯ã€‚ï¼ˆ7ï¼‰å®¢æˆ·ç«¯å¼€å§‹å¾€dn1ä¸Šä¼ ç¬¬ä¸€ä¸ªBlockï¼ˆå…ˆä»ç£ç›˜è¯»å–æ•°æ®æ”¾åˆ°ä¸€ä¸ªæœ¬åœ°å†…å­˜ç¼“å­˜ï¼‰ï¼Œä»¥Packetä¸ºå•ä½ï¼Œdn1æ”¶åˆ°ä¸€ä¸ªPacketå°±ä¼šä¼ ç»™dn2ï¼Œdn2ä¼ ç»™dn3ï¼›dn1æ¯ä¼ ä¸€ä¸ªpacketä¼šæ”¾å…¥ä¸€ä¸ªåº”ç­”é˜Ÿåˆ—ç­‰å¾…åº”ç­”ã€‚ï¼ˆ8ï¼‰å½“ä¸€ä¸ªBlockä¼ è¾“å®Œæˆä¹‹åï¼Œå®¢æˆ·ç«¯å†æ¬¡è¯·æ±‚NameNodeä¸Šä¼ ç¬¬äºŒä¸ªBlockçš„æœåŠ¡å™¨ã€‚ï¼ˆé‡å¤æ‰§è¡Œ3-7æ­¥ï¼‰ã€‚\nç½‘ç»œæ‹“æ‰‘-èŠ‚ç‚¹è·ç¦»è®¡ç®—èŠ‚ç‚¹è·ç¦»ï¼šä¸¤ä¸ªèŠ‚ç‚¹åˆ°è¾¾æœ€è¿‘çš„å…±åŒç¥–å…ˆçš„è·ç¦»æ€»å’Œã€‚ \nä¾‹å¦‚ï¼Œå‡è®¾æœ‰æ•°æ®ä¸­å¿ƒ d1 æœºæ¶ r1 ä¸­çš„èŠ‚ç‚¹ n1ã€‚è¯¥èŠ‚ç‚¹å¯ä»¥è¡¨ç¤ºä¸º/d1/r1/n1ã€‚åˆ©ç”¨è¿™ç§æ ‡è®°ï¼Œè¿™é‡Œç»™å‡ºå››ç§è·ç¦»æè¿°ã€‚ \nDistance(/d1/r1/n0, /d1/r1/n0)=0ï¼ˆåŒä¸€èŠ‚ç‚¹ä¸Šçš„è¿›ç¨‹ï¼‰Distance(/d1/r1/n1, /d1/r1/n2)=2ï¼ˆåŒä¸€æœºæ¶ä¸Šçš„ä¸åŒèŠ‚ç‚¹ï¼‰Distance(/d1/r2/n0, /d1/r3/n2)=4ï¼ˆåŒä¸€æ•°æ®ä¸­å¿ƒä¸åŒæœºæ¶ä¸Šçš„èŠ‚ç‚¹ï¼‰Distance(/d1/r2/n1, /d2/r4/n1)=6ï¼ˆä¸åŒæ•°æ®ä¸­å¿ƒçš„èŠ‚ç‚¹ï¼‰\nHadoop3.1.3å‰¯æœ¬èŠ‚ç‚¹é€‰æ‹©ç¬¬ä¸€ä¸ªå‰¯æœ¬åœ¨Clientæ‰€å¤„çš„èŠ‚ç‚¹ä¸Šã€‚å¦‚æœå®¢æˆ·ç«¯åœ¨é›†ç¾¤å¤–ï¼Œéšæœºé€‰ä¸€ä¸ªã€‚ç¬¬äºŒä¸ªå‰¯æœ¬åœ¨å¦ä¸€ä¸ªæœºæ¶çš„éšæœºä¸€ä¸ªèŠ‚ç‚¹ç¬¬ä¸‰ä¸ªå‰¯æœ¬åœ¨ç¬¬äºŒä¸ªå‰¯æœ¬æ‰€åœ¨æœºæ¶çš„éšæœºèŠ‚ç‚¹\nHDFSçš„è¯»æ•°æ®æµç¨‹\nï¼ˆ1ï¼‰å®¢æˆ·ç«¯é€šè¿‡DistributedFileSystemå‘NameNodeè¯·æ±‚ä¸‹è½½æ–‡ä»¶ï¼ŒNameNodeé€šè¿‡æŸ¥è¯¢å…ƒæ•°æ®ï¼Œæ‰¾åˆ°æ–‡ä»¶å—æ‰€åœ¨çš„DataNodeåœ°å€ã€‚ï¼ˆ2ï¼‰æŒ‘é€‰ä¸€å°DataNodeï¼ˆå°±è¿‘åŸåˆ™ï¼Œç„¶åéšæœºï¼‰æœåŠ¡å™¨ï¼Œè¯·æ±‚è¯»å–æ•°æ®ã€‚ï¼ˆ3ï¼‰DataNodeå¼€å§‹ä¼ è¾“æ•°æ®ç»™å®¢æˆ·ç«¯ï¼ˆä»ç£ç›˜é‡Œé¢è¯»å–æ•°æ®è¾“å…¥æµï¼Œä»¥Packetä¸ºå•ä½æ¥åšæ ¡éªŒï¼‰ã€‚ï¼ˆ4ï¼‰å®¢æˆ·ç«¯ä»¥Packetä¸ºå•ä½æ¥æ”¶ï¼Œå…ˆåœ¨æœ¬åœ°ç¼“å­˜ï¼Œç„¶åå†™å…¥ç›®æ ‡æ–‡ä»¶ã€‚\nNameNodeå’ŒSecondaryNameNodeæ€è€ƒï¼šNameNodeä¸­çš„å…ƒæ•°æ®æ˜¯å­˜å‚¨åœ¨å“ªé‡Œçš„ï¼Ÿ        é¦–å…ˆï¼Œæˆ‘ä»¬åšä¸ªå‡è®¾ï¼Œå¦‚æœå­˜å‚¨åœ¨NameNodeèŠ‚ç‚¹çš„ç£ç›˜ä¸­ï¼Œå› ä¸ºç»å¸¸éœ€è¦è¿›è¡Œéšæœºè®¿é—®ï¼Œè¿˜æœ‰å“åº”å®¢æˆ·è¯·æ±‚ï¼Œå¿…ç„¶æ˜¯æ•ˆç‡è¿‡ä½ã€‚å› æ­¤ï¼Œ==å…ƒæ•°æ®éœ€è¦å­˜æ”¾åœ¨å†…å­˜ä¸­==ã€‚ä½†å¦‚æœåªå­˜åœ¨å†…å­˜ä¸­ï¼Œä¸€æ—¦æ–­ç”µï¼Œå…ƒæ•°æ®ä¸¢å¤±ï¼Œæ•´ä¸ªé›†ç¾¤å°±æ— æ³•å·¥ä½œäº†ã€‚å› æ­¤äº§ç”Ÿåœ¨==ç£ç›˜ä¸­å¤‡ä»½å…ƒæ•°æ®çš„FsImage==ã€‚        è¿™æ ·åˆä¼šå¸¦æ¥æ–°çš„é—®é¢˜ï¼Œå½“åœ¨å†…å­˜ä¸­çš„å…ƒæ•°æ®æ›´æ–°æ—¶ï¼Œå¦‚æœåŒæ—¶æ›´æ–°FsImageï¼Œå°±ä¼šå¯¼è‡´æ•ˆç‡è¿‡ä½ï¼Œä½†å¦‚æœä¸æ›´æ–°ï¼Œå°±ä¼šå‘ç”Ÿä¸€è‡´æ€§é—®é¢˜ï¼Œä¸€æ—¦NameNodeèŠ‚ç‚¹æ–­ç”µï¼Œå°±ä¼šäº§ç”Ÿæ•°æ®ä¸¢å¤±ã€‚å› æ­¤ï¼Œå¼•å…¥Editsæ–‡ä»¶ï¼ˆåªè¿›è¡Œè¿½åŠ æ“ä½œï¼Œæ•ˆç‡å¾ˆé«˜ï¼‰ã€‚==æ¯å½“å…ƒæ•°æ®æœ‰æ›´æ–°æˆ–è€…æ·»åŠ å…ƒæ•°æ®æ—¶ï¼Œä¿®æ”¹å†…å­˜ä¸­çš„å…ƒæ•°æ®å¹¶è¿½åŠ åˆ°Editsä¸­==ã€‚è¿™æ ·ï¼Œä¸€æ—¦NameNodeèŠ‚ç‚¹æ–­ç”µï¼Œå¯ä»¥é€šè¿‡FsImageå’ŒEditsçš„åˆå¹¶ï¼Œåˆæˆå…ƒæ•°æ®ã€‚        ä½†æ˜¯ï¼Œå¦‚æœé•¿æ—¶é—´æ·»åŠ æ•°æ®åˆ°Editsä¸­ï¼Œä¼šå¯¼è‡´è¯¥æ–‡ä»¶æ•°æ®è¿‡å¤§ï¼Œæ•ˆç‡é™ä½ï¼Œè€Œä¸”ä¸€æ—¦æ–­ç”µï¼Œæ¢å¤å…ƒæ•°æ®éœ€è¦çš„æ—¶é—´è¿‡é•¿ã€‚å› æ­¤ï¼Œéœ€è¦==å®šæœŸè¿›è¡ŒFsImageå’ŒEditsçš„åˆå¹¶==ï¼Œå¦‚æœè¿™ä¸ªæ“ä½œç”±NameNodeèŠ‚ç‚¹å®Œæˆï¼Œåˆä¼šæ•ˆç‡è¿‡ä½ã€‚å› æ­¤ï¼Œå¼•å…¥ä¸€ä¸ªæ–°çš„èŠ‚ç‚¹==SecondaryNamenodeï¼Œä¸“é—¨ç”¨äºFsImageå’ŒEditsçš„åˆå¹¶==ã€‚\nNNå’Œ2NNå·¥ä½œæœºåˆ¶\n1ï¼‰ç¬¬ä¸€é˜¶æ®µï¼šNameNodeå¯åŠ¨ï¼ˆ1ï¼‰ç¬¬ä¸€æ¬¡å¯åŠ¨NameNodeæ ¼å¼åŒ–åï¼Œåˆ›å»ºFsimageå’ŒEditsæ–‡ä»¶ã€‚å¦‚æœä¸æ˜¯ç¬¬ä¸€æ¬¡å¯åŠ¨ï¼Œç›´æ¥åŠ è½½ç¼–è¾‘æ—¥å¿—å’Œé•œåƒæ–‡ä»¶åˆ°å†…å­˜ã€‚ï¼ˆ2ï¼‰å®¢æˆ·ç«¯å¯¹å…ƒæ•°æ®è¿›è¡Œå¢åˆ æ”¹çš„è¯·æ±‚ã€‚ï¼ˆ3ï¼‰NameNodeè®°å½•æ“ä½œæ—¥å¿—ï¼Œæ›´æ–°æ»šåŠ¨æ—¥å¿—ã€‚ï¼ˆ4ï¼‰NameNodeåœ¨å†…å­˜ä¸­å¯¹å…ƒæ•°æ®è¿›è¡Œå¢åˆ æ”¹ã€‚\n2ï¼‰ç¬¬äºŒé˜¶æ®µï¼šSecondary NameNodeå·¥ä½œï¼ˆ1ï¼‰Secondary NameNodeè¯¢é—®NameNodeæ˜¯å¦éœ€è¦CheckPointã€‚ç›´æ¥å¸¦å›NameNodeæ˜¯å¦æ£€æŸ¥ç»“æœã€‚ï¼ˆ2ï¼‰Secondary NameNodeè¯·æ±‚æ‰§è¡ŒCheckPointã€‚ï¼ˆ3ï¼‰NameNodeæ»šåŠ¨æ­£åœ¨å†™çš„Editsæ—¥å¿—ã€‚ï¼ˆ4ï¼‰å°†æ»šåŠ¨å‰çš„ç¼–è¾‘æ—¥å¿—å’Œé•œåƒæ–‡ä»¶æ‹·è´åˆ°Secondary NameNodeã€‚ï¼ˆ5ï¼‰Secondary NameNodeåŠ è½½ç¼–è¾‘æ—¥å¿—å’Œé•œåƒæ–‡ä»¶åˆ°å†…å­˜ï¼Œå¹¶åˆå¹¶ã€‚ï¼ˆ6ï¼‰ç”Ÿæˆæ–°çš„é•œåƒæ–‡ä»¶fsimage.chkpointã€‚ï¼ˆ7ï¼‰æ‹·è´fsimage.chkpointåˆ°NameNodeã€‚ï¼ˆ8ï¼‰NameNodeå°†fsimage.chkpointé‡æ–°å‘½åæˆfsimageã€‚\nFsimageå’ŒEditsæ¦‚å¿µ\nï¼ˆ1ï¼‰Fsimageæ–‡ä»¶ï¼šHDFSæ–‡ä»¶ç³»ç»Ÿå…ƒæ•°æ®çš„ä¸€ä¸ªæ°¸ä¹…æ€§çš„æ£€æŸ¥ç‚¹ï¼Œå…¶ä¸­åŒ…å«HDFSæ–‡ä»¶ç³»ç»Ÿçš„æ‰€æœ‰ç›®å½•å’Œæ–‡ä»¶inodeçš„åºåˆ—åŒ–ä¿¡æ¯ã€‚ï¼ˆ2ï¼‰Editsæ–‡ä»¶ï¼šå­˜æ”¾HDFSæ–‡ä»¶ç³»ç»Ÿçš„æ‰€æœ‰æ›´æ–°æ“ä½œçš„è·¯å¾„ï¼Œæ–‡ä»¶ç³»ç»Ÿå®¢æˆ·ç«¯æ‰§è¡Œçš„æ‰€æœ‰å†™æ“ä½œé¦–å…ˆä¼šè¢«è®°å½•åˆ°Editsæ–‡ä»¶ä¸­ã€‚ï¼ˆ3ï¼‰seen_txidæ–‡ä»¶ä¿å­˜çš„æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå°±æ˜¯æœ€åä¸€ä¸ªedits_çš„æ•°å­—ï¼ˆ4ï¼‰æ¯æ¬¡NameNodeå¯åŠ¨çš„æ—¶å€™éƒ½ä¼šå°†Fsimageæ–‡ä»¶è¯»å…¥å†…å­˜ï¼ŒåŠ è½½Editsé‡Œé¢çš„æ›´æ–°æ“ä½œï¼Œä¿è¯å†…å­˜ä¸­çš„å…ƒæ•°æ®ä¿¡æ¯æ˜¯æœ€æ–°çš„ã€åŒæ­¥çš„ï¼Œå¯ä»¥çœ‹æˆNameNodeå¯åŠ¨çš„æ—¶å€™å°±å°†Fsimageå’ŒEditsæ–‡ä»¶è¿›è¡Œäº†åˆå¹¶ã€‚\næŸ¥çœ‹oiv å’Œoev å‘½ä»¤\næŸ¥çœ‹fsimageï¼šhdfs oiv -p æ–‡ä»¶ç±»å‹ -i é•œåƒæ–‡ä»¶ -o è½¬æ¢åæ–‡ä»¶è¾“å‡ºè·¯å¾„ \næŸ¥çœ‹editsï¼šhdfs oev -p æ–‡ä»¶ç±»å‹ -iç¼–è¾‘æ—¥å¿— -o è½¬æ¢åæ–‡ä»¶è¾“å‡ºè·¯å¾„\nDataNodeDataNode å·¥ä½œæœºåˆ¶\nï¼ˆ1ï¼‰ä¸€ä¸ªæ•°æ®å—åœ¨DataNodeä¸Šä»¥æ–‡ä»¶å½¢å¼å­˜å‚¨åœ¨ç£ç›˜ä¸Šï¼ŒåŒ…æ‹¬ä¸¤ä¸ªæ–‡ä»¶ï¼Œä¸€ä¸ªæ˜¯æ•°æ®æœ¬èº«ï¼Œä¸€ä¸ªæ˜¯å…ƒæ•°æ®åŒ…æ‹¬æ•°æ®å—çš„é•¿åº¦ï¼Œå—æ•°æ®çš„æ ¡éªŒå’Œï¼Œä»¥åŠæ—¶é—´æˆ³ã€‚ï¼ˆ2ï¼‰DataNodeå¯åŠ¨åå‘NameNodeæ³¨å†Œï¼Œé€šè¿‡åï¼Œå‘¨æœŸæ€§ï¼ˆ6å°æ—¶ï¼‰çš„å‘NameNodeä¸ŠæŠ¥æ‰€æœ‰çš„å—ä¿¡æ¯ã€‚\n\nDNå‘NNæ±‡æŠ¥å½“å‰è§£è¯»ä¿¡æ¯çš„æ—¶é—´é—´éš”ï¼Œé»˜è®¤6å°æ—¶ï¼›\nDNæ‰«æè‡ªå·±èŠ‚ç‚¹å—ä¿¡æ¯åˆ—è¡¨çš„æ—¶é—´ï¼Œé»˜è®¤6å°æ—¶\n\nï¼ˆ3ï¼‰å¿ƒè·³æ˜¯æ¯3ç§’ä¸€æ¬¡ï¼Œå¿ƒè·³è¿”å›ç»“æœå¸¦æœ‰NameNodeç»™è¯¥DataNodeçš„å‘½ä»¤å¦‚å¤åˆ¶å—æ•°æ®åˆ°å¦ä¸€å°æœºå™¨ï¼Œæˆ–åˆ é™¤æŸä¸ªæ•°æ®å—ã€‚å¦‚æœè¶…è¿‡10åˆ†é’Ÿæ²¡æœ‰æ”¶åˆ°æŸä¸ªDataNodeçš„å¿ƒè·³ï¼Œåˆ™è®¤ä¸ºè¯¥èŠ‚ç‚¹ä¸å¯ç”¨ã€‚ï¼ˆ4ï¼‰é›†ç¾¤è¿è¡Œä¸­å¯ä»¥å®‰å…¨åŠ å…¥å’Œé€€å‡ºä¸€äº›æœºå™¨ã€‚\nDataNodeèŠ‚ç‚¹ä¿è¯æ•°æ®å®Œæ•´æ€§çš„æ–¹æ³•ï¼šï¼ˆ1ï¼‰å½“DataNodeè¯»å–Blockçš„æ—¶å€™ï¼Œå®ƒä¼šè®¡ç®—CheckSumã€‚ï¼ˆ2ï¼‰å¦‚æœè®¡ç®—åçš„CheckSumï¼Œä¸Blockåˆ›å»ºæ—¶å€¼ä¸ä¸€æ ·ï¼Œè¯´æ˜Blockå·²ç»æŸåã€‚ï¼ˆ3ï¼‰Clientè¯»å–å…¶ä»–DataNodeä¸Šçš„Blockã€‚ï¼ˆ4ï¼‰å¸¸è§çš„æ ¡éªŒç®—æ³•crcï¼ˆ32ï¼‰ï¼Œmd5ï¼ˆ128ï¼‰ï¼Œsha1ï¼ˆ160ï¼‰ï¼ˆ5ï¼‰DataNodeåœ¨å…¶æ–‡ä»¶åˆ›å»ºåå‘¨æœŸéªŒè¯CheckSumã€‚\nDataNodeæ‰çº¿æ—¶é™å‚æ•°è®¾ç½®1ã€DataNodeè¿›ç¨‹æ­»äº¡æˆ–è€…ç½‘ç»œæ•…éšœé€ æˆDataNodeæ— æ³•ä¸NameNodeé€šä¿¡2ã€NameNodeä¸ä¼šç«‹å³æŠŠè¯¥èŠ‚ç‚¹åˆ¤å®šä¸ºæ­»äº¡ï¼Œè¦ç»è¿‡ä¸€æ®µæ—¶é—´ï¼Œè¿™æ®µæ—¶é—´æš‚ç§°ä½œè¶…æ—¶æ—¶é•¿ã€‚3ã€HDFSé»˜è®¤çš„è¶…æ—¶æ—¶é•¿ä¸º10åˆ†é’Ÿ+30ç§’ã€‚4ã€å¦‚æœå®šä¹‰è¶…æ—¶æ—¶é—´ä¸ºTimeOutï¼Œåˆ™è¶…æ—¶æ—¶é•¿çš„è®¡ç®—å…¬å¼ä¸ºï¼šTimeOut = 2  dfs.namenode.heartbeat.recheck-interval + 10  dfs.heartbeat.intervalã€‚è€Œé»˜è®¤çš„dfs.namenode.heartbeat.recheck-interval å¤§å°ä¸º5åˆ†é’Ÿï¼Œdfs.heartbeat.intervalé»˜è®¤ä¸º3ç§’ã€‚\n4. MapReduceMapReduceæ¦‚è¿°MapReduceå®šä¹‰â€‹        MapReduceæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼è¿ç®—ç¨‹åºçš„ç¼–ç¨‹æ¡†æ¶ï¼Œæ˜¯ç”¨æˆ·å¼€å‘â€œåŸºäºHadoopçš„æ•°æ®åˆ†æåº”ç”¨â€çš„æ ¸å¿ƒæ¡†æ¶ã€‚\nâ€‹        MapReduceæ ¸å¿ƒåŠŸèƒ½æ˜¯å°†ç”¨æˆ·ç¼–å†™çš„ä¸šåŠ¡é€»è¾‘ä»£ç å’Œè‡ªå¸¦é»˜è®¤ç»„ä»¶æ•´åˆæˆä¸€ä¸ªå®Œæ•´çš„åˆ†å¸ƒå¼è¿ç®—ç¨‹åºï¼Œå¹¶å‘è¿è¡Œåœ¨ä¸€ä¸ªHadoopé›†ç¾¤ä¸Šã€‚\nä¼˜ç¼ºç‚¹ ä¼˜ç‚¹1ï¼‰MapReduceæ˜“äºç¼–ç¨‹        å®ƒç®€å•çš„å®ç°ä¸€äº›æ¥å£ï¼Œå°±å¯ä»¥å®Œæˆä¸€ä¸ªåˆ†å¸ƒå¼ç¨‹åºï¼Œè¿™ä¸ªåˆ†å¸ƒå¼ç¨‹åºå¯ä»¥åˆ†å¸ƒåˆ°å¤§é‡å»‰ä»·çš„PCæœºå™¨ä¸Šè¿è¡Œã€‚ä¹Ÿå°±æ˜¯è¯´ä½ å†™ä¸€ä¸ªåˆ†å¸ƒå¼ç¨‹åºï¼Œè·Ÿå†™ä¸€ä¸ªç®€å•çš„ä¸²è¡Œç¨‹åºæ˜¯ä¸€æ¨¡ä¸€æ ·çš„ã€‚å°±æ˜¯å› ä¸ºè¿™ä¸ªç‰¹ç‚¹ä½¿å¾—MapReduceç¼–ç¨‹å˜å¾—éå¸¸æµè¡Œã€‚2ï¼‰è‰¯å¥½çš„æ‰©å±•æ€§        å½“ä½ çš„è®¡ç®—èµ„æºä¸èƒ½å¾—åˆ°æ»¡è¶³çš„æ—¶å€™ï¼Œä½ å¯ä»¥é€šè¿‡ç®€å•çš„å¢åŠ æœºå™¨æ¥æ‰©å±•å®ƒçš„è®¡ç®—èƒ½åŠ›ã€‚3ï¼‰é«˜å®¹é”™æ€§        MapReduceè®¾è®¡çš„åˆè¡·å°±æ˜¯ä½¿ç¨‹åºèƒ½å¤Ÿéƒ¨ç½²åœ¨å»‰ä»·çš„PCæœºå™¨ä¸Šï¼Œè¿™å°±è¦æ±‚å®ƒå…·æœ‰å¾ˆé«˜çš„å®¹é”™æ€§ã€‚æ¯”å¦‚å…¶ä¸­ä¸€å°æœºå™¨æŒ‚äº†ï¼Œå®ƒå¯ä»¥æŠŠä¸Šé¢çš„è®¡ç®—ä»»åŠ¡è½¬ç§»åˆ°å¦å¤–ä¸€ä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œï¼Œä¸è‡³äºè¿™ä¸ªä»»åŠ¡è¿è¡Œå¤±è´¥ï¼Œè€Œä¸”è¿™ä¸ªè¿‡ç¨‹ä¸éœ€è¦äººå·¥å‚ä¸ï¼Œè€Œå®Œå…¨æ˜¯ç”±Hadoopå†…éƒ¨å®Œæˆçš„ã€‚4ï¼‰é€‚åˆPBçº§ä»¥ä¸Šæµ·é‡æ•°æ®çš„ç¦»çº¿å¤„ç†        å¯ä»¥å®ç°ä¸Šåƒå°æœåŠ¡å™¨é›†ç¾¤å¹¶å‘å·¥ä½œï¼Œæä¾›æ•°æ®å¤„ç†èƒ½åŠ›ã€‚ç¼ºç‚¹1ï¼‰ä¸æ“…é•¿å®æ—¶è®¡ç®—        MapReduceæ— æ³•åƒMySQLä¸€æ ·ï¼Œåœ¨æ¯«ç§’æˆ–è€…ç§’çº§å†…è¿”å›ç»“æœã€‚2ï¼‰ä¸æ“…é•¿æµå¼è®¡ç®—        æµå¼è®¡ç®—çš„è¾“å…¥æ•°æ®æ˜¯åŠ¨æ€çš„ï¼Œè€ŒMapReduceçš„è¾“å…¥æ•°æ®é›†æ˜¯é™æ€çš„ï¼Œä¸èƒ½åŠ¨æ€å˜åŒ–ã€‚è¿™æ˜¯å› ä¸ºMapReduceè‡ªèº«çš„è®¾è®¡ç‰¹ç‚¹å†³å®šäº†æ•°æ®æºå¿…é¡»æ˜¯é™æ€çš„ã€‚3ï¼‰ä¸æ“…é•¿DAGï¼ˆæœ‰å‘æ— ç¯å›¾ï¼‰è®¡ç®—        å¤šä¸ªåº”ç”¨ç¨‹åºå­˜åœ¨ä¾èµ–å…³ç³»ï¼Œåä¸€ä¸ªåº”ç”¨ç¨‹åºçš„è¾“å…¥ä¸ºå‰ä¸€ä¸ªçš„è¾“å‡ºã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒMapReduceå¹¶ä¸æ˜¯ä¸èƒ½åšï¼Œè€Œæ˜¯ä½¿ç”¨åï¼Œæ¯ä¸ªMapReduceä½œä¸šçš„è¾“å‡ºç»“æœéƒ½ä¼šå†™å…¥åˆ°ç£ç›˜ï¼Œä¼šé€ æˆå¤§é‡çš„ç£ç›˜IOï¼Œå¯¼è‡´æ€§èƒ½éå¸¸çš„ä½ä¸‹ã€‚\nMapReduceæ ¸å¿ƒæ€æƒ³\nï¼ˆ1ï¼‰åˆ†å¸ƒå¼çš„è¿ç®—ç¨‹åºå¾€å¾€éœ€è¦åˆ†æˆè‡³å°‘2ä¸ªé˜¶æ®µã€‚ï¼ˆ2ï¼‰ç¬¬ä¸€ä¸ªé˜¶æ®µçš„MapTaskå¹¶å‘å®ä¾‹ï¼Œå®Œå…¨å¹¶è¡Œè¿è¡Œï¼Œäº’ä¸ç›¸å¹²ã€‚ï¼ˆ3ï¼‰ç¬¬äºŒä¸ªé˜¶æ®µçš„ReduceTaskå¹¶å‘å®ä¾‹äº’ä¸ç›¸å¹²ï¼Œä½†æ˜¯ä»–ä»¬çš„æ•°æ®ä¾èµ–äºä¸Šä¸€ä¸ªé˜¶æ®µçš„æ‰€æœ‰MapTaskå¹¶å‘å®ä¾‹çš„è¾“å‡ºã€‚ï¼ˆ4ï¼‰MapReduceç¼–ç¨‹æ¨¡å‹åªèƒ½åŒ…å«ä¸€ä¸ªMapé˜¶æ®µå’Œä¸€ä¸ªReduceé˜¶æ®µï¼Œå¦‚æœç”¨æˆ·çš„ä¸šåŠ¡é€»è¾‘éå¸¸å¤æ‚ï¼Œé‚£å°±åªèƒ½å¤šä¸ªMapReduceç¨‹åºï¼Œä¸²è¡Œè¿è¡Œã€‚æ€»ç»“ï¼šåˆ†æWordCountæ•°æ®æµèµ°å‘æ·±å…¥ç†è§£MapReduceæ ¸å¿ƒæ€æƒ³ã€‚\nMapReduceè¿›ç¨‹ä¸€ä¸ªå®Œæ•´çš„MapReduceç¨‹åºåœ¨åˆ†å¸ƒå¼è¿è¡Œæ—¶æœ‰ä¸‰ç±»å®ä¾‹è¿›ç¨‹ï¼šï¼ˆ1ï¼‰MrAppMasterï¼šè´Ÿè´£æ•´ä¸ªç¨‹åºçš„è¿‡ç¨‹è°ƒåº¦åŠçŠ¶æ€åè°ƒã€‚ï¼ˆ2ï¼‰MapTaskï¼šè´Ÿè´£Mapé˜¶æ®µçš„æ•´ä¸ªæ•°æ®å¤„ç†æµç¨‹ã€‚ï¼ˆ3ï¼‰ReduceTaskï¼šè´Ÿè´£Reduceé˜¶æ®µçš„æ•´ä¸ªæ•°æ®å¤„ç†æµç¨‹ã€‚\nå¸¸ç”¨æ•°æ®åºåˆ—åŒ–ç±»å‹\n\n\n\nJavaç±»å‹\nHadoop Writableç±»å‹\n\n\n\n\nBoolean\nBooleanWritable\n\n\nByte\nByteWritable\n\n\nInt\nIntWritable\n\n\nFloat\nFloatWritable\n\n\nLong\nLongWritable\n\n\nDouble\nDoubleWritable\n\n\nString\nText\n\n\nMap\nMapWritable\n\n\nArray\nArrayWritable\n\n\nNull\nNullWritable\n\n\n\n\nMapReduceç¼–ç¨‹è§„èŒƒ\nMapperé˜¶æ®µ(1)ç”¨æˆ·è‡ªå®šä¹‰çš„Mapperè¦ç»§æ‰¿è‡ªå·±çš„çˆ¶ç±»(2) Mapperçš„è¾“å…¥æ•°æ®æ˜¯KVå¯¹çš„å½¢å¼(KVçš„ç±»å‹å¯è‡ªå®šä¹‰)(3) Mapperä¸­çš„ä¸šåŠ¡é€»è¾‘å†™åœ¨map()æ–¹æ³•ä¸­(4) Mapperçš„è¾“ å‡ºæ•°æ®æ˜¯KVå¯¹çš„å½¢å¼(KVçš„ç±»å‹å¯è‡ªå®šä¹‰)(5) map()æ–¹ æ³•(MapTaskè¿›ç¨‹) å¯¹æ¯ä¸€ä¸ª è°ƒç”¨- -æ¬¡\n\nReduceré˜¶ æ®µ(1) ç”¨æˆ·è‡ªå®šä¹‰çš„Reducerè¦ç»§æ‰¿è‡ªå·±çš„çˆ¶ç±»(2) Reducerçš„è¾“å…¥æ•°æ®ç±»å‹å¯¹åº”Mapperçš„è¾“å‡ºæ•°æ®ç±»å‹ï¼Œä¹Ÿæ˜¯KV(3) Reducerçš„ä¸š åŠ¡é€»è¾‘å†™åœ¨reduce()æ–¹æ³•ä¸­(4) ReduceTaskè¿›ç¨‹å¯¹æ¯- -ç»„ç›¸åŒkçš„ç»„è°ƒç”¨- -æ¬¡reduce()æ–¹æ³•\n\nDriveré˜¶æ®µç›¸å½“äºYARNé›†ç¾¤çš„å®¢æˆ·ç«¯ï¼Œç”¨äºæäº¤æˆ‘ä»¬æ•´ä¸ªç¨‹åºåˆ°YARNé›†ç¾¤ï¼Œæäº¤çš„æ˜¯å°è£…äº†MapReduceç¨‹åºç›¸å…³è¿è¡Œå‚æ•°çš„jobå¯¹è±¡\n\nHadoopåºåˆ—åŒ–åºåˆ—åŒ–å°±æ˜¯æŠŠå†…å­˜ä¸­çš„å¯¹è±¡ï¼Œè½¬æ¢æˆå­—èŠ‚åºåˆ—ï¼ˆæˆ–å…¶ä»–æ•°æ®ä¼ è¾“åè®®ï¼‰ä»¥ä¾¿äºå­˜å‚¨åˆ°ç£ç›˜ï¼ˆæŒä¹…åŒ–ï¼‰å’Œç½‘ç»œä¼ è¾“ã€‚ \nååºåˆ—åŒ–å°±æ˜¯å°†æ”¶åˆ°å­—èŠ‚åºåˆ—ï¼ˆæˆ–å…¶ä»–æ•°æ®ä¼ è¾“åè®®ï¼‰æˆ–è€…æ˜¯ç£ç›˜çš„æŒä¹…åŒ–æ•°æ®ï¼Œè½¬æ¢æˆå†…å­˜ä¸­çš„å¯¹è±¡ã€‚\nä¸ºä»€ä¹ˆè¦åºåˆ—åŒ–?        ä¸€èˆ¬æ¥è¯´ï¼Œâ€œæ´»çš„â€å¯¹è±¡åªç”Ÿå­˜åœ¨å†…å­˜é‡Œï¼Œå…³æœºæ–­ç”µå°±æ²¡æœ‰äº†ã€‚è€Œä¸”â€œæ´»çš„â€å¯¹è±¡åªèƒ½ç”±æœ¬åœ°çš„è¿›ç¨‹ä½¿ç”¨ï¼Œä¸èƒ½è¢«å‘é€åˆ°ç½‘ç»œä¸Šçš„å¦å¤–ä¸€å°è®¡ç®—æœºã€‚ ç„¶è€Œåºåˆ—åŒ–å¯ä»¥å­˜å‚¨â€œæ´»çš„â€å¯¹è±¡ï¼Œå¯ä»¥å°†â€œæ´»çš„â€å¯¹è±¡å‘é€åˆ°è¿œç¨‹è®¡ç®—æœºã€‚ä¸ºä»€ä¹ˆä¸ç”¨Javaçš„åºåˆ—åŒ–?        Javaçš„åºåˆ—åŒ–æ˜¯ä¸€ä¸ªé‡é‡çº§åºåˆ—åŒ–æ¡†æ¶ï¼ˆSerializableï¼‰ï¼Œä¸€ä¸ªå¯¹è±¡è¢«åºåˆ—åŒ–åï¼Œä¼šé™„å¸¦å¾ˆå¤šé¢å¤–çš„ä¿¡æ¯ï¼ˆå„ç§æ ¡éªŒä¿¡æ¯ï¼ŒHeaderï¼Œç»§æ‰¿ä½“ç³»ç­‰ï¼‰ï¼Œä¸ä¾¿äºåœ¨ç½‘ç»œä¸­é«˜æ•ˆä¼ è¾“ã€‚æ‰€ä»¥ï¼ŒHadoopè‡ªå·±å¼€å‘äº†ä¸€å¥—åºåˆ—åŒ–æœºåˆ¶ï¼ˆWritableï¼‰ã€‚Hadoopåºåˆ—åŒ–ç‰¹ç‚¹ï¼šï¼ˆ1ï¼‰ç´§å‡‘ ï¼šé«˜æ•ˆä½¿ç”¨å­˜å‚¨ç©ºé—´ã€‚ï¼ˆ2ï¼‰å¿«é€Ÿï¼šè¯»å†™æ•°æ®çš„é¢å¤–å¼€é”€å°ã€‚ï¼ˆ3ï¼‰äº’æ“ä½œï¼šæ”¯æŒå¤šè¯­è¨€çš„äº¤äº’\nè‡ªå®šä¹‰beanå¯¹è±¡å®ç°åºåˆ—åŒ–æ¥å£ï¼ˆWritableï¼‰ï¼ˆ1ï¼‰å¿…é¡»å®ç°Writableæ¥å£ï¼ˆ2ï¼‰ååºåˆ—åŒ–æ—¶ï¼Œéœ€è¦åå°„è°ƒç”¨ç©ºå‚æ„é€ å‡½æ•°ï¼Œæ‰€ä»¥å¿…é¡»æœ‰ç©ºå‚æ„é€ \npublic FlowBean() {\n\tsuper();\n}\nï¼ˆ3ï¼‰é‡å†™åºåˆ—åŒ–æ–¹æ³•\n@Override\npublic void write(DataOutput out) throws IOException {\n\tout.writeLong(upFlow);\n\tout.writeLong(downFlow);\n\tout.writeLong(sumFlow);\n}\nï¼ˆ4ï¼‰é‡å†™ååºåˆ—åŒ–æ–¹æ³•\n@Override\npublic void readFields(DataInput in) throws IOException {\n\tupFlow = in.readLong();\n\tdownFlow = in.readLong();\n\tsumFlow = in.readLong();\n}\nï¼ˆ5ï¼‰æ³¨æ„ååºåˆ—åŒ–çš„é¡ºåºå’Œåºåˆ—åŒ–çš„é¡ºåºå®Œå…¨ä¸€è‡´ï¼ˆ6ï¼‰è¦æƒ³æŠŠç»“æœæ˜¾ç¤ºåœ¨æ–‡ä»¶ä¸­ï¼Œéœ€è¦é‡å†™toString()ï¼Œå¯ç”¨â€\\tâ€åˆ†å¼€ï¼Œæ–¹ä¾¿åç»­ç”¨ã€‚ï¼ˆ7ï¼‰å¦‚æœéœ€è¦å°†è‡ªå®šä¹‰çš„beanæ”¾åœ¨keyä¸­ä¼ è¾“ï¼Œåˆ™è¿˜éœ€è¦å®ç°Comparableæ¥å£ï¼Œå› ä¸ºMapReduceæ¡†ä¸­çš„Shuffleè¿‡ç¨‹è¦æ±‚å¯¹keyå¿…é¡»èƒ½æ’åºã€‚è¯¦è§åé¢æ’åºæ¡ˆä¾‹ã€‚\n@Override\npublic int compareTo(FlowBean o) {\n\t// å€’åºæ’åˆ—ï¼Œä»å¤§åˆ°å°\n\treturn this.sumFlow &gt; o.getSumFlow() ? -1 : 1;\n}\nMapReduceæ¡†æ¶åŸç†\nInputFormatæ•°æ®è¾“å…¥MapTaskå¹¶è¡Œåº¦å†³å®šæœºåˆ¶\næ•°æ®å—ï¼šBlockæ˜¯HDFSç‰©ç†ä¸ŠæŠŠæ•°æ®åˆ†æˆä¸€å—ä¸€å—ã€‚æ•°æ®å—æ˜¯HDFSå­˜å‚¨æ•°æ®å•ä½ã€‚\næ•°æ®åˆ‡ç‰‡ï¼šæ•°æ®åˆ‡ç‰‡åªæ˜¯åœ¨é€»è¾‘ä¸Šå¯¹è¾“å…¥è¿›è¡Œåˆ†ç‰‡ï¼Œå¹¶ä¸ä¼šåœ¨ç£ç›˜ä¸Šå°†å…¶åˆ‡åˆ†æˆç‰‡è¿›è¡Œå­˜å‚¨ã€‚æ•°æ®åˆ‡ç‰‡æ˜¯MapReduceç¨‹åºè®¡ç®—è¾“å…¥æ•°æ®çš„å•ä½ï¼Œä¸€ä¸ªåˆ‡ç‰‡ä¼šå¯¹åº”å¯åŠ¨ä¸€ä¸ªMapTaskã€‚\n1)ä¸€ä¸ªJobçš„Mapé˜¶æ®µå¹¶è¡Œåº¦ç”± å®¢æˆ·ç«¯åœ¨æäº¤Jobæ—¶çš„åˆ‡ç‰‡æ•°å†³å®š2)æ¯ä¸€ä¸ªSpliåˆ‡ç‰‡åˆ†é…ä¸€ä¸ªMapTaskå¹¶è¡Œå®ä¾‹å¤„ç†3)é»˜è®¤æƒ…å†µä¸‹ï¼Œåˆ‡å¤§å°=BlockSize4)åˆ‡ç‰‡æ—¶ä¸è€ƒè™‘æ•°æ®é›†æ•´ä½“,è€Œæ˜¯é€ä¸ªé’ˆå¯¹æ¯ä¸€ä¸ªæ–‡ä»¶å•ç‹¬åˆ‡ç‰‡\nJobæäº¤æµç¨‹æºç è¯¦è§£\nwaitForCompletion()\n\nsubmit();\n\n// 1å»ºç«‹è¿æ¥\nconnect();\t\n// 1ï¼‰åˆ›å»ºæäº¤Jobçš„ä»£ç†\nnew Cluster(getConfiguration());\n// 2ï¼‰åˆ¤æ–­æ˜¯æœ¬åœ°è¿è¡Œç¯å¢ƒè¿˜æ˜¯yarné›†ç¾¤è¿è¡Œç¯å¢ƒ\ninitialize(jobTrackAddr, conf); \n\n// 2 æäº¤job\nsubmitter.submitJobInternal(Job.this, cluster)\n\n// 1ï¼‰åˆ›å»ºç»™é›†ç¾¤æäº¤æ•°æ®çš„Stagè·¯å¾„\nPath jobStagingArea = JobSubmissionFiles.getStagingDir(cluster, conf);\n\n// 2ï¼‰è·å–jobid ï¼Œå¹¶åˆ›å»ºJobè·¯å¾„\nJobID jobId = submitClient.getNewJobID();\n\n// 3ï¼‰æ‹·è´jaråŒ…åˆ°é›†ç¾¤\ncopyAndConfigureFiles(job, submitJobDir);\t\nrUploader.uploadFiles(job, jobSubmitDir);\n\n// 4ï¼‰è®¡ç®—åˆ‡ç‰‡ï¼Œç”Ÿæˆåˆ‡ç‰‡è§„åˆ’æ–‡ä»¶\nwriteSplits(job, submitJobDir);\nmaps = writeNewSplits(job, jobSubmitDir);\ninput.getSplits(job);\n\n// 5ï¼‰å‘Stagè·¯å¾„å†™XMLé…ç½®æ–‡ä»¶\nwriteConf(conf, submitJobFile);\nconf.writeXml(out);\n\n// 6ï¼‰æäº¤Job,è¿”å›æäº¤çŠ¶æ€\nstatus = submitClient.submitJob(jobId, submitJobDir.toString(),job.getCredentials());\n\nFileInputFormatåˆ‡ç‰‡æºç è§£æ\n(1)ç¨‹åºå…ˆæ‰¾åˆ°ä½ æ•°æ®å­˜å‚¨çš„ç›®å½•ã€‚(2)å¼€å§‹éå†å¤„ç†(è§„åˆ’åˆ‡ç‰‡)ç›®å½•ä¸‹çš„æ¯ä¸€ä¸ªæ–‡ä»¶(3)éå†ç¬¬-ä¸ªæ–‡ä»¶ss.txt    a)è·å–æ–‡ä»¶å¤§å°fs.sizeOf(ss .txt)    b)è®¡ç®—åˆ‡ç‰‡å¤§å°.        computeSplitSize(Math. max(minSize,Math .min(maxSize,blocksize)))=blocksize= l 28M    c) é»˜è®¤æƒ…å†µä¸‹ï¼Œåˆ‡ç‰‡å¤§å°=blocksize    d)å¼€å§‹åˆ‡ï¼Œå½¢æˆç¬¬1ä¸ªåˆ‡ç‰‡: ss.txt- - -0:128Mç¬¬2ä¸ªåˆ‡ç‰‡ss.txt- 128:256M ç¬¬3ä¸ªåˆ‡ç‰‡ss.txtä¸€256M:300M        (æ¯æ¬¡åˆ‡ç‰‡æ—¶ï¼Œéƒ½è¦åˆ¤æ–­åˆ‡å®Œå‰©ä¸‹çš„éƒ¨åˆ†æ˜¯å¦å¤§äºå—çš„1 .1å€ï¼Œä¸å¤§äº1 .1å€å°±åˆ’åˆ†-å—åˆ‡ç‰‡)    e)å°†åˆ‡ç‰‡ä¿¡æ¯å†™åˆ°ä¸€ä¸ªåˆ‡ç‰‡è§„åˆ’æ–‡ä»¶ä¸­    f)æ•´ä¸ªåˆ‡ç‰‡çš„æ ¸å¿ƒè¿‡ç¨‹åœ¨getS$plit()æ–¹ æ³•ä¸­å®Œæˆ    g) InputSplitåªè®°å½• äº†åˆ‡ç‰‡çš„å…ƒæ•°æ®ä¿¡æ¯ï¼Œæ¯”å¦‚èµ·å§‹ä½ç½®ã€é•¿åº¦ä»¥åŠæ‰€åœ¨çš„èŠ‚åˆ—è¡¨ç­‰ã€‚(4)æäº¤åˆ‡ç‰‡è§„åˆ’æ–‡ä»¶åˆ°YARNä¸Šï¼ŒYARN ä¸Šçš„MrAppMasterå°±å¯ä»¥æ ¹æ®åˆ‡ç‰‡è§„åˆ’æ–‡ä»¶è®¡ç®—å¼€å¯MapTaskä¸ªæ•°ã€‚\nFileInputFormatåˆ‡ç‰‡æœºåˆ¶\n(1)ç®€å•åœ°æŒ‰ç…§æ–‡ä»¶çš„å†…å®¹é•¿åº¦è¿›è¡Œåˆ‡ç‰‡(2) åˆ‡ç‰‡å¤§å°ï¼Œé»˜è®¤ç­‰äºBlockå¤§å°(3)åˆ‡ç‰‡æ—¶ä¸è€ƒè™‘æ•°æ®é›†æ•´ä½“ï¼Œè€Œæ˜¯é€ä¸ªé’ˆå¯¹æ¯ä¸€ä¸ªæ–‡ä»¶å•ç‹¬åˆ‡ç‰‡\nFileInputFormatåˆ‡ç‰‡å¤§å°çš„å‚æ•°é…ç½®\n(1)æºç ä¸­è®¡ç®—åˆ‡ç‰‡å¤§å°çš„å…¬å¼.Math. max(ninSize, Math. min( maxSize, blockS ize));mapreduce. input. fileinputformat. split. minsize=lé»˜è®¤å€¼ä¸º1mapreduce. input fileinputformat. split maxsize= Long MAXValueé»˜è®¤å€¼Long .MAXValueå› æ­¤ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œåˆ‡ç‰‡å¤§å°=blocksizeã€‚(2)åˆ‡ç‰‡å¤§å°è®¾ç½®maxsize (åˆ‡ç‰‡æœ€å¤§å€¼) :å‚æ•°å¦‚æœè°ƒå¾—æ¯”blockSizeå°ï¼Œåˆ™ä¼šè®©åˆ‡ç‰‡å˜å°ï¼Œè€Œä¸”å°±ç­‰äºé…ç½®çš„è¿™ä¸ªå‚æ•°çš„å€¼ã€‚minsize (åˆ‡ç‰‡ æœ€å°å€¼) :å‚æ•°è°ƒçš„æ¯”blockSizeå¤§ï¼Œ åˆ™å¯ä»¥è®©åˆ‡ç‰‡å˜å¾—æ¯”blockSizeè¿˜å¤§ã€‚(3)è·å–åˆ‡ç‰‡ä¿¡æ¯API//è·å–åˆ‡ç‰‡çš„æ–‡ä»¶åç§°String name = inputSplit. getPath() . getName() ;//æ ¹æ®æ–‡ä»¶ç±»å‹è·å–åˆ‡ç‰‡ä¿¡æ¯Fi leSplit inputSplit = (FileSplit) context. getInputSplit () ;\nTextInputFormatâ€‹        FileInputFormatå¸¸è§çš„æ¥å£å®ç°ç±»åŒ…æ‹¬ï¼šTextInputFormatã€KeyValueTextInputFormatã€NLineInputFormatã€CombineTextInputFormatå’Œè‡ªå®šä¹‰InputFormatç­‰ã€‚\nâ€‹        TextInputFormatæ˜¯é»˜è®¤çš„FileInputFormatå®ç°ç±»ã€‚æŒ‰è¡Œè¯»å–æ¯æ¡è®°å½•ã€‚é”®æ˜¯å­˜å‚¨è¯¥è¡Œåœ¨æ•´ä¸ªæ–‡ä»¶ä¸­çš„èµ·å§‹å­—èŠ‚åç§»é‡ï¼Œ LongWritableç±»å‹ã€‚å€¼æ˜¯è¿™è¡Œçš„å†…å®¹ï¼Œä¸åŒ…æ‹¬ä»»ä½•è¡Œç»ˆæ­¢ç¬¦ï¼ˆæ¢è¡Œç¬¦å’Œå›è½¦ç¬¦ï¼‰ï¼ŒTextç±»å‹ã€‚\nä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œæ¯”å¦‚ï¼Œä¸€ä¸ªåˆ†ç‰‡åŒ…å«äº†å¦‚ä¸‹4æ¡æ–‡æœ¬è®°å½•ã€‚\n\n\n\n\n\n\n\n\n\nRich learning form\nIntelligent learning engine\nLearning more convenient\nFrom the real demand for more close to the enterprise\næ¯æ¡è®°å½•è¡¨ç¤ºä¸ºä»¥ä¸‹é”®/å€¼å¯¹ï¼š\n\n\n\n\n\n\n\n\n\n(0,Rich learning form)\n(20,Intelligent learning engine)\n(49,Learning more convenient)\n(74,From the real demand for more close to the enterprise)\nCombineTextInputFormatåˆ‡ç‰‡æœºåˆ¶â€‹        æ¡†æ¶é»˜è®¤çš„TextInputFormatåˆ‡ç‰‡æœºåˆ¶æ˜¯å¯¹ä»»åŠ¡æŒ‰æ–‡ä»¶è§„åˆ’åˆ‡ç‰‡ï¼Œä¸ç®¡æ–‡ä»¶å¤šå°ï¼Œéƒ½ä¼šæ˜¯ä¸€ä¸ªå•ç‹¬çš„åˆ‡ç‰‡ï¼Œéƒ½ä¼šäº¤ç»™ä¸€ä¸ªMapTaskï¼Œè¿™æ ·å¦‚æœæœ‰å¤§é‡å°æ–‡ä»¶ï¼Œå°±ä¼šäº§ç”Ÿå¤§é‡çš„MapTaskï¼Œå¤„ç†æ•ˆç‡æå…¶ä½ä¸‹ã€‚1ï¼‰åº”ç”¨åœºæ™¯ï¼šCombineTextInputFormatç”¨äºå°æ–‡ä»¶è¿‡å¤šçš„åœºæ™¯ï¼Œå®ƒå¯ä»¥å°†å¤šä¸ªå°æ–‡ä»¶ä»é€»è¾‘ä¸Šè§„åˆ’åˆ°ä¸€ä¸ªåˆ‡ç‰‡ä¸­ï¼Œè¿™æ ·ï¼Œå¤šä¸ªå°æ–‡ä»¶å°±å¯ä»¥äº¤ç»™ä¸€ä¸ªMapTaskå¤„ç†ã€‚2ï¼‰è™šæ‹Ÿå­˜å‚¨åˆ‡ç‰‡æœ€å¤§å€¼è®¾ç½®CombineTextInputFormat.setMaxInputSplitSize(job, 4194304);// 4mæ³¨æ„ï¼šè™šæ‹Ÿå­˜å‚¨åˆ‡ç‰‡æœ€å¤§å€¼è®¾ç½®æœ€å¥½æ ¹æ®å®é™…çš„å°æ–‡ä»¶å¤§å°æƒ…å†µæ¥è®¾ç½®å…·ä½“çš„å€¼ã€‚3ï¼‰åˆ‡ç‰‡æœºåˆ¶ç”Ÿæˆåˆ‡ç‰‡è¿‡ç¨‹åŒ…æ‹¬ï¼šè™šæ‹Ÿå­˜å‚¨è¿‡ç¨‹å’Œåˆ‡ç‰‡è¿‡ç¨‹äºŒéƒ¨åˆ†ã€‚\nå­˜å‚¨ä¸åˆ‡ç‰‡è¿‡ç¨‹\nï¼ˆ1ï¼‰è™šæ‹Ÿå­˜å‚¨è¿‡ç¨‹ï¼š        å°†è¾“å…¥ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶å¤§å°ï¼Œä¾æ¬¡å’Œè®¾ç½®çš„setMaxInputSplitSizeå€¼æ¯”è¾ƒï¼Œå¦‚æœä¸å¤§äºè®¾ç½®çš„æœ€å¤§å€¼ï¼Œé€»è¾‘ä¸Šåˆ’åˆ†ä¸€ä¸ªå—ã€‚å¦‚æœè¾“å…¥æ–‡ä»¶å¤§äºè®¾ç½®çš„æœ€å¤§å€¼ä¸”å¤§äºä¸¤å€ï¼Œé‚£ä¹ˆä»¥æœ€å¤§å€¼åˆ‡å‰²ä¸€å—ï¼›å½“å‰©ä½™æ•°æ®å¤§å°è¶…è¿‡è®¾ç½®çš„æœ€å¤§å€¼ä¸”ä¸å¤§äºæœ€å¤§å€¼2å€ï¼Œæ­¤æ—¶å°†æ–‡ä»¶å‡åˆ†æˆ2ä¸ªè™šæ‹Ÿå­˜å‚¨å—ï¼ˆé˜²æ­¢å‡ºç°å¤ªå°åˆ‡ç‰‡ï¼‰ã€‚        ä¾‹å¦‚setMaxInputSplitSizeå€¼ä¸º4Mï¼Œè¾“å…¥æ–‡ä»¶å¤§å°ä¸º8.02Mï¼Œåˆ™å…ˆé€»è¾‘ä¸Šåˆ†æˆä¸€ä¸ª4Mã€‚å‰©ä½™çš„å¤§å°ä¸º4.02Mï¼Œå¦‚æœæŒ‰ç…§4Mé€»è¾‘åˆ’åˆ†ï¼Œå°±ä¼šå‡ºç°0.02Mçš„å°çš„è™šæ‹Ÿå­˜å‚¨æ–‡ä»¶ï¼Œæ‰€ä»¥å°†å‰©ä½™çš„4.02Mæ–‡ä»¶åˆ‡åˆ†æˆï¼ˆ2.01Må’Œ2.01Mï¼‰ä¸¤ä¸ªæ–‡ä»¶ã€‚ï¼ˆ2ï¼‰åˆ‡ç‰‡è¿‡ç¨‹ï¼š    ï¼ˆaï¼‰åˆ¤æ–­è™šæ‹Ÿå­˜å‚¨çš„æ–‡ä»¶å¤§å°æ˜¯å¦å¤§äºsetMaxInputSplitSizeå€¼ï¼Œå¤§äºç­‰äºåˆ™å•ç‹¬å½¢æˆä¸€ä¸ªåˆ‡ç‰‡ã€‚    ï¼ˆbï¼‰å¦‚æœä¸å¤§äºåˆ™è·Ÿä¸‹ä¸€ä¸ªè™šæ‹Ÿå­˜å‚¨æ–‡ä»¶è¿›è¡Œåˆå¹¶ï¼Œå…±åŒå½¢æˆä¸€ä¸ªåˆ‡ç‰‡ã€‚    ï¼ˆcï¼‰æµ‹è¯•ä¸¾ä¾‹ï¼šæœ‰4ä¸ªå°æ–‡ä»¶å¤§å°åˆ†åˆ«ä¸º1.7Mã€5.1Mã€3.4Mä»¥åŠ6.8Mè¿™å››ä¸ªå°æ–‡ä»¶ï¼Œåˆ™è™šæ‹Ÿå­˜å‚¨ä¹‹åå½¢æˆ6ä¸ª        æ–‡ä»¶å—ï¼Œå¤§å°åˆ†åˆ«ä¸ºï¼š1.7Mï¼Œï¼ˆ2.55Mã€2.55Mï¼‰ï¼Œ3.4Mä»¥åŠï¼ˆ3.4Mã€3.4Mï¼‰æœ€ç»ˆä¼šå½¢æˆ3ä¸ªåˆ‡ç‰‡ï¼Œå¤§å°åˆ†        åˆ«ä¸ºï¼šï¼ˆ1.7+2.55ï¼‰Mï¼Œï¼ˆ2.55+3.4ï¼‰Mï¼Œï¼ˆ3.4+3.4ï¼‰M\nMapReduceå·¥ä½œæµç¨‹\n\nä¸Šé¢çš„æµç¨‹æ˜¯æ•´ä¸ªMapReduceæœ€å…¨å·¥ä½œæµç¨‹ï¼Œä½†æ˜¯Shuffleè¿‡ç¨‹åªæ˜¯ä»ç¬¬7æ­¥å¼€å§‹åˆ°ç¬¬16æ­¥ç»“æŸï¼Œå…·ä½“Shuffleè¿‡ç¨‹è¯¦è§£ï¼Œå¦‚ä¸‹ï¼šï¼ˆ1ï¼‰MapTaskæ”¶é›†æˆ‘ä»¬çš„map()æ–¹æ³•è¾“å‡ºçš„kvå¯¹ï¼Œæ”¾åˆ°å†…å­˜ç¼“å†²åŒºä¸­ï¼ˆ2ï¼‰ä»å†…å­˜ç¼“å†²åŒºä¸æ–­æº¢å‡ºæœ¬åœ°ç£ç›˜æ–‡ä»¶ï¼Œå¯èƒ½ä¼šæº¢å‡ºå¤šä¸ªæ–‡ä»¶ï¼ˆ3ï¼‰å¤šä¸ªæº¢å‡ºæ–‡ä»¶ä¼šè¢«åˆå¹¶æˆå¤§çš„æº¢å‡ºæ–‡ä»¶ï¼ˆ4ï¼‰åœ¨æº¢å‡ºè¿‡ç¨‹åŠåˆå¹¶çš„è¿‡ç¨‹ä¸­ï¼Œéƒ½è¦è°ƒç”¨Partitionerè¿›è¡Œåˆ†åŒºå’Œé’ˆå¯¹keyè¿›è¡Œæ’åºï¼ˆ5ï¼‰ReduceTaskæ ¹æ®è‡ªå·±çš„åˆ†åŒºå·ï¼Œå»å„ä¸ªMapTaskæœºå™¨ä¸Šå–ç›¸åº”çš„ç»“æœåˆ†åŒºæ•°æ®ï¼ˆ6ï¼‰ReduceTaskä¼šæŠ“å–åˆ°åŒä¸€ä¸ªåˆ†åŒºçš„æ¥è‡ªä¸åŒMapTaskçš„ç»“æœæ–‡ä»¶ï¼ŒReduceTaskä¼šå°†è¿™äº›æ–‡ä»¶å†è¿›è¡Œåˆå¹¶ï¼ˆå½’å¹¶æ’åºï¼‰ï¼ˆ7ï¼‰åˆå¹¶æˆå¤§æ–‡ä»¶åï¼ŒShuffleçš„è¿‡ç¨‹ä¹Ÿå°±ç»“æŸäº†ï¼Œåé¢è¿›å…¥ReduceTaskçš„é€»è¾‘è¿ç®—è¿‡ç¨‹ï¼ˆä»æ–‡ä»¶ä¸­å–å‡ºä¸€ä¸ªä¸€ä¸ªçš„é”®å€¼å¯¹Groupï¼Œè°ƒç”¨ç”¨æˆ·è‡ªå®šä¹‰çš„reduce()æ–¹æ³•ï¼‰æ³¨æ„ï¼šï¼ˆ1ï¼‰Shuffleä¸­çš„ç¼“å†²åŒºå¤§å°ä¼šå½±å“åˆ°MapReduceç¨‹åºçš„æ‰§è¡Œæ•ˆç‡ï¼ŒåŸåˆ™ä¸Šè¯´ï¼Œç¼“å†²åŒºè¶Šå¤§ï¼Œç£ç›˜ioçš„æ¬¡æ•°è¶Šå°‘ï¼Œæ‰§è¡Œé€Ÿåº¦å°±è¶Šå¿«ã€‚ï¼ˆ2ï¼‰ç¼“å†²åŒºçš„å¤§å°å¯ä»¥é€šè¿‡å‚æ•°è°ƒæ•´ï¼Œå‚æ•°ï¼šmapreduce.task.io.sort.mbé»˜è®¤100Mã€‚\nShuffleæœºåˆ¶Mapæ–¹æ³•ä¹‹åï¼ŒReduceæ–¹æ³•ä¹‹å‰çš„æ•°æ®å¤„ç†è¿‡ç¨‹ç§°ä¹‹ä¸ºShuffleã€‚\n\nPartitionåˆ†åŒº\né—®é¢˜å¼•å‡ºè¦æ±‚å°†ç»Ÿè®¡ç»“æœæŒ‰ç…§æ¡ä»¶è¾“å‡ºåˆ°ä¸åŒæ–‡ä»¶ä¸­(åˆ†åŒº) .æ¯”å¦‚:å°†ç»Ÿè®¡ç»“æœæŒ‰ç…§æ‰‹æœºå½’å±åœ°ä¸åŒçœä»½è¾“å‡ºåˆ°ä¸åŒæ–‡ä»¶ä¸­(åˆ†åŒº)\né»˜è®¤Partitioneråˆ†åŒº\n\npublic class HashRartitioner&lt;K, V&gt; extends Partitioner&lt;K, v&gt; {\n    public int getPartition(K key, v value, int numReduceTasks) {\n    \treturn (key.hashCode() &amp; Integer.MAX_VALUE) % numReduceTasks;\n    }\n}\né»˜è®¤åˆ†åŒºæ˜¯æ ¹æ®keyçš„hashCodeå¯¹Reduce Iasksä¸ªæ•°å–æ¨¡å¾—åˆ°çš„ã€‚ç”¨æˆ·æ²¡æ³•æ§åˆ¶å“ªä¸ªkeyå­˜å‚¨åˆ°å“ªä¸ªåˆ†åŒºã€‚\n\nè‡ªå®šä¹‰Partitioneræ­¥éª¤(1) è‡ªå®šä¹‰ç±»ç»§æ‰¿Partitioner, é‡å†™getPartition()æ–¹æ³•\n\npublic class C ustomPar titioner extends Partitioner &lt;Textï¼ŒFlowBe an&gt; {\n    @Override\n    public int getPartition (Text key, FlowBean value, int numPartitions) {\n    //æ§åˆ¶åˆ†åŒºä»£ç é€»è¾‘\n    .. ..\n    return partition;\n    }\n}\nâ€‹    (2)åœ¨Jobé©±åŠ¨ä¸­ï¼Œè®¾ç½®è‡ªå®šä¹‰Partitioner\njob. setP artitionerClas s(CustomPartitioner.class);\nâ€‹    (3)è‡ªå®šä¹‰Partitionåï¼Œ è¦æ ¹æ®è‡ªå®šä¹‰P artitionerçš„é€»è¾‘è®¾ç½®ç›¸åº”æ•°é‡çš„ReduceTask\njob. setNumReduceTasks(5);\n\nåˆ†åŒºæ€»ç»“(1)å¦‚æœReduceTaskçš„æ•° é‡&gt; getPartitionçš„ç»“æœæ•°,åˆ™ä¼šå¤šäº§ç”Ÿå‡ ä¸ªç©ºçš„è¾“å‡ºæ–‡ä»¶pat-r 000xx;(2)å¦‚æœ1&lt;ReduceTaskçš„æ•° é‡&lt;getP artitionçš„ç»“æœæ•°ï¼Œåˆ™æœ‰-éƒ¨åˆ†åˆ†åŒºæ•°æ®æ— å¤„å®‰æ”¾ï¼Œä¼šException;(3)å¦‚æœReduceTaskçš„æ•° é‡=1ï¼Œåˆ™ä¸ç®¡MapTaskç«¯è¾“å‡ºå¤šå°‘ä¸ªåˆ†åŒºæ–‡ä»¶ï¼Œæœ€ç»ˆç»“æœéƒ½äº¤ç»™è¿™ä¸€ä¸ªReduceTaskï¼Œæœ€ç»ˆä¹Ÿå°±åªä¼šäº§ç”Ÿä¸€ä¸ªç»“æœæ–‡ä»¶pat-00000;(4)åˆ†åŒºå·å¿…é¡»ä»é›¶å¼€å§‹,é€ä¸€ç´¯åŠ ã€‚\nç´ ä¾‹åˆ†æä¾‹å¦‚:å‡è®¾è‡ªå®šä¹‰åˆ†åŒºæ•°ä¸º5ï¼Œåˆ™(1) job.setNumReduceTasks(1)ï¼Œ ä¼šæ­£å¸¸è¿è¡Œï¼Œ åªä¸è¿‡ä¼šäº§ç”Ÿä¸€ä¸ªè¾“å‡ºæ–‡ä»¶(2) job.setENumReduceTasks(2), ä¼šæŠ¥é”™(3) job.setNumReduceTasks(6), å¤§äº5ï¼Œç¨‹åºä¼šæ­£å¸¸è¿è¡Œï¼Œä¼šäº§ç”Ÿç©ºæ–‡ä»¶\n\nWritableComparableæ’åºâ€‹        æ’åºæ˜¯MapReduc eæ¡†æ¶ä¸­æœ€é‡è¦çš„æ“ä½œä¹‹ä¸€ã€‚â€‹        MapTaskå’ŒReduceTaskå‡ä¼šå¯¹æ•°æ®æŒ‰ç…§keyè¿›è¡Œæ’åºã€‚è¯¥æ“ä½œå±äºHadoopçš„é»˜è®¤è¡Œä¸ºã€‚ä»»ä½•åº”ç”¨ç¨‹åºä¸­çš„æ•°æ®å‡ä¼šè¢«æ’åºï¼Œè€Œä¸ç®¡é€»è¾‘ä¸Šæ˜¯å¦éœ€è¦ã€‚â€‹        é»˜è®¤æ’åºæ˜¯æŒ‰ç…§å­—å…¸é¡ºåºæ’åºï¼Œä¸”å®ç°è¯¥æ’åºçš„æ–¹æ³•æ˜¯å¿«é€Ÿæ’åºã€‚\nâ€‹        å¯¹äºMapTask,å®ƒä¼šå°†å¤„ç†çš„ç»“æœæš‚æ—¶æ”¾åˆ°ç¯å½¢ç¼“å†²åŒºä¸­ï¼Œå½“ç¯å½¢ç¼“å†²åŒºä½¿ç”¨ç‡è¾¾åˆ°ä¸€å®šé˜ˆå€¼åï¼Œå†å¯¹ç¼“å†²åŒºä¸­çš„æ•°æ®è¿›è¡Œä¸€æ¬¡å¿«é€Ÿæ’åºï¼Œå¹¶å°†è¿™äº›æœ‰åºæ•°æ®æº¢å†™åˆ°ç£ç›˜.ä¸Šï¼Œè€Œå½“æ•°æ®å¤„ç†å®Œæ¯•åï¼Œå®ƒä¼šå¯¹ç£ç›˜.ä¸Šæ‰€æœ‰æ–‡ä»¶è¿›è¡Œå½’å¹¶æ’åºã€‚â€‹        å¯¹äºReduceTaskï¼Œå®ƒä»æ¯ä¸ªM ap Taskä¸Šè¿œç¨‹æ‹·è´ç›¸åº”çš„æ•°æ®æ–‡ä»¶ï¼Œå¦‚æœæ–‡ä»¶å¤§å°è¶…è¿‡ä¸€ å®šé˜ˆå€¼ï¼Œåˆ™æº¢å†™ç£ç›˜ä¸Šï¼Œå¦åˆ™å­˜å‚¨åœ¨å†…å­˜ä¸­ã€‚å¦‚æœç£ç›˜ä¸Šæ–‡ä»¶æ•°ç›®è¾¾åˆ°-å®šé˜ˆå€¼ï¼Œåˆ™è¿›è¡Œä¸€æ¬¡å½’å¹¶æ’åºä»¥ç”Ÿæˆä¸€ä¸ªæ›´å¤§æ–‡ä»¶;å¦‚æœå†…å­˜ä¸­æ–‡ä»¶å¤§å°æˆ–è€…æ•°ç›®è¶…è¿‡ä¸€å®šé˜ˆå€¼ï¼Œåˆ™è¿›è¡Œä¸€æ¬¡åˆå¹¶åå°†æ•°æ®æº¢å†™åˆ°ç£ç›˜ä¸Šã€‚å½“æ‰€æœ‰æ•°æ®æ‹·è´å®Œæ¯•åï¼ŒReduceTaskç»Ÿ-å¯¹å†…å­˜å’Œç£ç›˜ä¸Šçš„æ‰€æœ‰æ•°æ®è¿›è¡Œä¸€æ¬¡å½’å¹¶æ’åºã€‚\næ’åºåˆ†ç±»\n(1)éƒ¨åˆ†æ’åºMapReduceæ ¹æ®è¾“å…¥è®°å½•çš„é”®å¯¹æ•°æ®é›†æ’åºã€‚ä¿è¯è¾“å‡ºçš„æ¯ä¸ªæ–‡ä»¶å†…éƒ¨æœ‰åºã€‚(2)å…¨æ’åº.æœ€ç»ˆè¾“å‡ºç»“æœåªæœ‰ä¸€ä¸ªæ–‡ä»¶ï¼Œä¸”æ–‡ä»¶å†…éƒ¨æœ‰åºã€‚å®ç°æ–¹å¼æ˜¯åªè®¾ç½®ä¸€ä¸ªReduceTaskã€‚ ä½†è¯¥æ–¹æ³•åœ¨å¤„ç†å¤§å‹æ–‡ä»¶æ—¶æ•ˆç‡æä½ï¼Œå› ä¸º-å°æœºå™¨å¤„ç†æ‰€æœ‰æ–‡ä»¶ï¼Œå®Œå…¨ä¸§å¤±äº† MapRe duceæ‰€æä¾›çš„å¹¶è¡Œæ¶æ„ã€‚(3)è¾…åŠ©æ’åº: (GroupingCompar atoråˆ†ç»„)åœ¨Reduceç«¯å¯¹keyè¿›è¡Œåˆ†ç»„ã€‚åº”ç”¨äº:åœ¨æ¥æ”¶çš„keyä¸ºbeanå¯¹è±¡æ—¶ï¼Œæƒ³è®©ä¸€ä¸ªæˆ–å‡ ä¸ªå­—æ®µç›¸åŒ(å…¨éƒ¨.å­—æ®µæ¯”è¾ƒä¸ç›¸åŒ)çš„k&lt;eyè¿› å…¥åˆ°åŒä¸€ä¸ªreduceæ–¹æ³•æ—¶ï¼Œå¯ä»¥é‡‡ç”¨åˆ†ç»„æ’åºã€‚(4)äºŒæ¬¡æ’åºåœ¨è‡ªå®šä¹‰æ’åºè¿‡ç¨‹ä¸­ï¼Œå¦‚æœc ompareToä¸­çš„åˆ¤æ–­æ¡ä»¶ä¸ºä¸¤ä¸ªå³ä¸ºäºŒæ¬¡æ’åºã€‚\nè‡ªå®šä¹‰æ’åºWritableComparableåŸç†åˆ†æ\nbeanå¯¹è±¡åšä¸ºkeyä¼ è¾“ï¼Œéœ€è¦å®ç°WritableComparableæ¥å£é‡å†™compareToæ–¹æ³•ï¼Œå°±å¯ä»¥å®ç°æ’åºã€‚\n@Override\npublic int compareTo(FlowBean bean) {\n\n\tint result;\n\t\t\n\t// æŒ‰ç…§æ€»æµé‡å¤§å°ï¼Œå€’åºæ’åˆ—\n\tif (this.sumFlow &gt; bean.getSumFlow()) {\n\t\tresult = -1;\n\t}else if (this.sumFlow &lt; bean.getSumFlow()) {\n\t\tresult = 1;\n\t}else {\n\t\tresult = 0;\n\t}\n\n\treturn result;\n}\nCombineråˆå¹¶(1) Combineræ˜¯MRç¨‹ åºä¸­Mapperå’ŒReducerä¹‹å¤–çš„ä¸€ç§ç»„ä»¶ã€‚(2) Combinerç»„ä»¶çš„çˆ¶ç±»å°±æ˜¯Reducerã€‚(3) Combinerå’ŒReducerçš„åŒºåˆ«åœ¨ äºè¿è¡Œçš„ä½ç½®      Combineræ˜¯åœ¨æ¯ä¸€ä¸ªMapTaskæ‰€åœ¨çš„èŠ‚ç‚¹è¿è¡Œ;      Reduceræ˜¯æ¥æ”¶å…¨å±€æ‰€æœ‰Mapperçš„è¾“å‡ºç»“æœ;(4) Combinerçš„æ„ä¹‰å°±æ˜¯å¯¹æ¯ä¸€ä¸ª MapTaskçš„è¾“å‡ºè¿›è¡Œå±€éƒ¨æ±‡æ€»ï¼Œä»¥å‡å°ç½‘ç»œä¼ è¾“é‡ã€‚(5) Combinerèƒ½å¤Ÿåº” ç”¨çš„å‰ææ˜¯ä¸èƒ½å½±å“æœ€ç»ˆçš„ä¸šåŠ¡é€»è¾‘ï¼Œè€Œä¸”ï¼ŒCombinerçš„è¾“ å‡ºkvåº”è¯¥è·ŸReducerçš„è¾“ï¼Œå…¥Ivç±»å‹è¦å¯¹åº”èµ·æ¥ã€‚\nè‡ªå®šä¹‰Combinerå®ç°æ­¥éª¤\nï¼ˆaï¼‰è‡ªå®šä¹‰ä¸€ä¸ªCombinerç»§æ‰¿Reducerï¼Œé‡å†™Reduceæ–¹æ³•\npublic class WordCountCombiner extends Reducer&lt;Text, IntWritable, Text, IntWritable&gt; {\n\n    private IntWritable outV = new IntWritable();\n\n    @Override\n    protected void reduce(Text key, Iterable&lt;IntWritable&gt; values, Context context) throws IOException, InterruptedException {\n\n        int sum = 0;\n        for (IntWritable value : values) {\n            sum += value.get();\n        }\n     \n        outV.set(sum);\n     \n        context.write(key,outV);\n    }\n}\nï¼ˆbï¼‰åœ¨Jobé©±åŠ¨ç±»ä¸­è®¾ç½®ï¼š \njob.setCombinerClass(WordCountCombiner.class);\nOutputFormatæ•°æ®è¾“å‡ºOupltFomaæ˜¯Mpduceè¾“å‡ºçš„åŸºç±»,æ‰€æœ‰å®ç°MapReduceè¾“å‡ºéƒ½å®ç°äº†OupuFormatæ¥å£ã€‚ä¸‹é¢æˆ‘ä»¬ä»‹ç»å‡ ç§å¸¸è§çš„OutputFormatå®ç°ç±»ã€‚\n\nOutputFormatå®ç°ç±»\né»˜è®¤è¾“å‡ºæ ¼å¼TextOutputFormat\nè‡ªå®šä¹‰OutputFormat\n\nåº”ç”¨åœºæ™¯:è¾“å‡ºæ•°æ®åˆ°MySQL/HBase/Elasticsearchç­‰å­˜å‚¨æ¡†æ¶ä¸­ã€‚è‡ªå®šä¹‰OutputFormatæ­¥éª¤â¢è‡ªå®šä¹‰ä¸€ä¸ªç±»ç»§æ‰¿FileOutputF ormatã€‚â¢æ”¹å†™RecordWriterï¼Œ å…·ä½“æ”¹å†™è¾“å‡ºæ•°æ®çš„æ–¹æ³•write0ã€‚\nMapReduceå†…æ ¸æºç è§£æ\n1ï¼‰Readé˜¶æ®µï¼šMapTaské€šè¿‡InputFormatè·å¾—çš„RecordReaderï¼Œä»è¾“å…¥InputSplitä¸­è§£æå‡ºä¸€ä¸ªä¸ªkey/valueã€‚\n2ï¼‰Mapé˜¶æ®µï¼šè¯¥èŠ‚ç‚¹ä¸»è¦æ˜¯å°†è§£æå‡ºçš„key/valueäº¤ç»™ç”¨æˆ·ç¼–å†™map()å‡½æ•°å¤„ç†ï¼Œå¹¶äº§ç”Ÿä¸€ç³»åˆ—æ–°çš„key/valueã€‚\n3ï¼‰Collectæ”¶é›†é˜¶æ®µï¼šåœ¨ç”¨æˆ·ç¼–å†™map()å‡½æ•°ä¸­ï¼Œå½“æ•°æ®å¤„ç†å®Œæˆåï¼Œä¸€èˆ¬ä¼šè°ƒç”¨OutputCollector.collect()è¾“å‡ºç»“æœã€‚åœ¨è¯¥å‡½æ•°å†…éƒ¨ï¼Œå®ƒä¼šå°†ç”Ÿæˆçš„key/valueåˆ†åŒºï¼ˆè°ƒç”¨Partitionerï¼‰ï¼Œå¹¶å†™å…¥ä¸€ä¸ªç¯å½¢å†…å­˜ç¼“å†²åŒºä¸­ã€‚\n4ï¼‰Spillé˜¶æ®µï¼šå³â€œæº¢å†™â€ï¼Œå½“ç¯å½¢ç¼“å†²åŒºæ»¡åï¼ŒMapReduceä¼šå°†æ•°æ®å†™åˆ°æœ¬åœ°ç£ç›˜ä¸Šï¼Œç”Ÿæˆä¸€ä¸ªä¸´æ—¶æ–‡ä»¶ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå°†æ•°æ®å†™å…¥æœ¬åœ°ç£ç›˜ä¹‹å‰ï¼Œå…ˆè¦å¯¹æ•°æ®è¿›è¡Œä¸€æ¬¡æœ¬åœ°æ’åºï¼Œå¹¶åœ¨å¿…è¦æ—¶å¯¹æ•°æ®è¿›è¡Œåˆå¹¶ã€å‹ç¼©ç­‰æ“ä½œã€‚\næº¢å†™é˜¶æ®µè¯¦æƒ…ï¼š\nâ€‹    æ­¥éª¤1ï¼šåˆ©ç”¨å¿«é€Ÿæ’åºç®—æ³•å¯¹ç¼“å­˜åŒºå†…çš„æ•°æ®è¿›è¡Œæ’åºï¼Œæ’åºæ–¹å¼æ˜¯ï¼Œå…ˆæŒ‰ç…§åˆ†åŒºç¼–å·Partitionè¿›è¡Œæ’åºï¼Œç„¶åæŒ‰ç…§keyè¿›è¡Œæ’åºã€‚è¿™æ ·ï¼Œç»è¿‡æ’åºåï¼Œæ•°æ®ä»¥åˆ†åŒºä¸ºå•ä½èšé›†åœ¨ä¸€èµ·ï¼Œä¸”åŒä¸€åˆ†åŒºå†…æ‰€æœ‰æ•°æ®æŒ‰ç…§keyæœ‰åºã€‚\nâ€‹    æ­¥éª¤2ï¼šæŒ‰ç…§åˆ†åŒºç¼–å·ç”±å°åˆ°å¤§ä¾æ¬¡å°†æ¯ä¸ªåˆ†åŒºä¸­çš„æ•°æ®å†™å…¥ä»»åŠ¡å·¥ä½œç›®å½•ä¸‹çš„ä¸´æ—¶æ–‡ä»¶output/spillN.outï¼ˆNè¡¨ç¤ºå½“å‰æº¢å†™æ¬¡æ•°ï¼‰ä¸­ã€‚å¦‚æœç”¨æˆ·è®¾ç½®äº†Combinerï¼Œåˆ™å†™å…¥æ–‡ä»¶ä¹‹å‰ï¼Œå¯¹æ¯ä¸ªåˆ†åŒºä¸­çš„æ•°æ®è¿›è¡Œä¸€æ¬¡èšé›†æ“ä½œã€‚\nâ€‹    æ­¥éª¤3ï¼šå°†åˆ†åŒºæ•°æ®çš„å…ƒä¿¡æ¯å†™åˆ°å†…å­˜ç´¢å¼•æ•°æ®ç»“æ„SpillRecordä¸­ï¼Œå…¶ä¸­æ¯ä¸ªåˆ†åŒºçš„å…ƒä¿¡æ¯åŒ…æ‹¬åœ¨ä¸´æ—¶æ–‡ä»¶ä¸­çš„åç§»é‡ã€å‹ç¼©å‰æ•°æ®å¤§å°å’Œå‹ç¼©åæ•°æ®å¤§å°ã€‚å¦‚æœå½“å‰å†…å­˜ç´¢å¼•å¤§å°è¶…è¿‡1MBï¼Œåˆ™å°†å†…å­˜ç´¢å¼•å†™åˆ°æ–‡ä»¶output/spillN.out.indexä¸­ã€‚\n 5ï¼‰Mergeé˜¶æ®µï¼šå½“æ‰€æœ‰æ•°æ®å¤„ç†å®Œæˆåï¼ŒMapTaskå¯¹æ‰€æœ‰ä¸´æ—¶æ–‡ä»¶è¿›è¡Œä¸€æ¬¡åˆå¹¶ï¼Œä»¥ç¡®ä¿æœ€ç»ˆåªä¼šç”Ÿæˆä¸€ä¸ªæ•°æ®æ–‡ä»¶ã€‚\nâ€‹    å½“æ‰€æœ‰æ•°æ®å¤„ç†å®Œåï¼ŒMapTaskä¼šå°†æ‰€æœ‰ä¸´æ—¶æ–‡ä»¶åˆå¹¶æˆä¸€ä¸ªå¤§æ–‡ä»¶ï¼Œå¹¶ä¿å­˜åˆ°æ–‡ä»¶output/file.outä¸­ï¼ŒåŒæ—¶ç”Ÿæˆç›¸åº”çš„ç´¢å¼•æ–‡ä»¶output/file.out.indexã€‚\nâ€‹    åœ¨è¿›è¡Œæ–‡ä»¶åˆå¹¶è¿‡ç¨‹ä¸­ï¼ŒMapTaskä»¥åˆ†åŒºä¸ºå•ä½è¿›è¡Œåˆå¹¶ã€‚å¯¹äºæŸä¸ªåˆ†åŒºï¼Œå®ƒå°†é‡‡ç”¨å¤šè½®é€’å½’åˆå¹¶çš„æ–¹å¼ã€‚æ¯è½®åˆå¹¶mapreduce.task.io.sort.factorï¼ˆé»˜è®¤10ï¼‰ä¸ªæ–‡ä»¶ï¼Œå¹¶å°†äº§ç”Ÿçš„æ–‡ä»¶é‡æ–°åŠ å…¥å¾…åˆå¹¶åˆ—è¡¨ä¸­ï¼Œå¯¹æ–‡ä»¶æ’åºåï¼Œé‡å¤ä»¥ä¸Šè¿‡ç¨‹ï¼Œç›´åˆ°æœ€ç»ˆå¾—åˆ°ä¸€ä¸ªå¤§æ–‡ä»¶ã€‚\nâ€‹    è®©æ¯ä¸ªMapTaskæœ€ç»ˆåªç”Ÿæˆä¸€ä¸ªæ•°æ®æ–‡ä»¶ï¼Œå¯é¿å…åŒæ—¶æ‰“å¼€å¤§é‡æ–‡ä»¶å’ŒåŒæ—¶è¯»å–å¤§é‡å°æ–‡ä»¶äº§ç”Ÿçš„éšæœºè¯»å–å¸¦æ¥çš„å¼€é”€ã€‚\nReduceTaskå·¥ä½œæœºåˆ¶\n 1ï¼‰Copyé˜¶æ®µï¼šReduceTaskä»å„ä¸ªMapTaskä¸Šè¿œç¨‹æ‹·è´ä¸€ç‰‡æ•°æ®ï¼Œå¹¶é’ˆå¯¹æŸä¸€ç‰‡æ•°æ®ï¼Œå¦‚æœå…¶å¤§å°è¶…è¿‡ä¸€å®šé˜ˆå€¼ï¼Œåˆ™å†™åˆ°ç£ç›˜ä¸Šï¼Œå¦åˆ™ç›´æ¥æ”¾åˆ°å†…å­˜ä¸­ã€‚\n 2ï¼‰Sorté˜¶æ®µï¼šåœ¨è¿œç¨‹æ‹·è´æ•°æ®çš„åŒæ—¶ï¼ŒReduceTaskå¯åŠ¨äº†ä¸¤ä¸ªåå°çº¿ç¨‹å¯¹å†…å­˜å’Œç£ç›˜ä¸Šçš„æ–‡ä»¶è¿›è¡Œåˆå¹¶ï¼Œä»¥é˜²æ­¢å†…å­˜ä½¿ç”¨è¿‡å¤šæˆ–ç£ç›˜ä¸Šæ–‡ä»¶è¿‡å¤šã€‚æŒ‰ç…§MapReduceè¯­ä¹‰ï¼Œç”¨æˆ·ç¼–å†™reduce()å‡½æ•°è¾“å…¥æ•°æ®æ˜¯æŒ‰keyè¿›è¡Œèšé›†çš„ä¸€ç»„æ•°æ®ã€‚ä¸ºäº†å°†keyç›¸åŒçš„æ•°æ®èšåœ¨ä¸€èµ·ï¼ŒHadoopé‡‡ç”¨äº†åŸºäºæ’åºçš„ç­–ç•¥ã€‚ç”±äºå„ä¸ªMapTaskå·²ç»å®ç°å¯¹è‡ªå·±çš„å¤„ç†ç»“æœè¿›è¡Œäº†å±€éƒ¨æ’åºï¼Œå› æ­¤ï¼ŒReduceTaskåªéœ€å¯¹æ‰€æœ‰æ•°æ®è¿›è¡Œä¸€æ¬¡å½’å¹¶æ’åºå³å¯ã€‚\n 3ï¼‰Reduceé˜¶æ®µï¼šreduce()å‡½æ•°å°†è®¡ç®—ç»“æœå†™åˆ°HDFSä¸Šã€‚\nReduceTaskå¹¶è¡Œåº¦å†³å®šæœºåˆ¶å›é¡¾ï¼šMapTaskå¹¶è¡Œåº¦ç”±åˆ‡ç‰‡ä¸ªæ•°å†³å®šï¼Œåˆ‡ç‰‡ä¸ªæ•°ç”±è¾“å…¥æ–‡ä»¶å’Œåˆ‡ç‰‡è§„åˆ™å†³å®šã€‚\næ€è€ƒï¼šReduceTaskå¹¶è¡Œåº¦ç”±è°å†³å®šï¼Ÿ\n1ï¼‰è®¾ç½®ReduceTaskå¹¶è¡Œåº¦ï¼ˆä¸ªæ•°ï¼‰\nReduceTaskçš„å¹¶è¡Œåº¦åŒæ ·å½±å“æ•´ä¸ªJobçš„æ‰§è¡Œå¹¶å‘åº¦å’Œæ‰§è¡Œæ•ˆç‡ï¼Œä½†ä¸MapTaskçš„å¹¶å‘æ•°ç”±åˆ‡ç‰‡æ•°å†³å®šä¸åŒï¼ŒReduceTaskæ•°é‡çš„å†³å®šæ˜¯å¯ä»¥ç›´æ¥æ‰‹åŠ¨è®¾ç½®ï¼š\n// é»˜è®¤å€¼æ˜¯1ï¼Œæ‰‹åŠ¨è®¾ç½®ä¸º4\njob.setNumReduceTasks(4);\næ³¨æ„äº‹é¡¹\n(1) ReduceTask=0, è¡¨ç¤ºæ²¡æœ‰Reduceé˜¶æ®µï¼Œè¾“å‡ºæ–‡ä»¶ä¸ªæ•°å’ŒMapä¸ªæ•°-è‡´ã€‚(2) ReduceTaské»˜è®¤å€¼å°±æ˜¯1 ï¼Œæ‰€ä»¥è¾“å‡ºæ–‡ä»¶ä¸ªæ•°ä¸ºä¸€ä¸€ä¸ªã€‚(3)å¦‚æœæ•°æ®åˆ†å¸ƒä¸å‡åŒ€ï¼Œå°±æœ‰å¯èƒ½åœ¨R educeé˜¶æ®µäº§ç”Ÿæ•°æ®å€¾æ–œ(4) ReduceTaskæ•°é‡å¹¶ä¸æ˜¯ä»»æ„è®¾ç½®ï¼Œè¿˜è¦è€ƒè™‘ä¸šåŠ¡é€»è¾‘éœ€æ±‚ï¼Œæœ‰äº›æƒ…å†µä¸‹ï¼Œéœ€è¦è®¡ç®—å…¨å±€æ±‡æ€»ç»“æœï¼Œå°±åªèƒ½æœ‰1ä¸ªReduceTask.(5)å…·ä½“å¤šå°‘ä¸ªReduceTask,éœ€è¦æ ¹æ®é›†ç¾¤æ€§èƒ½è€Œå®šã€‚(6)å¦‚æœåˆ†åŒºæ•°ä¸æ˜¯1,ä½†æ˜¯ReduceTaskä¸º1ï¼Œæ˜¯å¦æ‰§è¡Œåˆ†åŒºè¿‡ç¨‹ã€‚ç­”æ¡ˆæ˜¯:ä¸æ‰§è¡Œåˆ†åŒºè¿‡ç¨‹ã€‚å› ä¸ºåœ¨MapTaskçš„æºç ä¸­ï¼Œæ‰§è¡Œåˆ†åŒºçš„å‰ææ˜¯å…ˆåˆ¤æ–­ReduceNumä¸ªæ•°æ˜¯å¦å¤§äº1ã€‚ä¸å¤§äº1 .è‚¯å®šä¸æ‰§è¡Œã€‚.\nJoinåº”ç”¨Reduce Joinâ€‹        Mapç«¯çš„ä¸»è¦å·¥ä½œï¼šä¸ºæ¥è‡ªä¸åŒè¡¨æˆ–æ–‡ä»¶çš„key/valueå¯¹ï¼Œæ‰“æ ‡ç­¾ä»¥åŒºåˆ«ä¸åŒæ¥æºçš„è®°å½•ã€‚ç„¶åç”¨è¿æ¥å­—æ®µä½œä¸ºkeyï¼Œå…¶ä½™éƒ¨åˆ†å’Œæ–°åŠ çš„æ ‡å¿—ä½œä¸ºvalueï¼Œæœ€åè¿›è¡Œè¾“å‡ºã€‚\n     Reduceç«¯çš„ä¸»è¦å·¥ä½œï¼šåœ¨Reduceç«¯ä»¥è¿æ¥å­—æ®µä½œä¸ºkeyçš„åˆ†ç»„å·²ç»å®Œæˆï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨æ¯ä¸€ä¸ªåˆ†ç»„å½“ä¸­å°†é‚£äº›æ¥æºäºä¸åŒæ–‡ä»¶çš„è®°å½•ï¼ˆåœ¨Mapé˜¶æ®µå·²ç»æ‰“æ ‡å¿—ï¼‰åˆ†å¼€ï¼Œæœ€åè¿›è¡Œåˆå¹¶å°±okäº†ã€‚\nMap Join1ï¼‰ä½¿ç”¨åœºæ™¯\nMap Joiné€‚ç”¨äºä¸€å¼ è¡¨ååˆ†å°ã€ä¸€å¼ è¡¨å¾ˆå¤§çš„åœºæ™¯ã€‚\n2ï¼‰ä¼˜ç‚¹\næ€è€ƒï¼šåœ¨Reduceç«¯å¤„ç†è¿‡å¤šçš„è¡¨ï¼Œéå¸¸å®¹æ˜“äº§ç”Ÿæ•°æ®å€¾æ–œã€‚æ€ä¹ˆåŠï¼Ÿ\nåœ¨Mapç«¯ç¼“å­˜å¤šå¼ è¡¨ï¼Œæå‰å¤„ç†ä¸šåŠ¡é€»è¾‘ï¼Œè¿™æ ·å¢åŠ Mapç«¯ä¸šåŠ¡ï¼Œå‡å°‘Reduceç«¯æ•°æ®çš„å‹åŠ›ï¼Œå°½å¯èƒ½çš„å‡å°‘æ•°æ®å€¾æ–œã€‚\n3ï¼‰å…·ä½“åŠæ³•ï¼šé‡‡ç”¨DistributedCache\nâ€‹    ï¼ˆ1ï¼‰åœ¨Mapperçš„setupé˜¶æ®µï¼Œå°†æ–‡ä»¶è¯»å–åˆ°ç¼“å­˜é›†åˆä¸­ã€‚\nâ€‹    ï¼ˆ2ï¼‰åœ¨Driveré©±åŠ¨ç±»ä¸­åŠ è½½ç¼“å­˜ã€‚\n//ç¼“å­˜æ™®é€šæ–‡ä»¶åˆ°Taskè¿è¡ŒèŠ‚ç‚¹ã€‚\njob.addCacheFile(new URI(â€œfile:///e:/cache/pd.txtâ€));\n//å¦‚æœæ˜¯é›†ç¾¤è¿è¡Œ,éœ€è¦è®¾ç½®HDFSè·¯å¾„\njob.addCacheFile(new URI(â€œhdfs://hadoop102:8020/cache/pd.txtâ€));\næ•°æ®æ¸…æ´—ï¼ˆETLï¼‰â€œETLï¼Œæ˜¯è‹±æ–‡Extract-Transform-Loadçš„ç¼©å†™ï¼Œç”¨æ¥æè¿°å°†æ•°æ®ä»æ¥æºç«¯ç»è¿‡æŠ½å–ï¼ˆExtractï¼‰ã€è½¬æ¢ï¼ˆTransformï¼‰ã€åŠ è½½ï¼ˆLoadï¼‰è‡³ç›®çš„ç«¯çš„è¿‡ç¨‹ã€‚ETLä¸€è¯è¾ƒå¸¸ç”¨åœ¨æ•°æ®ä»“åº“ï¼Œä½†å…¶å¯¹è±¡å¹¶ä¸é™äºæ•°æ®ä»“åº“\nåœ¨è¿è¡Œæ ¸å¿ƒä¸šåŠ¡MapReduceç¨‹åºä¹‹å‰ï¼Œå¾€å¾€è¦å…ˆå¯¹æ•°æ®è¿›è¡Œæ¸…æ´—ï¼Œæ¸…ç†æ‰ä¸ç¬¦åˆç”¨æˆ·è¦æ±‚çš„æ•°æ®ã€‚æ¸…ç†çš„è¿‡ç¨‹å¾€å¾€åªéœ€è¦è¿è¡ŒMapperç¨‹åºï¼Œä¸éœ€è¦è¿è¡ŒReduceç¨‹åºã€‚\nMapReduceå¼€å‘æ€»ç»“1ï¼‰è¾“å…¥æ•°æ®æ¥å£ï¼šInputFormatï¼ˆ1ï¼‰é»˜è®¤ä½¿ç”¨çš„å®ç°ç±»æ˜¯ï¼šTextInputFormatï¼ˆ2ï¼‰TextInputFormatçš„åŠŸèƒ½é€»è¾‘æ˜¯ï¼šä¸€æ¬¡è¯»ä¸€è¡Œæ–‡æœ¬ï¼Œç„¶åå°†è¯¥è¡Œçš„èµ·å§‹åç§»é‡ä½œä¸ºkeyï¼Œè¡Œå†…å®¹ä½œä¸ºvalueè¿”å›ã€‚ï¼ˆ3ï¼‰CombineTextInputFormatå¯ä»¥æŠŠå¤šä¸ªå°æ–‡ä»¶åˆå¹¶æˆä¸€ä¸ªåˆ‡ç‰‡å¤„ç†ï¼Œæé«˜å¤„ç†æ•ˆç‡ã€‚\n2ï¼‰é€»è¾‘å¤„ç†æ¥å£ï¼šMapperç”¨æˆ·æ ¹æ®ä¸šåŠ¡éœ€æ±‚å®ç°å…¶ä¸­ä¸‰ä¸ªæ–¹æ³•ï¼šmap()   setup()   cleanup () \n3ï¼‰Partitioneråˆ†åŒºï¼ˆ1ï¼‰æœ‰é»˜è®¤å®ç° HashPartitionerï¼Œé€»è¾‘æ˜¯æ ¹æ®keyçš„å“ˆå¸Œå€¼å’ŒnumReducesæ¥è¿”å›ä¸€ä¸ªåˆ†åŒºå·ï¼›key.hashCode()&amp;Integer.MAXVALUE % numReducesï¼ˆ2ï¼‰å¦‚æœä¸šåŠ¡ä¸Šæœ‰ç‰¹åˆ«çš„éœ€æ±‚ï¼Œå¯ä»¥è‡ªå®šä¹‰åˆ†åŒºã€‚\n4ï¼‰Comparableæ’åºï¼ˆ1ï¼‰å½“æˆ‘ä»¬ç”¨è‡ªå®šä¹‰çš„å¯¹è±¡ä½œä¸ºkeyæ¥è¾“å‡ºæ—¶ï¼Œå°±å¿…é¡»è¦å®ç°WritableComparableæ¥å£ï¼Œé‡å†™å…¶ä¸­çš„compareTo()æ–¹æ³•ã€‚ï¼ˆ2ï¼‰éƒ¨åˆ†æ’åºï¼šå¯¹æœ€ç»ˆè¾“å‡ºçš„æ¯ä¸€ä¸ªæ–‡ä»¶è¿›è¡Œå†…éƒ¨æ’åºã€‚ï¼ˆ3ï¼‰å…¨æ’åºï¼šå¯¹æ‰€æœ‰æ•°æ®è¿›è¡Œæ’åºï¼Œé€šå¸¸åªæœ‰ä¸€ä¸ªReduceã€‚ï¼ˆ4ï¼‰äºŒæ¬¡æ’åºï¼šæ’åºçš„æ¡ä»¶æœ‰ä¸¤ä¸ªã€‚\n5ï¼‰Combineråˆå¹¶Combineråˆå¹¶å¯ä»¥æé«˜ç¨‹åºæ‰§è¡Œæ•ˆç‡ï¼Œå‡å°‘IOä¼ è¾“ã€‚ä½†æ˜¯ä½¿ç”¨æ—¶å¿…é¡»ä¸èƒ½å½±å“åŸæœ‰çš„ä¸šåŠ¡å¤„ç†ç»“æœã€‚\n6ï¼‰é€»è¾‘å¤„ç†æ¥å£ï¼šReducerç”¨æˆ·æ ¹æ®ä¸šåŠ¡éœ€æ±‚å®ç°å…¶ä¸­ä¸‰ä¸ªæ–¹æ³•ï¼šreduce()   setup()   cleanup () \n7ï¼‰è¾“å‡ºæ•°æ®æ¥å£ï¼šOutputFormatï¼ˆ1ï¼‰é»˜è®¤å®ç°ç±»æ˜¯TextOutputFormatï¼ŒåŠŸèƒ½é€»è¾‘æ˜¯ï¼šå°†æ¯ä¸€ä¸ªKVå¯¹ï¼Œå‘ç›®æ ‡æ–‡æœ¬æ–‡ä»¶è¾“å‡ºä¸€è¡Œã€‚ï¼ˆ2ï¼‰ç”¨æˆ·è¿˜å¯ä»¥è‡ªå®šä¹‰OutputFormatã€‚\nHadoopæ•°æ®å‹ç¼©1ï¼‰å‹ç¼©çš„å¥½å¤„å’Œåå¤„å‹ç¼©çš„ä¼˜ç‚¹ï¼šä»¥å‡å°‘ç£ç›˜IOã€å‡å°‘ç£ç›˜å­˜å‚¨ç©ºé—´ã€‚å‹ç¼©çš„ç¼ºç‚¹ï¼šå¢åŠ CPUå¼€é”€ã€‚2ï¼‰å‹ç¼©åŸåˆ™ï¼ˆ1ï¼‰è¿ç®—å¯†é›†å‹çš„Jobï¼Œå°‘ç”¨å‹ç¼©ï¼ˆ2ï¼‰IOå¯†é›†å‹çš„Jobï¼Œå¤šç”¨å‹ç¼©\nMRæ”¯æŒçš„å‹ç¼©ç¼–ç \n\n\n\n\nå‹ç¼©æ ¼å¼\nHadoopè‡ªå¸¦ï¼Ÿ\nç®—æ³•\næ–‡ä»¶æ‰©å±•å\næ˜¯å¦å¯åˆ‡ç‰‡\næ¢æˆå‹ç¼©æ ¼å¼åï¼ŒåŸæ¥çš„ç¨‹åºæ˜¯å¦éœ€è¦ä¿®æ”¹\n\n\n\n\nDEFLATE\næ˜¯ï¼Œç›´æ¥ä½¿ç”¨\nDEFLATE\n.deflate\nå¦\nå’Œæ–‡æœ¬å¤„ç†ä¸€æ ·ï¼Œä¸éœ€è¦ä¿®æ”¹\n\n\nGzip\næ˜¯ï¼Œç›´æ¥ä½¿ç”¨\nDEFLATE\n.gz\nå¦\nå’Œæ–‡æœ¬å¤„ç†ä¸€æ ·ï¼Œä¸éœ€è¦ä¿®æ”¹\n\n\nbzip2\næ˜¯ï¼Œç›´æ¥ä½¿ç”¨\nbzip2\n.bz2\næ˜¯\nå’Œæ–‡æœ¬å¤„ç†ä¸€æ ·ï¼Œä¸éœ€è¦ä¿®æ”¹\n\n\nLZO\nå¦ï¼Œéœ€è¦å®‰è£…\nLZO\n.lzo\næ˜¯\néœ€è¦å»ºç´¢å¼•ï¼Œè¿˜éœ€è¦æŒ‡å®šè¾“å…¥æ ¼å¼\n\n\nSnappy\næ˜¯ï¼Œç›´æ¥ä½¿ç”¨\nSnappy\n.snappy\nå¦\nå’Œæ–‡æœ¬å¤„ç†ä¸€æ ·ï¼Œä¸éœ€è¦ä¿®æ”¹\n\n\n\n\nå‹ç¼©æ€§èƒ½çš„æ¯”è¾ƒ\n\n\n\n\nå‹ç¼©ç®—æ³•\nåŸå§‹æ–‡ä»¶å¤§å°\nå‹ç¼©æ–‡ä»¶å¤§å°\nå‹ç¼©é€Ÿåº¦\nè§£å‹é€Ÿåº¦\n\n\n\n\ngzip\n8.3GB\n1.8GB\n17.5MB/s\n58MB/s\n\n\nbzip2\n8.3GB\n1.1GB\n2.4MB/s\n9.5MB/s\n\n\nLZO\n8.3GB\n2.9GB\n49.3MB/s\n74.6MB/s\n\n\n\n\nå‹ç¼©æ–¹å¼é€‰æ‹©å‹ç¼©æ–¹å¼é€‰æ‹©æ—¶é‡ç‚¹è€ƒè™‘ï¼šå‹ç¼©/è§£å‹ç¼©é€Ÿåº¦ã€å‹ç¼©ç‡ï¼ˆå‹ç¼©åå­˜å‚¨å¤§å°ï¼‰ã€å‹ç¼©åæ˜¯å¦å¯ä»¥æ”¯æŒåˆ‡ç‰‡ã€‚\nGzipå‹ç¼©\nä¼˜ç‚¹ï¼šå‹ç¼©ç‡æ¯”è¾ƒé«˜ï¼› \nç¼ºç‚¹ï¼šä¸æ”¯æŒSplitï¼›å‹ç¼©/è§£å‹é€Ÿåº¦ä¸€èˆ¬ï¼›\nBzip2å‹ç¼©\nä¼˜ç‚¹ï¼šå‹ç¼©ç‡é«˜ï¼›æ”¯æŒSplitï¼› \nç¼ºç‚¹ï¼šå‹ç¼©/è§£å‹é€Ÿåº¦æ…¢ã€‚\nLzoå‹ç¼©\nä¼˜ç‚¹ï¼šå‹ç¼©/è§£å‹é€Ÿåº¦æ¯”è¾ƒå¿«ï¼›æ”¯æŒSplitï¼›\nç¼ºç‚¹ï¼šå‹ç¼©ç‡ä¸€èˆ¬ï¼›æƒ³æ”¯æŒåˆ‡ç‰‡éœ€è¦é¢å¤–åˆ›å»ºç´¢å¼•ã€‚\nSnappyå‹ç¼©\nä¼˜ç‚¹ï¼šå‹ç¼©å’Œè§£å‹ç¼©é€Ÿåº¦å¿«ï¼› \nç¼ºç‚¹ï¼šä¸æ”¯æŒSplitï¼›å‹ç¼©ç‡ä¸€èˆ¬ï¼› \nå‹ç¼©ä½ç½®é€‰æ‹©\nå‹ç¼©å¯ä»¥åœ¨MapReduceä½œç”¨çš„ä»»æ„é˜¶æ®µå¯ç”¨ã€‚\n\nå‹ç¼©å‚æ•°é…ç½®1ï¼‰ä¸ºäº†æ”¯æŒå¤šç§å‹ç¼©/è§£å‹ç¼©ç®—æ³•ï¼ŒHadoopå¼•å…¥äº†ç¼–ç /è§£ç å™¨\n\n\n\n\nå‹ç¼©æ ¼å¼\nå¯¹åº”çš„ç¼–ç /è§£ç å™¨\n\n\n\n\nDEFLATE\norg.apache.hadoop.io.compress.DefaultCodec\n\n\ngzip\norg.apache.hadoop.io.compress.GzipCodec\n\n\nbzip2\norg.apache.hadoop.io.compress.BZip2Codec\n\n\nLZO\ncom.hadoop.compression.lzo.LzopCodec\n\n\nSnappy\norg.apache.hadoop.io.compress.SnappyCodec\n\n\n\n\n2ï¼‰è¦åœ¨Hadoopä¸­å¯ç”¨å‹ç¼©ï¼Œå¯ä»¥é…ç½®å¦‚ä¸‹å‚æ•°\n\n\n\n\nå‚æ•°\né»˜è®¤å€¼\né˜¶æ®µ\nå»ºè®®\n\n\n\n\nio.compression.codecs    ï¼ˆåœ¨core-site.xmlä¸­é…ç½®ï¼‰\næ— ï¼Œè¿™ä¸ªéœ€è¦åœ¨å‘½ä»¤è¡Œè¾“å…¥hadoop checknativeæŸ¥çœ‹\nè¾“å…¥å‹ç¼©\nHadoopä½¿ç”¨æ–‡ä»¶æ‰©å±•ååˆ¤æ–­æ˜¯å¦æ”¯æŒæŸç§ç¼–è§£ç å™¨\n\n\nmapreduce.map.output.compressï¼ˆåœ¨mapred-site.xmlä¸­é…ç½®ï¼‰\nfalse\nmapperè¾“å‡º\nè¿™ä¸ªå‚æ•°è®¾ä¸ºtrueå¯ç”¨å‹ç¼©\n\n\nmapreduce.map.output.compress.codecï¼ˆåœ¨mapred-site.xmlä¸­é…ç½®ï¼‰\norg.apache.hadoop.io.compress.DefaultCodec\nmapperè¾“å‡º\nä¼ä¸šå¤šä½¿ç”¨LZOæˆ–Snappyç¼–è§£ç å™¨åœ¨æ­¤é˜¶æ®µå‹ç¼©æ•°æ®\n\n\nmapreduce.output.fileoutputformat.compressï¼ˆåœ¨mapred-site.xmlä¸­é…ç½®ï¼‰\nfalse\nreducerè¾“å‡º\nè¿™ä¸ªå‚æ•°è®¾ä¸ºtrueå¯ç”¨å‹ç¼©\n\n\nmapreduce.output.fileoutputformat.compress.codecï¼ˆåœ¨mapred-site.xmlä¸­é…ç½®ï¼‰\norg.apache.hadoop.io.compress.DefaultCodec\nreducerè¾“å‡º\nä½¿ç”¨æ ‡å‡†å·¥å…·æˆ–è€…ç¼–è§£ç å™¨ï¼Œå¦‚gzipå’Œbzip2\n\n\n\n\nå¸¸è§é”™è¯¯åŠè§£å†³æ–¹æ¡ˆ1ï¼‰å¯¼åŒ…å®¹æ˜“å‡ºé”™ã€‚å°¤å…¶Textå’ŒCombineTextInputFormatã€‚2ï¼‰Mapperä¸­ç¬¬ä¸€ä¸ªè¾“å…¥çš„å‚æ•°å¿…é¡»æ˜¯LongWritableæˆ–è€…NullWritableï¼Œä¸å¯ä»¥æ˜¯IntWritable.  æŠ¥çš„é”™è¯¯æ˜¯ç±»å‹è½¬æ¢å¼‚å¸¸ã€‚3ï¼‰java.lang.Exception: java.io.IOException: Illegal partition for 13926435656 (4)ï¼Œè¯´æ˜Partitionå’ŒReduceTaskä¸ªæ•°æ²¡å¯¹ä¸Šï¼Œè°ƒæ•´ReduceTaskä¸ªæ•°ã€‚4ï¼‰å¦‚æœåˆ†åŒºæ•°ä¸æ˜¯1ï¼Œä½†æ˜¯reducetaskä¸º1ï¼Œæ˜¯å¦æ‰§è¡Œåˆ†åŒºè¿‡ç¨‹ã€‚ç­”æ¡ˆæ˜¯ï¼šä¸æ‰§è¡Œåˆ†åŒºè¿‡ç¨‹ã€‚å› ä¸ºåœ¨MapTaskçš„æºç ä¸­ï¼Œæ‰§è¡Œåˆ†åŒºçš„å‰ææ˜¯å…ˆåˆ¤æ–­ReduceNumä¸ªæ•°æ˜¯å¦å¤§äº1ã€‚ä¸å¤§äº1è‚¯å®šä¸æ‰§è¡Œã€‚5ï¼‰åœ¨Windowsç¯å¢ƒç¼–è¯‘çš„jaråŒ…å¯¼å…¥åˆ°Linuxç¯å¢ƒä¸­è¿è¡Œï¼Œ\nhadoop jar wc.jar com.atguigu.mapreduce.wordcount.WordCountDriver /user/atguigu/ /user/atguigu/output\næŠ¥å¦‚ä¸‹é”™è¯¯ï¼š\nException in thread \"main\" java.lang.UnsupportedClassVersionError: com/atguigu/mapreduce/wordcount/WordCountDriver : Unsupported major.minor version 52.0\nåŸå› æ˜¯Windowsç¯å¢ƒç”¨çš„jdk1.7ï¼ŒLinuxç¯å¢ƒç”¨çš„jdk1.8ã€‚è§£å†³æ–¹æ¡ˆï¼šç»Ÿä¸€jdkç‰ˆæœ¬ã€‚6ï¼‰ç¼“å­˜pd.txtå°æ–‡ä»¶æ¡ˆä¾‹ä¸­ï¼ŒæŠ¥æ‰¾ä¸åˆ°pd.txtæ–‡ä»¶åŸå› ï¼šå¤§éƒ¨åˆ†ä¸ºè·¯å¾„ä¹¦å†™é”™è¯¯ã€‚è¿˜æœ‰å°±æ˜¯è¦æ£€æŸ¥pd.txt.txtçš„é—®é¢˜ã€‚è¿˜æœ‰ä¸ªåˆ«ç”µè„‘å†™ç›¸å¯¹è·¯å¾„æ‰¾ä¸åˆ°pd.txtï¼Œå¯ä»¥ä¿®æ”¹ä¸ºç»å¯¹è·¯å¾„ã€‚7ï¼‰æŠ¥ç±»å‹è½¬æ¢å¼‚å¸¸ã€‚é€šå¸¸éƒ½æ˜¯åœ¨é©±åŠ¨å‡½æ•°ä¸­è®¾ç½®Mapè¾“å‡ºå’Œæœ€ç»ˆè¾“å‡ºæ—¶ç¼–å†™é”™è¯¯ã€‚Mapè¾“å‡ºçš„keyå¦‚æœæ²¡æœ‰æ’åºï¼Œä¹Ÿä¼šæŠ¥ç±»å‹è½¬æ¢å¼‚å¸¸ã€‚8ï¼‰é›†ç¾¤ä¸­è¿è¡Œwc.jaræ—¶å‡ºç°äº†æ— æ³•è·å¾—è¾“å…¥æ–‡ä»¶ã€‚åŸå› ï¼šWordCountæ¡ˆä¾‹çš„è¾“å…¥æ–‡ä»¶ä¸èƒ½æ”¾ç”¨HDFSé›†ç¾¤çš„æ ¹ç›®å½•ã€‚9ï¼‰å‡ºç°äº†å¦‚ä¸‹ç›¸å…³å¼‚å¸¸\nException in thread \"main\" java.lang.UnsatisfiedLinkError: org.apache.hadoop.io.nativeio.NativeIO$Windows.access0(Ljava/lang/String;I)Z\n\tat org.apache.hadoop.io.nativeio.NativeIO$Windows.access0(Native Method)\n\tat org.apache.hadoop.io.nativeio.NativeIO$Windows.access(NativeIO.java:609)\n\tat org.apache.hadoop.fs.FileUtil.canRead(FileUtil.java:977)\njava.io.IOException: Could not locate executable null\\bin\\winutils.exe in the Hadoop binaries.\n\tat org.apache.hadoop.util.Shell.getQualifiedBinPath(Shell.java:356)\n\tat org.apache.hadoop.util.Shell.getWinUtilsPath(Shell.java:371)\n\tat org.apache.hadoop.util.Shell.&lt;clinit&gt;(Shell.java:364)\nè§£å†³æ–¹æ¡ˆï¼šæ‹·è´hadoop.dllæ–‡ä»¶åˆ°Windowsç›®å½•C:\\Windows\\System32ã€‚ä¸ªåˆ«åŒå­¦ç”µè„‘è¿˜éœ€è¦ä¿®æ”¹Hadoopæºç ã€‚æ–¹æ¡ˆäºŒï¼šåˆ›å»ºå¦‚ä¸‹åŒ…åï¼Œå¹¶å°†NativeIO.javaæ‹·è´åˆ°è¯¥åŒ…åä¸‹\n10ï¼‰è‡ªå®šä¹‰Outputformatæ—¶ï¼Œæ³¨æ„åœ¨RecordWirterä¸­çš„closeæ–¹æ³•å¿…é¡»å…³é—­æµèµ„æºã€‚å¦åˆ™è¾“å‡ºçš„æ–‡ä»¶å†…å®¹ä¸­æ•°æ®ä¸ºç©ºã€‚\n@Override\npublic void close(TaskAttemptContext context) throws IOException, InterruptedException {\n\t\tif (atguigufos != null) {\n\t\t\tatguigufos.close();\n\t\t}\n\t\tif (otherfos != null) {\n\t\t\totherfos.close();\n\t\t}\n}\n5. Yarnâ€‹        Yarnæ˜¯ä¸€ä¸ªèµ„æºè°ƒåº¦å¹³å°ï¼Œè´Ÿè´£ä¸ºè¿ç®—ç¨‹åºæä¾›æœåŠ¡å™¨è¿ç®—èµ„æºï¼Œç›¸å½“äºä¸€ä¸ªåˆ†å¸ƒå¼çš„æ“ä½œç³»ç»Ÿå¹³å°ï¼Œè€ŒMapReduceç­‰è¿ç®—ç¨‹åºåˆ™ç›¸å½“äºè¿è¡Œäºæ“ä½œç³»ç»Ÿä¹‹ä¸Šçš„åº”ç”¨ç¨‹åºã€‚\nYarnèµ„æºè°ƒåº¦å™¨YarnåŸºç¡€æ¶æ„YARNä¸»è¦ç”±ResourceManagerã€NodeManagerã€ApplicationMasterå’ŒContainerç­‰ç»„ä»¶æ„æˆã€‚\n\nYarnå·¥ä½œæœºåˆ¶\n1ï¼‰MRç¨‹åºæäº¤åˆ°å®¢æˆ·ç«¯æ‰€åœ¨çš„èŠ‚ç‚¹ã€‚\n2ï¼‰YarnRunnerå‘ResourceManagerç”³è¯·ä¸€ä¸ªApplicationã€‚\n3ï¼‰RMå°†è¯¥åº”ç”¨ç¨‹åºçš„èµ„æºè·¯å¾„è¿”å›ç»™YarnRunnerã€‚\n4ï¼‰è¯¥ç¨‹åºå°†è¿è¡Œæ‰€éœ€èµ„æºæäº¤åˆ°HDFSä¸Šã€‚\n5ï¼‰ç¨‹åºèµ„æºæäº¤å®Œæ¯•åï¼Œç”³è¯·è¿è¡ŒmrAppMasterã€‚\n6ï¼‰RMå°†ç”¨æˆ·çš„è¯·æ±‚åˆå§‹åŒ–æˆä¸€ä¸ªTaskã€‚\n7ï¼‰å…¶ä¸­ä¸€ä¸ªNodeManageré¢†å–åˆ°Taskä»»åŠ¡ã€‚\n8ï¼‰è¯¥NodeManageråˆ›å»ºå®¹å™¨Containerï¼Œå¹¶äº§ç”ŸMRAppmasterã€‚\n9ï¼‰Containerä»HDFSä¸Šæ‹·è´èµ„æºåˆ°æœ¬åœ°ã€‚\n10ï¼‰MRAppmasterå‘RM ç”³è¯·è¿è¡ŒMapTaskèµ„æºã€‚\n11ï¼‰RMå°†è¿è¡ŒMapTaskä»»åŠ¡åˆ†é…ç»™å¦å¤–ä¸¤ä¸ªNodeManagerï¼Œå¦ä¸¤ä¸ªNodeManageråˆ†åˆ«é¢†å–ä»»åŠ¡å¹¶åˆ›å»ºå®¹å™¨ã€‚\n12ï¼‰MRå‘ä¸¤ä¸ªæ¥æ”¶åˆ°ä»»åŠ¡çš„NodeManagerå‘é€ç¨‹åºå¯åŠ¨è„šæœ¬ï¼Œè¿™ä¸¤ä¸ªNodeManageråˆ†åˆ«å¯åŠ¨MapTaskï¼ŒMapTaskå¯¹æ•°æ®åˆ†åŒºæ’åºã€‚\n13ï¼‰MrAppMasterç­‰å¾…æ‰€æœ‰MapTaskè¿è¡Œå®Œæ¯•åï¼Œå‘RMç”³è¯·å®¹å™¨ï¼Œè¿è¡ŒReduceTaskã€‚\n14ï¼‰ReduceTaskå‘MapTaskè·å–ç›¸åº”åˆ†åŒºçš„æ•°æ®ã€‚\n15ï¼‰ç¨‹åºè¿è¡Œå®Œæ¯•åï¼ŒMRä¼šå‘RMç”³è¯·æ³¨é”€è‡ªå·±ã€‚\nä½œä¸šæäº¤å…¨è¿‡ç¨‹\n\n\nä½œä¸šæäº¤å…¨è¿‡ç¨‹è¯¦è§£\nï¼ˆ1ï¼‰ä½œä¸šæäº¤\nç¬¬1æ­¥ï¼šClientè°ƒç”¨job.waitForCompletionæ–¹æ³•ï¼Œå‘æ•´ä¸ªé›†ç¾¤æäº¤MapReduceä½œä¸šã€‚\nç¬¬2æ­¥ï¼šClientå‘RMç”³è¯·ä¸€ä¸ªä½œä¸šidã€‚\nç¬¬3æ­¥ï¼šRMç»™Clientè¿”å›è¯¥jobèµ„æºçš„æäº¤è·¯å¾„å’Œä½œä¸šidã€‚\nç¬¬4æ­¥ï¼šClientæäº¤jaråŒ…ã€åˆ‡ç‰‡ä¿¡æ¯å’Œé…ç½®æ–‡ä»¶åˆ°æŒ‡å®šçš„èµ„æºæäº¤è·¯å¾„ã€‚\nç¬¬5æ­¥ï¼šClientæäº¤å®Œèµ„æºåï¼Œå‘RMç”³è¯·è¿è¡ŒMrAppMasterã€‚\nï¼ˆ2ï¼‰ä½œä¸šåˆå§‹åŒ–\nç¬¬6æ­¥ï¼šå½“RMæ”¶åˆ°Clientçš„è¯·æ±‚åï¼Œå°†è¯¥jobæ·»åŠ åˆ°å®¹é‡è°ƒåº¦å™¨ä¸­ã€‚\nç¬¬7æ­¥ï¼šæŸä¸€ä¸ªç©ºé—²çš„NMé¢†å–åˆ°è¯¥Jobã€‚\nç¬¬8æ­¥ï¼šè¯¥NMåˆ›å»ºContainerï¼Œå¹¶äº§ç”ŸMRAppmasterã€‚\nç¬¬9æ­¥ï¼šä¸‹è½½Clientæäº¤çš„èµ„æºåˆ°æœ¬åœ°ã€‚\nï¼ˆ3ï¼‰ä»»åŠ¡åˆ†é…\nç¬¬10æ­¥ï¼šMrAppMasterå‘RMç”³è¯·è¿è¡Œå¤šä¸ªMapTaskä»»åŠ¡èµ„æºã€‚\nç¬¬11æ­¥ï¼šRMå°†è¿è¡ŒMapTaskä»»åŠ¡åˆ†é…ç»™å¦å¤–ä¸¤ä¸ªNodeManagerï¼Œå¦ä¸¤ä¸ªNodeManageråˆ†åˆ«é¢†å–ä»»åŠ¡å¹¶åˆ›å»ºå®¹å™¨ã€‚\nï¼ˆ4ï¼‰ä»»åŠ¡è¿è¡Œ\nç¬¬12æ­¥ï¼šMRå‘ä¸¤ä¸ªæ¥æ”¶åˆ°ä»»åŠ¡çš„NodeManagerå‘é€ç¨‹åºå¯åŠ¨è„šæœ¬ï¼Œè¿™ä¸¤ä¸ªNodeManageråˆ†åˆ«å¯åŠ¨MapTaskï¼ŒMapTaskå¯¹æ•°æ®åˆ†åŒºæ’åºã€‚\nç¬¬13æ­¥ï¼šMrAppMasterç­‰å¾…æ‰€æœ‰MapTaskè¿è¡Œå®Œæ¯•åï¼Œå‘RMç”³è¯·å®¹å™¨ï¼Œè¿è¡ŒReduceTaskã€‚\nç¬¬14æ­¥ï¼šReduceTaskå‘MapTaskè·å–ç›¸åº”åˆ†åŒºçš„æ•°æ®ã€‚\nç¬¬15æ­¥ï¼šç¨‹åºè¿è¡Œå®Œæ¯•åï¼ŒMRä¼šå‘RMç”³è¯·æ³¨é”€è‡ªå·±ã€‚\nï¼ˆ5ï¼‰è¿›åº¦å’ŒçŠ¶æ€æ›´æ–°\nâ€‹        YARNä¸­çš„ä»»åŠ¡å°†å…¶è¿›åº¦å’ŒçŠ¶æ€(åŒ…æ‹¬counter)è¿”å›ç»™åº”ç”¨ç®¡ç†å™¨, å®¢æˆ·ç«¯æ¯ç§’(é€šè¿‡mapreduce.client.progressmonitor.pollintervalè®¾ç½®)å‘åº”ç”¨ç®¡ç†å™¨è¯·æ±‚è¿›åº¦æ›´æ–°, å±•ç¤ºç»™ç”¨æˆ·ã€‚\nï¼ˆ6ï¼‰ä½œä¸šå®Œæˆ\nâ€‹        é™¤äº†å‘åº”ç”¨ç®¡ç†å™¨è¯·æ±‚ä½œä¸šè¿›åº¦å¤–, å®¢æˆ·ç«¯æ¯5ç§’éƒ½ä¼šé€šè¿‡è°ƒç”¨waitForCompletion()æ¥æ£€æŸ¥ä½œä¸šæ˜¯å¦å®Œæˆã€‚æ—¶é—´é—´éš”å¯ä»¥é€šè¿‡mapreduce.client.completion.pollintervalæ¥è®¾ç½®ã€‚ä½œä¸šå®Œæˆä¹‹å, åº”ç”¨ç®¡ç†å™¨å’ŒContainerä¼šæ¸…ç†å·¥ä½œçŠ¶æ€ã€‚ä½œä¸šçš„ä¿¡æ¯ä¼šè¢«ä½œä¸šå†å²æœåŠ¡å™¨å­˜å‚¨ä»¥å¤‡ä¹‹åç”¨æˆ·æ ¸æŸ¥ã€‚\nYarnè°ƒåº¦å™¨å’Œè°ƒåº¦ç®—æ³•ç›®å‰ï¼ŒHadoopä½œä¸šè°ƒåº¦å™¨ä¸»è¦æœ‰ä¸‰ç§ï¼šFIFOã€å®¹é‡ï¼ˆCapacity Schedulerï¼‰å’Œå…¬å¹³ï¼ˆFair Schedulerï¼‰ã€‚Apache Hadoop3.1.3é»˜è®¤çš„èµ„æºè°ƒåº¦å™¨æ˜¯Capacity Schedulerã€‚\nCDHæ¡†æ¶é»˜è®¤è°ƒåº¦å™¨æ˜¯Fair Schedulerã€‚å…·ä½“è®¾ç½®è¯¦è§ï¼šyarn-default.xmlæ–‡ä»¶\n&lt;property&gt;\n    &lt;description&gt;The class to use as the resource scheduler.&lt;/description&gt;\n    &lt;name&gt;yarn.resourcemanager.scheduler.class&lt;/name&gt;\n&lt;value&gt;org.apache.hadoop.yarn.server.resourcemanager.scheduler.capacity.CapacityScheduler&lt;/value&gt;\n&lt;/property&gt;\nå…ˆè¿›å…ˆå‡ºè°ƒåº¦å™¨ï¼ˆFIFOï¼‰FIFOè°ƒåº¦å™¨ï¼ˆFirst In First Outï¼‰ï¼šå•é˜Ÿåˆ—ï¼Œæ ¹æ®æäº¤ä½œä¸šçš„å…ˆåé¡ºåºï¼Œå…ˆæ¥å…ˆæœåŠ¡ã€‚\n\nä¼˜ç‚¹ï¼šç®€å•æ˜“æ‡‚ï¼›\nç¼ºç‚¹ï¼šä¸æ”¯æŒå¤šé˜Ÿåˆ—ï¼Œç”Ÿäº§ç¯å¢ƒå¾ˆå°‘ä½¿ç”¨ï¼›\nå®¹é‡è°ƒåº¦å™¨ï¼ˆCapacity Schedulerï¼‰Capacity Scheduleræ˜¯Yahooå¼€å‘çš„å¤šç”¨æˆ·è°ƒåº¦å™¨ã€‚\n\n1ã€å¤šé˜Ÿåˆ—:æ¯ä¸ªé˜Ÿåˆ—å¯é…ç½®-å®šçš„èµ„æºé‡, æ¯ä¸ªé˜Ÿåˆ—é‡‡ç”¨FIF0è°ƒåº¦ç­–ç•¥ã€‚2ã€å®¹é‡ä¿è¯:ç®¡ç†å‘˜å¯ä¸ºæ¯ä¸ªé˜Ÿåˆ—è®¾ç½®èµ„æºæœ€ä½ä¿è¯å’Œèµ„æºä½¿ç”¨ä¸Šé™3ã€çµæ´»æ€§:å¦‚æœä¸€ä¸ªé˜Ÿåˆ—ä¸­çš„èµ„æºæœ‰å‰©ä½™,å¯ä»¥æš‚æ—¶å…±äº«ç»™é‚£äº›éœ€è¦èµ„æºçš„é˜Ÿåˆ—ï¼Œè€Œ- -æ—¦è¯¥é˜Ÿåˆ—æœ‰æ–°çš„åº”ç”¨ç¨‹åºæäº¤ï¼Œåˆ™å…¶ä»–é˜Ÿåˆ—å€Ÿè°ƒçš„èµ„æºä¼šå½’è¿˜ç»™è¯¥é˜Ÿåˆ—ã€‚4ã€å¤šç§Ÿæˆ·:æ”¯æŒå¤šç”¨æˆ·å…±äº«é›†ç¾¤å’Œå¤šåº”ç”¨ç¨‹åºåŒæ—¶è¿è¡Œã€‚ä¸ºäº†é˜²æ­¢åŒä¸€ä¸ªç”¨æˆ·çš„ä½œä¸šç‹¬å é˜Ÿåˆ—ä¸­çš„èµ„æºï¼Œè¯¥è°ƒåº¦å™¨ä¼šå¯¹åŒä¸€ç”¨æˆ·æäº¤çš„ä½œä¸šæ‰€å èµ„æºé‡è¿›è¡Œé™å®šã€‚\n\nå…¬å¹³è°ƒåº¦å™¨ï¼ˆFair Schedulerï¼‰Fair Schedulereæ˜¯Facebookå¼€å‘çš„å¤šç”¨æˆ·è°ƒåº¦å™¨ã€‚\n\n1)ä¸å®¹é‡è°ƒåº¦å™¨ç›¸åŒç‚¹(1)å¤šé˜Ÿåˆ—:æ”¯æŒå¤šé˜Ÿåˆ—å¤šä½œä¸š(2)å®¹é‡ä¿è¯:ç®¡ç†å‘˜å¯ä¸ºæ¯ä¸ªé˜Ÿåˆ—è®¾ç½®èµ„æºæœ€ä½ä¿è¯å’Œèµ„æºä½¿ç”¨ä¸Šçº¿(3)çµæ´»æ€§:å¦‚æœä¸€ä¸ªé˜Ÿåˆ—ä¸­çš„èµ„æºæœ‰å‰©ä½™ï¼Œå¯ä»¥æš‚æ—¶å…±äº«ç»™é‚£äº›éœ€è¦èµ„æºçš„é˜Ÿåˆ—ï¼Œè€Œä¸€æ—¦è¯¥é˜Ÿåˆ—æœ‰æ–°çš„åº”ç”¨ç¨‹åºæäº¤ï¼Œåˆ™å…¶ä»–é˜Ÿåˆ—å€Ÿè°ƒçš„èµ„æºä¼šå½’è¿˜ç»™è¯¥é˜Ÿåˆ—ã€‚(4)å¤šç§Ÿæˆ·:æ”¯æŒå¤šç”¨æˆ·å…±äº«é›†ç¾¤å’Œå¤šåº”ç”¨ç¨‹åºåŒæ—¶è¿è¡Œ;ä¸ºäº†é˜²æ­¢åŒä¸€ä¸ªç”¨æˆ·çš„ä½œä¸šç‹¬å é˜Ÿåˆ—ä¸­çš„èµ„æºï¼Œè¯¥è°ƒåº¦å™¨:ä¼šå¯¹åŒä¸€ç”¨æˆ·æäº¤çš„ä½œä¸šæ‰€å èµ„æºé‡è¿›è¡Œé™å®šã€‚\n2)ä¸å®¹é‡è°ƒåº¦å™¨ä¸åŒç‚¹(1)æ ¸å¿ƒè°ƒåº¦ç­–ç•¥ä¸åŒ\nå®¹é‡è°ƒåº¦å™¨:ä¼˜å…ˆé€‰æ‹©èµ„æºåˆ©ç”¨ç‡ä½çš„é˜Ÿåˆ—\nå…¬å¹³è°ƒåº¦å™¨:ä¼˜å…ˆé€‰æ‹©å¯¹èµ„æºçš„ç¼ºé¢æ¯”ä¾‹å¤§çš„\n(2)æ¯ä¸ªé˜Ÿåˆ—å¯ä»¥å•ç‹¬è®¾ç½®èµ„æºåˆ†é…æ–¹å¼\nå®¹é‡è°ƒåº¦å™¨: FIFOã€DRFå…¬å¹³è°ƒåº¦å™¨: FIFOã€ FAIRã€k DRF\n\nå…¬å¹³è°ƒåº¦å™¨è®¾è®¡ç›®æ ‡æ˜¯: åœ¨æ—¶æˆ‘å°”åº¦å ã€‚æ‰€æœ‰ä½œä¸šè·å¾—å…¬å¹³çš„èµ„æºã€‚æŸä¸€æ—¶åˆ»ä¸€ä¸ªä½œä¸šåº”è·èµ„æºé™…è·å–èµ„çš„å·®å«â€™ç¼ºé¢â€è°ƒåº¦å™¨ä¼šä¼˜å…ˆä¸ºç¼ºé¢å¤§çš„ä½œä¸šåˆ†é…èµ„æº\nå…¬å¹³è°ƒåº¦å™¨é˜Ÿåˆ—èµ„æºåˆ†é…æ–¹å¼\n1) FIFOç­–ç•¥å…¬å¹³è°ƒåº¦å™¨æ¯ä¸ªé˜Ÿåˆ—èµ„æºåˆ†é…ç­–ç•¥å¦‚æœé€‰æ‹©FIFOçš„è¯ï¼Œæ­¤æ—¶å…¬å¹³è°ƒåº¦å™¨ç›¸å½“äºä¸Šé¢è®²è¿‡çš„å®¹é‡è°ƒåº¦å™¨ã€‚2) Fairç­–ç•¥    Fairç­–ç•¥(é»˜è®¤)æ˜¯ä¸€-ç§åŸºäºæœ€å¤§æœ€å°å…¬å¹³ç®—æ³•å®ç°çš„èµ„æºå¤šè·¯å¤ç”¨æ–¹å¼ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæ¯ä¸ªé˜Ÿåˆ—å†…éƒ¨é‡‡ç”¨è¯¥æ–¹å¼åˆ†é…èµ„    æºã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœä¸€-ä¸ªé˜Ÿåˆ—ä¸­æœ‰ä¸¤ä¸ªåº”ç”¨ç¨‹åºåŒæ—¶è¿è¡Œï¼Œåˆ™æ¯ä¸ªåº”ç”¨ç¨‹åºå¯å¾—åˆ°1/2çš„èµ„æº;å¦‚æœä¸‰ä¸ªåº”ç”¨ç¨‹åºåŒæ—¶è¿è¡Œï¼Œåˆ™æ¯ä¸ªåº”ç”¨ç¨‹åºå¯å¾—åˆ°1/3çš„èµ„æºã€‚    å…·ä½“èµ„æºåˆ†é…æµç¨‹å’Œå®¹é‡è°ƒåº¦å™¨ä¸€è‡´;    (l)é€‰æ‹©é˜Ÿåˆ—    (2)é€‰æ‹©ä½œä¸š    (3)é€‰æ‹©å®¹å™¨    ä»¥ä¸Šä¸‰æ­¥ï¼Œæ¯ä¸€ä¸€æ­¥éƒ½æ˜¯æŒ‰ç…§å…¬å¹³ç­–ç•¥åˆ†é…èµ„æº    â¢å®é™…æœ€å°èµ„æºä»½é¢: mindshare = Min (èµ„æºéœ€æ±‚é‡ï¼Œé…ç½®çš„æœ€å°èµ„æº)    â¢æ˜¯å¦é¥¥é¥¿: isNeedy =èµ„æºä½¿ç”¨é‡&lt; mindshare (å®é™…æœ€å°èµ„æºä»½é¢)    â¢èµ„æºåˆ†é…æ¯”: minShareRatio =èµ„æºä½¿ç”¨é‡/ Max (mindshare, 1 )    â¢èµ„æºä½¿ç”¨æƒé‡æ¯”: use ToWeightRatio=èµ„æºä½¿ç”¨é‡/æƒé‡\n\n\n3)DRFç­–ç•¥\nâ€‹        DRF ( Dominant Resource Faimness)ï¼Œæˆ‘ä»¬ä¹‹å‰è¯´çš„èµ„æºï¼Œéƒ½æ˜¯å•ä¸€æ ‡å‡†ï¼Œä¾‹å¦‚åªè€ƒè™‘å†…å­˜(ä¹Ÿæ˜¯Yarné»˜è®¤çš„æƒ…å†µ)ã€‚ä½†æ˜¯å¾ˆå¤šæ—¶å€™æˆ‘ä»¬èµ„æºæœ‰å¾ˆå¤šç§ï¼Œä¾‹å¦‚å†…å­˜ï¼ŒCPUï¼Œç½‘ç»œå¸¦å®½ç­‰ï¼Œè¿™æ ·æˆ‘ä»¬å¾ˆéš¾è¡¡é‡ä¸¤ä¸ªåº”ç”¨åº”è¯¥åˆ†é…çš„èµ„æºæ¯”ä¾‹ã€‚â€‹        é‚£ä¹ˆåœ¨YARNä¸­ï¼Œæˆ‘ä»¬ç”¨DRFæ¥å†³å®šå¦‚ä½•è°ƒåº¦:â€‹        å‡è®¾é›†ç¾¤- :å…±æœ‰100 CPUå’Œ10Tå†…å­˜ï¼Œè€Œåº”ç”¨Aéœ€è¦(2 CPU, 300GB)ï¼Œåº”ç”¨Béœ€è¦(6 CPUï¼Œ100GB) ã€‚åˆ™ä¸¤ä¸ªåº”ç”¨åˆ†åˆ«éœ€è¦A (2%CPU, 3%å†…å­˜)å’ŒB (6%CPU, 1%å†…å­˜)çš„èµ„æºï¼Œè¿™å°±æ„å‘³ç€Aæ˜¯å†…å­˜ä¸»å¯¼çš„ï¼ŒBæ˜¯CPUä¸»å¯¼çš„ï¼Œé’ˆå¯¹è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©DRFç­–ç•¥å¯¹ä¸åŒåº”ç”¨è¿›è¡Œä¸åŒèµ„æº(CPUå’Œå†…å­˜)çš„ä¸€ä¸ªä¸åŒæ¯”ä¾‹çš„é™åˆ¶ã€‚\nYarnå¸¸ç”¨å‘½ä»¤yarn applicationæŸ¥çœ‹ä»»åŠ¡YarnçŠ¶æ€çš„æŸ¥è¯¢ï¼Œé™¤äº†å¯ä»¥åœ¨hadoop103:8088é¡µé¢æŸ¥çœ‹å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡å‘½ä»¤æ“ä½œã€‚å¸¸è§çš„å‘½ä»¤æ“ä½œå¦‚ä¸‹æ‰€ç¤ºï¼š\néœ€æ±‚ï¼šæ‰§è¡ŒWordCountæ¡ˆä¾‹ï¼Œå¹¶ç”¨Yarnå‘½ä»¤æŸ¥çœ‹ä»»åŠ¡è¿è¡Œæƒ…å†µã€‚\n[atguigu@hadoop102 hadoop-3.1.3]$ myhadoop.sh start\n[atguigu@hadoop102 hadoop-3.1.3]$ hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-3.1.3.jar wordcount /input /output\nyarn applicationæŸ¥çœ‹ä»»åŠ¡\nyarn application -list\næ ¹æ®ApplicationçŠ¶æ€è¿‡æ»¤ï¼š\nyarn application -list -appStates ï¼ˆæ‰€æœ‰çŠ¶æ€ï¼šALLã€NEWã€NEW_SAVINGã€SUBMITTEDã€ACCEPTEDã€RUNNINGã€FINISHEDã€FAILEDã€KILLEDï¼‰\nKillæ‰Applicationï¼š\nyarn application -kill application_1612577921195_0001\nyarn logsæŸ¥çœ‹æ—¥å¿—æŸ¥è¯¢Applicationæ—¥å¿—ï¼šyarn logs -applicationId \nyarn logs -applicationId application_1612577921195_0001\næŸ¥è¯¢Containeræ—¥å¿—ï¼šyarn logs -applicationId  -containerId \nyarn logs -applicationId application_1612577921195_0001 -containerId container_1612577921195_0001_01_000001\nyarn applicationattemptæŸ¥çœ‹å°è¯•è¿è¡Œçš„ä»»åŠ¡åˆ—å‡ºæ‰€æœ‰Applicationå°è¯•çš„åˆ—è¡¨ï¼šyarn applicationattempt -list \nyarn applicationattempt -list application_1612577921195_0001\næ‰“å°ApplicationAttempçŠ¶æ€ï¼šyarn applicationattempt -status \nyarn applicationattempt -status appattempt_1612577921195_0001_000001\nyarn containeræŸ¥çœ‹å®¹å™¨åˆ—å‡ºæ‰€æœ‰Containerï¼šyarn container -list \nyarn container -list appattempt_1612577921195_0001_000001\næ‰“å°ContainerçŠ¶æ€ï¼š yarn container -status \nyarn container -status container_1612577921195_0001_01_000001\nyarn nodeæŸ¥çœ‹èŠ‚ç‚¹çŠ¶æ€åˆ—å‡ºæ‰€æœ‰èŠ‚ç‚¹ï¼šyarn node -list -all\nyarn rmadminæ›´æ–°é…ç½®åŠ è½½é˜Ÿåˆ—é…ç½®ï¼šyarn rmadmin -refreshQueues\nyarn queueæŸ¥çœ‹é˜Ÿåˆ—æ‰“å°é˜Ÿåˆ—ä¿¡æ¯ï¼šyarn queue -status \nYarnç”Ÿäº§ç¯å¢ƒæ ¸å¿ƒå‚æ•°\nå‘Hiveé˜Ÿåˆ—æäº¤ä»»åŠ¡1ï¼‰hadoop jarçš„æ–¹å¼\n[atguigu@hadoop102 hadoop-3.1.3]$ hadoop jar share/hadoop/mapreduce/hadoop-mapreduce-examples-3.1.3.jar wordcount -D mapreduce.job.queuename=hive /input /output\næ³¨: -Dè¡¨ç¤ºè¿è¡Œæ—¶æ”¹å˜å‚æ•°å€¼\n2ï¼‰æ‰“jaråŒ…çš„æ–¹å¼\né»˜è®¤çš„ä»»åŠ¡æäº¤éƒ½æ˜¯æäº¤åˆ°defaulté˜Ÿåˆ—çš„ã€‚å¦‚æœå¸Œæœ›å‘å…¶ä»–é˜Ÿåˆ—æäº¤ä»»åŠ¡ï¼Œéœ€è¦åœ¨Driverä¸­å£°æ˜ï¼š\npublic class WcDrvier {\n\n    public static void main(String[] args) throws IOException, ClassNotFoundException, InterruptedException {\n\n        Configuration conf = new Configuration();\n\n        conf.set(\"mapreduce.job.queuename\",\"hive\");\n\n        //1. è·å–ä¸€ä¸ªJobå®ä¾‹\n        Job job = Job.getInstance(conf);\n\n        ã€‚ã€‚ã€‚ ã€‚ã€‚ã€‚\n\n        //6. æäº¤Job\n        boolean b = job.waitForCompletion(true);\n        System.exit(b ? 0 : 1);\n    }\n}\nè¿™æ ·ï¼Œè¿™ä¸ªä»»åŠ¡åœ¨é›†ç¾¤æäº¤æ—¶ï¼Œå°±ä¼šæäº¤åˆ°hiveé˜Ÿåˆ—ï¼š\nä»»åŠ¡ä¼˜å…ˆçº§å®¹é‡è°ƒåº¦å™¨ï¼Œæ”¯æŒä»»åŠ¡ä¼˜å…ˆçº§çš„é…ç½®ï¼Œåœ¨èµ„æºç´§å¼ æ—¶ï¼Œä¼˜å…ˆçº§é«˜çš„ä»»åŠ¡å°†ä¼˜å…ˆè·å–èµ„æºã€‚é»˜è®¤æƒ…å†µï¼ŒYarnå°†æ‰€æœ‰ä»»åŠ¡çš„ä¼˜å…ˆçº§é™åˆ¶ä¸º0ï¼Œè‹¥æƒ³ä½¿ç”¨ä»»åŠ¡çš„ä¼˜å…ˆçº§åŠŸèƒ½ï¼Œé¡»å¼€æ”¾è¯¥é™åˆ¶ã€‚\n1ï¼‰ä¿®æ”¹yarn-site.xmlæ–‡ä»¶ï¼Œå¢åŠ ä»¥ä¸‹å‚æ•°\n&lt;property&gt;\n  &lt;name&gt;yarn.cluster.max-application-priority&lt;/name&gt;\n  &lt;value&gt;5&lt;/value&gt;\n&lt;/property&gt;\n2ï¼‰åˆ†å‘é…ç½®ï¼Œå¹¶é‡å¯Yarn\n[atguigu@hadoop102 hadoop]$ xsync yarn-site.xml\n[atguigu@hadoop103 hadoop-3.1.3]$ sbin/stop-yarn.sh\n[atguigu@hadoop103 hadoop-3.1.3]$ sbin/start-yarn.sh\n3ï¼‰æ¨¡æ‹Ÿèµ„æºç´§å¼ ç¯å¢ƒï¼Œå¯è¿ç»­æäº¤ä»¥ä¸‹ä»»åŠ¡ï¼Œç›´åˆ°æ–°æäº¤çš„ä»»åŠ¡ç”³è¯·ä¸åˆ°èµ„æºä¸ºæ­¢ã€‚\n[atguigu@hadoop102 hadoop-3.1.3]$ hadoop jar /opt/module/hadoop-3.1.3/share/hadoop/mapreduce/hadoop-mapreduce-examples-3.1.3.jar pi 5 2000000\n4ï¼‰å†æ¬¡é‡æ–°æäº¤ä¼˜å…ˆçº§é«˜çš„ä»»åŠ¡\n[atguigu@hadoop102 hadoop-3.1.3]$ hadoop jar /opt/module/hadoop-3.1.3/share/hadoop/mapreduce/hadoop-mapreduce-examples-3.1.3.jar pi  -D mapreduce.job.priority=5 5 2000000\n5ï¼‰ä¹Ÿå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤ä¿®æ”¹æ­£åœ¨æ‰§è¡Œçš„ä»»åŠ¡çš„ä¼˜å…ˆçº§ã€‚\nyarn application -appID  -updatePriority ä¼˜å…ˆçº§\n[atguigu@hadoop102 hadoop-3.1.3]$ yarn application -appID application_1611133087930_0009 -updatePriority 5\n","slug":"B2-Hadoop","date":"2021-11-12T11:13:22.000Z","categories_index":"å¤§æ•°æ®","tags_index":"Hadoop","author_index":"YFR718"},{"id":"047a0157ce631e99397979ea9f68fcda","title":"meta","content":"","slug":"000meta","date":"2021-11-12T06:22:18.000Z","categories_index":"å­¦ä¹ è§„åˆ’","tags_index":"","author_index":"YFR718"},{"id":"9a9e7d03fd63b8b9dd7648918fd31ad5","title":"åå°„ã€æ–°ç‰¹æ€§","content":"1. Javaåå°„æœºåˆ¶1.1 Javaåå°„æœºåˆ¶æ¦‚è¿°\nReflectionï¼ˆåå°„ï¼‰æ˜¯è¢«è§†ä¸ºåŠ¨æ€è¯­è¨€çš„å…³é”®ï¼Œåå°„æœºåˆ¶å…è®¸ç¨‹åºåœ¨æ‰§è¡ŒæœŸå€ŸåŠ©äºReflection APIå–å¾—ä»»ä½•ç±»çš„å†…éƒ¨ä¿¡æ¯ï¼Œå¹¶èƒ½ç›´æ¥æ“ä½œä»»æ„å¯¹è±¡çš„å†…éƒ¨å±æ€§åŠæ–¹æ³•ã€‚ \nåŠ è½½å®Œç±»ä¹‹åï¼Œåœ¨å †å†…å­˜çš„æ–¹æ³•åŒºä¸­å°±äº§ç”Ÿäº†ä¸€ä¸ªClassç±»å‹çš„å¯¹è±¡ï¼ˆä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªClasså¯¹è±¡ï¼‰ï¼Œè¿™ä¸ªå¯¹è±¡å°±åŒ…å«äº†å®Œæ•´çš„ç±»çš„ç»“æ„ä¿¡æ¯ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ªå¯¹è±¡çœ‹åˆ°ç±»çš„ç»“æ„ã€‚è¿™ä¸ªå¯¹è±¡å°±åƒä¸€é¢é•œå­ï¼Œé€è¿‡è¿™ä¸ªé•œå­çœ‹åˆ°ç±»çš„ç»“æ„ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å½¢è±¡çš„ç§°ä¹‹ä¸ºï¼šåå°„ã€‚\n\næ­£å¸¸æ–¹å¼ï¼šå¼•å…¥éœ€è¦çš„â€åŒ…ç±»â€åç§°â€”&gt;é€šè¿‡newå®ä¾‹åŒ–â€“&gt;å–å¾—å®ä¾‹åŒ–å¯¹è±¡åå°„æ–¹å¼ï¼šå®ä¾‹åŒ–å¯¹è±¡â€“&gt;getClass()æ–¹æ³•â€“&gt;å¾—åˆ°å®Œæ•´çš„â€œåŒ…ç±»â€åç§°\nè¡¥å……ï¼šåŠ¨æ€è¯­è¨€ vs é™æ€è¯­è¨€\nåŠ¨æ€è¯­è¨€\n    æ˜¯ä¸€ç±»åœ¨è¿è¡Œæ—¶å¯ä»¥æ”¹å˜å…¶ç»“æ„çš„è¯­è¨€ï¼šä¾‹å¦‚æ–°çš„å‡½æ•°ã€å¯¹è±¡ã€ç”šè‡³ä»£ç å¯ä»¥è¢«å¼•è¿›ï¼Œå·²æœ‰çš„å‡½æ•°å¯ä»¥è¢«åˆ é™¤æˆ–æ˜¯å…¶ä»–ç»“æ„ä¸Šçš„å˜åŒ–ã€‚é€šä¿—ç‚¹è¯´å°±æ˜¯åœ¨è¿è¡Œæ—¶ä»£ç å¯ä»¥æ ¹æ®æŸäº›æ¡ä»¶æ”¹å˜è‡ªèº«ç»“æ„ã€‚\nä¸»è¦åŠ¨æ€è¯­è¨€ï¼šObject-Cã€C#ã€JavaScriptã€PHPã€Pythonã€Erlangã€‚\n\né™æ€è¯­è¨€\nä¸åŠ¨æ€è¯­è¨€ç›¸å¯¹åº”çš„ï¼Œè¿è¡Œæ—¶ç»“æ„ä¸å¯å˜çš„è¯­è¨€å°±æ˜¯é™æ€è¯­è¨€ã€‚å¦‚Javaã€Cã€C++ã€‚\n\n\nâ€‹        Javaä¸æ˜¯åŠ¨æ€è¯­è¨€ï¼Œä½†Javaå¯ä»¥ç§°ä¹‹ä¸ºâ€œå‡†åŠ¨æ€è¯­è¨€â€ã€‚å³Javaæœ‰ä¸€å®šçš„åŠ¨æ€æ€§ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨åå°„æœºåˆ¶ã€å­—èŠ‚ç æ“ä½œè·å¾—ç±»ä¼¼åŠ¨æ€è¯­è¨€çš„ç‰¹æ€§ã€‚Javaçš„åŠ¨æ€æ€§è®©ç¼–ç¨‹çš„æ—¶å€™æ›´åŠ çµæ´»ï¼\nJavaåå°„æœºåˆ¶ç ”ç©¶åŠåº”ç”¨ Javaåå°„æœºåˆ¶æä¾›çš„åŠŸèƒ½\n\nåœ¨è¿è¡Œæ—¶åˆ¤æ–­ä»»æ„ä¸€ä¸ªå¯¹è±¡æ‰€å±çš„ç±»\nåœ¨è¿è¡Œæ—¶æ„é€ ä»»æ„ä¸€ä¸ªç±»çš„å¯¹è±¡\nåœ¨è¿è¡Œæ—¶åˆ¤æ–­ä»»æ„ä¸€ä¸ªç±»æ‰€å…·æœ‰çš„æˆå‘˜å˜é‡å’Œæ–¹æ³•\nåœ¨è¿è¡Œæ—¶è·å–æ³›å‹ä¿¡æ¯\nåœ¨è¿è¡Œæ—¶è°ƒç”¨ä»»æ„ä¸€ä¸ªå¯¹è±¡çš„æˆå‘˜å˜é‡å’Œæ–¹æ³•\nåœ¨è¿è¡Œæ—¶å¤„ç†æ³¨è§£\nç”ŸæˆåŠ¨æ€ä»£ç†\n\nåå°„ç›¸å…³çš„ä¸»è¦API\n\njava.lang.Class:ä»£è¡¨ä¸€ä¸ªç±» \njava. lang.reflect.Method:ä»£è¡¨ç±»çš„æ–¹æ³•\njava.lang.reflect.Field:ä»£è¡¨ç±»çš„æˆå‘˜å˜é‡\njava.lang.reflect.Constructor:ä»£è¡¨ç±»çš„æ„é€ å™¨ \n\n1.2 ç†è§£Classç±»å¹¶è·å–Classå®ä¾‹Class ç±» åœ¨Objectç±»ä¸­å®šä¹‰äº†ä»¥ä¸‹çš„æ–¹æ³•ï¼Œæ­¤æ–¹æ³•å°†è¢«æ‰€æœ‰å­ç±»ç»§æ‰¿ï¼šâ— public final Class getClass()\nâ€‹        ä»¥ä¸Šçš„æ–¹æ³•è¿”å›å€¼çš„ç±»å‹æ˜¯ä¸€ä¸ªClassç±»ï¼Œæ­¤ç±»æ˜¯Javaåå°„çš„æºå¤´ï¼Œå®é™…ä¸Šæ‰€è°“åå°„ä»ç¨‹åºçš„è¿è¡Œç»“æœæ¥çœ‹ä¹Ÿå¾ˆå¥½ç†è§£ï¼Œå³ï¼šå¯ä»¥é€šè¿‡å¯¹è±¡åå°„æ±‚å‡ºç±»çš„åç§°ã€‚\nâ€‹        å¯¹è±¡ç…§é•œå­åå¯ä»¥å¾—åˆ°çš„ä¿¡æ¯ï¼šæŸä¸ªç±»çš„å±æ€§ã€æ–¹æ³•å’Œæ„é€ å™¨ã€æŸä¸ªç±»åˆ°åº•å®ç°äº†å“ªäº›æ¥å£ã€‚å¯¹äºæ¯ä¸ªç±»è€Œè¨€ï¼ŒJRE éƒ½ä¸ºå…¶ä¿ç•™ä¸€ä¸ªä¸å˜çš„ Class ç±»å‹çš„å¯¹è±¡ã€‚ä¸€ä¸ª Class å¯¹è±¡åŒ…å«äº†ç‰¹å®šæŸä¸ªç»“æ„(class/interface/enum/annotation/primitive type/void/[])çš„æœ‰å…³ä¿¡æ¯ã€‚ \n\nClassæœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªç±»\nClass å¯¹è±¡åªèƒ½ç”±ç³»ç»Ÿå»ºç«‹å¯¹è±¡\nä¸€ä¸ªåŠ è½½çš„ç±»åœ¨ JVM ä¸­åªä¼šæœ‰ä¸€ä¸ªClasså®ä¾‹\nä¸€ä¸ªClasså¯¹è±¡å¯¹åº”çš„æ˜¯ä¸€ä¸ªåŠ è½½åˆ°JVMä¸­çš„ä¸€ä¸ª.classæ–‡ä»¶\næ¯ä¸ªç±»çš„å®ä¾‹éƒ½ä¼šè®°å¾—è‡ªå·±æ˜¯ç”±å“ªä¸ª Class å®ä¾‹æ‰€ç”Ÿæˆ\né€šè¿‡Classå¯ä»¥å®Œæ•´åœ°å¾—åˆ°ä¸€ä¸ªç±»ä¸­çš„æ‰€æœ‰è¢«åŠ è½½çš„ç»“æ„\nClassç±»æ˜¯Reflectionçš„æ ¹æºï¼Œé’ˆå¯¹ä»»ä½•ä½ æƒ³åŠ¨æ€åŠ è½½ã€è¿è¡Œçš„ç±»ï¼Œå”¯æœ‰å…ˆè·å¾—ç›¸åº”çš„\n\n\n\n\n\nClassç±»çš„å¸¸ç”¨æ–¹æ³•\nåŠŸèƒ½è¯´æ˜\n\n\n\n\nstatic Class forName(String name)\nè¿”å›æŒ‡å®šç±»å name çš„ Class å¯¹è±¡\n\n\nObject newInstance()\nè°ƒç”¨ç¼ºçœæ„é€ å‡½æ•°ï¼Œè¿”å›è¯¥Classå¯¹è±¡çš„ä¸€ä¸ªå®ä¾‹\n\n\ngetName()\nè¿”å›æ­¤Classå¯¹è±¡æ‰€è¡¨ç¤ºçš„å®ä½“ï¼ˆç±»ã€æ¥å£ã€æ•°ç»„ç±»ã€åŸºæœ¬ç±»å‹æˆ–voidï¼‰åç§°\n\n\nClass getSuperClass()\nè¿”å›å½“å‰Classå¯¹è±¡çš„çˆ¶ç±»çš„Classå¯¹è±¡\n\n\nClass [] getInterfaces()\nè·å–å½“å‰Classå¯¹è±¡çš„æ¥å£\n\n\nClassLoader getClassLoader()\nè¿”å›è¯¥ç±»çš„ç±»åŠ è½½å™¨\n\n\nClass getSuperclass()\nè¿”å›è¯¥ç±»çš„ç±»åŠ è½½å™¨\n\n\nConstructor[] getConstructors()\nè¿”å›ä¸€ä¸ªåŒ…å«æŸäº›Constructorå¯¹è±¡çš„æ•°ç»„\n\n\nField[] getDeclaredFields()\nè¿”å›Fieldå¯¹è±¡çš„ä¸€ä¸ªæ•°ç»„\n\n\nMethod getMethod(String name,Class â€¦ paramTypes)\nè¿”å›ä¸€ä¸ªMethodå¯¹è±¡ï¼Œæ­¤å¯¹è±¡çš„å½¢å‚ç±»å‹ä¸ºparamType\n\n\n\n\nåå°„çš„åº”ç”¨ä¸¾ä¾‹\nString str = \"test4.Person\";\nClass clazz = Class.forName(str);\nObject obj = clazz.newInstance();\nField field = clazz.getField(\"name\");\nfield.set(obj, \"Peter\");\nObject name = field.get(obj);\nSystem.out.println(name);\næ³¨ï¼štest4.Personæ˜¯test4åŒ…ä¸‹çš„Personç±»\nè·å–Classç±»çš„å®ä¾‹(å››ç§æ–¹æ³•) \n1ï¼‰å‰æï¼šè‹¥å·²çŸ¥å…·ä½“çš„ç±»ï¼Œé€šè¿‡ç±»çš„classå±æ€§è·å–ï¼Œè¯¥æ–¹æ³•æœ€ä¸ºå®‰å…¨å¯é ï¼Œç¨‹åºæ€§èƒ½æœ€é«˜        å®ä¾‹ï¼šClass clazz = String.class; \n2ï¼‰å‰æï¼šå·²çŸ¥æŸä¸ªç±»çš„å®ä¾‹ï¼Œè°ƒç”¨è¯¥å®ä¾‹çš„getClass()æ–¹æ³•è·å–Classå¯¹è±¡        å®ä¾‹ï¼šClass clazz = â€œwww.atguigu.comâ€.getClass();3ï¼‰å‰æï¼šå·²çŸ¥ä¸€ä¸ªç±»çš„å…¨ç±»åï¼Œä¸”è¯¥ç±»åœ¨ç±»è·¯å¾„ä¸‹ï¼Œå¯é€šè¿‡Classç±»çš„é™æ€æ–¹æ³•forName()è·å–ï¼Œå¯èƒ½æŠ›å‡ºClassNotFoundException        å®ä¾‹ï¼šClass clazz = Class.forName(â€œjava.lang.Stringâ€);4ï¼‰å…¶ä»–æ–¹å¼(ä¸åšè¦æ±‚)        ClassLoader cl = this.getClass().getClassLoader();        Class clazz4 = cl.loadClass(â€œç±»çš„å…¨ç±»åâ€);å“ªäº›ç±»å‹å¯ä»¥æœ‰Classå¯¹è±¡ï¼Ÿï¼ˆ1ï¼‰classï¼š å¤–éƒ¨ç±»ï¼Œæˆå‘˜(æˆå‘˜å†…éƒ¨ç±»ï¼Œé™æ€å†…éƒ¨ç±»)ï¼Œå±€éƒ¨å†…éƒ¨ç±»ï¼ŒåŒ¿åå†…éƒ¨ç±»ï¼ˆ2ï¼‰interfaceï¼šæ¥å£ï¼ˆ3ï¼‰[]ï¼šæ•°ç»„ï¼ˆ4ï¼‰enumï¼šæšä¸¾ï¼ˆ5ï¼‰annotationï¼šæ³¨è§£@interfaceï¼ˆ6ï¼‰primitive typeï¼šåŸºæœ¬æ•°æ®ç±»å‹ï¼ˆ7ï¼‰void\nClass c1 = Object.class;\nClass c2 = Comparable.class;\nClass c3 = String[].class;\nClass c4 = int[][].class;\nClass c5 = ElementType.class;\nClass c6 = Override.class;\nClass c7 = int.class;\nClass c8 = void.class;\nClass c9 = Class.class;\nint[] a = new int[10];\nint[] b = new int[100];\nClass c10 = a.getClass();\nClass c11 = b.getClass();\n// åªè¦å…ƒç´ ç±»å‹ä¸ç»´åº¦ä¸€æ ·ï¼Œå°±æ˜¯åŒä¸€ä¸ªClass\nSystem.out.println(c10 == c11);\n1.3 ç±»çš„åŠ è½½ä¸ClassLoaderçš„ç†è§£äº†è§£ï¼šç±»çš„åŠ è½½è¿‡ç¨‹\nå½“ç¨‹åºä¸»åŠ¨ä½¿ç”¨æŸä¸ªç±»æ—¶ï¼Œå¦‚æœè¯¥ç±»è¿˜æœªè¢«åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œåˆ™ç³»ç»Ÿä¼šé€šè¿‡å¦‚ä¸‹ä¸‰ä¸ªæ­¥éª¤æ¥å¯¹è¯¥ç±»è¿›è¡Œåˆå§‹åŒ–ã€‚\n\nç±»çš„åŠ è½½(Load)å°†ç±»çš„classæ–‡ä»¶è¯»å…¥å†…å­˜ï¼Œå¹¶ä¸ºä¹‹åˆ›å»ºä¸€ä¸ªjava.lang.Classå¯¹è±¡ã€‚æ­¤è¿‡ç¨‹ç”±ç±»åŠ è½½å™¨å®Œæˆ\nç±»çš„é“¾æ¥(Link)å°†ç±»çš„äºŒè¿›åˆ¶æ•°æ®åˆå¹¶åˆ°JREä¸­\nç±»çš„åˆå§‹åŒ–(Initialize)JVMè´Ÿè´£å¯¹ç±»è¿›è¡Œåˆå§‹åŒ–\n\nç±»çš„åŠ è½½ä¸ClassLoaderçš„ç†è§£\n\nåŠ è½½ï¼šå°†classæ–‡ä»¶å­—èŠ‚ç å†…å®¹åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå¹¶å°†è¿™äº›é™æ€æ•°æ®è½¬æ¢æˆæ–¹æ³•åŒºçš„è¿è¡Œæ—¶æ•°æ®ç»“æ„ï¼Œç„¶åç”Ÿæˆä¸€ä¸ªä»£è¡¨è¿™ä¸ªç±»çš„java.lang.Classå¯¹è±¡ï¼Œä½œä¸ºæ–¹æ³•åŒºä¸­ç±»æ•°æ®çš„è®¿é—®å…¥å£ï¼ˆå³å¼•ç”¨åœ°å€ï¼‰ã€‚æ‰€æœ‰éœ€è¦è®¿é—®å’Œä½¿ç”¨ç±»æ•°æ®åªèƒ½é€šè¿‡è¿™ä¸ªClasså¯¹è±¡ã€‚è¿™ä¸ªåŠ è½½çš„è¿‡ç¨‹éœ€è¦ç±»åŠ è½½å™¨å‚ä¸ã€‚ \né“¾æ¥ï¼šå°†Javaç±»çš„äºŒè¿›åˆ¶ä»£ç åˆå¹¶åˆ°JVMçš„è¿è¡ŒçŠ¶æ€ä¹‹ä¸­çš„è¿‡ç¨‹ã€‚\néªŒè¯ï¼šç¡®ä¿åŠ è½½çš„ç±»ä¿¡æ¯ç¬¦åˆJVMè§„èŒƒï¼Œä¾‹å¦‚ï¼šä»¥cafeå¼€å¤´ï¼Œæ²¡æœ‰å®‰å…¨æ–¹é¢çš„é—®é¢˜\nå‡†å¤‡ï¼šæ­£å¼ä¸ºç±»å˜é‡ï¼ˆstaticï¼‰åˆ†é…å†…å­˜å¹¶è®¾ç½®ç±»å˜é‡é»˜è®¤åˆå§‹å€¼çš„é˜¶æ®µï¼Œè¿™äº›å†…å­˜éƒ½å°†åœ¨æ–¹æ³•åŒºä¸­è¿›è¡Œåˆ†é…ã€‚ \nè§£æï¼šè™šæ‹Ÿæœºå¸¸é‡æ± å†…çš„ç¬¦å·å¼•ç”¨ï¼ˆå¸¸é‡åï¼‰æ›¿æ¢ä¸ºç›´æ¥å¼•ç”¨ï¼ˆåœ°å€ï¼‰çš„è¿‡ç¨‹ã€‚ \n\n\nåˆå§‹åŒ–ï¼š\næ‰§è¡Œç±»æ„é€ å™¨()æ–¹æ³•çš„è¿‡ç¨‹ã€‚ç±»æ„é€ å™¨()æ–¹æ³•æ˜¯ç”±ç¼–è¯‘æœŸè‡ªåŠ¨æ”¶é›†ç±»ä¸­æ‰€æœ‰ç±»å˜é‡çš„èµ‹å€¼åŠ¨ä½œå’Œé™æ€ä»£ç å—ä¸­çš„è¯­å¥åˆå¹¶äº§ç”Ÿçš„ã€‚ï¼ˆç±»æ„é€ å™¨æ˜¯æ„é€ ç±»ä¿¡æ¯çš„ï¼Œä¸æ˜¯æ„é€ è¯¥ç±»å¯¹è±¡çš„æ„é€ å™¨ï¼‰ã€‚ \nå½“åˆå§‹åŒ–ä¸€ä¸ªç±»çš„æ—¶å€™ï¼Œå¦‚æœå‘ç°å…¶çˆ¶ç±»è¿˜æ²¡æœ‰è¿›è¡Œåˆå§‹åŒ–ï¼Œåˆ™éœ€è¦å…ˆè§¦å‘å…¶çˆ¶ç±»çš„åˆå§‹åŒ–ã€‚ \nè™šæ‹Ÿæœºä¼šä¿è¯ä¸€ä¸ªç±»çš„()æ–¹æ³•åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸­è¢«æ­£ç¡®åŠ é”å’ŒåŒæ­¥ã€‚\n\n\n\npublic class ClassLoadingTest {\n    public static void main(String[] args) {\n    \tSystem.out.println(A.m);\n    } \n}\nclass A {\n    static { \n        m = 300;\n    }\n    static int m = 100;\n}\n//ç¬¬äºŒæ­¥ï¼šé“¾æ¥ç»“æŸåm=0\n//ç¬¬ä¸‰æ­¥ï¼šåˆå§‹åŒ–åï¼Œmçš„å€¼ç”±&lt;clinit&gt;()æ–¹æ³•æ‰§è¡Œå†³å®š\n// è¿™ä¸ªAçš„ç±»æ„é€ å™¨&lt;clinit&gt;()æ–¹æ³•ç”±ç±»å˜é‡çš„èµ‹å€¼å’Œé™æ€ä»£ç å—ä¸­çš„è¯­å¥æŒ‰ç…§é¡ºåºåˆå¹¶\näº§ç”Ÿï¼Œç±»ä¼¼äº\n// &lt;clinit&gt;(){\n// m = 300;\n// m = 100;\n// }\nä»€ä¹ˆæ—¶å€™ä¼šå‘ç”Ÿç±»åˆå§‹åŒ–ï¼Ÿ \n\nç±»çš„ä¸»åŠ¨å¼•ç”¨ï¼ˆä¸€å®šä¼šå‘ç”Ÿç±»çš„åˆå§‹åŒ–ï¼‰ \nå½“è™šæ‹Ÿæœºå¯åŠ¨ï¼Œå…ˆåˆå§‹åŒ–mainæ–¹æ³•æ‰€åœ¨çš„ç±» ïƒ˜ newä¸€ä¸ªç±»çš„å¯¹è±¡\nè°ƒç”¨ç±»çš„é™æ€æˆå‘˜ï¼ˆé™¤äº†finalå¸¸é‡ï¼‰å’Œé™æ€æ–¹æ³•\nä½¿ç”¨java.lang.reflectåŒ…çš„æ–¹æ³•å¯¹ç±»è¿›è¡Œåå°„è°ƒç”¨\nå½“åˆå§‹åŒ–ä¸€ä¸ªç±»ï¼Œå¦‚æœå…¶çˆ¶ç±»æ²¡æœ‰è¢«åˆå§‹åŒ–ï¼Œåˆ™å…ˆä¼šåˆå§‹åŒ–å®ƒçš„çˆ¶ç±»\n\n\nç±»çš„è¢«åŠ¨å¼•ç”¨ï¼ˆä¸ä¼šå‘ç”Ÿç±»çš„åˆå§‹åŒ–ï¼‰ ïƒ˜ å½“è®¿é—®ä¸€ä¸ªé™æ€åŸŸæ—¶ï¼Œåªæœ‰çœŸæ­£å£°æ˜è¿™ä¸ªåŸŸçš„ç±»æ‰ä¼šè¢«åˆå§‹åŒ–\nå½“é€šè¿‡å­ç±»å¼•ç”¨çˆ¶ç±»çš„é™æ€å˜é‡ï¼Œä¸ä¼šå¯¼è‡´å­ç±»åˆå§‹åŒ–\né€šè¿‡æ•°ç»„å®šä¹‰ç±»å¼•ç”¨ï¼Œä¸ä¼šè§¦å‘æ­¤ç±»çš„åˆå§‹åŒ–\nå¼•ç”¨å¸¸é‡ä¸ä¼šè§¦å‘æ­¤ç±»çš„åˆå§‹åŒ–ï¼ˆå¸¸é‡åœ¨é“¾æ¥é˜¶æ®µå°±å­˜å…¥è°ƒç”¨ç±»çš„å¸¸é‡æ± ä¸­äº†ï¼‰\n\n\n\npublic class ClassLoadingTest {\npublic static void main(String[] args) {\n    // ä¸»åŠ¨å¼•ç”¨ï¼šä¸€å®šä¼šå¯¼è‡´Aå’ŒFatherçš„åˆå§‹åŒ–\n    // A a = new A();\n    // System.out.println(A.m);\n    // Class.forName(\"com.atguigu.java2.A\");\n    // è¢«åŠ¨å¼•ç”¨\n    A[] array = new A[5];//ä¸ä¼šå¯¼è‡´Aå’ŒFatherçš„åˆå§‹åŒ–\n    // System.out.println(A.b);//åªä¼šåˆå§‹åŒ–Father\n    // System.out.println(A.M);//ä¸ä¼šå¯¼è‡´Aå’ŒFatherçš„åˆå§‹åŒ–\n    }\n    static {\n    \tSystem.out.println(\"mainæ‰€åœ¨çš„ç±»\");\n    } \n}\nclass Father {\n    static int b = 2;\n    static {\n    \tSystem.out.println(\"çˆ¶ç±»è¢«åŠ è½½\");\n    } \n}\nclass A extends Father {\n    static {\n        System.out.println(\"å­ç±»è¢«åŠ è½½\");\n        m = 300;\n    }\n    static int m = 100;\n    static final int M = 1;\n}\nç±»åŠ è½½çš„ä½œç”¨ï¼šå°†classæ–‡ä»¶å­—èŠ‚ç å†…å®¹åŠ è½½åˆ°å†…å­˜ä¸­ï¼Œå¹¶å°†è¿™äº›é™æ€æ•°æ®è½¬æ¢æˆæ–¹æ³•åŒºçš„è¿è¡Œæ—¶æ•°æ®ç»“æ„ï¼Œç„¶ååœ¨å †ä¸­ç”Ÿæˆä¸€ä¸ªä»£è¡¨è¿™ä¸ªç±»çš„java.lang.Classå¯¹è±¡ï¼Œä½œä¸ºæ–¹æ³•åŒºä¸­ç±»æ•°æ®çš„è®¿é—®å…¥å£ã€‚ \nç±»ç¼“å­˜ï¼šæ ‡å‡†çš„JavaSEç±»åŠ è½½å™¨å¯ä»¥æŒ‰è¦æ±‚æŸ¥æ‰¾ç±»ï¼Œä½†ä¸€æ—¦æŸä¸ªç±»è¢«åŠ è½½åˆ°ç±»åŠ è½½å™¨ä¸­ï¼Œå®ƒå°†ç»´æŒåŠ è½½ï¼ˆç¼“å­˜ï¼‰ä¸€æ®µæ—¶é—´ã€‚ä¸è¿‡JVMåƒåœ¾å›æ”¶æœºåˆ¶å¯ä»¥å›æ”¶è¿™äº›Classå¯¹è±¡ã€‚\näº†è§£ï¼šClassLoader\nç±»åŠ è½½å™¨ä½œç”¨æ˜¯ç”¨æ¥æŠŠç±»(class)è£…è½½è¿›å†…å­˜çš„ã€‚JVM è§„èŒƒå®šä¹‰äº†å¦‚ä¸‹ç±»å‹çš„ç±»çš„åŠ è½½å™¨ã€‚å¼•å¯¼ç±»åŠ è½½å™¨ï¼šç”¨C++ç¼–å†™çš„ï¼Œæ˜¯JVMè‡ªå¸¦çš„ç±»åŠ è½½å™¨ï¼Œè´Ÿè´£Javaå¹³å°æ ¸å¿ƒåº“ï¼Œç”¨æ¥è£…è½½æ ¸å¿ƒç±»åº“ã€‚è¯¥åŠ è½½å™¨æ— æ³•ç›´æ¥è·å–æ‰©å±•ç±»åŠ è½½å™¨ï¼šè´Ÿè´£jre/lib/extç›®å½•ä¸‹çš„jaråŒ…æˆ– â€“D java.ext.dirs æŒ‡å®šç›®å½•ä¸‹çš„jaråŒ…è£…å…¥å·¥ä½œåº“ç³»ç»Ÿç±»åŠ è½½å™¨ï¼šè´Ÿè´£java â€“classpath æˆ– â€“D java.class.pathæ‰€æŒ‡çš„ç›®å½•ä¸‹çš„ç±»ä¸jaråŒ…è£…å…¥å·¥ä½œ ï¼Œæ˜¯æœ€å¸¸ç”¨çš„åŠ è½½å™¨\n//1.è·å–ä¸€ä¸ªç³»ç»Ÿç±»åŠ è½½å™¨\nClassLoader classloader = ClassLoader.getSystemClassLoader();\nSystem.out.println(classloader);\n//2.è·å–ç³»ç»Ÿç±»åŠ è½½å™¨çš„çˆ¶ç±»åŠ è½½å™¨ï¼Œå³æ‰©å±•ç±»åŠ è½½å™¨\nclassloader = classloader.getParent();\nSystem.out.println(classloader);\n//3.è·å–æ‰©å±•ç±»åŠ è½½å™¨çš„çˆ¶ç±»åŠ è½½å™¨ï¼Œå³å¼•å¯¼ç±»åŠ è½½å™¨\nclassloader = classloader.getParent();\nSystem.out.println(classloader);\n//4.æµ‹è¯•å½“å‰ç±»ç”±å“ªä¸ªç±»åŠ è½½å™¨è¿›è¡ŒåŠ è½½\nclassloader = Class.forName(\"exer2.ClassloaderDemo\").getClassLoader();\nSystem.out.println(classloader);\n//5.æµ‹è¯•JDKæä¾›çš„Objectç±»ç”±å“ªä¸ªç±»åŠ è½½å™¨åŠ è½½\nclassloader = Class.forName(\"java.lang.Object\").getClassLoader();\nSystem.out.println(classloader);\n//*6.å…³äºç±»åŠ è½½å™¨çš„ä¸€ä¸ªä¸»è¦æ–¹æ³•ï¼šgetResourceAsStream(String str):è·å–ç±»è·¯å¾„ä¸‹çš„æŒ‡å®šæ–‡ä»¶çš„è¾“å…¥æµ\nInputStream in = null;\nin = this.getClass().getClassLoader().getResourceAsStream(\"exer2\\\\test.properties\");\nSystem.out.println(in);\n1.4 åˆ›å»ºè¿è¡Œæ—¶ç±»çš„å¯¹è±¡åˆ›å»ºç±»çš„å¯¹è±¡ï¼šè°ƒç”¨Classå¯¹è±¡çš„newInstance()æ–¹æ³•è¦ æ±‚ï¼š \n1ï¼‰ç±»å¿…é¡»æœ‰ä¸€ä¸ªæ— å‚æ•°çš„æ„é€ å™¨ã€‚2ï¼‰ç±»çš„æ„é€ å™¨çš„è®¿é—®æƒé™éœ€è¦è¶³å¤Ÿã€‚\néš¾é“æ²¡æœ‰æ— å‚çš„æ„é€ å™¨å°±ä¸èƒ½åˆ›å»ºå¯¹è±¡äº†å—ï¼Ÿä¸æ˜¯ï¼åªè¦åœ¨æ“ä½œçš„æ—¶å€™æ˜ç¡®çš„è°ƒç”¨ç±»ä¸­çš„æ„é€ å™¨ï¼Œå¹¶å°†å‚æ•°ä¼ é€’è¿›å»ä¹‹åï¼Œæ‰å¯ä»¥å®ä¾‹åŒ–æ“ä½œã€‚æ­¥éª¤å¦‚ä¸‹ï¼š1ï¼‰é€šè¿‡Classç±»çš„getDeclaredConstructor(Class â€¦ parameterTypes)å–å¾—æœ¬ç±»çš„æŒ‡å®šå½¢å‚ç±»å‹çš„æ„é€ å™¨2ï¼‰å‘æ„é€ å™¨çš„å½¢å‚ä¸­ä¼ é€’ä¸€ä¸ªå¯¹è±¡æ•°ç»„è¿›å»ï¼Œé‡Œé¢åŒ…å«äº†æ„é€ å™¨ä¸­æ‰€éœ€çš„å„ä¸ªå‚æ•°ã€‚3ï¼‰é€šè¿‡Constructorå®ä¾‹åŒ–å¯¹è±¡ã€‚\næœ‰äº†Classå¯¹è±¡ï¼Œèƒ½åšä»€ä¹ˆï¼Ÿä»¥ä¸Šæ˜¯åå°„æœºåˆ¶åº”ç”¨æœ€å¤šçš„åœ°æ–¹ã€‚\n//1.æ ¹æ®å…¨ç±»åè·å–å¯¹åº”çš„Classå¯¹è±¡\nString name = â€œatguigu.java.Person\";\nClass clazz = null;\nclazz = Class.forName(name);\n//2.è°ƒç”¨æŒ‡å®šå‚æ•°ç»“æ„çš„æ„é€ å™¨ï¼Œç”ŸæˆConstructorçš„å®ä¾‹\nConstructor con = clazz.getConstructor(String.class,Integer.class);\n//3.é€šè¿‡Constructorçš„å®ä¾‹åˆ›å»ºå¯¹åº”ç±»çš„å¯¹è±¡ï¼Œå¹¶åˆå§‹åŒ–ç±»å±æ€§\nPerson p2 = (Person) con.newInstance(\"Peter\",20);\nSystem.out.println(p2);\n1.5 è·å–è¿è¡Œæ—¶ç±»çš„å®Œæ•´ç»“æ„é€šè¿‡åå°„è·å–è¿è¡Œæ—¶ç±»çš„å®Œæ•´ç»“æ„Fieldã€Methodã€Constructorã€Superclassã€Interfaceã€Annotation\n\nå®ç°çš„å…¨éƒ¨æ¥å£\næ‰€ç»§æ‰¿çš„çˆ¶ç±»\nå…¨éƒ¨çš„æ„é€ å™¨\nå…¨éƒ¨çš„æ–¹æ³•\nå…¨éƒ¨çš„Field\n\nä½¿ç”¨åå°„å¯ä»¥å–å¾—ï¼š\n\nå®ç°çš„å…¨éƒ¨æ¥å£public Class&lt;?&gt;[] getInterfaces()ç¡®å®šæ­¤å¯¹è±¡æ‰€è¡¨ç¤ºçš„ç±»æˆ–æ¥å£å®ç°çš„æ¥å£ã€‚\næ‰€ç»§æ‰¿çš„çˆ¶ç±»public Class&lt;? Super T&gt; getSuperclass()è¿”å›è¡¨ç¤ºæ­¤ Class æ‰€è¡¨ç¤ºçš„å®ä½“ï¼ˆç±»ã€æ¥å£ã€åŸºæœ¬ç±»å‹ï¼‰çš„çˆ¶ç±»çš„Classã€‚\nå…¨éƒ¨çš„æ„é€ å™¨public Constructor[] getConstructors()è¿”å›æ­¤ Class å¯¹è±¡æ‰€è¡¨ç¤ºçš„ç±»çš„æ‰€æœ‰publicæ„é€ æ–¹æ³•ã€‚public Constructor[] getDeclaredConstructors()è¿”å›æ­¤ Class å¯¹è±¡è¡¨ç¤ºçš„ç±»å£°æ˜çš„æ‰€æœ‰æ„é€ æ–¹æ³•ã€‚\n\nConstructorç±»ä¸­ï¼š\n\nå–å¾—ä¿®é¥°ç¬¦: public int getModifiers();\nå–å¾—æ–¹æ³•åç§°: public String getName();\n\nå–å¾—å‚æ•°çš„ç±»å‹ï¼špublic Class&lt;?&gt;[] getParameterTypes();\n\n\n\nå…¨éƒ¨çš„æ–¹æ³•public Method[] getDeclaredMethods()è¿”å›æ­¤Classå¯¹è±¡æ‰€è¡¨ç¤ºçš„ç±»æˆ–æ¥å£çš„å…¨éƒ¨æ–¹æ³•public Method[] getMethods()è¿”å›æ­¤Classå¯¹è±¡æ‰€è¡¨ç¤ºçš„ç±»æˆ–æ¥å£çš„publicçš„æ–¹æ³•\n\n\nMethodç±»ä¸­ï¼špublic Class&lt;?&gt; getReturnType()å–å¾—å…¨éƒ¨çš„è¿”å›å€¼public Class&lt;?&gt;[] getParameterTypes()å–å¾—å…¨éƒ¨çš„å‚æ•°public int getModifiers()å–å¾—ä¿®é¥°ç¬¦public Class&lt;?&gt;[] getExceptionTypes()å–å¾—å¼‚å¸¸ä¿¡æ¯\n\n\nå…¨éƒ¨çš„Fieldpublic Field[] getFields()è¿”å›æ­¤Classå¯¹è±¡æ‰€è¡¨ç¤ºçš„ç±»æˆ–æ¥å£çš„publicçš„Fieldã€‚ \npublic Field[] getDeclaredFields()è¿”å›æ­¤Classå¯¹è±¡æ‰€è¡¨ç¤ºçš„ç±»æˆ–æ¥å£çš„å…¨éƒ¨Fieldã€‚\n\n\n\nFieldæ–¹æ³•ä¸­ï¼špublic int getModifiers() ä»¥æ•´æ•°å½¢å¼è¿”å›æ­¤Fieldçš„ä¿®é¥°ç¬¦public Class&lt;?&gt; getType() å¾—åˆ°Fieldçš„å±æ€§ç±»å‹public String getName() è¿”å›Fieldçš„åç§°ã€‚\n\n\nAnnotationç›¸å…³\nget Annotation(Class annotationClass)getDeclaredAnnotations() \n\næ³›å‹ç›¸å…³è·å–çˆ¶ç±»æ³›å‹ç±»å‹ï¼šType getGenericSuperclass()æ³›å‹ç±»å‹ï¼šParameterizedTypeè·å–å®é™…çš„æ³›å‹ç±»å‹å‚æ•°æ•°ç»„ï¼šgetActualTypeArguments()\n\nç±»æ‰€åœ¨çš„åŒ… Package getPackage() \n\nå° ç»“ï¼š\n\nåœ¨å®é™…çš„æ“ä½œä¸­ï¼Œå–å¾—ç±»çš„ä¿¡æ¯çš„æ“ä½œä»£ç ï¼Œå¹¶ä¸ä¼šç»å¸¸å¼€å‘ã€‚\nä¸€å®šè¦ç†Ÿæ‚‰java.lang.reflectåŒ…çš„ä½œç”¨ï¼Œåå°„æœºåˆ¶ã€‚\nå¦‚ä½•å–å¾—å±æ€§ã€æ–¹æ³•ã€æ„é€ å™¨çš„åç§°ï¼Œä¿®é¥°ç¬¦ç­‰ã€‚\n\n1.6 è°ƒç”¨è¿è¡Œæ—¶ç±»çš„æŒ‡å®šç»“æ„è°ƒç”¨æŒ‡å®šæ–¹æ³•é€šè¿‡åå°„ï¼Œè°ƒç”¨ç±»ä¸­çš„æ–¹æ³•ï¼Œé€šè¿‡Methodç±»å®Œæˆã€‚æ­¥éª¤ï¼š\n\né€šè¿‡Classç±»çš„getMethod(String name,Classâ€¦parameterTypes)æ–¹æ³•å–å¾—ä¸€ä¸ªMethodå¯¹è±¡ï¼Œå¹¶è®¾ç½®æ­¤æ–¹æ³•æ“ä½œæ—¶æ‰€éœ€è¦çš„å‚æ•°ç±»å‹ã€‚\nä¹‹åä½¿ç”¨Object invoke(Object obj, Object[] args)è¿›è¡Œè°ƒç”¨ï¼Œå¹¶å‘æ–¹æ³•ä¸­ä¼ é€’è¦è®¾ç½®çš„objå¯¹è±¡çš„å‚æ•°ä¿¡æ¯ã€‚\n\nObject invoke(Object obj, Object â€¦ args)è¯´æ˜ï¼š\n\nObject å¯¹åº”åŸæ–¹æ³•çš„è¿”å›å€¼ï¼Œè‹¥åŸæ–¹æ³•æ— è¿”å›å€¼ï¼Œæ­¤æ—¶è¿”å›null\nè‹¥åŸæ–¹æ³•è‹¥ä¸ºé™æ€æ–¹æ³•ï¼Œæ­¤æ—¶å½¢å‚Object objå¯ä¸ºnull\nè‹¥åŸæ–¹æ³•å½¢å‚åˆ—è¡¨ä¸ºç©ºï¼Œåˆ™Object[] argsä¸ºnull\nè‹¥åŸæ–¹æ³•å£°æ˜ä¸ºprivate,åˆ™éœ€è¦åœ¨è°ƒç”¨æ­¤invoke()æ–¹æ³•å‰ï¼Œæ˜¾å¼è°ƒç”¨æ–¹æ³•å¯¹è±¡çš„setAccessible(true)æ–¹æ³•ï¼Œå°†å¯è®¿é—®privateçš„æ–¹æ³•ã€‚\n\nè°ƒç”¨æŒ‡å®šå±æ€§åœ¨åå°„æœºåˆ¶ä¸­ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡Fieldç±»æ“ä½œç±»ä¸­çš„å±æ€§ï¼Œé€šè¿‡Fieldç±»æä¾›çš„set()å’Œget()æ–¹æ³•å°±å¯ä»¥å®Œæˆè®¾ç½®å’Œå–å¾—å±æ€§å†…å®¹çš„æ“ä½œã€‚\n\npublic Field getField(String name) è¿”å›æ­¤Classå¯¹è±¡è¡¨ç¤ºçš„ç±»æˆ–æ¥å£çš„æŒ‡å®šçš„publicçš„Fieldã€‚ \npublic Field getDeclaredField(String name)è¿”å›æ­¤Classå¯¹è±¡è¡¨ç¤ºçš„ç±»æˆ–æ¥å£çš„æŒ‡å®šçš„Fieldã€‚ \n\nåœ¨Fieldä¸­ï¼š\n\npublic Object get(Object obj) å–å¾—æŒ‡å®šå¯¹è±¡objä¸Šæ­¤Fieldçš„å±æ€§å†…å®¹\npublic void set(Object obj,Object value) è®¾ç½®æŒ‡å®šå¯¹è±¡objä¸Šæ­¤Fieldçš„å±æ€§å†…å®¹\n\nå…³äºsetAccessibleæ–¹æ³•çš„ä½¿ç”¨\n\nMethodå’ŒFieldã€Constructorå¯¹è±¡éƒ½æœ‰setAccessible()æ–¹æ³•ã€‚\nsetAccessibleå¯åŠ¨å’Œç¦ç”¨è®¿é—®å®‰å…¨æ£€æŸ¥çš„å¼€å…³ã€‚ \nå‚æ•°å€¼ä¸ºtrueåˆ™æŒ‡ç¤ºåå°„çš„å¯¹è±¡åœ¨ä½¿ç”¨æ—¶åº”è¯¥å–æ¶ˆJavaè¯­è¨€è®¿é—®æ£€æŸ¥ã€‚\næé«˜åå°„çš„æ•ˆç‡ã€‚å¦‚æœä»£ç ä¸­å¿…é¡»ç”¨åå°„ï¼Œè€Œè¯¥å¥ä»£ç éœ€è¦é¢‘ç¹çš„è¢«è°ƒç”¨ï¼Œé‚£ä¹ˆè¯·è®¾ç½®ä¸ºtrueã€‚ \nä½¿å¾—åŸæœ¬æ— æ³•è®¿é—®çš„ç§æœ‰æˆå‘˜ä¹Ÿå¯ä»¥è®¿é—®\nå‚æ•°å€¼ä¸ºfalseåˆ™æŒ‡ç¤ºåå°„çš„å¯¹è±¡åº”è¯¥å®æ–½Javaè¯­è¨€è®¿é—®æ£€æŸ¥ã€‚\n\n1.7 åå°„çš„åº”ç”¨ï¼šåŠ¨æ€ä»£ç†ï¬ä»£ç†è®¾è®¡æ¨¡å¼çš„åŸç†:ä½¿ç”¨ä¸€ä¸ªä»£ç†å°†å¯¹è±¡åŒ…è£…èµ·æ¥, ç„¶åç”¨è¯¥ä»£ç†å¯¹è±¡å–ä»£åŸå§‹å¯¹è±¡ã€‚ä»»ä½•å¯¹åŸå§‹å¯¹è±¡çš„è°ƒç”¨éƒ½è¦é€šè¿‡ä»£ç†ã€‚ä»£ç†å¯¹è±¡å†³å®šæ˜¯å¦ä»¥åŠä½•æ—¶å°†æ–¹æ³•è°ƒç”¨è½¬åˆ°åŸå§‹å¯¹è±¡ä¸Šã€‚ ï¬ ä¹‹å‰ä¸ºå¤§å®¶è®²è§£è¿‡ä»£ç†æœºåˆ¶çš„æ“ä½œï¼Œå±äºé™æ€ä»£ç†ï¼Œç‰¹å¾æ˜¯ä»£ç†ç±»å’Œç›®æ ‡å¯¹è±¡çš„ç±»éƒ½æ˜¯åœ¨ç¼–è¯‘æœŸé—´ç¡®å®šä¸‹æ¥ï¼Œä¸åˆ©äºç¨‹åºçš„æ‰©å±•ã€‚åŒæ—¶ï¼Œæ¯ä¸€ä¸ªä»£ç†ç±»åªèƒ½ä¸ºä¸€ä¸ªæ¥å£æœåŠ¡ï¼Œè¿™æ ·ä¸€æ¥ç¨‹åºå¼€å‘ä¸­å¿…ç„¶äº§ç”Ÿè¿‡å¤šçš„ä»£ç†ã€‚æœ€å¥½å¯ä»¥é€šè¿‡ä¸€ä¸ªä»£ç†ç±»å®Œæˆå…¨éƒ¨çš„ä»£ç†åŠŸèƒ½ã€‚15.7 åå°„çš„åº”ç”¨ï¼šåŠ¨æ€ä»£ç†ï¬åŠ¨æ€ä»£ç†æ˜¯æŒ‡å®¢æˆ·é€šè¿‡ä»£ç†ç±»æ¥è°ƒç”¨å…¶å®ƒå¯¹è±¡çš„æ–¹æ³•ï¼Œå¹¶ä¸”æ˜¯åœ¨ç¨‹åºè¿è¡Œæ—¶æ ¹æ®éœ€è¦åŠ¨æ€åˆ›å»ºç›®æ ‡ç±»çš„ä»£ç†å¯¹è±¡ã€‚ï¬åŠ¨æ€ä»£ç†ä½¿ç”¨åœºåˆ: ïƒ˜è°ƒè¯•ïƒ˜è¿œç¨‹æ–¹æ³•è°ƒç”¨ï¬åŠ¨æ€ä»£ç†ç›¸æ¯”äºé™æ€ä»£ç†çš„ä¼˜ç‚¹ï¼šæŠ½è±¡è§’è‰²ä¸­ï¼ˆæ¥å£ï¼‰å£°æ˜çš„æ‰€æœ‰æ–¹æ³•éƒ½è¢«è½¬ç§»åˆ°è°ƒç”¨å¤„ç†å™¨ä¸€ä¸ªé›†ä¸­çš„æ–¹æ³•ä¸­å¤„ç†ï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥æ›´åŠ çµæ´»å’Œç»Ÿä¸€çš„å¤„ç†ä¼—å¤šçš„æ–¹æ³•ã€‚ï¬ Proxy ï¼šä¸“é—¨å®Œæˆä»£ç†çš„æ“ä½œç±»ï¼Œæ˜¯æ‰€æœ‰åŠ¨æ€ä»£ç†ç±»çš„çˆ¶ç±»ã€‚é€šè¿‡æ­¤ç±»ä¸ºä¸€ä¸ªæˆ–å¤šä¸ªæ¥å£åŠ¨æ€åœ°ç”Ÿæˆå®ç°ç±»ã€‚ï¬ æä¾›ç”¨äºåˆ›å»ºåŠ¨æ€ä»£ç†ç±»å’ŒåŠ¨æ€ä»£ç†å¯¹è±¡çš„é™æ€æ–¹æ³•ïƒ˜static Class&lt;?&gt; getProxyClass(ClassLoader loader, Class&lt;?&gt;â€¦ interfaces) åˆ›å»ºä¸€ä¸ªåŠ¨æ€ä»£ç†ç±»æ‰€å¯¹åº”çš„Classå¯¹è±¡ïƒ˜static Object newProxyInstance(ClassLoader loader, Class&lt;?&gt;[] interfaces,InvocationHandler h) ç›´æ¥åˆ›å»ºä¸€ä¸ªåŠ¨æ€ä»£ç†å¯¹è±¡JavaåŠ¨æ€ä»£ç†ç›¸å…³APIç±»åŠ è½½å™¨ å¾—åˆ°è¢«ä»£ç†ç±»å®ç°çš„å…¨éƒ¨æ¥å£å¾—åˆ°InvocationHandleræ¥ å£çš„å®ç°ç±»å®ä¾‹15.7 åå°„çš„åº”ç”¨ï¼šåŠ¨æ€ä»£ç†åŠ¨æ€ä»£ç†æ­¥éª¤1.åˆ›å»ºä¸€ä¸ªå®ç°æ¥å£InvocationHandlerçš„ç±»ï¼Œå®ƒå¿…é¡»å®ç°invokeæ–¹æ³•ï¼Œä»¥å®Œæˆä»£ç†çš„å…·ä½“æ“ä½œã€‚public Object invoke(Object theProxy, Method method, Object[] params)throws Throwable{try{Object retval = method.invoke(targetObj, params);// Print out the resultSystem.out.println(retval);return retval;}catch (Exception exc){}}ä»£ç†ç±»çš„å¯¹è±¡è¦è°ƒç”¨çš„æ–¹æ³•æ–¹æ³•è°ƒç”¨æ—¶æ‰€éœ€è¦çš„å‚æ•°15.7 åå°„çš„åº”ç”¨ï¼šåŠ¨æ€ä»£ç†åŠ¨æ€ä»£ç†æ­¥éª¤2.åˆ›å»ºè¢«ä»£ç†çš„ç±»ä»¥åŠæ¥å£Subject RealSubject implementssay(String name,int age)15.7 åå°„çš„åº”ç”¨ï¼šåŠ¨æ€ä»£ç†15.7 åå°„çš„åº”ç”¨ï¼šåŠ¨æ€ä»£ç†åŠ¨æ€ä»£ç†æ­¥éª¤3.é€šè¿‡Proxyçš„é™æ€æ–¹æ³•newProxyInstance(ClassLoader loader, Class[] interfaces, InvocationHandler h) åˆ›å»ºä¸€ä¸ªSubjectæ¥å£ä»£ç†RealSubject target = new RealSubject();// Create a proxy to wrap the original implementationDebugProxy proxy = new DebugProxy(target);// Get a reference to the proxy through the Subject interfaceSubject sub = (Subject) Proxy.newProxyInstance(Subject.class.getClassLoader(),new Class[] { Subject.class }, proxy);15.7 åå°„çš„åº”ç”¨ï¼šåŠ¨æ€ä»£ç†åŠ¨æ€ä»£ç†æ­¥éª¤4.é€šè¿‡ Subjectä»£ç†è°ƒç”¨RealSubjectå®ç°ç±»çš„æ–¹æ³•String info = sub.say(â€œPeterâ€, 24);System.out.println(info);åŠ¨æ€ä»£ç†ä¸AOPï¼ˆAspect Orient Programming)å‰é¢ä»‹ç»çš„Proxyå’ŒInvocationHandlerï¼Œå¾ˆéš¾çœ‹å‡ºè¿™ç§åŠ¨æ€ä»£ç†çš„ä¼˜åŠ¿ï¼Œä¸‹é¢ä»‹ç»ä¸€ç§æ›´å®ç”¨çš„åŠ¨æ€ä»£ç†æœºåˆ¶ç›¸åŒçš„ä»£ç æ®µç›¸åŒçš„ä»£ç æ®µç›¸åŒçš„ä»£ç æ®µä»£ç æ®µ2ä»£ç æ®µ3ä»£ç æ®µ1é€šè¿‡å¤åˆ¶ã€ç²˜è´´çš„éƒ¨åˆ†15.7 åå°„çš„åº”ç”¨ï¼šåŠ¨æ€ä»£ç†åŠ¨æ€ä»£ç†ä¸AOPï¼ˆAspect Orient Programming)è°ƒç”¨æ–¹æ³•è°ƒç”¨æ–¹æ³•è°ƒç”¨æ–¹æ³•ä»£ç æ®µ2ä»£ç æ®µ3ä»£ç æ®µ1ç›¸åŒçš„ä»£ç æ®µæ–¹æ³•Aæ”¹è¿›åçš„è¯´æ˜ï¼šä»£ç æ®µ1ã€ä»£ç æ®µ2ã€ä»£ç æ®µ3å’Œæ·±è‰²ä»£ç æ®µåˆ†ç¦»å¼€äº†ï¼Œä½†ä»£ç æ®µ1ã€2ã€3åˆå’Œä¸€ä¸ªç‰¹å®šçš„æ–¹æ³•Aè€¦åˆäº†ï¼æœ€ç†æƒ³çš„æ•ˆæœæ˜¯ï¼šä»£ç å—1ã€2ã€3æ—¢å¯ä»¥æ‰§è¡Œæ–¹æ³•Aï¼Œåˆæ— é¡»åœ¨ç¨‹åºä¸­ä»¥ç¡¬ç¼–ç çš„æ–¹å¼ç›´æ¥è°ƒç”¨æ·±è‰²ä»£ç çš„æ–¹æ³•15.7 åå°„çš„åº”ç”¨ï¼šåŠ¨æ€ä»£ç†15.7 åå°„çš„åº”ç”¨ï¼šåŠ¨æ€ä»£ç†åŠ¨æ€ä»£ç†ä¸AOPï¼ˆAspect Orient Programming)public interface Dog{void info();void run();}public class HuntingDog implements Dog{public void info(){System.out.println(â€œæˆ‘æ˜¯ä¸€åªçŒç‹—â€);}public void run(){System.out.println(â€œæˆ‘å¥”è·‘è¿…é€Ÿâ€);} }15.7 åå°„çš„åº”ç”¨ï¼šåŠ¨æ€ä»£ç†åŠ¨æ€ä»£ç†ä¸AOPï¼ˆAspect Orient Programming)public class DogUtil{public void method1(){System.out.println(â€œ=====æ¨¡æ‹Ÿé€šç”¨æ–¹æ³•ä¸€=====â€);}public void method2(){System.out.println(â€œ=====æ¨¡æ‹Ÿé€šç”¨æ–¹æ³•äºŒ=====â€);} }15.7 åå°„çš„åº”ç”¨ï¼šåŠ¨æ€ä»£ç†åŠ¨æ€ä»£ç†ä¸AOPï¼ˆAspect Orient Programming)public class MyInvocationHandler implements InvocationHandler{// éœ€è¦è¢«ä»£ç†çš„å¯¹è±¡private Object target;public void setTarget(Object target){this.target = target;}// æ‰§è¡ŒåŠ¨æ€ä»£ç†å¯¹è±¡çš„æ‰€æœ‰æ–¹æ³•æ—¶ï¼Œéƒ½ä¼šè¢«æ›¿æ¢æˆæ‰§è¡Œå¦‚ä¸‹çš„invokeæ–¹æ³•public Object invoke(Object proxy, Method method, Object[] args)throws Exception{DogUtil du = new DogUtil();// æ‰§è¡ŒDogUtilå¯¹è±¡ä¸­çš„method1ã€‚du.method1();// ä»¥targetä½œä¸ºä¸»è°ƒæ¥æ‰§è¡Œmethodæ–¹æ³•Object result = method.invoke(target , args);// æ‰§è¡ŒDogUtilå¯¹è±¡ä¸­çš„method2ã€‚du.method2();return result;}}15.7 åå°„çš„åº”ç”¨ï¼šåŠ¨æ€ä»£ç†åŠ¨æ€ä»£ç†ä¸AOPï¼ˆAspect Orient Programming)public class MyProxyFactory{// ä¸ºæŒ‡å®štargetç”ŸæˆåŠ¨æ€ä»£ç†å¯¹è±¡public static Object getProxy(Object target)throws Exception{// åˆ›å»ºä¸€ä¸ªMyInvokationHandlerå¯¹è±¡MyInvokationHandler handler =new MyInvokationHandler();// ä¸ºMyInvokationHandlerè®¾ç½®targetå¯¹è±¡handler.setTarget(target);// åˆ›å»ºã€å¹¶è¿”å›ä¸€ä¸ªåŠ¨æ€ä»£ç†å¯¹è±¡returnProxy.newProxyInstance(target.getClass().getClassLoader(), target.getClass().getInterfaces() , handler);} }15.7 åå°„çš„åº”ç”¨ï¼šåŠ¨æ€ä»£ç†åŠ¨æ€ä»£ç†ä¸AOPï¼ˆAspect Orient Programming)public class Test{public static void main(String[] args)throws Exception{// åˆ›å»ºä¸€ä¸ªåŸå§‹çš„HuntingDogå¯¹è±¡ï¼Œä½œä¸ºtargetDog target = new HuntingDog();// ä»¥æŒ‡å®šçš„targetæ¥åˆ›å»ºåŠ¨æ€ä»£ç†Dog dog = (Dog)MyProxyFactory.getProxy(target);dog.info();dog.run();} }15.7 åå°„çš„åº”ç”¨ï¼šåŠ¨æ€ä»£ç†åŠ¨æ€ä»£ç†ä¸AOPï¼ˆAspect Orient Programming)ï¬ ä½¿ç”¨Proxyç”Ÿæˆä¸€ä¸ªåŠ¨æ€ä»£ç†æ—¶ï¼Œå¾€å¾€å¹¶ä¸ä¼šå‡­ç©ºäº§ç”Ÿä¸€ä¸ªåŠ¨æ€ä»£ç†ï¼Œè¿™æ ·æ²¡æœ‰å¤ªå¤§çš„æ„ä¹‰ã€‚é€šå¸¸éƒ½æ˜¯ä¸ºæŒ‡å®šçš„ç›®æ ‡å¯¹è±¡ç”ŸæˆåŠ¨æ€ä»£ç†ï¬ è¿™ç§åŠ¨æ€ä»£ç†åœ¨AOPä¸­è¢«ç§°ä¸ºAOPä»£ç†ï¼ŒAOPä»£ç†å¯ä»£æ›¿ç›®æ ‡å¯¹è±¡ï¼ŒAOPä»£ç†åŒ…å«äº†ç›®æ ‡å¯¹è±¡çš„å…¨éƒ¨æ–¹æ³•ã€‚ä½†AOPä»£ç†ä¸­çš„æ–¹æ³•ä¸ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•å­˜åœ¨å·®å¼‚ï¼šAOPä»£ç†é‡Œçš„æ–¹æ³•å¯ä»¥åœ¨æ‰§è¡Œç›®æ ‡æ–¹æ³•ä¹‹å‰ã€ä¹‹åæ’å…¥ä¸€äº›é€šç”¨å¤„ç†åŠ¨æ€ä»£ç†ä¸AOP (Aspect Orient Programming)åŠ¨æ€ä»£ç†å¢åŠ çš„é€šç”¨æ–¹æ³•1å›è°ƒç›®æ ‡å¯¹è±¡çš„æ–¹æ³•åŠ¨æ€ä»£ç†å¢åŠ çš„é€šç”¨æ–¹æ³•2\n2. Java8çš„å…¶å®ƒæ–°ç‰¹æ€§2.1 Lambdaè¡¨è¾¾å¼ä¸ºä»€ä¹ˆä½¿ç”¨ Lambda è¡¨è¾¾å¼Lambda æ˜¯ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ Lambda è¡¨è¾¾å¼ç†è§£ä¸ºæ˜¯ä¸€æ®µå¯ä»¥ä¼ é€’çš„ä»£ç ï¼ˆå°†ä»£ç åƒæ•°æ®ä¸€æ ·è¿›è¡Œä¼ é€’ï¼‰ã€‚ä½¿ç”¨å®ƒå¯ä»¥å†™å‡ºæ›´ç®€æ´ã€æ›´çµæ´»çš„ä»£ç ã€‚ä½œä¸ºä¸€ç§æ›´ç´§å‡‘çš„ä»£ç é£æ ¼ï¼Œä½¿Javaçš„è¯­è¨€è¡¨è¾¾èƒ½åŠ›å¾—åˆ°äº†æå‡ã€‚16.1 Lambda è¡¨è¾¾å¼ï¬ ä»åŒ¿åç±»åˆ° Lambda çš„è½¬æ¢ä¸¾ä¾‹116.1 Lambda è¡¨è¾¾å¼ï¬ ä»åŒ¿åç±»åˆ° Lambda çš„è½¬æ¢ä¸¾ä¾‹216.1 Lambda è¡¨è¾¾å¼ï¼šè¯­æ³•Lambda è¡¨è¾¾å¼ï¼šåœ¨Java 8 è¯­è¨€ä¸­å¼•å…¥çš„ä¸€ç§æ–°çš„è¯­æ³•å…ƒç´ å’Œæ“ä½œç¬¦ã€‚è¿™ä¸ªæ“ä½œç¬¦ä¸º â€œ-&gt;â€ ï¼Œ è¯¥æ“ä½œç¬¦è¢«ç§°ä¸º Lambda æ“ä½œç¬¦æˆ–ç®­å¤´æ“ä½œç¬¦ã€‚å®ƒå°† Lambda åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼šå·¦ä¾§ï¼šæŒ‡å®šäº† Lambda è¡¨è¾¾å¼éœ€è¦çš„å‚æ•°åˆ—è¡¨å³ä¾§ï¼šæŒ‡å®šäº† Lambda ä½“ï¼Œæ˜¯æŠ½è±¡æ–¹æ³•çš„å®ç°é€»è¾‘ï¼Œä¹Ÿå³Lambda è¡¨è¾¾å¼è¦æ‰§è¡Œçš„åŠŸèƒ½ã€‚16.1 Lambda è¡¨è¾¾å¼ï¼šè¯­æ³•è¯­æ³•æ ¼å¼ä¸€ï¼šæ— å‚ï¼Œæ— è¿”å›å€¼è¯­æ³•æ ¼å¼äºŒï¼šLambda éœ€è¦ä¸€ä¸ªå‚æ•°ï¼Œä½†æ˜¯æ²¡æœ‰è¿”å›å€¼ã€‚è¯­æ³•æ ¼å¼ä¸‰ï¼šæ•°æ®ç±»å‹å¯ä»¥çœç•¥ï¼Œå› ä¸ºå¯ç”±ç¼–è¯‘å™¨æ¨æ–­å¾—å‡ºï¼Œç§°ä¸ºâ€œç±»å‹æ¨æ–­â€16.1 Lambda è¡¨è¾¾å¼ï¼šè¯­æ³•è¯­æ³•æ ¼å¼å››ï¼šLambda è‹¥åªéœ€è¦ä¸€ä¸ªå‚æ•°æ—¶ï¼Œå‚æ•°çš„å°æ‹¬å·å¯ä»¥çœç•¥è¯­æ³•æ ¼å¼äº”ï¼šLambda éœ€è¦ä¸¤ä¸ªæˆ–ä»¥ä¸Šçš„å‚æ•°ï¼Œå¤šæ¡æ‰§è¡Œè¯­å¥ï¼Œå¹¶ä¸”å¯ä»¥æœ‰è¿”å›å€¼è¯­æ³•æ ¼å¼å…­ï¼šå½“ Lambda ä½“åªæœ‰ä¸€æ¡è¯­å¥æ—¶ï¼Œreturn ä¸å¤§æ‹¬å·è‹¥æœ‰ï¼Œéƒ½å¯ä»¥çœç•¥16.1 Lambda è¡¨è¾¾å¼ç±»å‹æ¨æ–­ä¸Šè¿° Lambda è¡¨è¾¾å¼ä¸­çš„å‚æ•°ç±»å‹éƒ½æ˜¯ç”±ç¼–è¯‘å™¨æ¨æ–­å¾—å‡ºçš„ã€‚Lambdaè¡¨è¾¾å¼ä¸­æ— éœ€æŒ‡å®šç±»å‹ï¼Œç¨‹åºä¾ç„¶å¯ä»¥ç¼–è¯‘ï¼Œè¿™æ˜¯å› ä¸º javac æ ¹æ®ç¨‹åºçš„ä¸Šä¸‹æ–‡ï¼Œåœ¨åå°æ¨æ–­å‡ºäº†å‚æ•°çš„ç±»å‹ã€‚Lambda è¡¨è¾¾å¼çš„ç±»å‹ä¾èµ–äºä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œæ˜¯ç”±ç¼–è¯‘å™¨æ¨æ–­å‡ºæ¥çš„ã€‚è¿™å°±æ˜¯æ‰€è°“çš„â€œç±»å‹æ¨æ–­â€ã€‚\n2.2 å‡½æ•°å¼(Functional)æ¥å£ä»€ä¹ˆæ˜¯å‡½æ•°å¼(Functional)æ¥å£ï¬ åªåŒ…å«ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æ¥å£ï¼Œç§°ä¸ºå‡½æ•°å¼æ¥å£ã€‚ ï¬ ä½ å¯ä»¥é€šè¿‡ Lambda è¡¨è¾¾å¼æ¥åˆ›å»ºè¯¥æ¥å£çš„å¯¹è±¡ã€‚ï¼ˆè‹¥ Lambda è¡¨è¾¾å¼æŠ›å‡ºä¸€ä¸ªå—æ£€å¼‚å¸¸(å³ï¼šéè¿è¡Œæ—¶å¼‚å¸¸)ï¼Œé‚£ä¹ˆè¯¥å¼‚å¸¸éœ€è¦åœ¨ç›®æ ‡æ¥å£çš„æŠ½è±¡æ–¹æ³•ä¸Šè¿›è¡Œå£°æ˜ï¼‰ã€‚ï¬ æˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ªæ¥å£ä¸Šä½¿ç”¨ @FunctionalInterface æ³¨è§£ï¼Œè¿™æ ·åšå¯ä»¥æ£€æŸ¥å®ƒæ˜¯å¦æ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£ã€‚åŒæ—¶ javadoc ä¹Ÿä¼šåŒ…å«ä¸€æ¡å£°æ˜ï¼Œè¯´æ˜è¿™ä¸ªæ¥å£æ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£ã€‚ï¬ åœ¨java.util.functionåŒ…ä¸‹å®šä¹‰äº†Java 8 çš„ä¸°å¯Œçš„å‡½æ•°å¼æ¥å£16.2 å‡½æ•°å¼æ¥å£å¦‚ä½•ç†è§£å‡½æ•°å¼æ¥å£ï¬ Javaä»è¯ç”Ÿæ—¥èµ·å°±æ˜¯ä¸€ç›´å€¡å¯¼â€œä¸€åˆ‡çš†å¯¹è±¡â€ï¼Œåœ¨Javaé‡Œé¢é¢å‘å¯¹è±¡(OOP)ç¼–ç¨‹æ˜¯ä¸€åˆ‡ã€‚ä½†æ˜¯éšç€pythonã€scalaç­‰è¯­è¨€çš„å…´èµ·å’Œæ–°æŠ€æœ¯çš„æŒ‘æˆ˜ï¼ŒJavaä¸å¾—ä¸åšå‡ºè°ƒæ•´ä»¥ä¾¿æ”¯æŒæ›´åŠ å¹¿æ³›çš„æŠ€æœ¯è¦æ±‚ï¼Œä¹Ÿå³javaä¸ä½†å¯ä»¥æ”¯æŒOOPè¿˜å¯ä»¥æ”¯æŒOOFï¼ˆé¢å‘å‡½æ•°ç¼–ç¨‹ï¼‰ ï¬ åœ¨å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€å½“ä¸­ï¼Œå‡½æ•°è¢«å½“åšä¸€ç­‰å…¬æ°‘å¯¹å¾…ã€‚åœ¨å°†å‡½æ•°ä½œä¸ºä¸€ç­‰å…¬æ°‘çš„ç¼–ç¨‹è¯­è¨€ä¸­ï¼ŒLambdaè¡¨è¾¾å¼çš„ç±»å‹æ˜¯å‡½æ•°ã€‚ä½†æ˜¯åœ¨Java8ä¸­ï¼Œæœ‰æ‰€ä¸åŒã€‚åœ¨Java8ä¸­ï¼ŒLambdaè¡¨è¾¾å¼æ˜¯å¯¹è±¡ï¼Œè€Œä¸æ˜¯å‡½æ•°ï¼Œå®ƒä»¬å¿…é¡»ä¾é™„äºä¸€ç±»ç‰¹åˆ«çš„å¯¹è±¡ç±»å‹â€”â€”å‡½æ•°å¼æ¥å£ã€‚ ï¬ ç®€å•çš„è¯´ï¼Œåœ¨Java8ä¸­ï¼ŒLambdaè¡¨è¾¾å¼å°±æ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£çš„å®ä¾‹ã€‚è¿™å°±æ˜¯Lambdaè¡¨è¾¾å¼å’Œå‡½æ•°å¼æ¥å£çš„å…³ç³»ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦ä¸€ä¸ªå¯¹è±¡æ˜¯å‡½æ•°å¼æ¥å£çš„å®ä¾‹ï¼Œé‚£ä¹ˆè¯¥å¯¹è±¡å°±å¯ä»¥ç”¨Lambdaè¡¨è¾¾å¼æ¥è¡¨ç¤ºã€‚ï¬ æ‰€ä»¥ä»¥å‰ç”¨åŒ¿åå®ç°ç±»è¡¨ç¤ºçš„ç°åœ¨éƒ½å¯ä»¥ç”¨Lambdaè¡¨è¾¾å¼æ¥å†™ã€‚16.2 å‡½æ•°å¼æ¥å£å‡½æ•°å¼æ¥å£ä¸¾ä¾‹16.2 å‡½æ•°å¼æ¥å£è‡ªå®šä¹‰å‡½æ•°å¼æ¥å£å‡½æ•°å¼æ¥å£ä¸­ä½¿ç”¨æ³›å‹ï¼š16.2 å‡½æ•°å¼æ¥å£ä½œä¸ºå‚æ•°ä¼ é€’ Lambda è¡¨è¾¾å¼å®ä¾‹åŒ–ä½œä¸ºå‚æ•°ä¼ é€’ Lambda è¡¨è¾¾å¼ï¼šä½œä¸ºå‚æ•°ä¼ é€’ Lambda è¡¨è¾¾å¼ï¼šä¸ºäº†å°† Lambda è¡¨è¾¾å¼ä½œä¸ºå‚æ•°ä¼ é€’ï¼Œæ¥æ”¶Lambdaè¡¨è¾¾å¼çš„å‚æ•°ç±»å‹å¿…é¡»æ˜¯ä¸è¯¥ Lambda è¡¨è¾¾å¼å…¼å®¹çš„å‡½æ•°å¼æ¥å£çš„ç±»å‹ã€‚Java å†…ç½®å››å¤§æ ¸å¿ƒå‡½æ•°å¼æ¥å£å‡½æ•°å¼æ¥å£ å‚æ•°ç±»å‹ è¿”å›ç±»å‹ ç”¨é€”Consumeræ¶ˆè´¹å‹æ¥å£ T void å¯¹ç±»å‹ä¸ºTçš„å¯¹è±¡åº”ç”¨æ“ä½œï¼ŒåŒ…å«æ–¹æ³•ï¼švoid accept(T t)Supplierä¾›ç»™å‹æ¥å£ æ—  T è¿”å›ç±»å‹ä¸ºTçš„å¯¹è±¡ï¼ŒåŒ…å«æ–¹æ³•ï¼šT get()Functionå‡½æ•°å‹æ¥å£ T Rå¯¹ç±»å‹ä¸ºTçš„å¯¹è±¡åº”ç”¨æ“ä½œï¼Œå¹¶è¿”å›ç»“æœã€‚ç»“æœæ˜¯Rç±»å‹çš„å¯¹è±¡ã€‚åŒ…å«æ–¹æ³•ï¼šR apply(T t)Predicateæ–­å®šå‹æ¥å£ T boolean ç¡®å®šç±»å‹ä¸ºTçš„å¯¹è±¡æ˜¯å¦æ»¡è¶³æŸçº¦æŸï¼Œå¹¶è¿”å›boolean å€¼ã€‚åŒ…å«æ–¹æ³•ï¼šboolean test(T t)16.2 å‡½æ•°å¼æ¥å£å…¶ä»–æ¥å£å‡½æ•°å¼æ¥å£ å‚æ•°ç±»å‹ è¿”å›ç±»å‹ ç”¨é€”BiFunction T, U Rå¯¹ç±»å‹ä¸º T, U å‚æ•°åº”ç”¨æ“ä½œï¼Œè¿”å› R ç±»å‹çš„ç»“æœã€‚åŒ…å«æ–¹æ³•ä¸ºï¼š R apply(T t, U u);UnaryOperator(Functionå­æ¥å£) T Tå¯¹ç±»å‹ä¸ºTçš„å¯¹è±¡è¿›è¡Œä¸€å…ƒè¿ç®—ï¼Œå¹¶è¿”å›Tç±»å‹çš„ç»“æœã€‚åŒ…å«æ–¹æ³•ä¸ºï¼šT apply(T t);BinaryOperator(BiFunction å­æ¥å£)T, T Tå¯¹ç±»å‹ä¸ºTçš„å¯¹è±¡è¿›è¡ŒäºŒå…ƒè¿ç®—ï¼Œå¹¶è¿”å›Tç±»å‹çš„ç»“æœã€‚åŒ…å«æ–¹æ³•ä¸ºï¼š T apply(T t1, T t2);BiConsumer T, U void å¯¹ç±»å‹ä¸ºT, U å‚æ•°åº”ç”¨æ“ä½œã€‚åŒ…å«æ–¹æ³•ä¸ºï¼š void accept(T t, U u)BiPredicate T,U boolean åŒ…å«æ–¹æ³•ä¸ºï¼š boolean test(T t,U u)ToIntFunctionToLongFunctionToDoubleFunctionTintlongdoubleåˆ†åˆ«è®¡ç®—intã€longã€doubleå€¼çš„å‡½æ•°IntFunctionLongFunctionDoubleFunctionintlongdoubleR å‚æ•°åˆ†åˆ«ä¸ºintã€longã€double ç±»å‹çš„å‡½æ•°\n2.3 æ–¹æ³•å¼•ç”¨ä¸æ„é€ å™¨å¼•ç”¨æ–¹æ³•å¼•ç”¨(Method References)ï¬ å½“è¦ä¼ é€’ç»™Lambdaä½“çš„æ“ä½œï¼Œå·²ç»æœ‰å®ç°çš„æ–¹æ³•äº†ï¼Œå¯ä»¥ä½¿ç”¨æ–¹æ³•å¼•ç”¨ï¼ï¬ æ–¹æ³•å¼•ç”¨å¯ä»¥çœ‹åšæ˜¯Lambdaè¡¨è¾¾å¼æ·±å±‚æ¬¡çš„è¡¨è¾¾ã€‚æ¢å¥è¯è¯´ï¼Œæ–¹æ³•å¼•ç”¨å°±æ˜¯Lambdaè¡¨è¾¾å¼ï¼Œä¹Ÿå°±æ˜¯å‡½æ•°å¼æ¥å£çš„ä¸€ä¸ªå®ä¾‹ï¼Œé€šè¿‡æ–¹æ³•çš„åå­—æ¥æŒ‡å‘ä¸€ä¸ªæ–¹æ³•ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯Lambdaè¡¨è¾¾å¼çš„ä¸€ä¸ªè¯­æ³•ç³–ã€‚ï¬ è¦æ±‚ï¼šå®ç°æ¥å£çš„æŠ½è±¡æ–¹æ³•çš„å‚æ•°åˆ—è¡¨å’Œè¿”å›å€¼ç±»å‹ï¼Œå¿…é¡»ä¸æ–¹æ³•å¼•ç”¨çš„æ–¹æ³•çš„å‚æ•°åˆ—è¡¨å’Œè¿”å›å€¼ç±»å‹ä¿æŒä¸€è‡´ï¼ï¬ æ ¼å¼ï¼šä½¿ç”¨æ“ä½œç¬¦ â€œ::â€ å°†ç±»(æˆ–å¯¹è±¡) ä¸ æ–¹æ³•ååˆ†éš”å¼€æ¥ã€‚ï¬ å¦‚ä¸‹ä¸‰ç§ä¸»è¦ä½¿ç”¨æƒ…å†µï¼š ïƒ˜ å¯¹è±¡::å®ä¾‹æ–¹æ³•åïƒ˜ ç±»::é™æ€æ–¹æ³•åïƒ˜ ç±»::å®ä¾‹æ–¹æ³•å16.3 æ–¹æ³•å¼•ç”¨ä¸æ„é€ å™¨å¼•ç”¨æ–¹æ³•å¼•ç”¨ä¾‹å¦‚ï¼šç­‰åŒäºï¼šä¾‹å¦‚ï¼šç­‰åŒäºï¼š16.3 æ–¹æ³•å¼•ç”¨ä¸æ„é€ å™¨å¼•ç”¨æ–¹æ³•å¼•ç”¨ä¾‹å¦‚ï¼šç­‰åŒäºï¼šæ³¨æ„ï¼šå½“å‡½æ•°å¼æ¥å£æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯éœ€è¦å¼•ç”¨æ–¹æ³•çš„è°ƒç”¨è€…ï¼Œå¹¶ä¸”ç¬¬äºŒä¸ªå‚æ•°æ˜¯éœ€è¦å¼•ç”¨æ–¹æ³•çš„å‚æ•°(æˆ–æ— å‚æ•°)æ—¶ï¼šClassName::methodName16.3 æ–¹æ³•å¼•ç”¨ä¸æ„é€ å™¨å¼•ç”¨æ„é€ å™¨å¼•ç”¨æ ¼å¼ï¼š ClassName::newä¸å‡½æ•°å¼æ¥å£ç›¸ç»“åˆï¼Œè‡ªåŠ¨ä¸å‡½æ•°å¼æ¥å£ä¸­æ–¹æ³•å…¼å®¹ã€‚å¯ä»¥æŠŠæ„é€ å™¨å¼•ç”¨èµ‹å€¼ç»™å®šä¹‰çš„æ–¹æ³•ï¼Œè¦æ±‚æ„é€ å™¨å‚æ•°åˆ—è¡¨è¦ä¸æ¥å£ä¸­æŠ½è±¡æ–¹æ³•çš„å‚æ•°åˆ—è¡¨ä¸€è‡´ï¼ä¸”æ–¹æ³•çš„è¿”å›å€¼å³ä¸ºæ„é€ å™¨å¯¹åº”ç±»çš„å¯¹è±¡ã€‚ä¾‹å¦‚ï¼šç­‰åŒäºï¼š16.3 æ–¹æ³•å¼•ç”¨ä¸æ„é€ å™¨å¼•ç”¨æ•°ç»„å¼•ç”¨æ ¼å¼ï¼š type[] :: newä¾‹å¦‚ï¼šç­‰åŒäºï¼š16-4 å¼ºå¤§çš„Stream AP\n2.4 å¼ºå¤§çš„Stream APIStream APIè¯´æ˜ï¬ Java8ä¸­æœ‰ä¸¤å¤§æœ€ä¸ºé‡è¦çš„æ”¹å˜ã€‚ç¬¬ä¸€ä¸ªæ˜¯ Lambda è¡¨è¾¾å¼ï¼›å¦å¤–ä¸€ä¸ªåˆ™æ˜¯ Stream APIã€‚ ï¬ Stream API ( java.util.stream) æŠŠçœŸæ­£çš„å‡½æ•°å¼ç¼–ç¨‹é£æ ¼å¼•å…¥åˆ°Javaä¸­ã€‚è¿™æ˜¯ç›®å‰ä¸ºæ­¢å¯¹Javaç±»åº“æœ€å¥½çš„è¡¥å……ï¼Œå› ä¸ºStream APIå¯ä»¥æå¤§æä¾›Javaç¨‹åºå‘˜çš„ç”Ÿäº§åŠ›ï¼Œè®©ç¨‹åºå‘˜å†™å‡ºé«˜æ•ˆç‡ã€å¹²å‡€ã€ç®€æ´çš„ä»£ç ã€‚ï¬ Stream æ˜¯ Java8 ä¸­å¤„ç†é›†åˆçš„å…³é”®æŠ½è±¡æ¦‚å¿µï¼Œå®ƒå¯ä»¥æŒ‡å®šä½ å¸Œæœ›å¯¹é›†åˆè¿›è¡Œçš„æ“ä½œï¼Œå¯ä»¥æ‰§è¡Œéå¸¸å¤æ‚çš„æŸ¥æ‰¾ã€è¿‡æ»¤å’Œæ˜ å°„æ•°æ®ç­‰æ“ä½œã€‚ ä½¿ç”¨Stream API å¯¹é›†åˆæ•°æ®è¿›è¡Œæ“ä½œï¼Œå°±ç±»ä¼¼äºä½¿ç”¨ SQL æ‰§è¡Œçš„æ•°æ®åº“æŸ¥è¯¢ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ Stream API æ¥å¹¶è¡Œæ‰§è¡Œæ“ä½œã€‚ç®€è¨€ä¹‹ï¼ŒStream API æä¾›äº†ä¸€ç§é«˜æ•ˆä¸”æ˜“äºä½¿ç”¨çš„å¤„ç†æ•°æ®çš„æ–¹å¼ã€‚16.4 å¼ºå¤§çš„Stream APIä¸ºä»€ä¹ˆè¦ä½¿ç”¨Stream APIï¬ å®é™…å¼€å‘ä¸­ï¼Œé¡¹ç›®ä¸­å¤šæ•°æ•°æ®æºéƒ½æ¥è‡ªäºMysqlï¼ŒOracleç­‰ã€‚ä½†ç°åœ¨æ•°æ®æºå¯ä»¥æ›´å¤šäº†ï¼Œæœ‰MongDBï¼ŒRadisç­‰ï¼Œè€Œè¿™äº›NoSQLçš„æ•°æ®å°±éœ€è¦Javaå±‚é¢å»å¤„ç†ã€‚ ï¬ Stream å’Œ Collection é›†åˆçš„åŒºåˆ«ï¼šCollection æ˜¯ä¸€ç§é™æ€çš„å†…å­˜æ•°æ®ç»“æ„ï¼Œè€Œ Stream æ˜¯æœ‰å…³è®¡ç®—çš„ã€‚å‰è€…æ˜¯ä¸»è¦é¢å‘å†…å­˜ï¼Œå­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œåè€…ä¸»è¦æ˜¯é¢å‘ CPUï¼Œé€šè¿‡ CPU å®ç°è®¡ç®—ã€‚16.4 å¼ºå¤§çš„Stream APIä»€ä¹ˆæ˜¯ StreamStreamåˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæ˜¯æ•°æ®æ¸ é“ï¼Œç”¨äºæ“ä½œæ•°æ®æºï¼ˆé›†åˆã€æ•°ç»„ç­‰ï¼‰æ‰€ç”Ÿæˆçš„å…ƒç´ åºåˆ—ã€‚â€œé›†åˆè®²çš„æ˜¯æ•°æ®ï¼ŒStreamè®²çš„æ˜¯è®¡ç®—ï¼â€æ³¨æ„ï¼šâ‘ Stream è‡ªå·±ä¸ä¼šå­˜å‚¨å…ƒç´ ã€‚â‘¡Stream ä¸ä¼šæ”¹å˜æºå¯¹è±¡ã€‚ç›¸åï¼Œä»–ä»¬ä¼šè¿”å›ä¸€ä¸ªæŒæœ‰ç»“æœçš„æ–°Streamã€‚ â‘¢Stream æ“ä½œæ˜¯å»¶è¿Ÿæ‰§è¡Œçš„ã€‚è¿™æ„å‘³ç€ä»–ä»¬ä¼šç­‰åˆ°éœ€è¦ç»“æœçš„æ—¶å€™æ‰æ‰§è¡Œã€‚16.4 å¼ºå¤§çš„Stream APIStream çš„æ“ä½œä¸‰ä¸ªæ­¥éª¤ï¬ 1- åˆ›å»º Streamä¸€ä¸ªæ•°æ®æºï¼ˆå¦‚ï¼šé›†åˆã€æ•°ç»„ï¼‰ï¼Œè·å–ä¸€ä¸ªæµï¬ 2- ä¸­é—´æ“ä½œä¸€ä¸ªä¸­é—´æ“ä½œé“¾ï¼Œå¯¹æ•°æ®æºçš„æ•°æ®è¿›è¡Œå¤„ç†ï¬ 3- ç»ˆæ­¢æ“ä½œ(ç»ˆç«¯æ“ä½œ) ä¸€æ—¦æ‰§è¡Œç»ˆæ­¢æ“ä½œï¼Œå°±æ‰§è¡Œä¸­é—´æ“ä½œé“¾ï¼Œå¹¶äº§ç”Ÿç»“æœã€‚ä¹‹åï¼Œä¸ä¼šå†è¢«ä½¿ç”¨16.4 å¼ºå¤§çš„Stream APIåˆ›å»º Streamæ–¹å¼ä¸€ï¼šé€šè¿‡é›†åˆJava8 ä¸­çš„ Collection æ¥å£è¢«æ‰©å±•ï¼Œæä¾›äº†ä¸¤ä¸ªè·å–æµçš„æ–¹æ³•ï¼š ï¬ default Stream stream() : è¿”å›ä¸€ä¸ªé¡ºåºæµï¬ default Stream parallelStream() : è¿”å›ä¸€ä¸ªå¹¶è¡Œæµ16.4 å¼ºå¤§çš„Stream APIåˆ›å»º Streamæ–¹å¼äºŒï¼šé€šè¿‡æ•°ç»„Java8 ä¸­çš„ Arrays çš„é™æ€æ–¹æ³• stream() å¯ä»¥è·å–æ•°ç»„æµï¼šï¬ static  Stream stream(T[] array): è¿”å›ä¸€ä¸ªæµé‡è½½å½¢å¼ï¼Œèƒ½å¤Ÿå¤„ç†å¯¹åº”åŸºæœ¬ç±»å‹çš„æ•°ç»„ï¼šï¬ public static IntStream stream(int[] array)ï¬ public static LongStream stream(long[] array)ï¬ public static DoubleStream stream(double[] array)16.4 å¼ºå¤§çš„Stream APIåˆ›å»º Streamæ–¹å¼ä¸‰ï¼šé€šè¿‡Streamçš„of()å¯ä»¥è°ƒç”¨Streamç±»é™æ€æ–¹æ³• of(), é€šè¿‡æ˜¾ç¤ºå€¼åˆ›å»ºä¸€ä¸ªæµã€‚å®ƒå¯ä»¥æ¥æ”¶ä»»æ„æ•°é‡çš„å‚æ•°ã€‚ï¬ public static Stream of(Tâ€¦ values) : è¿”å›ä¸€ä¸ªæµ16.4 å¼ºå¤§çš„Stream APIåˆ›å»º Streamæ–¹å¼å››ï¼šåˆ›å»ºæ— é™æµå¯ä»¥ä½¿ç”¨é™æ€æ–¹æ³• Stream.iterate() å’Œ Stream.generate(),åˆ›å»ºæ— é™æµã€‚ï¬ è¿­ä»£public static Stream iterate(final T seed, final UnaryOperator f)ï¬ ç”Ÿæˆpublic static Stream generate(Supplier s)16.4 å¼ºå¤§çš„Stream API// æ–¹å¼å››ï¼šåˆ›å»ºæ— é™æµ@Testpublic void test4() {// è¿­ä»£// public static Stream iterate(final T seed, final// UnaryOperator f)Stream stream = Stream.iterate(0, x -&gt; x + 2);stream.limit(10).forEach(System.out::println);// ç”Ÿæˆ// public static Stream generate(Supplier s)Stream stream1 = Stream.generate(Math::random);stream1.limit(10).forEach(System.out::println);}Stream çš„ä¸­é—´æ“ä½œ1-ç­›é€‰ä¸åˆ‡ç‰‡å¤šä¸ªä¸­é—´æ“ä½œå¯ä»¥è¿æ¥èµ·æ¥å½¢æˆä¸€ä¸ªæµæ°´çº¿ï¼Œé™¤éæµæ°´çº¿ä¸Šè§¦å‘ç»ˆæ­¢æ“ä½œï¼Œå¦åˆ™ä¸­é—´æ“ä½œä¸ä¼šæ‰§è¡Œä»»ä½•çš„å¤„ç†ï¼è€Œåœ¨ç»ˆæ­¢æ“ä½œæ—¶ä¸€æ¬¡æ€§å…¨éƒ¨å¤„ç†ï¼Œç§°ä¸ºâ€œæƒ°æ€§æ±‚å€¼â€ã€‚ æ–¹ æ³• æ è¿°filter(Predicate p) æ¥æ”¶ Lambda ï¼Œ ä»æµä¸­æ’é™¤æŸäº›å…ƒç´ distinct() ç­›é€‰ï¼Œé€šè¿‡æµæ‰€ç”Ÿæˆå…ƒç´ çš„ hashCode() å’Œ equals() å»é™¤é‡å¤å…ƒç´ limit(long maxSize) æˆªæ–­æµï¼Œä½¿å…¶å…ƒç´ ä¸è¶…è¿‡ç»™å®šæ•°é‡skip(long n)è·³è¿‡å…ƒç´ ï¼Œè¿”å›ä¸€ä¸ªæ‰”æ‰äº†å‰ n ä¸ªå…ƒç´ çš„æµã€‚è‹¥æµä¸­å…ƒç´ ä¸è¶³ n ä¸ªï¼Œåˆ™è¿”å›ä¸€ä¸ªç©ºæµã€‚ä¸ limit(n) äº’è¡¥16.4 å¼ºå¤§çš„Stream APIStream çš„ä¸­é—´æ“ä½œ2-æ˜  å°„æ–¹æ³• æè¿°map(Function f)æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å‡½æ•°ä¼šè¢«åº”ç”¨åˆ°æ¯ä¸ªå…ƒç´ ä¸Šï¼Œå¹¶å°†å…¶æ˜ å°„æˆä¸€ä¸ªæ–°çš„å…ƒç´ ã€‚mapToDouble(ToDoubleFunction f)æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å‡½æ•°ä¼šè¢«åº”ç”¨åˆ°æ¯ä¸ªå…ƒç´ ä¸Šï¼Œäº§ç”Ÿä¸€ä¸ªæ–°çš„ DoubleStreamã€‚mapToInt(ToIntFunction f)æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å‡½æ•°ä¼šè¢«åº”ç”¨åˆ°æ¯ä¸ªå…ƒç´ ä¸Šï¼Œäº§ç”Ÿä¸€ä¸ªæ–°çš„ IntStreamã€‚mapToLong(ToLongFunction f)æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¯¥å‡½æ•°ä¼šè¢«åº”ç”¨åˆ°æ¯ä¸ªå…ƒç´ ä¸Šï¼Œäº§ç”Ÿä¸€ä¸ªæ–°çš„ LongStreamã€‚flatMap(Function f)æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œå°†æµä¸­çš„æ¯ä¸ªå€¼éƒ½æ¢æˆå¦ä¸€ä¸ªæµï¼Œç„¶åæŠŠæ‰€æœ‰æµè¿æ¥æˆä¸€ä¸ªæµ16.4 å¼ºå¤§çš„Stream APIStream çš„ä¸­é—´æ“ä½œ3-æ’åºæ–¹æ³• æè¿°sorted() äº§ç”Ÿä¸€ä¸ªæ–°æµï¼Œå…¶ä¸­æŒ‰è‡ªç„¶é¡ºåºæ’åºsorted(Comparator com) äº§ç”Ÿä¸€ä¸ªæ–°æµï¼Œå…¶ä¸­æŒ‰æ¯”è¾ƒå™¨é¡ºåºæ’åº16.4 å¼ºå¤§çš„Stream APIStream çš„ç»ˆæ­¢æ“ä½œ1-åŒ¹é…ä¸æŸ¥æ‰¾ï¬ ç»ˆç«¯æ“ä½œä¼šä»æµçš„æµæ°´çº¿ç”Ÿæˆç»“æœã€‚å…¶ç»“æœå¯ä»¥æ˜¯ä»»ä½•ä¸æ˜¯æµçš„å€¼ï¼Œä¾‹å¦‚ï¼šListã€Integerï¼Œç”šè‡³æ˜¯ void ã€‚ ï¬ æµè¿›è¡Œäº†ç»ˆæ­¢æ“ä½œåï¼Œä¸èƒ½å†æ¬¡ä½¿ç”¨ã€‚æ–¹æ³• æè¿°allMatch(Predicate p) æ£€æŸ¥æ˜¯å¦åŒ¹é…æ‰€æœ‰å…ƒç´ anyMatch(Predicate p) æ£€æŸ¥æ˜¯å¦è‡³å°‘åŒ¹é…ä¸€ä¸ªå…ƒç´ noneMatch(Predicate p) æ£€æŸ¥æ˜¯å¦æ²¡æœ‰åŒ¹é…æ‰€æœ‰å…ƒç´ findFirst() è¿”å›ç¬¬ä¸€ä¸ªå…ƒç´ findAny() è¿”å›å½“å‰æµä¸­çš„ä»»æ„å…ƒç´ 16.4 å¼ºå¤§çš„Stream APIStream çš„ç»ˆæ­¢æ“ä½œæ–¹æ³• æè¿°count() è¿”å›æµä¸­å…ƒç´ æ€»æ•°max(Comparator c) è¿”å›æµä¸­æœ€å¤§å€¼min(Comparator c) è¿”å›æµä¸­æœ€å°å€¼forEach(Consumer c)å†…éƒ¨è¿­ä»£(ä½¿ç”¨ Collection æ¥å£éœ€è¦ç”¨æˆ·å»åšè¿­ä»£ï¼Œç§°ä¸ºå¤–éƒ¨è¿­ä»£ã€‚ç›¸åï¼ŒStream API ä½¿ç”¨å†…éƒ¨è¿­ä»£â€”â€”å®ƒå¸®ä½ æŠŠè¿­ä»£åšäº†)16.4 å¼ºå¤§çš„Stream APIStream çš„ç»ˆæ­¢æ“ä½œ2-å½’çº¦å¤‡æ³¨ï¼šmap å’Œ reduce çš„è¿æ¥é€šå¸¸ç§°ä¸º map-reduce æ¨¡å¼ï¼Œå›  Googleç”¨å®ƒæ¥è¿›è¡Œç½‘ç»œæœç´¢è€Œå‡ºåã€‚æ–¹æ³• æè¿°reduce(T iden, BinaryOperator b) å¯ä»¥å°†æµä¸­å…ƒç´ åå¤ç»“åˆèµ·æ¥ï¼Œå¾—åˆ°ä¸€ä¸ªå€¼ã€‚è¿”å› Treduce(BinaryOperator b) å¯ä»¥å°†æµä¸­å…ƒç´ åå¤ç»“åˆèµ·æ¥ï¼Œå¾—åˆ°ä¸€ä¸ªå€¼ã€‚è¿”å› Optional16.4 å¼ºå¤§çš„Stream APIStream çš„ç»ˆæ­¢æ“ä½œ3-æ”¶é›†Collector æ¥å£ä¸­æ–¹æ³•çš„å®ç°å†³å®šäº†å¦‚ä½•å¯¹æµæ‰§è¡Œæ”¶é›†çš„æ“ä½œ(å¦‚æ”¶é›†åˆ° Listã€Setã€Map)ã€‚å¦å¤–ï¼Œ Collectors å®ç”¨ç±»æä¾›äº†å¾ˆå¤šé™æ€æ–¹æ³•ï¼Œå¯ä»¥æ–¹ä¾¿åœ°åˆ›å»ºå¸¸è§æ”¶é›†å™¨å®ä¾‹ï¼Œå…·ä½“æ–¹æ³•ä¸å®ä¾‹å¦‚ä¸‹è¡¨ï¼šæ–¹ æ³• æ è¿°collect(Collector c)å°†æµè½¬æ¢ä¸ºå…¶ä»–å½¢å¼ã€‚æ¥æ”¶ä¸€ä¸ª Collectoræ¥å£çš„å®ç°ï¼Œç”¨äºç»™Streamä¸­å…ƒç´ åšæ±‡æ€»çš„æ–¹æ³•16.4 å¼ºå¤§çš„Stream APIæ–¹æ³• è¿”å›ç±»å‹ ä½œç”¨toList List æŠŠæµä¸­å…ƒç´ æ”¶é›†åˆ°ListList emps= list.stream().collect(Collectors.toList());toSet Set æŠŠæµä¸­å…ƒç´ æ”¶é›†åˆ°SetSet emps= list.stream().collect(Collectors.toSet());toCollection Collection æŠŠæµä¸­å…ƒç´ æ”¶é›†åˆ°åˆ›å»ºçš„é›†åˆCollection emps =list.stream().collect(Collectors.toCollection(ArrayList::new));counting Long è®¡ç®—æµä¸­å…ƒç´ çš„ä¸ªæ•°long count = list.stream().collect(Collectors.counting());summingInt Integer å¯¹æµä¸­å…ƒç´ çš„æ•´æ•°å±æ€§æ±‚å’Œint total=list.stream().collect(Collectors.summingInt(Employee::getSalary));averagingInt Double è®¡ç®—æµä¸­å…ƒç´ Integerå±æ€§çš„å¹³å‡å€¼double avg = list.stream().collect(Collectors.averagingInt(Employee::getSalary));summarizingInt IntSummaryStatistics æ”¶é›†æµä¸­Integerå±æ€§çš„ç»Ÿè®¡å€¼ã€‚å¦‚ï¼šå¹³å‡å€¼int SummaryStatisticsiss= list.stream().collect(Collectors.summarizingInt(Employee::getSalary));16.4 å¼ºå¤§çš„Stream APIï¼š Collectorsjoining String è¿æ¥æµä¸­æ¯ä¸ªå­—ç¬¦ä¸²String str= list.stream().map(Employee::getName).collect(Collectors.joining());maxBy Optional æ ¹æ®æ¯”è¾ƒå™¨é€‰æ‹©æœ€å¤§å€¼Optionalmax= list.stream().collect(Collectors.maxBy(comparingInt(Employee::getSalary)));minBy Optional æ ¹æ®æ¯”è¾ƒå™¨é€‰æ‹©æœ€å°å€¼Optional min = list.stream().collect(Collectors.minBy(comparingInt(Employee::getSalary)));reducing å½’çº¦äº§ç”Ÿçš„ç±»å‹ä»ä¸€ä¸ªä½œä¸ºç´¯åŠ å™¨çš„åˆå§‹å€¼å¼€å§‹ï¼Œåˆ©ç”¨BinaryOperatorä¸æµä¸­å…ƒç´ é€ä¸ªç»“åˆï¼Œä»è€Œå½’çº¦æˆå•ä¸ªå€¼int total=list.stream().collect(Collectors.reducing(0, Employee::getSalar, Integer::sum));collectingAndThen è½¬æ¢å‡½æ•°è¿”å›çš„ç±»å‹ åŒ…è£¹å¦ä¸€ä¸ªæ”¶é›†å™¨ï¼Œå¯¹å…¶ç»“æœè½¬æ¢å‡½æ•°int how= list.stream().collect(Collectors.collectingAndThen(Collectors.toList(), List::size));groupingBy Map&gt; æ ¹æ®æŸå±æ€§å€¼å¯¹æµåˆ†ç»„ï¼Œå±æ€§ä¸ºKï¼Œç»“æœä¸ºVMap&gt; map= list.stream().collect(Collectors.groupingBy(Employee::getStatus));partitioningBy Map&gt; æ ¹æ®trueæˆ–falseè¿›è¡Œåˆ†åŒºMap&gt; vd = list.stream().collect(Collectors.partitioningBy(Employee::getManage));\n2.5 Optionalç±»ï¬ åˆ°ç›®å‰ä¸ºæ­¢ï¼Œè‡­åæ˜­è‘—çš„ç©ºæŒ‡é’ˆå¼‚å¸¸æ˜¯å¯¼è‡´Javaåº”ç”¨ç¨‹åºå¤±è´¥çš„æœ€å¸¸è§åŸå› ã€‚ä»¥å‰ï¼Œä¸ºäº†è§£å†³ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼ŒGoogleå…¬å¸è‘—åçš„Guavaé¡¹ç›®å¼•å…¥äº†Optionalç±»ï¼ŒGuavaé€šè¿‡ä½¿ç”¨æ£€æŸ¥ç©ºå€¼çš„æ–¹å¼æ¥é˜²æ­¢ä»£ç æ±¡æŸ“ï¼Œå®ƒé¼“åŠ±ç¨‹åºå‘˜å†™æ›´å¹²å‡€çš„ä»£ç ã€‚å—åˆ°Google Guavaçš„å¯å‘ï¼ŒOptionalç±»å·²ç»æˆä¸ºJava 8ç±»åº“çš„ä¸€éƒ¨åˆ†ã€‚ï¬ Optional ç±»(java.util.Optional) æ˜¯ä¸€ä¸ªå®¹å™¨ç±»ï¼Œå®ƒå¯ä»¥ä¿å­˜ç±»å‹Tçš„å€¼ï¼Œä»£è¡¨è¿™ä¸ªå€¼å­˜åœ¨ã€‚æˆ–è€…ä»…ä»…ä¿å­˜nullï¼Œè¡¨ç¤ºè¿™ä¸ªå€¼ä¸å­˜åœ¨ã€‚åŸæ¥ç”¨ null è¡¨ç¤ºä¸€ä¸ªå€¼ä¸å­˜åœ¨ï¼Œç°åœ¨ Optional å¯ä»¥æ›´å¥½çš„è¡¨è¾¾è¿™ä¸ªæ¦‚å¿µã€‚å¹¶ä¸”å¯ä»¥é¿å…ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚ ï¬ Optionalç±»çš„Javadocæè¿°å¦‚ä¸‹ï¼šè¿™æ˜¯ä¸€ä¸ªå¯ä»¥ä¸ºnullçš„å®¹å™¨å¯¹è±¡ã€‚å¦‚æœå€¼å­˜åœ¨åˆ™isPresent()æ–¹æ³•ä¼šè¿”å›trueï¼Œè°ƒç”¨get()æ–¹æ³•ä¼šè¿”å›è¯¥å¯¹è±¡ã€‚16.5 Optional ç±» ï¬ Optionalæä¾›å¾ˆå¤šæœ‰ç”¨çš„æ–¹æ³•ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸ç”¨æ˜¾å¼è¿›è¡Œç©ºå€¼æ£€æµ‹ã€‚ ï¬ åˆ›å»ºOptionalç±»å¯¹è±¡çš„æ–¹æ³•ï¼šïƒ˜ Optional.of(T t) : åˆ›å»ºä¸€ä¸ª Optional å®ä¾‹ï¼Œtå¿…é¡»éç©ºï¼› ïƒ˜ Optional.empty() : åˆ›å»ºä¸€ä¸ªç©ºçš„ Optional å®ä¾‹ïƒ˜ Optional.ofNullable(T t)ï¼štå¯ä»¥ä¸ºnullï¬ åˆ¤æ–­Optionalå®¹å™¨ä¸­æ˜¯å¦åŒ…å«å¯¹è±¡ï¼šïƒ˜ boolean isPresent() : åˆ¤æ–­æ˜¯å¦åŒ…å«å¯¹è±¡ïƒ˜ void ifPresent(Consumer&lt;? super T&gt; consumer) ï¼šå¦‚æœæœ‰å€¼ï¼Œå°±æ‰§è¡ŒConsumeræ¥å£çš„å®ç°ä»£ç ï¼Œå¹¶ä¸”è¯¥å€¼ä¼šä½œä¸ºå‚æ•°ä¼ ç»™å®ƒã€‚ï¬ è·å–Optionalå®¹å™¨çš„å¯¹è±¡ï¼šïƒ˜ T get(): å¦‚æœè°ƒç”¨å¯¹è±¡åŒ…å«å€¼ï¼Œè¿”å›è¯¥å€¼ï¼Œå¦åˆ™æŠ›å¼‚å¸¸ïƒ˜ T orElse(T other) ï¼šå¦‚æœæœ‰å€¼åˆ™å°†å…¶è¿”å›ï¼Œå¦åˆ™è¿”å›æŒ‡å®šçš„otherå¯¹è±¡ã€‚ïƒ˜ T orElseGet(Supplier&lt;? extends T&gt; other) ï¼šå¦‚æœæœ‰å€¼åˆ™å°†å…¶è¿”å›ï¼Œå¦åˆ™è¿”å›ç”±Supplieræ¥å£å®ç°æä¾›çš„å¯¹è±¡ã€‚ïƒ˜ T orElseThrow(Supplier&lt;? extends X&gt; exceptionSupplier) ï¼šå¦‚æœæœ‰å€¼åˆ™å°†å…¶è¿”å›ï¼Œå¦åˆ™æŠ›å‡ºç”±Supplieræ¥å£å®ç°æä¾›çš„å¼‚å¸¸ã€‚16.5 Optional ç±»@Testpublic void test1() {Boy b = new Boy(â€œå¼ ä¸‰â€);Optional opt = Optional.ofNullable(b.getGrilFriend());// å¦‚æœå¥³æœ‹å‹å­˜åœ¨å°±æ‰“å°å¥³æœ‹å‹çš„ä¿¡æ¯opt.ifPresent(System.out::println);}@Testpublic void test2() {Boy b = new Boy(â€œå¼ ä¸‰â€);Optional opt = Optional.ofNullable(b.getGrilFriend());// å¦‚æœæœ‰å¥³æœ‹å‹å°±è¿”å›ä»–çš„å¥³æœ‹å‹ï¼Œå¦åˆ™åªèƒ½æ¬£èµâ€œå«¦å¨¥â€äº†Girl girl = opt.orElse(new Girl(â€œå«¦å¨¥â€));System.out.println(â€œä»–çš„å¥³æœ‹å‹æ˜¯ï¼šâ€ + girl.getName());}16.5 Optional ç±»@Testpublic void test3(){Optional opt = Optional.of(new Employee(â€œå¼ ä¸‰â€, 8888));//åˆ¤æ–­optä¸­å‘˜å·¥å¯¹è±¡æ˜¯å¦æ»¡è¶³æ¡ä»¶ï¼Œå¦‚æœæ»¡è¶³å°±ä¿ç•™ï¼Œå¦åˆ™è¿”å›ç©ºOptional emp = opt.filter(e -&gt; e.getSalary()&gt;10000);System.out.println(emp);}@Testpublic void test4(){Optional opt = Optional.of(new Employee(â€œå¼ ä¸‰â€, 8888));//å¦‚æœoptä¸­å‘˜å·¥å¯¹è±¡ä¸ä¸ºç©ºï¼Œå°±æ¶¨è–ª10%Optional emp = opt.map(e -&gt;{e.setSalary(e.getSalary()%1.1);return e;});System.out.println(emp);}\nJava9&amp;Java10&amp; Java11æ–°ç‰¹æ€§3.1 Java 9 çš„æ–°ç‰¹æ€§JDK 9 çš„å‘å¸ƒï¬ ç»è¿‡4æ¬¡è·³ç¥¨ï¼Œå†ç»æ›²æŠ˜çš„Java 9 ç»ˆäºç»ˆäºåœ¨2017å¹´9æœˆ21æ—¥å‘å¸ƒã€‚ ï¬ ä»Java 9 è¿™ä¸ªç‰ˆæœ¬å¼€å§‹ï¼ŒJava çš„è®¡åˆ’å‘å¸ƒå‘¨æœŸæ˜¯ 6 ä¸ªæœˆï¼Œä¸‹ä¸€ä¸ª Java çš„ä¸»ç‰ˆæœ¬å°†äº 2018 å¹´ 3 æœˆå‘å¸ƒï¼Œå‘½åä¸º Java 18.3ï¼Œç´§æ¥ç€å†è¿‡å…­ä¸ªæœˆå°†å‘å¸ƒ Java18.9ã€‚ ï¬ è¿™æ„å‘³ç€Javaçš„æ›´æ–°ä»ä¼ ç»Ÿçš„ä»¥ç‰¹æ€§é©±åŠ¨çš„å‘å¸ƒå‘¨æœŸï¼Œè½¬å˜ä¸ºä»¥æ—¶é—´é©±åŠ¨çš„ ï¼ˆ6 ä¸ªæœˆä¸ºå‘¨æœŸï¼‰å‘å¸ƒæ¨¡å¼ï¼Œå¹¶é€æ­¥çš„å°† Oracle JDK åŸå•†ä¸šç‰¹æ€§è¿›è¡Œå¼€æºã€‚ï¬ é’ˆå¯¹ä¼ä¸šå®¢æˆ·çš„éœ€æ±‚ï¼ŒOracle å°†ä»¥ä¸‰å¹´ä¸ºå‘¨æœŸå‘å¸ƒé•¿æœŸæ”¯æŒç‰ˆæœ¬ï¼ˆlong termsupportï¼‰ã€‚ ï¬ Java 9 æä¾›äº†è¶…è¿‡150é¡¹æ–°åŠŸèƒ½ç‰¹æ€§ï¼ŒåŒ…æ‹¬å¤‡å—æœŸå¾…çš„æ¨¡å—åŒ–ç³»ç»Ÿã€å¯äº¤äº’çš„ REPL å·¥å…·ï¼šjshellï¼ŒJDK ç¼–è¯‘å·¥å…·ï¼ŒJava å…¬å…± API å’Œç§æœ‰ä»£ç ï¼Œä»¥åŠå®‰å…¨å¢å¼ºã€æ‰©å±•æå‡ã€æ€§èƒ½ç®¡ç†æ”¹å–„ç­‰ã€‚å¯ä»¥è¯´Java 9æ˜¯ä¸€ä¸ªåºå¤§çš„ç³»ç»Ÿå·¥ç¨‹ï¼Œå®Œå…¨åšäº†ä¸€ä¸ªæ•´ä½“æ”¹å˜ã€‚Java 9 ä¸­æœ‰å“ªäº›ä¸å¾—ä¸è¯´çš„æ–°ç‰¹æ€§ï¼Ÿïƒ˜ æ¨¡å—åŒ–ç³»ç»Ÿïƒ˜ jShellå‘½ä»¤ïƒ˜ å¤šç‰ˆæœ¬å…¼å®¹jaråŒ… ïƒ˜ æ¥å£çš„ç§æœ‰æ–¹æ³•ïƒ˜ é’»çŸ³æ“ä½œç¬¦çš„ä½¿ç”¨å‡çº§ïƒ˜ è¯­æ³•æ”¹è¿›ï¼štryè¯­å¥ïƒ˜ Stringå­˜å‚¨ç»“æ„å˜æ›´ïƒ˜ ä¾¿åˆ©çš„é›†åˆç‰¹æ€§ï¼šof()ïƒ˜ å¢å¼ºçš„Stream APIïƒ˜ å…¨æ–°çš„HTTPå®¢æˆ·ç«¯APIïƒ˜ Deprecatedçš„ç›¸å…³APIïƒ˜ javadocçš„HTML 5æ”¯æŒïƒ˜ Javascriptå¼•æ“å‡çº§ï¼šNashornïƒ˜ javaçš„åŠ¨æ€ç¼–è¯‘å™¨Java 9 ä¸­æœ‰å“ªäº›ä¸å¾—ä¸è¯´çš„æ–°ç‰¹æ€§ï¼Ÿï¬ å®˜æ–¹æä¾›çš„æ–°ç‰¹æ€§åˆ—è¡¨ï¼šhttps://docs.oracle.com/javase/9/whatsnew/toc.htm#JSNEW-GUID- C23AFD78-C777-460B-8ACE-58BE5EA681F6 ï¬ æˆ–å‚è€ƒ Open JDKhttp://openjdk.java.net/projects/jdk9/ ï¬ åœ¨çº¿Oracle JDK 9 Documentationhttps://docs.oracle.com/javase/9/ä¸€ã€JDK å’Œ JRE ç›®å½•ç»“æ„çš„æ”¹å˜JDK 8 çš„ç›®å½•ç»“æ„bin ç›®å½• åŒ…å«å‘½ä»¤è¡Œå¼€å‘å’Œè°ƒè¯•å·¥å…·ï¼Œå¦‚javacï¼Œjarå’Œjavadocã€‚includeç›®å½• åŒ…å«åœ¨ç¼–è¯‘æœ¬åœ°ä»£ç æ—¶ä½¿ç”¨çš„C/C++å¤´æ–‡ä»¶lib ç›®å½• åŒ…å«JDKå·¥å…·çš„å‡ ä¸ªJARå’Œå…¶ä»–ç±»å‹çš„æ–‡ä»¶ã€‚ å®ƒæœ‰ä¸€ä¸ªtools.jaræ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«javacç¼–è¯‘å™¨çš„Javaç±»jre/bin ç›®å½• åŒ…å«åŸºæœ¬å‘½ä»¤ï¼Œå¦‚javaå‘½ä»¤ã€‚ åœ¨Windowså¹³å°ä¸Šï¼Œå®ƒåŒ…å«ç³»ç»Ÿçš„è¿è¡Œæ—¶åŠ¨æ€é“¾æ¥åº“ï¼ˆDLLï¼‰ã€‚jre/lib ç›®å½• åŒ…å«ç”¨æˆ·å¯ç¼–è¾‘çš„é…ç½®æ–‡ä»¶ï¼Œå¦‚.propertieså’Œ.policyæ–‡ä»¶ã€‚åŒ…å«å‡ ä¸ªJARã€‚rt.jaræ–‡ä»¶åŒ…å«è¿è¡Œæ—¶çš„Javaç±»å’Œèµ„æºæ–‡ä»¶ã€‚JDK 9 çš„ç›®å½•ç»“æ„æ²¡æœ‰åä¸ºjreçš„å­ç›®å½•bin ç›®å½• åŒ…å«æ‰€æœ‰å‘½ä»¤ã€‚ åœ¨Windowså¹³å°ä¸Šï¼Œå®ƒç»§ç»­åŒ…å«ç³»ç»Ÿçš„è¿è¡Œæ—¶åŠ¨æ€é“¾æ¥åº“ã€‚conf ç›®å½• åŒ…å«ç”¨æˆ·å¯ç¼–è¾‘çš„é…ç½®æ–‡ä»¶ï¼Œä¾‹å¦‚ä»¥å‰ä½äºjre\\libç›®å½•ä¸­çš„.propertieså’Œ.policyæ–‡ä»¶include ç›®å½• åŒ…å«è¦åœ¨ä»¥å‰ç¼–è¯‘æœ¬åœ°ä»£ç æ—¶ä½¿ç”¨çš„C/C++å¤´æ–‡ä»¶ã€‚ å®ƒåªå­˜åœ¨äºJDKä¸­jmods ç›®å½• åŒ…å«JMODæ ¼å¼çš„å¹³å°æ¨¡å—ã€‚ åˆ›å»ºè‡ªå®šä¹‰è¿è¡Œæ—¶æ˜ åƒæ—¶éœ€è¦å®ƒã€‚ å®ƒåªå­˜åœ¨äºJDKä¸­legal ç›®å½• åŒ…å«æ³•å¾‹å£°æ˜lib ç›®å½• åŒ…å«éWindowså¹³å°ä¸Šçš„åŠ¨æ€é“¾æ¥æœ¬åœ°åº“ã€‚ å…¶å­ç›®å½•å’Œæ–‡ä»¶ä¸åº”ç”±å¼€å‘äººå‘˜ç›´æ¥ç¼–è¾‘æˆ–ä½¿ç”¨ä¸€ã€JDK å’Œ JRE ç›®å½•ç»“æ„çš„æ”¹å˜äºŒã€æ¨¡å—åŒ–ç³»ç»Ÿ: Jigsaw ïƒ  Modularityï¬ è°ˆåˆ° Java 9 å¤§å®¶å¾€å¾€ç¬¬ä¸€ä¸ªæƒ³åˆ°çš„å°±æ˜¯ Jigsaw é¡¹ç›®ã€‚ä¼—æ‰€å‘¨çŸ¥ï¼ŒJava å·²ç»å‘å±•è¶…è¿‡ 20 å¹´ï¼ˆ95 å¹´æœ€åˆå‘å¸ƒï¼‰ï¼ŒJava å’Œç›¸å…³ç”Ÿæ€åœ¨ä¸æ–­ä¸°å¯Œçš„åŒæ—¶ä¹Ÿè¶Šæ¥è¶Šæš´éœ²å‡ºä¸€äº›é—®é¢˜ï¼š ïƒ˜ Java è¿è¡Œç¯å¢ƒçš„è†¨èƒ€å’Œè‡ƒè‚¿ã€‚æ¯æ¬¡JVMå¯åŠ¨çš„æ—¶å€™ï¼Œè‡³å°‘ä¼šæœ‰30ï½60MBçš„å†…å­˜åŠ è½½ï¼Œä¸»è¦åŸå› æ˜¯JVMéœ€è¦åŠ è½½rt.jarï¼Œä¸ç®¡å…¶ä¸­çš„ç±»æ˜¯å¦è¢«classloaderåŠ è½½ï¼Œç¬¬ä¸€æ­¥æ•´ä¸ªjaréƒ½ä¼šè¢«JVMåŠ è½½åˆ°å†…å­˜å½“ä¸­å»ï¼ˆè€Œæ¨¡å—åŒ–å¯ä»¥æ ¹æ®æ¨¡å—çš„éœ€è¦åŠ è½½ç¨‹åºè¿è¡Œéœ€è¦çš„classï¼‰ ïƒ˜ å½“ä»£ç åº“è¶Šæ¥è¶Šå¤§ï¼Œåˆ›å»ºå¤æ‚ï¼Œç›˜æ ¹é”™èŠ‚çš„â€œæ„å¤§åˆ©é¢æ¡å¼ä»£ç â€çš„å‡ ç‡å‘ˆæŒ‡æ•°çº§çš„å¢é•¿ã€‚ä¸åŒç‰ˆæœ¬çš„ç±»åº“äº¤å‰ä¾èµ–å¯¼è‡´è®©äººå¤´ç–¼çš„é—®é¢˜ï¼Œè¿™äº›éƒ½é˜»ç¢äº† Java å¼€å‘å’Œè¿è¡Œæ•ˆç‡çš„æå‡ã€‚ ïƒ˜ å¾ˆéš¾çœŸæ­£åœ°å¯¹ä»£ç è¿›è¡Œå°è£…, è€Œç³»ç»Ÿå¹¶æ²¡æœ‰å¯¹ä¸åŒéƒ¨åˆ†ï¼ˆä¹Ÿå°±æ˜¯ JAR æ–‡ä»¶ï¼‰ä¹‹é—´çš„ä¾èµ–å…³ç³»æœ‰ä¸ªæ˜ç¡®çš„æ¦‚å¿µã€‚æ¯ä¸€ä¸ªå…¬å…±ç±»éƒ½å¯ä»¥è¢«ç±»è·¯å¾„ä¹‹ä¸‹ä»»ä½•å…¶å®ƒçš„å…¬å…±ç±»æ‰€è®¿é—®åˆ°ï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´æ— æ„ä¸­ä½¿ç”¨äº†å¹¶ä¸æƒ³è¢«å…¬å¼€è®¿é—®çš„ APIã€‚äºŒã€æ¨¡å—åŒ–ç³»ç»Ÿ: Jigsaw ïƒ  Modularityï¬ æœ¬è´¨ä¸Šè®²ä¹Ÿå°±æ˜¯è¯´ï¼Œç”¨æ¨¡å—æ¥ç®¡ç†å„ä¸ªpackageï¼Œé€šè¿‡å£°æ˜æŸä¸ªpackageæš´éœ²ï¼Œï¼Œæ¨¡å—(module)çš„æ¦‚å¿µï¼Œå…¶å®å°±æ˜¯packageå¤–å†è£¹ä¸€å±‚ï¼Œä¸å£°æ˜é»˜è®¤å°±æ˜¯éšè—ã€‚å› æ­¤ï¼Œæ¨¡å—åŒ–ä½¿å¾—ä»£ç ç»„ç»‡ä¸Šæ›´å®‰å…¨ï¼Œå› ä¸ºå®ƒå¯ä»¥æŒ‡å®šå“ªäº›éƒ¨åˆ†å¯ä»¥æš´éœ²ï¼Œå“ªäº›éƒ¨åˆ†éšè—ã€‚ ï¬ å®ç°ç›®æ ‡ïƒ˜ æ¨¡å—åŒ–çš„ä¸»è¦ç›®çš„åœ¨äºå‡å°‘å†…å­˜çš„å¼€é”€ïƒ˜ åªé¡»å¿…è¦æ¨¡å—ï¼Œè€Œéå…¨éƒ¨jdkæ¨¡å—ï¼Œå¯ç®€åŒ–å„ç§ç±»åº“å’Œå¤§å‹åº”ç”¨çš„å¼€å‘å’Œç»´æŠ¤ïƒ˜ æ”¹è¿› Java SE å¹³å°ï¼Œä½¿å…¶å¯ä»¥é€‚åº”ä¸åŒå¤§å°çš„è®¡ç®—è®¾å¤‡ïƒ˜ æ”¹è¿›å…¶å®‰å…¨æ€§ï¼Œå¯ç»´æŠ¤æ€§ï¼Œæé«˜æ€§èƒ½äºŒã€æ¨¡å—åŒ–ç³»ç»Ÿ: Jigsaw ïƒ  Modularityæ¨¡å—å°†ç”±é€šå¸¸çš„ç±»å’Œæ–°çš„æ¨¡å—å£°æ˜æ–‡ä»¶ï¼ˆmodule-info.javaï¼‰ç»„æˆã€‚è¯¥æ–‡ä»¶æ˜¯ä½äºjavaä»£ç ç»“æ„çš„é¡¶å±‚ï¼Œè¯¥æ¨¡å—æè¿°ç¬¦æ˜ç¡®åœ°å®šä¹‰äº†æˆ‘ä»¬çš„æ¨¡å—éœ€è¦ä»€ä¹ˆä¾èµ–å…³ç³»ï¼Œä»¥åŠå“ªäº›æ¨¡å—è¢«å¤–éƒ¨ä½¿ç”¨ã€‚åœ¨exportså­å¥ä¸­æœªæåŠçš„æ‰€æœ‰åŒ…é»˜è®¤æƒ…å†µä¸‹å°†å°è£…åœ¨æ¨¡å—ä¸­ï¼Œä¸èƒ½åœ¨å¤–éƒ¨ä½¿ç”¨ã€‚äºŒã€æ¨¡å—åŒ–ç³»ç»Ÿ: Jigsaw ïƒ  Modularityè¦æƒ³åœ¨java9demoæ¨¡å—ä¸­è°ƒç”¨java9testæ¨¡å—ä¸‹åŒ…ä¸­çš„ç»“æ„ï¼Œéœ€è¦åœ¨java9testçš„module-info.javaä¸­å£°æ˜ï¼š/**\n\n@author songhongkang\n@create 2019 ä¸‹åˆ 11:57/module java9test {//package we exportexports com.atguigui.bean;}exportsï¼šæ§åˆ¶ç€å“ªäº›åŒ…å¯ä»¥è¢«å…¶å®ƒæ¨¡å—è®¿é—®åˆ°ã€‚æ‰€æœ‰ä¸è¢«å¯¼å‡ºçš„åŒ…é»˜è®¤éƒ½è¢«å°è£…åœ¨æ¨¡å—é‡Œé¢ã€‚äºŒã€æ¨¡å—åŒ–ç³»ç»Ÿ: Jigsaw ïƒ  Modularityå¯¹åº”åœ¨java 9demo æ¨¡å—çš„src ä¸‹åˆ›å»ºmodule-info.javaæ–‡ä»¶ï¼š/*\n@author songhongkang\n@create 2019 ä¸‹åˆ 11:51*/module java9demo {requires java9test;}requiresï¼šæŒ‡æ˜å¯¹å…¶å®ƒæ¨¡å—çš„ä¾èµ–ã€‚ä¸‰ã€Javaçš„REPLå·¥å…·ï¼š jShellå‘½ä»¤ï¬ äº§ç”ŸèƒŒæ™¯åƒPython å’Œ Scala ä¹‹ç±»çš„è¯­è¨€æ—©å°±æœ‰äº¤äº’å¼ç¼–ç¨‹ç¯å¢ƒ REPL (read - evaluate - print -loop)äº†ï¼Œä»¥äº¤äº’å¼çš„æ–¹å¼å¯¹è¯­å¥å’Œè¡¨è¾¾å¼è¿›è¡Œæ±‚å€¼ã€‚å¼€å‘è€…åªéœ€è¦è¾“å…¥ä¸€äº›ä»£ç ï¼Œå°±å¯ä»¥åœ¨ç¼–è¯‘å‰è·å¾—å¯¹ç¨‹åºçš„åé¦ˆã€‚è€Œä¹‹å‰çš„Javaç‰ˆæœ¬è¦æƒ³æ‰§è¡Œä»£ç ï¼Œå¿…é¡»åˆ›å»ºæ–‡ä»¶ã€å£°æ˜ç±»ã€æä¾›æµ‹è¯•æ–¹æ³•æ–¹å¯å®ç°ã€‚ ï¬ è®¾è®¡ç†å¿µå³å†™å³å¾—ã€å¿«é€Ÿè¿è¡Œï¬ å®ç°ç›®æ ‡ïƒ˜ Java 9 ä¸­ç»ˆäºæ‹¥æœ‰äº† REPLå·¥å…·ï¼šjShellã€‚è®©Javaå¯ä»¥åƒè„šæœ¬è¯­è¨€ä¸€æ ·è¿è¡Œï¼Œä»æ§åˆ¶å°å¯åŠ¨jShellï¼Œåˆ©ç”¨jShellåœ¨æ²¡æœ‰åˆ›å»ºç±»çš„æƒ…å†µä¸‹ç›´æ¥å£°æ˜å˜é‡ï¼Œè®¡ç®—è¡¨è¾¾å¼ï¼Œæ‰§è¡Œè¯­å¥ã€‚å³å¼€å‘æ—¶å¯ä»¥åœ¨å‘½ä»¤è¡Œé‡Œç›´æ¥è¿è¡ŒJavaçš„ä»£ç ï¼Œè€Œæ— éœ€åˆ›å»ºJavaæ–‡ä»¶ï¼Œæ— éœ€è·Ÿäººè§£é‡Šâ€public static void main(String[] args)â€è¿™å¥åºŸè¯ã€‚ïƒ˜ jShellä¹Ÿå¯ä»¥ä»æ–‡ä»¶ä¸­åŠ è½½è¯­å¥æˆ–è€…å°†è¯­å¥ä¿å­˜åˆ°æ–‡ä»¶ä¸­ã€‚ïƒ˜ jShellä¹Ÿå¯ä»¥æ˜¯tabé”®è¿›è¡Œè‡ªåŠ¨è¡¥å…¨å’Œè‡ªåŠ¨æ·»åŠ åˆ†å·ã€‚ä¸‰ã€Javaçš„REPLå·¥å…·ï¼š jShellå‘½ä»¤è°ƒå‡ºjShellè·å–å¸®åŠ©åŸºæœ¬ä½¿ç”¨Tipsï¼šåœ¨ JShell ç¯å¢ƒä¸‹ï¼Œè¯­å¥æœ«å°¾çš„â€œ;â€ æ˜¯å¯é€‰çš„ã€‚ä½†æ¨èè¿˜æ˜¯æœ€å¥½åŠ ä¸Šã€‚æé«˜ä»£ç å¯è¯»æ€§ã€‚å¯¼å…¥æŒ‡å®šçš„åŒ…é»˜è®¤å·²ç»å¯¼å…¥å¦‚ä¸‹çš„æ‰€æœ‰åŒ…ï¼š(åŒ…å«java.langåŒ…)ä¸‰ã€Javaçš„REPLå·¥å…·ï¼š jShellå‘½ä»¤ä¸‰ã€Javaçš„REPLå·¥å…·ï¼š jShellå‘½ä»¤åªéœ€æŒ‰ä¸‹ Tab é”®ï¼Œå°±èƒ½è‡ªåŠ¨è¡¥å…¨ä»£ç åˆ—å‡ºå½“å‰ session é‡Œæ‰€æœ‰æœ‰æ•ˆçš„ä»£ç ç‰‡æ®µä¸‰ã€Javaçš„REPLå·¥å…·ï¼š jShellå‘½ä»¤æŸ¥çœ‹å½“å‰ session ä¸‹æ‰€æœ‰åˆ›å»ºè¿‡çš„å˜é‡Tipsï¼šæˆ‘ä»¬è¿˜å¯ä»¥é‡æ–°å®šä¹‰ç›¸åŒæ–¹æ³•åå’Œå‚æ•°åˆ—è¡¨çš„æ–¹æ³•ï¼Œå³ä¸ºå¯¹ç°æœ‰æ–¹æ³•çš„ä¿®æ”¹ï¼ˆæˆ–è¦†ç›–ï¼‰ã€‚æŸ¥çœ‹å½“å‰ session ä¸‹æ‰€æœ‰åˆ›å»ºè¿‡çš„æ–¹æ³•ä½¿ç”¨å¤–éƒ¨ä»£ç ç¼–è¾‘å™¨æ¥ç¼–å†™ Java ä»£ç ä¸‰ã€Javaçš„REPLå·¥å…·ï¼š jShellå‘½ä»¤ä½¿ç”¨/openå‘½ä»¤è°ƒç”¨ï¼šæ²¡æœ‰å—æ£€å¼‚å¸¸ï¼ˆç¼–è¯‘æ—¶å¼‚å¸¸ï¼‰è¯´æ˜ï¼šæœ¬æ¥åº”è¯¥å¼ºè¿«æˆ‘ä»¬æ•è·ä¸€ä¸ªIOExceptionï¼Œä½†å´æ²¡æœ‰å‡ºç°ã€‚å› ä¸ºjShellåœ¨åå°ä¸ºæˆ‘ä»¬éšè—äº†ã€‚é€€å‡ºjShellå››ã€è¯­æ³•æ”¹è¿›ï¼šæ¥å£çš„ç§æœ‰æ–¹æ³•Java 8ä¸­è§„å®šæ¥å£ä¸­çš„æ–¹æ³•é™¤äº†æŠ½è±¡æ–¹æ³•ä¹‹å¤–ï¼Œè¿˜å¯ä»¥å®šä¹‰é™æ€æ–¹æ³•å’Œé»˜è®¤çš„æ–¹æ³•ã€‚ä¸€å®šç¨‹åº¦ä¸Šï¼Œæ‰©å±•äº†æ¥å£çš„åŠŸèƒ½ï¼Œæ­¤æ—¶çš„æ¥å£æ›´åƒæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ã€‚ åœ¨Java 9ä¸­ï¼Œæ¥å£æ›´åŠ çš„çµæ´»å’Œå¼ºå¤§ï¼Œè¿æ–¹æ³•çš„è®¿é—®æƒé™ä¿®é¥°ç¬¦éƒ½å¯ä»¥å£°æ˜ä¸ºprivateçš„äº†ï¼Œæ­¤æ—¶æ–¹æ³•å°†ä¸ä¼šæˆä¸ºä½ å¯¹å¤–æš´éœ²çš„APIçš„ä¸€éƒ¨åˆ†ã€‚å››ã€è¯­æ³•æ”¹è¿›ï¼šæ¥å£çš„ç§æœ‰æ–¹æ³•interface MyInterface {void normalInterfaceMethod();default void methodDefault1() {init();}public default void methodDefault2() {init();}// This method is not part of the public API exposed by MyInterfaceprivate void init() {System.out.println(â€œé»˜è®¤æ–¹æ³•ä¸­çš„é€šç”¨æ“ä½œâ€);} }å››ã€è¯­æ³•æ”¹è¿›ï¼šæ¥å£çš„ç§æœ‰æ–¹æ³•class MyInterfaceImpl implements MyInterface {@Overridepublic void normalInterfaceMethod() {System.out.println(â€œå®ç°æ¥å£çš„æ–¹æ³•â€);} }public class MyInterfaceTest {public static void main(String[] args) {MyInterfaceImpl impl = new MyInterfaceImpl();impl.methodDefault1();// impl.init();//ä¸èƒ½è°ƒç”¨} }äº”ã€è¯­æ³•æ”¹è¿›:é’»çŸ³æ“ä½œç¬¦ä½¿ç”¨å‡çº§æˆ‘ä»¬å°†èƒ½å¤Ÿä¸åŒ¿åå®ç°ç±»å…±åŒä½¿ç”¨é’»çŸ³æ“ä½œç¬¦ï¼ˆdiamond operatorï¼‰åœ¨Java 8ä¸­å¦‚ä¸‹çš„æ“ä½œæ˜¯ä¼šæŠ¥é”™çš„ï¼šComparator com = new Comparator&lt;&gt;(){@Overridepublic int compare(Object o1, Object o2) {return 0; }};ç¼–è¯‘æŠ¥é”™ä¿¡æ¯ï¼šCannot use â€œ&lt;&gt;â€ with anonymous inner classes.äº”ã€è¯­æ³•æ”¹è¿›:é’»çŸ³æ“ä½œç¬¦ä½¿ç”¨å‡çº§Java 9ä¸­å¦‚ä¸‹æ“ä½œå¯ä»¥æ­£å¸¸æ‰§è¡Œé€šè¿‡ï¼š// anonymous classes can now use type inferenceComparator com = new Comparator&lt;&gt;(){@Overridepublic int compare(Object o1, Object o2) {return 0; }};å…­ã€è¯­æ³•æ”¹è¿›ï¼štryè¯­å¥Java 8 ä¸­ï¼Œå¯ä»¥å®ç°èµ„æºçš„è‡ªåŠ¨å…³é—­ï¼Œä½†æ˜¯è¦æ±‚æ‰§è¡Œåå¿…é¡»å…³é—­çš„æ‰€æœ‰èµ„æºå¿…é¡»åœ¨tryå­å¥ä¸­åˆå§‹åŒ–ï¼Œå¦åˆ™ç¼–è¯‘ä¸é€šè¿‡ã€‚å¦‚ä¸‹ä¾‹æ‰€ç¤ºï¼štry(InputStreamReader reader = new InputStreamReader(System.in)){//è¯»å–æ•°æ®ç»†èŠ‚çœç•¥}catch (IOException e){e.printStackTrace();}å…­ã€è¯­æ³•æ”¹è¿›ï¼štryè¯­å¥Java 9 ä¸­ï¼Œç”¨èµ„æºè¯­å¥ç¼–å†™tryå°†æ›´å®¹æ˜“ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨tryå­å¥ä¸­ä½¿ç”¨å·²ç»åˆå§‹åŒ–è¿‡çš„èµ„æºï¼Œæ­¤æ—¶çš„èµ„æºæ˜¯finalçš„ï¼šInputStreamReader reader = new InputStreamReader(System.in);OutputStreamWriter writer = new OutputStreamWriter(System.out);try (reader; writer) {//readeræ˜¯finalçš„ï¼Œä¸å¯å†è¢«èµ‹å€¼//reader = null;//å…·ä½“è¯»å†™æ“ä½œçœç•¥} catch (IOException e) {e.printStackTrace();}ä¸ƒã€Stringå­˜å‚¨ç»“æ„å˜æ›´MotivationThe current implementation of the String class stores characters in a chararray, using two bytes (sixteen bits) for each character. Data gathered frommany different applications indicates that strings are a major component ofheap usage and, moreover, that most String objects contain only Latin-1characters. Such characters require only one byte of storage, hence half of thespace in the internal char arrays of such String objects is going unused.DescriptionWe propose to change the internal representation of the String class from aUTF-16 char array to a byte array plus an encoding-flag field. The new Stringclass will store characters encoded either as ISO-8859-1/Latin-1 (one byte percharacter), or as UTF-16 (two bytes per character), based upon the contentsof the string. The encoding flag will indicate which encoding is used.ä¸ƒã€Stringå­˜å‚¨ç»“æ„å˜æ›´ç»“è®ºï¼šString å†ä¹Ÿä¸ç”¨ char[] æ¥å­˜å‚¨å•¦ï¼Œæ”¹æˆäº† byte[] åŠ ä¸Šç¼–ç æ ‡è®°ï¼ŒèŠ‚çº¦äº†ä¸€äº›ç©ºé—´ã€‚public final class Stringimplements java.io.Serializable, Comparable, CharSequence {@Stableprivate final byte[] value; }é‚£StringBuffer å’Œ StringBuilder æ˜¯å¦ä»æ— åŠ¨äºè¡·å‘¢ï¼ŸString-related classes such as AbstractStringBuilder, StringBuilder,and StringBuffer will be updated to use the same representation, as will theHotSpot VMâ€˜s intrinsic(å›ºæœ‰çš„ã€å†…ç½®çš„) string operations.å…«ã€é›†åˆå·¥å‚æ–¹æ³•ï¼šå¿«é€Ÿåˆ›å»ºåªè¯»é›†åˆè¦åˆ›å»ºä¸€ä¸ªåªè¯»ã€ä¸å¯æ”¹å˜çš„é›†åˆï¼Œå¿…é¡»æ„é€ å’Œåˆ†é…å®ƒï¼Œç„¶åæ·»åŠ å…ƒç´ ï¼Œæœ€ååŒ…è£…æˆä¸€ä¸ªä¸å¯ä¿®æ”¹çš„é›†åˆã€‚List namesList = new ArrayList &lt;&gt;();namesList.add(â€œJoeâ€);namesList.add(â€œBobâ€);namesList.add(â€œBillâ€);namesList = Collections.unmodifiableList(namesList);System.out.println(namesList);ç¼ºç‚¹ï¼šæˆ‘ä»¬ä¸€ä¸‹å†™äº†äº”è¡Œã€‚å³ï¼šå®ƒä¸èƒ½è¡¨è¾¾ä¸ºå•ä¸ªè¡¨è¾¾å¼ã€‚å…«ã€é›†åˆå·¥å‚æ–¹æ³•ï¼šå¿«é€Ÿåˆ›å»ºåªè¯»é›†åˆList list = Collections.unmodifiableList(Arrays.asList(â€œaâ€, â€œbâ€, â€œcâ€));Set set = Collections.unmodifiableSet(new HashSet&lt;&gt;(Arrays.asList(â€œaâ€,â€œbâ€, â€œcâ€)));// å¦‚ä¸‹æ“ä½œä¸é€‚ç”¨äºjdk 8 åŠä¹‹å‰ç‰ˆæœ¬,é€‚ç”¨äºjdk 9Map map = Collections.unmodifiableMap(new HashMap&lt;&gt;() {{put(â€œaâ€, 1);put(â€œbâ€, 2);put(â€œcâ€, 3);}});map.forEach((k, v) -&gt; System.out.println(k + â€œ:â€ + v));å…«ã€é›†åˆå·¥å‚æ–¹æ³•ï¼šå¿«é€Ÿåˆ›å»ºåªè¯»é›†åˆJava 9å› æ­¤å¼•å…¥äº†æ–¹ä¾¿çš„æ–¹æ³•ï¼Œè¿™ä½¿å¾—ç±»ä¼¼çš„äº‹æƒ…æ›´å®¹æ˜“è¡¨è¾¾ã€‚å…«ã€é›†åˆå·¥å‚æ–¹æ³•ï¼šå¿«é€Ÿåˆ›å»ºåªè¯»é›†åˆList firsnamesList = List.of(â€œJoeâ€,â€Bobâ€,â€Billâ€);è°ƒç”¨é›†åˆä¸­é™æ€æ–¹æ³•of()ï¼Œå¯ä»¥å°†ä¸åŒæ•°é‡çš„å‚æ•°ä¼ è¾“åˆ°æ­¤å·¥å‚æ–¹æ³•ä¸­ã€‚æ­¤åŠŸèƒ½å¯ç”¨äºSetå’ŒListï¼Œä¹Ÿå¯ç”¨äºMapçš„ç±»ä¼¼å½¢å¼ã€‚æ­¤æ—¶å¾—åˆ°çš„é›†åˆï¼Œæ˜¯ä¸å¯å˜çš„ï¼šåœ¨åˆ›å»ºåï¼Œç»§ç»­æ·»åŠ å…ƒç´ åˆ°è¿™äº›é›†åˆä¼šå¯¼è‡´ â€œUnsupportedOperationExceptionâ€ ã€‚ç”±äºJava 8ä¸­æ¥å£æ–¹æ³•çš„å®ç°ï¼Œå¯ä»¥ç›´æ¥åœ¨Listï¼ŒSetå’ŒMapçš„æ¥å£å†…å®šä¹‰è¿™äº›æ–¹æ³•ï¼Œä¾¿äºè°ƒç”¨ã€‚List list = List.of(â€œaâ€, â€œbâ€, â€œcâ€);Set set = Set.of(â€œaâ€, â€œbâ€, â€œcâ€);Map map1 = Map.of(â€œTomâ€, 12, â€œJerryâ€, 21, â€œLileiâ€, 33,â€œHanMeimeiâ€, 18);Map map2 = Map.ofEntries(Map.entry(â€œTomâ€, 89),Map.entry(â€œJimâ€, 78), Map.entry(â€œTimâ€, 98));ä¹ã€InputStream åŠ å¼ºInputStream ç»ˆäºæœ‰äº†ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„æ–¹æ³•ï¼štransferToï¼Œå¯ä»¥ç”¨æ¥å°†æ•°æ®ç›´æ¥ä¼ è¾“åˆ° OutputStreamï¼Œè¿™æ˜¯åœ¨å¤„ç†åŸå§‹æ•°æ®æµæ—¶éå¸¸å¸¸è§çš„ä¸€ç§ç”¨æ³•ï¼Œå¦‚ä¸‹ç¤ºä¾‹ã€‚ClassLoader cl = this.getClass().getClassLoader();try (InputStream is = cl.getResourceAsStream(â€œhello.txtâ€);OutputStream os = new FileOutputStream(â€œsrc\\hello1.txtâ€)) {is.transferTo(os); // æŠŠè¾“å…¥æµä¸­çš„æ‰€æœ‰æ•°æ®ç›´æ¥è‡ªåŠ¨åœ°å¤åˆ¶åˆ°è¾“å‡ºæµä¸­} catch (IOException e) {e.printStackTrace();}åã€å¢å¼ºçš„ Stream APIï¬ Java çš„ Steam API æ˜¯javaæ ‡å‡†åº“æœ€å¥½çš„æ”¹è¿›ä¹‹ä¸€ï¼Œè®©å¼€å‘è€…èƒ½å¤Ÿå¿«é€Ÿè¿ç®—ï¼Œä»è€Œèƒ½å¤Ÿæœ‰æ•ˆçš„åˆ©ç”¨æ•°æ®å¹¶è¡Œè®¡ç®—ã€‚Java 8 æä¾›çš„ Steam èƒ½å¤Ÿåˆ©ç”¨å¤šæ ¸æ¶æ„å®ç°å£°æ˜å¼çš„æ•°æ®å¤„ç†ã€‚ï¬ åœ¨ Java 9 ä¸­ï¼ŒStream API å˜å¾—æ›´å¥½ï¼ŒStream æ¥å£ä¸­æ·»åŠ äº† 4 ä¸ªæ–°çš„æ–¹æ³•ï¼štakeWhile, dropWhile, ofNullableï¼Œè¿˜æœ‰ä¸ª iterate æ–¹æ³•çš„æ–°é‡è½½æ–¹æ³•ï¼Œå¯ä»¥è®©ä½ æä¾›ä¸€ä¸ª Predicate (åˆ¤æ–­æ¡ä»¶)æ¥æŒ‡å®šä»€ä¹ˆæ—¶å€™ç»“æŸè¿­ä»£ã€‚ ï¬ é™¤äº†å¯¹ Stream æœ¬èº«çš„æ‰©å±•ï¼ŒOptional å’Œ Stream ä¹‹é—´çš„ç»“åˆä¹Ÿå¾—åˆ°äº†æ”¹è¿›ã€‚ç°åœ¨å¯ä»¥é€šè¿‡ Optional çš„æ–°æ–¹æ³• stream() å°†ä¸€ä¸ª Optional å¯¹è±¡è½¬æ¢ä¸ºä¸€ä¸ª(å¯èƒ½æ˜¯ç©ºçš„) Stream å¯¹è±¡ã€‚åã€å¢å¼ºçš„ Stream APItakeWhile()çš„ä½¿ç”¨ç”¨äºä» Stream ä¸­è·å–ä¸€éƒ¨åˆ†æ•°æ®ï¼Œæ¥æ”¶ä¸€ä¸ª Predicate æ¥è¿›è¡Œé€‰æ‹©ã€‚åœ¨æœ‰åºçš„Stream ä¸­ï¼ŒtakeWhile è¿”å›ä»å¼€å¤´å¼€å§‹çš„å°½é‡å¤šçš„å…ƒç´ ã€‚List list = Arrays.asList(45, 43, 76, 87, 42, 77, 90, 73, 67, 88);list.stream().takeWhile(x -&gt; x &lt; 50).forEach(System.out::println);System.out.println();list = Arrays.asList(1, 2, 3, 4, 5, 6, 7, 8);list.stream().takeWhile(x -&gt; x &lt; 5).forEach(System.out::println);åã€å¢å¼ºçš„ Stream APIdropWhile()çš„ä½¿ç”¨dropWhile çš„è¡Œä¸ºä¸ takeWhile ç›¸åï¼Œè¿”å›å‰©ä½™çš„å…ƒç´ ã€‚List list = Arrays.asList(45, 43, 76, 87, 42, 77, 90, 73, 67, 88);list.stream().dropWhile(x -&gt; x &lt; 50).forEach(System.out::println);System.out.println();list = Arrays.asList(1, 2, 3, 4, 5, 6, 7, 8);list.stream().dropWhile(x -&gt; x &lt; 5).forEach(System.out::println);åã€å¢å¼ºçš„ Stream APIofNullable()çš„ä½¿ç”¨Java 8 ä¸­ Stream ä¸èƒ½å®Œå…¨ä¸ºnullï¼Œå¦åˆ™ä¼šæŠ¥ç©ºæŒ‡é’ˆå¼‚å¸¸ã€‚è€Œ Java 9 ä¸­çš„ ofNullable æ–¹æ³•å…è®¸æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå•å…ƒç´  Streamï¼Œå¯ä»¥åŒ…å«ä¸€ä¸ªéç©ºå…ƒç´ ï¼Œä¹Ÿå¯ä»¥åˆ›å»ºä¸€ä¸ªç©ºStreamã€‚// æŠ¥NullPointerException// Stream stream1 = Stream.of(null);// System.out.println(stream1.count());// ä¸æŠ¥å¼‚å¸¸ï¼Œå…è®¸é€šè¿‡Stream stringStream = Stream.of(â€œAAâ€, â€œBBâ€, null);System.out.println(stringStream.count());// 3// ä¸æŠ¥å¼‚å¸¸ï¼Œå…è®¸é€šè¿‡List list = new ArrayList&lt;&gt;();list.add(â€œAAâ€);list.add(null);System.out.println(list.stream().count());// 2// ofNullable()ï¼šå…è®¸å€¼ä¸ºnullStream stream1 = Stream.ofNullable(null);System.out.println(stream1.count());// 0Stream stream = Stream.ofNullable(â€œhello worldâ€);System.out.println(stream.count());// 1åã€å¢å¼ºçš„ Stream APIiterate()é‡è½½çš„ä½¿ç”¨è¿™ä¸ª iterate æ–¹æ³•çš„æ–°é‡è½½æ–¹æ³•ï¼Œå¯ä»¥è®©ä½ æä¾›ä¸€ä¸ª Predicate (åˆ¤æ–­æ¡ä»¶)æ¥æŒ‡å®šä»€ä¹ˆæ—¶å€™ç»“æŸè¿­ä»£ã€‚// åŸæ¥çš„æ§åˆ¶ç»ˆæ­¢æ–¹å¼ï¼šStream.iterate(1, i -&gt; i + 1).limit(10).forEach(System.out::println);// ç°åœ¨çš„ç»ˆæ­¢æ–¹å¼ï¼šStream.iterate(1, i -&gt; i &lt; 100, i -&gt; i + 1).forEach(System.out::println);åä¸€ã€Optionalè·å–Streamçš„æ–¹æ³•Optionalç±»ä¸­stream()çš„ä½¿ç”¨List list = new ArrayList&lt;&gt;();list.add(â€œTomâ€);list.add(â€œJerryâ€);list.add(â€œTimâ€);Optional&gt; optional = Optional.ofNullable(list);Stream&gt; stream = optional.stream();stream.flatMap(x -&gt; x.stream()).forEach(System.out::println);åäºŒã€Javascriptå¼•æ“å‡çº§ï¼šNashornï¬ Nashorn é¡¹ç›®åœ¨ JDK 9 ä¸­å¾—åˆ°æ”¹è¿›ï¼Œå®ƒä¸º Java æä¾›è½»é‡çº§çš„ Javascript è¿è¡Œæ—¶ã€‚Nashorn é¡¹ç›®è·Ÿéš Netscape çš„ Rhino é¡¹ç›®ï¼Œç›®çš„æ˜¯ä¸ºäº†åœ¨ Java ä¸­å®ç°ä¸€ä¸ªé«˜æ€§èƒ½ä½†è½»é‡çº§çš„ Javascript è¿è¡Œæ—¶ã€‚Nashorn é¡¹ç›®ä½¿å¾— Java åº”ç”¨èƒ½å¤ŸåµŒå…¥Javascriptã€‚å®ƒåœ¨ JDK 8 ä¸­ä¸º Java æä¾›ä¸€ä¸ª Javascript å¼•æ“ã€‚ ï¬ JDK 9 åŒ…å«ä¸€ä¸ªç”¨æ¥è§£æ Nashorn çš„ ECMAScript è¯­æ³•æ ‘çš„ APIã€‚è¿™ä¸ª API ä½¿å¾—IDE å’ŒæœåŠ¡ç«¯æ¡†æ¶ä¸éœ€è¦ä¾èµ– Nashorn é¡¹ç›®çš„å†…éƒ¨å®ç°ç±»ï¼Œå°±èƒ½å¤Ÿåˆ†æECMAScript ä»£ç \n\n3.2 Java 10 çš„æ–°ç‰¹æ€§ï¬ 2018å¹´3æœˆ21æ—¥ï¼ŒOracleå®˜æ–¹å®£å¸ƒJava10æ­£å¼å‘å¸ƒã€‚ ï¬ éœ€è¦æ³¨æ„çš„æ˜¯ Java 9 å’Œ Java 10 éƒ½ä¸æ˜¯ LTS (Long-Term-Support) ç‰ˆæœ¬ã€‚å’Œè¿‡å»çš„ Java å¤§ç‰ˆæœ¬å‡çº§ä¸åŒï¼Œè¿™ä¸¤ä¸ªåªæœ‰åŠå¹´å·¦å³çš„å¼€å‘å’Œç»´æŠ¤æœŸã€‚è€Œæœªæ¥çš„ Java 11ï¼Œä¹Ÿå°±æ˜¯ 18.9 LTSï¼Œæ‰æ˜¯ Java 8 ä¹‹åç¬¬ä¸€ä¸ª LTS ç‰ˆæœ¬ã€‚ ï¬ JDK10ä¸€å…±å®šä¹‰äº†109ä¸ªæ–°ç‰¹æ€§ï¼Œå…¶ä¸­åŒ…å«12ä¸ªJEPï¼ˆå¯¹äºç¨‹åºå‘˜æ¥è®²ï¼ŒçœŸæ­£çš„æ–°ç‰¹æ€§å…¶å®å°±ä¸€ä¸ªï¼‰ï¼Œè¿˜æœ‰ä¸€äº›æ–°APIå’ŒJVMè§„èŒƒä»¥åŠJAVAè¯­è¨€è§„èŒƒä¸Šçš„æ”¹åŠ¨ã€‚ ï¬ JDK10çš„12ä¸ªJEPï¼ˆJDK Enhancement Proposalç‰¹æ€§åŠ å¼ºæè®®ï¼‰å‚é˜…å®˜æ–¹æ–‡æ¡£ï¼šhttp://openjdk.java.net/projects/jdk/10/JDK10çš„12ä¸ªJEP286: Local-Variable Type Inference å±€éƒ¨å˜é‡ç±»å‹æ¨æ–­296: Consolidate the JDK Forest into a Single Repository JDKåº“çš„åˆå¹¶304: Garbage-Collector Interface ç»Ÿä¸€çš„åƒåœ¾å›æ”¶æ¥å£307: Parallel Full GC for G1 ä¸ºG1æä¾›å¹¶è¡Œçš„Full GC310: Application Class-Data Sharing åº”ç”¨ç¨‹åºç±»æ•°æ®ï¼ˆAppCDSï¼‰å…±äº«312: Thread-Local Handshakes ThreadLocalæ¡æ‰‹äº¤äº’313: Remove the Native-Header Generation Tool (javah) ç§»é™¤JDKä¸­é™„å¸¦çš„javahå·¥å…·314: Additional Unicode Language-Tag Extensions ä½¿ç”¨é™„åŠ çš„Unicodeè¯­è¨€æ ‡è®°æ‰©å±•316: Heap Allocation on Alternative Memory Devices èƒ½å°†å †å†…å­˜å ç”¨åˆ†é…ç»™ç”¨æˆ·æŒ‡å®šçš„å¤‡ç”¨å†…å­˜è®¾å¤‡317: Experimental Java-Based JIT Compiler ä½¿ç”¨åŸºäºJavaçš„JITç¼–è¯‘å™¨319: Root Certificates æ ¹è¯ä¹¦322: Time-Based Release Versioning åŸºäºæ—¶é—´çš„å‘å¸ƒç‰ˆæœ¬ä¸€ã€å±€éƒ¨å˜é‡ç±»å‹æ¨æ–­ï¬ äº§ç”ŸèƒŒæ™¯å¼€å‘è€…ç»å¸¸æŠ±æ€¨Javaä¸­å¼•ç”¨ä»£ç çš„ç¨‹åº¦ã€‚å±€éƒ¨å˜é‡çš„æ˜¾ç¤ºç±»å‹å£°æ˜ï¼Œå¸¸å¸¸è¢«è®¤ä¸ºæ˜¯ä¸å¿…é¡»çš„ï¼Œç»™ä¸€ä¸ªå¥½å¬çš„åå­—ç»å¸¸å¯ä»¥å¾ˆæ¸…æ¥šçš„è¡¨è¾¾å‡ºä¸‹é¢åº”è¯¥æ€æ ·ç»§ç»­ã€‚ ï¬ å¥½å¤„ï¼šå‡å°‘äº†å•°å—¦å’Œå½¢å¼çš„ä»£ç ï¼Œé¿å…äº†ä¿¡æ¯å†—ä½™ï¼Œè€Œä¸”å¯¹é½äº†å˜é‡åï¼Œæ›´å®¹æ˜“é˜…è¯»ï¼ï¬ ä¸¾ä¾‹å¦‚ä¸‹ï¼šïƒ˜ åœºæ™¯ä¸€ï¼šç±»å®ä¾‹åŒ–æ—¶ä½œä¸º Javaå¼€å‘è€…ï¼Œåœ¨å£°æ˜ä¸€ä¸ªå˜é‡æ—¶ï¼Œæˆ‘ä»¬æ€»æ˜¯ä¹ æƒ¯äº†æ•²æ‰“ä¸¤æ¬¡å˜é‡ç±»å‹ï¼Œç¬¬ä¸€æ¬¡ç”¨äºå£°æ˜å˜é‡ç±»å‹ï¼Œç¬¬äºŒæ¬¡ç”¨äºæ„é€ å™¨ã€‚LinkedHashSet set = new LinkedHashSet&lt;&gt;();ïƒ˜ åœºæ™¯äºŒï¼šè¿”å›å€¼ç±»å‹å«å¤æ‚æ³›å‹ç»“æ„å˜é‡çš„å£°æ˜ç±»å‹ä¹¦å†™å¤æ‚ä¸”è¾ƒé•¿ï¼Œå°¤å…¶æ˜¯åŠ ä¸Šæ³›å‹çš„ä½¿ç”¨Iterator&gt; iterator = set.iterator();ä¸€ã€å±€éƒ¨å˜é‡ç±»å‹æ¨æ–­ïƒ˜ åœºæ™¯ä¸‰ï¼šæˆ‘ä»¬ä¹Ÿç»å¸¸å£°æ˜ä¸€ç§å˜é‡ï¼Œå®ƒåªä¼šè¢«ä½¿ç”¨ä¸€æ¬¡ï¼Œè€Œä¸”æ˜¯ç”¨åœ¨ä¸‹ä¸€è¡Œä»£ç ä¸­ï¼Œæ¯”å¦‚ï¼šURL url = new URL(â€œhttp://www.atguigu.comâ€œ);URLConnection connection = url.openConnection();Reader reader = new BufferedReader(newInputStreamReader(connection.getInputStream()));å°½ç®¡ IDEå¯ä»¥å¸®æˆ‘ä»¬è‡ªåŠ¨å®Œæˆè¿™äº›ä»£ç ï¼Œä½†å½“å˜é‡æ€»æ˜¯è·³æ¥è·³å»çš„æ—¶å€™ï¼Œå¯è¯»æ€§è¿˜æ˜¯ä¼šå—åˆ°å½±å“ï¼Œå› ä¸ºå˜é‡ç±»å‹çš„åç§°ç”±å„ç§ä¸åŒé•¿åº¦çš„å­—ç¬¦ç»„æˆã€‚è€Œä¸”ï¼Œæœ‰æ—¶å€™å¼€å‘äººå‘˜ä¼šå°½åŠ›é¿å…å£°æ˜ä¸­é—´å˜é‡ï¼Œå› ä¸ºå¤ªå¤šçš„ç±»å‹å£°æ˜åªä¼šåˆ†æ•£æ³¨æ„åŠ›ï¼Œä¸ä¼šå¸¦æ¥é¢å¤–çš„å¥½å¤„ã€‚ä¸€ã€å±€éƒ¨å˜é‡ç±»å‹æ¨æ–­é€‚ç”¨äºä»¥ä¸‹æƒ…å†µï¼š//1.å±€éƒ¨å˜é‡çš„åˆå§‹åŒ–var list = new ArrayList&lt;&gt;();//2.å¢å¼ºforå¾ªç¯ä¸­çš„ç´¢å¼•for(var v : list) {System.out.println(v);}//3.ä¼ ç»Ÿforå¾ªç¯ä¸­for(var i = 0;i &lt; 100;i++) {System.out.println(i);}åˆå§‹å€¼ä¸ºnullLambdaè¡¨è¾¾å¼ä¸ºæ•°ç»„é™æ€åˆå§‹åŒ–ä¸€ã€å±€éƒ¨å˜é‡ç±»å‹æ¨æ–­åœ¨å±€éƒ¨å˜é‡ä¸­ä½¿ç”¨æ—¶ï¼Œå¦‚ä¸‹æƒ…å†µä¸é€‚ç”¨ï¼šæ–¹æ³•å¼•ç”¨ä¸€ã€å±€éƒ¨å˜é‡ç±»å‹æ¨æ–­ä¸é€‚ç”¨ä»¥ä¸‹çš„ç»“æ„ä¸­ï¼š ï¬ æƒ…å†µ1ï¼šæ²¡æœ‰åˆå§‹åŒ–çš„å±€éƒ¨å˜é‡å£°æ˜ï¬ æƒ…å†µ2ï¼šæ–¹æ³•çš„è¿”å›ç±»å‹ï¬ æƒ…å†µ3ï¼šæ–¹æ³•çš„å‚æ•°ç±»å‹ï¬ æƒ…å†µ4ï¼šæ„é€ å™¨çš„å‚æ•°ç±»å‹ï¬ æƒ…å†µ5ï¼šå±æ€§ï¬ æƒ…å†µ6ï¼šcatchå—ä¸€ã€å±€éƒ¨å˜é‡ç±»å‹æ¨æ–­å·¥ä½œåŸç†åœ¨å¤„ç† varæ—¶ï¼Œç¼–è¯‘å™¨å…ˆæ˜¯æŸ¥çœ‹è¡¨è¾¾å¼å³è¾¹éƒ¨åˆ†ï¼Œå¹¶æ ¹æ®å³è¾¹å˜é‡å€¼çš„ç±»å‹è¿›è¡Œæ¨æ–­ï¼Œä½œä¸ºå·¦è¾¹å˜é‡çš„ç±»å‹ï¼Œç„¶åå°†è¯¥ç±»å‹å†™å…¥å­—èŠ‚ç å½“ä¸­ã€‚ æ³¨ æ„ ï¬ varä¸æ˜¯ä¸€ä¸ªå…³é”®å­—ä½ ä¸éœ€è¦æ‹…å¿ƒå˜é‡åæˆ–æ–¹æ³•åä¼šä¸ varå‘ç”Ÿå†²çªï¼Œå› ä¸º varå®é™…ä¸Šå¹¶ä¸æ˜¯ä¸€ä¸ªå…³é”®å­—ï¼Œè€Œæ˜¯ä¸€ä¸ªç±»å‹åï¼Œåªæœ‰åœ¨ç¼–è¯‘å™¨éœ€è¦çŸ¥é“ç±»å‹çš„åœ°æ–¹æ‰éœ€è¦ç”¨åˆ°å®ƒã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªæ™®é€šåˆæ³•çš„æ ‡è¯†ç¬¦ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé™¤äº†ä¸èƒ½ç”¨å®ƒä½œä¸ºç±»åï¼Œå…¶ä»–çš„éƒ½å¯ä»¥ï¼Œä½†æå°‘äººä¼šç”¨å®ƒä½œä¸ºç±»åã€‚ ï¬ è¿™ä¸æ˜¯JavaScripté¦–å…ˆæˆ‘è¦è¯´æ˜çš„æ˜¯ï¼Œvarå¹¶ä¸ä¼šæ”¹å˜Javaæ˜¯ä¸€é—¨é™æ€ç±»å‹è¯­è¨€çš„äº‹å®ã€‚ç¼–è¯‘å™¨è´Ÿè´£æ¨æ–­å‡ºç±»å‹ï¼Œå¹¶æŠŠç»“æœå†™å…¥å­—èŠ‚ç æ–‡ä»¶ï¼Œå°±å¥½åƒæ˜¯å¼€å‘äººå‘˜è‡ªå·±æ•²å…¥ç±»å‹ä¸€æ ·ã€‚ä¸‹é¢æ˜¯ä½¿ç”¨ IntelliJï¼ˆå®é™…ä¸Šæ˜¯ Fernflowerçš„åç¼–è¯‘å™¨ï¼‰åç¼–è¯‘å™¨åç¼–è¯‘å‡ºçš„ä»£ç ï¼šä¸€ã€å±€éƒ¨å˜é‡ç±»å‹æ¨æ–­var url = new URL(â€œhttp://www.atguigu.comâ€œ);var connection = url.openConnection();var reader = new BufferedReader(new InputStreamReader(connection.getInputStream()));åç¼–è¯‘åURL url = new URL(â€œhttp://www.atguigu.comâ€œ);URLConnection connection = url.openConnection();BufferedReader reader = new BufferedReader(new InputStreamReader(connection.getInputStream()));ä»ä»£ç æ¥çœ‹ï¼Œå°±å¥½åƒä¹‹å‰å·²ç»å£°æ˜äº†è¿™äº›ç±»å‹ä¸€æ ·ã€‚äº‹å®ä¸Šï¼Œè¿™ä¸€ç‰¹æ€§åªå‘ç”Ÿåœ¨ç¼–è¯‘é˜¶æ®µï¼Œä¸è¿è¡Œæ—¶æ— å…³ï¼Œæ‰€ä»¥å¯¹è¿è¡Œæ—¶çš„æ€§èƒ½ä¸ä¼šäº§ç”Ÿä»»ä½•å½±å“ã€‚æ‰€ä»¥è¯·æ”¾å¿ƒï¼Œè¿™ä¸æ˜¯ JavaScriptã€‚äºŒã€é›†åˆæ–°å¢åˆ›å»ºä¸å¯å˜é›†åˆçš„æ–¹æ³•è‡ª Java 9 å¼€å§‹ï¼ŒJdk é‡Œé¢ä¸ºé›†åˆï¼ˆList / Set / Mapï¼‰éƒ½æ·»åŠ äº† of (jdk9æ–°å¢)å’ŒcopyOf (jdk10æ–°å¢)æ–¹æ³•ï¼Œå®ƒä»¬ä¸¤ä¸ªéƒ½ç”¨æ¥åˆ›å»ºä¸å¯å˜çš„é›†åˆï¼Œæ¥çœ‹ä¸‹å®ƒä»¬çš„ä½¿ç”¨å’ŒåŒºåˆ«ã€‚//ç¤ºä¾‹1ï¼švar list1 = List.of(â€œJavaâ€, â€œPythonâ€, â€œCâ€);var copy1 = List.copyOf(list1);System.out.println(list1 == copy1); // true//ç¤ºä¾‹2ï¼švar list2 = new ArrayList();var copy2 = List.copyOf(list2);System.out.println(list2 == copy2); // false//ç¤ºä¾‹1å’Œ2ä»£ç åŸºæœ¬ä¸€è‡´ï¼Œä¸ºä»€ä¹ˆä¸€ä¸ªä¸ºtrue,ä¸€ä¸ªä¸ºfalse?ä» æº ç  åˆ† æ ï¼Œ å¯ ä»¥ çœ‹ å‡º copyOf æ–¹ æ³• ä¼š å…ˆ åˆ¤ æ–­ æ¥ æº é›† åˆ æ˜¯ ä¸ æ˜¯AbstractImmutableList ç±»å‹çš„ï¼Œå¦‚æœæ˜¯ï¼Œå°±ç›´æ¥è¿”å›ï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™è°ƒç”¨ of åˆ›å»ºä¸€ä¸ªæ–°çš„é›†åˆã€‚ç¤ºä¾‹2å› ä¸ºç”¨çš„ new åˆ›å»ºçš„é›†åˆï¼Œä¸å±äºä¸å¯å˜ AbstractImmutableList ç±»çš„å­ç±»ï¼Œæ‰€ä»¥ copyOf æ–¹æ³•åˆåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„å®ä¾‹ï¼Œæ‰€ä»¥ä¸ºfalseã€‚æ³¨æ„ï¼šä½¿ç”¨ofå’ŒcopyOfåˆ›å»ºçš„é›†åˆä¸ºä¸å¯å˜é›†åˆï¼Œä¸èƒ½è¿›è¡Œæ·»åŠ ã€åˆ é™¤ã€æ›¿æ¢ã€æ’åºç­‰æ“ä½œï¼Œä¸ç„¶ä¼šæŠ¥ java.lang.UnsupportedOperationException å¼‚å¸¸ã€‚ä¸Šé¢æ¼”ç¤ºäº† List çš„ of å’Œ copyOf æ–¹æ³•ï¼ŒSet å’Œ Map æ¥å£éƒ½æœ‰ã€‚\n3.3 Java 11 çš„æ–°ç‰¹æ€§åŒ—äº¬æ—¶é—´ 2018å¹´9 æœˆ 26 æ—¥ï¼ŒOracle å®˜æ–¹å®£å¸ƒ Java 11 æ­£å¼å‘å¸ƒã€‚è¿™æ˜¯ Java å¤§ç‰ˆæœ¬å‘¨æœŸå˜åŒ–åçš„ç¬¬ä¸€ä¸ªé•¿æœŸæ”¯æŒç‰ˆæœ¬ï¼Œéå¸¸å€¼å¾—å…³æ³¨ã€‚ä»å®˜ç½‘å³å¯ä¸‹è½½,æœ€æ–°å‘å¸ƒçš„ Java11 å°†å¸¦æ¥ ZGCã€Http Client ç­‰é‡è¦ç‰¹æ€§ï¼Œä¸€å…±åŒ…å« 17 ä¸ª JEPï¼ˆJDK EnhancementProposalsï¼ŒJDK å¢å¼ºææ¡ˆï¼‰ã€‚å…¶ å®ï¼Œæ€»å…±æ›´æ–°ä¸æ­¢17ä¸ªï¼Œåªæ˜¯æˆ‘ä»¬æ›´å…³æ³¨å¦‚ä¸‹çš„17ä¸ªJEPæ›´æ–°ã€‚JDK 11 å°†æ˜¯ä¸€ä¸ª ä¼ä¸šä¸å¯å¿½è§†çš„ç‰ˆæœ¬ã€‚ä»æ—¶é—´èŠ‚ç‚¹æ¥çœ‹ï¼ŒJDK 11 çš„å‘å¸ƒæ­£å¥½å¤„åœ¨ JDK 8 å…è´¹æ›´æ–°åˆ°æœŸçš„å‰å¤•ï¼ŒåŒæ—¶ JDK 9ã€10 ä¹Ÿé™†ç»­æˆä¸ºâ€œå†å²ç‰ˆæœ¬â€ï¼Œä¸‹é¢æ˜¯ Oracle JDK æ”¯æŒè·¯çº¿å›¾ï¼šJDK 11 æ˜¯ä¸€ä¸ªé•¿æœŸæ”¯æŒç‰ˆæœ¬ï¼ˆLTS, Long-Term-Supportï¼‰ ï¬ å¯¹äºä¼ä¸šæ¥è¯´ï¼Œé€‰æ‹© 11 å°†æ„å‘³ç€é•¿æœŸçš„ã€å¯é çš„ã€å¯é¢„æµ‹çš„æŠ€æœ¯è·¯çº¿å›¾ã€‚å…¶ä¸­å…è´¹çš„OpenJDK11 ç¡®å®šå°†å¾—åˆ° OpenJDK ç¤¾åŒºçš„é•¿æœŸæ”¯æŒï¼Œ LTS ç‰ˆæœ¬å°†æ˜¯å¯ä»¥æ”¾å¿ƒé€‰æ‹©çš„ç‰ˆæœ¬ã€‚ ï¬ ä» JVM GC çš„è§’åº¦ï¼ŒJDK11 å¼•å…¥äº†ä¸¤ç§æ–°çš„ GCï¼Œå…¶ä¸­åŒ…æ‹¬ä¹Ÿè®¸æ˜¯åˆ’æ—¶ä»£æ„ä¹‰çš„ ZGCï¼Œè™½ç„¶å…¶ç›®å‰è¿˜æ˜¯å®éªŒç‰¹æ€§ï¼Œä½†æ˜¯ä»èƒ½åŠ›ä¸Šæ¥çœ‹ï¼Œè¿™æ˜¯ JDK çš„ä¸€ä¸ªå·¨å¤§çªç ´ï¼Œä¸ºç‰¹å®šç”Ÿäº§ç¯å¢ƒçš„è‹›åˆ»éœ€æ±‚æä¾›äº†ä¸€ä¸ªå¯èƒ½çš„é€‰æ‹©ã€‚ä¾‹å¦‚ï¼Œå¯¹éƒ¨åˆ†ä¼ä¸šæ ¸å¿ƒå­˜å‚¨ç­‰äº§å“ï¼Œå¦‚æœèƒ½å¤Ÿä¿è¯ä¸è¶…è¿‡ 10ms çš„ GC æš‚åœï¼Œå¯é æ€§ä¼šä¸Šä¸€ä¸ªå¤§çš„å°é˜¶ï¼Œè¿™æ˜¯è¿‡å»æˆ‘ä»¬è¿›è¡Œ GC è°ƒä¼˜å‡ ä¹åšä¸åˆ°çš„ï¼Œæ˜¯èƒ½ä¸ä¸èƒ½çš„é—®é¢˜ã€‚æŒ‰ç…§å®˜æ–¹çš„è¯´æ³•ï¼Œæ–°çš„å‘å¸ƒå‘¨æœŸä¼šä¸¥æ ¼éµå¾ªæ—¶é—´ç‚¹ï¼Œå°†äºæ¯å¹´çš„3æœˆä»½å’Œ9æœˆä»½å‘å¸ƒã€‚æ‰€ä»¥ Java 11 çš„ç‰ˆæœ¬å·æ˜¯18.9(LTS)ã€‚ä¸è¿‡ä¸ Java 9 å’Œ Java 10 è¿™ä¸¤ä¸ªè¢«ç§°ä¸ºâ€œåŠŸèƒ½æ€§çš„ç‰ˆæœ¬â€ä¸åŒï¼ˆä¸¤è€…å‡åªæä¾›åŠå¹´çš„æŠ€æœ¯æ”¯æŒï¼‰ï¼ŒJava 11 ä¸ä»…æä¾›äº†é•¿æœŸæ”¯æŒæœåŠ¡ï¼Œè¿˜å°†ä½œä¸ºJava å¹³å°çš„å‚è€ƒå®ç°ã€‚Oracle ç›´åˆ°2023å¹´9æœˆéƒ½ä¼šä¸ºJava 11 æä¾›æŠ€æœ¯æ”¯æŒï¼Œè€Œè¡¥ä¸å’Œå®‰å…¨è­¦å‘Šç­‰æ‰©å±•æ”¯æŒå°†æŒç»­åˆ°2026å¹´ã€‚æ–°çš„é•¿æœŸæ”¯æŒç‰ˆæœ¬æ¯ä¸‰å¹´å‘å¸ƒä¸€æ¬¡ï¼Œæ ¹æ®åç»­çš„å‘å¸ƒè®¡åˆ’ï¼Œä¸‹ä¸€ä¸ªé•¿æœŸæ”¯æŒç‰ˆ Java 17 å°†äº2021å¹´å‘å¸ƒã€‚å®˜ç½‘å…¬å¼€çš„ 17 ä¸ª JEPï¼ˆJDK Enhancement Proposal ç‰¹æ€§å¢å¼ºæè®®ï¼‰181: Nest-Based Access Controlï¼ˆåŸºäºåµŒå¥—çš„è®¿é—®æ§åˆ¶ï¼‰309: Dynamic Class-File Constantsï¼ˆåŠ¨æ€çš„ç±»æ–‡ä»¶å¸¸é‡ï¼‰315: Improve Aarch64 Intrinsicsï¼ˆæ”¹è¿› Aarch64 Intrinsicsï¼‰318: Epsilon: A No-Op Garbage Collectorï¼ˆEpsilon åƒåœ¾å›æ”¶å™¨ï¼Œåˆè¢«ç§°ä¸ºâ€No-Opï¼ˆæ— æ“ä½œï¼‰â€œå›æ”¶å™¨ï¼‰320: Remove the Java EE and CORBA Modulesï¼ˆç§»é™¤ Java EE å’Œ CORBA æ¨¡å—ï¼ŒJavaFXä¹Ÿå·²è¢«ç§»é™¤ï¼‰321: HTTP Client (Standard)323: Local-Variable Syntax for Lambda Parametersï¼ˆç”¨äº Lambda å‚æ•°çš„å±€éƒ¨å˜é‡è¯­æ³•ï¼‰324: Key Agreement with Curve25519 and Curve448ï¼ˆé‡‡ç”¨ Curve25519 å’Œ Curve448 ç®—æ³•å®ç°çš„å¯†é’¥åè®®ï¼‰å®˜ç½‘å…¬å¼€çš„ 17 ä¸ª JEPï¼ˆJDK Enhancement Proposal ç‰¹æ€§å¢å¼ºæè®®ï¼‰327: Unicode 10328: Flight Recorderï¼ˆé£è¡Œè®°å½•ä»ªï¼‰329: ChaCha20 and Poly1305 Cryptographic Algorithmsï¼ˆå®ç° ChaCha20 å’Œ Poly1305 åŠ å¯†ç®—æ³•ï¼‰330: Launch Single-File Source-Code Programsï¼ˆå¯åŠ¨å•ä¸ª Java æºä»£ç æ–‡ä»¶çš„ç¨‹åºï¼‰331: Low-Overhead Heap Profilingï¼ˆä½å¼€é”€çš„å †åˆ†é…é‡‡æ ·æ–¹æ³•ï¼‰332: Transport Layer Security (TLS) 1.3ï¼ˆå¯¹ TLS 1.3 çš„æ”¯æŒï¼‰333: ZGC: A Scalable Low-Latency Garbage Collector (Experimental)ï¼ˆZGCï¼šå¯ä¼¸ç¼©çš„ä½å»¶è¿Ÿåƒåœ¾å›æ”¶å™¨ï¼Œå¤„äºå®éªŒæ€§é˜¶æ®µï¼‰335: Deprecate the Nashorn JavaScript Engineï¼ˆå¼ƒç”¨ Nashorn JavaScript å¼•æ“ï¼‰336: Deprecate the Pack200 Tools and APIï¼ˆå¼ƒç”¨ Pack200 å·¥å…·åŠå…¶ APIï¼‰ä¸€ã€æ–°å¢äº†ä¸€ç³»åˆ—å­—ç¬¦ä¸²å¤„ç†æ–¹æ³•æè¿° ä¸¾ä¾‹åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©ºç™½ â€œ â€œ.isBlank(); // trueå»é™¤é¦–å°¾ç©ºç™½ â€œ Javastack â€œ.strip(); // â€œJavastackâ€å»é™¤å°¾éƒ¨ç©ºæ ¼ â€œ Javastack â€œ.stripTrailing(); // â€œ Javastackâ€å»é™¤é¦–éƒ¨ç©ºæ ¼ â€œ Javastack â€œ.stripLeading(); // â€œJavastack â€œå¤åˆ¶å­—ç¬¦ä¸² â€œJavaâ€.repeat(3);// â€œJavaJavaJavaâ€è¡Œæ•°ç»Ÿè®¡ â€œA\\nB\\nCâ€.lines().count(); // 3äºŒã€Optional åŠ å¼ºOptional ä¹Ÿå¢åŠ äº†å‡ ä¸ªéå¸¸é…·çš„æ–¹æ³•ï¼Œç°åœ¨å¯ä»¥å¾ˆæ–¹ä¾¿çš„å°†ä¸€ä¸ª Optional è½¬æ¢æˆä¸€ä¸ª Stream, æˆ–è€…å½“ä¸€ä¸ªç©º Optional æ—¶ç»™å®ƒä¸€ä¸ªæ›¿ä»£çš„ã€‚æ–°å¢æ–¹æ³• æè¿° æ–°å¢çš„ç‰ˆæœ¬boolean isEmpty() åˆ¤æ–­valueæ˜¯å¦ä¸ºç©º JDK 11ifPresentOrElse(Consumer&lt;?super T&gt; action, Runnable emptyAction)valueéç©ºï¼Œæ‰§è¡Œå‚æ•°1åŠŸèƒ½ï¼›å¦‚æœvalueä¸ºç©ºï¼Œæ‰§è¡Œå‚æ•°2åŠŸèƒ½ JDK 9Optional or(Supplier&lt;?extends Optional&lt;? extends T&gt;&gt; supplier)valueéç©ºï¼Œè¿”å›å¯¹åº”çš„Optionalï¼›valueä¸ºç©ºï¼Œè¿”å›å½¢å‚å°è£…çš„OptionalJDK 9Stream stream() valueéç©ºï¼Œè¿”å›ä»…åŒ…å«æ­¤valueçš„Streamï¼›å¦åˆ™ï¼Œè¿”å›ä¸€ä¸ªç©ºçš„Stream JDK 9T orElseThrow() valueéç©ºï¼Œè¿”å›valueï¼›å¦åˆ™æŠ›å¼‚å¸¸NoSuchElementException JDK 10ä¸‰ã€å±€éƒ¨å˜é‡ç±»å‹æ¨æ–­å‡çº§åœ¨varä¸Šæ·»åŠ æ³¨è§£çš„è¯­æ³•æ ¼å¼ï¼Œåœ¨jdk10ä¸­æ˜¯ä¸èƒ½å®ç°çš„ã€‚åœ¨JDK11ä¸­åŠ å…¥äº†è¿™æ ·çš„è¯­æ³•ã€‚//é”™è¯¯çš„å½¢å¼: å¿…é¡»è¦æœ‰ç±»å‹, å¯ä»¥åŠ ä¸Švar//Consumer con1 = (@Deprecated t) -&gt;System.out.println(t.toUpperCase());//æ­£ç¡®çš„å½¢å¼://ä½¿ç”¨varçš„å¥½å¤„æ˜¯åœ¨ä½¿ç”¨lambdaè¡¨è¾¾å¼æ—¶ç»™å‚æ•°åŠ ä¸Šæ³¨è§£ã€‚Consumer con2 = (@Deprecated var t) -&gt;System.out.println(t.toUpperCase());å››ã€å…¨æ–°çš„HTTP å®¢æˆ·ç«¯APIï¬ HTTPï¼Œç”¨äºä¼ è¾“ç½‘é¡µçš„åè®®ï¼Œæ—©åœ¨1997å¹´å°±è¢«é‡‡ç”¨åœ¨ç›®å‰çš„1.1ç‰ˆæœ¬ä¸­ã€‚ç›´åˆ°2015å¹´ï¼ŒHTTP2æ‰æˆä¸ºæ ‡å‡†ã€‚ ï¬ HTTP/1.1å’ŒHTTP/2çš„ä¸»è¦åŒºåˆ«æ˜¯å¦‚ä½•åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´æ„å»ºå’Œä¼ è¾“æ•°æ®ã€‚HTTP/1.1ä¾èµ–äºè¯·æ±‚/å“åº”å‘¨æœŸã€‚ HTTP/2å…è®¸æœåŠ¡å™¨â€œpushâ€æ•°æ®ï¼šå®ƒå¯ä»¥å‘é€æ¯”å®¢æˆ·ç«¯è¯·æ±‚æ›´å¤šçš„æ•°æ®ã€‚è¿™ä½¿å¾—å®ƒå¯ä»¥ä¼˜å…ˆå¤„ç†å¹¶å‘é€å¯¹äºé¦–å…ˆåŠ è½½ç½‘é¡µè‡³å…³é‡è¦çš„æ•°æ®ã€‚ ï¬ è¿™æ˜¯ Java 9 å¼€å§‹å¼•å…¥çš„ä¸€ä¸ªå¤„ç† HTTP è¯·æ±‚çš„çš„ HTTP Client APIï¼Œè¯¥API æ”¯æŒåŒæ­¥å’Œå¼‚æ­¥ï¼Œè€Œåœ¨ Java 11 ä¸­å·²ç»ä¸ºæ­£å¼å¯ç”¨çŠ¶æ€ï¼Œä½ å¯ä»¥åœ¨java.net åŒ…ä¸­æ‰¾åˆ°è¿™ä¸ª APIã€‚ ï¬ å®ƒ å°† æ›¿ ä»£ ä»… é€‚ ç”¨ äº blocking æ¨¡å¼çš„ HttpURLConnectionï¼ˆHttpURLConnectionæ˜¯åœ¨HTTP 1.0çš„æ—¶ä»£åˆ›å»ºçš„ï¼Œå¹¶ä½¿ç”¨äº†åè®®æ— å…³çš„æ–¹æ³•ï¼‰ï¼Œå¹¶æä¾›å¯¹WebSocket å’Œ HTTP/2çš„æ”¯æŒã€‚å››ã€å…¨æ–°çš„HTTP å®¢æˆ·ç«¯APIHttpClient client = HttpClient.newHttpClient();HttpRequest request =HttpRequest.newBuilder(URI.create(â€œhttp://127.0.0.1:8080/test/\")).build();BodyHandler responseBodyHandler = BodyHandlers.ofString();HttpResponse response = client.send(request, responseBodyHandler);String body = response.body();System.out.println(body);HttpClient client = HttpClient.newHttpClient();HttpRequest request =HttpRequest.newBuilder(URI.create(â€œhttp://127.0.0.1:8080/test/\")).build();BodyHandler responseBodyHandler = BodyHandlers.ofString();CompletableFuture&gt; sendAsync =client.sendAsync(request, responseBodyHandler);sendAsync.thenApply(t -&gt; t.body()).thenAccept(System.out::println);//HttpResponse response = sendAsync.get();//String body = response.body();//System.out.println(body);äº”ã€æ›´ç®€åŒ–çš„ç¼–è¯‘è¿è¡Œç¨‹åºçœ‹ä¸‹é¢çš„ä»£ç ã€‚// ç¼–è¯‘javac Javastack.java// è¿è¡Œjava Javastackåœ¨æˆ‘ä»¬çš„è®¤çŸ¥é‡Œé¢ï¼Œè¦è¿è¡Œä¸€ä¸ª Java æºä»£ç å¿…é¡»å…ˆç¼–è¯‘ï¼Œå†è¿è¡Œï¼Œä¸¤æ­¥æ‰§è¡ŒåŠ¨ä½œã€‚è€Œåœ¨æœªæ¥çš„ Java 11 ç‰ˆæœ¬ä¸­ï¼Œé€šè¿‡ä¸€ä¸ª java å‘½ä»¤å°±ç›´æ¥æå®šäº†ï¼Œå¦‚ä»¥ä¸‹æ‰€ç¤ºï¼šjava Javastack.javaä¸€ä¸ªå‘½ä»¤ç¼–è¯‘è¿è¡Œæºä»£ç çš„æ³¨æ„ç‚¹ï¼šïƒ˜ æ‰§è¡Œæºæ–‡ä»¶ä¸­çš„ç¬¬ä¸€ä¸ªç±», ç¬¬ä¸€ä¸ªç±»å¿…é¡»åŒ…å«ä¸»æ–¹æ³•ã€‚ ïƒ˜ å¹¶ä¸”ä¸å¯ä»¥ä½¿ç”¨å…¶å®ƒæºæ–‡ä»¶ä¸­çš„è‡ªå®šä¹‰ç±», æœ¬æ–‡ä»¶ä¸­çš„è‡ªå®šä¹‰ç±»æ˜¯å¯ä»¥ä½¿ç”¨çš„ã€‚å…­ã€åºŸå¼ƒNashornå¼•æ“åºŸé™¤Nashorn javascriptå¼•æ“ï¼Œåœ¨åç»­ç‰ˆæœ¬å‡†å¤‡ç§»é™¤æ‰ï¼Œæœ‰éœ€è¦çš„å¯ä»¥è€ƒè™‘ä½¿ç”¨GraalVMã€‚ä¸ƒã€ZGCï¬ GCæ˜¯javaä¸»è¦ä¼˜åŠ¿ä¹‹ä¸€ã€‚ ç„¶è€Œ, å½“GCåœé¡¿å¤ªé•¿, å°±ä¼šå¼€å§‹å½±å“åº”ç”¨çš„å“åº”æ—¶é—´ã€‚æ¶ˆé™¤æˆ–è€…å‡å°‘GCåœé¡¿æ—¶é•¿, javaå°†å¯¹æ›´å¹¿æ³›çš„åº”ç”¨åœºæ™¯æ˜¯ä¸€ä¸ªæ›´æœ‰å¸å¼•åŠ›çš„å¹³å°ã€‚æ­¤å¤–, ç°ä»£ç³»ç»Ÿä¸­å¯ç”¨å†…å­˜ä¸æ–­å¢é•¿,ç”¨æˆ·å’Œç¨‹åºå‘˜å¸Œæœ›JVMèƒ½å¤Ÿä»¥é«˜æ•ˆçš„æ–¹å¼å……åˆ†åˆ©ç”¨è¿™äº›å†…å­˜, å¹¶ä¸”æ— éœ€é•¿æ—¶é—´çš„GCæš‚åœæ—¶é—´ã€‚ ï¬ ZGC, A Scalable Low-Latency Garbage Collector(Experimental)ZGC, è¿™åº”è¯¥æ˜¯JDK11æœ€ä¸ºç©ç›®çš„ç‰¹æ€§, æ²¡æœ‰ä¹‹ä¸€ã€‚ ä½†æ˜¯åé¢å¸¦äº†Experimental,è¯´æ˜è¿™è¿˜ä¸å»ºè®®ç”¨åˆ°ç”Ÿäº§ç¯å¢ƒã€‚ ï¬ ZGCæ˜¯ä¸€ä¸ªå¹¶å‘, åŸºäºregion, å‹ç¼©å‹çš„åƒåœ¾æ”¶é›†å™¨, åªæœ‰rootæ‰«æé˜¶æ®µä¼šSTW(stop the world), å› æ­¤GCåœé¡¿æ—¶é—´ä¸ä¼šéšç€å †çš„å¢é•¿å’Œå­˜æ´»å¯¹è±¡çš„å¢é•¿è€Œå˜é•¿ã€‚ä¸ƒã€ZGCï¬ ä¼˜åŠ¿ï¼šïƒ˜ GCæš‚åœæ—¶é—´ä¸ä¼šè¶…è¿‡10msïƒ˜ æ—¢èƒ½å¤„ç†å‡ ç™¾å…†çš„å°å †, ä¹Ÿèƒ½å¤„ç†å‡ ä¸ªTçš„å¤§å †(OMG)ïƒ˜ å’ŒG1ç›¸æ¯”, åº”ç”¨ååèƒ½åŠ›ä¸ä¼šä¸‹é™è¶…è¿‡15% ïƒ˜ ä¸ºæœªæ¥çš„GCåŠŸèƒ½å’Œåˆ©ç”¨colordæŒ‡é’ˆä»¥åŠLoad barriersä¼˜åŒ–å¥ å®šåŸºç¡€ïƒ˜ åˆå§‹åªæ”¯æŒ64ä½ç³»ç»Ÿï¬ ZGCçš„è®¾è®¡ç›®æ ‡æ˜¯ï¼šæ”¯æŒTBçº§å†…å­˜å®¹é‡ï¼Œæš‚åœæ—¶é—´ä½ï¼ˆ&lt;10msï¼‰ï¼Œå¯¹æ•´ä¸ªç¨‹åºååé‡çš„å½±å“å°äº15%ã€‚ å°†æ¥è¿˜å¯ä»¥æ‰©å±•å®ç°æœºåˆ¶ï¼Œä»¥æ”¯æŒä¸å°‘ä»¤äººå…´å¥‹çš„åŠŸèƒ½ï¼Œä¾‹å¦‚å¤šå±‚å †ï¼ˆå³çƒ­å¯¹è±¡ç½®äºDRAMå’Œå†·å¯¹è±¡ç½®äºNVMeé—ªå­˜ï¼‰ï¼Œæˆ–å‹ç¼©å †ã€‚å…«ã€å…¶å®ƒæ–°ç‰¹æ€§ï¬ Unicode 10ï¬ Deprecate the Pack200 Tools and APIï¬ æ–°çš„Epsilonåƒåœ¾æ”¶é›†å™¨ï¬ å®Œå…¨æ”¯æŒLinuxå®¹å™¨ï¼ˆåŒ…æ‹¬Dockerï¼‰ ï¬ æ”¯æŒG1ä¸Šçš„å¹¶è¡Œå®Œå…¨åƒåœ¾æ”¶é›†ï¬ æœ€æ–°çš„HTTPSå®‰å…¨åè®®TLS 1.3ï¬ Java Flight Recorderåœ¨å½“å‰JDKä¸­çœ‹ä¸åˆ°ä»€ä¹ˆï¼Ÿä¸€ä¸ªæ ‡å‡†åŒ–å’Œè½»é‡çº§çš„JSON APIä¸€ä¸ªæ ‡å‡†åŒ–å’Œè½»é‡çº§çš„JSON APIè¢«è®¸å¤šJavaå¼€å‘äººå‘˜æ‰€é’çã€‚ä½†æ˜¯ç”±äºèµ„é‡‘é—®é¢˜æ— æ³•åœ¨Javaå½“å‰ç‰ˆæœ¬ä¸­è§åˆ°ï¼Œä½†å¹¶ä¸ä¼šå‰Šå‡æ‰ã€‚Javaå¹³å°é¦–å¸­æ¶æ„å¸ˆMarkReinholdåœ¨JDK 9é‚®ä»¶åˆ—ä¸­è¯´ï¼šâ€œè¿™ä¸ªJEPå°†æ˜¯å¹³å°ä¸Šçš„ä¸€ä¸ªæœ‰ç”¨çš„è¡¥å……ï¼Œä½†æ˜¯åœ¨è®¡åˆ’ä¸­ï¼Œå®ƒå¹¶ä¸åƒOracleèµ„åŠ©çš„å…¶ä»–åŠŸèƒ½é‚£ä¹ˆé‡è¦ï¼Œå¯èƒ½ä¼šé‡æ–°è€ƒè™‘JDK 10æˆ–æ›´é«˜ç‰ˆæœ¬ä¸­å®ç°ã€‚ â€ï¬ å¯¹è®¸å¤šåº”ç”¨è€Œè¨€è´§å¸ä»·å€¼éƒ½æ˜¯ä¸€ä¸ªå…³é”®çš„ç‰¹æ€§ï¼Œä½†JDKå¯¹æ­¤å´å‡ ä¹æ²¡æœ‰ä»»ä½•æ”¯æŒã€‚ä¸¥æ ¼æ¥è®²ï¼Œç°æœ‰çš„java.util.Currencyç±»åªæ˜¯ä»£è¡¨äº†å½“å‰ISO 4217è´§å¸çš„ä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œä½†å¹¶æ²¡æœ‰å…³è”çš„å€¼æˆ–è€…è‡ªå®šä¹‰è´§å¸ã€‚JDKå¯¹è´§å¸çš„è¿ç®—åŠè½¬æ¢ä¹Ÿæ²¡æœ‰å†…å»ºçš„æ”¯æŒï¼Œæ›´åˆ«è¯´æœ‰ä¸€ä¸ªèƒ½å¤Ÿä»£è¡¨è´§å¸å€¼çš„æ ‡å‡†ç±»å‹äº†ã€‚ ï¬ æ­¤å‰ï¼ŒOracle å…¬å¸ƒçš„JSR 354å®šä¹‰äº†ä¸€å¥—æ–°çš„Javaè´§å¸APIï¼šJavaMoneyï¼Œè®¡åˆ’ä¼šåœ¨Java9ä¸­æ­£å¼å¼•å…¥ã€‚ä½†æ˜¯ç›®å‰æ²¡æœ‰å‡ºç°åœ¨JDK æ–°ç‰¹æ€§ ä¸­ã€‚ ï¬ ä¸è¿‡ï¼Œå¦‚æœä½ ç”¨çš„æ˜¯Mavençš„è¯ï¼Œå¯ä»¥åšå¦‚ä¸‹çš„æ·»åŠ ï¼Œå³å¯ä½¿ç”¨ç›¸å…³çš„APIå¤„ç†è´§å¸ï¼šæ–°çš„è´§å¸ API\n\norg.javamoney\nmoneta\n0.9&lt;/dependency&gt;åœ¨å½“å‰JDKä¸­çœ‹ä¸åˆ°ä»€ä¹ˆï¼Ÿå±• æœ› ï¬ éšç€äº‘è®¡ç®—å’Œ AI ç­‰æŠ€æœ¯æµªæ½®ï¼Œå½“å‰çš„è®¡ç®—æ¨¡å¼å’Œåœºæ™¯æ­£åœ¨å‘ç”Ÿç¿»å¤©è¦†åœ°çš„å˜åŒ–ï¼Œä¸ä»…å¯¹ Java çš„å‘å±•é€Ÿåº¦æå‡ºäº†æ›´é«˜è¦æ±‚ï¼Œä¹Ÿæ·±åˆ»å½±å“ç€ Java æŠ€æœ¯çš„å‘å±•æ–¹å‘ã€‚ä¼ ç»Ÿçš„å¤§å‹ä¼ä¸šæˆ–äº’è”ç½‘åº”ç”¨ï¼Œæ­£åœ¨è¢«äº‘ç«¯ã€å®¹å™¨åŒ–åº”ç”¨ã€æ¨¡å—åŒ–çš„å¾®æœåŠ¡ç”šè‡³æ˜¯å‡½æ•°(FaaSï¼Œ Function-as-a-Service)æ‰€æ›¿ä»£ã€‚ ï¬ Javaè™½ç„¶æ ‡æ¦œé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œå´æ¯«ä¸é¡¾å¿Œçš„åŠ å…¥é¢å‘æ¥å£ç¼–ç¨‹æ€æƒ³ï¼Œåˆæ‰¯å‡ºåŒ¿åå¯¹è±¡ä¹‹æ¦‚å¿µï¼Œæ¯å¢åŠ ä¸€ä¸ªæ–°çš„ä¸œè¥¿ï¼Œå¯¹Javaçš„æ ¹æœ¬æ‰€åœ¨çš„é¢å‘å¯¹è±¡æ€æƒ³çš„ä¸€æ¬¡å†²å‡»ã€‚åè§‚Pythonï¼ŒæŠ“ä½é¢å‘å¯¹è±¡çš„æœ¬è´¨ï¼Œåˆèƒ½åœ¨å‡½æ•°ç¼–ç¨‹æ€æƒ³æ–¹é¢æ¸¸åˆƒæœ‰ä½™ã€‚Javaå¯¹æ ‡C/C++ï¼Œä»¥æŠ›æ‰å†…å­˜ç®¡ç†ä¸ºå–ç‚¹ï¼Œå´åˆé™·å…¥äº†JVMä¼˜åŒ–çš„å™©æ¢¦ã€‚é€‰æ‹©æ¯”åŠªåŠ›æ›´é‡è¦ï¼Œé€‰æ‹©Javaçš„äººæ›´éœ€è¦å¯¹å®ƒæœ‰æ›´æ¸…æ™°çš„è®¤è¯†ã€‚ï¬ Java éœ€è¦åœ¨æ–°çš„è®¡ç®—åœºæ™¯ä¸‹ï¼Œæ”¹è¿›å¼€å‘æ•ˆç‡ã€‚è¿™è¯è¯´çš„æœ‰ç‚¹ç¬¼ç»Ÿï¼Œæˆ‘è°ˆä¸€äº›è‡ªå·±çš„ä½“ä¼šï¼ŒJava ä»£ç è™½ç„¶è¿›è¡Œäº†ä¸€äº›ç±»å‹æ¨æ–­ç­‰æ”¹è¿›ï¼Œæ›´æ˜“ç”¨çš„é›†åˆ API ç­‰ï¼Œä½†ä»ç„¶ç»™å¼€å‘è€…ç•™ä¸‹äº†è¿‡äºåˆ»æ¿ã€å½¢å¼ä¸»ä¹‰çš„å°è±¡ï¼Œè¿™æ˜¯ä¸€ä¸ªé•¿æœŸçš„æ”¹è¿›æ–¹å‘ã€‚\n","slug":"J6-åå°„ã€æ–°ç‰¹æ€§","date":"2021-11-12T02:31:21.000Z","categories_index":"JAVA","tags_index":"java","author_index":"YFR718"},{"id":"8bbd211a4ba9676d95abee1aaae0937f","title":"IOã€ç½‘ç»œç¼–ç¨‹","content":"1. IOæµ1.1 Fileç±»çš„ä½¿ç”¨\njava.io.Fileç±»ï¼šæ–‡ä»¶å’Œæ–‡ä»¶ç›®å½•è·¯å¾„çš„æŠ½è±¡è¡¨ç¤ºå½¢å¼ï¼Œä¸å¹³å°æ— å…³\nFile èƒ½æ–°å»ºã€åˆ é™¤ã€é‡å‘½åæ–‡ä»¶å’Œç›®å½•ï¼Œä½† File ä¸èƒ½è®¿é—®æ–‡ä»¶å†…å®¹æœ¬èº«ã€‚å¦‚æœéœ€è¦è®¿é—®æ–‡ä»¶å†…å®¹æœ¬èº«ï¼Œåˆ™éœ€è¦ä½¿ç”¨è¾“å…¥/è¾“å‡ºæµã€‚ ï¬ æƒ³è¦åœ¨Javaç¨‹åºä¸­è¡¨ç¤ºä¸€ä¸ªçœŸå®å­˜åœ¨çš„æ–‡ä»¶æˆ–å½•ï¼Œé‚£ä¹ˆå¿…é¡»æœ‰ä¸€ä¸ªFileå¯¹ è±¡ï¼Œä½†æ˜¯Javaç¨‹åºä¸­çš„ä¸€ä¸ªFileå¯¹è±¡ï¼Œå¯èƒ½æ²¡æœ‰ä¸€ä¸ªçœŸå®å­˜åœ¨çš„æ–‡ä»¶æˆ–ç›®å½•ã€‚ \nFileå¯¹è±¡å¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’ç»™æµçš„æ„é€ å™¨\n\nå¸¸ç”¨æ„é€ å™¨\npublic File(String pathname) \nä»¥pathnameä¸ºè·¯å¾„åˆ›å»ºFileå¯¹è±¡ï¼Œå¯ä»¥æ˜¯ç»å¯¹è·¯å¾„æˆ–è€…ç›¸å¯¹è·¯å¾„ï¼Œå¦‚æœpathnameæ˜¯ç›¸å¯¹è·¯å¾„ï¼Œåˆ™é»˜è®¤çš„å½“å‰è·¯å¾„åœ¨ç³»ç»Ÿå±æ€§user.dirä¸­å­˜å‚¨ã€‚ïƒ˜ ç»å¯¹è·¯å¾„ï¼šæ˜¯ä¸€ä¸ªå›ºå®šçš„è·¯å¾„,ä»ç›˜ç¬¦å¼€å§‹ïƒ˜ ç›¸å¯¹è·¯å¾„ï¼šæ˜¯ç›¸å¯¹äºæŸä¸ªä½ç½®å¼€å§‹\n\npublic File(String parent,String child)ä»¥parentä¸ºçˆ¶è·¯å¾„ï¼Œchildä¸ºå­è·¯å¾„åˆ›å»ºFileå¯¹è±¡ã€‚ \n\npublic File(File parent,String child)æ ¹æ®ä¸€ä¸ªçˆ¶Fileå¯¹è±¡å’Œå­æ–‡ä»¶è·¯å¾„åˆ›å»ºFileå¯¹è±¡\n\n\nè·¯å¾„åˆ†éš”ç¬¦\nè·¯å¾„ä¸­çš„æ¯çº§ç›®å½•ä¹‹é—´ç”¨ä¸€ä¸ªè·¯å¾„åˆ†éš”ç¬¦éš”å¼€ã€‚\n\nè·¯å¾„åˆ†éš”ç¬¦å’Œç³»ç»Ÿæœ‰å…³ï¼šïƒ˜ windowså’ŒDOSç³»ç»Ÿé»˜è®¤ä½¿ç”¨â€œ\\â€æ¥è¡¨ç¤ºïƒ˜ UNIXå’ŒURLä½¿ç”¨â€œ/â€æ¥è¡¨ç¤º\n\nJavaç¨‹åºæ”¯æŒè·¨å¹³å°è¿è¡Œï¼Œå› æ­¤è·¯å¾„åˆ†éš”ç¬¦è¦æ…ç”¨ã€‚\n\nä¸ºäº†è§£å†³è¿™ä¸ªéšæ‚£ï¼ŒFileç±»æä¾›äº†ä¸€ä¸ªå¸¸é‡ï¼špublic static final String separatorã€‚æ ¹æ®æ“ä½œç³»ç»Ÿï¼ŒåŠ¨æ€çš„æä¾›åˆ†éš”ç¬¦ã€‚\n\nä¸¾ä¾‹ï¼š\nFile file1 = new File(\"d:\\\\atguigu\\\\info.txt\");\nFile file2 = new File(\"d:\" + File.separator + \"atguigu\" + File.separator + \"info.txt\");\nFile file3 = new File(\"d:/atguigu\");\n\n\nå¸¸ç”¨æ–¹æ³•\n\n\n\nè·å–æ–¹æ³•\nåŠŸèƒ½\n\n\n\n\npublic String getAbsolutePath()\nè·å–ç»å¯¹è·¯å¾„\n\n\npublic String getPath()\nè·å–è·¯å¾„\n\n\npublic String getName()\nè·å–åç§°\n\n\npublic String getParent()\nè·å–ä¸Šå±‚æ–‡ä»¶ç›®å½•è·¯å¾„ã€‚è‹¥æ— ï¼Œè¿”å›null\n\n\npublic long length()\nè·å–æ–‡ä»¶é•¿åº¦ï¼ˆå³ï¼šå­—èŠ‚æ•°ï¼‰ã€‚ä¸èƒ½è·å–ç›®å½•çš„é•¿åº¦ã€‚\n\n\npublic long lastModified()\nè·å–æœ€åä¸€æ¬¡çš„ä¿®æ”¹æ—¶é—´ï¼Œæ¯«ç§’å€¼\n\n\npublic String[] list()\nè·å–æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶æˆ–è€…æ–‡ä»¶ç›®å½•çš„åç§°æ•°ç»„\n\n\npublic File[] listFiles()\nè·å–æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶æˆ–è€…æ–‡ä»¶ç›®å½•çš„Fileæ•°ç»„\n\n\npublic boolean renameTo(File dest)\næŠŠæ–‡ä»¶é‡å‘½åä¸ºæŒ‡å®šçš„æ–‡ä»¶è·¯å¾„\n\n\n\n\n\n\n\n\nåˆ¤æ–­æ–¹æ³•\nåŠŸèƒ½\n\n\n\n\npublic boolean isDirectory()\nåˆ¤æ–­æ˜¯å¦æ˜¯æ–‡ä»¶ç›®å½•\n\n\npublic boolean isFile()\nåˆ¤æ–­æ˜¯å¦æ˜¯æ–‡ä»¶\n\n\npublic boolean exists()\nåˆ¤æ–­æ˜¯å¦å­˜åœ¨\n\n\npublic boolean canRead()\nåˆ¤æ–­æ˜¯å¦å¯è¯»\n\n\npublic boolean canWrite()\nåˆ¤æ–­æ˜¯å¦å¯å†™\n\n\npublic boolean isHidden()\nåˆ¤æ–­æ˜¯å¦éšè—\n\n\n\n\n\n\n\n\nåˆ›å»ºå’Œåˆ é™¤æ–¹æ³•\nåŠŸèƒ½\n\n\n\n\npublic boolean createNewFile()\nåˆ›å»ºæ–‡ä»¶ã€‚è‹¥æ–‡ä»¶å­˜åœ¨ï¼Œåˆ™ä¸åˆ›å»ºï¼Œè¿”å›false\n\n\npublic boolean mkdir()\nåˆ›å»ºæ–‡ä»¶ç›®å½•ã€‚å¦‚æœæ­¤æ–‡ä»¶ç›®å½•å­˜åœ¨ï¼Œå°±ä¸åˆ›å»ºäº†ã€‚å¦‚æœæ­¤æ–‡ä»¶ç›®å½•çš„ä¸Šå±‚ç›®å½•ä¸å­˜åœ¨ï¼Œä¹Ÿä¸åˆ›å»ºã€‚\n\n\npublic boolean mkdirs()\nåˆ›å»ºæ–‡ä»¶ç›®å½•ã€‚å¦‚æœä¸Šå±‚æ–‡ä»¶ç›®å½•ä¸å­˜åœ¨ï¼Œä¸€å¹¶åˆ›å»º\n\n\npublic boolean delete()\nåˆ é™¤æ–‡ä»¶æˆ–è€…æ–‡ä»¶å¤¹\n\n\n\n\næ³¨æ„äº‹é¡¹ï¼š\n\nå¦‚æœä½ åˆ›å»ºæ–‡ä»¶æˆ–è€…æ–‡ä»¶ç›®å½•æ²¡æœ‰å†™ç›˜ç¬¦è·¯å¾„ï¼Œé‚£ä¹ˆï¼Œé»˜è®¤åœ¨é¡¹ç›®è·¯å¾„ä¸‹ã€‚\n\nJavaä¸­çš„åˆ é™¤ä¸èµ°å›æ”¶ç«™ã€‚ è¦åˆ é™¤ä¸€ä¸ªæ–‡ä»¶ç›®å½•ï¼Œè¯·æ³¨æ„è¯¥æ–‡ä»¶ç›®å½•å†…ä¸èƒ½åŒ…å«æ–‡ä»¶æˆ–è€…æ–‡ä»¶ç›®å½•\n\n\nFile dir1 = new File(\"D:/IOTest/dir1\");\nif (!dir1.exists()) { // å¦‚æœD:/IOTest/dir1ä¸å­˜åœ¨ï¼Œå°±åˆ›å»ºä¸ºç›®å½•\n\tdir1.mkdir();\n}\n// åˆ›å»ºä»¥dir1ä¸ºçˆ¶ç›®å½•,åä¸º\"dir2\"çš„Fileå¯¹è±¡\nFile dir2 = new File(dir1, \"dir2\");\nif (!dir2.exists()) { // å¦‚æœè¿˜ä¸å­˜åœ¨ï¼Œå°±åˆ›å»ºä¸ºç›®å½•\n\tdir2.mkdirs();\n}\nFile dir4 = new File(dir1, \"dir3/dir4\");\nif (!dir4.exists()) {\n\tdir4.mkdirs();\n}\n// åˆ›å»ºä»¥dir2ä¸ºçˆ¶ç›®å½•,åä¸º\"test.txt\"çš„Fileå¯¹è±¡\nFile file = new File(dir2, \"test.txt\");\nif (!file.exists()) { // å¦‚æœè¿˜ä¸å­˜åœ¨ï¼Œå°±åˆ›å»ºä¸ºæ–‡ä»¶\n\tfile.createNewFile();\n}\n1.2 IOæµåŸç†åŠæµçš„åˆ†ç±»\nI/Oæ˜¯Input/Outputçš„ç¼©å†™ï¼Œ I/OæŠ€æœ¯æ˜¯éå¸¸å®ç”¨çš„æŠ€æœ¯ï¼Œç”¨äºå¤„ç†è®¾å¤‡ä¹‹é—´çš„æ•°æ®ä¼ è¾“ã€‚å¦‚è¯»/å†™æ–‡ä»¶ï¼Œç½‘ç»œé€šè®¯ç­‰ã€‚\nJavaç¨‹åºä¸­ï¼Œå¯¹äºæ•°æ®çš„è¾“å…¥/è¾“å‡ºæ“ä½œä»¥â€œæµ(stream)â€ çš„æ–¹å¼è¿›è¡Œã€‚\njava.ioåŒ…ä¸‹æä¾›äº†å„ç§â€œæµâ€ç±»å’Œæ¥å£ï¼Œç”¨ä»¥è·å–ä¸åŒç§ç±»çš„æ•°æ®ï¼Œå¹¶é€šè¿‡æ ‡å‡†çš„æ–¹æ³•è¾“å…¥æˆ–è¾“å‡ºæ•°æ®ã€‚\n\næµçš„åˆ†ç±»\næŒ‰æ“ä½œæ•°æ®å•ä½ä¸åŒåˆ†ä¸ºï¼šå­—èŠ‚æµ(8 bit)ï¼Œå­—ç¬¦æµ(16 bit)\næŒ‰æ•°æ®æµçš„æµå‘ä¸åŒåˆ†ä¸ºï¼šè¾“å…¥æµï¼Œè¾“å‡ºæµ\næŒ‰æµçš„è§’è‰²çš„ä¸åŒåˆ†ä¸ºï¼šèŠ‚ç‚¹æµï¼Œå¤„ç†æµ\n\n\n\n\n\næŠ½è±¡åŸºç±»\nå­—èŠ‚æµ\nå­—ç¬¦æµ\n\n\n\n\nè¾“å…¥æµ\nInputStream\nReader\n\n\nè¾“å‡ºæµ\nOutputStream\nWriter\n\n\n\n\nIO æµä½“ç³»\nèŠ‚ç‚¹æµå’Œå¤„ç†æµèŠ‚ç‚¹æµï¼šç›´æ¥ä»æ•°æ®æºæˆ–ç›®çš„åœ°è¯»å†™æ•°æ®ã€‚\nå¤„ç†æµï¼šä¸ç›´æ¥è¿æ¥åˆ°æ•°æ®æºæˆ–ç›®çš„åœ°ï¼Œè€Œæ˜¯â€œè¿æ¥â€åœ¨å·²å­˜åœ¨çš„æµï¼ˆèŠ‚ç‚¹æµæˆ–å¤„ç†æµï¼‰ä¹‹ä¸Šï¼Œé€šè¿‡å¯¹æ•°æ®çš„å¤„ç†ä¸ºç¨‹åºæä¾›æ›´ä¸ºå¼ºå¤§çš„è¯»å†™åŠŸèƒ½ã€‚\nInputStream &amp; Reader\nInputStream å’Œ Reader æ˜¯æ‰€æœ‰è¾“å…¥æµçš„åŸºç±»ã€‚\n\nInputStreamï¼ˆå…¸å‹å®ç°ï¼šFileInputStreamï¼‰ ïƒ˜int read()int read(byte[] b)int read(byte[] b, int off, int len) \n\nReaderï¼ˆå…¸å‹å®ç°ï¼šFileReaderï¼‰ \nint read()int read(char [] c)\nint read(char [] c, int off, int len) \n\nç¨‹åºä¸­æ‰“å¼€çš„æ–‡ä»¶ IO èµ„æºä¸å±äºå†…å­˜é‡Œçš„èµ„æºï¼Œåƒåœ¾å›æ”¶æœºåˆ¶æ— æ³•å›æ”¶è¯¥èµ„æºï¼Œæ‰€ä»¥åº”è¯¥æ˜¾å¼å…³é—­æ–‡ä»¶ IO èµ„æºã€‚ \n\nFileInputStream ä»æ–‡ä»¶ç³»ç»Ÿä¸­çš„æŸä¸ªæ–‡ä»¶ä¸­è·å¾—è¾“å…¥å­—èŠ‚ã€‚FileInputStream ç”¨äºè¯»å–éæ–‡æœ¬æ•°æ®ä¹‹ç±»çš„åŸå§‹å­—èŠ‚æµã€‚è¦è¯»å–å­—ç¬¦æµï¼Œéœ€è¦ä½¿ç”¨ FileReader\n\nInputStream\nint read()ä»è¾“å…¥æµä¸­è¯»å–æ•°æ®çš„ä¸‹ä¸€ä¸ªå­—èŠ‚ã€‚è¿”å› 0 åˆ° 255 èŒƒå›´å†…çš„ int å­—èŠ‚å€¼ã€‚å¦‚æœå› ä¸ºå·²ç»åˆ°è¾¾æµæœ«å°¾è€Œæ²¡æœ‰å¯ç”¨çš„å­—èŠ‚ï¼Œåˆ™è¿”å›å€¼ -1ã€‚ \nint read(byte[] b)ä»æ­¤è¾“å…¥æµä¸­å°†æœ€å¤š b.length ä¸ªå­—èŠ‚çš„æ•°æ®è¯»å…¥ä¸€ä¸ª byte æ•°ç»„ä¸­ã€‚å¦‚æœå› ä¸ºå·²ç»åˆ°è¾¾æµæœ«å°¾è€Œæ²¡æœ‰å¯ç”¨çš„å­—èŠ‚ï¼Œåˆ™è¿”å›å€¼ -1ã€‚å¦åˆ™ä»¥æ•´æ•°å½¢å¼è¿”å›å®é™…è¯»å–çš„å­—èŠ‚æ•°ã€‚ \nint read(byte[] b, int off,int len)å°†è¾“å…¥æµä¸­æœ€å¤š len ä¸ªæ•°æ®å­—èŠ‚è¯»å…¥ byte æ•°ç»„ã€‚å°è¯•è¯»å– len ä¸ªå­—èŠ‚ï¼Œä½†è¯»å–çš„å­—èŠ‚ä¹Ÿå¯èƒ½å°äºè¯¥å€¼ã€‚ä»¥æ•´æ•°å½¢å¼è¿”å›å®é™…è¯»å–çš„å­—èŠ‚æ•°ã€‚å¦‚æœå› ä¸ºæµä½äºæ–‡ä»¶æœ«å°¾è€Œæ²¡æœ‰å¯ç”¨çš„å­—èŠ‚ï¼Œåˆ™è¿”å›å€¼ -1ã€‚ \npublic void close() throws IOExceptionå…³é—­æ­¤è¾“å…¥æµå¹¶é‡Šæ”¾ä¸è¯¥æµå…³è”çš„æ‰€æœ‰ç³»ç»Ÿèµ„æºã€‚\n\nReader\nint read()è¯»å–å•ä¸ªå­—ç¬¦ã€‚ä½œä¸ºæ•´æ•°è¯»å–çš„å­—ç¬¦ï¼ŒèŒƒå›´åœ¨ 0 åˆ° 65535 ä¹‹é—´ (0x00-0xffff)ï¼ˆ2ä¸ªå­—èŠ‚çš„Unicodeç ï¼‰ï¼Œå¦‚æœå·²åˆ°è¾¾æµçš„æœ«å°¾ï¼Œåˆ™è¿”å› -1 ï¬ int read(char[] cbuf)å°†å­—ç¬¦è¯»å…¥æ•°ç»„ã€‚å¦‚æœå·²åˆ°è¾¾æµçš„æœ«å°¾ï¼Œåˆ™è¿”å› -1ã€‚å¦åˆ™è¿”å›æœ¬æ¬¡è¯»å–çš„å­—ç¬¦æ•°ã€‚ \nint read(char[] cbuf,int off,int len)å°†å­—ç¬¦è¯»å…¥æ•°ç»„çš„æŸä¸€éƒ¨åˆ†ã€‚å­˜åˆ°æ•°ç»„cbufä¸­ï¼Œä»offå¤„å¼€å§‹å­˜å‚¨ï¼Œæœ€å¤šè¯»lenä¸ªå­—ç¬¦ã€‚å¦‚æœå·²åˆ°è¾¾æµçš„æœ«å°¾ï¼Œåˆ™è¿”å› -1ã€‚å¦åˆ™è¿”å›æœ¬æ¬¡è¯»å–çš„å­—ç¬¦æ•°ã€‚ \npublic void close() throws IOExceptionå…³é—­æ­¤è¾“å…¥æµå¹¶é‡Šæ”¾ä¸è¯¥æµå…³è”çš„æ‰€æœ‰ç³»ç»Ÿèµ„æºã€‚\n\nOutputStream &amp; Writer\nOutputStream å’Œ Writer ä¹Ÿéå¸¸ç›¸ä¼¼ï¼švoid write(int b/int c);void write(byte[] b/char[] cbuf);void write(byte[] b/char[] buff, int off, int len);void flush();void close(); éœ€è¦å…ˆåˆ·æ–°ï¼Œå†å…³é—­æ­¤æµ\nå› ä¸ºå­—ç¬¦æµç›´æ¥ä»¥å­—ç¬¦ä½œä¸ºæ“ä½œå•ä½ï¼Œæ‰€ä»¥ Writer å¯ä»¥ç”¨å­—ç¬¦ä¸²æ¥æ›¿æ¢å­—ç¬¦æ•°ç»„ï¼Œå³ä»¥ String å¯¹è±¡ä½œä¸ºå‚æ•°ïƒ˜ void write(String str);ïƒ˜ void write(String str, int off, int len);\nFileOutputStream ä»æ–‡ä»¶ç³»ç»Ÿä¸­çš„æŸä¸ªæ–‡ä»¶ä¸­è·å¾—è¾“å‡ºå­—èŠ‚ã€‚FileOutputStream ç”¨äºå†™å‡ºéæ–‡æœ¬æ•°æ®ä¹‹ç±»çš„åŸå§‹å­—èŠ‚æµã€‚è¦å†™å‡ºå­—ç¬¦æµï¼Œéœ€è¦ä½¿ç”¨ FileWriter\n\nOutputStream\nvoid write(int b)å°†æŒ‡å®šçš„å­—èŠ‚å†™å…¥æ­¤è¾“å‡ºæµã€‚write çš„å¸¸è§„åå®šæ˜¯ï¼šå‘è¾“å‡ºæµå†™å…¥ä¸€ä¸ªå­—èŠ‚ã€‚è¦å†™å…¥çš„å­—èŠ‚æ˜¯å‚æ•° b çš„å…«ä¸ªä½ä½ã€‚b çš„ 24 ä¸ªé«˜ä½å°†è¢«å¿½ç•¥ã€‚ å³å†™å…¥0~255èŒƒå›´çš„ã€‚ \nvoid write(byte[] b)å°† b.length ä¸ªå­—èŠ‚ä»æŒ‡å®šçš„ byte æ•°ç»„å†™å…¥æ­¤è¾“å‡ºæµã€‚write(b) çš„å¸¸è§„åå®šæ˜¯ï¼šåº”è¯¥ä¸è°ƒç”¨ write(b, 0, b.length) çš„æ•ˆæœå®Œå…¨ç›¸åŒã€‚ \nvoid write(byte[] b,int off,int len)å°†æŒ‡å®š byte æ•°ç»„ä¸­ä»åç§»é‡ off å¼€å§‹çš„ len ä¸ªå­—èŠ‚å†™å…¥æ­¤è¾“å‡ºæµã€‚ \npublic void flush()throws IOExceptionåˆ·æ–°æ­¤è¾“å‡ºæµå¹¶å¼ºåˆ¶å†™å‡ºæ‰€æœ‰ç¼“å†²çš„è¾“å‡ºå­—èŠ‚ï¼Œè°ƒç”¨æ­¤æ–¹æ³•æŒ‡ç¤ºåº”å°†è¿™äº›å­—èŠ‚ç«‹å³å†™å…¥å®ƒä»¬é¢„æœŸçš„ç›®æ ‡ã€‚ \npublic void close() throws IOExceptionå…³é—­æ­¤è¾“å‡ºæµå¹¶é‡Šæ”¾ä¸è¯¥æµå…³è”çš„æ‰€æœ‰ç³»ç»Ÿèµ„æºã€‚\n\nWriter\nvoid write(int c)å†™å…¥å•ä¸ªå­—ç¬¦ã€‚è¦å†™å…¥çš„å­—ç¬¦åŒ…å«åœ¨ç»™å®šæ•´æ•°å€¼çš„ 16 ä¸ªä½ä½ä¸­ï¼Œ16 é«˜ä½è¢«å¿½ç•¥ã€‚ å³å†™å…¥0 åˆ° 65535 ä¹‹é—´çš„Unicodeç ã€‚ ï¬ void write(char[] cbuf)å†™å…¥å­—ç¬¦æ•°ç»„ã€‚ \nvoid write(char[] cbuf,int off,int len)å†™å…¥å­—ç¬¦æ•°ç»„çš„æŸä¸€éƒ¨åˆ†ã€‚ä»offå¼€å§‹ï¼Œå†™å…¥lenä¸ªå­—ç¬¦\nvoid write(String str)å†™å…¥å­—ç¬¦ä¸²ã€‚ \nvoid write(String str,int off,int len)å†™å…¥å­—ç¬¦ä¸²çš„æŸä¸€éƒ¨åˆ†ã€‚ \nvoid flush()åˆ·æ–°è¯¥æµçš„ç¼“å†²ï¼Œåˆ™ç«‹å³å°†å®ƒä»¬å†™å…¥é¢„æœŸç›®æ ‡ã€‚ \npublic void close() throws IOExceptionå…³é—­æ­¤è¾“å‡ºæµå¹¶é‡Šæ”¾ä¸è¯¥æµå…³è”çš„æ‰€æœ‰ç³»ç»Ÿèµ„æºã€‚\n\n1.3 èŠ‚ç‚¹æµ(æˆ–æ–‡ä»¶æµ)è¯»å–æ–‡ä»¶\nå»ºç«‹ä¸€ä¸ªæµå¯¹è±¡ï¼Œå°†å·²å­˜åœ¨çš„ä¸€ä¸ªæ–‡ä»¶åŠ è½½è¿›æµã€‚FileReader fr = new FileReader(new File(â€œTest.txtâ€));\nåˆ›å»ºä¸€ä¸ªä¸´æ—¶å­˜æ”¾æ•°æ®çš„æ•°ç»„ã€‚char[] ch = new char[1024];\nè°ƒç”¨æµå¯¹è±¡çš„è¯»å–æ–¹æ³•å°†æµä¸­çš„æ•°æ®è¯»å…¥åˆ°æ•°ç»„ä¸­ã€‚fr.read(ch);\n\nå…³é—­èµ„æºã€‚fr.close();\n\n\nFileReader fr = null;\ntry {\n    fr = new FileReader(new File(\"c:\\\\test.txt\"));\n    char[] buf = new char[1024];\n    int len;\n    while ((len = fr.read(buf)) != -1) {\n    \tSystem.out.print(new String(buf, 0, len));\n    }\n} catch (IOException e) {\n\tSystem.out.println(\"read-Exception :\" + e.getMessage());\n} finally {\n    if (fr != null) {\n        try {\n            fr.close();\n        } catch (IOException e) {\n            System.out.println(\"close-Exception :\" + e.getMessage());\n        } \n    } \n}\nå†™å…¥æ–‡ä»¶\nåˆ›å»ºæµå¯¹è±¡ï¼Œå»ºç«‹æ•°æ®å­˜æ”¾æ–‡ä»¶FileWriter fw = new FileWriter(new File(â€œTest.txtâ€));\nè°ƒç”¨æµå¯¹è±¡çš„å†™å…¥æ–¹æ³•ï¼Œå°†æ•°æ®å†™å…¥æµfw.write(â€œatguigu-songhongkangâ€);\nå…³é—­æµèµ„æºï¼Œå¹¶å°†æµä¸­çš„æ•°æ®æ¸…ç©ºåˆ°æ–‡ä»¶ä¸­ã€‚fw.close();\n\nFileWriter fw = null;\ntry {\n\tfw = new FileWriter(new File(\"Test.txt\"));\n\tfw.write(\"atguigu-songhongkang\");\n} catch (IOException e) {\n\te.printStackTrace();\n} finally {\n    if (fw != null)\n    \ttry {\n    \tfw.close();\n    \t} catch (IOException e) {\n    \te.printStackTrace();\n    \t} \n}\næ³¨æ„ç‚¹\n\nå®šä¹‰æ–‡ä»¶è·¯å¾„æ—¶ï¼Œæ³¨æ„ï¼šå¯ä»¥ç”¨â€œ/â€æˆ–è€…â€œ\\â€ã€‚ \nåœ¨å†™å…¥ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼Œå¦‚æœä½¿ç”¨æ„é€ å™¨FileOutputStream(file)ï¼Œåˆ™ç›®å½•ä¸‹æœ‰åŒåæ–‡ä»¶å°†è¢«è¦†ç›–ã€‚\nå¦‚æœä½¿ç”¨æ„é€ å™¨FileOutputStream(file,true)ï¼Œåˆ™ç›®å½•ä¸‹çš„åŒåæ–‡ä»¶ä¸ä¼šè¢«è¦†ç›–ï¼Œåœ¨æ–‡ä»¶å†…å®¹æœ«å°¾è¿½åŠ å†…å®¹ã€‚\nåœ¨è¯»å–æ–‡ä»¶æ—¶ï¼Œå¿…é¡»ä¿è¯è¯¥æ–‡ä»¶å·²å­˜åœ¨ï¼Œå¦åˆ™æŠ¥å¼‚å¸¸ã€‚ ï¬ å­—èŠ‚æµæ“ä½œå­—èŠ‚ï¼Œæ¯”å¦‚ï¼š.mp3ï¼Œ.aviï¼Œ.rmvbï¼Œmp4ï¼Œ.jpgï¼Œ.docï¼Œ.ppt\nå­—ç¬¦æµæ“ä½œå­—ç¬¦ï¼Œåªèƒ½æ“ä½œæ™®é€šæ–‡æœ¬æ–‡ä»¶ã€‚æœ€å¸¸è§çš„æ–‡æœ¬æ–‡ä»¶ï¼š.txtï¼Œ.javaï¼Œ.cï¼Œ.cpp ç­‰è¯­è¨€çš„æºä»£ç ã€‚å°¤å…¶æ³¨æ„.doc,excel,pptè¿™äº›ä¸æ˜¯æ–‡æœ¬æ–‡ä»¶ã€‚\n\n1.4 ç¼“å†²æµ\nä¸ºäº†æé«˜æ•°æ®è¯»å†™çš„é€Ÿåº¦ï¼ŒJava APIæä¾›äº†å¸¦ç¼“å†²åŠŸèƒ½çš„æµç±»ï¼Œåœ¨ä½¿ç”¨è¿™äº›æµç±»æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªå†…éƒ¨ç¼“å†²åŒºæ•°ç»„ï¼Œç¼ºçœä½¿ç”¨8192ä¸ªå­—èŠ‚(8Kb)çš„ç¼“å†²åŒºã€‚ \n\nç¼“å†²æµè¦â€œå¥—æ¥â€åœ¨ç›¸åº”çš„èŠ‚ç‚¹æµä¹‹ä¸Šï¼Œæ ¹æ®æ•°æ®æ“ä½œå•ä½å¯ä»¥æŠŠç¼“å†²æµåˆ†ä¸ºï¼š\nBufferedInputStream å’Œ BufferedOutputStream\nBufferedReader å’Œ BufferedWriter \n\n\nBufferedReader br = null;\nBufferedWriter bw = null;\ntry {\n    // åˆ›å»ºç¼“å†²æµå¯¹è±¡ï¼šå®ƒæ˜¯å¤„ç†æµï¼Œæ˜¯å¯¹èŠ‚ç‚¹æµçš„åŒ…è£…\n    br = new BufferedReader(new FileReader(\"d:\\\\IOTest\\\\source.txt\"));\n    bw = new BufferedWriter(new FileWriter(\"d:\\\\IOTest\\\\dest.txt\"));\n    String str;\n    while ((str = br.readLine()) != null) { // ä¸€æ¬¡è¯»å–å­—ç¬¦æ–‡æœ¬æ–‡ä»¶çš„ä¸€è¡Œå­—ç¬¦\n    \tbw.write(str); // ä¸€æ¬¡å†™å…¥ä¸€è¡Œå­—ç¬¦ä¸²\n    \tbw.newLine(); // å†™å…¥è¡Œåˆ†éš”ç¬¦\n    }\n    bw.flush(); // åˆ·æ–°ç¼“å†²åŒº\n} catch (IOException e) {\n\te.printStackTrace();\n} finally {\n    // å…³é—­IOæµå¯¹è±¡\n    try {\n        if (bw != null) {\n        \tbw.close(); // å…³é—­è¿‡æ»¤æµæ—¶,ä¼šè‡ªåŠ¨å…³é—­å®ƒæ‰€åŒ…è£…çš„åº•å±‚èŠ‚ç‚¹æµ\n        }\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n    try {\n        if (br != null) {\n        \tbr.close();\n        }\n    } catch (IOException e) {\n    \te.printStackTrace();\n    } \n}\n1.5 è½¬æ¢æµ\nè½¬æ¢æµæä¾›äº†åœ¨å­—èŠ‚æµå’Œå­—ç¬¦æµä¹‹é—´çš„è½¬æ¢\nJava APIæä¾›äº†ä¸¤ä¸ªè½¬æ¢æµï¼šInputStreamReaderï¼šå°†InputStreamè½¬æ¢ä¸ºReaderOutputStreamWriterï¼šå°†Writerè½¬æ¢ä¸ºOutputStream\nå­—èŠ‚æµä¸­çš„æ•°æ®éƒ½æ˜¯å­—ç¬¦æ—¶ï¼Œè½¬æˆå­—ç¬¦æµæ“ä½œæ›´é«˜æ•ˆã€‚ \nå¾ˆå¤šæ—¶å€™æˆ‘ä»¬ä½¿ç”¨è½¬æ¢æµæ¥å¤„ç†æ–‡ä»¶ä¹±ç é—®é¢˜ã€‚å®ç°ç¼–ç å’Œè§£ç çš„åŠŸèƒ½ã€‚\n\nInputStreamReader\nå®ç°å°†å­—èŠ‚çš„è¾“å…¥æµæŒ‰æŒ‡å®šå­—ç¬¦é›†è½¬æ¢ä¸ºå­—ç¬¦çš„è¾“å…¥æµã€‚\néœ€è¦å’ŒInputStreamâ€œå¥—æ¥â€ã€‚\næ„é€ å™¨public InputStreamReader(InputStream in)public InputSreamReader(InputStream in,String charsetName)å¦‚ï¼š Reader isr = new InputStreamReader(System.in,â€gbkâ€);\n\nOutputStreamWriter\n\nå®ç°å°†å­—ç¬¦çš„è¾“å‡ºæµæŒ‰æŒ‡å®šå­—ç¬¦é›†è½¬æ¢ä¸ºå­—èŠ‚çš„è¾“å‡ºæµã€‚\n\néœ€è¦å’ŒOutputStreamâ€œå¥—æ¥â€ã€‚\n\næ„é€ å™¨ \n\n\nâ€‹         public OutputStreamWriter(OutputStream out)\nâ€‹         public OutputSreamWriter(OutputStream out,String charsetName)\n\npublic void testMyInput() throws Exception {\n    FileInputStream fis = new FileInputStream(\"dbcp.txt\");\n    FileOutputStream fos = new FileOutputStream(\"dbcp5.txt\");\n    InputStreamReader isr = new InputStreamReader(fis, \"GBK\");\n    OutputStreamWriter osw = new OutputStreamWriter(fos, \"GBK\");\n    BufferedReader br = new BufferedReader(isr);\n    BufferedWriter bw = new BufferedWriter(osw);\n    String str = null;\n    while ((str = br.readLine()) != null) {\n        bw.write(str);\n        bw.newLine();\n        bw.flush();\n    }\n    bw.close();\n    br.close();\n}\nè¡¥å……ï¼šå­—ç¬¦ç¼–ç \n\nç¼–ç è¡¨çš„ç”±æ¥è®¡ç®—æœºåªèƒ½è¯†åˆ«äºŒè¿›åˆ¶æ•°æ®ï¼Œæ—©æœŸç”±æ¥æ˜¯ç”µä¿¡å·ã€‚ä¸ºäº†æ–¹ä¾¿åº”ç”¨è®¡ç®—æœºï¼Œè®©å®ƒå¯ä»¥è¯†åˆ«å„ä¸ªå›½å®¶çš„æ–‡å­—ã€‚å°±å°†å„ä¸ªå›½å®¶çš„æ–‡å­—ç”¨æ•°å­—æ¥è¡¨ç¤ºï¼Œå¹¶ä¸€ä¸€å¯¹åº”ï¼Œå½¢æˆä¸€å¼ è¡¨ã€‚è¿™å°±æ˜¯ç¼–ç è¡¨ã€‚\nå¸¸è§çš„ç¼–ç è¡¨\n\nASCIIï¼šç¾å›½æ ‡å‡†ä¿¡æ¯äº¤æ¢ç ã€‚ç”¨ä¸€ä¸ªå­—èŠ‚çš„7ä½å¯ä»¥è¡¨ç¤ºã€‚\nISO8859-1ï¼šæ‹‰ä¸ç è¡¨ã€‚æ¬§æ´²ç è¡¨ç”¨ä¸€ä¸ªå­—èŠ‚çš„8ä½è¡¨ç¤ºã€‚\nGB2312ï¼šä¸­å›½çš„ä¸­æ–‡ç¼–ç è¡¨ã€‚æœ€å¤šä¸¤ä¸ªå­—èŠ‚ç¼–ç æ‰€æœ‰å­—ç¬¦\nGBKï¼šä¸­å›½çš„ä¸­æ–‡ç¼–ç è¡¨å‡çº§ï¼Œèåˆäº†æ›´å¤šçš„ä¸­æ–‡æ–‡å­—ç¬¦å·ã€‚æœ€å¤šä¸¤ä¸ªå­—èŠ‚ç¼–ç \nUnicodeï¼šå›½é™…æ ‡å‡†ç ï¼Œèåˆäº†ç›®å‰äººç±»ä½¿ç”¨çš„æ‰€æœ‰å­—ç¬¦ã€‚ä¸ºæ¯ä¸ªå­—ç¬¦åˆ†é…å”¯ä¸€çš„å­—ç¬¦ç ã€‚æ‰€æœ‰çš„æ–‡å­—éƒ½ç”¨ä¸¤ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºã€‚\nUTF-8ï¼šå˜é•¿çš„ç¼–ç æ–¹å¼ï¼Œå¯ç”¨1-4ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ã€‚\n\n\nUnicodeä¸å®Œç¾ï¼Œè¿™é‡Œå°±æœ‰ä¸‰ä¸ªé—®é¢˜ï¼Œä¸€ä¸ªæ˜¯ï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“ï¼Œè‹±æ–‡å­—æ¯åªç”¨ä¸€ä¸ªå­—èŠ‚è¡¨ç¤ºå°±å¤Ÿäº†ï¼Œç¬¬äºŒä¸ªé—®é¢˜æ˜¯å¦‚ä½•æ‰èƒ½åŒºåˆ«Unicodeå’ŒASCIIï¼Ÿè®¡ç®—æœºæ€ä¹ˆçŸ¥é“ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªç¬¦å·ï¼Œè€Œä¸æ˜¯åˆ†åˆ«è¡¨ç¤ºä¸¤ä¸ªç¬¦å·å‘¢ï¼Ÿç¬¬ä¸‰ä¸ªï¼Œå¦‚æœå’ŒGBKç­‰åŒå­—èŠ‚ç¼–ç æ–¹å¼ä¸€æ ·ï¼Œç”¨æœ€é«˜ä½æ˜¯1æˆ–0è¡¨ç¤ºä¸¤ä¸ªå­—èŠ‚å’Œä¸€ä¸ªå­—èŠ‚ï¼Œå°±å°‘äº†å¾ˆå¤šå€¼æ— æ³•ç”¨äºè¡¨ç¤ºå­—ç¬¦ï¼Œä¸å¤Ÿè¡¨ç¤ºæ‰€æœ‰å­—ç¬¦ã€‚Unicodeåœ¨å¾ˆé•¿ä¸€æ®µæ—¶é—´å†…æ— æ³•æ¨å¹¿ï¼Œç›´åˆ°äº’è”ç½‘çš„å‡ºç°ã€‚ \n\né¢å‘ä¼ è¾“çš„ä¼—å¤š UTFï¼ˆUCS Transfer Formatï¼‰æ ‡å‡†å‡ºç°äº†ï¼Œé¡¾åæ€ä¹‰ï¼ŒUTF- 8å°±æ˜¯æ¯æ¬¡8ä¸ªä½ä¼ è¾“æ•°æ®ï¼Œè€ŒUTF-16å°±æ˜¯æ¯æ¬¡16ä¸ªä½ã€‚è¿™æ˜¯ä¸ºä¼ è¾“è€Œè®¾è®¡çš„ç¼–ç ï¼Œå¹¶ä½¿ç¼–ç æ— å›½ç•Œï¼Œè¿™æ ·å°±å¯ä»¥æ˜¾ç¤ºå…¨ä¸–ç•Œä¸Šæ‰€æœ‰æ–‡åŒ–çš„å­—ç¬¦äº†ã€‚ \nUnicodeåªæ˜¯å®šä¹‰äº†ä¸€ä¸ªåºå¤§çš„ã€å…¨çƒé€šç”¨çš„å­—ç¬¦é›†ï¼Œå¹¶ä¸ºæ¯ä¸ªå­—ç¬¦è§„å®šäº†å”¯ä¸€ç¡®å®šçš„ç¼–å·ï¼Œå…·ä½“å­˜å‚¨æˆä»€ä¹ˆæ ·çš„å­—èŠ‚æµï¼Œå–å†³äºå­—ç¬¦ç¼–ç æ–¹æ¡ˆã€‚æ¨èçš„Unicodeç¼–ç æ˜¯UTF-8å’ŒUTF-16ã€‚\n\nç¼–ç ï¼šå­—ç¬¦ä¸²ïƒ å­—èŠ‚æ•°ç»„è§£ç ï¼šå­—èŠ‚æ•°ç»„ïƒ å­—ç¬¦ä¸²è½¬æ¢æµçš„ç¼–ç åº”ç”¨\n\nå¯ä»¥å°†å­—ç¬¦æŒ‰æŒ‡å®šç¼–ç æ ¼å¼å­˜å‚¨\nå¯ä»¥å¯¹æ–‡æœ¬æ•°æ®æŒ‰æŒ‡å®šç¼–ç æ ¼å¼æ¥è§£è¯»\næŒ‡å®šç¼–ç è¡¨çš„åŠ¨ä½œç”±æ„é€ å™¨å®Œæˆ\n\n1.6 æ ‡å‡†è¾“å…¥ã€è¾“å‡ºæµ\nSystem.inå’ŒSystem.outåˆ†åˆ«ä»£è¡¨äº†ç³»ç»Ÿæ ‡å‡†çš„è¾“å…¥å’Œè¾“å‡ºè®¾å¤‡\né»˜è®¤è¾“å…¥è®¾å¤‡æ˜¯ï¼šé”®ç›˜ï¼Œè¾“å‡ºè®¾å¤‡æ˜¯ï¼šæ˜¾ç¤ºå™¨\nSystem.inçš„ç±»å‹æ˜¯InputStream\nSystem.outçš„ç±»å‹æ˜¯PrintStreamï¼Œå…¶æ˜¯OutputStreamçš„å­ç±»FilterOutputStream çš„å­ç±»\né‡å®šå‘ï¼šé€šè¿‡Systemç±»çš„setInï¼ŒsetOutæ–¹æ³•å¯¹é»˜è®¤è®¾å¤‡è¿›è¡Œæ”¹å˜ã€‚public static void setIn(InputStream in)public static void setOut(PrintStream out)\n\nä¾‹ é¢˜\nâ€‹        ä»é”®ç›˜è¾“å…¥å­—ç¬¦ä¸²ï¼Œè¦æ±‚å°†è¯»å–åˆ°çš„æ•´è¡Œå­—ç¬¦ä¸²è½¬æˆå¤§å†™è¾“å‡ºã€‚ç„¶åç»§ç»­è¿›è¡Œè¾“å…¥æ“ä½œï¼Œç›´è‡³å½“è¾“å…¥â€œeâ€æˆ–è€…â€œexitâ€æ—¶ï¼Œé€€å‡ºç¨‹åºã€‚\nSystem.out.println(\"è¯·è¾“å…¥ä¿¡æ¯(é€€å‡ºè¾“å…¥eæˆ–exit):\");\n// æŠŠ\"æ ‡å‡†\"è¾“å…¥æµ(é”®ç›˜è¾“å…¥)è¿™ä¸ªå­—èŠ‚æµåŒ…è£…æˆå­—ç¬¦æµ,å†åŒ…è£…æˆç¼“å†²æµ\nBufferedReader br = new BufferedReader(new InputStreamReader(System.in));\nString s = null;\ntry {\n    while ((s = br.readLine()) != null) { // è¯»å–ç”¨æˆ·è¾“å…¥çš„ä¸€è¡Œæ•°æ® --&gt; é˜»å¡ç¨‹åº\n        if (\"e\".equalsIgnoreCase(s) || \"exit\".equalsIgnoreCase(s)) {\n            System.out.println(\"å®‰å…¨é€€å‡º!!\");\n            break; \n        }\n        // å°†è¯»å–åˆ°çš„æ•´è¡Œå­—ç¬¦ä¸²è½¬æˆå¤§å†™è¾“å‡º\n        System.out.println(\"--&gt;:\" + s.toUpperCase());\n        System.out.println(\"ç»§ç»­è¾“å…¥ä¿¡æ¯\");\n    }\n} catch (IOException e) {\n\te.printStackTrace();\n} finally {\n    try {\n        if (br != null) {\n            br.close(); // å…³é—­è¿‡æ»¤æµæ—¶,ä¼šè‡ªåŠ¨å…³é—­å®ƒåŒ…è£…çš„åº•å±‚èŠ‚ç‚¹æµ\n        }\n    } catch (IOException e) {\n    \te.printStackTrace();\n    } \n}\n1.7 æ‰“å°æµ\nå®ç°å°†åŸºæœ¬æ•°æ®ç±»å‹çš„æ•°æ®æ ¼å¼è½¬åŒ–ä¸ºå­—ç¬¦ä¸²è¾“å‡º\n\næ‰“å°æµï¼šPrintStreamå’ŒPrintWriteræä¾›äº†ä¸€ç³»åˆ—é‡è½½çš„print()å’Œprintln()æ–¹æ³•ï¼Œç”¨äºå¤šç§æ•°æ®ç±»å‹çš„è¾“å‡ºPrintStreamå’ŒPrintWriterçš„è¾“å‡ºä¸ä¼šæŠ›å‡ºIOExceptionå¼‚å¸¸PrintStreamå’ŒPrintWriteræœ‰è‡ªåŠ¨flushåŠŸèƒ½PrintStream æ‰“å°çš„æ‰€æœ‰å­—ç¬¦éƒ½ä½¿ç”¨å¹³å°çš„é»˜è®¤å­—ç¬¦ç¼–ç è½¬æ¢ä¸ºå­—èŠ‚ã€‚åœ¨éœ€è¦å†™å…¥å­—ç¬¦è€Œä¸æ˜¯å†™å…¥å­—èŠ‚çš„æƒ…å†µä¸‹ï¼Œåº”è¯¥ä½¿ç”¨ PrintWriter ç±»ã€‚ \nSystem.outè¿”å›çš„æ˜¯PrintStreamçš„å®ä¾‹\n\n\nPrintStream ps = null;\ntry {\n    FileOutputStream fos = new FileOutputStream(new File(\"D:\\\\IO\\\\text.txt\"));\n    // åˆ›å»ºæ‰“å°è¾“å‡ºæµ,è®¾ç½®ä¸ºè‡ªåŠ¨åˆ·æ–°æ¨¡å¼(å†™å…¥æ¢è¡Œç¬¦æˆ–å­—èŠ‚ '\\n' æ—¶éƒ½ä¼šåˆ·æ–°è¾“å‡ºç¼“å†²åŒº)\n    ps = new PrintStream(fos, true);\n    if (ps != null) {// æŠŠæ ‡å‡†è¾“å‡ºæµ(æ§åˆ¶å°è¾“å‡º)æ”¹æˆæ–‡ä»¶\n    \tSystem.setOut(ps);\n    }\n    for (int i = 0; i &lt;= 255; i++) { // è¾“å‡ºASCIIå­—ç¬¦\n        System.out.print((char) i);\n        if (i % 50 == 0) { // æ¯50ä¸ªæ•°æ®ä¸€è¡Œ\n        \tSystem.out.println(); // æ¢è¡Œ\n        } \n    }\n} catch (FileNotFoundException e) {\n\te.printStackTrace();\n} finally {\n    if (ps != null) {\n    \tps.close();\n    } \n}\n1.8 æ•°æ®æµ\nä¸ºäº†æ–¹ä¾¿åœ°æ“ä½œJavaè¯­è¨€çš„åŸºæœ¬æ•°æ®ç±»å‹å’ŒStringçš„æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨æ•°æ®æµã€‚\næ•°æ®æµæœ‰ä¸¤ä¸ªç±»ï¼š(ç”¨äºè¯»å–å’Œå†™å‡ºåŸºæœ¬æ•°æ®ç±»å‹ã€Stringç±»çš„æ•°æ®ï¼‰DataInputStream å’Œ DataOutputStreamåˆ†åˆ«â€œå¥—æ¥â€åœ¨ InputStream å’Œ OutputStream å­ç±»çš„æµä¸Š \nDataInputStreamä¸­çš„æ–¹æ³•\n\n\nboolean readBoolean()\nbyte readByte()\nchar readChar() \nfloat readFloat()\ndouble readDouble() \nshort readShort()\nlong readLong() \nint readInt()\nString readUTF() \nvoid readFully(byte[] b)\n\n\nDataOutputStreamä¸­çš„æ–¹æ³•\nå°†ä¸Šè¿°çš„æ–¹æ³•çš„readæ”¹ä¸ºç›¸åº”çš„writeå³å¯ã€‚\n\nDataOutputStream dos = null;\ntry { // åˆ›å»ºè¿æ¥åˆ°æŒ‡å®šæ–‡ä»¶çš„æ•°æ®è¾“å‡ºæµå¯¹è±¡\n    dos = new DataOutputStream(new FileOutputStream(\"destData.dat\"));\n    dos.writeUTF(\"æˆ‘çˆ±åŒ—äº¬å¤©å®‰é—¨\"); // å†™UTFå­—ç¬¦ä¸²\n    dos.writeBoolean(false); // å†™å…¥å¸ƒå°”å€¼\n    dos.writeLong(1234567890L); // å†™å…¥é•¿æ•´æ•°\n    System.out.println(\"å†™æ–‡ä»¶æˆåŠŸ!\");\n} catch (IOException e) {\n\te.printStackTrace();\n} finally { // å…³é—­æµå¯¹è±¡\n    try {\n        if (dos != null) {\n            // å…³é—­è¿‡æ»¤æµæ—¶,ä¼šè‡ªåŠ¨å…³é—­å®ƒåŒ…è£…çš„åº•å±‚èŠ‚ç‚¹æµ\n            dos.close();\n        }\n    } catch (IOException e) {\n    \te.printStackTrace();\n    } \n}\nDataInputStream dis = null;\ntry {\n    dis = new DataInputStream(new FileInputStream(\"destData.dat\"));\n    String info = dis.readUTF();\n    boolean flag = dis.readBoolean();\n    long time = dis.readLong();\n    System.out.println(info);\n    System.out.println(flag);\n    System.out.println(time);\n} catch (Exception e) {\n\te.printStackTrace();\n} finally {\n    if (dis != null) {\n        try {\n        \tdis.close();\n        } catch (IOException e) {\n        \te.printStackTrace();\n        } \n    } \n}\n1.9 å¯¹è±¡æµObjectInputStreamå’ŒOjbectOutputSteam\nç”¨äºå­˜å‚¨å’Œè¯»å–åŸºæœ¬æ•°æ®ç±»å‹æ•°æ®æˆ–å¯¹è±¡çš„å¤„ç†æµã€‚å®ƒçš„å¼ºå¤§ä¹‹å¤„å°±æ˜¯å¯ä»¥æŠŠJavaä¸­çš„å¯¹è±¡å†™å…¥åˆ°æ•°æ®æºä¸­ï¼Œä¹Ÿèƒ½æŠŠå¯¹è±¡ä»æ•°æ®æºä¸­è¿˜åŸå›æ¥ã€‚\nåºåˆ—åŒ–ï¼šç”¨ObjectOutputStreamç±»ä¿å­˜åŸºæœ¬ç±»å‹æ•°æ®æˆ–å¯¹è±¡çš„æœºåˆ¶\nååºåˆ—åŒ–ï¼šç”¨ObjectInputStreamç±»è¯»å–åŸºæœ¬ç±»å‹æ•°æ®æˆ–å¯¹è±¡çš„æœºåˆ¶\nObjectOutputStreamå’ŒObjectInputStreamä¸èƒ½åºåˆ—åŒ–staticå’Œtransientä¿®é¥°çš„æˆå‘˜å˜é‡\n\nå¯¹è±¡çš„åºåˆ—åŒ–\nå¯¹è±¡åºåˆ—åŒ–æœºåˆ¶å…è®¸æŠŠå†…å­˜ä¸­çš„Javaå¯¹è±¡è½¬æ¢æˆå¹³å°æ— å…³çš„äºŒè¿›åˆ¶æµï¼Œä»è€Œå…è®¸æŠŠè¿™ç§äºŒè¿›åˆ¶æµæŒä¹…åœ°ä¿å­˜åœ¨ç£ç›˜ä¸Šï¼Œæˆ–é€šè¿‡ç½‘ç»œå°†è¿™ç§äºŒè¿›åˆ¶æµä¼ è¾“åˆ°å¦ä¸€ä¸ªç½‘ç»œèŠ‚ç‚¹ã€‚//å½“å…¶å®ƒç¨‹åºè·å–äº†è¿™ç§äºŒè¿›åˆ¶æµï¼Œå°±å¯ä»¥æ¢å¤æˆåŸæ¥çš„Javaå¯¹è±¡\nåºåˆ—åŒ–çš„å¥½å¤„åœ¨äºå¯å°†ä»»ä½•å®ç°äº†Serializableæ¥å£çš„å¯¹è±¡è½¬åŒ–ä¸ºå­—èŠ‚æ•°æ®ï¼Œä½¿å…¶åœ¨ä¿å­˜å’Œä¼ è¾“æ—¶å¯è¢«è¿˜åŸ\nåºåˆ—åŒ–æ˜¯ RMIï¼ˆRemote Method Invoke â€“ è¿œç¨‹æ–¹æ³•è°ƒç”¨ï¼‰è¿‡ç¨‹çš„å‚æ•°å’Œè¿”å›å€¼éƒ½å¿…é¡»å®ç°çš„æœºåˆ¶ï¼Œè€Œ RMI æ˜¯ JavaEE çš„åŸºç¡€ã€‚å› æ­¤åºåˆ—åŒ–æœºåˆ¶æ˜¯JavaEE å¹³å°çš„åŸºç¡€\nå¦‚æœéœ€è¦è®©æŸä¸ªå¯¹è±¡æ”¯æŒåºåˆ—åŒ–æœºåˆ¶ï¼Œåˆ™å¿…é¡»è®©å¯¹è±¡æ‰€å±çš„ç±»åŠå…¶å±æ€§æ˜¯å¯åºåˆ—åŒ–çš„ï¼Œä¸ºäº†è®©æŸä¸ªç±»æ˜¯å¯åºåˆ—åŒ–çš„ï¼Œè¯¥ç±»å¿…é¡»å®ç°å¦‚ä¸‹ä¸¤ä¸ªæ¥å£ä¹‹ä¸€ã€‚å¦åˆ™ï¼Œä¼šæŠ›å‡ºNotSerializableExceptionå¼‚å¸¸SerializableExternalizable\nå‡¡æ˜¯å®ç°Serializableæ¥å£çš„ç±»éƒ½æœ‰ä¸€ä¸ªè¡¨ç¤ºåºåˆ—åŒ–ç‰ˆæœ¬æ ‡è¯†ç¬¦çš„é™æ€å˜é‡ï¼šprivate static final long serialVersionUID;serialVersionUIDç”¨æ¥è¡¨æ˜ç±»çš„ä¸åŒç‰ˆæœ¬é—´çš„å…¼å®¹æ€§ã€‚ç®€è¨€ä¹‹ï¼Œå…¶ç›®çš„æ˜¯ä»¥åºåˆ—åŒ–å¯¹è±¡\nè¿›è¡Œç‰ˆæœ¬æ§åˆ¶ï¼Œæœ‰å…³å„ç‰ˆæœ¬ååºåˆ—åŒ–æ—¶æ˜¯å¦å…¼å®¹ã€‚å¦‚æœç±»æ²¡æœ‰æ˜¾ç¤ºå®šä¹‰è¿™ä¸ªé™æ€å¸¸é‡ï¼Œå®ƒçš„å€¼æ˜¯Javaè¿è¡Œæ—¶ç¯å¢ƒæ ¹æ®ç±»çš„å†…éƒ¨ç»†èŠ‚è‡ªåŠ¨ç”Ÿæˆçš„ã€‚è‹¥ç±»çš„å®ä¾‹å˜é‡åšäº†ä¿®æ”¹ï¼ŒserialVersionUID å¯èƒ½å‘ç”Ÿå˜åŒ–ã€‚æ•…å»ºè®®ï¼Œæ˜¾å¼å£°æ˜ã€‚\nç®€å•æ¥è¯´ï¼ŒJavaçš„åºåˆ—åŒ–æœºåˆ¶æ˜¯é€šè¿‡åœ¨è¿è¡Œæ—¶åˆ¤æ–­ç±»çš„serialVersionUIDæ¥éªŒè¯ç‰ˆæœ¬ä¸€è‡´æ€§çš„ã€‚åœ¨è¿›è¡Œååºåˆ—åŒ–æ—¶ï¼ŒJVMä¼šæŠŠä¼ æ¥çš„å­—èŠ‚æµä¸­çš„serialVersionUIDä¸æœ¬åœ°ç›¸åº”å®ä½“ç±»çš„serialVersionUIDè¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœç›¸åŒå°±è®¤ä¸ºæ˜¯ä¸€è‡´çš„ï¼Œå¯ä»¥è¿›è¡Œååºåˆ—åŒ–ï¼Œå¦åˆ™å°±ä¼šå‡ºç°åºåˆ—åŒ–ç‰ˆæœ¬ä¸ä¸€è‡´çš„å¼‚å¸¸ã€‚(InvalidCastException)\n\nä½¿ç”¨å¯¹è±¡æµåºåˆ—åŒ–å¯¹è±¡\nè‹¥æŸä¸ªç±»å®ç°äº† Serializable æ¥å£ï¼Œè¯¥ç±»çš„å¯¹è±¡å°±æ˜¯å¯åºåˆ—åŒ–çš„ï¼šåˆ›å»ºä¸€ä¸ª ObjectOutputStreamè°ƒç”¨ ObjectOutputStream å¯¹è±¡çš„ writeObject(å¯¹è±¡) æ–¹æ³•è¾“å‡ºå¯åºåˆ—åŒ–å¯¹è±¡æ³¨æ„å†™å‡ºä¸€æ¬¡ï¼Œæ“ä½œflush()ä¸€æ¬¡\nååºåˆ—åŒ–åˆ›å»ºä¸€ä¸ª ObjectInputStreamè°ƒç”¨ readObject() æ–¹æ³•è¯»å–æµä¸­çš„å¯¹è±¡\nå¼ºè°ƒï¼šå¦‚æœæŸä¸ªç±»çš„å±æ€§ä¸æ˜¯åŸºæœ¬æ•°æ®ç±»å‹æˆ– String ç±»å‹ï¼Œè€Œæ˜¯å¦ä¸€ä¸ªå¼•ç”¨ç±»å‹ï¼Œé‚£ä¹ˆè¿™ä¸ªå¼•ç”¨ç±»å‹å¿…é¡»æ˜¯å¯åºåˆ—åŒ–çš„ï¼Œå¦åˆ™æ‹¥æœ‰è¯¥ç±»å‹çš„Field çš„ç±»ä¹Ÿä¸èƒ½åºåˆ—åŒ–\n\n//åºåˆ—åŒ–ï¼šå°†å¯¹è±¡å†™å…¥åˆ°ç£ç›˜æˆ–è€…è¿›è¡Œç½‘ç»œä¼ è¾“ã€‚\n//è¦æ±‚å¯¹è±¡å¿…é¡»å®ç°åºåˆ—åŒ–\nObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(â€œdata.txt\"));\nPerson p = new Person(\"éŸ©æ¢…æ¢…\", 18, \"ä¸­åå¤§è¡—\", new Pet());\noos.writeObject(p);\noos.flush();\noos.close();\n//ååºåˆ—åŒ–ï¼šå°†ç£ç›˜ä¸­çš„å¯¹è±¡æ•°æ®æºè¯»å‡ºã€‚\nObjectInputStream ois = new ObjectInputStream(new FileInputStream(â€œdata.txt\"));\nPerson p1 = (Person)ois.readObject();\nSystem.out.println(p1.toString());\nois.close();\nè°ˆè°ˆä½ å¯¹java.io.Serializableæ¥å£çš„ç†è§£ï¼Œæˆ‘ä»¬çŸ¥é“å®ƒç”¨äºåºåˆ—åŒ–ï¼Œæ˜¯ç©ºæ–¹æ³•æ¥å£ï¼Œè¿˜æœ‰å…¶å®ƒè®¤è¯†å—ï¼Ÿ\n\nå®ç°äº†Serializableæ¥å£çš„å¯¹è±¡ï¼Œå¯å°†å®ƒä»¬è½¬æ¢æˆä¸€ç³»åˆ—å­—èŠ‚ï¼Œå¹¶å¯åœ¨ä»¥åå®Œå…¨æ¢å¤å›åŸæ¥çš„æ ·å­ã€‚è¿™ä¸€è¿‡ç¨‹äº¦å¯é€šè¿‡ç½‘ç»œè¿›è¡Œã€‚è¿™æ„å‘³ç€åºåˆ—åŒ–æœºåˆ¶èƒ½è‡ªåŠ¨è¡¥å¿æ“ä½œç³»ç»Ÿé—´çš„å·®å¼‚ã€‚æ¢å¥è¯è¯´ï¼Œå¯ä»¥å…ˆåœ¨Windowsæœºå™¨ä¸Šåˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹å…¶åºåˆ—åŒ–ï¼Œç„¶åé€šè¿‡ç½‘ç»œå‘ç»™ä¸€å°Unixæœºå™¨ï¼Œç„¶ååœ¨é‚£é‡Œå‡†ç¡®æ— è¯¯åœ°é‡æ–°â€œè£…é…â€ã€‚ä¸å¿…å…³å¿ƒæ•°æ®åœ¨ä¸åŒæœºå™¨ä¸Šå¦‚ä½•è¡¨ç¤ºï¼Œä¹Ÿä¸å¿…å…³å¿ƒå­—èŠ‚çš„é¡ºåºæˆ–è€…å…¶ä»–ä»»ä½•ç»†èŠ‚ã€‚\nç”±äºå¤§éƒ¨åˆ†ä½œä¸ºå‚æ•°çš„ç±»å¦‚Stringã€Integerç­‰éƒ½å®ç°äº†java.io.Serializableçš„æ¥å£ï¼Œä¹Ÿå¯ä»¥åˆ©ç”¨å¤šæ€çš„æ€§è´¨ï¼Œä½œä¸ºå‚æ•°ä½¿æ¥å£æ›´çµæ´»ã€‚\n\n1.10 éšæœºå­˜å–æ–‡ä»¶æµRandomAccessFile ç±»\nRandomAccessFile å£°æ˜åœ¨java.ioåŒ…ä¸‹ï¼Œä½†ç›´æ¥ç»§æ‰¿äºjava.lang.Objectç±»ã€‚å¹¶ä¸”å®ƒå®ç°äº†DataInputã€DataOutputè¿™ä¸¤ä¸ªæ¥å£ï¼Œä¹Ÿå°±æ„å‘³ç€è¿™ä¸ªç±»æ—¢å¯ä»¥è¯»ä¹Ÿå¯ä»¥å†™ã€‚\nRandomAccessFile ç±»æ”¯æŒ â€œéšæœºè®¿é—®â€ çš„æ–¹å¼ï¼Œç¨‹åºå¯ä»¥ç›´æ¥è·³åˆ°æ–‡ä»¶çš„ä»»æ„åœ°æ–¹æ¥è¯»ã€å†™æ–‡ä»¶\næ”¯æŒåªè®¿é—®æ–‡ä»¶çš„éƒ¨åˆ†å†…å®¹\nå¯ä»¥å‘å·²å­˜åœ¨çš„æ–‡ä»¶åè¿½åŠ å†…å®¹\n\n\nRandomAccessFile å¯¹è±¡åŒ…å«ä¸€ä¸ªè®°å½•æŒ‡é’ˆï¼Œç”¨ä»¥æ ‡ç¤ºå½“å‰è¯»å†™å¤„çš„ä½ç½®ã€‚RandomAccessFile ç±»å¯¹è±¡å¯ä»¥è‡ªç”±ç§»åŠ¨è®°å½•æŒ‡é’ˆï¼š\nlong getFilePointer()ï¼šè·å–æ–‡ä»¶è®°å½•æŒ‡é’ˆçš„å½“å‰ä½ç½®\nvoid seek(long pos)ï¼šå°†æ–‡ä»¶è®°å½•æŒ‡é’ˆå®šä½åˆ° pos ä½ç½®\n\n\n\nRandomAccessFile ç±»\næ„é€ å™¨\npublic RandomAccessFile(File file, String mode) \npublic RandomAccessFile(String name, String mode) \n\n\nåˆ›å»º RandomAccessFile ç±»å®ä¾‹éœ€è¦æŒ‡å®šä¸€ä¸ªmode å‚æ•°ï¼Œè¯¥å‚æ•°æŒ‡å®š RandomAccessFile çš„è®¿é—®æ¨¡å¼ï¼š\nr: ä»¥åªè¯»æ–¹å¼æ‰“å¼€\nrwï¼šæ‰“å¼€ä»¥ä¾¿è¯»å–å’Œå†™å…¥\nrwd:æ‰“å¼€ä»¥ä¾¿è¯»å–å’Œå†™å…¥ï¼›åŒæ­¥æ–‡ä»¶å†…å®¹çš„æ›´æ–°\nrws:æ‰“å¼€ä»¥ä¾¿è¯»å–å’Œå†™å…¥ï¼›åŒæ­¥æ–‡ä»¶å†…å®¹å’Œå…ƒæ•°æ®çš„æ›´æ–°\n\n\nå¦‚æœæ¨¡å¼ä¸ºåªè¯»rã€‚åˆ™ä¸ä¼šåˆ›å»ºæ–‡ä»¶ï¼Œè€Œæ˜¯ä¼šå»è¯»å–ä¸€ä¸ªå·²ç»å­˜åœ¨çš„æ–‡ä»¶ï¼Œå¦‚æœè¯»å–çš„æ–‡ä»¶ä¸å­˜åœ¨åˆ™ä¼šå‡ºç°å¼‚å¸¸ã€‚ å¦‚æœæ¨¡å¼ä¸ºrwè¯»å†™ã€‚å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨åˆ™ä¼šå»åˆ›å»ºæ–‡ä»¶ï¼Œå¦‚æœå­˜åœ¨åˆ™ä¸ä¼šåˆ›å»ºã€‚\n\nâ€‹        æˆ‘ä»¬å¯ä»¥ç”¨RandomAccessFileè¿™ä¸ªç±»ï¼Œæ¥å®ç°ä¸€ä¸ªå¤šçº¿ç¨‹æ–­ç‚¹ä¸‹è½½çš„åŠŸèƒ½ï¼Œç”¨è¿‡ä¸‹è½½å·¥å…·çš„æœ‹å‹ä»¬éƒ½çŸ¥é“ï¼Œä¸‹è½½å‰éƒ½ä¼šå»ºç«‹ä¸¤ä¸ªä¸´æ—¶æ–‡ä»¶ï¼Œä¸€ä¸ªæ˜¯ä¸è¢«ä¸‹è½½æ–‡ä»¶å¤§å°ç›¸åŒçš„ç©ºæ–‡ä»¶ï¼Œå¦ä¸€ä¸ªæ˜¯è®°å½•æ–‡ä»¶æŒ‡é’ˆçš„ä½ç½®æ–‡ä»¶ï¼Œæ¯æ¬¡æš‚åœçš„æ—¶å€™ï¼Œéƒ½ä¼šä¿å­˜ä¸Šä¸€æ¬¡çš„æŒ‡é’ˆï¼Œç„¶åæ–­ç‚¹ä¸‹è½½çš„æ—¶å€™ï¼Œä¼šç»§ç»­ä»ä¸Šä¸€æ¬¡çš„åœ°æ–¹ä¸‹è½½ï¼Œä»è€Œå®ç°æ–­ç‚¹ä¸‹è½½æˆ–ä¸Šä¼ çš„åŠŸèƒ½ï¼Œæœ‰å…´è¶£çš„æœ‹å‹ä»¬å¯ä»¥è‡ªå·±å®ç°ä¸‹ã€‚\n//è¯»å–æ–‡ä»¶å†…å®¹\nRandomAccessFile raf = new RandomAccessFile(â€œtest.txtâ€, â€œrwâ€ï¼‰;\nraf.seek(5);\nbyte [] b = new byte[1024];\nint off = 0;\nint len = 5;\nraf.read(b, off, len);\nString str = new String(b, 0, len);\nSystem.out.println(str);\nraf.close();\n\n//å†™å…¥æ–‡ä»¶å†…å®¹\nRandomAccessFile raf = new RandomAccessFile(\"test.txt\", \"rw\");\nraf.seek(5);\n//å…ˆè¯»å‡ºæ¥\nString temp = raf.readLine();\nraf.seek(5);\nraf.write(\"xyz\".getBytes());\nraf.write(temp.getBytes());\nraf.close();  \n\nRandomAccessFile raf1 = new RandomAccessFile(\"hello.txt\", \"rw\");\nraf1.seek(5);\n//æ–¹å¼ä¸€ï¼š\n//StringBuilder info = new StringBuilder((int) file.length());\n//byte[] buffer = new byte[10];\n//int len;\n//while((len = raf1.read(buffer)) != -1){\n////info += new String(buffer,0,len);\n//info.append(new String(buffer,0,len));\n//}\n//æ–¹å¼äºŒï¼š\nByteArrayOutputStream baos = new ByteArrayOutputStream();\nbyte[] buffer = new byte[10];\nint len;\nwhile((len = raf1.read(buffer)) != -1){\nbaos.write(buffer, 0, len);\n}\nraf1.seek(5);\nraf1.write(\"xyz\".getBytes());\nraf1.write(baos.toString().getBytes());\nbaos.close();\nraf1.close();\næµçš„åŸºæœ¬åº”ç”¨å°èŠ‚\n\næµæ˜¯ç”¨æ¥å¤„ç†æ•°æ®çš„ã€‚\nå¤„ç†æ•°æ®æ—¶ï¼Œä¸€å®šè¦å…ˆæ˜ç¡®æ•°æ®æºï¼Œä¸æ•°æ®ç›®çš„åœ°\næ•°æ®æºå¯ä»¥æ˜¯æ–‡ä»¶ï¼Œå¯ä»¥æ˜¯é”®ç›˜ã€‚\næ•°æ®ç›®çš„åœ°å¯ä»¥æ˜¯æ–‡ä»¶ã€æ˜¾ç¤ºå™¨æˆ–è€…å…¶ä»–è®¾å¤‡ã€‚\n\n\nè€Œæµåªæ˜¯åœ¨å¸®åŠ©æ•°æ®è¿›è¡Œä¼ è¾“,å¹¶å¯¹ä¼ è¾“çš„æ•°æ®è¿›è¡Œå¤„ç†ï¼Œæ¯”å¦‚è¿‡æ»¤å¤„ç†ã€è½¬æ¢å¤„ç†ç­‰ã€‚\n\n1.11 NIO.2ä¸­Pathã€Pathsã€ Filesç±»çš„ä½¿ç”¨â€‹        Java NIO (New IOï¼ŒNon-Blocking IO)æ˜¯ä»Java 1.4ç‰ˆæœ¬å¼€å§‹å¼•å…¥çš„ä¸€å¥—æ–° çš„IO APIï¼Œå¯ä»¥æ›¿ä»£æ ‡å‡†çš„Java IO APIã€‚NIOä¸åŸæ¥çš„IOæœ‰åŒæ ·çš„ä½œç”¨å’Œç›®çš„ï¼Œä½†æ˜¯ä½¿ç”¨çš„æ–¹å¼å®Œå…¨ä¸åŒï¼ŒNIOæ”¯æŒé¢å‘ç¼“å†²åŒºçš„(IOæ˜¯é¢å‘æµçš„)ã€åŸºäºé€šé“çš„IOæ“ä½œã€‚NIOå°†ä»¥æ›´åŠ é«˜æ•ˆçš„æ–¹å¼è¿›è¡Œæ–‡ä»¶çš„è¯»å†™æ“ä½œã€‚â€‹        Java APIä¸­æä¾›äº†ä¸¤å¥—NIOï¼Œä¸€å¥—æ˜¯é’ˆå¯¹æ ‡å‡†è¾“å…¥è¾“å‡ºNIOï¼Œå¦ä¸€å¥—å°±æ˜¯ç½‘ç»œç¼–ç¨‹NIOã€‚ \n|â€”â€”-java.nio.channels.Channel    |â€”â€”-FileChannel:å¤„ç†æœ¬åœ°æ–‡ä»¶    |â€”â€”-SocketChannelï¼šTCPç½‘ç»œç¼–ç¨‹çš„å®¢æˆ·ç«¯çš„Channel    |â€”â€”-ServerSocketChannel:TCPç½‘ç»œç¼–ç¨‹çš„æœåŠ¡å™¨ç«¯çš„Channel    |â€”â€”-DatagramChannelï¼šUDPç½‘ç»œç¼–ç¨‹ä¸­å‘é€ç«¯å’Œæ¥æ”¶ç«¯çš„Channel\nâ€‹        éšç€ JDK 7 çš„å‘å¸ƒï¼ŒJavaå¯¹NIOè¿›è¡Œäº†æå¤§çš„æ‰©å±•ï¼Œå¢å¼ºäº†å¯¹æ–‡ä»¶å¤„ç†å’Œæ–‡ä»¶ç³»ç»Ÿç‰¹æ€§çš„æ”¯æŒï¼Œä»¥è‡³äºæˆ‘ä»¬ç§°ä»–ä»¬ä¸º NIO.2ã€‚å› ä¸º NIO æä¾›çš„ä¸€äº›åŠŸèƒ½ï¼ŒNIOå·²ç»æˆä¸ºæ–‡ä»¶å¤„ç†ä¸­è¶Šæ¥è¶Šé‡è¦çš„éƒ¨åˆ†\nPathã€Pathså’ŒFilesæ ¸å¿ƒAPI\næ—©æœŸçš„Javaåªæä¾›äº†ä¸€ä¸ªFileç±»æ¥è®¿é—®æ–‡ä»¶ç³»ç»Ÿï¼Œä½†Fileç±»çš„åŠŸèƒ½æ¯”è¾ƒæœ‰é™ï¼Œæ‰€æä¾›çš„æ–¹æ³•æ€§èƒ½ä¹Ÿä¸é«˜ã€‚è€Œä¸”ï¼Œå¤§å¤šæ•°æ–¹æ³•åœ¨å‡ºé”™æ—¶ä»…è¿”å›å¤±è´¥ï¼Œå¹¶ä¸ä¼šæä¾›å¼‚å¸¸ä¿¡æ¯ã€‚\nNIO. 2ä¸ºäº†å¼¥è¡¥è¿™ç§ä¸è¶³ï¼Œå¼•å…¥äº†Pathæ¥å£ï¼Œä»£è¡¨ä¸€ä¸ªå¹³å°æ— å…³çš„å¹³å°è·¯å¾„ï¼Œæè¿°äº†ç›®å½•ç»“æ„ä¸­æ–‡ä»¶çš„ä½ç½®ã€‚Pathå¯ä»¥çœ‹æˆæ˜¯Fileç±»çš„å‡çº§ç‰ˆæœ¬ï¼Œå®é™…å¼•ç”¨çš„èµ„æºä¹Ÿå¯ä»¥ä¸å­˜åœ¨ã€‚\nåœ¨ä»¥å‰IOæ“ä½œéƒ½æ˜¯è¿™æ ·å†™çš„:import java.io.File;File file = new File(â€œindex.htmlâ€);\nä½†åœ¨Java7 ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å†™ï¼šimport java.nio.file.Path;import java.nio.file.Paths;Path path = Paths.get(â€œindex.htmlâ€);\nåŒæ—¶ï¼ŒNIO.2åœ¨java.nio.fileåŒ…ä¸‹è¿˜æä¾›äº†Filesã€Pathså·¥å…·ç±»ï¼ŒFilesåŒ…å«äº†å¤§é‡é™æ€çš„å·¥å…·æ–¹æ³•æ¥æ“ä½œæ–‡ä»¶ï¼›Pathsåˆ™åŒ…å«äº†ä¸¤ä¸ªè¿”å›Pathçš„é™æ€å·¥å‚æ–¹æ³•ã€‚\nPaths ç±»æä¾›çš„é™æ€ get() æ–¹æ³•ç”¨æ¥è·å– Path å¯¹è±¡ï¼šstatic Path get(String first, String â€¦ more) : ç”¨äºå°†å¤šä¸ªå­—ç¬¦ä¸²ä¸²è¿æˆè·¯å¾„static Path get(URI uri): è¿”å›æŒ‡å®šuriå¯¹åº”çš„Pathè·¯å¾„\n\n\n\n\n\nPath å¸¸ç”¨æ–¹æ³•\nåŠŸèƒ½\n\n\n\n\nString toString()\nè¿”å›è°ƒç”¨ Path å¯¹è±¡çš„å­—ç¬¦ä¸²è¡¨ç¤ºå½¢å¼\n\n\nboolean startsWith(String path)\nåˆ¤æ–­æ˜¯å¦ä»¥ path è·¯å¾„å¼€å§‹\n\n\nboolean endsWith(String path)\nåˆ¤æ–­æ˜¯å¦ä»¥ path è·¯å¾„ç»“æŸ\n\n\nboolean isAbsolute()\nåˆ¤æ–­æ˜¯å¦æ˜¯ç»å¯¹è·¯å¾„\n\n\nPath getParent()\nè¿”å›Pathå¯¹è±¡åŒ…å«æ•´ä¸ªè·¯å¾„ï¼Œä¸åŒ…å« Path å¯¹è±¡æŒ‡å®šçš„æ–‡ä»¶è·¯å¾„\n\n\nPath getRoot()\nè¿”å›è°ƒç”¨ Path å¯¹è±¡çš„æ ¹è·¯å¾„\n\n\nPath getFileName()\nè¿”å›ä¸è°ƒç”¨ Path å¯¹è±¡å…³è”çš„æ–‡ä»¶å\n\n\nint getNameCount()\nè¿”å›Path æ ¹ç›®å½•åé¢å…ƒç´ çš„æ•°é‡\n\n\nPath getName(int idx)\nè¿”å›æŒ‡å®šç´¢å¼•ä½ç½® idx çš„è·¯å¾„åç§°\n\n\nPath toAbsolutePath()\nä½œä¸ºç»å¯¹è·¯å¾„è¿”å›è°ƒç”¨ Path å¯¹è±¡\n\n\nPath resolve(Path p)\nåˆå¹¶ä¸¤ä¸ªè·¯å¾„ï¼Œè¿”å›åˆå¹¶åçš„è·¯å¾„å¯¹åº”çš„Pathå¯¹è±¡\n\n\nFile toFile()\nå°†Pathè½¬åŒ–ä¸ºFileç±»çš„å¯¹è±¡\n\n\n\n\n java.nio.file.Files ç”¨äºæ“ä½œæ–‡ä»¶æˆ–ç›®å½•çš„å·¥å…·ç±»ã€‚\n\n\n\n\nFileså¸¸ç”¨æ–¹æ³•\n\n\n\n\n\nPath copy(Path src, Path dest, CopyOption â€¦ how)\næ–‡ä»¶çš„å¤åˆ¶\n\n\nPath createDirectory(Path path, FileAttribute&lt;?&gt; â€¦ attr)\nåˆ›å»ºä¸€ä¸ªç›®å½•\n\n\nPath createFile(Path path, FileAttribute&lt;?&gt; â€¦ arr)\nåˆ›å»ºä¸€ä¸ªæ–‡ä»¶\n\n\nvoid delete(Path path)\nåˆ é™¤ä¸€ä¸ªæ–‡ä»¶/ç›®å½•ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œæ‰§è¡ŒæŠ¥é”™\n\n\nvoid deleteIfExists(Path path)\nPathå¯¹åº”çš„æ–‡ä»¶/ç›®å½•å¦‚æœå­˜åœ¨ï¼Œæ‰§è¡Œåˆ é™¤\n\n\nPath move(Path src, Path dest, CopyOptionâ€¦how)\nå°† src ç§»åŠ¨åˆ° dest ä½ç½®\n\n\nlong size(Path path)\nè¿”å› path æŒ‡å®šæ–‡ä»¶çš„å¤§å°\n\n\n\n\n\n\n\n\nFileså¸¸ç”¨æ–¹æ³•ï¼šç”¨äºåˆ¤æ–­\n\n\n\n\n\nboolean exists(Path path, LinkOption â€¦ opts)\nåˆ¤æ–­æ–‡ä»¶æ˜¯å¦å­˜åœ¨\n\n\nboolean isDirectory(Path path, LinkOption â€¦ opts)\nåˆ¤æ–­æ˜¯å¦æ˜¯ç›®å½•\n\n\nboolean isRegularFile(Path path, LinkOption â€¦ opts)\nåˆ¤æ–­æ˜¯å¦æ˜¯æ–‡ä»¶\n\n\nboolean isHidden(Path path)\nåˆ¤æ–­æ˜¯å¦æ˜¯éšè—æ–‡ä»¶\n\n\nboolean isReadable(Path path)\nåˆ¤æ–­æ–‡ä»¶æ˜¯å¦å¯è¯»\n\n\nboolean isWritable(Path path)\nåˆ¤æ–­æ–‡ä»¶æ˜¯å¦å¯å†™\n\n\nboolean notExists(Path path, LinkOption â€¦ opts)\nåˆ¤æ–­æ–‡ä»¶æ˜¯å¦ä¸å­˜åœ¨\n\n\n\n\n\n\n\n\nFileså¸¸ç”¨æ–¹æ³•ï¼šç”¨äºæ“ä½œå†…å®¹\n\n\n\n\n\nSeekableByteChannel newByteChannel(Path path, OpenOptionâ€¦how)\nè·å–ä¸æŒ‡å®šæ–‡ä»¶çš„è¿æ¥ï¼Œhow æŒ‡å®šæ‰“å¼€æ–¹å¼ã€‚\n\n\nDirectoryStream newDirectoryStream(Path path)\næ‰“å¼€ path æŒ‡å®šçš„ç›®å½•\n\n\nInputStream newInputStream(Path path, OpenOptionâ€¦how\nè·å– InputStream å¯¹è±¡\n\n\nOutputStream newOutputStream(Path path, OpenOptionâ€¦how)\nè·å– OutputStream å¯¹è±¡\n\n\n\n\n2. ç½‘ç»œç¼–ç¨‹2.1 ç½‘ç»œç¼–ç¨‹æ¦‚è¿°\nè®¡ç®—æœºç½‘ç»œï¼šæŠŠåˆ†å¸ƒåœ¨ä¸åŒåœ°ç†åŒºåŸŸçš„è®¡ç®—æœºä¸ä¸“é—¨çš„å¤–éƒ¨è®¾å¤‡ç”¨é€šä¿¡çº¿è·¯äº’è¿æˆä¸€ä¸ªè§„æ¨¡å¤§ã€åŠŸèƒ½å¼ºçš„ç½‘ç»œç³»ç»Ÿï¼Œä»è€Œä½¿ä¼—å¤šçš„è®¡ç®—æœºå¯ä»¥æ–¹ä¾¿åœ°äº’ç›¸ä¼ é€’ä¿¡æ¯ã€å…±äº«ç¡¬ä»¶ã€è½¯ä»¶ã€æ•°æ®ä¿¡æ¯ç­‰èµ„æºã€‚\nç½‘ç»œç¼–ç¨‹çš„ç›®çš„ï¼šç›´æ¥æˆ–é—´æ¥åœ°é€šè¿‡ç½‘ç»œåè®®ä¸å…¶å®ƒè®¡ç®—æœºå®ç°æ•°æ®äº¤æ¢ï¼Œè¿›è¡Œé€šè®¯ã€‚\nç½‘ç»œç¼–ç¨‹ä¸­æœ‰ä¸¤ä¸ªä¸»è¦çš„é—®é¢˜ï¼šå¦‚ä½•å‡†ç¡®åœ°å®šä½ç½‘ç»œä¸Šä¸€å°æˆ–å¤šå°ä¸»æœºï¼›å®šä½ä¸»æœºä¸Šçš„ç‰¹å®šçš„åº”ç”¨æ‰¾åˆ°ä¸»æœºåå¦‚ä½•å¯é é«˜æ•ˆåœ°è¿›è¡Œæ•°æ®ä¼ è¾“\n\n2.2 ç½‘ç»œé€šä¿¡è¦ç´ æ¦‚è¿°å¦‚ä½•å®ç°ç½‘ç»œä¸­çš„ä¸»æœºäº’ç›¸é€šä¿¡?\n\né€šä¿¡åŒæ–¹åœ°å€\nIP\nç«¯å£å·\n\n\nä¸€å®šçš„è§„åˆ™ï¼ˆå³ï¼šç½‘ç»œé€šä¿¡åè®®ã€‚æœ‰ä¸¤å¥—å‚è€ƒæ¨¡å‹ï¼‰OSIå‚è€ƒæ¨¡å‹ï¼šæ¨¡å‹è¿‡äºç†æƒ³åŒ–ï¼Œæœªèƒ½åœ¨å› ç‰¹ç½‘ä¸Šè¿›è¡Œå¹¿æ³›æ¨å¹¿TCP/IPå‚è€ƒæ¨¡å‹(æˆ–TCP/IPåè®®)ï¼šäº‹å®ä¸Šçš„å›½é™…æ ‡å‡†ã€‚\n\n\n2.3 é€šä¿¡è¦ç´ 1ï¼šIPå’Œç«¯å£å·IP åœ°å€ï¼šInetAddress\n\nå”¯ä¸€çš„æ ‡è¯† Internet ä¸Šçš„è®¡ç®—æœºï¼ˆé€šä¿¡å®ä½“ï¼‰\næœ¬åœ°å›ç¯åœ°å€(hostAddress)ï¼š127.0.0.1 ä¸»æœºå(hostName)ï¼šlocalhost\nIPåœ°å€åˆ†ç±»æ–¹å¼1ï¼šIPV4 å’Œ IPV6IPV4ï¼š4ä¸ªå­—èŠ‚ç»„æˆï¼Œ4ä¸ª0-255ã€‚å¤§æ¦‚42äº¿ï¼Œ30äº¿éƒ½åœ¨åŒ—ç¾ï¼Œäºšæ´²4äº¿ã€‚2011å¹´åˆå·²ç»ç”¨å°½ã€‚ä»¥ç‚¹åˆ†åè¿›åˆ¶è¡¨ç¤ºï¼Œå¦‚192.168.0.1IPV6ï¼š128ä½ï¼ˆ16ä¸ªå­—èŠ‚ï¼‰ï¼Œå†™æˆ8ä¸ªæ— ç¬¦å·æ•´æ•°ï¼Œæ¯ä¸ªæ•´æ•°ç”¨å››ä¸ªåå…­è¿›åˆ¶ä½è¡¨ç¤ºï¼Œæ•°ä¹‹é—´ç”¨å†’å·ï¼ˆï¼šï¼‰åˆ†å¼€ï¼Œå¦‚ï¼š3ffe:3201:1401:1280:c8ff:fe4d:db39:1984\nIPåœ°å€åˆ†ç±»æ–¹å¼2ï¼šå…¬ç½‘åœ°å€(ä¸‡ç»´ç½‘ä½¿ç”¨)å’Œç§æœ‰åœ°å€(å±€åŸŸç½‘ä½¿ç”¨)ã€‚192.168.å¼€å¤´çš„å°±æ˜¯ç§æœ‰å€å€ï¼ŒèŒƒå›´å³ä¸º192.168.0.0â€”192.168.255.255ï¼Œä¸“é—¨ä¸ºç»„ç»‡æœºæ„å†…éƒ¨ä½¿ç”¨\nç‰¹ç‚¹ï¼šä¸æ˜“è®°å¿†\n\nç«¯å£å·æ ‡è¯†æ­£åœ¨è®¡ç®—æœºä¸Šè¿è¡Œçš„è¿›ç¨‹ï¼ˆç¨‹åºï¼‰\n\nä¸åŒçš„è¿›ç¨‹æœ‰ä¸åŒçš„ç«¯å£å·\nè¢«è§„å®šä¸ºä¸€ä¸ª 16 ä½çš„æ•´æ•° 0~65535ã€‚ ïƒ˜ ç«¯å£åˆ†ç±»ï¼š\nå…¬è®¤ç«¯å£ï¼š0~1023ã€‚è¢«é¢„å…ˆå®šä¹‰çš„æœåŠ¡é€šä¿¡å ç”¨ï¼ˆå¦‚ï¼šHTTPå ç”¨ç«¯å£80ï¼ŒFTPå ç”¨ç«¯å£21ï¼ŒTelnetå ç”¨ç«¯å£23ï¼‰ \næ³¨å†Œç«¯å£ï¼š1024~49151ã€‚åˆ†é…ç»™ç”¨æˆ·è¿›ç¨‹æˆ–åº”ç”¨ç¨‹åºã€‚ï¼ˆå¦‚ï¼šTomcatå ç”¨ç«¯å£8080ï¼ŒMySQLå ç”¨ç«¯å£3306ï¼ŒOracleå ç”¨ç«¯å£1521ç­‰ï¼‰ã€‚ \nåŠ¨æ€/ç§æœ‰ç«¯å£ï¼š49152~65535ã€‚ \n\n\nç«¯å£å·ä¸IPåœ°å€çš„ç»„åˆå¾—å‡ºä¸€ä¸ªç½‘ç»œå¥—æ¥å­—ï¼šSocketã€‚\n\nInetAddressç±»\nInternetä¸Šçš„ä¸»æœºæœ‰ä¸¤ç§æ–¹å¼è¡¨ç¤ºåœ°å€ï¼š\nåŸŸå(hostName)ï¼šwww.atguigu.com\nIP åœ°å€(hostAddress)ï¼š202.108.35.210\n\n\nInetAddressç±»ä¸»è¦è¡¨ç¤ºIPåœ°å€ï¼Œä¸¤ä¸ªå­ç±»ï¼šInet4Addressã€Inet6Addressã€‚ \nInetAddress ç±» å¯¹ è±¡ å« æœ‰ ä¸€ ä¸ª Internet ä¸» æœº åœ° å€ çš„ åŸŸ å å’Œ IP åœ° å€ ï¼šwww.atguigu.com å’Œ 202.108.35.210ã€‚ \nåŸŸåå®¹æ˜“è®°å¿†ï¼Œå½“åœ¨è¿æ¥ç½‘ç»œæ—¶è¾“å…¥ä¸€ä¸ªä¸»æœºçš„åŸŸååï¼ŒåŸŸåæœåŠ¡å™¨(DNS)è´Ÿè´£å°†åŸŸåè½¬åŒ–æˆIPåœ°å€ï¼Œè¿™æ ·æ‰èƒ½å’Œä¸»æœºå»ºç«‹è¿æ¥ã€‚ â€”â€”â€”-åŸŸåè§£æ\n\nInetAddressç±»æ²¡æœ‰æä¾›å…¬å…±çš„æ„é€ å™¨ï¼Œè€Œæ˜¯æä¾›äº†å¦‚ä¸‹å‡ ä¸ªé™æ€æ–¹æ³•æ¥è·å–InetAddresså®ä¾‹\n\npublic static InetAddress getLocalHost()\npublic static InetAddress getByName(String host)\n\n\nInetAddressæä¾›äº†å¦‚ä¸‹å‡ ä¸ªå¸¸ç”¨çš„æ–¹æ³•\npublic String getHostAddress()ï¼šè¿”å› IP åœ°å€å­—ç¬¦ä¸²ï¼ˆä»¥æ–‡æœ¬è¡¨ç°å½¢å¼ï¼‰ã€‚ \npublic String getHostName()ï¼šè·å–æ­¤ IP åœ°å€çš„ä¸»æœºå\npublic boolean isReachable(int timeout)ï¼šæµ‹è¯•æ˜¯å¦å¯ä»¥è¾¾åˆ°è¯¥åœ°å€\n\n\n\nInetAddress address_ 1 = InetAddress.getByName( \"WwW . atguigu. com\");\nSystem.out.println(address_1);\n//è·å–InetAddress å¯¹è±¡æ‰€å«çš„åŸŸå\nSystem.out.print1n( address_1.getHostName());\n//è·å–InetAddress å¯¹è±¡æ‰€å«çš„IPåœ°å€\nSystem.out.println( address_1.getHostAddress());\n//è·å–æœ¬æœºçš„åŸŸåå’ŒIPåœ°å€ã€‚\nInetAddress address_2 = InetAddress.getLocalHost();\nSystem.out.println(address_2) ;\n\n2.4 é€šä¿¡è¦ç´ 2ï¼šç½‘ç»œåè®®ç½‘ç»œé€šä¿¡åè®®:è®¡ç®—æœºç½‘ç»œä¸­å®ç°é€šä¿¡å¿…é¡»æœ‰ä¸€äº›çº¦å®šï¼Œå³é€šä¿¡åè®®ï¼Œå¯¹é€Ÿç‡ã€ä¼ è¾“ä»£ç ã€ä»£ç ç»“æ„ã€ä¼ è¾“æ§åˆ¶æ­¥éª¤ã€å‡ºé”™æ§åˆ¶ç­‰åˆ¶å®šæ ‡å‡†ã€‚ \n é—®é¢˜ï¼šç½‘ç»œåè®®å¤ªå¤æ‚è®¡ç®—æœºç½‘ç»œé€šä¿¡æ¶‰åŠå†…å®¹å¾ˆå¤šï¼Œæ¯”å¦‚æŒ‡å®šæºåœ°å€å’Œç›®æ ‡åœ°å€ï¼ŒåŠ å¯†è§£å¯†ï¼Œå‹ç¼©è§£å‹ç¼©ï¼Œå·®é”™æ§åˆ¶ï¼Œæµé‡æ§åˆ¶ï¼Œè·¯ç”±æ§åˆ¶ï¼Œå¦‚ä½•å®ç°å¦‚æ­¤å¤æ‚çš„ç½‘ç»œåè®®å‘¢ï¼Ÿ \nâ€‹        é€šä¿¡åè®®åˆ†å±‚çš„æ€æƒ³åœ¨åˆ¶å®šåè®®æ—¶ï¼ŒæŠŠå¤æ‚æˆä»½åˆ†è§£æˆä¸€äº›ç®€å•çš„æˆä»½ï¼Œå†å°†å®ƒä»¬å¤åˆèµ·æ¥ã€‚æœ€å¸¸ç”¨çš„å¤åˆæ–¹å¼æ˜¯å±‚æ¬¡æ–¹å¼ï¼Œå³åŒå±‚é—´å¯ä»¥é€šä¿¡ã€ä¸Šä¸€å±‚å¯ä»¥è°ƒç”¨ä¸‹ä¸€å±‚ï¼Œè€Œä¸å†ä¸‹ä¸€å±‚ä¸å‘ç”Ÿå…³ç³»ã€‚å„å±‚äº’ä¸å½±å“ï¼Œåˆ©äºç³»ç»Ÿçš„å¼€å‘å’Œæ‰©å±•ã€‚\nTCP/IPåè®®ç°‡\nä¼ è¾“å±‚åè®®ä¸­æœ‰ä¸¤ä¸ªéå¸¸é‡è¦çš„åè®®ï¼š\nä¼ è¾“æ§åˆ¶åè®®TCP(Transmission Control Protocol)\nç”¨æˆ·æ•°æ®æŠ¥åè®®UDP(User Datagram Protocol)ã€‚ ï¬TCP/IP ä»¥å…¶ä¸¤ä¸ªä¸»è¦åè®®ï¼šä¼ è¾“æ§åˆ¶åè®®(TCP)å’Œç½‘ç»œäº’è”åè®®(IP)è€Œå¾—åï¼Œå®é™…ä¸Šæ˜¯ä¸€ç»„åè®®ï¼ŒåŒ…æ‹¬å¤šä¸ªå…·æœ‰ä¸åŒåŠŸèƒ½ä¸”äº’ä¸ºå…³è”çš„åè®®ã€‚\n\n\nIP(Internet Protocol)åè®®æ˜¯ç½‘ç»œå±‚çš„ä¸»è¦åè®®ï¼Œæ”¯æŒç½‘é—´äº’è¿çš„æ•°æ®é€šä¿¡ã€‚\nTCP/IPåè®®æ¨¡å‹ä»æ›´å®ç”¨çš„è§’åº¦å‡ºå‘ï¼Œå½¢æˆäº†é«˜æ•ˆçš„å››å±‚ä½“ç³»ç»“æ„ï¼Œå³ç‰©ç†é“¾è·¯å±‚ã€IPå±‚ã€ä¼ è¾“å±‚å’Œåº”ç”¨å±‚ã€‚\n\nTCP å’Œ UDP\nTCPåè®®ï¼š\nä½¿ç”¨TCPåè®®å‰ï¼Œé¡»å…ˆå»ºç«‹TCPè¿æ¥ï¼Œå½¢æˆä¼ è¾“æ•°æ®é€šé“\nä¼ è¾“å‰ï¼Œé‡‡ç”¨â€œä¸‰æ¬¡æ¡æ‰‹â€æ–¹å¼ï¼Œç‚¹å¯¹ç‚¹é€šä¿¡ï¼Œæ˜¯å¯é çš„\nTCPåè®®è¿›è¡Œé€šä¿¡çš„ä¸¤ä¸ªåº”ç”¨è¿›ç¨‹ï¼šå®¢æˆ·ç«¯ã€æœåŠ¡ç«¯ã€‚\nåœ¨è¿æ¥ä¸­å¯è¿›è¡Œå¤§æ•°æ®é‡çš„ä¼ è¾“\nä¼ è¾“å®Œæ¯•ï¼Œéœ€é‡Šæ”¾å·²å»ºç«‹çš„è¿æ¥ï¼Œæ•ˆç‡ä½\n\n\nUDPåè®®ï¼š\nå°†æ•°æ®ã€æºã€ç›®çš„å°è£…æˆæ•°æ®åŒ…ï¼Œä¸éœ€è¦å»ºç«‹è¿æ¥\næ¯ä¸ªæ•°æ®æŠ¥çš„å¤§å°é™åˆ¶åœ¨64Kå†… \nå‘é€ä¸ç®¡å¯¹æ–¹æ˜¯å¦å‡†å¤‡å¥½ï¼Œæ¥æ”¶æ–¹æ”¶åˆ°ä¹Ÿä¸ç¡®è®¤ï¼Œæ•…æ˜¯ä¸å¯é çš„ \nå¯ä»¥å¹¿æ’­å‘é€\nå‘é€æ•°æ®ç»“æŸæ—¶æ— éœ€é‡Šæ”¾èµ„æºï¼Œå¼€é”€å°ï¼Œé€Ÿåº¦å¿«\n\n\n\n\n\nSocket\nåˆ©ç”¨å¥—æ¥å­—(Socket)å¼€å‘ç½‘ç»œåº”ç”¨ç¨‹åºæ—©å·²è¢«å¹¿æ³›çš„é‡‡ç”¨ï¼Œä»¥è‡³äºæˆä¸ºäº‹å®ä¸Šçš„æ ‡å‡†ã€‚\nç½‘ç»œä¸Šå…·æœ‰å”¯ä¸€æ ‡è¯†çš„IPåœ°å€å’Œç«¯å£å·ç»„åˆåœ¨ä¸€èµ·æ‰èƒ½æ„æˆå”¯ä¸€èƒ½è¯†åˆ«çš„æ ‡è¯†ç¬¦å¥—æ¥å­—ã€‚ \né€šä¿¡çš„ä¸¤ç«¯éƒ½è¦æœ‰Socketï¼Œæ˜¯ä¸¤å°æœºå™¨é—´é€šä¿¡çš„ç«¯ç‚¹ã€‚ ï¬ ç½‘ç»œé€šä¿¡å…¶å®å°±æ˜¯Socketé—´çš„é€šä¿¡ã€‚\nSocketå…è®¸ç¨‹åºæŠŠç½‘ç»œè¿æ¥å½“æˆä¸€ä¸ªæµï¼Œæ•°æ®åœ¨ä¸¤ä¸ªSocketé—´é€šè¿‡IOä¼ è¾“ã€‚\nä¸€èˆ¬ä¸»åŠ¨å‘èµ·é€šä¿¡çš„åº”ç”¨ç¨‹åºå±å®¢æˆ·ç«¯ï¼Œç­‰å¾…é€šä¿¡è¯·æ±‚çš„ä¸ºæœåŠ¡ç«¯ã€‚\nSocketåˆ†ç±»ï¼š\næµå¥—æ¥å­—ï¼ˆstream socketï¼‰ï¼šä½¿ç”¨TCPæä¾›å¯ä¾èµ–çš„å­—èŠ‚æµæœåŠ¡\næ•°æ®æŠ¥å¥—æ¥å­—ï¼ˆdatagram socketï¼‰ï¼šä½¿ç”¨UDPæä¾›â€œå°½åŠ›è€Œä¸ºâ€çš„æ•°æ®æŠ¥æœåŠ¡\n\n\n\nSocketç±»çš„å¸¸ç”¨æ„é€ å™¨ï¼š \n\npublic Socket(InetAddress address,int port)åˆ›å»ºä¸€ä¸ªæµå¥—æ¥å­—å¹¶å°†å…¶è¿æ¥åˆ°æŒ‡å®š IP åœ°å€çš„æŒ‡å®šç«¯å£å·ã€‚ \npublic Socket(String host,int port)åˆ›å»ºä¸€ä¸ªæµå¥—æ¥å­—å¹¶å°†å…¶è¿æ¥åˆ°æŒ‡å®šä¸»æœºä¸Šçš„æŒ‡å®šç«¯å£å·ã€‚ \n\nSocketç±»çš„å¸¸ç”¨æ–¹æ³•ï¼š\n\npublic InputStream getInputStream()è¿”å›æ­¤å¥—æ¥å­—çš„è¾“å…¥æµã€‚å¯ä»¥ç”¨äºæ¥æ”¶ç½‘ç»œæ¶ˆæ¯\npublic OutputStream getOutputStream()è¿”å›æ­¤å¥—æ¥å­—çš„è¾“å‡ºæµã€‚å¯ä»¥ç”¨äºå‘é€ç½‘ç»œæ¶ˆæ¯\npublic InetAddress getInetAddress()æ­¤å¥—æ¥å­—è¿æ¥åˆ°çš„è¿œç¨‹ IP åœ°å€ï¼›å¦‚æœå¥—æ¥å­—æ˜¯æœªè¿æ¥çš„ï¼Œåˆ™è¿”å› nullã€‚ \npublic InetAddress getLocalAddress()è·å–å¥—æ¥å­—ç»‘å®šçš„æœ¬åœ°åœ°å€ã€‚ å³æœ¬ç«¯çš„IPåœ°å€\npublic int getPort()æ­¤å¥—æ¥å­—è¿æ¥åˆ°çš„è¿œç¨‹ç«¯å£å·ï¼›å¦‚æœå°šæœªè¿æ¥å¥—æ¥å­—ï¼Œåˆ™è¿”å› 0ã€‚ \npublic int getLocalPort()è¿”å›æ­¤å¥—æ¥å­—ç»‘å®šåˆ°çš„æœ¬åœ°ç«¯å£ã€‚ å¦‚æœå°šæœªç»‘å®šå¥—æ¥å­—ï¼Œåˆ™è¿”å› -1ã€‚å³æœ¬ç«¯çš„ç«¯å£å·ã€‚\npublic void close()å…³é—­æ­¤å¥—æ¥å­—ã€‚å¥—æ¥å­—è¢«å…³é—­åï¼Œä¾¿ä¸å¯åœ¨ä»¥åçš„ç½‘ç»œè¿æ¥ä¸­ä½¿ç”¨ï¼ˆå³æ— æ³•é‡æ–°è¿æ¥æˆ–é‡æ–°ç»‘å®šï¼‰ã€‚éœ€è¦åˆ›å»ºæ–°çš„å¥—æ¥å­—å¯¹è±¡ã€‚ å…³é—­æ­¤å¥—æ¥å­—ä¹Ÿå°†ä¼šå…³é—­è¯¥å¥—æ¥å­—çš„ InputStream å’ŒOutputStreamã€‚ \npublic void shutdownInput()å¦‚æœåœ¨å¥—æ¥å­—ä¸Šè°ƒç”¨ shutdownInput() åä»å¥—æ¥å­—è¾“å…¥æµè¯»å–å†…å®¹ï¼Œåˆ™æµå°†è¿”å› EOFï¼ˆæ–‡ä»¶ç»“æŸç¬¦ï¼‰ã€‚ å³ä¸èƒ½åœ¨ä»æ­¤å¥—æ¥å­—çš„è¾“å…¥æµä¸­æ¥æ”¶ä»»ä½•æ•°æ®ã€‚ \npublic void shutdownOutput()ç¦ç”¨æ­¤å¥—æ¥å­—çš„è¾“å‡ºæµã€‚å¯¹äº TCP å¥—æ¥å­—ï¼Œä»»ä½•ä»¥å‰å†™å…¥çš„æ•°æ®éƒ½å°†è¢«å‘é€ï¼Œå¹¶ä¸”åè·Ÿ TCP çš„æ­£å¸¸è¿æ¥ç»ˆæ­¢åºåˆ—ã€‚ å¦‚æœåœ¨å¥—æ¥å­—ä¸Šè°ƒç”¨ shutdownOutput() åå†™å…¥å¥—æ¥å­—è¾“å‡ºæµï¼Œåˆ™è¯¥æµå°†æŠ›å‡º IOExceptionã€‚ å³ä¸èƒ½é€šè¿‡æ­¤å¥—æ¥å­—çš„è¾“å‡ºæµå‘é€ä»»ä½•æ•°æ®ã€‚\n\n2.5 TCPç½‘ç»œç¼–ç¨‹åŸºäºSocketçš„TCPç¼–ç¨‹\nJavaè¯­è¨€çš„åŸºäºå¥—æ¥å­—ç¼–ç¨‹åˆ†ä¸ºæœåŠ¡ç«¯ç¼–ç¨‹å’Œå®¢æˆ·ç«¯ç¼–ç¨‹ï¼Œå…¶é€šä¿¡æ¨¡å‹å¦‚å›¾æ‰€ç¤ºï¼š\n \nå®¢æˆ·ç«¯Socketçš„å·¥ä½œè¿‡ç¨‹åŒ…å«ä»¥ä¸‹å››ä¸ªåŸºæœ¬çš„æ­¥éª¤ï¼š\n\nåˆ›å»º Socketï¼šæ ¹æ®æŒ‡å®šæœåŠ¡ç«¯çš„ IP åœ°å€æˆ–ç«¯å£å·æ„é€  Socket ç±»å¯¹è±¡ã€‚è‹¥æœåŠ¡å™¨ç«¯å“åº”ï¼Œåˆ™å»ºç«‹å®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨çš„é€šä¿¡çº¿è·¯ã€‚è‹¥è¿æ¥å¤±è´¥ï¼Œä¼šå‡ºç°å¼‚å¸¸ã€‚\næ‰“å¼€è¿æ¥åˆ° Socket çš„è¾“å…¥/å‡ºæµï¼š ä½¿ç”¨ getInputStream()æ–¹æ³•è·å¾—è¾“å…¥æµï¼Œä½¿ç”¨getOutputStream()æ–¹æ³•è·å¾—è¾“å‡ºæµï¼Œè¿›è¡Œæ•°æ®ä¼ è¾“\næŒ‰ç…§ä¸€å®šçš„åè®®å¯¹ Socket è¿›è¡Œè¯»/å†™æ“ä½œï¼šé€šè¿‡è¾“å…¥æµè¯»å–æœåŠ¡å™¨æ”¾å…¥çº¿è·¯çš„ä¿¡æ¯ï¼ˆä½†ä¸èƒ½è¯»å–è‡ªå·±æ”¾å…¥çº¿è·¯çš„ä¿¡æ¯ï¼‰ï¼Œé€šè¿‡è¾“å‡ºæµå°†ä¿¡æ¯å†™å…¥çº¿ç¨‹ã€‚\nå…³é—­ Socketï¼šæ–­å¼€å®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨çš„è¿æ¥ï¼Œé‡Šæ”¾çº¿è·¯\n\nå®¢æˆ·ç«¯åˆ›å»ºSocketå¯¹è±¡\n\nå®¢æˆ·ç«¯ç¨‹åºå¯ä»¥ä½¿ç”¨Socketç±»åˆ›å»ºå¯¹è±¡ï¼Œåˆ›å»ºçš„åŒæ—¶ä¼šè‡ªåŠ¨å‘æœåŠ¡å™¨æ–¹å‘èµ·è¿æ¥ã€‚Socketçš„æ„é€ å™¨æ˜¯ï¼š \nSocket(String host,int port)throws UnknownHostException,IOExceptionï¼šå‘æœåŠ¡å™¨(åŸŸåæ˜¯hostã€‚ç«¯å£å·ä¸ºport)å‘èµ·TCPè¿æ¥ï¼Œè‹¥æˆåŠŸï¼Œåˆ™åˆ›å»ºSocketå¯¹è±¡ï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸ã€‚\nSocket(InetAddress address,int port)throws IOExceptionï¼šæ ¹æ®InetAddresså¯¹è±¡æ‰€è¡¨ç¤ºçš„IPåœ°å€ä»¥åŠç«¯å£å·portå‘èµ·è¿æ¥ã€‚\n\n\nå®¢æˆ·ç«¯å»ºç«‹socketAtClientå¯¹è±¡çš„è¿‡ç¨‹å°±æ˜¯å‘æœåŠ¡å™¨å‘å‡ºå¥—æ¥å­—è¿æ¥è¯·æ±‚\n\nSocket s = new \nSocket(â€œ192.168.40.165â€,9999);\nOutputStream out = s.getOutputStream();\nout.write(\" hello\".getBytes());\ns.close();\næœåŠ¡å™¨ç¨‹åºçš„å·¥ä½œè¿‡ç¨‹åŒ…å«ä»¥ä¸‹å››ä¸ªåŸºæœ¬çš„æ­¥éª¤ï¼š\n\nè°ƒç”¨ ServerSocket(int port) ï¼šåˆ›å»ºä¸€ä¸ªæœåŠ¡å™¨ç«¯å¥—æ¥å­—ï¼Œå¹¶ç»‘å®šåˆ°æŒ‡å®šç«¯å£ä¸Šã€‚ç”¨äºç›‘å¬å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚\nè°ƒç”¨ accept()ï¼šç›‘å¬è¿æ¥è¯·æ±‚ï¼Œå¦‚æœå®¢æˆ·ç«¯è¯·æ±‚è¿æ¥ï¼Œåˆ™æ¥å—è¿æ¥ï¼Œè¿”å›é€šä¿¡å¥—æ¥å­—å¯¹è±¡ã€‚ \nè°ƒç”¨ è¯¥Socketç±»å¯¹è±¡çš„ getOutputStream() å’Œ getInputStream ()ï¼šè·å–è¾“å‡ºæµå’Œè¾“å…¥æµï¼Œå¼€å§‹ç½‘ç»œæ•°æ®çš„å‘é€å’Œæ¥æ”¶ã€‚\nå…³é—­ServerSocketå’ŒSocketå¯¹è±¡ï¼šå®¢æˆ·ç«¯è®¿é—®ç»“æŸï¼Œå…³é—­é€šä¿¡å¥—æ¥å­—ã€‚\n\næœåŠ¡å™¨å»ºç«‹ ServerSocket å¯¹è±¡\n\nServerSocket å¯¹è±¡è´Ÿè´£ç­‰å¾…å®¢æˆ·ç«¯è¯·æ±‚å»ºç«‹å¥—æ¥å­—è¿æ¥ï¼Œç±»ä¼¼é‚®å±€æŸä¸ªçª—å£ä¸­çš„ä¸šåŠ¡å‘˜ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒæœåŠ¡å™¨å¿…é¡»äº‹å…ˆå»ºç«‹ä¸€ä¸ªç­‰å¾…å®¢æˆ·è¯·æ±‚å»ºç«‹å¥—æ¥å­—è¿æ¥çš„ServerSocketå¯¹è±¡ã€‚\næ‰€è°“â€œæ¥æ”¶â€å®¢æˆ·çš„å¥—æ¥å­—è¯·æ±‚ï¼Œå°±æ˜¯accept()æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ª Socket å¯¹è±¡\n\nServerSocket ss = new ServerSocket(9999);\nSocket s = ss.accept ();\nInputStream in = s.getInputStream();\nbyte[] buf = new byte[1024];\nint num = in.read(buf);\nString str = new String(buf,0,num);\nSystem.out.println(s.getInetAddress().toString()+â€:â€+str);\ns.close();\nss.close();\n2.6 UDPç½‘ç»œç¼–ç¨‹\nç±» DatagramSocket å’Œ DatagramPacket å®ç°äº†åŸºäº UDP åè®®ç½‘ç»œç¨‹åºã€‚\nUDPæ•°æ®æŠ¥é€šè¿‡æ•°æ®æŠ¥å¥—æ¥å­— DatagramSocket å‘é€å’Œæ¥æ”¶ï¼Œç³»ç»Ÿä¸ä¿è¯UDPæ•°æ®æŠ¥ä¸€å®šèƒ½å¤Ÿå®‰å…¨é€åˆ°ç›®çš„åœ°ï¼Œä¹Ÿä¸èƒ½ç¡®å®šä»€ä¹ˆæ—¶å€™å¯ä»¥æŠµè¾¾ã€‚\nDatagramPacket å¯¹è±¡å°è£…äº†UDPæ•°æ®æŠ¥ï¼Œåœ¨æ•°æ®æŠ¥ä¸­åŒ…å«äº†å‘é€ç«¯çš„IPåœ°å€å’Œç«¯å£å·ä»¥åŠæ¥æ”¶ç«¯çš„IPåœ°å€å’Œç«¯å£å·ã€‚\nUDPåè®®ä¸­æ¯ä¸ªæ•°æ®æŠ¥éƒ½ç»™å‡ºäº†å®Œæ•´çš„åœ°å€ä¿¡æ¯ï¼Œå› æ­¤æ— é¡»å»ºç«‹å‘é€æ–¹å’Œæ¥æ”¶æ–¹çš„è¿æ¥ã€‚å¦‚åŒå‘å¿«é€’åŒ…è£¹ä¸€æ ·ã€‚\n\nDatagramSocket ç±»çš„å¸¸ç”¨æ–¹æ³•\n\npublic DatagramSocket(int port)åˆ›å»ºæ•°æ®æŠ¥å¥—æ¥å­—å¹¶å°†å…¶ç»‘å®šåˆ°æœ¬åœ°ä¸»æœºä¸Šçš„æŒ‡å®šç«¯å£ã€‚å¥—æ¥å­—å°†è¢«ç»‘å®šåˆ°é€šé…ç¬¦åœ°å€ï¼ŒIP åœ°å€ç”±å†…æ ¸æ¥é€‰æ‹©ã€‚ \npublic DatagramSocket(int port,InetAddress laddr)åˆ›å»ºæ•°æ®æŠ¥å¥—æ¥å­—ï¼Œå°†å…¶ç»‘å®šåˆ°æŒ‡å®šçš„æœ¬åœ°åœ°å€ã€‚æœ¬åœ°ç«¯å£å¿…é¡»åœ¨ 0 åˆ° 65535 ä¹‹é—´ï¼ˆåŒ…æ‹¬ä¸¤è€…ï¼‰ã€‚å¦‚æœ IP åœ°å€ä¸º 0.0.0.0ï¼Œå¥—æ¥å­—å°†è¢«ç»‘å®šåˆ°é€šé…ç¬¦åœ°å€ï¼ŒIP åœ°å€ç”±å†…æ ¸é€‰æ‹©ã€‚ \npublic void close()å…³é—­æ­¤æ•°æ®æŠ¥å¥—æ¥å­—ã€‚ \npublic void send(DatagramPacket p)ä»æ­¤å¥—æ¥å­—å‘é€æ•°æ®æŠ¥åŒ…ã€‚DatagramPacket åŒ…å«çš„ä¿¡æ¯æŒ‡ç¤ºï¼šå°†è¦å‘é€çš„æ•°æ®ã€å…¶é•¿åº¦ã€è¿œç¨‹ä¸»æœºçš„ IP åœ°å€å’Œè¿œç¨‹ä¸»æœºçš„ç«¯å£å·ã€‚ \npublic void receive(DatagramPacket p)ä»æ­¤å¥—æ¥å­—æ¥æ”¶æ•°æ®æŠ¥åŒ…ã€‚å½“æ­¤æ–¹æ³•è¿”å›æ—¶ï¼ŒDatagramPacketçš„ç¼“å†²åŒºå¡«å……äº†æ¥æ”¶çš„æ•°æ®ã€‚æ•°æ®æŠ¥åŒ…ä¹ŸåŒ…å«å‘é€æ–¹çš„ IP åœ°å€å’Œå‘é€æ–¹æœºå™¨ä¸Šçš„ç«¯å£å·ã€‚ æ­¤æ–¹æ³•åœ¨æ¥æ”¶åˆ°æ•°æ®æŠ¥å‰ä¸€ç›´é˜»å¡ã€‚æ•°æ®æŠ¥åŒ…å¯¹è±¡çš„ length å­—æ®µåŒ…å«æ‰€æ¥æ”¶ä¿¡æ¯çš„é•¿åº¦ã€‚å¦‚æœä¿¡æ¯æ¯”åŒ…çš„é•¿åº¦é•¿ï¼Œè¯¥ä¿¡æ¯å°†è¢«æˆªçŸ­ã€‚ \npublic InetAddress getLocalAddress()è·å–å¥—æ¥å­—ç»‘å®šçš„æœ¬åœ°åœ°å€ã€‚ \npublic int getLocalPort()è¿”å›æ­¤å¥—æ¥å­—ç»‘å®šçš„æœ¬åœ°ä¸»æœºä¸Šçš„ç«¯å£å·ã€‚ \npublic InetAddress getInetAddress()è¿”å›æ­¤å¥—æ¥å­—è¿æ¥çš„åœ°å€ã€‚å¦‚æœå¥—æ¥å­—æœªè¿æ¥ï¼Œåˆ™è¿”å› nullã€‚ \npublic int getPort()è¿”å›æ­¤å¥—æ¥å­—çš„ç«¯å£ã€‚å¦‚æœå¥—æ¥å­—æœªè¿æ¥ï¼Œåˆ™è¿”å› -1ã€‚\n\nDatagramPacketç±»çš„å¸¸ç”¨æ–¹æ³•\n\npublic DatagramPacket(byte[] buf,int length)æ„é€  DatagramPacketï¼Œç”¨æ¥æ¥æ”¶é•¿åº¦ä¸º length çš„æ•°æ®åŒ…ã€‚ length å‚æ•°å¿…é¡»å°äºç­‰äº buf.lengthã€‚ \npublic DatagramPacket(byte[] buf,int length,InetAddress address,int port)æ„é€ æ•°æ®æŠ¥åŒ…ï¼Œç”¨æ¥å°†é•¿åº¦ä¸º length çš„åŒ…å‘é€åˆ°æŒ‡å®šä¸»æœºä¸Šçš„æŒ‡å®šç«¯å£å·ã€‚lengthå‚æ•°å¿…é¡»å°äºç­‰äº buf.lengthã€‚ \npublic InetAddress getAddress()è¿”å›æŸå°æœºå™¨çš„ IP åœ°å€ï¼Œæ­¤æ•°æ®æŠ¥å°†è¦å‘å¾€è¯¥æœºå™¨æˆ–è€…æ˜¯ä»è¯¥æœºå™¨æ¥æ”¶åˆ°çš„ã€‚ \npublic int getPort()è¿”å›æŸå°è¿œç¨‹ä¸»æœºçš„ç«¯å£å·ï¼Œæ­¤æ•°æ®æŠ¥å°†è¦å‘å¾€è¯¥ä¸»æœºæˆ–è€…æ˜¯ä»è¯¥ä¸»æœºæ¥æ”¶åˆ°çš„ã€‚ \npublic byte[] getData()è¿”å›æ•°æ®ç¼“å†²åŒºã€‚æ¥æ”¶åˆ°çš„æˆ–å°†è¦å‘é€çš„æ•°æ®ä»ç¼“å†²åŒºä¸­çš„åç§»é‡ offset å¤„å¼€å§‹ï¼ŒæŒç»­ length é•¿åº¦ã€‚ ï¬ public int getLength()è¿”å›å°†è¦å‘é€æˆ–æ¥æ”¶åˆ°çš„æ•°æ®çš„é•¿åº¦ã€‚\n\nUDPç½‘ç»œé€šä¿¡æµ ç¨‹ï¼š\n\nDatagramSocketä¸DatagramPacket\nå»ºç«‹å‘é€ç«¯ï¼Œæ¥æ”¶ç«¯\nå»ºç«‹æ•°æ®åŒ…\nè°ƒç”¨Socketçš„å‘é€ã€æ¥æ”¶æ–¹æ³•\nå…³é—­Socketï¼Œå‘é€ç«¯ä¸æ¥æ”¶ç«¯æ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„è¿è¡Œç¨‹åº\n\n//å‘é€ç«¯\nDatagramSocket ds = null;\ntry {\n    ds = new DatagramSocket();\n    byte[] by = \"hello,atguigu.com\".getBytes();\n    DatagramPacket dp = new DatagramPacket(by, 0, by.length, \n    InetAddress.getByName(\"127.0.0.1\"), 10000);\n    ds.send(dp);\n} catch (Exception e) {\n\te.printStackTrace();\n} finally {\n    if (ds != null)\n    \tds.close();\n}\n\n//æ¥æ”¶ç«¯ åœ¨æ¥æ”¶ç«¯ï¼Œè¦æŒ‡å®šç›‘å¬çš„ç«¯å£ã€‚\nDatagramSocket ds = null;\ntry {\n    ds = new DatagramSocket(10000);\n    byte[] by = new byte[1024];\n    DatagramPacket dp = new DatagramPacket(by, by.length);\n    ds.receive(dp);\n    String str = new String(dp.getData(), 0, dp.getLength());\n    System.out.println(str + \"--\" + dp.getAddress());\n} catch (Exception e) {\n\te.printStackTrace();\n} finally {\n    if (ds != null)\n    \tds.close();\n}\n2.7 URLç¼–ç¨‹URLç±»\nURL(Uniform Resource Locator)ï¼šç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼Œå®ƒè¡¨ç¤º Internet ä¸ŠæŸä¸€èµ„æºçš„åœ°å€ã€‚ \nå®ƒæ˜¯ä¸€ç§å…·ä½“çš„URIï¼Œå³URLå¯ä»¥ç”¨æ¥æ ‡è¯†ä¸€ä¸ªèµ„æºï¼Œè€Œä¸”è¿˜æŒ‡æ˜äº†å¦‚ä½•locateè¿™ä¸ªèµ„æºã€‚\né€šè¿‡ URL æˆ‘ä»¬å¯ä»¥è®¿é—® Internet ä¸Šçš„å„ç§ç½‘ç»œèµ„æºï¼Œæ¯”å¦‚æœ€å¸¸è§çš„ wwwï¼Œftp ç«™ç‚¹ã€‚æµè§ˆå™¨é€šè¿‡è§£æç»™å®šçš„ URL å¯ä»¥åœ¨ç½‘ç»œä¸ŠæŸ¥æ‰¾ç›¸åº”çš„æ–‡ä»¶æˆ–å…¶ä»–èµ„æºã€‚\nURLçš„åŸºæœ¬ç»“æ„ç”±5éƒ¨åˆ†ç»„æˆï¼š &lt;ä¼ è¾“åè®®&gt;://&lt;ä¸»æœºå&gt;:&lt;ç«¯å£å·&gt;/&lt;æ–‡ä»¶å&gt;#ç‰‡æ®µå?å‚æ•°åˆ—è¡¨ä¾‹å¦‚: http://192.168.1.100:8080/helloworld/index.jsp#a?username=shkstart&amp;password=123ç‰‡æ®µåï¼šå³é”šç‚¹ï¼Œä¾‹å¦‚çœ‹å°è¯´ï¼Œç›´æ¥å®šä½åˆ°ç« èŠ‚å‚æ•°åˆ—è¡¨æ ¼å¼ï¼šå‚æ•°å=å‚æ•°å€¼&amp;å‚æ•°å=å‚æ•°å€¼â€¦.\n\nURLç±»æ„é€ å™¨\n\nä¸ºäº†è¡¨ç¤ºURLï¼Œjava.net ä¸­å®ç°äº†ç±» URLã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„æ„é€ å™¨æ¥åˆå§‹åŒ–ä¸€ä¸ª URL å¯¹è±¡ï¼š\npublic URL (String spec)ï¼šé€šè¿‡ä¸€ä¸ªè¡¨ç¤ºURLåœ°å€çš„å­—ç¬¦ä¸²å¯ä»¥æ„é€ ä¸€ä¸ªURLå¯¹è±¡ã€‚ä¾‹å¦‚ï¼šURL url = new URL (â€œhttp://www. atguigu.com/â€œ); \npublic URL(URL context, String spec)ï¼šé€šè¿‡åŸº URL å’Œç›¸å¯¹ URL æ„é€ ä¸€ä¸ª URL å¯¹è±¡ã€‚ä¾‹å¦‚ï¼šURL downloadUrl = new URL(url, â€œdownload.htmlâ€)\npublic URL(String protocol, String host, String file); ä¾‹å¦‚ï¼šnew URL(â€œhttpâ€,â€œwww.atguigu.comâ€, â€œdownload. htmlâ€);\npublic URL(String protocol, String host, int port, String file); ä¾‹å¦‚: URL gamelan = newURL(â€œhttpâ€, â€œwww.atguigu.comâ€, 80, â€œdownload.htmlâ€);\nURLç±»çš„æ„é€ å™¨éƒ½å£°æ˜æŠ›å‡ºéè¿è¡Œæ—¶å¼‚å¸¸ï¼Œå¿…é¡»è¦å¯¹è¿™ä¸€å¼‚å¸¸è¿›è¡Œå¤„ç†ï¼Œé€šå¸¸æ˜¯ç”¨ try-catch è¯­å¥è¿›è¡Œæ•è·ã€‚\n\nä¸€ä¸ªURLå¯¹è±¡ç”Ÿæˆåï¼Œå…¶å±æ€§æ˜¯ä¸èƒ½è¢«æ”¹å˜çš„ï¼Œä½†å¯ä»¥é€šè¿‡å®ƒç»™å®šçš„æ–¹æ³•æ¥è·å–è¿™äº›å±æ€§ï¼š\n\npublic String getProtocol( ) è·å–è¯¥URLçš„åè®®å\npublic String getHost( ) è·å–è¯¥URLçš„ä¸»æœºå\npublic String getPort( ) è·å–è¯¥URLçš„ç«¯å£å·\npublic String getPath( ) è·å–è¯¥URLçš„æ–‡ä»¶è·¯å¾„\npublic String getFile( ) è·å–è¯¥URLçš„æ–‡ä»¶å\npublic String getQuery( ) è·å–è¯¥URLçš„æŸ¥è¯¢å\n\nURL url = new URL(\"http://localhost:8080/examples/myTest.txt\");\nSystem.out.println(\"getProtocol() :\"+url.getProtocol());\nSystem.out.println(\"getHost() :\"+url.getHost());\nSystem.out.println(\"getPort() :\"+url.getPort());\nSystem.out.println(\"getPath() :\"+url.getPath());\nSystem.out.println(\"getFile() :\"+url.getFile());\nSystem.out.println(\"getQuery() :\"+url.getQuery());\nURLConnectionç±»\nURLçš„æ–¹æ³• openStream()ï¼šèƒ½ä»ç½‘ç»œä¸Šè¯»å–æ•°æ®\nè‹¥å¸Œæœ›è¾“å‡ºæ•°æ®ï¼Œä¾‹å¦‚å‘æœåŠ¡å™¨ç«¯çš„ CGI ï¼ˆå…¬å…±ç½‘å…³æ¥å£-Common Gateway Interface-çš„ç®€ç§°ï¼Œæ˜¯ç”¨æˆ·æµè§ˆå™¨å’ŒæœåŠ¡å™¨ç«¯çš„åº”ç”¨ç¨‹åºè¿›è¡Œè¿æ¥çš„æ¥å£ï¼‰ç¨‹åºå‘é€ä¸€äº›æ•°æ®ï¼Œåˆ™å¿…é¡»å…ˆä¸URLå»ºç«‹è¿æ¥ï¼Œç„¶åæ‰èƒ½å¯¹å…¶è¿›è¡Œè¯»å†™ï¼Œæ­¤æ—¶éœ€è¦ä½¿ç”¨URLConnection ã€‚ \nURLConnectionï¼šè¡¨ç¤ºåˆ°URLæ‰€å¼•ç”¨çš„è¿œç¨‹å¯¹è±¡çš„è¿æ¥ã€‚å½“ä¸ä¸€ä¸ªURLå»ºç«‹è¿æ¥æ—¶ï¼Œé¦–å…ˆè¦åœ¨ä¸€ä¸ª URL å¯¹è±¡ä¸Šé€šè¿‡æ–¹æ³• openConnection() ç”Ÿæˆå¯¹åº”çš„ URLConnectionå¯¹è±¡ã€‚å¦‚æœè¿æ¥è¿‡ç¨‹å¤±è´¥ï¼Œå°†äº§ç”ŸIOException. \nURL netchinaren = new URL (â€œhttp://www.atguigu.com/index.shtmlâ€œ); \nURLConnectonn u = netchinaren.openConnection( ); \n\né€šè¿‡URLConnectionå¯¹è±¡è·å–çš„è¾“å…¥æµå’Œè¾“å‡ºæµï¼Œå³å¯ä»¥ä¸ç°æœ‰çš„CGIç¨‹åºè¿›è¡Œäº¤äº’ã€‚\n\npublic Object getContent( ) throws IOException\npublic int getContentLength( )\npublic String getContentType( )\npublic long getDate( )\npublic long getLastModified( )\npublic InputStream getInputStream( )throws IOException\npublic OutputSteram getOutputStream( )throws IOException\n\nURIã€URLå’ŒURNçš„åŒºåˆ«        URIï¼Œæ˜¯uniform resource identifierï¼Œç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ï¼Œç”¨æ¥å”¯ä¸€çš„æ ‡è¯†ä¸€ä¸ªèµ„æºã€‚è€ŒURLæ˜¯uniform resource locatorï¼Œç»Ÿä¸€èµ„æºå®šä½ç¬¦ï¼Œå®ƒæ˜¯ä¸€ç§å…·ä½“çš„URIï¼Œå³URLå¯ä»¥ç”¨æ¥æ ‡è¯†ä¸€ä¸ªèµ„æºï¼Œè€Œä¸”è¿˜æŒ‡æ˜äº†å¦‚ä½•locateè¿™ä¸ªèµ„æºã€‚\nâ€‹        è€ŒURNï¼Œuniform resource nameï¼Œç»Ÿä¸€èµ„æºå‘½åï¼Œæ˜¯é€šè¿‡åå­—æ¥æ ‡è¯†èµ„æºï¼Œæ¯”å¦‚mailto:java-net@java.sun.comã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒURIæ˜¯ä»¥ä¸€ç§æŠ½è±¡çš„ï¼Œé«˜å±‚æ¬¡æ¦‚å¿µå®šä¹‰ç»Ÿä¸€èµ„æºæ ‡è¯†ï¼Œè€ŒURLå’ŒURNåˆ™æ˜¯å…·ä½“çš„èµ„æºæ ‡è¯†çš„æ–¹å¼ã€‚\nâ€‹        URLå’ŒURNéƒ½æ˜¯ä¸€ç§URIã€‚ åœ¨Javaçš„URIä¸­ï¼Œä¸€ä¸ªURIå®ä¾‹å¯ä»¥ä»£è¡¨ç»å¯¹çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯ç›¸å¯¹çš„ï¼Œåªè¦å®ƒç¬¦åˆURIçš„è¯­æ³•è§„åˆ™ã€‚è€ŒURLç±»åˆ™ä¸ä»…ç¬¦åˆè¯­ä¹‰ï¼Œè¿˜åŒ…å«äº†å®šä½è¯¥èµ„æºçš„ä¿¡æ¯ï¼Œå› æ­¤å®ƒä¸èƒ½æ˜¯ç›¸å¯¹çš„ã€‚\nå° ç»“\nä½äºç½‘ç»œä¸­çš„è®¡ç®—æœºå…·æœ‰å”¯ä¸€çš„IPåœ°å€ï¼Œè¿™æ ·ä¸åŒçš„ä¸»æœºå¯ä»¥äº’ç›¸åŒºåˆ†ã€‚\nå®¢æˆ·ç«¯ï¼æœåŠ¡å™¨æ˜¯ä¸€ç§æœ€å¸¸è§çš„ç½‘ç»œåº”ç”¨ç¨‹åºæ¨¡å‹ã€‚æœåŠ¡å™¨æ˜¯ä¸€ä¸ªä¸ºå…¶å®¢æˆ·ç«¯æä¾›æŸç§ç‰¹å®šæœåŠ¡çš„ç¡¬ä»¶æˆ–è½¯ä»¶ã€‚å®¢æˆ·æœºæ˜¯ä¸€ä¸ªç”¨æˆ·åº”ç”¨ç¨‹åºï¼Œç”¨äºè®¿é—®æŸå°æœåŠ¡å™¨æä¾›çš„æœåŠ¡ã€‚ç«¯å£å·æ˜¯å¯¹ä¸€ä¸ªæœåŠ¡çš„è®¿é—®åœºæ‰€ï¼Œå®ƒç”¨äºåŒºåˆ†åŒä¸€ç‰©ç†è®¡ç®—æœºä¸Šçš„å¤šä¸ªæœåŠ¡ã€‚å¥—æ¥å­—ç”¨äºè¿æ¥å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„æ¯ä¸ªé€šä¿¡ä¼šè¯ä½¿ç”¨ä¸€ä¸ªä¸åŒçš„å¥—æ¥å­—ã€‚TCPåè®®ç”¨äºå®ç°é¢å‘è¿æ¥çš„ä¼šè¯ã€‚\nJava ä¸­æœ‰å…³ç½‘ç»œæ–¹é¢çš„åŠŸèƒ½éƒ½å®šä¹‰åœ¨ java.net ç¨‹åºåŒ…ä¸­ã€‚Java ç”¨ InetAddress å¯¹è±¡è¡¨ç¤º IP åœ°å€ï¼Œè¯¥å¯¹è±¡é‡Œæœ‰ä¸¤ä¸ªå­—æ®µï¼šä¸»æœºå(String) å’Œ IP åœ°å€(int)ã€‚ ï¬ç±» Socket å’Œ ServerSocket å®ç°äº†åŸºäºTCPåè®®çš„å®¢æˆ·ç«¯ï¼æœåŠ¡å™¨ç¨‹åºã€‚Socketæ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¹‹é—´çš„ä¸€ä¸ªè¿æ¥ï¼Œè¿æ¥åˆ›å»ºçš„ç»†èŠ‚è¢«éšè—äº†ã€‚è¿™ä¸ªè¿æ¥æä¾›äº†ä¸€ä¸ªå®‰å…¨çš„æ•°æ®ä¼ è¾“é€šé“ï¼Œè¿™æ˜¯å› ä¸º TCP åè®®å¯ä»¥è§£å†³æ•°æ®åœ¨ä¼ é€è¿‡ç¨‹ä¸­çš„ä¸¢å¤±ã€æŸåã€é‡å¤ã€ä¹±åºä»¥åŠç½‘ç»œæ‹¥æŒ¤ç­‰é—®é¢˜ï¼Œå®ƒä¿è¯æ•°æ®å¯é çš„ä¼ é€ã€‚\nç±» URL å’Œ URLConnection æä¾›äº†æœ€é«˜çº§ç½‘ç»œåº”ç”¨ã€‚URL çš„ç½‘ç»œèµ„æºçš„ä½ç½®æ¥åŒä¸€è¡¨ç¤ºInternet ä¸Šå„ç§ç½‘ç»œèµ„æºã€‚é€šè¿‡URLå¯¹è±¡å¯ä»¥åˆ›å»ºå½“å‰åº”ç”¨ç¨‹åºå’Œ URL è¡¨ç¤ºçš„ç½‘ç»œèµ„æºä¹‹é—´çš„è¿æ¥ï¼Œè¿™æ ·å½“å‰ç¨‹åºå°±å¯ä»¥è¯»å–ç½‘ç»œèµ„æºæ•°æ®ï¼Œæˆ–è€…æŠŠè‡ªå·±çš„æ•°æ®ä¼ é€åˆ°ç½‘ç»œä¸Šå»ã€‚\n\n","slug":"J5-IOã€ç½‘ç»œç¼–ç¨‹","date":"2021-11-12T02:31:03.000Z","categories_index":"JAVA","tags_index":"java","author_index":"YFR718"},{"id":"a3bf914b929f60f3127d07c8144366a0","title":"é›†åˆã€æ³›å‹","content":"1. Javaé›†åˆ1.1 Javaé›†åˆæ¡†æ¶æ¦‚è¿°Java é›†åˆå¯åˆ†ä¸º Collection å’Œ Map ä¸¤ç§ä½“ç³»\n\nCollectionæ¥å£ï¼šå•åˆ—æ•°æ®ï¼Œå®šä¹‰äº†å­˜å–ä¸€ç»„å¯¹è±¡çš„æ–¹æ³•çš„é›†åˆListï¼šå…ƒç´ æœ‰åºã€å¯é‡å¤çš„é›†åˆSetï¼šå…ƒç´ æ— åºã€ä¸å¯é‡å¤çš„é›†åˆ\nMapæ¥å£ï¼šåŒåˆ—æ•°æ®ï¼Œä¿å­˜å…·æœ‰æ˜ å°„å…³ç³»â€œkey-valueå¯¹â€çš„é›†åˆ\n\n\n\n1.2 Collectionæ¥å£æ–¹æ³•â€‹        Collection æ¥å£æ˜¯ Listã€Set å’Œ Queue æ¥å£çš„çˆ¶æ¥å£ï¼Œè¯¥æ¥å£é‡Œå®šä¹‰çš„æ–¹æ³•æ—¢å¯ç”¨äºæ“ä½œ Set é›†åˆï¼Œä¹Ÿå¯ç”¨äºæ“ä½œ List å’Œ Queue é›†åˆã€‚\n\n\n\n\nCollectionæ¥å£æ–¹æ³•\næè¿°\n\n\n\n\nadd(Object obj)addAll(Collection coll)\næ·»åŠ \n\n\nint size()\nè®¡ç®—ä¸ªæ•°\n\n\nvoid clear()\næ¸…ç©ºé›†åˆ\n\n\nboolean isEmpty()\nåˆ¤æ–­æ˜¯å¦ä¸ºç©º\n\n\nboolean contains(Object obj)\nequalsæ–¹æ³•åˆ¤æ–­æ˜¯å¦æ˜¯åŒä¸€å¯¹è±¡\n\n\nboolean containsAll(Collection c)\næ‹¿ä¸¤ä¸ªé›†åˆçš„å…ƒç´ æŒ¨ä¸ªæ¯”è¾ƒã€‚\n\n\nboolean remove(Object obj)\nequalsæ–¹æ³•åˆ é™¤ç¬¬ä¸€ä¸ªç›¸åŒå…ƒç´ \n\n\nboolean removeAll(Collection coll)\nå–å½“å‰é›†åˆçš„å·®é›†\n\n\nboolean retainAll(Collection c)\nå–ä¸¤ä¸ªé›†åˆçš„äº¤é›†\n\n\nboolean equals(Object obj)\né›†åˆæ˜¯å¦ç›¸ç­‰\n\n\nObject[] toArray()\nè½¬æˆå¯¹è±¡æ•°ç»„\n\n\nhashCode()\nè·å–é›†åˆå¯¹è±¡çš„å“ˆå¸Œå€¼\n\n\niterator()ï¼š\néå†\n\n\n\n\n1.3 Iteratorè¿­ä»£å™¨æ¥å£ Iteratorå¯¹è±¡ç§°ä¸ºè¿­ä»£å™¨(è®¾è®¡æ¨¡å¼çš„ä¸€ç§)ï¼Œä¸»è¦ç”¨äºéå† Collection é›†åˆä¸­çš„å…ƒç´ ã€‚\n\n\n\n\nIteratoræ¥å£çš„æ–¹æ³•\n\n\n\n\n\nhasNext()\næ˜¯å¦è¿˜æœ‰æ›´å¤šå…ƒç´ \n\n\nnext()\nè¿”å›ä¸‹ä¸€ä¸ªå…ƒç´ \n\n\nremove()\nåˆ é™¤å…ƒç´ \n\n\n\n\nâ€‹        åœ¨è°ƒç”¨it.next()æ–¹æ³•ä¹‹å‰å¿…é¡»è¦è°ƒç”¨it.hasNext()è¿›è¡Œæ£€æµ‹ã€‚è‹¥ä¸è°ƒç”¨ï¼Œä¸”ä¸‹ä¸€æ¡è®°å½•æ— æ•ˆï¼Œç›´æ¥è°ƒç”¨it.next()ä¼šæŠ›å‡ºNoSuchElementExceptionå¼‚å¸¸ã€‚\nIterator iterator = coll.iterator();\n//hasNext():åˆ¤æ–­æ˜¯å¦è¿˜æœ‰ä¸‹ä¸€ä¸ªå…ƒç´ \nwhile(iterator.hasNext()){\n\t//next():â‘ æŒ‡é’ˆä¸‹ç§» â‘¡å°†ä¸‹ç§»ä»¥åé›†åˆä½ç½®ä¸Šçš„å…ƒç´ è¿”å›\n\tSystem.out.println(iterator.next());\n}\n\nIterator iter = coll.iterator();//å›åˆ°èµ·ç‚¹\nwhile(iter.hasNext()){\n\tObject obj = iter.next();\n\tif(obj.equals(\"Tom\")){\n\t\titer.remove();\n\t} \n}\nâ€‹        å¦‚æœè¿˜æœªè°ƒç”¨next()æˆ–åœ¨ä¸Šä¸€æ¬¡è°ƒç”¨ next æ–¹æ³•ä¹‹åå·²ç»è°ƒç”¨äº† remove æ–¹æ³•ï¼Œå†è°ƒç”¨removeéƒ½ä¼šæŠ¥IllegalStateExceptionã€‚\nä½¿ç”¨ foreach å¾ªç¯éå†é›†åˆå…ƒç´ Java 5.0 æä¾›äº† foreach å¾ªç¯è¿­ä»£è®¿é—® Collectionå’Œæ•°ç»„ã€‚\néå†æ“ä½œä¸éœ€è·å–Collectionæˆ–æ•°ç»„çš„é•¿åº¦ï¼Œæ— éœ€ä½¿ç”¨ç´¢å¼•è®¿é—®å…ƒç´ ã€‚\néå†é›†åˆçš„åº•å±‚è°ƒç”¨Iteratorå®Œæˆæ“ä½œã€‚\nforeachè¿˜å¯ä»¥ç”¨æ¥éå†æ•°ç»„ã€‚\nfor(Person : persons){\n    ...;\n}\n1.4 Collectionå­æ¥å£ä¸€ï¼šListListé›†åˆç±»ä¸­å…ƒç´ æœ‰åºã€ä¸”å¯é‡å¤ï¼Œé›†åˆä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æœ‰å…¶å¯¹åº”çš„é¡ºåºç´¢å¼•ã€‚\nListå®¹å™¨ä¸­çš„å…ƒç´ éƒ½å¯¹åº”ä¸€ä¸ªæ•´æ•°å‹çš„åºå·è®°è½½å…¶åœ¨å®¹å™¨ä¸­çš„ä½ç½®ï¼Œå¯ä»¥æ ¹æ®åºå·å­˜å–å®¹å™¨ä¸­çš„å…ƒç´ ã€‚\nJDK APIä¸­Listæ¥å£çš„å®ç°ç±»å¸¸ç”¨çš„æœ‰ï¼šArrayListã€LinkedListå’ŒVectorã€‚\nListæ¥å£æ–¹æ³•\n\n\n\näº›æ ¹æ®ç´¢å¼•æ¥æ“ä½œé›†åˆå…ƒç´ çš„æ–¹æ³•\n\n\n\n\n\nvoid add(int index, Object ele)\nåœ¨indexä½ç½®æ’å…¥eleå…ƒç´ \n\n\nboolean addAll(int index, Collection eles)\nindexä½ç½®å¼€å§‹å°†elesä¸­çš„æ‰€æœ‰å…ƒç´ æ·»åŠ \n\n\nObject get(int index)\nè·å–æŒ‡å®šindexä½ç½®çš„å…ƒç´ \n\n\nint indexOf(Object obj)\nè¿”å›objåœ¨é›†åˆä¸­é¦–æ¬¡å‡ºç°çš„ä½ç½®\n\n\nint lastIndexOf(Object obj)\nè¿”å›objåœ¨å½“å‰é›†åˆä¸­æœ«æ¬¡å‡ºç°çš„ä½ç½®\n\n\nObject remove(int index)\nç§»é™¤æŒ‡å®šindexä½ç½®çš„å…ƒç´ ï¼Œå¹¶è¿”å›æ­¤å…ƒç´ \n\n\nObject set(int index, Object ele)\nè®¾ç½®æŒ‡å®šindexä½ç½®çš„å…ƒç´ ä¸ºele\n\n\nList subList(int fromIndex, int toIndex)\nè¿”å›ä»fromIndexåˆ°toIndexä½ç½®çš„å­é›†åˆ\n\n\n\n\nArrayListæœ¬è´¨ä¸Šï¼ŒArrayListæ˜¯å¯¹è±¡å¼•ç”¨çš„ä¸€ä¸ªâ€å˜é•¿â€æ•°ç»„\nList list = new ArrayList();\nlist.add(1);\nlist.add(2);\nlist.add(3);\nlist.remove(2);\nSystem.out.println(list);\nLinkedListåŒå‘é“¾è¡¨ï¼Œå†…éƒ¨æ²¡æœ‰å£°æ˜æ•°ç»„ï¼Œè€Œæ˜¯å®šä¹‰äº†Nodeç±»å‹çš„firstå’Œlastï¼Œç”¨äºè®°å½•é¦–æœ«å…ƒç´ ã€‚åŒæ—¶ï¼Œå®šä¹‰å†…éƒ¨ç±»Nodeï¼Œä½œä¸ºLinkedListä¸­ä¿å­˜æ•°æ®çš„åŸºæœ¬ç»“æ„ã€‚Nodeé™¤äº†ä¿å­˜æ•°æ®ï¼Œè¿˜å®šä¹‰äº†ä¸¤ä¸ªå˜é‡ï¼š\nïƒ˜ prevå˜é‡è®°å½•å‰ä¸€ä¸ªå…ƒç´ çš„ä½ç½®\nïƒ˜ nextå˜é‡è®°å½•ä¸‹ä¸€ä¸ªå…ƒç´ çš„ä½ç½®\nå¯¹äºé¢‘ç¹çš„æ’å…¥æˆ–åˆ é™¤å…ƒç´ çš„æ“ä½œï¼Œå»ºè®®ä½¿ç”¨LinkedListç±»ï¼Œæ•ˆç‡è¾ƒé«˜ã€‚\nprivate static class Node&lt;E&gt; {\n    E item;\n    Node&lt;E&gt; next;\n    Node&lt;E&gt; prev;\n    Node(Node&lt;E&gt; prev, E element, Node&lt;E&gt; next) {\n        this.item = element;\n        this.next = next;\n        this.prev = prev;\n    } \n}\n\n\n\n\næ–°å¢æ–¹æ³•\næè¿°\n\n\n\n\nvoid addFirst(Object obj)\nå¤´æ’\n\n\nvoid addLast(Object obj)\nå°¾æ’\n\n\nObject getFirst()\nå¾—åˆ°å¤´èŠ‚ç‚¹\n\n\nObject getLast()\nå¾—åˆ°å°¾èŠ‚ç‚¹\n\n\nObject removeFirst()\nåˆ é™¤å¤´èŠ‚ç‚¹\n\n\nObject removeLast()\nåˆ é™¤å°¾èŠ‚ç‚¹\n\n\n\n\nVectorVector æ˜¯ä¸€ä¸ªå¤è€çš„é›†åˆï¼ŒJDK1.0å°±æœ‰äº†ã€‚å¤§å¤šæ•°æ“ä½œä¸ArrayListç›¸åŒï¼ŒåŒºåˆ«ä¹‹å¤„åœ¨äºVectoræ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚\n\n\n\n\næ–°å¢æ–¹æ³•\n\n\n\n\n\nvoid addElement(Object obj)\n\n\n\nvoid insertElementAt(Object obj,int index)\n\n\n\nvoid setElementAt(Object obj,int index)\n\n\n\nvoid removeElement(Object obj)\n\n\n\nvoid removeAllElements()\n\n\n\n\né¢è¯•é¢˜â€‹        è¯·é—®ArrayList/LinkedList/Vectorçš„å¼‚åŒï¼Ÿè°ˆè°ˆä½ çš„ç†è§£ï¼ŸArrayListåº•å±‚æ˜¯ä»€ä¹ˆï¼Ÿæ‰©å®¹æœºåˆ¶ï¼ŸVectorå’ŒArrayListçš„æœ€å¤§åŒºåˆ«? \n\nArrayListå’ŒLinkedListçš„å¼‚åŒ\n\nâ€‹        äºŒè€…éƒ½çº¿ç¨‹ä¸å®‰å…¨ï¼Œç›¸å¯¹çº¿ç¨‹å®‰å…¨çš„Vectorï¼Œæ‰§è¡Œæ•ˆç‡é«˜ã€‚æ­¤å¤–ï¼ŒArrayListæ˜¯å®ç°äº†åŸºäºåŠ¨æ€æ•°ç»„çš„æ•°æ®ç»“æ„ï¼ŒLinkedListåŸºäºé“¾è¡¨çš„æ•°æ®ç»“æ„ã€‚å¯¹äºéšæœºè®¿é—®getå’Œsetï¼ŒArrayListè§‰å¾—ä¼˜äºLinkedListï¼Œå› ä¸ºLinkedListè¦ç§»åŠ¨æŒ‡é’ˆã€‚å¯¹äºæ–°å¢å’Œåˆ é™¤æ“ä½œadd(ç‰¹æŒ‡æ’å…¥)å’Œremoveï¼ŒLinkedListæ¯”è¾ƒå ä¼˜åŠ¿ï¼Œå› ä¸ºArrayListè¦ç§»åŠ¨æ•°æ®ã€‚\n\nArrayListå’ŒVectorçš„åŒºåˆ«\n\nâ€‹        Vectorå’ŒArrayListå‡ ä¹æ˜¯å®Œå…¨ç›¸åŒçš„,å”¯ä¸€çš„åŒºåˆ«åœ¨äºVectoræ˜¯åŒæ­¥ç±»(synchronized)ï¼Œå±äºå¼ºåŒæ­¥ç±»ã€‚å› æ­¤å¼€é”€å°±æ¯”ArrayListè¦å¤§ï¼Œè®¿é—®è¦æ…¢ã€‚æ­£å¸¸æƒ…å†µä¸‹,å¤§å¤šæ•°çš„Javaç¨‹åºå‘˜ä½¿ç”¨ArrayListè€Œä¸æ˜¯Vector,å› ä¸ºåŒæ­¥å®Œå…¨å¯ä»¥ç”±ç¨‹åºå‘˜è‡ªå·±æ¥æ§åˆ¶ã€‚Vectoræ¯æ¬¡æ‰©å®¹è¯·æ±‚å…¶å¤§å°çš„2å€ç©ºé—´ï¼Œè€ŒArrayListæ˜¯1.5å€ã€‚Vectorè¿˜æœ‰ä¸€ä¸ªå­ç±»Stackã€‚\n1.5 Collectionå­æ¥å£äºŒï¼šSetSetæ¥å£æ˜¯Collectionçš„å­æ¥å£ï¼Œsetæ¥å£æ²¡æœ‰æä¾›é¢å¤–çš„æ–¹æ³•ã€‚\nSet é›†åˆä¸å…è®¸åŒ…å«ç›¸åŒçš„å…ƒç´ ï¼Œå¦‚æœè¯•æŠŠä¸¤ä¸ªç›¸åŒçš„å…ƒç´ åŠ å…¥åŒä¸€ä¸ªSet é›†åˆä¸­ï¼Œåˆ™æ·»åŠ æ“ä½œå¤±è´¥ã€‚\nSet åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸åŒä¸æ˜¯ä½¿ç”¨ == è¿ç®—ç¬¦ï¼Œè€Œæ˜¯æ ¹æ® equals() æ–¹æ³•ã€‚\nHashSetâ€‹        HashSet æŒ‰ Hash ç®—æ³•æ¥å­˜å‚¨é›†åˆä¸­çš„å…ƒç´ ï¼Œå› æ­¤å…·æœ‰å¾ˆå¥½çš„å­˜å–ã€æŸ¥æ‰¾ã€åˆ é™¤æ€§èƒ½ã€‚ \nHashSetå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š\n\nä¸èƒ½ä¿è¯å…ƒç´ çš„æ’åˆ—é¡ºåº\nHashSet ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„\né›†åˆå…ƒç´ å¯ä»¥æ˜¯ null\n\nHashSeté›†åˆåˆ¤æ–­ä¸¤ä¸ªå…ƒç´ ç›¸ç­‰çš„æ ‡å‡†ï¼šä¸¤ä¸ªå¯¹è±¡é€šè¿‡ hashCode() æ–¹æ³•æ¯”è¾ƒç›¸ç­‰ï¼Œå¹¶ä¸”ä¸¤ä¸ªå¯¹è±¡çš„ equals() æ–¹æ³•è¿”å›å€¼ä¹Ÿç›¸ç­‰ã€‚ \nå¯¹äºå­˜æ”¾åœ¨Setå®¹å™¨ä¸­çš„å¯¹è±¡ï¼Œå¯¹åº”çš„ç±»ä¸€å®šè¦é‡å†™equals()å’ŒhashCode(Objectobj)æ–¹æ³•ï¼Œä»¥å®ç°å¯¹è±¡ç›¸ç­‰è§„åˆ™ã€‚å³ï¼šâ€œç›¸ç­‰çš„å¯¹è±¡å¿…é¡»å…·æœ‰ç›¸ç­‰çš„æ•£åˆ—ç â€ã€‚\nå‘HashSetä¸­æ·»åŠ å…ƒç´ çš„è¿‡ç¨‹ï¼š\nâ€‹        å½“å‘ HashSet é›†åˆä¸­å­˜å…¥ä¸€ä¸ªå…ƒç´ æ—¶ï¼ŒHashSet ä¼šè°ƒç”¨è¯¥å¯¹è±¡çš„ hashCode() æ–¹æ³•æ¥å¾—åˆ°è¯¥å¯¹è±¡çš„ hashCode å€¼ï¼Œç„¶åæ ¹æ® hashCode å€¼ï¼Œé€šè¿‡æŸç§æ•£åˆ—å‡½æ•°å†³å®šè¯¥å¯¹è±¡åœ¨ HashSet åº•å±‚æ•°ç»„ä¸­çš„å­˜å‚¨ä½ç½®ã€‚ï¼ˆè¿™ä¸ªæ•£åˆ—å‡½æ•°ä¼šä¸åº•å±‚æ•°ç»„çš„é•¿åº¦ç›¸è®¡ç®—å¾—åˆ°åœ¨æ•°ç»„ä¸­çš„ä¸‹æ ‡ï¼Œå¹¶ä¸”è¿™ç§æ•£åˆ—å‡½æ•°è®¡ç®—è¿˜å°½å¯èƒ½ä¿è¯èƒ½å‡åŒ€å­˜å‚¨å…ƒç´ ï¼Œè¶Šæ˜¯æ•£åˆ—åˆ†å¸ƒï¼Œè¯¥æ•£åˆ—å‡½æ•°è®¾è®¡çš„è¶Šå¥½ï¼‰ \nâ€‹        å¦‚æœä¸¤ä¸ªå…ƒç´ çš„hashCode()å€¼ç›¸ç­‰ï¼Œä¼šå†ç»§ç»­è°ƒç”¨equalsæ–¹æ³•ï¼Œå¦‚æœequalsæ–¹æ³•ç»“æœä¸ºtrueï¼Œæ·»åŠ å¤±è´¥ï¼›å¦‚æœä¸ºfalseï¼Œé‚£ä¹ˆä¼šä¿å­˜è¯¥å…ƒç´ ï¼Œä½†æ˜¯è¯¥æ•°ç»„çš„ä½ç½®å·²ç»æœ‰å…ƒç´ äº†ï¼Œé‚£ä¹ˆä¼šé€šè¿‡é“¾è¡¨çš„æ–¹å¼ç»§ç»­é“¾æ¥ã€‚ \nâ€‹        å¦‚æœä¸¤ä¸ªå…ƒç´ çš„ equals() æ–¹æ³•è¿”å› trueï¼Œä½†å®ƒä»¬çš„ hashCode() è¿”å›å€¼ä¸ç›¸ç­‰ï¼ŒhashSet å°†ä¼šæŠŠå®ƒä»¬å­˜å‚¨åœ¨ä¸åŒçš„ä½ç½®ï¼Œä½†ä¾ç„¶å¯ä»¥æ·»åŠ æˆåŠŸã€‚\né‡å†™ hashCode() æ–¹æ³•çš„åŸºæœ¬åŸåˆ™\n\nåœ¨ç¨‹åºè¿è¡Œæ—¶ï¼ŒåŒä¸€ä¸ªå¯¹è±¡å¤šæ¬¡è°ƒç”¨ hashCode() æ–¹æ³•åº”è¯¥è¿”å›ç›¸åŒçš„å€¼ã€‚\nå½“ä¸¤ä¸ªå¯¹è±¡çš„ equals() æ–¹æ³•æ¯”è¾ƒè¿”å› true æ—¶ï¼Œè¿™ä¸¤ä¸ªå¯¹è±¡çš„ hashCode() æ–¹æ³•çš„è¿”å›å€¼ä¹Ÿåº”ç›¸ç­‰ã€‚\nå¯¹è±¡ä¸­ç”¨ä½œ equals() æ–¹æ³•æ¯”è¾ƒçš„ Fieldï¼Œéƒ½åº”è¯¥ç”¨æ¥è®¡ç®— hashCode å€¼ã€‚\n\nä»¥è‡ªå®šä¹‰çš„Customerç±»ä¸ºä¾‹ï¼Œä½•æ—¶éœ€è¦é‡å†™equals()ï¼Ÿ\n\nå½“ä¸€ä¸ªç±»æœ‰è‡ªå·±ç‰¹æœ‰çš„â€œé€»è¾‘ç›¸ç­‰â€æ¦‚å¿µ,å½“æ”¹å†™equals()çš„æ—¶å€™ï¼Œæ€»æ˜¯è¦æ”¹å†™hashCode()ï¼Œæ ¹æ®ä¸€ä¸ªç±»çš„equalsæ–¹æ³•ï¼ˆæ”¹å†™åï¼‰ï¼Œä¸¤ä¸ªæˆªç„¶ä¸åŒçš„å®ä¾‹æœ‰å¯èƒ½åœ¨é€»è¾‘ä¸Šæ˜¯ç›¸ç­‰çš„ï¼Œä½†æ˜¯ï¼Œæ ¹æ®Object.hashCode()æ–¹æ³•ï¼Œå®ƒä»¬ä»…ä»…æ˜¯ä¸¤ä¸ªå¯¹è±¡ã€‚\nå› æ­¤ï¼Œè¿åäº†â€œç›¸ç­‰çš„å¯¹è±¡å¿…é¡»å…·æœ‰ç›¸ç­‰çš„æ•£åˆ—ç â€ã€‚\nç»“è®ºï¼šå¤å†™equalsæ–¹æ³•çš„æ—¶å€™ä¸€èˆ¬éƒ½éœ€è¦åŒæ—¶å¤å†™hashCodeæ–¹æ³•ã€‚é€šå¸¸å‚ä¸è®¡ç®—hashCodeçš„å¯¹è±¡çš„å±æ€§ä¹Ÿåº”è¯¥å‚ä¸åˆ°equals()ä¸­è¿›è¡Œè®¡ç®—ã€‚\n\nä»¥Eclipse/IDEAä¸ºä¾‹ï¼Œåœ¨è‡ªå®šä¹‰ç±»ä¸­å¯ä»¥è°ƒç”¨å·¥å…·è‡ªåŠ¨é‡å†™equalså’ŒhashCodeã€‚é—®é¢˜ï¼šä¸ºä»€ä¹ˆç”¨Eclipse/IDEAå¤å†™hashCodeæ–¹æ³•ï¼Œæœ‰31è¿™ä¸ªæ•°å­—ï¼Ÿ\n\né€‰æ‹©ç³»æ•°çš„æ—¶å€™è¦é€‰æ‹©å°½é‡å¤§çš„ç³»æ•°ã€‚å› ä¸ºå¦‚æœè®¡ç®—å‡ºæ¥çš„hashåœ°å€è¶Šå¤§ï¼Œæ‰€è°“çš„â€œå†²çªâ€å°±è¶Šå°‘ï¼ŒæŸ¥æ‰¾èµ·æ¥æ•ˆç‡ä¹Ÿä¼šæé«˜ã€‚ï¼ˆå‡å°‘å†²çªï¼‰\nå¹¶ä¸”31åªå ç”¨5bits,ç›¸ä¹˜é€ æˆæ•°æ®æº¢å‡ºçš„æ¦‚ç‡è¾ƒå°ã€‚\n31å¯ä»¥ ç”±i*31== (i&lt;&lt;5)-1æ¥è¡¨ç¤º,ç°åœ¨å¾ˆå¤šè™šæ‹Ÿæœºé‡Œé¢éƒ½æœ‰åšç›¸å…³ä¼˜åŒ–ã€‚ï¼ˆæé«˜ç®—æ³•æ•ˆç‡ï¼‰\n31æ˜¯ä¸€ä¸ªç´ æ•°ï¼Œç´ æ•°ä½œç”¨å°±æ˜¯å¦‚æœæˆ‘ç”¨ä¸€ä¸ªæ•°å­—æ¥ä¹˜ä»¥è¿™ä¸ªç´ æ•°ï¼Œé‚£ä¹ˆæœ€ç»ˆå‡ºæ¥çš„ç»“æœåªèƒ½è¢«ç´ æ•°æœ¬èº«å’Œè¢«ä¹˜æ•°è¿˜æœ‰1æ¥æ•´é™¤ï¼(å‡å°‘å†²çª)\n\nLinkedHashSetâ€‹        LinkedHashSet æ ¹æ®å…ƒç´ çš„ hashCode å€¼æ¥å†³å®šå…ƒç´ çš„å­˜å‚¨ä½ç½®ï¼Œä½†å®ƒåŒæ—¶ä½¿ç”¨åŒå‘é“¾è¡¨ç»´æŠ¤å…ƒç´ çš„æ¬¡åºï¼Œè¿™ä½¿å¾—å…ƒç´ çœ‹èµ·æ¥æ˜¯ä»¥æ’å…¥é¡ºåºä¿å­˜çš„ã€‚\nâ€‹        LinkedHashSetæ’å…¥æ€§èƒ½ç•¥ä½äº HashSetï¼Œä½†åœ¨è¿­ä»£è®¿é—® Set é‡Œçš„å…¨éƒ¨å…ƒç´ æ—¶æœ‰å¾ˆå¥½çš„æ€§èƒ½ã€‚\nâ€‹        LinkedHashSet ä¸å…è®¸é›†åˆå…ƒç´ é‡å¤ã€‚\nSet set = new LinkedHashSet();\nset.add(new String(\"AA\"));\nset.add(456);\nset.add(456);\nset.add(new Customer(\"åˆ˜å¾·å\", 1001));\nTreeSetâ€‹        TreeSet æ˜¯ SortedSet æ¥å£çš„å®ç°ç±»ï¼ŒTreeSet å¯ä»¥ç¡®ä¿é›†åˆå…ƒç´ å¤„äºæ’åºçŠ¶æ€ã€‚\nâ€‹        TreeSetåº•å±‚ä½¿ç”¨çº¢é»‘æ ‘ç»“æ„å­˜å‚¨æ•°æ®\n\n\n\n\næ–°å¢çš„æ–¹æ³•\n\n\n\n\n\nComparator comparator()\n\n\n\nObject first()\n\n\n\nObject last()\n\n\n\nObject lower(Object e)\n\n\n\nObject higher(Object e)\n\n\n\nSortedSet subSet(fromElement, toElement)\n\n\n\nSortedSet headSet(toElement)\n\n\n\nSortedSet tailSet(fromElement)\n\n\n\n\nTreeSet ä¸¤ç§æ’åºæ–¹æ³•ï¼šè‡ªç„¶æ’åºå’Œå®šåˆ¶æ’åºã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒTreeSet é‡‡ç”¨è‡ªç„¶æ’åºã€‚\nè‡ªç„¶æ’åºï¼šTreeSet ä¼šè°ƒç”¨é›†åˆå…ƒç´ çš„ compareTo(Object obj) æ–¹æ³•æ¥æ¯”è¾ƒå…ƒç´ ä¹‹é—´çš„å¤§å°å…³ç³»ï¼Œç„¶åå°†é›†åˆå…ƒç´ æŒ‰å‡åº(é»˜è®¤æƒ…å†µ)æ’åˆ—ã€‚å¦‚æœè¯•å›¾æŠŠä¸€ä¸ªå¯¹è±¡æ·»åŠ åˆ° TreeSet æ—¶ï¼Œåˆ™è¯¥å¯¹è±¡çš„ç±»å¿…é¡»å®ç° Comparable æ¥å£ã€‚\nComparable çš„å…¸å‹å®ç°ï¼š\n\nBigDecimalã€BigInteger ä»¥åŠæ‰€æœ‰çš„æ•°å€¼å‹å¯¹åº”çš„åŒ…è£…ç±»ï¼šæŒ‰å®ƒä»¬å¯¹åº”çš„æ•°å€¼å¤§å°è¿›è¡Œæ¯”è¾ƒ\nCharacterï¼šæŒ‰å­—ç¬¦çš„ unicodeå€¼æ¥è¿›è¡Œæ¯”è¾ƒ\nBooleanï¼štrue å¯¹åº”çš„åŒ…è£…ç±»å®ä¾‹å¤§äº false å¯¹åº”çš„åŒ…è£…ç±»å®ä¾‹\nStringï¼šæŒ‰å­—ç¬¦ä¸²ä¸­å­—ç¬¦çš„ unicode å€¼è¿›è¡Œæ¯”è¾ƒ\nDateã€Timeï¼šåè¾¹çš„æ—¶é—´ã€æ—¥æœŸæ¯”å‰é¢çš„æ—¶é—´ã€æ—¥æœŸå¤§\n\nâ€‹        å½“éœ€è¦æŠŠä¸€ä¸ªå¯¹è±¡æ”¾å…¥ TreeSet ä¸­ï¼Œé‡å†™è¯¥å¯¹è±¡å¯¹åº”çš„ equals() æ–¹æ³•æ—¶ï¼Œåº”ä¿è¯è¯¥æ–¹æ³•ä¸ compareTo(Object obj) æ–¹æ³•æœ‰ä¸€è‡´çš„ç»“æœï¼šå¦‚æœä¸¤ä¸ªå¯¹è±¡é€šè¿‡equals() æ–¹æ³•æ¯”è¾ƒè¿”å› trueï¼Œåˆ™é€šè¿‡ compareTo(Object obj) æ–¹æ³•æ¯”è¾ƒåº”è¿”å› 0ã€‚å¦åˆ™ï¼Œè®©äººéš¾ä»¥ç†è§£ã€‚\nå®šåˆ¶æ’åºï¼šä¸å¸Œæœ›æŒ‰ç…§å‡åº(é»˜è®¤æƒ…å†µ)çš„æ–¹å¼æ’åˆ—å…ƒç´ æˆ–å¸Œæœ›æŒ‰ç…§å…¶å®ƒå±æ€§å¤§å°è¿›è¡Œæ’åºï¼Œåˆ™è€ƒè™‘ä½¿ç”¨å®šåˆ¶æ’åºã€‚å®šåˆ¶æ’åºï¼Œé€šè¿‡Comparatoræ¥å£æ¥å®ç°ã€‚éœ€è¦é‡å†™compare(T o1,T o2)æ–¹æ³•ã€‚ å¦‚æœæ–¹æ³•è¿”å›æ­£æ•´æ•°ï¼Œåˆ™è¡¨ç¤ºo1å¤§äºo2ï¼›å¦‚æœè¿”å›0ï¼Œè¡¨ç¤ºç›¸ç­‰ï¼›è¿”å›è´Ÿæ•´æ•°ï¼Œè¡¨ç¤ºo1å°äºo2ã€‚ \né¢è¯•é¢˜HashSet set = new HashSet();\nPerson p1 = new Person(1001,\"AA\");\nPerson p2 = new Person(1002,\"BB\");\nset.add(p1);\nset.add(p2);\np1.name = \"CC\";\nset.remove(p1);\nSystem.out.println(set);\nset.add(new Person(1001,\"CC\"));\nSystem.out.println(set);\nset.add(new Person(1001,\"AA\"));\nSystem.out.println(set);\n1.6 Mapæ¥å£\nMapä¸Collectionå¹¶åˆ—å­˜åœ¨ã€‚ç”¨äºä¿å­˜å…·æœ‰æ˜ å°„å…³ç³»çš„æ•°æ®:key-value\nMap ä¸­çš„ key å’Œ value éƒ½å¯ä»¥æ˜¯ä»»ä½•å¼•ç”¨ç±»å‹çš„æ•°æ®\nMap ä¸­çš„ key ç”¨Setæ¥å­˜æ”¾ï¼Œä¸å…è®¸é‡å¤ï¼Œå³åŒä¸€ä¸ª Map å¯¹è±¡æ‰€å¯¹åº”çš„ç±»ï¼Œé¡»é‡å†™hashCode()å’Œequals()æ–¹æ³•\nå¸¸ç”¨Stringç±»ä½œä¸ºMapçš„â€œé”®â€\nkey å’Œ value ä¹‹é—´å­˜åœ¨å•å‘ä¸€å¯¹ä¸€å…³ç³»ï¼Œå³é€šè¿‡æŒ‡å®šçš„ key æ€»èƒ½æ‰¾åˆ°å”¯ä¸€çš„ã€ç¡®å®šçš„ value\nMapæ¥å£çš„å¸¸ç”¨å®ç°ç±»ï¼šHashMapã€TreeMapã€LinkedHashMapå’ŒPropertiesã€‚å…¶ä¸­ï¼ŒHashMapæ˜¯ Map æ¥å£ä½¿ç”¨é¢‘ç‡æœ€é«˜çš„å®ç°ç±»\n\nMapæ¥å£ï¼šå¸¸ç”¨æ–¹æ³•\n\n\n\næ·»åŠ ã€åˆ é™¤ã€ä¿®æ”¹æ“ä½œ\n\n\n\n\n\nObject put(Object key,Object value)\nå°†æŒ‡å®škey-valueæ·»åŠ åˆ°(æˆ–ä¿®æ”¹)å½“å‰mapå¯¹è±¡ä¸­\n\n\nvoid putAll(Map m)\nå°†mä¸­çš„æ‰€æœ‰key-valueå¯¹å­˜æ”¾åˆ°å½“å‰mapä¸­\n\n\nObject remove(Object key)\nç§»é™¤æŒ‡å®škeyçš„key-valueå¯¹ï¼Œå¹¶è¿”å›value\n\n\nvoid clear()\næ¸…ç©ºå½“å‰mapä¸­çš„æ‰€æœ‰æ•°æ®\n\n\n\n\n\n\n\n\nå…ƒç´ æŸ¥è¯¢çš„æ“ä½œ\n\n\n\n\n\nObject get(Object key)\nè·å–æŒ‡å®škeyå¯¹åº”çš„value\n\n\nboolean containsKey(Object key)\næ˜¯å¦åŒ…å«æŒ‡å®šçš„key\n\n\nboolean containsValue(Object value)\næ˜¯å¦åŒ…å«æŒ‡å®šçš„value\n\n\nint size()\nè¿”å›mapä¸­key-valueå¯¹çš„ä¸ªæ•°\n\n\nboolean isEmpty()\nåˆ¤æ–­å½“å‰mapæ˜¯å¦ä¸ºç©º\n\n\nboolean equals(Object obj)\nåˆ¤æ–­å½“å‰mapå’Œå‚æ•°å¯¹è±¡objæ˜¯å¦ç›¸ç­‰\n\n\n\n\n\n\n\n\nå…ƒè§†å›¾æ“ä½œçš„æ–¹æ³•\n\n\n\n\n\nSet keySet()\nè¿”å›æ‰€æœ‰keyæ„æˆçš„Seté›†åˆ\n\n\nCollection values()\nè¿”å›æ‰€æœ‰valueæ„æˆçš„Collectioné›†åˆ\n\n\nSet entrySet()\nè¿”å›æ‰€æœ‰key-valueå¯¹æ„æˆçš„Seté›†åˆ\n\n\n\n\nMap map = new HashMap();\n//map.put(..,..)çœç•¥\nSystem.out.println(\"mapçš„æ‰€æœ‰key:\");\nSet keys = map.keySet();// HashSet\nfor (Object key : keys) {\n\tSystem.out.println(key + \"-&gt;\" + map.get(key));\n}\nSystem.out.println(\"mapçš„æ‰€æœ‰çš„valueï¼š\");\nCollection values = map.values();\nIterator iter = values.iterator();\nwhile (iter.hasNext()) {\n\tSystem.out.println(iter.next());\n}\nSystem.out.println(\"mapæ‰€æœ‰çš„æ˜ å°„å…³ç³»ï¼š\");\n// æ˜ å°„å…³ç³»çš„ç±»å‹æ˜¯Map.Entryç±»å‹ï¼Œå®ƒæ˜¯Mapæ¥å£çš„å†…éƒ¨æ¥å£\nSet mappings = map.entrySet();\nfor (Object mapping : mappings) {\n\tMap.Entry entry = (Map.Entry) mapping;\n\tSystem.out.println(\"keyæ˜¯ï¼š\" + entry.getKey() + \"ï¼Œvalueæ˜¯ï¼š\" + entry.getValue());\n}\nHashMap\nHashMapæ˜¯ Map æ¥å£ä½¿ç”¨é¢‘ç‡æœ€é«˜çš„å®ç°ç±»ã€‚\nå…è®¸ä½¿ç”¨nullé”®å’Œnullå€¼ï¼Œä¸HashSetä¸€æ ·ï¼Œä¸ä¿è¯æ˜ å°„çš„é¡ºåºã€‚\næ‰€æœ‰çš„keyæ„æˆçš„é›†åˆæ˜¯Set:æ— åºçš„ã€ä¸å¯é‡å¤çš„ã€‚æ‰€ä»¥ï¼Œkeyæ‰€åœ¨çš„ç±»è¦é‡å†™ï¼šequals()å’ŒhashCode()\næ‰€æœ‰çš„valueæ„æˆçš„é›†åˆæ˜¯Collection:æ— åºçš„ã€å¯ä»¥é‡å¤çš„ã€‚æ‰€ä»¥ï¼Œvalueæ‰€åœ¨çš„ç±»è¦é‡å†™ï¼šequals()\nä¸€ä¸ªkey-valueæ„æˆä¸€ä¸ªentry\næ‰€æœ‰çš„entryæ„æˆçš„é›†åˆæ˜¯Set:æ— åºçš„ã€ä¸å¯é‡å¤çš„\nHashMap åˆ¤æ–­ä¸¤ä¸ª key ç›¸ç­‰çš„æ ‡å‡†æ˜¯ï¼šä¸¤ä¸ª key é€šè¿‡ equals() æ–¹æ³•è¿”å› trueï¼ŒhashCode å€¼ä¹Ÿç›¸ç­‰ã€‚\nHashMap åˆ¤æ–­ä¸¤ä¸ª value**ç›¸ç­‰çš„æ ‡å‡†**æ˜¯ï¼šä¸¤ä¸ª value é€šè¿‡ equals() æ–¹æ³•è¿”å› trueã€‚\n\nHashMapçš„å­˜å‚¨ç»“æ„\nJDK 7åŠä»¥å‰ç‰ˆæœ¬ï¼šHashMapæ˜¯æ•°ç»„+é“¾è¡¨ç»“æ„(å³ä¸ºé“¾åœ°å€æ³•)\nJDK 8ç‰ˆæœ¬å‘å¸ƒä»¥åï¼šHashMapæ˜¯æ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘å®ç°ã€‚\nHashMapæºç ä¸­çš„é‡è¦å¸¸é‡\n\nDEFAULT_INITIAL_CAPACITY : HashMapçš„é»˜è®¤å®¹é‡ï¼Œ16\nMAXIMUM_CAPACITY ï¼š HashMapçš„æœ€å¤§æ”¯æŒå®¹é‡ï¼Œ2^30\nDEFAULT_LOAD_FACTORï¼šHashMapçš„é»˜è®¤åŠ è½½å› å­\nTREEIFY_THRESHOLDï¼šBucketä¸­é“¾è¡¨é•¿åº¦å¤§äºè¯¥é»˜è®¤å€¼ï¼Œè½¬åŒ–ä¸ºçº¢é»‘æ ‘\nUNTREEIFY_THRESHOLDï¼šBucketä¸­çº¢é»‘æ ‘å­˜å‚¨çš„Nodeå°äºè¯¥é»˜è®¤å€¼ï¼Œè½¬åŒ–ä¸ºé“¾è¡¨\nMIN_TREEIFY_CAPACITYï¼šæ¡¶ä¸­çš„Nodeè¢«æ ‘åŒ–æ—¶æœ€å°çš„hashè¡¨å®¹é‡ã€‚ï¼ˆå½“æ¡¶ä¸­Nodeçš„æ•°é‡å¤§åˆ°éœ€è¦å˜çº¢é»‘æ ‘æ—¶ï¼Œè‹¥hashè¡¨å®¹é‡å°äºMIN_TREEIFY_CAPACITYæ—¶ï¼Œæ­¤æ—¶åº”æ‰§è¡Œresizeæ‰©å®¹æ“ä½œè¿™MIN_TREEIFY_CAPACITYçš„å€¼è‡³å°‘æ˜¯TREEIFY_THRESHOLDçš„4å€ã€‚ï¼‰\ntableï¼šå­˜å‚¨å…ƒç´ çš„æ•°ç»„ï¼Œæ€»æ˜¯2çš„næ¬¡å¹‚\nentrySetï¼šå­˜å‚¨å…·ä½“å…ƒç´ çš„é›†\nsizeï¼šHashMapä¸­å­˜å‚¨çš„é”®å€¼å¯¹çš„æ•°é‡\nmodCountï¼šHashMapæ‰©å®¹å’Œç»“æ„æ”¹å˜çš„æ¬¡æ•°ã€‚\nthresholdï¼šæ‰©å®¹çš„ä¸´ç•Œå€¼ï¼Œ=å®¹é‡*å¡«å……å› å­\nloadFactorï¼šå¡«å……å› å­\n\nHashMapçš„å­˜å‚¨ç»“æ„ï¼šJDK 1.8ä¹‹å‰\n\nHashMapçš„å†…éƒ¨å­˜å‚¨ç»“æ„å…¶å®æ˜¯æ•°ç»„å’Œé“¾è¡¨çš„ç»“åˆã€‚å½“å®ä¾‹åŒ–ä¸€ä¸ªHashMapæ—¶ï¼Œç³»ç»Ÿä¼šåˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸ºCapacityçš„Entryæ•°ç»„ï¼Œè¿™ä¸ªé•¿åº¦åœ¨å“ˆå¸Œè¡¨ä¸­è¢«ç§°ä¸ºå®¹é‡(Capacity)ï¼Œåœ¨è¿™ä¸ªæ•°ç»„ä¸­å¯ä»¥å­˜æ”¾å…ƒç´ çš„ä½ç½®æˆ‘ä»¬ç§°ä¹‹ä¸ºâ€œæ¡¶â€(bucket)ï¼Œæ¯ä¸ªbucketéƒ½æœ‰è‡ªå·±çš„ç´¢å¼•ï¼Œç³»ç»Ÿå¯ä»¥æ ¹æ®ç´¢å¼•å¿«é€Ÿçš„æŸ¥æ‰¾bucketä¸­çš„å…ƒç´ ã€‚ \n\næ¯ä¸ªbucketä¸­å­˜å‚¨ä¸€ä¸ªå…ƒç´ ï¼Œå³ä¸€ä¸ªEntryå¯¹è±¡ï¼Œä½†æ¯ä¸€ä¸ªEntryå¯¹è±¡å¯ä»¥å¸¦ä¸€ä¸ªå¼•ç”¨å˜é‡ï¼Œç”¨äºæŒ‡å‘ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œå› æ­¤ï¼Œåœ¨ä¸€ä¸ªæ¡¶ä¸­ï¼Œå°±æœ‰å¯èƒ½ç”Ÿæˆä¸€ä¸ªEntryé“¾ã€‚è€Œä¸”æ–°æ·»åŠ çš„å…ƒç´ ä½œä¸ºé“¾è¡¨çš„headã€‚ \n\næ·»åŠ å…ƒç´ çš„è¿‡ç¨‹ï¼š\nå‘HashMapä¸­æ·»åŠ entry1(keyï¼Œvalue)ï¼Œéœ€è¦é¦–å…ˆè®¡ç®—entry1ä¸­keyçš„å“ˆå¸Œå€¼(æ ¹æ®keyæ‰€åœ¨ç±»çš„hashCode()è®¡ç®—å¾—åˆ°)ï¼Œæ­¤å“ˆå¸Œå€¼ç»è¿‡å¤„ç†ä»¥åï¼Œå¾—åˆ°åœ¨åº•å±‚Entry[]æ•°ç»„ä¸­è¦å­˜å‚¨çš„ä½ç½®iã€‚å¦‚æœä½ç½®iä¸Šæ²¡æœ‰å…ƒç´ ï¼Œåˆ™entry1ç›´æ¥æ·»åŠ æˆåŠŸã€‚å¦‚æœä½ç½®iä¸Šå·²ç»å­˜åœ¨entry2(æˆ–è¿˜æœ‰é“¾è¡¨å­˜åœ¨çš„entry3ï¼Œentry4)ï¼Œåˆ™éœ€è¦é€šè¿‡å¾ªç¯çš„æ–¹æ³•ï¼Œä¾æ¬¡æ¯”è¾ƒentry1ä¸­keyå’Œå…¶ä»–çš„entryã€‚å¦‚æœå½¼æ­¤hashå€¼ä¸åŒï¼Œåˆ™ç›´æ¥æ·»åŠ æˆåŠŸã€‚å¦‚æœhashå€¼ä¸åŒï¼Œç»§ç»­æ¯”è¾ƒäºŒè€…æ˜¯å¦equalsã€‚å¦‚æœè¿”å›å€¼ä¸ºtrueï¼Œåˆ™ä½¿ç”¨entry1çš„valueå»æ›¿æ¢equalsä¸ºtrueçš„entryçš„valueã€‚å¦‚æœéå†ä¸€éä»¥åï¼Œå‘ç°æ‰€æœ‰çš„equalsè¿”å›éƒ½ä¸ºfalse,åˆ™entry1ä»å¯æ·»åŠ æˆåŠŸã€‚entry1æŒ‡å‘åŸæœ‰çš„entryå…ƒç´ ã€‚\n\nHashMapçš„æ‰©å®¹\nå½“HashMapä¸­çš„å…ƒç´ è¶Šæ¥è¶Šå¤šçš„æ—¶å€™ï¼Œhashå†²çªçš„å‡ ç‡ä¹Ÿå°±è¶Šæ¥è¶Šé«˜ï¼Œå› ä¸ºæ•°ç»„çš„é•¿åº¦æ˜¯å›ºå®šçš„ã€‚æ‰€ä»¥ä¸ºäº†æé«˜æŸ¥è¯¢çš„æ•ˆç‡ï¼Œå°±è¦å¯¹HashMapçš„æ•°ç»„è¿›è¡Œæ‰©å®¹ï¼Œè€Œåœ¨HashMapæ•°ç»„æ‰©å®¹ä¹‹åï¼Œæœ€æ¶ˆè€—æ€§èƒ½çš„ç‚¹å°±å‡ºç°äº†ï¼šåŸæ•°ç»„ä¸­çš„æ•°æ®å¿…é¡»é‡æ–°è®¡ç®—å…¶åœ¨æ–°æ•°ç»„ä¸­çš„ä½ç½®ï¼Œå¹¶æ”¾è¿›å»ï¼Œè¿™å°±æ˜¯resizeã€‚\n\né‚£ä¹ˆHashMapä»€ä¹ˆæ—¶å€™è¿›è¡Œæ‰©å®¹å‘¢ï¼Ÿ\nå½“HashMapä¸­çš„å…ƒç´ ä¸ªæ•°è¶…è¿‡æ•°ç»„å¤§å°(æ•°ç»„æ€»å¤§å°length,ä¸æ˜¯æ•°ç»„ä¸­ä¸ªæ•°size)*loadFactor æ—¶ ï¼Œ å°± ä¼š è¿› è¡Œ æ•° ç»„ æ‰© å®¹ ï¼Œ loadFactor çš„é»˜è®¤ å€¼ (DEFAULT_LOAD_FACTOR)ä¸º0.75ï¼Œè¿™æ˜¯ä¸€ä¸ªæŠ˜ä¸­çš„å–å€¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæ•°ç»„å¤§å°(DEFAULT_INITIAL_CAPACITY)ä¸º16ï¼Œé‚£ä¹ˆå½“HashMapä¸­å…ƒç´ ä¸ªæ•°è¶…è¿‡16*0.75=12ï¼ˆè¿™ä¸ªå€¼å°±æ˜¯ä»£ç ä¸­çš„thresholdå€¼ï¼Œä¹Ÿå«åšä¸´ç•Œå€¼ï¼‰çš„æ—¶å€™ï¼Œå°±æŠŠæ•°ç»„çš„å¤§å°æ‰©å±•ä¸º 2*16=32ï¼Œå³æ‰©å¤§ä¸€å€ï¼Œç„¶åé‡æ–°è®¡ç®—æ¯ä¸ªå…ƒç´ åœ¨æ•°ç»„ä¸­çš„ä½ç½®ï¼Œè€Œè¿™æ˜¯ä¸€ä¸ªéå¸¸æ¶ˆè€—æ€§èƒ½çš„æ“ä½œï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬å·²ç»é¢„çŸ¥HashMapä¸­å…ƒç´ çš„ä¸ªæ•°ï¼Œé‚£ä¹ˆé¢„è®¾å…ƒç´ çš„ä¸ªæ•°èƒ½å¤Ÿæœ‰æ•ˆçš„æé«˜HashMapçš„æ€§èƒ½ã€‚\n\nHashMapçš„å†…éƒ¨å­˜å‚¨ç»“æ„å…¶å®æ˜¯æ•°ç»„+é“¾è¡¨+æ ‘çš„ç»“åˆã€‚å½“å®ä¾‹åŒ–ä¸€ä¸ªHashMapæ—¶ï¼Œä¼šåˆå§‹åŒ–initialCapacityå’ŒloadFactorï¼Œåœ¨putç¬¬ä¸€å¯¹æ˜ å°„å…³ç³»æ—¶ï¼Œç³»ç»Ÿä¼šåˆ›å»ºä¸€ä¸ªé•¿åº¦ä¸ºinitialCapacityçš„Nodeæ•°ç»„ï¼Œè¿™ä¸ªé•¿åº¦åœ¨å“ˆå¸Œè¡¨ä¸­è¢«ç§°ä¸ºå®¹é‡(Capacity)ï¼Œåœ¨è¿™ä¸ªæ•°ç»„ä¸­å¯ä»¥å­˜æ”¾å…ƒç´ çš„ä½ç½®æˆ‘ä»¬ç§°ä¹‹ä¸ºâ€œæ¡¶â€(bucket)ï¼Œæ¯ä¸ªbucketéƒ½æœ‰è‡ªå·±çš„ç´¢å¼•ï¼Œç³»ç»Ÿå¯ä»¥æ ¹æ®ç´¢å¼•å¿«é€Ÿçš„æŸ¥æ‰¾bucketä¸­çš„å…ƒç´ ã€‚ \n\næ¯ä¸ªbucketä¸­å­˜å‚¨ä¸€ä¸ªå…ƒç´ ï¼Œå³ä¸€ä¸ªNodeå¯¹è±¡ï¼Œä½†æ¯ä¸€ä¸ªNodeå¯¹è±¡å¯ä»¥å¸¦ä¸€ä¸ªå¼•ç”¨å˜é‡nextï¼Œç”¨äºæŒ‡å‘ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œå› æ­¤ï¼Œåœ¨ä¸€ä¸ªæ¡¶ä¸­ï¼Œå°±æœ‰å¯èƒ½ç”Ÿæˆä¸€ä¸ªNodeé“¾ã€‚ä¹Ÿå¯èƒ½æ˜¯ä¸€ä¸ªä¸€ä¸ªTreeNodeå¯¹è±¡ï¼Œæ¯ä¸€ä¸ªTreeNodeå¯¹è±¡å¯ä»¥æœ‰ä¸¤ä¸ªå¶å­ç»“ç‚¹leftå’Œrightï¼Œå› æ­¤ï¼Œåœ¨ä¸€ä¸ªæ¡¶ä¸­ï¼Œå°±æœ‰å¯èƒ½ç”Ÿæˆä¸€ä¸ªTreeNodeæ ‘ã€‚è€Œæ–°æ·»åŠ çš„å…ƒç´ ä½œä¸ºé“¾è¡¨çš„lastï¼Œæˆ–æ ‘çš„å¶å­ç»“ç‚¹ã€‚\n\né‚£ä¹ˆHashMapä»€ä¹ˆæ—¶å€™è¿›è¡Œæ‰©å®¹å’Œæ ‘å½¢åŒ–å‘¢ï¼Ÿ \nâ€‹        å½“HashMapä¸­çš„å…ƒç´ ä¸ªæ•°è¶…è¿‡æ•°ç»„å¤§å°(æ•°ç»„æ€»å¤§å°length,ä¸æ˜¯æ•°ç»„ä¸­ä¸ªæ•°size)*loadFactor æ—¶ ï¼Œ å°±ä¼šè¿›è¡Œæ•°ç»„æ‰©å®¹ ï¼Œ loadFactor çš„é»˜è®¤ å€¼ (DEFAULT_LOAD_FACTOR)ä¸º0.75ï¼Œè¿™æ˜¯ä¸€ä¸ªæŠ˜ä¸­çš„å–å€¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæ•°ç»„å¤§å°(DEFAULT_INITIAL_CAPACITY)ä¸º16ï¼Œé‚£ä¹ˆå½“HashMapä¸­å…ƒç´ ä¸ªæ•°è¶…è¿‡16*0.75=12ï¼ˆè¿™ä¸ªå€¼å°±æ˜¯ä»£ç ä¸­çš„thresholdå€¼ï¼Œä¹Ÿå«åšä¸´ç•Œå€¼ï¼‰çš„æ—¶å€™ï¼Œå°±æŠŠæ•°ç»„çš„å¤§å°æ‰©å±•ä¸º 2*16=32ï¼Œå³æ‰©å¤§ä¸€å€ï¼Œç„¶åé‡æ–°è®¡ç®—æ¯ä¸ªå…ƒç´ åœ¨æ•°ç»„ä¸­çš„ä½ç½®ï¼Œè€Œè¿™æ˜¯ä¸€ä¸ªéå¸¸æ¶ˆè€—æ€§èƒ½çš„æ“ä½œï¼Œæ‰€ä»¥å¦‚æœæˆ‘ä»¬å·²ç»é¢„çŸ¥HashMapä¸­å…ƒç´ çš„ä¸ªæ•°ï¼Œé‚£ä¹ˆé¢„è®¾å…ƒç´ çš„ä¸ªæ•°èƒ½å¤Ÿæœ‰æ•ˆçš„æé«˜HashMapçš„æ€§èƒ½ã€‚\nâ€‹        å½“HashMapä¸­çš„å…¶ä¸­ä¸€ä¸ªé“¾çš„å¯¹è±¡ä¸ªæ•°å¦‚æœè¾¾åˆ°äº†8ä¸ªï¼Œæ­¤æ—¶å¦‚æœcapacityæ²¡æœ‰è¾¾åˆ°64ï¼Œé‚£ä¹ˆHashMapä¼šå…ˆæ‰©å®¹è§£å†³ï¼Œå¦‚æœå·²ç»è¾¾åˆ°äº†64ï¼Œé‚£ä¹ˆè¿™ä¸ªé“¾ä¼šå˜æˆæ ‘ï¼Œç»“ç‚¹ç±»å‹ç”±Nodeå˜æˆTreeNodeç±»å‹ã€‚å½“ç„¶ï¼Œå¦‚æœå½“æ˜ å°„å…³ç³»è¢«ç§»é™¤åï¼Œä¸‹æ¬¡resizeæ–¹æ³•æ—¶åˆ¤æ–­æ ‘çš„ç»“ç‚¹ä¸ªæ•°ä½äº6ä¸ªï¼Œä¹Ÿä¼šæŠŠæ ‘å†è½¬ä¸ºé“¾è¡¨ã€‚\nå…³äºæ˜ å°„å…³ç³»çš„keyæ˜¯å¦å¯ä»¥ä¿®æ”¹ï¼Ÿanswerï¼šä¸è¦ä¿®æ”¹\nâ€‹        æ˜ å°„å…³ç³»å­˜å‚¨åˆ°HashMapä¸­ä¼šå­˜å‚¨keyçš„hashå€¼ï¼Œè¿™æ ·å°±ä¸ç”¨åœ¨æ¯æ¬¡æŸ¥æ‰¾æ—¶é‡æ–°è®¡ç®—æ¯ä¸€ä¸ªEntryæˆ–Nodeï¼ˆTreeNodeï¼‰çš„hashå€¼äº†ï¼Œå› æ­¤å¦‚æœå·²ç»putåˆ°Mapä¸­çš„æ˜ å°„å…³ç³»ï¼Œå†ä¿®æ”¹keyçš„å±æ€§ï¼Œè€Œè¿™ä¸ªå±æ€§åˆå‚ä¸hashcodeå€¼çš„è®¡ç®—ï¼Œé‚£ä¹ˆä¼šå¯¼è‡´åŒ¹é…ä¸ä¸Šã€‚\næ€»ç»“ï¼šJDK1.8ç›¸è¾ƒäºä¹‹å‰çš„å˜åŒ–ï¼š\n\nHashMap map = new HashMap();//é»˜è®¤æƒ…å†µä¸‹ï¼Œå…ˆä¸åˆ›å»ºé•¿åº¦ä¸º16çš„æ•°ç»„\nå½“é¦–æ¬¡è°ƒç”¨map.put()æ—¶ï¼Œå†åˆ›å»ºé•¿åº¦ä¸º16çš„æ•°ç»„\næ•°ç»„ä¸ºNodeç±»å‹ï¼Œåœ¨jdk7ä¸­ç§°ä¸ºEntryç±»å‹\nå½¢æˆé“¾è¡¨ç»“æ„æ—¶ï¼Œæ–°æ·»åŠ çš„key-valueå¯¹åœ¨é“¾è¡¨çš„å°¾éƒ¨ï¼ˆä¸ƒä¸Šå…«ä¸‹ï¼‰\nå½“æ•°ç»„æŒ‡å®šç´¢å¼•ä½ç½®çš„é“¾è¡¨é•¿åº¦&gt;8æ—¶ï¼Œä¸”mapä¸­çš„æ•°ç»„çš„é•¿åº¦&gt; 64æ—¶ï¼Œæ­¤ç´¢å¼•ä½ç½®ä¸Šçš„æ‰€æœ‰key-valueå¯¹ä½¿ç”¨çº¢é»‘æ ‘è¿›è¡Œå­˜å‚¨ã€‚\n\né¢è¯•é¢˜è°ˆè°ˆä½ å¯¹HashMapä¸­put/getæ–¹æ³•çš„è®¤è¯†ï¼Ÿå¦‚æœäº†è§£å†è°ˆè°ˆHashMapçš„æ‰©å®¹æœºåˆ¶ï¼Ÿé»˜è®¤å¤§å°æ˜¯å¤šå°‘ï¼Ÿä»€ä¹ˆæ˜¯è´Ÿè½½å› å­(æˆ–å¡«å……æ¯”)ï¼Ÿä»€ä¹ˆæ˜¯ååä¸´ç•Œå€¼(æˆ–é˜ˆå€¼ã€threshold)ï¼Ÿ\nè´Ÿè½½å› å­å€¼çš„å¤§å°ï¼Œå¯¹HashMapæœ‰ä»€ä¹ˆå½±å“\n\nè´Ÿè½½å› å­çš„å¤§å°å†³å®šäº†HashMapçš„æ•°æ®å¯†åº¦ã€‚\nè´Ÿè½½å› å­è¶Šå¤§å¯†åº¦è¶Šå¤§ï¼Œå‘ç”Ÿç¢°æ’çš„å‡ ç‡è¶Šé«˜ï¼Œæ•°ç»„ä¸­çš„é“¾è¡¨è¶Šå®¹æ˜“é•¿,é€ æˆæŸ¥è¯¢æˆ–æ’å…¥æ—¶çš„æ¯”è¾ƒæ¬¡æ•°å¢å¤šï¼Œæ€§èƒ½ä¼šä¸‹é™ã€‚\nè´Ÿè½½å› å­è¶Šå°ï¼Œå°±è¶Šå®¹æ˜“è§¦å‘æ‰©å®¹ï¼Œæ•°æ®å¯†åº¦ä¹Ÿè¶Šå°ï¼Œæ„å‘³ç€å‘ç”Ÿç¢°æ’çš„å‡ ç‡è¶Šå°ï¼Œæ•°ç»„ä¸­çš„é“¾è¡¨ä¹Ÿå°±è¶ŠçŸ­ï¼ŒæŸ¥è¯¢å’Œæ’å…¥æ—¶æ¯”è¾ƒçš„æ¬¡æ•°ä¹Ÿè¶Šå°ï¼Œæ€§èƒ½ä¼šæ›´é«˜ã€‚ä½†æ˜¯ä¼šæµªè´¹ä¸€å®šçš„å†…å®¹ç©ºé—´ã€‚è€Œä¸”ç»å¸¸æ‰©å®¹ä¹Ÿä¼šå½±å“æ€§èƒ½ï¼Œå»ºè®®åˆå§‹åŒ–é¢„è®¾å¤§ä¸€ç‚¹çš„ç©ºé—´ã€‚\næŒ‰ç…§å…¶ä»–è¯­è¨€çš„å‚è€ƒåŠç ”ç©¶ç»éªŒï¼Œä¼šè€ƒè™‘å°†è´Ÿè½½å› å­è®¾ç½®ä¸º0.7~0.75ï¼Œæ­¤æ—¶å¹³å‡æ£€ç´¢é•¿åº¦æ¥è¿‘äºå¸¸æ•°ã€‚\n\nLinkedHashMap\nLinkedHashMap æ˜¯ HashMap çš„å­ç±»\nåœ¨HashMapå­˜å‚¨ç»“æ„çš„åŸºç¡€ä¸Šï¼Œä½¿ç”¨äº†ä¸€å¯¹åŒå‘é“¾è¡¨æ¥è®°å½•æ·»åŠ å…ƒç´ çš„é¡ºåº\nä¸LinkedHashSetç±»ä¼¼ï¼ŒLinkedHashMap å¯ä»¥ç»´æŠ¤ Map çš„è¿­ä»£é¡ºåºï¼šè¿­ä»£é¡ºåºä¸ Key-Value å¯¹çš„æ’å…¥é¡ºåºä¸€è‡´\n\n//HashMapä¸­çš„å†…éƒ¨ç±»ï¼šNode\nstatic class Node&lt;K,V&gt; implements Map.Entry&lt;K,V&gt; {\n    final int hash;\n    final K key;\n    V value;\n    Node&lt;K,V&gt; next; \n}\n//LinkedHashMapä¸­çš„å†…éƒ¨ç±»ï¼šEntry\nstatic class Entry&lt;K,V&gt; extends HashMap.Node&lt;K,V&gt; {\n    Entry&lt;K,V&gt; before, after;\n    Entry(int hash, K key, V value, Node&lt;K,V&gt; next) {\n    \tsuper(hash, key, value, next);\n    } \n}\nTreeMap\nTreeMapå­˜å‚¨ Key-Value å¯¹æ—¶ï¼Œéœ€è¦æ ¹æ® key-value å¯¹è¿›è¡Œæ’åºã€‚TreeMap å¯ä»¥ä¿è¯æ‰€æœ‰çš„ Key-Value å¯¹å¤„äºæœ‰åºçŠ¶æ€ã€‚ \nTreeSetåº•å±‚ä½¿ç”¨çº¢é»‘æ ‘ç»“æ„å­˜å‚¨æ•°æ®\nTreeMap çš„ Key çš„æ’åºï¼š\nè‡ªç„¶æ’åºï¼šTreeMap çš„æ‰€æœ‰çš„ Key å¿…é¡»å®ç° Comparable æ¥å£ï¼Œè€Œä¸”æ‰€æœ‰çš„ Key åº”è¯¥æ˜¯åŒä¸€ä¸ªç±»çš„å¯¹è±¡ï¼Œå¦åˆ™å°†ä¼šæŠ›å‡º ClasssCastException\nå®šåˆ¶æ’åºï¼šåˆ›å»º TreeMap æ—¶ï¼Œä¼ å…¥ä¸€ä¸ª Comparator å¯¹è±¡ï¼Œè¯¥å¯¹è±¡è´Ÿè´£å¯¹TreeMap ä¸­çš„æ‰€æœ‰ key è¿›è¡Œæ’åºã€‚æ­¤æ—¶ä¸éœ€è¦ Map çš„ Key å®ç°Comparable æ¥å£\n\n\nTreeMapåˆ¤æ–­ä¸¤ä¸ªkeyç›¸ç­‰çš„æ ‡å‡†ï¼šä¸¤ä¸ªkeyé€šè¿‡compareTo()æ–¹æ³•æˆ–è€…compare()æ–¹æ³•è¿”å›0ã€‚\n\nHashtable\nHashtableæ˜¯ä¸ªå¤è€çš„ Map å®ç°ç±»ï¼ŒJDK1.0å°±æä¾›äº†ã€‚ä¸åŒäºHashMapï¼ŒHashtableæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚\nHashtableå®ç°åŸç†å’ŒHashMapç›¸åŒï¼ŒåŠŸèƒ½ç›¸åŒã€‚åº•å±‚éƒ½ä½¿ç”¨å“ˆå¸Œè¡¨ç»“æ„ï¼ŒæŸ¥è¯¢é€Ÿåº¦å¿«ï¼Œå¾ˆå¤šæƒ…å†µä¸‹å¯ä»¥äº’ç”¨ã€‚ \nä¸HashMapä¸åŒï¼ŒHashtable ä¸å…è®¸ä½¿ç”¨ null ä½œä¸º key å’Œ value\nä¸HashMapä¸€æ ·ï¼ŒHashtable ä¹Ÿä¸èƒ½ä¿è¯å…¶ä¸­ Key-Value å¯¹çš„é¡ºåº\nHashtableåˆ¤æ–­ä¸¤ä¸ªkeyç›¸ç­‰ã€ä¸¤ä¸ªvalueç›¸ç­‰çš„æ ‡å‡†ï¼Œä¸HashMapä¸€è‡´ã€‚\n\nProperties\nProperties ç±»æ˜¯ Hashtable çš„å­ç±»ï¼Œè¯¥å¯¹è±¡ç”¨äºå¤„ç†å±æ€§æ–‡ä»¶\nç”±äºå±æ€§æ–‡ä»¶é‡Œçš„ keyã€value éƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œæ‰€ä»¥ Properties é‡Œçš„ key å’Œ value éƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹\nå­˜å–æ•°æ®æ—¶ï¼Œå»ºè®®ä½¿ç”¨setProperty(String key,String value)æ–¹æ³•å’ŒgetProperty(String key)æ–¹æ³•\n\nProperties pros = new Properties();\npros.load(new FileInputStream(\"jdbc.properties\"));\nString user = pros.getProperty(\"user\");\nSystem.out.println(user);\n1.7 Collectionså·¥å…·ç±»â€‹        Collections æ˜¯ä¸€ä¸ªæ“ä½œ Setã€List å’Œ Map ç­‰é›†åˆçš„å·¥å…·ç±»â€‹        Collections ä¸­æä¾›äº†ä¸€ç³»åˆ—é™æ€çš„æ–¹æ³•å¯¹é›†åˆå…ƒç´ è¿›è¡Œæ’åºã€æŸ¥è¯¢å’Œä¿®æ”¹ç­‰æ“ä½œï¼Œè¿˜æä¾›äº†å¯¹é›†åˆå¯¹è±¡è®¾ç½®ä¸å¯å˜ã€å¯¹é›†åˆå¯¹è±¡å®ç°åŒæ­¥æ§åˆ¶ç­‰æ–¹æ³•\n\n\n\n\næ’åºæ“ä½œ\nï¼ˆå‡ä¸ºstaticæ–¹æ³•ï¼‰\n\n\n\n\nreverse(List)\nåè½¬ List ä¸­å…ƒç´ çš„é¡ºåº\n\n\nshuffle(List)\nå¯¹ List é›†åˆå…ƒç´ è¿›è¡Œéšæœºæ’åº\n\n\nsort(List)\næ ¹æ®å…ƒç´ çš„è‡ªç„¶é¡ºåºå¯¹æŒ‡å®š List é›†åˆå…ƒç´ æŒ‰å‡åºæ’åº\n\n\nsort(Listï¼ŒComparator)\næ ¹æ®æŒ‡å®šçš„ Comparator äº§ç”Ÿçš„é¡ºåºå¯¹ List é›†åˆå…ƒç´ è¿›è¡Œæ’åº\n\n\nswap(Listï¼Œintï¼Œ int)\nå°†æŒ‡å®š list é›†åˆä¸­çš„ i å¤„å…ƒç´ å’Œ j å¤„å…ƒç´ è¿›è¡Œäº¤æ¢\n\n\n\n\n\n\n\n\næŸ¥æ‰¾ã€æ›¿æ¢\n\n\n\n\n\nObject max(Collection)\næ ¹æ®å…ƒç´ çš„è‡ªç„¶é¡ºåºï¼Œè¿”å›ç»™å®šé›†åˆä¸­çš„æœ€å¤§å…ƒç´ \n\n\nObject max(Collectionï¼ŒComparator)\næ ¹æ® Comparator æŒ‡å®šçš„é¡ºåºï¼Œè¿”å›ç»™å®šé›†åˆä¸­çš„æœ€å¤§å…ƒç´ \n\n\nObject min(Collection)\n\n\n\nObject min(Collectionï¼ŒComparator)\n\n\n\nint frequency(Collectionï¼ŒObject)\nè¿”å›æŒ‡å®šé›†åˆä¸­æŒ‡å®šå…ƒç´ çš„å‡ºç°æ¬¡æ•°\n\n\nvoid copy(List dest,List src)\nå°†srcä¸­çš„å†…å®¹å¤åˆ¶åˆ°destä¸­\n\n\nboolean replaceAll(List listï¼ŒObject oldValï¼ŒObject newVal)\nä½¿ç”¨æ–°å€¼æ›¿æ¢List å¯¹è±¡çš„æ‰€æœ‰æ—§å€¼\n\n\n\n\nåŒæ­¥æ§åˆ¶:Collections ç±»ä¸­æä¾›äº†å¤šä¸ª synchronizedXxx() æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å¯ä½¿å°†æŒ‡å®šé›†åˆåŒ…è£…æˆçº¿ç¨‹åŒæ­¥çš„é›†åˆï¼Œä»è€Œå¯ä»¥è§£å†³å¤šçº¿ç¨‹å¹¶å‘è®¿é—®é›†åˆæ—¶çš„çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚\nè¡¥å……ï¼šEnumerationï¼šEnumeration æ¥å£æ˜¯ Iterator è¿­ä»£å™¨çš„ â€œå¤è€ç‰ˆæœ¬â€\nEnumeration stringEnum = new StringTokenizer(\"a-b*c-d-e-g\", \"-\");\nwhile(stringEnum.hasMoreElements()){\n    Object obj = stringEnum.nextElement();\n    System.out.println(obj); \n}\n2. æ³›å‹â€‹        é›†åˆå®¹å™¨ç±»åœ¨è®¾è®¡é˜¶æ®µ/å£°æ˜é˜¶æ®µä¸èƒ½ç¡®å®šè¿™ä¸ªå®¹å™¨åˆ°åº•å®é™…å­˜çš„æ˜¯ä»€ä¹ˆç±»å‹çš„å¯¹è±¡ï¼Œæ‰€ä»¥åœ¨JDK1.5ä¹‹å‰åªèƒ½æŠŠå…ƒç´ ç±»å‹è®¾è®¡ä¸ºObjectï¼ŒJDK1.5ä¹‹åä½¿ç”¨æ³›å‹æ¥è§£å†³ã€‚å› ä¸ºè¿™ä¸ªæ—¶å€™é™¤äº†å…ƒç´ çš„ç±»å‹ä¸ç¡®å®šï¼Œå…¶ä»–çš„éƒ¨åˆ†æ˜¯ç¡®å®šçš„ï¼Œä¾‹å¦‚å…³äºè¿™ä¸ªå…ƒç´ å¦‚ä½•ä¿å­˜ï¼Œå¦‚ä½•ç®¡ç†ç­‰æ˜¯ç¡®å®šçš„ï¼Œå› æ­¤æ­¤æ—¶æŠŠå…ƒç´ çš„ç±»å‹è®¾è®¡æˆä¸€ä¸ªå‚æ•°ï¼Œè¿™ä¸ªç±»å‹å‚æ•°å«åšæ³›å‹ã€‚Collectionï¼ŒListï¼ŒArrayList è¿™ä¸ªå°±æ˜¯ç±»å‹å‚æ•°ï¼Œå³æ³›å‹ã€‚\n2.1 ä¸ºä»€ä¹ˆè¦æœ‰æ³›å‹æ³›å‹çš„æ¦‚å¿µ\nâ€‹        æ‰€è°“æ³›å‹ï¼Œå°±æ˜¯å…è®¸åœ¨å®šä¹‰ç±»ã€æ¥å£æ—¶é€šè¿‡ä¸€ä¸ªæ ‡è¯†è¡¨ç¤ºç±»ä¸­æŸä¸ªå±æ€§çš„ç±»å‹æˆ–è€…æ˜¯æŸä¸ªæ–¹æ³•çš„è¿”å›å€¼åŠå‚æ•°ç±»å‹ã€‚è¿™ä¸ªç±»å‹å‚æ•°å°†åœ¨ä½¿ç”¨æ—¶ï¼ˆä¾‹å¦‚ï¼Œç»§æ‰¿æˆ–å®ç°è¿™ä¸ªæ¥å£ï¼Œç”¨è¿™ä¸ªç±»å‹å£°æ˜å˜é‡ã€åˆ›å»ºå¯¹è±¡æ—¶ï¼‰ç¡®å®šï¼ˆå³ä¼ å…¥å®é™…çš„ç±»å‹å‚æ•°ï¼Œä¹Ÿç§°ä¸ºç±»å‹å®å‚ï¼‰ã€‚\né‚£ä¹ˆä¸ºä»€ä¹ˆè¦æœ‰æ³›å‹å‘¢ï¼Œç›´æ¥Objectä¸æ˜¯ä¹Ÿå¯ä»¥å­˜å‚¨æ•°æ®å—ï¼Ÿ\n\nè§£å†³å…ƒç´ å­˜å‚¨çš„å®‰å…¨æ€§é—®é¢˜ï¼Œå¥½æ¯”å•†å“ã€è¯å“æ ‡ç­¾ï¼Œä¸ä¼šå¼„é”™ã€‚\nè§£å†³è·å–æ•°æ®å…ƒç´ æ—¶ï¼Œéœ€è¦ç±»å‹å¼ºåˆ¶è½¬æ¢çš„é—®é¢˜ï¼Œå¥½æ¯”ä¸ç”¨æ¯å›æ‹¿å•†å“ã€è¯å“éƒ½è¦è¾¨åˆ«ã€‚\n\n2.2 åœ¨é›†åˆä¸­ä½¿ç”¨æ³›å‹ArrayList&lt;Integer&gt; list = new ArrayList&lt;&gt;();//ç±»å‹æ¨æ–­\nlist.add(78);\nlist.add(88);\nlist.add(77);\nlist.add(66);\n//éå†æ–¹å¼ä¸€ï¼š\n//for(Integer i : list){\n    //ä¸éœ€è¦å¼ºè½¬\n    //System.out.println(i);\n//}\n//éå†æ–¹å¼äºŒï¼š\nIterator&lt;Integer&gt; iterator = list.iterator();\nwhile(iterator.hasNext()){\n\tSystem.out.println(iterator.next());\n}\nMap&lt;String,Integer&gt; map = new HashMap&lt;String,Integer&gt;();\nmap.put(\"Tom1\",34);\nmap.put(\"Tom2\",44);\nmap.put(\"Tom3\",33);\nmap.put(\"Tom4\",32);\n//æ·»åŠ å¤±è´¥\n//map.put(33, \"Tom\");\nSet&lt;Entry&lt;String,Integer&gt;&gt; entrySet = map.entrySet();\nIterator&lt;Entry&lt;String,Integer&gt;&gt; iterator = entrySet.iterator();\nwhile(iterator.hasNext()){\n    Entry&lt;String,Integer&gt; entry = iterator.next();\n    System.out.println(entry.getKey() + \"---&gt;\" + entry.getValue());\n}\n2.3 è‡ªå®šä¹‰æ³›å‹ç»“æ„è‡ªå®šä¹‰æ³›å‹ç»“æ„1.æ³›å‹çš„å£°æ˜\nâ€‹        interface List å’Œ class GenTest å…¶ä¸­ï¼ŒT,K,Vä¸ä»£è¡¨å€¼ï¼Œè€Œæ˜¯è¡¨ç¤ºç±»å‹ã€‚è¿™é‡Œä½¿ç”¨ä»»æ„å­—æ¯éƒ½å¯ä»¥ã€‚å¸¸ç”¨Tè¡¨ç¤ºï¼Œæ˜¯Typeçš„ç¼©å†™ã€‚\n2.æ³›å‹çš„å®ä¾‹åŒ–ï¼š\nä¸€å®šè¦åœ¨ç±»ååé¢æŒ‡å®šç±»å‹å‚æ•°çš„å€¼ï¼ˆç±»å‹ï¼‰ã€‚å¦‚ï¼šList strList = new ArrayList();Iterator iterator = customers.iterator();\n\nTåªèƒ½æ˜¯ç±»ï¼Œä¸èƒ½ç”¨åŸºæœ¬æ•°æ®ç±»å‹å¡«å……ã€‚ä½†å¯ä»¥ä½¿ç”¨åŒ…è£…ç±»å¡«å……\næŠŠä¸€ä¸ªé›†åˆä¸­çš„å†…å®¹é™åˆ¶ä¸ºä¸€ä¸ªç‰¹å®šçš„æ•°æ®ç±»å‹ï¼Œè¿™å°±æ˜¯genericsèƒŒåçš„æ ¸å¿ƒæ€æƒ³\n\næ³›å‹ç±»ã€æ³›å‹æ¥å£\næ³›å‹ç±»å¯èƒ½æœ‰å¤šä¸ªå‚æ•°ï¼Œæ­¤æ—¶åº”å°†å¤šä¸ªå‚æ•°ä¸€èµ·æ”¾åœ¨å°–æ‹¬å·å†…ã€‚æ¯”å¦‚ï¼š\næ³›å‹ç±»çš„æ„é€ å™¨å¦‚ä¸‹ï¼špublic GenericClass(){}ã€‚è€Œä¸‹é¢æ˜¯é”™è¯¯çš„ï¼špublic GenericClass(){}\nå®ä¾‹åŒ–åï¼Œæ“ä½œåŸæ¥æ³›å‹ä½ç½®çš„ç»“æ„å¿…é¡»ä¸æŒ‡å®šçš„æ³›å‹ç±»å‹ä¸€è‡´ã€‚\næ³›å‹ä¸åŒçš„å¼•ç”¨ä¸èƒ½ç›¸äº’èµ‹å€¼ã€‚å°½ç®¡åœ¨ç¼–è¯‘æ—¶ArrayListå’ŒArrayListæ˜¯ä¸¤ç§ç±»å‹ï¼Œä½†æ˜¯ï¼Œåœ¨è¿è¡Œæ—¶åªæœ‰ä¸€ä¸ªArrayListè¢«åŠ è½½åˆ°JVMä¸­ã€‚\n\næ³›å‹å¦‚æœä¸æŒ‡å®šï¼Œå°†è¢«æ“¦é™¤ï¼Œæ³›å‹å¯¹åº”çš„ç±»å‹å‡æŒ‰ç…§Objectå¤„ç†ï¼Œä½†ä¸ç­‰ä»·äºObjectã€‚ç»éªŒï¼šæ³›å‹è¦ä½¿ç”¨ä¸€è·¯éƒ½ç”¨ã€‚è¦ä¸ç”¨ï¼Œä¸€è·¯éƒ½ä¸è¦ç”¨ã€‚\n\nå¦‚æœæ³›å‹ç»“æ„æ˜¯ä¸€ä¸ªæ¥å£æˆ–æŠ½è±¡ç±»ï¼Œåˆ™ä¸å¯åˆ›å»ºæ³›å‹ç±»çš„å¯¹è±¡ã€‚\njdk1.7ï¼Œæ³›å‹çš„ç®€åŒ–æ“ä½œï¼šArrayList flist = new ArrayList&lt;&gt;();\næ³›å‹çš„æŒ‡å®šä¸­ä¸èƒ½ä½¿ç”¨åŸºæœ¬æ•°æ®ç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨åŒ…è£…ç±»æ›¿æ¢ã€‚\nåœ¨ç±»/æ¥å£ä¸Šå£°æ˜çš„æ³›å‹ï¼Œåœ¨æœ¬ç±»æˆ–æœ¬æ¥å£ä¸­å³ä»£è¡¨æŸç§ç±»å‹ï¼Œå¯ä»¥ä½œä¸ºéé™æ€å±æ€§çš„ç±»å‹ã€éé™æ€æ–¹æ³•çš„å‚æ•°ç±»å‹ã€éé™æ€æ–¹æ³•çš„è¿”å›å€¼ç±»å‹ã€‚ä½†åœ¨é™æ€æ–¹æ³•ä¸­ä¸èƒ½ä½¿ç”¨ç±»çš„æ³›å‹ã€‚\nå¼‚å¸¸ç±»ä¸èƒ½æ˜¯æ³›å‹çš„\nä¸èƒ½ä½¿ç”¨new E[]ã€‚ä½†æ˜¯å¯ä»¥ï¼šE[] elements = (E[])new Object[capacity];å‚è€ƒï¼šArrayListæºç ä¸­å£°æ˜ï¼šObject[] elementDataï¼Œè€Œéæ³›å‹å‚æ•°ç±»å‹æ•°ç»„ã€‚\nçˆ¶ç±»æœ‰æ³›å‹ï¼Œå­ç±»å¯ä»¥é€‰æ‹©ä¿ç•™æ³›å‹ä¹Ÿå¯ä»¥é€‰æ‹©æŒ‡å®šæ³›å‹ç±»å‹ï¼š\nå­ç±»ä¸ä¿ç•™çˆ¶ç±»çš„æ³›å‹ï¼šæŒ‰éœ€å®ç°ïƒ˜ æ²¡æœ‰ç±»å‹ æ“¦é™¤ïƒ˜ å…·ä½“ç±»å‹\nå­ç±»ä¿ç•™çˆ¶ç±»çš„æ³›å‹ï¼šæ³›å‹å­ç±»ïƒ˜ å…¨éƒ¨ä¿ç•™ïƒ˜ éƒ¨åˆ†ä¿ç•™\nç»“è®ºï¼šå­ç±»å¿…é¡»æ˜¯â€œå¯ŒäºŒä»£â€ï¼Œå­ç±»é™¤äº†æŒ‡å®šæˆ–ä¿ç•™çˆ¶ç±»çš„æ³›å‹ï¼Œè¿˜å¯ä»¥å¢åŠ è‡ªå·±çš„æ³›å‹\n\n\n\nclass Father&lt;T1, T2&gt; {\n}\n// å­ç±»ä¸ä¿ç•™çˆ¶ç±»çš„æ³›å‹\n// 1)æ²¡æœ‰ç±»å‹ æ“¦é™¤\nclass Son1 extends Father {// ç­‰ä»·äºclass Son extends Father&lt;Object,Object&gt;{\n}\n// 2)å…·ä½“ç±»å‹\nclass Son2 extends Father&lt;Integer, String&gt; {\n}\n// å­ç±»ä¿ç•™çˆ¶ç±»çš„æ³›å‹\n// 1)å…¨éƒ¨ä¿ç•™\nclass Son3&lt;T1, T2&gt; extends Father&lt;T1, T2&gt; {\n}\n// 2)éƒ¨åˆ†ä¿ç•™\nclass Son4&lt;T2&gt; extends Father&lt;Integer, T2&gt; {\n}\n\nclass Person&lt;T&gt; {\n    // ä½¿ç”¨Tç±»å‹å®šä¹‰å˜é‡\n    private T info;\n    // ä½¿ç”¨Tç±»å‹å®šä¹‰ä¸€èˆ¬æ–¹æ³•\n    public T getInfo() {\n    \treturn info; \n    }\n    public void setInfo(T info) {\n    \tthis.info = info; \n    }\n    // ä½¿ç”¨Tç±»å‹å®šä¹‰æ„é€ å™¨\n    public Person() {\n    }\n    public Person(T info) {\n    \tthis.info = info; \n    }\n    // staticçš„æ–¹æ³•ä¸­ä¸èƒ½å£°æ˜æ³›å‹\n    //public static void show(T t) {\n    //\n    //}\n    // ä¸èƒ½åœ¨try-catchä¸­ä½¿ç”¨æ³›å‹å®šä¹‰\n    //public void test() {\n    //try {\n    //\n    //} catch (MyException&lt;T&gt; ex) {\n    //\n    //}\n    //}\n}\næ³›å‹æ–¹æ³•æ³›å‹æ–¹æ³•çš„æ ¼å¼ï¼š[è®¿é—®æƒé™] &lt;æ³›å‹&gt; è¿”å›ç±»å‹ æ–¹æ³•å([æ³›å‹æ ‡è¯† å‚æ•°åç§°]) æŠ›å‡ºçš„å¼‚å¸¸\npublic class DAO {\n    public &lt;E&gt; E get(int id, E e) {\n        E result = null;\n        return result; \n    } \n}\npublic static &lt;T&gt; void fromArrayToCollection(T[] a, Collection&lt;T&gt; c) {\n    for (T o : a) {\n    \tc.add(o);\n    } \n}\npublic static void main(String[] args) {\n    Object[] ao = new Object[100];\n    Collection&lt;Object&gt; co = new ArrayList&lt;Object&gt;();\n    fromArrayToCollection(ao, co);\n    String[] sa = new String[20];\n    Collection&lt;String&gt; cs = new ArrayList&lt;&gt;();\n    fromArrayToCollection(sa, cs);\n    Collection&lt;Double&gt; cd = new ArrayList&lt;&gt;();\n    // ä¸‹é¢ä»£ç ä¸­Tæ˜¯Doubleç±»ï¼Œä½†saæ˜¯Stringç±»å‹ï¼Œç¼–è¯‘é”™è¯¯ã€‚\n    // fromArrayToCollection(sa, cd);\n    // ä¸‹é¢ä»£ç ä¸­Tæ˜¯Objectç±»å‹ï¼Œsaæ˜¯Stringç±»å‹ï¼Œå¯ä»¥èµ‹å€¼æˆåŠŸã€‚\n    fromArrayToCollection(sa, co);\n}\nclass Creature{}\nclass Person extends Creature{}\nclass Man extends Person{}\nclass PersonTest {\n    public static &lt;T extends Person&gt; void test(T t){\n    \tSystem.out.println(t);\n    }\n    public static void main(String[] args) {\n        test(new Person());\n        test(new Man());\n        //The method test(T) in the type PersonTest is not \n        //applicable for the arguments (Creature)\n        test(new Creature());\n    } \n}\n2.4 æ³›å‹åœ¨ç»§æ‰¿ä¸Šçš„ä½“ç°å¦‚æœBæ˜¯Açš„ä¸€ä¸ªå­ç±»å‹ï¼ˆå­ç±»æˆ–è€…å­æ¥å£ï¼‰ï¼Œè€ŒGæ˜¯å…·æœ‰æ³›å‹å£°æ˜çš„ç±»æˆ–æ¥å£ï¼ŒGå¹¶ä¸æ˜¯Gçš„å­ç±»å‹ï¼æ¯”å¦‚ï¼šStringæ˜¯Objectçš„å­ç±»ï¼Œä½†æ˜¯Listå¹¶ä¸æ˜¯Listçš„å­ç±»ã€‚\npublic void testGenericAndSubClass() {\n    Person[] persons = null;\n    Man[] mans = null;\n    // è€Œ Person[] æ˜¯ Man[] çš„çˆ¶ç±».\n    persons = mans;\n    Person p = mans[0];\n    // åœ¨æ³›å‹çš„é›†åˆä¸Š\n    List&lt;Person&gt; personList = null;\n    List&lt;Man&gt; manList = null;\n    // personList = manList;(æŠ¥é”™) \n}\n2.5 é€šé…ç¬¦çš„ä½¿ç”¨\nä½¿ç”¨ç±»å‹é€šé…ç¬¦ï¼šï¼Ÿæ¯”å¦‚ï¼šList&lt;?&gt; ï¼ŒMap&lt;?,?&gt;List&lt;?&gt;æ˜¯Listã€Listç­‰å„ç§æ³›å‹Listçš„çˆ¶ç±»ã€‚\nè¯»å–List&lt;?&gt;çš„å¯¹è±¡listä¸­çš„å…ƒç´ æ—¶ï¼Œæ°¸è¿œæ˜¯å®‰å…¨çš„ï¼Œå› ä¸ºä¸ç®¡listçš„çœŸå®ç±»å‹æ˜¯ä»€ä¹ˆï¼Œå®ƒåŒ…å«çš„éƒ½æ˜¯Objectã€‚\nå†™å…¥listä¸­çš„å…ƒç´ æ—¶ï¼Œä¸è¡Œã€‚å› ä¸ºæˆ‘ä»¬ä¸çŸ¥é“cçš„å…ƒç´ ç±»å‹ï¼Œæˆ‘ä»¬ä¸èƒ½å‘å…¶ä¸­æ·»åŠ å¯¹è±¡ã€‚ïƒ˜ å”¯ä¸€çš„ä¾‹å¤–æ˜¯nullï¼Œå®ƒæ˜¯æ‰€æœ‰ç±»å‹çš„æˆå‘˜ã€‚\n\n\nå°†ä»»æ„å…ƒç´ åŠ å…¥åˆ°å…¶ä¸­ä¸æ˜¯ç±»å‹å®‰å…¨çš„ï¼šCollection&lt;?&gt; c = new ArrayList();c.add(new Object()); // ç¼–è¯‘æ—¶é”™è¯¯å› ä¸ºæˆ‘ä»¬ä¸çŸ¥é“cçš„å…ƒç´ ç±»å‹ï¼Œæˆ‘ä»¬ä¸èƒ½å‘å…¶ä¸­æ·»åŠ å¯¹è±¡ã€‚addæ–¹æ³•æœ‰ç±»å‹å‚æ•°Eä½œä¸ºé›†åˆçš„å…ƒç´ ç±»å‹ã€‚æˆ‘ä»¬ä¼ ç»™addçš„ä»»ä½•å‚æ•°éƒ½å¿…é¡»æ˜¯ä¸€ä¸ªæœªçŸ¥ç±»å‹çš„å­ç±»ã€‚å› ä¸ºæˆ‘ä»¬ä¸çŸ¥é“é‚£æ˜¯ä»€ä¹ˆç±»å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬æ— æ³•ä¼ ä»»ä½•ä¸œè¥¿è¿›å»ã€‚\nå”¯ä¸€çš„ä¾‹å¤–çš„æ˜¯nullï¼Œå®ƒæ˜¯æ‰€æœ‰ç±»å‹çš„æˆå‘˜ã€‚\nå¦ä¸€æ–¹é¢ï¼Œæˆ‘ä»¬å¯ä»¥è°ƒç”¨get()æ–¹æ³•å¹¶ä½¿ç”¨å…¶è¿”å›å€¼ã€‚è¿”å›å€¼æ˜¯ä¸€ä¸ªæœªçŸ¥çš„ç±»å‹ï¼Œä½†æ˜¯æˆ‘ä»¬çŸ¥é“ï¼Œå®ƒæ€»æ˜¯ä¸€ä¸ªObjectã€‚\n\npublic static void main(String[] args) {\n    List&lt;?&gt; list = null;\n    list = new ArrayList&lt;String&gt;();\n    list = new ArrayList&lt;Double&gt;();\n    // list.add(3);//ç¼–è¯‘ä¸é€šè¿‡\n    list.add(null);\n    List&lt;String&gt; l1 = new ArrayList&lt;String&gt;();\n    List&lt;Integer&gt; l2 = new ArrayList&lt;Integer&gt;();\n    l1.add(\"å°šç¡…è°·\");\n    l2.add(15);\n    read(l1);\n    read(l2);\n}\npublic static void read(List&lt;?&gt; list) {\n    for (Object o : list) {\n    \tSystem.out.println(o);\n    } \n}\n//æ³¨æ„ç‚¹1ï¼šç¼–è¯‘é”™è¯¯ï¼šä¸èƒ½ç”¨åœ¨æ³›å‹æ–¹æ³•å£°æ˜ä¸Šï¼Œè¿”å›å€¼ç±»å‹å‰é¢&lt;&gt;ä¸èƒ½ä½¿ç”¨?\npublic static &lt;?&gt; void test(ArrayList&lt;?&gt; list){\n}\n//æ³¨æ„ç‚¹2ï¼šç¼–è¯‘é”™è¯¯ï¼šä¸èƒ½ç”¨åœ¨æ³›å‹ç±»çš„å£°æ˜ä¸Š\nclass GenericTypeClass&lt;?&gt;{\n}\n//æ³¨æ„ç‚¹3ï¼šç¼–è¯‘é”™è¯¯ï¼šä¸èƒ½ç”¨åœ¨åˆ›å»ºå¯¹è±¡ä¸Šï¼Œå³è¾¹å±äºåˆ›å»ºé›†åˆå¯¹è±¡\nArrayList&lt;?&gt; list2 = new ArrayList&lt;?&gt;();\næœ‰é™åˆ¶çš„é€šé…ç¬¦\n\n&lt;?&gt;å…è®¸æ‰€æœ‰æ³›å‹çš„å¼•ç”¨è°ƒç”¨\n\né€šé…ç¬¦æŒ‡å®šä¸Šé™ä¸Šé™extendsï¼šä½¿ç”¨æ—¶æŒ‡å®šçš„ç±»å‹å¿…é¡»æ˜¯ç»§æ‰¿æŸä¸ªç±»ï¼Œæˆ–è€…å®ç°æŸä¸ªæ¥å£ï¼Œå³&lt;= \n\né€šé…ç¬¦æŒ‡å®šä¸‹é™ä¸‹é™superï¼šä½¿ç”¨æ—¶æŒ‡å®šçš„ç±»å‹ä¸èƒ½å°äºæ“ä½œçš„ç±»ï¼Œå³&gt;=\n\nä¸¾ä¾‹ï¼š \n\n&lt;? extends Number&gt; (æ— ç©·å° , Number]åªå…è®¸æ³›å‹ä¸ºNumberåŠNumberå­ç±»çš„å¼•ç”¨è°ƒç”¨\n\n&lt;? super Number&gt; [Number , æ— ç©·å¤§) \nåªå…è®¸æ³›å‹ä¸ºNumberåŠNumberçˆ¶ç±»çš„å¼•ç”¨è°ƒç”¨\n\n&lt;? extends Comparable&gt;åªå…è®¸æ³›å‹ä¸ºå®ç°Comparableæ¥å£çš„å®ç°ç±»çš„å¼•ç”¨è°ƒç”¨\n\n\n\n\npublic static void printCollection3(Collection&lt;? extends Person&gt; coll) {\n    //Iteratoråªèƒ½ç”¨Iterator&lt;?&gt;æˆ–Iterator&lt;? extends Person&gt;.why?\n    Iterator&lt;?&gt; iterator = coll.iterator();\n    while (iterator.hasNext()) {\n    \tSystem.out.println(iterator.next());\n    } \n}\npublic static void printCollection4(Collection&lt;? super Person&gt; coll) {\n    //Iteratoråªèƒ½ç”¨Iterator&lt;?&gt;æˆ–Iterator&lt;? super Person&gt;.why?\n    Iterator&lt;?&gt; iterator = coll.iterator();\n    while (iterator.hasNext()) {\n    \tSystem.out.println(iterator.next());\n    } \n}\n2.6 æ³›å‹åº”ç”¨ä¸¾ä¾‹public static void main(String[] args) {\n    HashMap&lt;String, ArrayList&lt;Citizen&gt;&gt; map = new HashMap&lt;String, ArrayList&lt;Citizen&gt;&gt;();\n    ArrayList&lt;Citizen&gt; list = new ArrayList&lt;Citizen&gt;();\n    list.add(new Citizen(\"åˆ˜æºå¨\"));\n    list.add(new Citizen(\"æ¨å¹‚\"));\n    list.add(new Citizen(\"å°ç³¯ç±³\"));\n    map.put(\"åˆ˜æºå¨\", list);\n    Set&lt;Entry&lt;String, ArrayList&lt;Citizen&gt;&gt;&gt; entrySet = map.entrySet();\n    Iterator&lt;Entry&lt;String, ArrayList&lt;Citizen&gt;&gt;&gt; iterator = entrySet.iterator();\n    while (iterator.hasNext()) {\n        Entry&lt;String, ArrayList&lt;Citizen&gt;&gt; entry = iterator.next();\n        String key = entry.getKey();\n        ArrayList&lt;Citizen&gt; value = entry.getValue();\n        System.out.println(\"æˆ·ä¸»ï¼š\" + key);\n        System.out.println(\"å®¶åº­æˆå‘˜ï¼š\" + value);\n    } \n}\n","slug":"J4-é›†åˆã€æ³›å‹","date":"2021-11-12T02:30:35.000Z","categories_index":"JAVA","tags_index":"java","author_index":"YFR718"},{"id":"d0396f84e2a9cf009e1f2a35f0f836dd","title":"å¸¸ç”¨ç±»ã€æšä¸¾ã€æ³¨è§£","content":"1. Javaå¸¸ç”¨ç±»0. WapperåŒ…è£…ç±»ing\n1.1 å­—ç¬¦ä¸²ç›¸å…³çš„ç±»StringStringçš„ç‰¹æ€§\n\nStringç±»ï¼šä»£è¡¨å­—ç¬¦ä¸²ã€‚Java ç¨‹åºä¸­çš„æ‰€æœ‰å­—ç¬¦ä¸²å­—é¢å€¼ï¼ˆå¦‚ â€œabcâ€ ï¼‰éƒ½ä½œä¸ºæ­¤ç±»çš„å®ä¾‹å®ç°ã€‚\nStringæ˜¯ä¸€ä¸ªfinalç±»ï¼Œä»£è¡¨ä¸å¯å˜çš„å­—ç¬¦åºåˆ—ã€‚\nå­—ç¬¦ä¸²æ˜¯å¸¸é‡ï¼Œç”¨åŒå¼•å·å¼•èµ·æ¥è¡¨ç¤ºã€‚å®ƒä»¬çš„å€¼åœ¨åˆ›å»ºä¹‹åä¸èƒ½æ›´æ”¹ã€‚\nStringå¯¹è±¡çš„å­—ç¬¦å†…å®¹æ˜¯å­˜å‚¨åœ¨ä¸€ä¸ªå­—ç¬¦æ•°ç»„value[]ä¸­çš„ã€‚\n\nStringå¯¹è±¡çš„åˆ›å»º\nString str = \"hello\";\n\n//æœ¬è´¨ä¸Šthis.value = new char[0];\nString s1 = new String(); \n\n//this.value = original.value;\nString s2 = new String(String original); \n\n//this.value = Arrays.copyOf(value, value.length);\nString s3 = new String(char[] a); \nString s4 = new String(char[] a,int startIndex,int count);\nå­—ç¬¦ä¸²å¯¹è±¡æ˜¯å¦‚ä½•å­˜å‚¨çš„ç»“è®ºï¼š\n\nå¸¸é‡ä¸å¸¸é‡çš„æ‹¼æ¥ç»“æœåœ¨å¸¸é‡æ± ã€‚ä¸”å¸¸é‡æ± ä¸­ä¸ä¼šå­˜åœ¨ç›¸åŒå†…å®¹çš„å¸¸é‡ã€‚\nåªè¦å…¶ä¸­æœ‰ä¸€ä¸ªæ˜¯å˜é‡ï¼Œç»“æœå°±åœ¨å †ä¸­\nå¦‚æœæ‹¼æ¥çš„ç»“æœè°ƒç”¨intern()æ–¹æ³•ï¼Œè¿”å›å€¼å°±åœ¨å¸¸é‡æ± ä¸­\n\nStringä½¿ç”¨é™·é˜±\n\nString s1 = â€œaâ€;è¯´æ˜ï¼šåœ¨å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­åˆ›å»ºäº†ä¸€ä¸ªå­—é¢é‡ä¸ºâ€aâ€çš„å­—ç¬¦ä¸²ã€‚\ns1 = s1 + â€œbâ€;è¯´æ˜ï¼šå®é™…ä¸ŠåŸæ¥çš„â€œaâ€å­—ç¬¦ä¸²å¯¹è±¡å·²ç»ä¸¢å¼ƒäº†ï¼Œç°åœ¨åœ¨å †ç©ºé—´ä¸­äº§ç”Ÿäº†ä¸€ä¸ªå­—ç¬¦ä¸²s1+â€bâ€ï¼ˆä¹Ÿå°±æ˜¯â€abâ€)ã€‚å¦‚æœå¤šæ¬¡æ‰§è¡Œè¿™äº›æ”¹å˜ä¸²å†…å®¹çš„æ“ä½œï¼Œä¼šå¯¼è‡´å¤§é‡å‰¯æœ¬å­—ç¬¦ä¸²å¯¹è±¡å­˜ç•™åœ¨å†…å­˜ä¸­ï¼Œé™ä½æ•ˆç‡ã€‚å¦‚æœè¿™æ ·çš„æ“ä½œæ”¾åˆ°å¾ªç¯ä¸­ï¼Œä¼šæå¤§å½±å“ç¨‹åºçš„æ€§èƒ½ã€‚\nString s2 = â€œabâ€;è¯´æ˜ï¼šç›´æ¥åœ¨å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­åˆ›å»ºä¸€ä¸ªå­—é¢é‡ä¸ºâ€abâ€çš„å­—ç¬¦ä¸²ã€‚\nString s3 = â€œaâ€ + â€œbâ€;è¯´æ˜ï¼šs3æŒ‡å‘å­—ç¬¦ä¸²å¸¸é‡æ± ä¸­å·²ç»åˆ›å»ºçš„â€abâ€çš„å­—ç¬¦ä¸²ã€‚String s4 = s1.intern();è¯´æ˜ï¼šå †ç©ºé—´çš„s1å¯¹è±¡åœ¨è°ƒç”¨intern()ä¹‹åï¼Œä¼šå°†å¸¸é‡æ± ä¸­å·²ç»å­˜åœ¨çš„â€abâ€å­—ç¬¦ä¸²èµ‹å€¼ç»™s4ã€‚\n\nStringå¸¸ç”¨æ–¹æ³•\nint length()ï¼šè¿”å›å­—ç¬¦ä¸²çš„é•¿åº¦ï¼š return value.length\nchar charAt(int index)ï¼š è¿”å›æŸç´¢å¼•å¤„çš„å­—ç¬¦return value[index]\nboolean isEmpty()ï¼šåˆ¤æ–­æ˜¯å¦æ˜¯ç©ºå­—ç¬¦ä¸²ï¼šreturn value.length == 0\nString toLowerCase()ï¼šä½¿ç”¨é»˜è®¤è¯­è¨€ç¯å¢ƒï¼Œå°† String ä¸­çš„æ‰€æœ‰å­—ç¬¦è½¬æ¢ä¸ºå°å†™\nString toUpperCase()ï¼šä½¿ç”¨é»˜è®¤è¯­è¨€ç¯å¢ƒï¼Œå°† String ä¸­çš„æ‰€æœ‰å­—ç¬¦è½¬æ¢ä¸ºå¤§å†™\nString trim()ï¼šè¿”å›å­—ç¬¦ä¸²çš„å‰¯æœ¬ï¼Œå¿½ç•¥å‰å¯¼ç©ºç™½å’Œå°¾éƒ¨ç©ºç™½\nboolean equals(Object obj)ï¼šæ¯”è¾ƒå­—ç¬¦ä¸²çš„å†…å®¹æ˜¯å¦ç›¸åŒ\nboolean equalsIgnoreCase(String anotherString)ï¼šä¸equalsæ–¹æ³•ç±»ä¼¼ï¼Œå¿½ç•¥å¤§å°å†™\nString concat(String str)ï¼šå°†æŒ‡å®šå­—ç¬¦ä¸²è¿æ¥åˆ°æ­¤å­—ç¬¦ä¸²çš„ç»“å°¾ã€‚ ç­‰ä»·äºç”¨â€œ+â€\nint compareTo(String anotherString)ï¼šæ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²çš„å¤§å°\nString substring(int beginIndex)ï¼šè¿”å›ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œå®ƒæ˜¯æ­¤å­—ç¬¦ä¸²çš„ä»beginIndexå¼€å§‹æˆªå–åˆ°æœ€åçš„ä¸€ä¸ªå­å­—ç¬¦ä¸²ã€‚\nString substring(int beginIndex, int endIndex) ï¼šè¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼Œå®ƒæ˜¯æ­¤å­—ç¬¦ä¸²ä»beginIndexå¼€å§‹æˆªå–åˆ°endIndex(ä¸åŒ…å«)çš„ä¸€ä¸ªå­å­—ç¬¦ä¸²ã€‚\nboolean endsWith(String suffix)ï¼šæµ‹è¯•æ­¤å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŒ‡å®šçš„åç¼€ç»“æŸ\nboolean startsWith(String prefix)ï¼šæµ‹è¯•æ­¤å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŒ‡å®šçš„å‰ç¼€å¼€å§‹\nboolean startsWith(String prefix, int toffset)ï¼šæµ‹è¯•æ­¤å­—ç¬¦ä¸²ä»æŒ‡å®šç´¢å¼•å¼€å§‹çš„å­å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŒ‡å®šå‰ç¼€å¼€å§‹\nboolean contains(CharSequence s)ï¼šå½“ä¸”ä»…å½“æ­¤å­—ç¬¦ä¸²åŒ…å«æŒ‡å®šçš„ char å€¼åºåˆ—æ—¶ï¼Œè¿”å› true\nint indexOf(String str)ï¼šè¿”å›æŒ‡å®šå­å­—ç¬¦ä¸²åœ¨æ­¤å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€æ¬¡å‡ºç°å¤„çš„ç´¢å¼•\nint indexOf(String str, int fromIndex)ï¼šè¿”å›æŒ‡å®šå­å­—ç¬¦ä¸²åœ¨æ­¤å­—ç¬¦ä¸²ä¸­ç¬¬ä¸€æ¬¡å‡ºç°å¤„çš„ç´¢å¼•ï¼Œä»æŒ‡å®šçš„ç´¢å¼•å¼€å§‹\nint lastIndexOf(String str)ï¼šè¿”å›æŒ‡å®šå­å­—ç¬¦ä¸²åœ¨æ­¤å­—ç¬¦ä¸²ä¸­æœ€å³è¾¹å‡ºç°å¤„çš„ç´¢å¼•\nint lastIndexOf(String str, int fromIndex)ï¼šè¿”å›æŒ‡å®šå­å­—ç¬¦ä¸²åœ¨æ­¤å­—ç¬¦ä¸²ä¸­æœ€åä¸€æ¬¡å‡ºç°å¤„çš„ç´¢å¼•ï¼Œä»æŒ‡å®šçš„ç´¢å¼•å¼€å§‹åå‘æœç´¢\nString replace(char oldChar, char newChar)ï¼šè¿”å›ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œå®ƒæ˜¯é€šè¿‡ç”¨newChar æ›¿æ¢æ­¤å­—ç¬¦ä¸²ä¸­å‡ºç°çš„æ‰€æœ‰oldChar å¾—åˆ°çš„ã€‚\nString replace(CharSequence target, CharSequence replacement)ï¼šä½¿ç”¨æŒ‡å®šçš„å­—é¢å€¼æ›¿æ¢åºåˆ—æ›¿æ¢æ­¤å­—ç¬¦ä¸²æ‰€æœ‰åŒ¹é…å­—é¢å€¼ç›®æ ‡åºåˆ—çš„å­å­—ç¬¦ä¸²ã€‚\nString replaceAll(String regex, String replacement) ï¼š ä½¿ç”¨ ç»™ å®š çš„replacement æ›¿æ¢æ­¤å­—ç¬¦ä¸²æ‰€æœ‰åŒ¹é…ç»™å®šçš„æ­£åˆ™è¡¨è¾¾å¼çš„å­å­—ç¬¦ä¸²ã€‚\nString replaceFirst(String regex, String replacement) ï¼šä½¿ç”¨ç»™å®šçš„replacement æ›¿æ¢æ­¤å­—ç¬¦ä¸²åŒ¹é…ç»™å®šçš„æ­£åˆ™è¡¨è¾¾å¼çš„ç¬¬ä¸€ä¸ªå­å­—ç¬¦ä¸²ã€‚\nboolean matches(String regex)ï¼šå‘ŠçŸ¥æ­¤å­—ç¬¦ä¸²æ˜¯å¦åŒ¹é…ç»™å®šçš„æ­£åˆ™è¡¨è¾¾å¼ã€‚\nString[] split(String regex)ï¼šæ ¹æ®ç»™å®šæ­£åˆ™è¡¨è¾¾å¼çš„åŒ¹é…æ‹†åˆ†æ­¤å­—ç¬¦ä¸²ã€‚\nString[] split(String regex, int limit)ï¼šæ ¹æ®åŒ¹é…ç»™å®šçš„æ­£åˆ™è¡¨è¾¾å¼æ¥æ‹†åˆ†æ­¤å­—ç¬¦ä¸²ï¼Œæœ€å¤šä¸è¶…è¿‡limitä¸ªï¼Œå¦‚æœè¶…è¿‡äº†ï¼Œå‰©ä¸‹çš„å…¨éƒ¨éƒ½æ”¾åˆ°æœ€åä¸€ä¸ªå…ƒç´ ä¸­ã€‚\n\nStringä¸å­—ç¬¦æ•°ç»„è½¬æ¢\nå­—ç¬¦æ•°ç»„-&gt;å­—ç¬¦ä¸²ïƒ˜    String ç±»çš„æ„é€ å™¨ï¼šString(char[]) å’Œ String(char[]ï¼Œint offsetï¼Œint length) åˆ†åˆ«ç”¨å­—ç¬¦æ•°ç»„ä¸­çš„å…¨éƒ¨å­—ç¬¦å’Œéƒ¨åˆ†å­—ç¬¦åˆ›å»ºå­—ç¬¦ä¸²å¯¹è±¡ã€‚\n\nå­—ç¬¦ä¸²-&gt;å­—ç¬¦æ•°ç»„ïƒ˜    public char[] toCharArray()ï¼šå°†å­—ç¬¦ä¸²ä¸­çš„å…¨éƒ¨å­—ç¬¦å­˜æ”¾åœ¨ä¸€ä¸ªå­—ç¬¦æ•°ç»„ä¸­çš„æ–¹æ³•ã€‚ïƒ˜    public void getChars(int srcBegin, int srcEnd, char[] dst,int dstBegin)ï¼šæä¾›äº†å°†æŒ‡å®šç´¢å¼•èŒƒå›´å†…çš„å­—ç¬¦ä¸²å­˜æ”¾åˆ°æ•°ç»„ä¸­çš„æ–¹æ³•ã€‚\n\nå­—èŠ‚æ•°ç»„-&gt;å­—ç¬¦ä¸²ïƒ˜    String(byte[])ï¼šé€šè¿‡ä½¿ç”¨å¹³å°çš„é»˜è®¤å­—ç¬¦é›†è§£ç æŒ‡å®šçš„ byte æ•°ç»„ï¼Œæ„é€ ä¸€ä¸ªæ–°çš„ Stringã€‚ïƒ˜    String(byte[]ï¼Œint offsetï¼Œint length) ï¼šç”¨æŒ‡å®šçš„å­—èŠ‚æ•°ç»„çš„ä¸€éƒ¨åˆ†ï¼Œå³ä»æ•°ç»„èµ·å§‹ä½ç½®offsetå¼€å§‹å–lengthä¸ªå­—èŠ‚æ„é€ ä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ã€‚\n\nå­—ç¬¦ä¸²-&gt;å­—èŠ‚æ•°ç»„ïƒ˜    public byte[] getBytes() ï¼šä½¿ç”¨å¹³å°çš„é»˜è®¤å­—ç¬¦é›†å°†æ­¤ String ç¼–ç ä¸ºbyte åºåˆ—ï¼Œå¹¶å°†ç»“æœå­˜å‚¨åˆ°ä¸€ä¸ªæ–°çš„ byte æ•°ç»„ä¸­ã€‚ïƒ˜    public byte[] getBytes(String charsetName) ï¼šä½¿ç”¨æŒ‡å®šçš„å­—ç¬¦é›†å°†æ­¤ String ç¼–ç åˆ° byte åºåˆ—ï¼Œå¹¶å°†ç»“æœå­˜å‚¨åˆ°æ–°çš„ byte æ•°ç»„ã€‚\n\n\nStringBufferç±»\njava.lang.StringBufferä»£è¡¨å¯å˜çš„å­—ç¬¦åºåˆ—ï¼ŒJDK1.0ä¸­å£°æ˜ï¼Œå¯ä»¥å¯¹å­—ç¬¦ä¸²å†…å®¹è¿›è¡Œå¢åˆ ï¼Œæ­¤æ—¶ä¸ä¼šäº§ç”Ÿæ–°çš„å¯¹è±¡ã€‚\nå¾ˆå¤šæ–¹æ³•ä¸Stringç›¸åŒã€‚\nä½œä¸ºå‚æ•°ä¼ é€’æ—¶ï¼Œæ–¹æ³•å†…éƒ¨å¯ä»¥æ”¹å˜å€¼ã€‚\n\nStringBufferç±»ä¸åŒäºStringï¼Œå…¶å¯¹è±¡å¿…é¡»ä½¿ç”¨æ„é€ å™¨ç”Ÿæˆã€‚æœ‰ä¸‰ä¸ªæ„é€ å™¨ï¼šïƒ˜    StringBuffer()ï¼šåˆå§‹å®¹é‡ä¸º16çš„å­—ç¬¦ä¸²ç¼“å†²åŒºïƒ˜    StringBuffer(int size)ï¼šæ„é€ æŒ‡å®šå®¹é‡çš„å­—ç¬¦ä¸²ç¼“å†²åŒºïƒ˜    StringBuffer(String str)ï¼šå°†å†…å®¹åˆå§‹åŒ–ä¸ºæŒ‡å®šå­—ç¬¦ä¸²å†…å®¹\nStringBufferç±»çš„å¸¸ç”¨æ–¹æ³•\nStringBuffer append(xxx)ï¼šæä¾›äº†å¾ˆå¤šçš„append()æ–¹æ³•ï¼Œç”¨äºè¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥\nStringBuffer delete(int start,int end)ï¼šåˆ é™¤æŒ‡å®šä½ç½®çš„å†…å®¹\nStringBuffer replace(int start, int end, String str)ï¼šæŠŠ[start,end)ä½ç½®æ›¿æ¢ä¸ºstr \nStringBuffer insert(int offset, xxx)ï¼šåœ¨æŒ‡å®šä½ç½®æ’å…¥xxx\nStringBuffer reverse() ï¼šæŠŠå½“å‰å­—ç¬¦åºåˆ—é€†è½¬\npublic int indexOf(String str)\npublic String substring(int start,int end) public int length()\npublic char charAt(int n )\npublic void setCharAt(int n ,char ch)\n\nStringBuilderç±»StringBuilder å’Œ StringBuffer éå¸¸ç±»ä¼¼ï¼Œå‡ä»£è¡¨å¯å˜çš„å­—ç¬¦åºåˆ—ï¼Œè€Œä¸”æä¾›ç›¸å…³åŠŸèƒ½çš„æ–¹æ³•ä¹Ÿä¸€æ ·é¢è¯•é¢˜ï¼šå¯¹æ¯”Stringã€StringBufferã€StringBuilderâ­â­\nïƒ˜    String(JDK1.0)ï¼šä¸å¯å˜å­—ç¬¦åºåˆ—ïƒ˜    StringBuffer(JDK1.0)ï¼šå¯å˜å­—ç¬¦åºåˆ—ã€æ•ˆç‡ä½ã€çº¿ç¨‹å®‰å…¨ïƒ˜    StringBuilder(JDK 5.0)ï¼šå¯å˜å­—ç¬¦åºåˆ—ã€æ•ˆç‡é«˜ã€çº¿ç¨‹ä¸å®‰å…¨\næ³¨æ„ï¼šä½œä¸ºå‚æ•°ä¼ é€’çš„è¯ï¼Œæ–¹æ³•å†…éƒ¨Stringä¸ä¼šæ”¹å˜å…¶å€¼ï¼ŒStringBufferå’ŒStringBuilderä¼šæ”¹å˜å…¶å€¼ã€‚\n1.2 JDK 8ä¹‹å‰çš„æ—¥æœŸæ—¶é—´API1. java.lang.Systemç±»Systemç±»æä¾›çš„public static long currentTimeMillis()ç”¨æ¥è¿”å›å½“å‰æ—¶é—´ä¸1970å¹´1æœˆ1æ—¥0æ—¶0åˆ†0ç§’ä¹‹é—´ä»¥æ¯«ç§’ä¸ºå•ä½çš„æ—¶é—´å·®ã€‚\næ­¤æ–¹æ³•é€‚äºè®¡ç®—æ—¶é—´å·®ã€‚\n\nè®¡ç®—ä¸–ç•Œæ—¶é—´çš„ä¸»è¦æ ‡å‡†æœ‰ï¼šïƒ˜    UTC(Coordinated Universal Time)ïƒ˜    GMT(Greenwich Mean Time)ïƒ˜    CST(Central Standard Time)\n\n2. java.util.Dateç±»è¡¨ç¤ºç‰¹å®šçš„ç¬é—´ï¼Œç²¾ç¡®åˆ°æ¯«ç§’\n\næ„é€ å™¨ï¼šïƒ˜    Date()ï¼šä½¿ç”¨æ— å‚æ„é€ å™¨åˆ›å»ºçš„å¯¹è±¡å¯ä»¥è·å–æœ¬åœ°å½“å‰æ—¶é—´ã€‚ïƒ˜    Date(long date)\nå¸¸ç”¨æ–¹æ³•ïƒ˜    getTime():è¿”å›è‡ª 1970 å¹´ 1 æœˆ 1 æ—¥ 00:00:00 GMT ä»¥æ¥æ­¤ Date å¯¹è±¡è¡¨ç¤ºçš„æ¯«ç§’æ•°ã€‚ïƒ˜    toString():æŠŠæ­¤ Date å¯¹è±¡è½¬æ¢ä¸ºä»¥ä¸‹å½¢å¼çš„ Stringï¼š dow mon dd hh:mm:ss zzz yyyy å…¶ä¸­ï¼š dow æ˜¯ä¸€å‘¨ä¸­çš„æŸä¸€å¤© (Sun, Mon, Tue, Wed, Thu, Fri, Sat)ï¼Œzzzæ˜¯æ—¶é—´æ ‡å‡†ã€‚ïƒ˜    å…¶å®ƒå¾ˆå¤šæ–¹æ³•éƒ½è¿‡æ—¶äº†ã€‚\n\n3. java.text.SimpleDateFormatç±»\nDateç±»çš„APIä¸æ˜“äºå›½é™…åŒ–ï¼Œå¤§éƒ¨åˆ†è¢«åºŸå¼ƒäº†ï¼Œjava.text.SimpleDateFormatç±»æ˜¯ä¸€ä¸ªä¸ä¸è¯­è¨€ç¯å¢ƒæœ‰å…³çš„æ–¹å¼æ¥æ ¼å¼åŒ–å’Œè§£ææ—¥æœŸçš„å…·ä½“ç±»ã€‚\n\nå®ƒå…è®¸è¿›è¡Œæ ¼å¼åŒ–ï¼šæ—¥æœŸïƒ æ–‡æœ¬ã€è§£æï¼šæ–‡æœ¬ïƒ æ—¥æœŸ\n\næ ¼å¼åŒ–\nïƒ˜    SimpleDateFormat() ï¼šé»˜è®¤çš„æ¨¡å¼å’Œè¯­è¨€ç¯å¢ƒåˆ›å»ºå¯¹è±¡ïƒ˜    public SimpleDateFormat(String pattern)ï¼šè¯¥æ„é€ æ–¹æ³•å¯ä»¥ç”¨å‚æ•°patternæŒ‡å®šçš„æ ¼å¼åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡è°ƒç”¨ï¼šïƒ˜    public String format(Date date)ï¼šæ–¹æ³•æ ¼å¼åŒ–æ—¶é—´å¯¹è±¡date\n\nè§£æï¼špublic Date parse(String source)ï¼šä»ç»™å®šå­—ç¬¦ä¸²çš„å¼€å§‹è§£ææ–‡æœ¬ï¼Œä»¥ç”Ÿæˆä¸€ä¸ªæ—¥æœŸã€‚\n\n\n\n4. java.util.Calendar(æ—¥å†)ç±»\nCalendaræ˜¯ä¸€ä¸ªæŠ½è±¡åŸºç±»ï¼Œä¸»ç”¨ç”¨äºå®Œæˆæ—¥æœŸå­—æ®µä¹‹é—´ç›¸äº’æ“ä½œçš„åŠŸèƒ½ã€‚\nè·å–Calendarå®ä¾‹çš„æ–¹æ³•ïƒ˜    ä½¿ç”¨Calendar.getInstance()æ–¹æ³•ïƒ˜    è°ƒç”¨å®ƒçš„å­ç±»GregorianCalendarçš„æ„é€ å™¨ã€‚\nä¸€ä¸ªCalendarçš„å®ä¾‹æ˜¯ç³»ç»Ÿæ—¶é—´çš„æŠ½è±¡è¡¨ç¤ºï¼Œé€šè¿‡get(int field)æ–¹æ³•æ¥å–å¾—æƒ³è¦çš„æ—¶é—´ä¿¡æ¯ã€‚æ¯”å¦‚YEARã€MONTHã€DAY_OF_WEEKã€HOUR_OF_DAY ã€ MINUTEã€SECONDïƒ˜    public void set(int field,int value)ïƒ˜    public void add(int field,int amount)ïƒ˜    public final Date getTime()ïƒ˜    public final void setTime(Date date)\næ³¨æ„:ïƒ˜    è·å–æœˆä»½æ—¶ï¼šä¸€æœˆæ˜¯0ï¼ŒäºŒæœˆæ˜¯1ï¼Œä»¥æ­¤ç±»æ¨ï¼Œ12æœˆæ˜¯11ïƒ˜    è·å–æ˜ŸæœŸæ—¶ï¼šå‘¨æ—¥æ˜¯1ï¼Œå‘¨äºŒæ˜¯2 ï¼Œ ã€‚ã€‚ã€‚ã€‚å‘¨å…­æ˜¯7\n\n1.3 JDK 8ä¸­æ–°æ—¥æœŸæ—¶é—´APIæ–°æ—¶é—´æ—¥æœŸAPI\nï¬    ç¬¬ä¸‰æ¬¡å¼•å…¥çš„APIæ˜¯æˆåŠŸçš„ï¼Œå¹¶ä¸”Java 8ä¸­å¼•å…¥çš„java.time API å·²ç»çº æ­£äº†è¿‡å»çš„ç¼ºé™·ï¼Œå°†æ¥å¾ˆé•¿ä¸€æ®µæ—¶é—´å†…å®ƒéƒ½ä¼šä¸ºæˆ‘ä»¬æœåŠ¡ã€‚ï¬    Java 8 å¸æ”¶äº† Joda-Time çš„ç²¾åï¼Œä»¥ä¸€ä¸ªæ–°çš„å¼€å§‹ä¸º Java åˆ›å»ºä¼˜ç§€çš„APIã€‚æ–°çš„ java.time ä¸­åŒ…å«äº†æ‰€æœ‰å…³äºæœ¬åœ°æ—¥æœŸï¼ˆLocalDateï¼‰ã€æœ¬åœ°æ—¶é—´ï¼ˆLocalTimeï¼‰ã€æœ¬åœ°æ—¥æœŸæ—¶é—´ï¼ˆLocalDateTimeï¼‰ã€æ—¶åŒºï¼ˆZonedDateTimeï¼‰å’ŒæŒç»­æ—¶é—´ï¼ˆDurationï¼‰çš„ç±»ã€‚å†å²æ‚ ä¹…çš„ Date ç±»æ–°å¢äº† toInstant() æ–¹æ³•ï¼Œç”¨äºæŠŠ Date è½¬æ¢æˆæ–°çš„è¡¨ç¤ºå½¢å¼ã€‚è¿™äº›æ–°å¢çš„æœ¬åœ°åŒ–æ—¶é—´æ—¥æœŸAPI å¤§å¤§ç®€åŒ–äº†æ—¥æœŸæ—¶é—´å’Œæœ¬åœ°åŒ–çš„ç®¡ç†ã€‚\n\njava.time â€“ åŒ…å«å€¼å¯¹è±¡çš„åŸºç¡€åŒ…\njava.time.chrono â€“ æä¾›å¯¹ä¸åŒçš„æ—¥å†ç³»ç»Ÿçš„è®¿é—®\njava.time.format â€“ æ ¼å¼åŒ–å’Œè§£ææ—¶é—´å’Œæ—¥æœŸ\njava.time.temporal â€“ åŒ…æ‹¬åº•å±‚æ¡†æ¶å’Œæ‰©å±•ç‰¹æ€§\njava.time.zone â€“ åŒ…å«æ—¶åŒºæ”¯æŒçš„ç±»\n\nï¬    LocalDateã€LocalTimeã€LocalDateTime ç±»æ˜¯å…¶ä¸­è¾ƒé‡è¦çš„å‡ ä¸ªç±»ï¼Œå®ƒä»¬çš„å®ä¾‹æ˜¯ä¸å¯å˜çš„å¯¹è±¡ï¼Œåˆ†åˆ«è¡¨ç¤ºä½¿ç”¨ ISO-8601æ—¥å†ç³»ç»Ÿçš„æ—¥æœŸã€æ—¶é—´ã€æ—¥æœŸå’Œæ—¶é—´ã€‚å®ƒä»¬æä¾›äº†ç®€å•çš„æœ¬åœ°æ—¥æœŸæˆ–æ—¶é—´ï¼Œå¹¶ä¸åŒ…å«å½“å‰çš„æ—¶é—´ä¿¡æ¯ï¼Œä¹Ÿä¸åŒ…å«ä¸æ—¶åŒºç›¸å…³çš„ä¿¡æ¯ã€‚ïƒ˜    LocalDateä»£è¡¨IOSæ ¼å¼ï¼ˆyyyy-MM-ddï¼‰çš„æ—¥æœŸ,å¯ä»¥å­˜å‚¨ ç”Ÿæ—¥ã€çºªå¿µæ—¥ç­‰æ—¥æœŸã€‚ïƒ˜    LocalTimeè¡¨ç¤ºä¸€ä¸ªæ—¶é—´ï¼Œè€Œä¸æ˜¯æ—¥æœŸã€‚ïƒ˜    LocalDateTimeæ˜¯ç”¨æ¥è¡¨ç¤ºæ—¥æœŸå’Œæ—¶é—´çš„ï¼Œè¿™æ˜¯ä¸€ä¸ªæœ€å¸¸ç”¨çš„ç±»ä¹‹ä¸€ã€‚\n\n\n\n\næ–¹æ³•\næè¿°\n\n\n\n\nnow() / *  now(ZoneId zone)\né™æ€æ–¹æ³•ï¼Œæ ¹æ®å½“å‰æ—¶é—´åˆ›å»ºå¯¹è±¡/æŒ‡å®šæ—¶åŒºçš„å¯¹è±¡\n\n\nof()\né™æ€æ–¹æ³•ï¼Œæ ¹æ®æŒ‡å®šæ—¥æœŸ/æ—¶é—´åˆ›å»ºå¯¹è±¡\n\n\ngetDayOfMonth()/getDayOfYear()\nè·å¾—æœˆä»½å¤©æ•°(1-31) /è·å¾—å¹´ä»½å¤©æ•°(1-366)\n\n\ngetDayOfWeek()\nè·å¾—æ˜ŸæœŸå‡ (è¿”å›ä¸€ä¸ª DayOfWeek æšä¸¾å€¼)\n\n\ngetMonth()\nè·å¾—æœˆä»½, è¿”å›ä¸€ä¸ª Month æšä¸¾å€¼\n\n\ngetMonthValue() / getYear()\nè·å¾—æœˆä»½(1-12) /è·å¾—å¹´ä»½\n\n\ngetHour()/getMinute()/getSecond()\nè·å¾—å½“å‰å¯¹è±¡å¯¹åº”çš„å°æ—¶ã€åˆ†é’Ÿã€ç§’\n\n\nwithDayOfMonth()/withDayOfYear()/withMonth()/withYear()\nå°†æœˆä»½å¤©æ•°ã€å¹´ä»½å¤©æ•°ã€æœˆä»½ã€å¹´ä»½ä¿®æ”¹ä¸ºæŒ‡å®šçš„å€¼å¹¶è¿”å›æ–°çš„å¯¹è±¡\n\n\nplusDays(), plusWeeks(), plusMonths(), plusYears(),plusHours()\nå‘å½“å‰å¯¹è±¡æ·»åŠ å‡ å¤©ã€å‡ å‘¨ã€å‡ ä¸ªæœˆã€å‡ å¹´ã€å‡ å°æ—¶\n\n\nminusMonths() / minusWeeks()/minusDays()/minusYears()/minusHours()\nä»å½“å‰å¯¹è±¡å‡å»å‡ æœˆã€å‡ å‘¨ã€å‡ å¤©ã€å‡ å¹´ã€å‡ å°æ—¶\n\n\n\n\nç¬æ—¶ï¼šInstantï¬    Instantï¼šæ—¶é—´çº¿ä¸Šçš„ä¸€ä¸ªç¬æ—¶ç‚¹ã€‚ è¿™å¯èƒ½è¢«ç”¨æ¥è®°å½•åº”ç”¨ç¨‹åºä¸­çš„äº‹ä»¶æ—¶é—´æˆ³ã€‚ï¬    åœ¨å¤„ç†æ—¶é—´å’Œæ—¥æœŸçš„æ—¶å€™ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šæƒ³åˆ°å¹´,æœˆ,æ—¥,æ—¶,åˆ†,ç§’ã€‚ç„¶è€Œï¼Œè¿™åªæ˜¯æ—¶é—´çš„ä¸€ä¸ªæ¨¡å‹ï¼Œæ˜¯é¢å‘äººç±»çš„ã€‚ç¬¬äºŒç§é€šç”¨æ¨¡å‹æ˜¯é¢å‘æœºå™¨çš„ï¼Œæˆ–è€…è¯´æ˜¯è¿ç»­çš„ã€‚åœ¨æ­¤æ¨¡å‹ä¸­ï¼Œæ—¶é—´çº¿ä¸­çš„ä¸€ä¸ªç‚¹è¡¨ç¤ºä¸ºä¸€ä¸ªå¾ˆå¤§çš„æ•°ï¼Œè¿™æœ‰åˆ©äºè®¡ç®—æœºå¤„ç†ã€‚åœ¨UNIXä¸­ï¼Œè¿™ä¸ªæ•°ä»1970å¹´å¼€å§‹ï¼Œä»¥ç§’ä¸ºçš„å•ä½ï¼›åŒæ ·çš„ï¼Œåœ¨Javaä¸­ï¼Œä¹Ÿæ˜¯ä»1970å¹´å¼€å§‹ï¼Œä½†ä»¥æ¯«ç§’ä¸ºå•ä½ã€‚ï¬    java.timeåŒ…é€šè¿‡å€¼ç±»å‹Instantæä¾›æœºå™¨è§†å›¾ï¼Œä¸æä¾›å¤„ç†äººç±»æ„ä¹‰ä¸Šçš„æ—¶é—´å•ä½ã€‚Instantè¡¨ç¤ºæ—¶é—´çº¿ä¸Šçš„ä¸€ç‚¹ï¼Œè€Œä¸éœ€è¦ä»»ä½•ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼Œæ—¶åŒºã€‚æ¦‚å¿µä¸Šè®²ï¼Œå®ƒåªæ˜¯ç®€å•çš„è¡¨ç¤ºè‡ª1970å¹´1æœˆ1æ—¥0æ—¶0åˆ†0ç§’ï¼ˆUTCï¼‰å¼€å§‹çš„ç§’æ•°ã€‚å› ä¸ºjava.timeåŒ…æ˜¯åŸºäºçº³ç§’è®¡ç®—çš„ï¼Œæ‰€ä»¥Instantçš„ç²¾åº¦å¯ä»¥è¾¾åˆ°çº³ç§’çº§ã€‚ï¬    (1 ns = 10-9 s)   1ç§’ = 1000æ¯«ç§’ =10^6å¾®ç§’=10^9çº³ç§’\n\n\n\n\næ–¹æ³•\næè¿°\n\n\n\n\nnow()\né™æ€æ–¹æ³•ï¼Œè¿”å›é»˜è®¤UTCæ—¶åŒºçš„Instantç±»çš„å¯¹è±¡\n\n\nofEpochMilli(long epochMilli)\né™æ€æ–¹æ³•ï¼Œè¿”å›åœ¨1970-01-01 00:00:00åŸºç¡€ä¸ŠåŠ ä¸ŠæŒ‡å®šæ¯«ç§’æ•°ä¹‹åçš„Instantç±»çš„å¯¹è±¡\n\n\natOffset(ZoneOffset offset)\nç»“åˆå³æ—¶çš„åç§»æ¥åˆ›å»ºä¸€ä¸ªOffsetDateTime\n\n\ntoEpochMilli()\nè¿”å›1970-01-01 00:00:00åˆ°å½“å‰æ—¶é—´çš„æ¯«ç§’æ•°ï¼Œå³ä¸ºæ—¶é—´æˆ³\n\n\n\n\næ—¶é—´æˆ³æ˜¯æŒ‡æ ¼æ—å¨æ²»æ—¶é—´1970å¹´01æœˆ01æ—¥00æ—¶00åˆ†00ç§’(åŒ—äº¬æ—¶é—´1970å¹´01æœˆ01æ—¥08æ—¶00åˆ†00ç§’)èµ·è‡³ç°åœ¨çš„æ€»ç§’æ•°ã€‚\næ ¼å¼åŒ–ä¸è§£ææ—¥æœŸæˆ–æ—¶é—´java.time.format.DateTimeFormatter ç±»ï¼šè¯¥ç±»æä¾›äº†ä¸‰ç§æ ¼å¼åŒ–æ–¹æ³•ï¼š\nï¬    é¢„å®šä¹‰çš„æ ‡å‡†æ ¼å¼ã€‚å¦‚ï¼šISO_LOCAL_DATE_TIME;ISO_LOCAL_DATE;ISO_LOCAL_TIMEï¬    æœ¬åœ°åŒ–ç›¸å…³çš„æ ¼å¼ã€‚å¦‚ï¼šofLocalizedDateTime(FormatStyle.LONG)ï¬    è‡ªå®šä¹‰çš„æ ¼å¼ã€‚å¦‚ï¼šofPattern(â€œyyyy-MM-dd hh:mm:ssâ€)\n\n\n\n\næ–¹ æ³•\næ è¿°\n\n\n\n\nofPattern(String pattern)\né™æ€æ–¹æ³• ï¼Œ è¿” å› ä¸€ ä¸ª æŒ‡ å®š å­— ç¬¦ ä¸² æ ¼ å¼ çš„DateTimeFormatter\n\n\nformat(TemporalAccessor t)\næ ¼å¼åŒ–ä¸€ä¸ªæ—¥æœŸã€æ—¶é—´ï¼Œè¿”å›å­—ç¬¦ä¸²\n\n\nparse(CharSequence text)\nå°†æŒ‡å®šæ ¼å¼çš„å­—ç¬¦åºåˆ—è§£æä¸ºä¸€ä¸ªæ—¥æœŸã€æ—¶é—´\n\n\n\n\nå…¶å®ƒAPI\nZoneIdï¼šè¯¥ç±»ä¸­åŒ…å«äº†æ‰€æœ‰çš„æ—¶åŒºä¿¡æ¯ï¼Œä¸€ä¸ªæ—¶åŒºçš„IDï¼Œå¦‚ Europe/Paris\nZonedDateTimeï¼šä¸€ä¸ªåœ¨ISO-8601æ—¥å†ç³»ç»Ÿæ—¶åŒºçš„æ—¥æœŸæ—¶é—´ï¼Œå¦‚ 2007-12-03T10:15:30+01:00 Europe/Parisã€‚\nå…¶ä¸­æ¯ä¸ªæ—¶åŒºéƒ½å¯¹åº”ç€IDï¼Œåœ°åŒºIDéƒ½ä¸ºâ€œ{åŒºåŸŸ}/{åŸå¸‚}â€çš„æ ¼å¼ï¼Œä¾‹å¦‚ï¼šAsia/Shanghaiç­‰\nClockï¼šä½¿ç”¨æ—¶åŒºæä¾›å¯¹å½“å‰å³æ—¶ã€æ—¥æœŸå’Œæ—¶é—´çš„è®¿é—®çš„æ—¶é’Ÿã€‚\næŒç»­æ—¶é—´ï¼šDurationï¼Œç”¨äºè®¡ç®—ä¸¤ä¸ªâ€œæ—¶é—´â€é—´éš”\næ—¥æœŸé—´éš”ï¼šPeriodï¼Œç”¨äºè®¡ç®—ä¸¤ä¸ªâ€œæ—¥æœŸâ€é—´éš”\nTemporalAdjuster : æ—¶é—´æ ¡æ­£å™¨ã€‚æœ‰æ—¶æˆ‘ä»¬å¯èƒ½éœ€è¦è·å–ä¾‹å¦‚ï¼šå°†æ—¥æœŸè°ƒæ•´åˆ°â€œä¸‹ä¸€ä¸ªå·¥ä½œæ—¥â€ç­‰æ“ä½œã€‚\nTemporalAdjusters : è¯¥ç±»é€šè¿‡é™æ€æ–¹æ³•(firstDayOfXxx()/lastDayOfXxx()/nextXxx())æä¾›äº†å¤§é‡çš„å¸¸ç”¨TemporalAdjuster çš„å®ç°ã€‚\n\nä¸ä¼ ç»Ÿæ—¥æœŸå¤„ç†çš„è½¬æ¢\n\n\n\nç±»\nTo é—ç•™ç±»\nFrom é—ç•™ç±»\n\n\n\n\njava.time.Instantä¸java.util.Date\nDate.from(instant)\ndate.toInstant()\n\n\njava.time.Instantä¸java.sql.Timestamp\nTimestamp.from(instant)\ntimestamp.toInstant()\n\n\njava.time.ZonedDateTimeä¸java.util.GregorianCalendar\nGregorianCalendar.from(zonedDateTime)\ncal.toZonedDateTime()\n\n\njava.time.LocalDateä¸java.sql.Time\nDate.valueOf(localDate)\ndate.toLocalDate()\n\n\njava.time.LocalTimeä¸java.sql.Time\nDate.valueOf(localDate)\ndate.toLocalTime()\n\n\njava.time.LocalDateTimeä¸java.sql.Timestamp\nTimestamp.valueOf(localDateTime)\ntimestamp.toLocalDateTime()\n\n\njava.time.ZoneIdä¸java.util.TimeZone\nTimezone.getTimeZone(id)\ntimeZone.toZoneId()\n\n\njava.time.format.DateTimeFormatterä¸java.text.DateFormat\nformatter.toFormat()\næ— \n\n\n\n\n1.4 Javaæ¯”è¾ƒå™¨åœ¨Javaä¸­ç»å¸¸ä¼šæ¶‰åŠåˆ°å¯¹è±¡æ•°ç»„çš„æ’åºé—®é¢˜ï¼Œé‚£ä¹ˆå°±æ¶‰åŠåˆ°å¯¹è±¡ä¹‹é—´çš„æ¯”è¾ƒé—®é¢˜ã€‚Javaå®ç°å¯¹è±¡æ’åºçš„æ–¹å¼æœ‰ä¸¤ç§ï¼š\n\nè‡ªç„¶æ’åºï¼šjava.lang.Comparable\nå®šåˆ¶æ’åºï¼šjava.util.Comparator\n\nè‡ªç„¶æ’åºï¼šjava.lang.Comparableï¬    Comparableæ¥å£å¼ºè¡Œå¯¹å®ç°å®ƒçš„æ¯ä¸ªç±»çš„å¯¹è±¡è¿›è¡Œæ•´ä½“æ’åºã€‚è¿™ç§æ’åºè¢«ç§°ä¸ºç±»çš„è‡ªç„¶æ’åºã€‚ï¬    å®ç° Comparable çš„ç±»å¿…é¡»å®ç° compareTo(Object obj) æ–¹æ³•ï¼Œä¸¤ä¸ªå¯¹è±¡å³é€šè¿‡ compareTo(Object obj) æ–¹æ³•çš„è¿”å›å€¼æ¥æ¯”è¾ƒå¤§å°ã€‚å¦‚æœå½“å‰å¯¹è±¡thiså¤§äºå½¢å‚å¯¹è±¡objï¼Œåˆ™è¿”å›æ­£æ•´æ•°ï¼Œå¦‚æœå½“å‰å¯¹è±¡thiså°äºå½¢å‚å¯¹è±¡objï¼Œåˆ™è¿”å›è´Ÿæ•´æ•°ï¼Œå¦‚æœå½“å‰å¯¹è±¡thisç­‰äºå½¢å‚å¯¹è±¡objï¼Œåˆ™è¿”å›é›¶ã€‚ï¬    å®ç°Comparableæ¥å£çš„å¯¹è±¡åˆ—è¡¨ï¼ˆå’Œæ•°ç»„ï¼‰å¯ä»¥é€šè¿‡ Collections.sort æˆ–Arrays.sortè¿›è¡Œè‡ªåŠ¨æ’åºã€‚å®ç°æ­¤æ¥å£çš„å¯¹è±¡å¯ä»¥ç”¨ä½œæœ‰åºæ˜ å°„ä¸­çš„é”®æˆ–æœ‰åºé›†åˆä¸­çš„å…ƒç´ ï¼Œæ— éœ€æŒ‡å®šæ¯”è¾ƒå™¨ã€‚ï¬    å¯¹äºç±» C çš„æ¯ä¸€ä¸ª e1 å’Œ e2 æ¥è¯´ï¼Œå½“ä¸”ä»…å½“ e1.compareTo(e2) == 0 ä¸e1.equals(e2) å…·æœ‰ç›¸åŒçš„ boolean å€¼æ—¶ï¼Œç±» C çš„è‡ªç„¶æ’åºæ‰å«åšä¸ equalsä¸€è‡´ã€‚å»ºè®®ï¼ˆè™½ç„¶ä¸æ˜¯å¿…éœ€çš„ï¼‰æœ€å¥½ä½¿è‡ªç„¶æ’åºä¸ equals ä¸€è‡´ã€‚\nComparable çš„å…¸å‹å®ç°ï¼š(é»˜è®¤éƒ½æ˜¯ä»å°åˆ°å¤§æ’åˆ—çš„)ïƒ˜    Stringï¼šæŒ‰ç…§å­—ç¬¦ä¸²ä¸­å­—ç¬¦çš„Unicodeå€¼è¿›è¡Œæ¯”è¾ƒïƒ˜    Characterï¼šæŒ‰ç…§å­—ç¬¦çš„Unicodeå€¼æ¥è¿›è¡Œæ¯”è¾ƒïƒ˜    æ•°å€¼ç±»å‹å¯¹åº”çš„åŒ…è£…ç±»ä»¥åŠBigIntegerã€BigDecimalï¼šæŒ‰ç…§å®ƒä»¬å¯¹åº”çš„æ•°å€¼å¤§å°è¿›è¡Œæ¯”è¾ƒïƒ˜    Booleanï¼štrue å¯¹åº”çš„åŒ…è£…ç±»å®ä¾‹å¤§äº false å¯¹åº”çš„åŒ…è£…ç±»å®ä¾‹ïƒ˜    Dateã€Timeç­‰ï¼šåé¢çš„æ—¥æœŸæ—¶é—´æ¯”å‰é¢çš„æ—¥æœŸæ—¶é—´å¤§\nå®šåˆ¶æ’åºï¼šjava.util.Comparatorï¬    å½“å…ƒç´ çš„ç±»å‹æ²¡æœ‰å®ç°java.lang.Comparableæ¥å£è€Œåˆä¸æ–¹ä¾¿ä¿®æ”¹ä»£ç ï¼Œæˆ–è€…å®ç°äº†java.lang.Comparableæ¥å£çš„æ’åºè§„åˆ™ä¸é€‚åˆå½“å‰çš„æ“ä½œï¼Œé‚£ä¹ˆå¯ä»¥è€ƒè™‘ä½¿ç”¨ Comparator çš„å¯¹è±¡æ¥æ’åºï¼Œå¼ºè¡Œå¯¹å¤šä¸ªå¯¹è±¡è¿›è¡Œæ•´ä½“æ’åºçš„æ¯”è¾ƒã€‚ï¬    é‡å†™compare(Object o1,Object o2)æ–¹æ³•ï¼Œæ¯”è¾ƒo1å’Œo2çš„å¤§å°ï¼šå¦‚æœæ–¹æ³•è¿”å›æ­£æ•´æ•°ï¼Œåˆ™è¡¨ç¤ºo1å¤§äºo2ï¼›å¦‚æœè¿”å›0ï¼Œè¡¨ç¤ºç›¸ç­‰ï¼›è¿”å›è´Ÿæ•´æ•°ï¼Œè¡¨ç¤ºo1å°äºo2ã€‚ï¬    å¯ä»¥å°† Comparator ä¼ é€’ç»™ sort æ–¹æ³•ï¼ˆå¦‚ Collections.sort æˆ–Arrays.sortï¼‰ï¼Œä»è€Œå…è®¸åœ¨æ’åºé¡ºåºä¸Šå®ç°ç²¾ç¡®æ§åˆ¶ã€‚ï¬    è¿˜å¯ä»¥ä½¿ç”¨ Comparator æ¥æ§åˆ¶æŸäº›æ•°æ®ç»“æ„ï¼ˆå¦‚æœ‰åº setæˆ–æœ‰åºæ˜ å°„ï¼‰çš„é¡ºåºï¼Œæˆ–è€…ä¸ºé‚£äº›æ²¡æœ‰è‡ªç„¶é¡ºåºçš„å¯¹è±¡ collection æä¾›æ’åºã€‚\n1.5 Systemç±»ï¬    Systemç±»ä»£è¡¨ç³»ç»Ÿï¼Œç³»ç»Ÿçº§çš„å¾ˆå¤šå±æ€§å’Œæ§åˆ¶æ–¹æ³•éƒ½æ”¾ç½®åœ¨è¯¥ç±»çš„å†…éƒ¨ã€‚è¯¥ç±»ä½äºjava.langåŒ…ã€‚ï¬    ç”±äºè¯¥ç±»çš„æ„é€ å™¨æ˜¯privateçš„ï¼Œæ‰€ä»¥æ— æ³•åˆ›å»ºè¯¥ç±»çš„å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯æ— æ³•å®ä¾‹åŒ–è¯¥ç±»ã€‚å…¶å†…éƒ¨çš„æˆå‘˜å˜é‡å’Œæˆå‘˜æ–¹æ³•éƒ½æ˜¯staticçš„ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥å¾ˆæ–¹ä¾¿çš„è¿›è¡Œè°ƒç”¨ã€‚æˆå‘˜å˜é‡ïƒ˜    Systemç±»å†…éƒ¨åŒ…å«inã€outå’Œerrä¸‰ä¸ªæˆå‘˜å˜é‡ï¼Œåˆ†åˆ«ä»£è¡¨æ ‡å‡†è¾“å…¥æµ(é”®ç›˜è¾“å…¥)ï¼Œæ ‡å‡†è¾“å‡ºæµ(æ˜¾ç¤ºå™¨)å’Œæ ‡å‡†é”™è¯¯è¾“å‡ºæµ(æ˜¾ç¤ºå™¨)ã€‚æˆå‘˜æ–¹æ³•ïƒ˜    native long currentTimeMillis()ï¼šè¯¥æ–¹æ³•çš„ä½œç”¨æ˜¯è¿”å›å½“å‰çš„è®¡ç®—æœºæ—¶é—´ï¼Œæ—¶é—´çš„è¡¨è¾¾æ ¼å¼ä¸ºå½“å‰è®¡ç®—æœºæ—¶é—´å’ŒGMTæ—¶é—´(æ ¼æ—å¨æ²»æ—¶é—´)1970å¹´1æœˆ1å·0æ—¶0åˆ†0ç§’æ‰€å·®çš„æ¯«ç§’æ•°ã€‚ïƒ˜    void exit(int status)ï¼šè¯¥æ–¹æ³•çš„ä½œç”¨æ˜¯é€€å‡ºç¨‹åºã€‚å…¶ä¸­statusçš„å€¼ä¸º0ä»£è¡¨æ­£å¸¸é€€å‡ºï¼Œéé›¶ä»£è¡¨å¼‚å¸¸é€€å‡ºã€‚ä½¿ç”¨è¯¥æ–¹æ³•å¯ä»¥åœ¨å›¾å½¢ç•Œé¢ç¼–ç¨‹ä¸­å®ç°ç¨‹åºçš„é€€å‡ºåŠŸèƒ½ç­‰ã€‚\n\nvoid gc()ï¼šè¯¥æ–¹æ³•çš„ä½œç”¨æ˜¯è¯·æ±‚ç³»ç»Ÿè¿›è¡Œåƒåœ¾å›æ”¶ã€‚è‡³äºç³»ç»Ÿæ˜¯å¦ç«‹åˆ»å›æ”¶ï¼Œåˆ™å–å†³äºç³»ç»Ÿä¸­åƒåœ¾å›æ”¶ç®—æ³•çš„å®ç°ä»¥åŠç³»ç»Ÿæ‰§è¡Œæ—¶çš„æƒ…å†µã€‚\nString getProperty(String key)ï¼šè¯¥æ–¹æ³•çš„ä½œç”¨æ˜¯è·å¾—ç³»ç»Ÿä¸­å±æ€§åä¸ºkeyçš„å±æ€§å¯¹åº”çš„å€¼ã€‚ç³»ç»Ÿä¸­å¸¸è§çš„å±æ€§åä»¥åŠå±æ€§çš„ä½œç”¨å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š\n\n1.6 Mathç±»ava.lang.Mathæä¾›äº†ä¸€ç³»åˆ—é™æ€æ–¹æ³•ç”¨äºç§‘å­¦è®¡ç®—ã€‚å…¶æ–¹æ³•çš„å‚æ•°å’Œè¿”å›å€¼ç±»å‹ä¸€èˆ¬ä¸ºdoubleå‹ã€‚\n\n\n\n\n\n\n\n\n\n\nabs\nç»å¯¹å€¼\n\n\nacos,asin,atan,cos,sin,tan\nä¸‰è§’å‡½æ•°\n\n\nsqrt\nå¹³æ–¹æ ¹\n\n\npow(double a,doble b)\naçš„bæ¬¡å¹‚\n\n\nlog\nè‡ªç„¶å¯¹æ•°\n\n\nexp\neä¸ºåº•æŒ‡æ•°\n\n\nmax(double a,double b)\n\n\n\nmin(double a,double b)\n\n\n\nrandom()\nè¿”å›0.0åˆ°1.0çš„éšæœºæ•°\n\n\nlong round(double a)\ndoubleå‹æ•°æ®aè½¬æ¢ä¸ºlongå‹ï¼ˆå››èˆäº”å…¥ï¼‰\n\n\ntoDegrees(double angrad)\nå¼§åº¦â€”&gt;è§’åº¦\n\n\ntoRadians(double angdeg)\nè§’åº¦â€”&gt;å¼§åº¦\n\n\n\n\n1.7 BigIntegerä¸BigDecimalBigIntegerç±»ï¬    Integerç±»ä½œä¸ºintçš„åŒ…è£…ç±»ï¼Œèƒ½å­˜å‚¨çš„æœ€å¤§æ•´å‹å€¼ä¸º231-1ï¼ŒLongç±»ä¹Ÿæ˜¯æœ‰é™çš„ï¼Œæœ€å¤§ä¸º263-1ã€‚å¦‚æœè¦è¡¨ç¤ºå†å¤§çš„æ•´æ•°ï¼Œä¸ç®¡æ˜¯åŸºæœ¬æ•°æ®ç±»å‹è¿˜æ˜¯ä»–ä»¬çš„åŒ…è£…ç±»éƒ½æ— èƒ½ä¸ºåŠ›ï¼Œæ›´ä¸ç”¨è¯´è¿›è¡Œè¿ç®—äº†ã€‚ï¬    java.mathåŒ…çš„BigIntegerå¯ä»¥è¡¨ç¤ºä¸å¯å˜çš„ä»»æ„ç²¾åº¦çš„æ•´æ•°ã€‚BigInteger æä¾›æ‰€æœ‰ Java çš„åŸºæœ¬æ•´æ•°æ“ä½œç¬¦çš„å¯¹åº”ç‰©ï¼Œå¹¶æä¾› java.lang.Math çš„æ‰€æœ‰ç›¸å…³æ–¹æ³•ã€‚å¦å¤–ï¼ŒBigInteger è¿˜æä¾›ä»¥ä¸‹è¿ç®—ï¼šæ¨¡ç®—æœ¯ã€GCD è®¡ç®—ã€è´¨æ•°æµ‹è¯•ã€ç´ æ•°ç”Ÿæˆã€ä½æ“ä½œä»¥åŠä¸€äº›å…¶ä»–æ“ä½œã€‚ï¬    æ„é€ å™¨ï¼šBigInteger(String val)ï¼šæ ¹æ®å­—ç¬¦ä¸²æ„å»ºBigIntegerå¯¹è±¡\nå¸¸ç”¨æ–¹æ³•\n\npublic BigInteger abs()ï¼šè¿”å›æ­¤ BigInteger çš„ç»å¯¹å€¼çš„ BigIntegerã€‚\nBigInteger add(BigInteger val) ï¼šè¿”å›å…¶å€¼ä¸º (this + val) çš„ BigInteger\nBigInteger subtract(BigInteger val) ï¼šè¿”å›å…¶å€¼ä¸º (this - val) çš„ BigInteger\nBigInteger multiply(BigInteger val) ï¼šè¿”å›å…¶å€¼ä¸º (this * val) çš„ BigInteger\nBigInteger divide(BigInteger val) ï¼šè¿”å›å…¶å€¼ä¸º (this / val) çš„ BigIntegerã€‚æ•´æ•°ç›¸é™¤åªä¿ç•™æ•´æ•°éƒ¨åˆ†ã€‚\nBigInteger remainder(BigInteger val) ï¼šè¿”å›å…¶å€¼ä¸º (this % val) çš„ BigIntegerã€‚\nBigInteger[] divideAndRemainder(BigInteger val)ï¼šè¿”å›åŒ…å« (this / val) åè·Ÿ(this % val) çš„ä¸¤ä¸ª BigInteger çš„æ•°ç»„ã€‚\nBigInteger pow(int exponent) ï¼šè¿”å›å…¶å€¼ä¸º (thisexponent) çš„ BigIntegerã€‚\n\nBigDecimalç±»â€‹        ä¸€èˆ¬çš„Floatç±»å’ŒDoubleç±»å¯ä»¥ç”¨æ¥åšç§‘å­¦è®¡ç®—æˆ–å·¥ç¨‹è®¡ç®—ï¼Œä½†åœ¨å•†ä¸šè®¡ç®—ä¸­ï¼Œè¦æ±‚æ•°å­—ç²¾åº¦æ¯”è¾ƒé«˜ï¼Œæ•…ç”¨åˆ°java.math.BigDecimalç±»ã€‚â€‹        BigDecimalç±»æ”¯æŒä¸å¯å˜çš„ã€ä»»æ„ç²¾åº¦çš„æœ‰ç¬¦å·åè¿›åˆ¶å®šç‚¹æ•°ã€‚æ„é€ å™¨ïƒ˜    public BigDecimal(double val)ïƒ˜    public BigDecimal(String val)å¸¸ç”¨æ–¹æ³•ïƒ˜    public BigDecimal add(BigDecimal augend)ïƒ˜    public BigDecimal subtract(BigDecimal subtrahend)ïƒ˜    public BigDecimal multiply(BigDecimal multiplicand)ïƒ˜    public BigDecimal divide(BigDecimal divisor, int scale, int roundingMode)\n2. æšä¸¾ç±»ä¸æ³¨è§£æšä¸¾ç±»çš„å®ç°ïƒ˜    JDK1.5ä¹‹å‰éœ€è¦è‡ªå®šä¹‰æšä¸¾ç±»ïƒ˜    JDK 1.5 æ–°å¢çš„ enum å…³é”®å­—ç”¨äºå®šä¹‰æšä¸¾ç±»\n\nè‹¥æšä¸¾åªæœ‰ä¸€ä¸ªå¯¹è±¡, åˆ™å¯ä»¥ä½œä¸ºä¸€ç§å•ä¾‹æ¨¡å¼çš„å®ç°æ–¹å¼ã€‚\næšä¸¾ç±»çš„å±æ€§ïƒ˜    æšä¸¾ç±»å¯¹è±¡çš„å±æ€§ä¸åº”å…è®¸è¢«æ”¹åŠ¨, æ‰€ä»¥åº”è¯¥ä½¿ç”¨ private final ä¿®é¥°ïƒ˜    æšä¸¾ç±»çš„ä½¿ç”¨ private final ä¿®é¥°çš„å±æ€§åº”è¯¥åœ¨æ„é€ å™¨ä¸­ä¸ºå…¶èµ‹å€¼ïƒ˜    è‹¥æšä¸¾ç±»æ˜¾å¼çš„å®šä¹‰äº†å¸¦å‚æ•°çš„æ„é€ å™¨, åˆ™åœ¨åˆ—å‡ºæšä¸¾å€¼æ—¶ä¹Ÿå¿…é¡»å¯¹åº”çš„ä¼ å…¥å‚æ•°\n\n2.1 æšä¸¾ç±»çš„ä½¿ç”¨è‡ªå®šä¹‰æšä¸¾ç±»\nç§æœ‰åŒ–ç±»çš„æ„é€ å™¨ï¼Œä¿è¯ä¸èƒ½åœ¨ç±»çš„å¤–éƒ¨åˆ›å»ºå…¶å¯¹è±¡\nåœ¨ç±»çš„å†…éƒ¨åˆ›å»ºæšä¸¾ç±»çš„å®ä¾‹ã€‚å£°æ˜ä¸ºï¼špublic static final\nå¯¹è±¡å¦‚æœæœ‰å®ä¾‹å˜é‡ï¼Œåº”è¯¥å£°æ˜ä¸ºprivate finalï¼Œå¹¶åœ¨æ„é€ å™¨ä¸­åˆå§‹åŒ–\n\nä½¿ç”¨å…³é”®å­—enumå®šä¹‰æšä¸¾ç±»ä½¿ç”¨è¯´æ˜ïƒ˜    ä½¿ç”¨ enum å®šä¹‰çš„æšä¸¾ç±»é»˜è®¤ç»§æ‰¿äº† java.lang.Enumç±»ï¼Œå› æ­¤ä¸èƒ½å†ç»§æ‰¿å…¶ä»–ç±»ïƒ˜    æšä¸¾ç±»çš„æ„é€ å™¨åªèƒ½ä½¿ç”¨ private æƒé™ä¿®é¥°ç¬¦ïƒ˜    æšä¸¾ç±»çš„æ‰€æœ‰å®ä¾‹å¿…é¡»åœ¨æšä¸¾ç±»ä¸­æ˜¾å¼åˆ—å‡º(, åˆ†éš” ; ç»“å°¾)ã€‚åˆ—å‡ºçš„å®ä¾‹ç³»ç»Ÿä¼šè‡ªåŠ¨æ·»åŠ  public static final ä¿®é¥°ïƒ˜    å¿…é¡»åœ¨æšä¸¾ç±»çš„ç¬¬ä¸€è¡Œå£°æ˜æšä¸¾ç±»å¯¹è±¡\n\nJDK 1.5 ä¸­å¯ä»¥åœ¨ switch è¡¨è¾¾å¼ä¸­ä½¿ç”¨Enumå®šä¹‰çš„æšä¸¾ç±»çš„å¯¹è±¡ä½œä¸ºè¡¨è¾¾å¼, case å­å¥å¯ä»¥ç›´æ¥ä½¿ç”¨æšä¸¾å€¼çš„åå­—, æ— éœ€æ·»åŠ æšä¸¾ç±»ä½œä¸ºé™å®šã€‚\n\nEnumç±»çš„ä¸»è¦æ–¹æ³•ïƒ˜    values()æ–¹æ³•ï¼šè¿”å›æšä¸¾ç±»å‹çš„å¯¹è±¡æ•°ç»„ã€‚è¯¥æ–¹æ³•å¯ä»¥å¾ˆæ–¹ä¾¿åœ°éå†æ‰€æœ‰çš„æšä¸¾å€¼ã€‚ïƒ˜    valueOf(String str)ï¼šå¯ä»¥æŠŠä¸€ä¸ªå­—ç¬¦ä¸²è½¬ä¸ºå¯¹åº”çš„æšä¸¾ç±»å¯¹è±¡ã€‚è¦æ±‚å­—ç¬¦ä¸²å¿…é¡»æ˜¯æšä¸¾ç±»å¯¹è±¡çš„â€œåå­—â€ã€‚å¦‚ä¸æ˜¯ï¼Œä¼šæœ‰è¿è¡Œæ—¶å¼‚å¸¸ï¼šIllegalArgumentExceptionã€‚ïƒ˜    toString()ï¼šè¿”å›å½“å‰æšä¸¾ç±»å¯¹è±¡å¸¸é‡çš„åç§°\n\nå®ç°æ¥å£çš„æšä¸¾ç±»\nå’Œæ™®é€š Java ç±»ä¸€æ ·ï¼Œæšä¸¾ç±»å¯ä»¥å®ç°ä¸€ä¸ªæˆ–å¤šä¸ªæ¥å£\nè‹¥æ¯ä¸ªæšä¸¾å€¼åœ¨è°ƒç”¨å®ç°çš„æ¥å£æ–¹æ³•å‘ˆç°ç›¸åŒçš„è¡Œä¸ºæ–¹å¼ï¼Œåˆ™åªè¦ç»Ÿä¸€å®ç°è¯¥æ–¹æ³•å³å¯ã€‚\nè‹¥éœ€è¦æ¯ä¸ªæšä¸¾å€¼åœ¨è°ƒç”¨å®ç°çš„æ¥å£æ–¹æ³•å‘ˆç°å‡ºä¸åŒçš„è¡Œä¸ºæ–¹å¼,åˆ™å¯ä»¥è®©æ¯ä¸ªæšä¸¾å€¼åˆ†åˆ«æ¥å®ç°è¯¥æ–¹æ³•\n\n2.2 æ³¨è§£çš„ä½¿ç”¨æ³¨è§£(Annotation)æ¦‚è¿°ï¬    ä» JDK 5.0 å¼€å§‹, Java å¢åŠ äº†å¯¹å…ƒæ•°æ®(MetaData) çš„æ”¯æŒ, ä¹Ÿå°±æ˜¯Annotation(æ³¨è§£)ï¬    Annotation å…¶å®å°±æ˜¯ä»£ç é‡Œçš„ç‰¹æ®Šæ ‡è®°, è¿™äº›æ ‡è®°å¯ä»¥åœ¨ç¼–è¯‘, ç±»åŠ è½½, è¿è¡Œæ—¶è¢«è¯»å–, å¹¶æ‰§è¡Œç›¸åº”çš„å¤„ç†ã€‚é€šè¿‡ä½¿ç”¨Annotation, ç¨‹åºå‘˜å¯ä»¥åœ¨ä¸æ”¹å˜åŸæœ‰é€»è¾‘çš„æƒ…å†µä¸‹, åœ¨æºæ–‡ä»¶ä¸­åµŒå…¥ä¸€äº›è¡¥å……ä¿¡æ¯ã€‚ä»£ç åˆ†æå·¥å…·ã€å¼€å‘å·¥å…·å’Œéƒ¨ç½²å·¥å…·å¯ä»¥é€šè¿‡è¿™äº›è¡¥å……ä¿¡æ¯è¿›è¡ŒéªŒè¯æˆ–è€…è¿›è¡Œéƒ¨ç½²ã€‚ï¬    Annotation å¯ä»¥åƒä¿®é¥°ç¬¦ä¸€æ ·è¢«ä½¿ç”¨, å¯ç”¨äºä¿®é¥°åŒ…,ç±», æ„é€ å™¨, æ–¹æ³•, æˆå‘˜å˜é‡, å‚æ•°, å±€éƒ¨å˜é‡çš„å£°æ˜, è¿™äº›ä¿¡æ¯è¢«ä¿å­˜åœ¨Annotationçš„ â€œname=valueâ€ å¯¹ä¸­ã€‚\nï¬    åœ¨JavaSEä¸­ï¼Œæ³¨è§£çš„ä½¿ç”¨ç›®çš„æ¯”è¾ƒç®€å•ï¼Œä¾‹å¦‚æ ‡è®°è¿‡æ—¶çš„åŠŸèƒ½ï¼Œå¿½ç•¥è­¦å‘Šç­‰ã€‚åœ¨JavaEE/Androidä¸­æ³¨è§£å æ®äº†æ›´é‡è¦çš„è§’è‰²ï¼Œä¾‹å¦‚ç”¨æ¥é…ç½®åº”ç”¨ç¨‹åºçš„ä»»ä½•åˆ‡é¢ï¼Œä»£æ›¿JavaEEæ—§ç‰ˆä¸­æ‰€é—ç•™çš„ç¹å†—ä»£ç å’ŒXMLé…ç½®ç­‰ã€‚ï¬    æœªæ¥çš„å¼€å‘æ¨¡å¼éƒ½æ˜¯åŸºäºæ³¨è§£çš„ï¼ŒJPAæ˜¯åŸºäºæ³¨è§£çš„ï¼ŒSpring2.5ä»¥ä¸Šéƒ½æ˜¯åŸºäºæ³¨è§£çš„ï¼ŒHibernate3.xä»¥åä¹Ÿæ˜¯åŸºäºæ³¨è§£çš„ï¼Œç°åœ¨çš„Struts2æœ‰ä¸€éƒ¨åˆ†ä¹Ÿæ˜¯åŸºäºæ³¨è§£çš„äº†ï¼Œæ³¨è§£æ˜¯ä¸€ç§è¶‹åŠ¿ï¼Œä¸€å®šç¨‹åº¦ä¸Šå¯ä»¥è¯´ï¼šæ¡†æ¶ = æ³¨è§£ + åå°„ + è®¾è®¡æ¨¡å¼ã€‚\nå¸¸è§çš„Annotationç¤ºä¾‹ï¬    ä½¿ç”¨Annotation æ—¶è¦åœ¨å…¶å‰é¢å¢åŠ  @ ç¬¦å·, å¹¶æŠŠè¯¥Annotation å½“æˆä¸€ä¸ªä¿®é¥°ç¬¦ä½¿ç”¨ã€‚ç”¨äºä¿®é¥°å®ƒæ”¯æŒçš„ç¨‹åºå…ƒç´ ï¬    ç¤ºä¾‹ä¸€ï¼šç”Ÿæˆæ–‡æ¡£ç›¸å…³çš„æ³¨è§£\n@author æ ‡æ˜å¼€å‘è¯¥ç±»æ¨¡å—çš„ä½œè€…ï¼Œå¤šä¸ªä½œè€…ä¹‹é—´ä½¿ç”¨,åˆ†å‰²\n@version æ ‡æ˜è¯¥ç±»æ¨¡å—çš„ç‰ˆæœ¬\n@see å‚è€ƒè½¬å‘ï¼Œä¹Ÿå°±æ˜¯ç›¸å…³ä¸»é¢˜\n@since ä»å“ªä¸ªç‰ˆæœ¬å¼€å§‹å¢åŠ çš„\n@param å¯¹æ–¹æ³•ä¸­æŸå‚æ•°çš„è¯´æ˜ï¼Œå¦‚æœæ²¡æœ‰å‚æ•°å°±ä¸èƒ½å†™\n@return å¯¹æ–¹æ³•è¿”å›å€¼çš„è¯´æ˜ï¼Œå¦‚æœæ–¹æ³•çš„è¿”å›å€¼ç±»å‹æ˜¯voidå°±ä¸èƒ½å†™\n@exception å¯¹æ–¹æ³•å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸è¿›è¡Œè¯´æ˜ï¼Œå¦‚æœæ–¹æ³•æ²¡æœ‰ç”¨throwsæ˜¾å¼æŠ›å‡ºçš„å¼‚å¸¸å°±ä¸èƒ½å†™å…¶ä¸­\n\n@param @return å’Œ@exception è¿™ä¸‰ä¸ªæ ‡è®°éƒ½æ˜¯åªç”¨äºæ–¹æ³•çš„ã€‚ @paramçš„æ ¼å¼è¦æ±‚ï¼š@param å½¢å‚åå½¢å‚ç±»å‹ å½¢å‚è¯´æ˜\n@return çš„æ ¼å¼è¦æ±‚ï¼š@return è¿”å›å€¼ç±»å‹è¿”å›å€¼è¯´æ˜\n@exceptionçš„æ ¼å¼è¦æ±‚ï¼š@exception å¼‚å¸¸ç±»å‹å¼‚å¸¸è¯´æ˜\n@paramå’Œ@exceptionå¯ä»¥å¹¶åˆ—å¤šä¸ª\n\nç¤ºä¾‹äºŒï¼šåœ¨ç¼–è¯‘æ—¶è¿›è¡Œæ ¼å¼æ£€æŸ¥(JDKå†…ç½®çš„ä¸‰ä¸ªåŸºæœ¬æ³¨è§£)ïƒ˜    @Override: é™å®šé‡å†™çˆ¶ç±»æ–¹æ³•, è¯¥æ³¨è§£åªèƒ½ç”¨äºæ–¹æ³•ïƒ˜    @Deprecated: ç”¨äºè¡¨ç¤ºæ‰€ä¿®é¥°çš„å…ƒç´ (ç±», æ–¹æ³•ç­‰)å·²è¿‡æ—¶ã€‚é€šå¸¸æ˜¯å› ä¸ºæ‰€ä¿®é¥°çš„ç»“æ„å±é™©æˆ–å­˜åœ¨æ›´å¥½çš„é€‰æ‹©ïƒ˜    @SuppressWarnings: æŠ‘åˆ¶ç¼–è¯‘å™¨è­¦å‘Š\nè‡ªå®šä¹‰Annotation\nå®šä¹‰æ–°çš„Annotation ç±»å‹ä½¿ç”¨@interface å…³é”®å­—\nè‡ªå®šä¹‰æ³¨è§£è‡ªåŠ¨ç»§æ‰¿äº†java.lang.annotation.Annotationæ¥å£\nAnnotation çš„æˆå‘˜å˜é‡åœ¨ Annotation å®šä¹‰ä¸­ä»¥æ— å‚æ•°æ–¹æ³•çš„å½¢å¼æ¥å£°æ˜ã€‚å…¶æ–¹æ³•åå’Œè¿”å›å€¼å®šä¹‰äº†è¯¥æˆå‘˜çš„åå­—å’Œç±»å‹ã€‚æˆ‘ä»¬ç§°ä¸ºé…ç½®å‚æ•°ã€‚ç±»å‹åªèƒ½æ˜¯å…«ç§åŸºæœ¬æ•°æ®ç±»å‹ã€Stringç±»å‹ã€Classç±»å‹ã€enumç±»å‹ã€Annotationç±»å‹ã€ä»¥ä¸Šæ‰€æœ‰ç±»å‹çš„æ•°ç»„ã€‚\nå¯ä»¥åœ¨å®šä¹‰ Annotation çš„æˆå‘˜å˜é‡æ—¶ä¸ºå…¶æŒ‡å®šåˆå§‹å€¼, æŒ‡å®šæˆå‘˜å˜é‡çš„åˆå§‹å€¼å¯ä½¿ç”¨default å…³é”®å­—\nå¦‚æœåªæœ‰ä¸€ä¸ªå‚æ•°æˆå‘˜ï¼Œå»ºè®®ä½¿ç”¨å‚æ•°åä¸ºvalue\nå¦‚æœå®šä¹‰çš„æ³¨è§£å«æœ‰é…ç½®å‚æ•°ï¼Œé‚£ä¹ˆä½¿ç”¨æ—¶å¿…é¡»æŒ‡å®šå‚æ•°å€¼ï¼Œé™¤éå®ƒæœ‰é»˜è®¤å€¼ã€‚æ ¼å¼æ˜¯â€œå‚æ•°å = å‚æ•°å€¼â€ï¼Œå¦‚æœåªæœ‰ä¸€ä¸ªå‚æ•°æˆå‘˜ï¼Œä¸”åç§°ä¸ºvalueï¼Œå¯ä»¥çœç•¥â€œvalue=â€\næ²¡æœ‰æˆå‘˜å®šä¹‰çš„ Annotation ç§°ä¸ºæ ‡è®°; åŒ…å«æˆå‘˜å˜é‡çš„ Annotation ç§°ä¸ºå…ƒæ•°æ®Annotation\n\nJDKä¸­çš„å…ƒæ³¨è§£JDK çš„å…ƒAnnotation ç”¨äºä¿®é¥°å…¶ä»–Annotation å®šä¹‰\nJDK5.0æä¾›äº†4ä¸ªæ ‡å‡†çš„meta-annotationç±»å‹ï¼Œåˆ†åˆ«æ˜¯ï¼šïƒ˜    Retentionïƒ˜    Targetïƒ˜    Documentedïƒ˜    Inherited\n\n@Retention: åªèƒ½ç”¨äºä¿®é¥°ä¸€ä¸ªAnnotation å®šä¹‰, ç”¨äºæŒ‡å®šè¯¥Annotation çš„ç”Ÿå‘½å‘¨æœŸ, @Rentention åŒ…å«ä¸€ä¸ª RetentionPolicy ç±»å‹çš„æˆå‘˜å˜é‡, ä½¿ç”¨@Rentention æ—¶å¿…é¡»ä¸ºè¯¥ value æˆå‘˜å˜é‡æŒ‡å®šå€¼:ïƒ˜    RetentionPolicy.SOURCE:åœ¨æºæ–‡ä»¶ä¸­æœ‰æ•ˆï¼ˆå³æºæ–‡ä»¶ä¿ç•™ï¼‰ï¼Œç¼–è¯‘å™¨ç›´æ¥ä¸¢å¼ƒè¿™ç§ç­–ç•¥çš„æ³¨é‡Šïƒ˜    RetentionPolicy.CLASS:åœ¨classæ–‡ä»¶ä¸­æœ‰æ•ˆï¼ˆå³classä¿ç•™ï¼‰ ï¼Œ å½“è¿è¡Œ Java ç¨‹åºæ—¶, JVMä¸ä¼šä¿ç•™æ³¨è§£ã€‚ è¿™æ˜¯é»˜è®¤å€¼ïƒ˜    RetentionPolicy.RUNTIME:åœ¨è¿è¡Œæ—¶æœ‰æ•ˆï¼ˆå³è¿è¡Œæ—¶ä¿ç•™ï¼‰ï¼Œå½“è¿è¡Œ Java ç¨‹åºæ—¶, JVM ä¼šä¿ç•™æ³¨é‡Šã€‚ç¨‹åºå¯ä»¥é€šè¿‡åå°„è·å–è¯¥æ³¨é‡Šã€‚\n\n@Target: ç”¨äºä¿®é¥°Annotation å®šä¹‰, ç”¨äºæŒ‡å®šè¢«ä¿®é¥°çš„Annotation èƒ½ç”¨äºä¿®é¥°å“ªäº›ç¨‹åºå…ƒç´ ã€‚ @Target ä¹ŸåŒ…å«ä¸€ä¸ªåä¸º value çš„æˆå‘˜å˜é‡ã€‚\n\n\n@Documented: ç”¨äºæŒ‡å®šè¢«è¯¥å…ƒAnnotation ä¿®é¥°çš„Annotation ç±»å°†è¢«javadoc å·¥å…·æå–æˆæ–‡æ¡£ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œjavadocæ˜¯ä¸åŒ…æ‹¬æ³¨è§£çš„ã€‚ïƒ˜    å®šä¹‰ä¸ºDocumentedçš„æ³¨è§£å¿…é¡»è®¾ç½®Retentionå€¼ä¸ºRUNTIMEã€‚\n\n@Inherited: è¢«å®ƒä¿®é¥°çš„Annotation å°†å…·æœ‰ç»§æ‰¿æ€§ã€‚å¦‚æœæŸä¸ªç±»ä½¿ç”¨äº†è¢«@Inherited ä¿®é¥°çš„Annotation, åˆ™å…¶å­ç±»å°†è‡ªåŠ¨å…·æœ‰è¯¥æ³¨è§£ã€‚ïƒ˜    æ¯”å¦‚ï¼šå¦‚æœæŠŠæ ‡æœ‰@Inheritedæ³¨è§£çš„è‡ªå®šä¹‰çš„æ³¨è§£æ ‡æ³¨åœ¨ç±»çº§åˆ«ä¸Šï¼Œå­ç±»åˆ™å¯ä»¥ç»§æ‰¿çˆ¶ç±»ç±»çº§åˆ«çš„æ³¨è§£ïƒ˜    å®é™…åº”ç”¨ä¸­ï¼Œä½¿ç”¨è¾ƒå°‘\n\n\nåˆ©ç”¨åå°„è·å–æ³¨è§£ä¿¡æ¯ï¼ˆåœ¨åå°„éƒ¨åˆ†æ¶‰åŠï¼‰\nJDK 5.0 åœ¨ java.lang.reflect åŒ…ä¸‹æ–°å¢äº† AnnotatedElement æ¥å£, è¯¥æ¥å£ä»£è¡¨ç¨‹åºä¸­å¯ä»¥æ¥å—æ³¨è§£çš„ç¨‹åºå…ƒç´ \nå½“ä¸€ä¸ªAnnotation ç±»å‹è¢«å®šä¹‰ä¸ºè¿è¡Œæ—¶Annotation å, è¯¥æ³¨è§£æ‰æ˜¯è¿è¡Œæ—¶å¯è§, å½“ class æ–‡ä»¶è¢«è½½å…¥æ—¶ä¿å­˜åœ¨ class æ–‡ä»¶ä¸­çš„Annotation æ‰ä¼šè¢«è™šæ‹Ÿæœºè¯»å–\nç¨‹åºå¯ä»¥è°ƒç”¨AnnotatedElementå¯¹è±¡çš„å¦‚ä¸‹æ–¹æ³•æ¥è®¿é—®Annotation ä¿¡æ¯\n\nJDK 8ä¸­æ³¨è§£çš„æ–°ç‰¹æ€§Java 8å¯¹æ³¨è§£å¤„ç†æä¾›äº†ä¸¤ç‚¹æ”¹è¿›ï¼šå¯é‡å¤çš„æ³¨è§£åŠå¯ç”¨äºç±»å‹çš„æ³¨è§£ã€‚æ­¤å¤–ï¼Œåå°„ä¹Ÿå¾—åˆ°äº†åŠ å¼ºï¼Œåœ¨Java8ä¸­èƒ½å¤Ÿå¾—åˆ°æ–¹æ³•å‚æ•°çš„åç§°ã€‚è¿™ä¼šç®€åŒ–æ ‡æ³¨åœ¨æ–¹æ³•å‚æ•°ä¸Šçš„æ³¨è§£ã€‚\nç±»å‹æ³¨è§£ï¼š\n\nJDK1.8ä¹‹åï¼Œå…³äºå…ƒæ³¨è§£@Targetçš„å‚æ•°ç±»å‹ElementTypeæšä¸¾å€¼å¤šäº†ä¸¤ä¸ªï¼šTYPE_PARAMETER,TYPE_USEã€‚\nåœ¨Java 8ä¹‹å‰ï¼Œæ³¨è§£åªèƒ½æ˜¯åœ¨å£°æ˜çš„åœ°æ–¹æ‰€ä½¿ç”¨ï¼ŒJava8å¼€å§‹ï¼Œæ³¨è§£å¯ä»¥åº”ç”¨åœ¨ä»»ä½•åœ°æ–¹ã€‚ïƒ˜    ElementType.TYPE_PARAMETER è¡¨ç¤ºè¯¥æ³¨è§£èƒ½å†™åœ¨ç±»å‹å˜é‡çš„å£°æ˜è¯­å¥ä¸­ï¼ˆå¦‚ï¼šæ³›å‹å£°æ˜ï¼‰ã€‚ïƒ˜    ElementType.TYPE_USE è¡¨ç¤ºè¯¥æ³¨è§£èƒ½å†™åœ¨ä½¿ç”¨ç±»å‹çš„ä»»ä½•è¯­å¥ä¸­ã€‚ \n\n","slug":"J3-å¸¸ç”¨ç±»ã€æšä¸¾ã€æ³¨è§£","date":"2021-11-12T02:30:10.000Z","categories_index":"JAVA","tags_index":"java","author_index":"YFR718"},{"id":"8dfa68efe4979ccc3a00434835ec3a9a","title":"å¼‚å¸¸ä¸å¤šçº¿ç¨‹","content":"1. å¼‚å¸¸å¤„ç†1.1 å¼‚å¸¸æ¦‚è¿°ä¸å¼‚å¸¸ä½“ç³»ç»“æ„å¼‚å¸¸ï¼šåœ¨Javaè¯­è¨€ä¸­ï¼Œå°†ç¨‹åºæ‰§è¡Œä¸­å‘ç”Ÿçš„ä¸æ­£å¸¸æƒ…å†µ\nå¼‚å¸¸äº‹ä»¶å¯åˆ†ä¸ºä¸¤ç±»ï¼š\n\nErrorï¼šJavaè™šæ‹Ÿæœºæ— æ³•è§£å†³çš„ä¸¥é‡é—®é¢˜ã€‚å¦‚ï¼šJVMç³»ç»Ÿå†…éƒ¨é”™è¯¯ã€èµ„æºè€—å°½ç­‰ä¸¥é‡æƒ…å†µã€‚æ¯”å¦‚ï¼šStackOverflowErrorå’ŒOOMã€‚ä¸€èˆ¬ä¸ç¼–å†™é’ˆå¯¹æ€§çš„ä»£ç è¿›è¡Œå¤„ç†ã€‚\nException: å…¶å®ƒå› ç¼–ç¨‹é”™è¯¯æˆ–å¶ç„¶çš„å¤–åœ¨å› ç´ å¯¼è‡´çš„ä¸€èˆ¬æ€§é—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨é’ˆå¯¹æ€§çš„ä»£ç è¿›è¡Œå¤„ç†ã€‚ä¾‹å¦‚ï¼šïƒ¼    ç©ºæŒ‡é’ˆè®¿é—®ïƒ¼    è¯•å›¾è¯»å–ä¸å­˜åœ¨çš„æ–‡ä»¶ïƒ¼    ç½‘ç»œè¿æ¥ä¸­æ–­ïƒ¼    æ•°ç»„è§’æ ‡è¶Šç•Œ\n\né”™è¯¯çš„å¤„ç†æ–¹æ³•\n\né‡åˆ°é”™è¯¯å°±ç»ˆæ­¢ç¨‹åºçš„è¿è¡Œã€‚\nç”±ç¨‹åºå‘˜åœ¨ç¼–å†™ç¨‹åºæ—¶ï¼Œå°±è€ƒè™‘åˆ°é”™è¯¯çš„æ£€æµ‹ã€é”™è¯¯æ¶ˆæ¯çš„æç¤ºï¼Œä»¥åŠé”™è¯¯çš„å¤„ç†ã€‚\n\n\næ•è·é”™è¯¯æœ€ç†æƒ³çš„æ˜¯åœ¨ç¼–è¯‘æœŸé—´ï¼Œä½†æœ‰çš„é”™è¯¯åªæœ‰åœ¨è¿è¡Œæ—¶æ‰ä¼šå‘ç”Ÿã€‚æ¯”å¦‚ï¼šé™¤æ•°ä¸º0ï¼Œæ•°ç»„ä¸‹æ ‡è¶Šç•Œç­‰\nåˆ†ç±»ï¼šç¼–è¯‘æ—¶å¼‚å¸¸å’Œè¿è¡Œæ—¶å¼‚å¸¸\n\nè¿è¡Œæ—¶å¼‚å¸¸ï¬    æ˜¯æŒ‡ç¼–è¯‘å™¨ä¸è¦æ±‚å¼ºåˆ¶å¤„ç½®çš„å¼‚å¸¸ã€‚ä¸€èˆ¬æ˜¯æŒ‡ç¼–ç¨‹æ—¶çš„é€»è¾‘é”™è¯¯ï¼Œæ˜¯ç¨‹åºå‘˜åº”è¯¥ç§¯æé¿å…å…¶å‡ºç°çš„å¼‚å¸¸ã€‚java.lang.RuntimeExceptionç±»åŠå®ƒçš„å­ç±»éƒ½æ˜¯è¿è¡Œæ—¶å¼‚å¸¸ã€‚ï¬    å¯¹äºè¿™ç±»å¼‚å¸¸ï¼Œå¯ä»¥ä¸ä½œå¤„ç†ï¼Œå› ä¸ºè¿™ç±»å¼‚å¸¸å¾ˆæ™®éï¼Œè‹¥å…¨å¤„ç†å¯èƒ½ä¼šå¯¹ç¨‹åºçš„å¯è¯»æ€§å’Œè¿è¡Œæ•ˆç‡äº§ç”Ÿå½±å“ã€‚\nç¼–è¯‘æ—¶å¼‚å¸¸ï¬    æ˜¯æŒ‡ç¼–è¯‘å™¨è¦æ±‚å¿…é¡»å¤„ç½®çš„å¼‚å¸¸ã€‚å³ç¨‹åºåœ¨è¿è¡Œæ—¶ç”±äºå¤–ç•Œå› ç´ é€ æˆçš„ä¸€èˆ¬æ€§å¼‚å¸¸ã€‚ç¼–è¯‘å™¨è¦æ±‚Javaç¨‹åºå¿…é¡»æ•è·æˆ–å£°æ˜æ‰€æœ‰ç¼–è¯‘æ—¶å¼‚å¸¸ã€‚ï¬    å¯¹äºè¿™ç±»å¼‚å¸¸ï¼Œå¦‚æœç¨‹åºä¸å¤„ç†ï¼Œå¯èƒ½ä¼šå¸¦æ¥æ„æƒ³ä¸åˆ°çš„ç»“æœã€‚\n1.2 å¸¸è§å¼‚å¸¸\n1.3 å¼‚å¸¸å¤„ç†æœºåˆ¶ä¸€ï¼štry-catch-finallyJavaç¨‹åºçš„æ‰§è¡Œè¿‡ç¨‹ä¸­å¦‚å‡ºç°å¼‚å¸¸ï¼Œä¼šç”Ÿæˆä¸€ä¸ªå¼‚å¸¸ç±»å¯¹è±¡ï¼Œè¯¥å¼‚å¸¸å¯¹è±¡å°†è¢«æäº¤ç»™Javaè¿è¡Œæ—¶ç³»ç»Ÿï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºæŠ›å‡º(throw)å¼‚å¸¸ã€‚\nå¼‚å¸¸å¯¹è±¡çš„ç”Ÿæˆ\n\nç”±è™šæ‹Ÿæœºè‡ªåŠ¨ç”Ÿæˆï¼šç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œè™šæ‹Ÿæœºæ£€æµ‹åˆ°ç¨‹åºå‘ç”Ÿäº†é—®é¢˜ï¼Œå¦‚æœåœ¨å½“å‰ä»£ç ä¸­æ²¡æœ‰æ‰¾åˆ°ç›¸åº”çš„å¤„ç†ç¨‹åºï¼Œå°±ä¼šåœ¨åå°è‡ªåŠ¨åˆ›å»ºä¸€ä¸ªå¯¹åº”å¼‚å¸¸ç±»çš„å®ä¾‹å¯¹è±¡å¹¶æŠ›å‡ºâ€”â€”è‡ªåŠ¨æŠ›å‡º\nç”±å¼€å‘äººå‘˜æ‰‹åŠ¨åˆ›å»ºï¼šException exception = new ClassCastException();â€”â€”åˆ›å»ºå¥½çš„å¼‚å¸¸å¯¹è±¡ä¸æŠ›å‡ºå¯¹ç¨‹åºæ²¡æœ‰ä»»ä½•å½±å“ï¼Œå’Œåˆ›å»ºä¸€ä¸ªæ™®é€šå¯¹è±¡ä¸€æ ·\n\nå¼‚å¸¸æŠ›å‡ºæµç¨‹\n\nå¦‚æœä¸€ä¸ªæ–¹æ³•å†…æŠ›å‡ºå¼‚å¸¸ï¼Œè¯¥å¼‚å¸¸å¯¹è±¡ä¼šè¢«æŠ›ç»™è°ƒç”¨è€…æ–¹æ³•ä¸­å¤„ç†ã€‚å¦‚æœå¼‚å¸¸æ²¡æœ‰åœ¨è°ƒç”¨è€…æ–¹æ³•ä¸­å¤„ç†ï¼Œå®ƒç»§ç»­è¢«æŠ›ç»™è¿™ä¸ªè°ƒç”¨æ–¹æ³•çš„ä¸Šå±‚æ–¹æ³•ã€‚è¿™ä¸ªè¿‡ç¨‹å°†ä¸€ç›´ç»§ç»­ä¸‹å»ï¼Œç›´åˆ°å¼‚å¸¸è¢«å¤„ç†ã€‚è¿™ä¸€è¿‡ç¨‹ç§°ä¸ºæ•è·(catch)å¼‚å¸¸ã€‚\nå¦‚æœä¸€ä¸ªå¼‚å¸¸å›åˆ°main()æ–¹æ³•ï¼Œå¹¶ä¸”main()ä¹Ÿä¸å¤„ç†ï¼Œåˆ™ç¨‹åºè¿è¡Œç»ˆæ­¢ã€‚\nç¨‹åºå‘˜é€šå¸¸åªèƒ½å¤„ç†Exceptionï¼Œè€Œå¯¹Erroræ— èƒ½ä¸ºåŠ›ã€‚\n\nå¼‚å¸¸å¤„ç†æ˜¯é€šè¿‡try-catch-finallyè¯­å¥å®ç°çš„ã€‚\ntry{\n//å¯èƒ½äº§ç”Ÿå¼‚å¸¸çš„ä»£ç \n}\ncatch( ExceptionName1 e ){\n//å½“äº§ç”ŸExceptionName1å‹å¼‚å¸¸æ—¶çš„å¤„ç½®æªæ–½\n}\ncatch( ExceptionName2 e ){\n//å½“äº§ç”ŸExceptionName2å‹å¼‚å¸¸æ—¶çš„å¤„ç½®æªæ–½\n}\n[ finally{\n.. //æ— è®ºæ˜¯å¦å‘ç”Ÿå¼‚å¸¸ï¼Œéƒ½æ— æ¡ä»¶æ‰§è¡Œçš„è¯­å¥\n}]\n\ntryæ•è·å¼‚å¸¸çš„ç¬¬ä¸€æ­¥æ˜¯ç”¨try{â€¦}è¯­å¥å—é€‰å®šæ•è·å¼‚å¸¸çš„èŒƒå›´ï¼Œå°†å¯èƒ½å‡ºç°å¼‚å¸¸çš„ä»£ç æ”¾åœ¨tryè¯­å¥å—ä¸­ã€‚catch (Exceptiontype e)åœ¨catchè¯­å¥å—ä¸­æ˜¯å¯¹å¼‚å¸¸å¯¹è±¡è¿›è¡Œå¤„ç†çš„ä»£ç ã€‚æ¯ä¸ªtryè¯­å¥å—å¯ä»¥ä¼´éšä¸€ä¸ªæˆ–å¤šä¸ªcatchè¯­å¥ï¼Œç”¨äºå¤„ç†å¯èƒ½äº§ç”Ÿçš„ä¸åŒç±»å‹çš„å¼‚å¸¸å¯¹è±¡ã€‚\n\nå¦‚æœæ˜ç¡®çŸ¥é“äº§ç”Ÿçš„æ˜¯ä½•ç§å¼‚å¸¸ï¼Œå¯ä»¥ç”¨è¯¥å¼‚å¸¸ç±»ä½œä¸ºcatchçš„å‚æ•°ï¼›ä¹Ÿå¯ä»¥ç”¨å…¶çˆ¶ç±»ä½œä¸ºcatchçš„å‚æ•°ã€‚\n\næ•è·å¼‚å¸¸çš„æœ‰å…³ä¿¡æ¯ï¼š\ngetMessage() è·å–å¼‚å¸¸ä¿¡æ¯ï¼Œè¿”å›å­—ç¬¦ä¸²printStackTrace()  è·å–å¼‚å¸¸ç±»åå’Œå¼‚å¸¸ä¿¡æ¯ï¼Œä»¥åŠå¼‚å¸¸å‡ºç°åœ¨ç¨‹åºä¸­çš„ä½ç½®ã€‚è¿”å›å€¼voidã€‚\nfinally\n\næ•è·å¼‚å¸¸çš„æœ€åä¸€æ­¥æ˜¯é€šè¿‡finallyè¯­å¥ä¸ºå¼‚å¸¸å¤„ç†æä¾›ä¸€ä¸ªç»Ÿä¸€çš„å‡ºå£ï¼Œä½¿å¾—åœ¨æ§åˆ¶æµè½¬åˆ°ç¨‹åºçš„å…¶å®ƒéƒ¨åˆ†ä»¥å‰ï¼Œèƒ½å¤Ÿå¯¹ç¨‹åºçš„çŠ¶æ€ä½œç»Ÿä¸€çš„ç®¡ç†ã€‚\nä¸è®ºåœ¨tryä»£ç å—ä¸­æ˜¯å¦å‘ç”Ÿäº†å¼‚å¸¸äº‹ä»¶ï¼Œcatchè¯­å¥æ˜¯å¦æ‰§è¡Œï¼Œcatchè¯­å¥æ˜¯å¦æœ‰å¼‚å¸¸ï¼Œcatchè¯­å¥ä¸­æ˜¯å¦æœ‰returnï¼Œ finallyå—ä¸­çš„è¯­å¥éƒ½ä¼šè¢«æ‰§è¡Œã€‚\nfinallyè¯­å¥å’Œcatchè¯­å¥æ˜¯ä»»é€‰çš„\n\n1.4 å¼‚å¸¸å¤„ç†æœºåˆ¶äºŒï¼šthrowsâ€‹        å¦‚æœä¸€ä¸ªæ–¹æ³•(ä¸­çš„è¯­å¥æ‰§è¡Œæ—¶)å¯èƒ½ç”ŸæˆæŸç§å¼‚å¸¸ï¼Œä½†æ˜¯å¹¶ä¸èƒ½ç¡®å®šå¦‚ä½•å¤„ç†è¿™ç§å¼‚å¸¸ï¼Œåˆ™æ­¤æ–¹æ³•åº”æ˜¾ç¤ºåœ°å£°æ˜æŠ›å‡ºå¼‚å¸¸ï¼Œè¡¨æ˜è¯¥æ–¹æ³•å°†ä¸å¯¹è¿™äº›å¼‚å¸¸è¿›è¡Œå¤„ç†ï¼Œè€Œç”±è¯¥æ–¹æ³•çš„è°ƒç”¨è€…è´Ÿè´£å¤„ç†ã€‚åœ¨æ–¹æ³•å£°æ˜ä¸­ç”¨throwsè¯­å¥å¯ä»¥å£°æ˜æŠ›å‡ºå¼‚å¸¸çš„åˆ—è¡¨ï¼Œthrowsåé¢çš„å¼‚å¸¸ç±»å‹å¯ä»¥æ˜¯æ–¹æ³•ä¸­äº§ç”Ÿçš„å¼‚å¸¸ç±»å‹ï¼Œä¹Ÿå¯ä»¥æ˜¯å®ƒçš„çˆ¶ç±»ã€‚\npublic void readFile(String file) throws FileNotFoundException {\n    //è¯»æ–‡ä»¶çš„æ“ä½œå¯èƒ½äº§ç”ŸFileNotFoundExceptionç±»å‹çš„å¼‚å¸¸\n    FilelnputStream fis = new FilelnputStream(file);\n}\né‡å†™æ–¹æ³•å£°æ˜æŠ›å‡ºå¼‚å¸¸çš„åŸåˆ™\né‡å†™æ–¹æ³•ä¸èƒ½æŠ›å‡ºæ¯”è¢«é‡å†™æ–¹æ³•èŒƒå›´æ›´å¤§çš„å¼‚å¸¸ç±»å‹ã€‚åœ¨å¤šæ€çš„æƒ…å†µä¸‹ï¼Œå¯¹methodA()æ–¹æ³•çš„è°ƒç”¨-å¼‚å¸¸çš„æ•è·æŒ‰çˆ¶ç±»å£°æ˜çš„å¼‚å¸¸å¤„ç†ã€‚\n1.5 æ‰‹åŠ¨æŠ›å‡ºå¼‚å¸¸ï¼šthrowâ€‹        Javaå¼‚å¸¸ç±»å¯¹è±¡é™¤åœ¨ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºç°å¼‚å¸¸æ—¶ç”±ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆå¹¶æŠ›å‡ºï¼Œä¹Ÿå¯æ ¹æ®éœ€è¦ä½¿ç”¨äººå·¥åˆ›å»ºå¹¶æŠ›å‡ºã€‚é¦–å…ˆè¦ç”Ÿæˆå¼‚å¸¸ç±»å¯¹è±¡ï¼Œç„¶åé€šè¿‡throwè¯­å¥å®ç°æŠ›å‡ºæ“ä½œ(æäº¤ç»™Javaè¿è¡Œç¯å¢ƒ)ã€‚\nIOException e = new IOException(); throw e;\nå¯ä»¥æŠ›å‡ºçš„å¼‚å¸¸å¿…é¡»æ˜¯Throwableæˆ–å…¶å­ç±»çš„å®ä¾‹ã€‚ä¸‹é¢çš„è¯­å¥åœ¨ç¼–è¯‘æ—¶å°†ä¼šäº§ç”Ÿè¯­æ³•é”™è¯¯ï¼š\nthrow new String(\"want to throw\");\n1.6 ç”¨æˆ·è‡ªå®šä¹‰å¼‚å¸¸ç±»\nä¸€èˆ¬åœ°ï¼Œç”¨æˆ·è‡ªå®šä¹‰å¼‚å¸¸ç±»éƒ½æ˜¯RuntimeExceptionçš„å­ç±»ã€‚\nè‡ªå®šä¹‰å¼‚å¸¸ç±»é€šå¸¸éœ€è¦ç¼–å†™å‡ ä¸ªé‡è½½çš„æ„é€ å™¨ã€‚\nè‡ªå®šä¹‰å¼‚å¸¸éœ€è¦æä¾›serialVersionUID\nè‡ªå®šä¹‰çš„å¼‚å¸¸é€šè¿‡throwæŠ›å‡ºã€‚\nè‡ªå®šä¹‰å¼‚å¸¸æœ€é‡è¦çš„æ˜¯å¼‚å¸¸ç±»çš„åå­—ï¼Œå½“å¼‚å¸¸å‡ºç°æ—¶ï¼Œå¯ä»¥æ ¹æ®åå­—åˆ¤æ–­å¼‚å¸¸ç±»å‹ã€‚\n\n2 å¤šçº¿ç¨‹2.1 åŸºæœ¬æ¦‚å¿µï¼šç¨‹åºã€è¿›ç¨‹ã€çº¿ç¨‹ç¨‹åº(program)æ˜¯ä¸ºå®Œæˆç‰¹å®šä»»åŠ¡ã€ç”¨æŸç§è¯­è¨€ç¼–å†™çš„ä¸€ç»„æŒ‡ä»¤çš„é›†åˆã€‚å³æŒ‡ä¸€æ®µé™æ€çš„ä»£ç ï¼Œé™æ€å¯¹è±¡ã€‚è¿›ç¨‹(process)æ˜¯ç¨‹åºçš„ä¸€æ¬¡æ‰§è¡Œè¿‡ç¨‹ï¼Œæˆ–æ˜¯æ­£åœ¨è¿è¡Œçš„ä¸€ä¸ªç¨‹åºã€‚æ˜¯ä¸€ä¸ªåŠ¨æ€çš„è¿‡ç¨‹ï¼šæœ‰å®ƒè‡ªèº«çš„äº§ç”Ÿã€å­˜åœ¨å’Œæ¶ˆäº¡çš„è¿‡ç¨‹ã€‚â€”â€”ç”Ÿå‘½å‘¨æœŸïƒ˜    å¦‚ï¼šè¿è¡Œä¸­çš„QQï¼Œè¿è¡Œä¸­çš„MP3æ’­æ”¾å™¨ïƒ˜    ç¨‹åºæ˜¯é™æ€çš„ï¼Œè¿›ç¨‹æ˜¯åŠ¨æ€çš„ïƒ˜    è¿›ç¨‹ä½œä¸ºèµ„æºåˆ†é…çš„å•ä½ï¼Œç³»ç»Ÿåœ¨è¿è¡Œæ—¶ä¼šä¸ºæ¯ä¸ªè¿›ç¨‹åˆ†é…ä¸åŒçš„å†…å­˜åŒºåŸŸçº¿ç¨‹(thread)ï¼Œè¿›ç¨‹å¯è¿›ä¸€æ­¥ç»†åŒ–ä¸ºçº¿ç¨‹ï¼Œæ˜¯ä¸€ä¸ªç¨‹åºå†…éƒ¨çš„ä¸€æ¡æ‰§è¡Œè·¯å¾„ã€‚ïƒ˜    è‹¥ä¸€ä¸ªè¿›ç¨‹åŒä¸€æ—¶é—´å¹¶è¡Œæ‰§è¡Œå¤šä¸ªçº¿ç¨‹ï¼Œå°±æ˜¯æ”¯æŒå¤šçº¿ç¨‹çš„ïƒ˜    çº¿ç¨‹ä½œä¸ºè°ƒåº¦å’Œæ‰§è¡Œçš„å•ä½ï¼Œæ¯ä¸ªçº¿ç¨‹æ‹¥æœ‰ç‹¬ç«‹çš„è¿è¡Œæ ˆå’Œç¨‹åºè®¡æ•°å™¨(pc)ï¼Œçº¿ç¨‹åˆ‡æ¢çš„å¼€é”€å°ïƒ˜    ä¸€ä¸ªè¿›ç¨‹ä¸­çš„å¤šä¸ªçº¿ç¨‹å…±äº«ç›¸åŒçš„å†…å­˜å•å…ƒ/å†…å­˜åœ°å€ç©ºé—´ïƒ å®ƒä»¬ä»åŒä¸€å †ä¸­åˆ†é…å¯¹è±¡ï¼Œå¯ä»¥è®¿é—®ç›¸åŒçš„å˜é‡å’Œå¯¹è±¡ã€‚è¿™å°±ä½¿å¾—çº¿ç¨‹é—´é€šä¿¡æ›´ç®€ä¾¿ã€é«˜æ•ˆã€‚ä½†å¤šä¸ªçº¿ç¨‹æ“ä½œå…±äº«çš„ç³»ç»Ÿèµ„æºå¯èƒ½å°±ä¼šå¸¦æ¥å®‰å…¨çš„éšæ‚£ã€‚\nå¹¶è¡Œä¸å¹¶å‘ïƒ˜    å¹¶è¡Œï¼šå¤šä¸ªCPUåŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡ã€‚æ¯”å¦‚ï¼šå¤šä¸ªäººåŒæ—¶åšä¸åŒçš„äº‹ã€‚ïƒ˜    å¹¶å‘ï¼šä¸€ä¸ªCPU(é‡‡ç”¨æ—¶é—´ç‰‡)åŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡ã€‚æ¯”å¦‚ï¼šç§’æ€ã€å¤šä¸ªäººåšåŒä¸€ä»¶äº‹ã€‚\nå¤šçº¿ç¨‹ç¨‹åºçš„ä¼˜ç‚¹ï¼š\n\næé«˜åº”ç”¨ç¨‹åºçš„å“åº”ã€‚å¯¹å›¾å½¢åŒ–ç•Œé¢æ›´æœ‰æ„ä¹‰ï¼Œå¯å¢å¼ºç”¨æˆ·ä½“éªŒã€‚\næé«˜è®¡ç®—æœºç³»ç»ŸCPUçš„åˆ©ç”¨ç‡\næ”¹å–„ç¨‹åºç»“æ„ã€‚å°†æ—¢é•¿åˆå¤æ‚çš„è¿›ç¨‹åˆ†ä¸ºå¤šä¸ªçº¿ç¨‹ï¼Œç‹¬ç«‹è¿è¡Œï¼Œåˆ©äºç†è§£å’Œä¿®æ”¹\n\n2.2 çº¿ç¨‹çš„åˆ›å»ºå’Œä½¿ç”¨â­â­Threadç±»çš„ç‰¹æ€§ïƒ˜    æ¯ä¸ªçº¿ç¨‹éƒ½æ˜¯é€šè¿‡æŸä¸ªç‰¹å®šThreadå¯¹è±¡çš„run()æ–¹æ³•æ¥å®Œæˆæ“ä½œçš„ï¼Œç»å¸¸æŠŠrun()æ–¹æ³•çš„ä¸»ä½“ç§°ä¸ºçº¿ç¨‹ä½“ïƒ˜    é€šè¿‡è¯¥Threadå¯¹è±¡çš„start()æ–¹æ³•æ¥å¯åŠ¨è¿™ä¸ªçº¿ç¨‹ï¼Œè€Œéç›´æ¥è°ƒç”¨run()\nThreadç±»æ„é€ å™¨ïƒ˜    Thread()ï¼šåˆ›å»ºæ–°çš„Threadå¯¹è±¡ïƒ˜    Thread(String threadname)ï¼šåˆ›å»ºçº¿ç¨‹å¹¶æŒ‡å®šçº¿ç¨‹å®ä¾‹åïƒ˜    Thread(Runnable target)ï¼šæŒ‡å®šåˆ›å»ºçº¿ç¨‹çš„ç›®æ ‡å¯¹è±¡ï¼Œå®ƒå®ç°äº†Runnableæ¥å£ä¸­çš„runæ–¹æ³•ïƒ˜    Thread(Runnable target, String name)ï¼šåˆ›å»ºæ–°çš„Threadå¯¹è±¡\nAPIä¸­åˆ›å»ºçº¿ç¨‹çš„ä¸¤ç§æ–¹å¼æ–¹å¼ä¸€ï¼šç»§æ‰¿Threadç±»\n1)    å®šä¹‰å­ç±»ç»§æ‰¿Threadç±»ã€‚2)    å­ç±»ä¸­é‡å†™Threadç±»ä¸­çš„runæ–¹æ³•ã€‚3)    åˆ›å»ºThreadå­ç±»å¯¹è±¡ï¼Œå³åˆ›å»ºäº†çº¿ç¨‹å¯¹è±¡ã€‚4)    è°ƒç”¨çº¿ç¨‹å¯¹è±¡startæ–¹æ³•ï¼šå¯åŠ¨çº¿ç¨‹ï¼Œè°ƒç”¨runæ–¹æ³•ã€‚\næ³¨æ„ç‚¹ï¼š\n\nå¦‚æœè‡ªå·±æ‰‹åŠ¨è°ƒç”¨run()æ–¹æ³•ï¼Œé‚£ä¹ˆå°±åªæ˜¯æ™®é€šæ–¹æ³•ï¼Œæ²¡æœ‰å¯åŠ¨å¤šçº¿ç¨‹æ¨¡å¼ã€‚\nrun()æ–¹æ³•ç”±JVMè°ƒç”¨ï¼Œä»€ä¹ˆæ—¶å€™è°ƒç”¨ï¼Œæ‰§è¡Œçš„è¿‡ç¨‹æ§åˆ¶éƒ½æœ‰æ“ä½œç³»ç»Ÿçš„CPUè°ƒåº¦å†³å®šã€‚\næƒ³è¦å¯åŠ¨å¤šçº¿ç¨‹ï¼Œå¿…é¡»è°ƒç”¨startæ–¹æ³•ã€‚\nä¸€ä¸ªçº¿ç¨‹å¯¹è±¡åªèƒ½è°ƒç”¨ä¸€æ¬¡start()æ–¹æ³•å¯åŠ¨ï¼Œå¦‚æœé‡å¤è°ƒç”¨äº†ï¼Œåˆ™å°†æŠ›å‡ºä»¥ä¸Šçš„å¼‚å¸¸â€œIllegalThreadStateExceptionâ€ã€‚\n\næ–¹å¼äºŒï¼šå®ç°Runnableæ¥å£\n1)    å®šä¹‰å­ç±»ï¼Œå®ç°Runnableæ¥å£ã€‚2)    å­ç±»ä¸­é‡å†™Runnableæ¥å£ä¸­çš„runæ–¹æ³•ã€‚3)    é€šè¿‡Threadç±»å«å‚æ„é€ å™¨åˆ›å»ºçº¿ç¨‹å¯¹è±¡ã€‚4)    å°†Runnableæ¥å£çš„å­ç±»å¯¹è±¡ä½œä¸ºå®é™…å‚æ•°ä¼ é€’ç»™Threadç±»çš„æ„é€ å™¨ä¸­ã€‚5)    è°ƒç”¨Threadç±»çš„startæ–¹æ³•ï¼šå¼€å¯çº¿ç¨‹ï¼Œè°ƒç”¨Runnableå­ç±»æ¥å£çš„runæ–¹æ³•ã€‚\nç»§æ‰¿æ–¹å¼å’Œå®ç°æ–¹å¼çš„è”ç³»ä¸åŒºåˆ«\nåŒºåˆ«ïƒ˜    ç»§æ‰¿Threadï¼šçº¿ç¨‹ä»£ç å­˜æ”¾Threadå­ç±»runæ–¹æ³•ä¸­ã€‚ïƒ˜    å®ç°Runnableï¼šçº¿ç¨‹ä»£ç å­˜åœ¨æ¥å£çš„å­ç±»çš„runæ–¹æ³•ã€‚å®ç°æ–¹å¼çš„å¥½å¤„ïƒ˜    é¿å…äº†å•ç»§æ‰¿çš„å±€é™æ€§ïƒ˜    å¤šä¸ªçº¿ç¨‹å¯ä»¥å…±äº«åŒä¸€ä¸ªæ¥å£å®ç°ç±»çš„å¯¹è±¡ï¼Œéå¸¸é€‚åˆå¤šä¸ªç›¸åŒçº¿ç¨‹æ¥å¤„ç†åŒä¸€ä»½èµ„æºã€‚\nThreadç±»çš„æœ‰å…³æ–¹æ³•\nvoid start():  å¯åŠ¨çº¿ç¨‹ï¼Œå¹¶æ‰§è¡Œå¯¹è±¡çš„run()æ–¹æ³•\nrun():  çº¿ç¨‹åœ¨è¢«è°ƒåº¦æ—¶æ‰§è¡Œçš„æ“ä½œ\nString getName():  è¿”å›çº¿ç¨‹çš„åç§°\nvoid setName(String name):è®¾ç½®è¯¥çº¿ç¨‹åç§°\nstatic Thread currentThread(): è¿”å›å½“å‰çº¿ç¨‹ã€‚åœ¨Threadå­ç±»ä¸­å°±æ˜¯thisï¼Œé€šå¸¸ç”¨äºä¸»çº¿ç¨‹å’ŒRunnableå®ç±»\nstatic  void  yield()ï¼šçº¿ç¨‹è®©æ­¥ïƒ˜    æš‚åœå½“å‰æ­£åœ¨æ‰§è¡Œçš„çº¿ç¨‹ï¼ŒæŠŠæ‰§è¡Œæœºä¼šè®©ç»™ä¼˜å…ˆçº§ç›¸åŒæˆ–æ›´é«˜çš„çº¿ç¨‹ïƒ˜    è‹¥é˜Ÿåˆ—ä¸­æ²¡æœ‰åŒä¼˜å…ˆçº§çš„çº¿ç¨‹ï¼Œå¿½ç•¥æ­¤æ–¹æ³•\njoin() ï¼šå½“æŸä¸ªç¨‹åºæ‰§è¡Œæµä¸­è°ƒç”¨å…¶ä»–çº¿ç¨‹çš„ join() æ–¹æ³•æ—¶ï¼Œè°ƒç”¨çº¿ç¨‹å°†è¢«é˜»å¡ï¼Œç›´åˆ° join() æ–¹æ³•åŠ å…¥çš„ join çº¿ç¨‹æ‰§è¡Œå®Œä¸ºæ­¢ïƒ˜    ä½ä¼˜å…ˆçº§çš„çº¿ç¨‹ä¹Ÿå¯ä»¥è·å¾—æ‰§è¡Œ\nstatic  void  sleep(long millis)ï¼š(æŒ‡å®šæ—¶é—´:æ¯«ç§’)ïƒ˜    ä»¤å½“å‰æ´»åŠ¨çº¿ç¨‹åœ¨æŒ‡å®šæ—¶é—´æ®µå†…æ”¾å¼ƒå¯¹CPUæ§åˆ¶,ä½¿å…¶ä»–çº¿ç¨‹æœ‰æœºä¼šè¢«æ‰§è¡Œ,æ—¶é—´åˆ°åé‡æ’é˜Ÿã€‚ïƒ˜    æŠ›å‡ºInterruptedExceptionå¼‚å¸¸\nstop(): å¼ºåˆ¶çº¿ç¨‹ç”Ÿå‘½æœŸç»“æŸï¼Œä¸æ¨èä½¿ç”¨\nboolean isAlive()ï¼šè¿”å›booleanï¼Œåˆ¤æ–­çº¿ç¨‹æ˜¯å¦è¿˜æ´»ç€\n\nçº¿ç¨‹çš„è°ƒåº¦Javaçš„è°ƒåº¦æ–¹æ³•ïƒ˜    åŒä¼˜å…ˆçº§çº¿ç¨‹ç»„æˆå…ˆè¿›å…ˆå‡ºé˜Ÿåˆ—ï¼ˆå…ˆåˆ°å…ˆæœåŠ¡ï¼‰ï¼Œä½¿ç”¨æ—¶é—´ç‰‡ç­–ç•¥ïƒ˜    å¯¹é«˜ä¼˜å…ˆçº§ï¼Œä½¿ç”¨ä¼˜å…ˆè°ƒåº¦çš„æŠ¢å å¼ç­–ç•¥\nçº¿ç¨‹çš„ä¼˜å…ˆçº§çº¿ç¨‹çš„ä¼˜å…ˆçº§ç­‰çº§ïƒ˜    MAX_PRIORITYï¼š10ïƒ˜    MIN _PRIORITYï¼š1ïƒ˜    NORM_PRIORITYï¼š5æ¶‰åŠçš„æ–¹æ³•ïƒ˜    getPriority() ï¼šè¿”å›çº¿ç¨‹ä¼˜å…ˆå€¼ïƒ˜    setPriority(int newPriority) ï¼šæ”¹å˜çº¿ç¨‹çš„ä¼˜å…ˆçº§è¯´æ˜ïƒ˜    çº¿ç¨‹åˆ›å»ºæ—¶ç»§æ‰¿çˆ¶çº¿ç¨‹çš„ä¼˜å…ˆçº§ïƒ˜    ä½ä¼˜å…ˆçº§åªæ˜¯è·å¾—è°ƒåº¦çš„æ¦‚ç‡ä½ï¼Œå¹¶éä¸€å®šæ˜¯åœ¨é«˜ä¼˜å…ˆçº§çº¿ç¨‹ä¹‹åæ‰è¢«è°ƒç”¨\nçº¿ç¨‹çš„åˆ†ç±»Javaä¸­çš„çº¿ç¨‹åˆ†ä¸ºä¸¤ç±»ï¼šä¸€ç§æ˜¯å®ˆæŠ¤çº¿ç¨‹ï¼Œä¸€ç§æ˜¯ç”¨æˆ·çº¿ç¨‹ã€‚\n\nå®ƒä»¬åœ¨å‡ ä¹æ¯ä¸ªæ–¹é¢éƒ½æ˜¯ç›¸åŒçš„ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯åˆ¤æ–­JVMä½•æ—¶ç¦»å¼€ã€‚\nå®ˆæŠ¤çº¿ç¨‹æ˜¯ç”¨æ¥æœåŠ¡ç”¨æˆ·çº¿ç¨‹çš„ï¼Œé€šè¿‡åœ¨start()æ–¹æ³•å‰è°ƒç”¨thread.setDaemon(true)å¯ä»¥æŠŠä¸€ä¸ªç”¨æˆ·çº¿ç¨‹å˜æˆä¸€ä¸ªå®ˆæŠ¤çº¿ç¨‹ã€‚\nJavaåƒåœ¾å›æ”¶å°±æ˜¯ä¸€ä¸ªå…¸å‹çš„å®ˆæŠ¤çº¿ç¨‹ã€‚\nè‹¥JVMä¸­éƒ½æ˜¯å®ˆæŠ¤çº¿ç¨‹ï¼Œå½“å‰JVMå°†é€€å‡ºã€‚\nå½¢è±¡ç†è§£ï¼šå…”æ­»ç‹—çƒ¹ï¼Œé¸Ÿå°½å¼“è—\n\n2.3 çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸJDKä¸­ç”¨Thread.Stateç±»å®šä¹‰äº†çº¿ç¨‹çš„å‡ ç§çŠ¶æ€\næ–°å»ºï¼š å½“ä¸€ä¸ªThreadç±»æˆ–å…¶å­ç±»çš„å¯¹è±¡è¢«å£°æ˜å¹¶åˆ›å»ºæ—¶ï¼Œæ–°ç”Ÿçš„çº¿ç¨‹å¯¹è±¡å¤„äºæ–°å»ºçŠ¶æ€å°±ç»ªï¼šå¤„äºæ–°å»ºçŠ¶æ€çš„çº¿ç¨‹è¢«start()åï¼Œå°†è¿›å…¥çº¿ç¨‹é˜Ÿåˆ—ç­‰å¾…CPUæ—¶é—´ç‰‡ï¼Œæ­¤æ—¶å®ƒå·²å…·å¤‡äº†è¿è¡Œçš„æ¡ä»¶ï¼Œåªæ˜¯æ²¡åˆ†é…åˆ°CPUèµ„æºè¿è¡Œï¼šå½“å°±ç»ªçš„çº¿ç¨‹è¢«è°ƒåº¦å¹¶è·å¾—CPUèµ„æºæ—¶,ä¾¿è¿›å…¥è¿è¡ŒçŠ¶æ€ï¼Œ run()æ–¹æ³•å®šä¹‰äº†çº¿ç¨‹çš„æ“ä½œå’ŒåŠŸèƒ½é˜»å¡ï¼šåœ¨æŸç§ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œè¢«äººä¸ºæŒ‚èµ·æˆ–æ‰§è¡Œè¾“å…¥è¾“å‡ºæ“ä½œæ—¶ï¼Œè®©å‡º CPU å¹¶ä¸´æ—¶ä¸­æ­¢è‡ªå·±çš„æ‰§è¡Œï¼Œè¿›å…¥é˜»å¡çŠ¶æ€æ­»äº¡ï¼šçº¿ç¨‹å®Œæˆäº†å®ƒçš„å…¨éƒ¨å·¥ä½œæˆ–çº¿ç¨‹è¢«æå‰å¼ºåˆ¶æ€§åœ°ä¸­æ­¢æˆ–å‡ºç°å¼‚å¸¸å¯¼è‡´ç»“æŸ\n\n2.4 çº¿ç¨‹çš„åŒæ­¥é—®é¢˜çš„æå‡ºïƒ˜    å¤šä¸ªçº¿ç¨‹æ‰§è¡Œçš„ä¸ç¡®å®šæ€§å¼•èµ·æ‰§è¡Œç»“æœçš„ä¸ç¨³å®šïƒ˜    å¤šä¸ªçº¿ç¨‹å¯¹è´¦æœ¬çš„å…±äº«ï¼Œä¼šé€ æˆæ“ä½œçš„ä¸å®Œæ•´æ€§ï¼Œä¼šç ´åæ•°æ®ã€‚\nSynchronizedçš„ä½¿ç”¨æ–¹æ³•å¯¹å¤šæ¡æ“ä½œå…±äº«æ•°æ®çš„è¯­å¥ï¼Œåªèƒ½è®©ä¸€ä¸ªçº¿ç¨‹éƒ½æ‰§è¡Œå®Œï¼Œåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå…¶ä»–çº¿ç¨‹ä¸å¯ä»¥å‚ä¸æ‰§è¡Œã€‚\n\nåŒæ­¥ä»£ç å—ï¼š\n\nsynchronized (å¯¹è±¡){\n// éœ€è¦è¢«åŒæ­¥çš„ä»£ç ï¼›\n}\n\nsynchronizedè¿˜å¯ä»¥æ”¾åœ¨æ–¹æ³•å£°æ˜ä¸­ï¼Œè¡¨ç¤ºæ•´ä¸ªæ–¹æ³•ä¸ºåŒæ­¥æ–¹æ³•ã€‚ä¾‹å¦‚ï¼š\n\npublic synchronized void show (String name){ \n...\n}\nåŒæ­¥æœºåˆ¶ä¸­çš„é”å½“èµ„æºè¢«ä¸€ä¸ªä»»åŠ¡ä½¿ç”¨æ—¶ï¼Œåœ¨å…¶ä¸ŠåŠ é”ã€‚ç¬¬ä¸€ä¸ªè®¿é—®æŸé¡¹èµ„æºçš„ä»»åŠ¡å¿…é¡»é”å®šè¿™é¡¹èµ„æºï¼Œä½¿å…¶ä»–ä»»åŠ¡åœ¨å…¶è¢«è§£é”ä¹‹å‰ï¼Œå°±æ— æ³•è®¿é—®å®ƒäº†ï¼Œè€Œåœ¨å…¶è¢«è§£é”ä¹‹æ—¶ï¼Œå¦ä¸€ä¸ªä»»åŠ¡å°±å¯ä»¥é”å®šå¹¶ä½¿ç”¨å®ƒäº†ã€‚\nsynchronizedçš„é”\n\nä»»æ„å¯¹è±¡éƒ½å¯ä»¥ä½œä¸ºåŒæ­¥é”ã€‚æ‰€æœ‰å¯¹è±¡éƒ½è‡ªåŠ¨å«æœ‰å•ä¸€çš„é”ï¼ˆç›‘è§†å™¨ï¼‰ã€‚\nåŒæ­¥æ–¹æ³•çš„é”ï¼šé™æ€æ–¹æ³•ï¼ˆç±»å.classï¼‰ã€éé™æ€æ–¹æ³•ï¼ˆthisï¼‰\nåŒæ­¥ä»£ç å—ï¼šè‡ªå·±æŒ‡å®šï¼Œå¾ˆå¤šæ—¶å€™ä¹Ÿæ˜¯æŒ‡å®šä¸ºthisæˆ–ç±»å.class\nå¿…é¡»ç¡®ä¿ä½¿ç”¨åŒä¸€ä¸ªèµ„æºçš„å¤šä¸ªçº¿ç¨‹å…±ç”¨ä¸€æŠŠé”ï¼Œè¿™ä¸ªéå¸¸é‡è¦ï¼Œå¦åˆ™å°±æ— æ³•ä¿è¯å…±äº«èµ„æºçš„å®‰å…¨\nä¸€ä¸ªçº¿ç¨‹ç±»ä¸­çš„æ‰€æœ‰é™æ€æ–¹æ³•å…±ç”¨åŒä¸€æŠŠé”ï¼ˆç±»å.classï¼‰ï¼Œæ‰€æœ‰éé™æ€æ–¹æ³•å…±ç”¨åŒä¸€æŠŠé”ï¼ˆthisï¼‰ï¼ŒåŒæ­¥ä»£ç å—ï¼ˆæŒ‡å®šéœ€è°¨æ…ï¼‰\n\nåŒæ­¥çš„èŒƒå›´1ã€å¦‚ä½•æ‰¾é—®é¢˜ï¼Œå³ä»£ç æ˜¯å¦å­˜åœ¨çº¿ç¨‹å®‰å…¨ï¼Ÿï¼ˆéå¸¸é‡è¦ï¼‰\nï¼ˆ1ï¼‰    æ˜ç¡®å“ªäº›ä»£ç æ˜¯å¤šçº¿ç¨‹è¿è¡Œçš„ä»£ç ï¼ˆ2ï¼‰    æ˜ç¡®å¤šä¸ªçº¿ç¨‹æ˜¯å¦æœ‰å…±äº«æ•°æ®ï¼ˆ3ï¼‰    æ˜ç¡®å¤šçº¿ç¨‹è¿è¡Œä»£ç ä¸­æ˜¯å¦æœ‰å¤šæ¡è¯­å¥æ“ä½œå…±äº«æ•°æ®\n2ã€å¦‚ä½•è§£å†³å‘¢ï¼Ÿï¼ˆéå¸¸é‡è¦ï¼‰å¯¹å¤šæ¡æ“ä½œå…±äº«æ•°æ®çš„è¯­å¥ï¼Œåªèƒ½è®©ä¸€ä¸ªçº¿ç¨‹éƒ½æ‰§è¡Œå®Œï¼Œåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå…¶ä»–çº¿ç¨‹ä¸å¯ä»¥å‚ä¸æ‰§è¡Œã€‚å³æ‰€æœ‰æ“ä½œå…±äº«æ•°æ®çš„è¿™äº›è¯­å¥éƒ½è¦æ”¾åœ¨åŒæ­¥èŒƒå›´ä¸­3ã€åˆ‡è®°ï¼š\nï¬    èŒƒå›´å¤ªå°ï¼šæ²¡é”ä½æ‰€æœ‰æœ‰å®‰å…¨é—®é¢˜çš„ä»£ç ï¬    èŒƒå›´å¤ªå¤§ï¼šæ²¡å‘æŒ¥å¤šçº¿ç¨‹çš„åŠŸèƒ½ã€‚\né‡Šæ”¾é”çš„æ“ä½œï¬    å½“å‰çº¿ç¨‹çš„åŒæ­¥æ–¹æ³•ã€åŒæ­¥ä»£ç å—æ‰§è¡Œç»“æŸã€‚ï¬    å½“å‰çº¿ç¨‹åœ¨åŒæ­¥ä»£ç å—ã€åŒæ­¥æ–¹æ³•ä¸­é‡åˆ°breakã€returnç»ˆæ­¢äº†è¯¥ä»£ç å—ã€è¯¥æ–¹æ³•çš„ç»§ç»­æ‰§è¡Œã€‚ï¬    å½“å‰çº¿ç¨‹åœ¨åŒæ­¥ä»£ç å—ã€åŒæ­¥æ–¹æ³•ä¸­å‡ºç°äº†æœªå¤„ç†çš„Erroræˆ–Exceptionï¼Œå¯¼è‡´å¼‚å¸¸ç»“æŸã€‚ï¬    å½“å‰çº¿ç¨‹åœ¨åŒæ­¥ä»£ç å—ã€åŒæ­¥æ–¹æ³•ä¸­æ‰§è¡Œäº†çº¿ç¨‹å¯¹è±¡çš„wait()æ–¹æ³•ï¼Œå½“å‰çº¿ç¨‹æš‚åœï¼Œå¹¶é‡Šæ”¾é”ã€‚\nä¸ä¼šé‡Šæ”¾é”çš„æ“ä½œ\nçº¿ç¨‹æ‰§è¡ŒåŒæ­¥ä»£ç å—æˆ–åŒæ­¥æ–¹æ³•æ—¶ï¼Œç¨‹åºè°ƒç”¨Thread.sleep()ã€ Thread.yield()æ–¹æ³•æš‚åœå½“å‰çº¿ç¨‹çš„æ‰§è¡Œ\nçº¿ç¨‹æ‰§è¡ŒåŒæ­¥ä»£ç å—æ—¶ï¼Œå…¶ä»–çº¿ç¨‹è°ƒç”¨äº†è¯¥çº¿ç¨‹çš„suspend()æ–¹æ³•å°†è¯¥çº¿ç¨‹æŒ‚èµ·ï¼Œè¯¥çº¿ç¨‹ä¸ä¼šé‡Šæ”¾é”ï¼ˆåŒæ­¥ç›‘è§†å™¨ï¼‰ã€‚ïƒ˜    åº”å°½é‡é¿å…ä½¿ç”¨suspend()å’Œresume()æ¥æ§åˆ¶çº¿ç¨‹\n\nçº¿ç¨‹çš„æ­»é”é—®é¢˜æ­»é”:ä¸åŒçš„çº¿ç¨‹åˆ†åˆ«å ç”¨å¯¹æ–¹éœ€è¦çš„åŒæ­¥èµ„æºä¸æ”¾å¼ƒï¼Œéƒ½åœ¨ç­‰å¾…å¯¹æ–¹æ”¾å¼ƒè‡ªå·±éœ€è¦çš„åŒæ­¥èµ„æºï¼Œå°±å½¢æˆäº†çº¿ç¨‹çš„æ­»é”,å‡ºç°æ­»é”åï¼Œä¸ä¼šå‡ºç°å¼‚å¸¸ï¼Œä¸ä¼šå‡ºç°æç¤ºï¼Œåªæ˜¯æ‰€æœ‰çš„çº¿ç¨‹éƒ½å¤„äºé˜»å¡çŠ¶æ€ï¼Œæ— æ³•ç»§ç»­ã€‚è§£å†³æ–¹æ³•ïƒ˜    ä¸“é—¨çš„ç®—æ³•ã€åŸåˆ™ïƒ˜    å°½é‡å‡å°‘åŒæ­¥èµ„æºçš„å®šä¹‰ïƒ˜    å°½é‡é¿å…åµŒå¥—åŒæ­¥\nLock(é”)ï¬    ä»JDK 5.0å¼€å§‹ï¼ŒJavaæä¾›äº†æ›´å¼ºå¤§çš„çº¿ç¨‹åŒæ­¥æœºåˆ¶â€”â€”é€šè¿‡æ˜¾å¼å®šä¹‰åŒæ­¥é”å¯¹è±¡æ¥å®ç°åŒæ­¥ã€‚åŒæ­¥é”ä½¿ç”¨Lockå¯¹è±¡å……å½“ã€‚ï¬    java.util.concurrent.locks.Lockæ¥å£æ˜¯æ§åˆ¶å¤šä¸ªçº¿ç¨‹å¯¹å…±äº«èµ„æºè¿›è¡Œè®¿é—®çš„å·¥å…·ã€‚é”æä¾›äº†å¯¹å…±äº«èµ„æºçš„ç‹¬å è®¿é—®ï¼Œæ¯æ¬¡åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹å¯¹Lockå¯¹è±¡åŠ é”ï¼Œçº¿ç¨‹å¼€å§‹è®¿é—®å…±äº«èµ„æºä¹‹å‰åº”å…ˆè·å¾—Lockå¯¹è±¡ã€‚ï¬    ReentrantLock ç±»å®ç°äº† Lock ï¼Œå®ƒæ‹¥æœ‰ä¸ synchronized ç›¸åŒçš„å¹¶å‘æ€§å’Œå†…å­˜è¯­ä¹‰ï¼Œåœ¨å®ç°çº¿ç¨‹å®‰å…¨çš„æ§åˆ¶ä¸­ï¼Œæ¯”è¾ƒå¸¸ç”¨çš„æ˜¯ReentrantLockï¼Œå¯ä»¥æ˜¾å¼åŠ é”ã€é‡Šæ”¾é”ã€‚\nclass A{\n    private final ReentrantLock lock = new ReenTrantLock();\n    public void m(){\n        lock.lock();\n        try{\n        \t11ä¿è¯çº¿ç¨‹å®‰å…¨çš„ä»£ç ;\n        }\n        finally{\n        \tlock.unlock();\n        }\n    }\n}\n//æ³¨æ„ï¼šå¦‚æœåŒæ­¥ä»£ç æœ‰å¼‚å¸¸ï¼Œè¦å°†unlock()å†™å…¥finallyè¯­å¥å—\nsynchronized ä¸ Lock çš„å¯¹æ¯”\nLockæ˜¯æ˜¾å¼é”ï¼ˆæ‰‹åŠ¨å¼€å¯å’Œå…³é—­é”ï¼Œåˆ«å¿˜è®°å…³é—­é”ï¼‰ï¼Œsynchronizedæ˜¯éšå¼é”ï¼Œå‡ºäº†ä½œç”¨åŸŸè‡ªåŠ¨é‡Šæ”¾\nLockåªæœ‰ä»£ç å—é”ï¼Œsynchronizedæœ‰ä»£ç å—é”å’Œæ–¹æ³•é”\nä½¿ç”¨Locké”ï¼ŒJVMå°†èŠ±è´¹è¾ƒå°‘çš„æ—¶é—´æ¥è°ƒåº¦çº¿ç¨‹ï¼Œæ€§èƒ½æ›´å¥½ã€‚å¹¶ä¸”å…·æœ‰æ›´å¥½çš„æ‰©å±•æ€§ï¼ˆæä¾›æ›´å¤šçš„å­ç±»ï¼‰\n\n2.5 çº¿ç¨‹çš„é€šä¿¡\nwait()ï¼šä»¤å½“å‰çº¿ç¨‹æŒ‚èµ·å¹¶æ”¾å¼ƒCPUã€åŒæ­¥èµ„æºå¹¶ç­‰å¾…ï¼Œä½¿åˆ«çš„çº¿ç¨‹å¯è®¿é—®å¹¶ä¿®æ”¹å…±äº«èµ„æºï¼Œè€Œå½“å‰çº¿ç¨‹æ’é˜Ÿç­‰å€™å…¶ä»–çº¿ç¨‹è°ƒç”¨notify()æˆ–notifyAll()æ–¹æ³•å”¤é†’ï¼Œå”¤é†’åç­‰å¾…é‡æ–°è·å¾—å¯¹ç›‘è§†å™¨çš„æ‰€æœ‰æƒåæ‰èƒ½ç»§ç»­æ‰§è¡Œã€‚\nnotify()ï¼šå”¤é†’æ­£åœ¨æ’é˜Ÿç­‰å¾…åŒæ­¥èµ„æºçš„çº¿ç¨‹ä¸­ä¼˜å…ˆçº§æœ€é«˜è€…ç»“æŸç­‰å¾…\nnotifyAll ()ï¼šå”¤é†’æ­£åœ¨æ’é˜Ÿç­‰å¾…èµ„æºçš„æ‰€æœ‰çº¿ç¨‹ç»“æŸç­‰å¾….\n\nï¬    è¿™ä¸‰ä¸ªæ–¹æ³•åªæœ‰åœ¨synchronizedæ–¹æ³•æˆ–synchronizedä»£ç å—ä¸­æ‰èƒ½ä½¿ç”¨ï¼Œå¦åˆ™ä¼šæŠ¥java.lang.IllegalMonitorStateExceptionå¼‚å¸¸ã€‚å› ä¸ºè¿™ä¸‰ä¸ªæ–¹æ³•å¿…é¡»æœ‰é”å¯¹è±¡è°ƒç”¨ï¼Œè€Œä»»æ„å¯¹è±¡éƒ½å¯ä»¥ä½œä¸ºsynchronizedçš„åŒæ­¥é”ï¼Œå› æ­¤è¿™ä¸‰ä¸ªæ–¹æ³•åªèƒ½åœ¨Objectç±»ä¸­å£°æ˜ã€‚\nwait() æ–¹æ³•ï¬    åœ¨å½“å‰çº¿ç¨‹ä¸­è°ƒç”¨æ–¹æ³•ï¼š å¯¹è±¡å.wait()ï¬    ä½¿å½“å‰çº¿ç¨‹è¿›å…¥ç­‰å¾…ï¼ˆæŸå¯¹è±¡ï¼‰çŠ¶æ€ ï¼Œç›´åˆ°å¦ä¸€çº¿ç¨‹å¯¹è¯¥å¯¹è±¡å‘å‡º notify(æˆ–notifyAll) ä¸ºæ­¢ã€‚ï¬    è°ƒç”¨æ–¹æ³•çš„å¿…è¦æ¡ä»¶ï¼šå½“å‰çº¿ç¨‹å¿…é¡»å…·æœ‰å¯¹è¯¥å¯¹è±¡çš„ç›‘æ§æƒï¼ˆåŠ é”ï¼‰ï¬    è°ƒç”¨æ­¤æ–¹æ³•åï¼Œå½“å‰çº¿ç¨‹å°†é‡Šæ”¾å¯¹è±¡ç›‘æ§æƒ ï¼Œç„¶åè¿›å…¥ç­‰å¾…ï¬    åœ¨å½“å‰çº¿ç¨‹è¢«notifyåï¼Œè¦é‡æ–°è·å¾—ç›‘æ§æƒï¼Œç„¶åä»æ–­ç‚¹å¤„ç»§ç»­ä»£ç çš„æ‰§è¡Œã€‚\nnotify()/notifyAll()ï¬    åœ¨å½“å‰çº¿ç¨‹ä¸­è°ƒç”¨æ–¹æ³•ï¼š å¯¹è±¡å.notify()ï¬    åŠŸèƒ½ï¼šå”¤é†’ç­‰å¾…è¯¥å¯¹è±¡ç›‘æ§æƒçš„ä¸€ä¸ª/æ‰€æœ‰çº¿ç¨‹ã€‚ï¬    è°ƒç”¨æ–¹æ³•çš„å¿…è¦æ¡ä»¶ï¼šå½“å‰çº¿ç¨‹å¿…é¡»å…·æœ‰å¯¹è¯¥å¯¹è±¡çš„ç›‘æ§æƒï¼ˆåŠ é”ï¼‰\n2.6 JDK5.0æ–°å¢çº¿ç¨‹åˆ›å»ºæ–¹å¼æ–°å¢æ–¹å¼ä¸€ï¼šå®ç°Callableæ¥å£ä¸ä½¿ç”¨Runnableç›¸æ¯”ï¼Œ CallableåŠŸèƒ½æ›´å¼ºå¤§äº›ïƒ˜    ç›¸æ¯”run()æ–¹æ³•ï¼Œå¯ä»¥æœ‰è¿”å›å€¼ïƒ˜    æ–¹æ³•å¯ä»¥æŠ›å‡ºå¼‚å¸¸ïƒ˜    æ”¯æŒæ³›å‹çš„è¿”å›å€¼ïƒ˜    éœ€è¦å€ŸåŠ©FutureTaskç±»ï¼Œæ¯”å¦‚è·å–è¿”å›ç»“æœ\nFutureæ¥å£ïƒ˜    å¯ä»¥å¯¹å…·ä½“Runnableã€Callableä»»åŠ¡çš„æ‰§è¡Œç»“æœè¿›è¡Œå–æ¶ˆã€æŸ¥è¯¢æ˜¯å¦å®Œæˆã€è·å–ç»“æœç­‰ã€‚ïƒ˜    FutrueTaskæ˜¯Futrueæ¥å£çš„å”¯ä¸€çš„å®ç°ç±»ïƒ˜    FutureTask åŒæ—¶å®ç°äº†Runnable, Futureæ¥å£ã€‚å®ƒæ—¢å¯ä»¥ä½œä¸ºRunnableè¢«çº¿ç¨‹æ‰§è¡Œï¼Œåˆå¯ä»¥ä½œä¸ºFutureå¾—åˆ°Callableçš„è¿”å›å€¼\næ–°å¢æ–¹å¼äºŒï¼šä½¿ç”¨çº¿ç¨‹æ± èƒŒæ™¯ï¼šç»å¸¸åˆ›å»ºå’Œé”€æ¯ã€ä½¿ç”¨é‡ç‰¹åˆ«å¤§çš„èµ„æºï¼Œæ¯”å¦‚å¹¶å‘æƒ…å†µä¸‹çš„çº¿ç¨‹ï¼Œå¯¹æ€§èƒ½å½±å“å¾ˆå¤§ã€‚æ€è·¯ï¼šæå‰åˆ›å»ºå¥½å¤šä¸ªçº¿ç¨‹ï¼Œæ”¾å…¥çº¿ç¨‹æ± ä¸­ï¼Œä½¿ç”¨æ—¶ç›´æ¥è·å–ï¼Œä½¿ç”¨å®Œæ”¾å›æ± ä¸­ã€‚å¯ä»¥é¿å…é¢‘ç¹åˆ›å»ºé”€æ¯ã€å®ç°é‡å¤åˆ©ç”¨ã€‚ç±»ä¼¼ç”Ÿæ´»ä¸­çš„å…¬å…±äº¤é€šå·¥å…·ã€‚å¥½å¤„ï¼šïƒ˜    æé«˜å“åº”é€Ÿåº¦ï¼ˆå‡å°‘äº†åˆ›å»ºæ–°çº¿ç¨‹çš„æ—¶é—´ï¼‰ïƒ˜    é™ä½èµ„æºæ¶ˆè€—ï¼ˆé‡å¤åˆ©ç”¨çº¿ç¨‹æ± ä¸­çº¿ç¨‹ï¼Œä¸éœ€è¦æ¯æ¬¡éƒ½åˆ›å»ºï¼‰ïƒ˜    ä¾¿äºçº¿ç¨‹ç®¡ç†            corePoolSizeï¼šæ ¸å¿ƒæ± çš„å¤§å°            maximumPoolSizeï¼šæœ€å¤§çº¿ç¨‹æ•°            keepAliveTimeï¼šçº¿ç¨‹æ²¡æœ‰ä»»åŠ¡æ—¶æœ€å¤šä¿æŒå¤šé•¿æ—¶é—´åä¼šç»ˆæ­¢\nçº¿ç¨‹æ± ç›¸å…³APIJDK 5.0èµ·æä¾›äº†çº¿ç¨‹æ± ç›¸å…³APIï¼šExecutorService å’Œ ExecutorsExecutorServiceï¼šçœŸæ­£çš„çº¿ç¨‹æ± æ¥å£ã€‚å¸¸è§å­ç±»ThreadPoolExecutorïƒ˜    void execute(Runnable command) ï¼šæ‰§è¡Œä»»åŠ¡/å‘½ä»¤ï¼Œæ²¡æœ‰è¿”å›å€¼ï¼Œä¸€èˆ¬ç”¨æ¥æ‰§è¡ŒRunnableïƒ˜     Future submit(Callable task)ï¼šæ‰§è¡Œä»»åŠ¡ï¼Œæœ‰è¿”å›å€¼ï¼Œä¸€èˆ¬åˆæ¥æ‰§è¡ŒCallableïƒ˜    void shutdown() ï¼šå…³é—­è¿æ¥æ± Executorsï¼šå·¥å…·ç±»ã€çº¿ç¨‹æ± çš„å·¥å‚ç±»ï¼Œç”¨äºåˆ›å»ºå¹¶è¿”å›ä¸åŒç±»å‹çš„çº¿ç¨‹æ± ïƒ˜    Executors.newCachedThreadPool()ï¼šåˆ›å»ºä¸€ä¸ªå¯æ ¹æ®éœ€è¦åˆ›å»ºæ–°çº¿ç¨‹çš„çº¿ç¨‹æ± ïƒ˜    Executors.newFixedThreadPool(n); åˆ›å»ºä¸€ä¸ªå¯é‡ç”¨å›ºå®šçº¿ç¨‹æ•°çš„çº¿ç¨‹æ± ïƒ˜    Executors.newSingleThreadExecutor() ï¼šåˆ›å»ºä¸€ä¸ªåªæœ‰ä¸€ä¸ªçº¿ç¨‹çš„çº¿ç¨‹æ± ïƒ˜    Executors.newScheduledThreadPool(n)ï¼šåˆ›å»ºä¸€ä¸ªçº¿ç¨‹æ± ï¼Œå®ƒå¯å®‰æ’åœ¨ç»™å®šå»¶è¿Ÿåè¿è¡Œå‘½ä»¤æˆ–è€…å®šæœŸåœ°æ‰§è¡Œã€‚\n","slug":"J2-å¼‚å¸¸ä¸å¤šçº¿ç¨‹","date":"2021-11-12T02:28:44.000Z","categories_index":"JAVA","tags_index":"java","author_index":"YFR718"},{"id":"3c25c67d0781653798d002eeefd584b0","title":"ç¯å¢ƒä¸åŒ…ç®¡ç†","content":"1. Pipå¯¹ Python åŒ…çš„æŸ¥æ‰¾ã€ä¸‹è½½ã€å®‰è£…ã€å¸è½½çš„åŠŸèƒ½ã€‚\n1.1 pipå¸¸ç”¨å‘½ä»¤pipçš„æ›´æ–°\npython -m pip install --upgrade pip\npipå®‰è£…åŒ…\npip install åŒ…å==ç‰ˆæœ¬å·\npipæ›´æ–°åŒ…\npip install --upgrade è¦æ›´æ–°çš„åŒ…å\npipåˆ é™¤åŒ…\npip uninstall è¦å¸è½½çš„åŒ…å\n1.2 pipé•œåƒé…ç½®ä¸´æ—¶ä½¿ç”¨pipå®‰è£…åŒ…çš„æ—¶å€™åŠ å‚æ•°-i é•œåƒæºåœ°å€\npip install bs4 -i https://pypi.tuna.tsinghua.edu.cn/simple\næ¸…åï¼šhttps://pypi.tuna.tsinghua.edu.cn/simpleé˜¿é‡Œäº‘ï¼šhttp://mirrors.aliyun.com/pypi/simple/ä¸­å›½ç§‘æŠ€å¤§å­¦ https://pypi.mirrors.ustc.edu.cn/simple/åä¸­ç†å·¥å¤§å­¦ï¼šhttp://pypi.hustunique.com/å±±ä¸œç†å·¥å¤§å­¦ï¼šhttp://pypi.sdutlinux.org/è±†ç“£ï¼šhttp://pypi.douban.com/simple/\næ°¸ä¹…æ›´æ”¹Linuxï¼šä¿®æ”¹ ~/.pip/pip.conf (æ²¡æœ‰å°±åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹åŠæ–‡ä»¶ã€‚æ–‡ä»¶å¤¹è¦åŠ â€œ.â€ï¼Œè¡¨ç¤ºæ˜¯éšè—æ–‡ä»¶å¤¹)\n[global] \nindex-url = https://pypi.tuna.tsinghua.edu.cn/simple\n[install]\ntrusted-host=mirrors.aliyun.com\nwindowsç›´æ¥åœ¨userç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªpipç›®å½•ï¼Œå¦‚ï¼šC:\\Users\\xx\\pipï¼Œç„¶åæ–°å»ºæ–‡ä»¶pip.iniï¼Œå³ %HOMEPATH%\\pip\\pip.iniï¼Œåœ¨pip.iniæ–‡ä»¶ä¸­è¾“å…¥ä»¥ä¸‹å†…å®¹ï¼ˆä»¥è±†ç“£é•œåƒä¸ºä¾‹ï¼‰ï¼š\n[global]\nindex-url = http://pypi.douban.com/simple\n[install]\ntrusted-host = pypi.douban.com\n1.3 pipä¾èµ–è¿ç§»å¯¼å‡ºä¾èµ–\npip freeze &gt;  requirements.txt\nå®‰è£…ä¾èµ–\npip install -r requirements.txt\n2. Anacondaconda is a tool for managing and deploying applications, environments and packages.\n2.1 ä¸‹è½½å®‰è£…å®˜ç½‘ä¸‹è½½ï¼šAnaconda | The Worldâ€™s Most Popular Data Science Platform\nä¸‹ä¸€æ­¥ã€ä¸‹ä¸€æ­¥ç‚¹ç‚¹ç‚¹ï¼Œå®‰è£…å®Œæˆ\n2.2 condaç¯å¢ƒç®¡ç†conda clean ï¼šå‡€åŒ–Anaconda\n# åˆ é™¤ç´¢å¼•ç¼“å­˜ï¼Œé”å®šæ–‡ä»¶ï¼Œæœªä½¿ç”¨çš„ç¼“å­˜åŒ…ï¼Œå’ŒåŒ…ã€‚\nconda clean -a\nconda compareï¼šæ¯”è¾ƒcondaç¯å¢ƒä¹‹é—´çš„åŒ…ã€‚\nconda configï¼šé…ç½®ç¯å¢ƒçš„é…ç½®ä¿¡æ¯ã€‚\nconda createï¼šåˆ›å»ºæ–°çš„condaç¯å¢ƒã€‚â­â­\n# åˆ›å»ºç¯å¢ƒï¼šconda create -n ç¯å¢ƒåç§° [python]\nconda create -n env_name python=3.8\n\n# ç”¨ environment.yml é…ç½®æ–‡ä»¶åˆ›å»ºç¯å¢ƒ\nconda env create -f nvironment.yml\n\n# å¯¼å‡ºenvironment.ymlç¯å¢ƒæ–‡ä»¶\nconda env_name export &gt; environment.yml \n\n\n\n\n\n\n\n\n\nå‘çˆ¹ï¼š\nè£…æ–°ç¯å¢ƒå¿…é¡»åˆ é™¤åŸé•œåƒé…ç½®\nconda infoï¼šæ˜¾ç¤ºæœ‰å…³å½“å‰condaå®‰è£…çš„ä¿¡æ¯ã€‚\nconda activate env_nameï¼šæ¿€æ´»ç¯å¢ƒã€‚â­â­\nconda deactivate env_nameï¼šåœç”¨ç¯å¢ƒã€‚\nconda env remove â€”n env_nameï¼šåˆ é™¤ç¯å¢ƒ\næ„å»ºç›¸åŒçš„condaç¯å¢ƒï¼ˆä¸åŒæœºå™¨é—´çš„ç¯å¢ƒå¤åˆ¶ï¼‰\n# æ¿€æ´»éœ€è¦å¯¼å‡ºé…ç½®æ–‡ä»¶çš„ç¯å¢ƒ\nconda list --explicit &gt; files.txt\n# åœ¨åŒç³»ç»Ÿçš„ä¸åŒæœºå™¨æ‰§è¡Œ\nconda create --name env_name -f files.txt\nå…‹éš†ç¯å¢ƒï¼ˆåŒä¸€å°æœºå™¨çš„ç¯å¢ƒå¤åˆ¶\nconda create --name clone_env_name --clone env_name\nconda env listï¼šæŸ¥çœ‹ç¯å¢ƒåˆ—è¡¨\n2.3 condaåŒ…ç®¡ç†conda search [åŒ…å]ï¼šæŸ¥çœ‹ç‰¹å®šåŒ…\nconda install åŒ…å[=ç‰ˆæœ¬å·]ï¼šå®‰è£…æŒ‡å®šåŒ…\nconda update åŒ…åï¼šæ›´æ–°åŒ…\nconda update pythonï¼šæ›´æ–°python\nconda listï¼šæŸ¥çœ‹å½“å‰ç¯å¢ƒçš„åŒ…\nconda remove åŒ…åï¼šåˆ é™¤åŒ…\n2.4 condaé•œåƒä¿®æ”¹conda config â€”remove-key channelsæ¢å¤é»˜è®¤é•œåƒ\nconda config â€”add é•œåƒåœ°å€\n# æ¸…åå¤§å­¦é•œåƒ\nconda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/\nconda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/\nconda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/conda-forge \nconda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/msys2/\nconda config â€”showï¼šåœ¨channelé‡ŒæŸ¥çœ‹é…ç½®çš„é•œåƒåœ°å€\n3. Jupyter notebook3.1 è®¾ç½®ä»£ç æç¤ºconda activate base\n\npip install jupyter_contrib_nbextensions\n\njupyter contrib nbextension install --user\n\npip install jupyter_nbextensions_configurator\n\njupyter nbextensions_configurator enable --user\n\n\n3.2 jupyterä¸­æ·»åŠ condaç¯å¢ƒæŸ¥çœ‹JupyterNotebookçš„kernelåŠå­˜æ”¾ä½ç½®\nipython kernelspec list\næ·»åŠ kernel\n# é¦–å…ˆå®‰è£…ipykernelï¼š\nconda install ipykernel\n\n# åœ¨è™šæ‹Ÿç¯å¢ƒä¸‹åˆ›å»ºkernelæ–‡ä»¶ï¼š\nconda install -n ç¯å¢ƒåç§° ipykernel\n\n# æ¿€æ´»condaç¯å¢ƒï¼Œå°†ç¯å¢ƒå†™å…¥notebookçš„kernelä¸­\n\npython -m ipykernel install --user --name ç¯å¢ƒåç§° --display-name \"Python (ç¯å¢ƒåç§°)\"\n\n# æ‰“å¼€notebookæœåŠ¡å™¨ï¼šjupyter notebook\n\n# åˆ é™¤kernelç¯å¢ƒï¼š\n\njupyter kernelspec remove ç¯å¢ƒåç§°\n","slug":"P3-Anacondaä¸jupyter notebook","date":"2021-11-11T10:25:42.000Z","categories_index":"Python","tags_index":"","author_index":"YFR718"},{"id":"4a207b7e885fdbcca8129599135e5f2e","title":"MySQLåŸºç¡€","content":"1 MySQLæ¦‚è¿°1.1 æ•°æ®åº“æ¦‚è¿°æ•°æ®åº“çš„å¥½å¤„æŒä¹…åŒ–æ•°æ®åˆ°æœ¬åœ°å¯ä»¥å®ç°ç»“æ„åŒ–æŸ¥è¯¢ï¼Œæ–¹ä¾¿ç®¡ç†\næ•°æ®åº“ç›¸å…³æ¦‚å¿µDBï¼šæ•°æ®åº“ï¼Œä¿å­˜ä¸€ç»„æœ‰ç»„ç»‡çš„æ•°æ®çš„å®¹å™¨DBMSï¼šæ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œåˆç§°ä¸ºæ•°æ®åº“è½¯ä»¶ï¼ˆäº§å“ï¼‰ï¼Œç”¨äºç®¡ç†DBä¸­çš„æ•°æ®SQL:ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ï¼Œç”¨äºå’ŒDBMSé€šä¿¡çš„è¯­è¨€\næ•°æ®åº“å­˜å‚¨æ•°æ®çš„ç‰¹ç‚¹\nå°†æ•°æ®æ”¾åˆ°è¡¨ä¸­ï¼Œè¡¨å†æ”¾åˆ°åº“ä¸­\nä¸€ä¸ªæ•°æ®åº“ä¸­å¯ä»¥æœ‰å¤šä¸ªè¡¨ï¼Œæ¯ä¸ªè¡¨éƒ½æœ‰ä¸€ä¸ªçš„åå­—ï¼Œç”¨æ¥æ ‡è¯†è‡ªå·±ã€‚è¡¨åå…·æœ‰å”¯ä¸€æ€§ã€‚\nè¡¨å…·æœ‰ä¸€äº›ç‰¹æ€§ï¼Œè¿™äº›ç‰¹æ€§å®šä¹‰äº†æ•°æ®åœ¨è¡¨ä¸­å¦‚ä½•å­˜å‚¨ï¼Œç±»ä¼¼javaä¸­ â€œç±»â€çš„è®¾è®¡ã€‚\nè¡¨ç”±åˆ—ç»„æˆï¼Œæˆ‘ä»¬ä¹Ÿç§°ä¸ºå­—æ®µã€‚æ‰€æœ‰è¡¨éƒ½æ˜¯ç”±ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—ç»„æˆçš„ï¼Œæ¯ä¸€åˆ—ç±»ä¼¼java ä¸­çš„â€å±æ€§â€\nè¡¨ä¸­çš„æ•°æ®æ˜¯æŒ‰è¡Œå­˜å‚¨çš„ï¼Œæ¯ä¸€è¡Œç±»ä¼¼äºjavaä¸­çš„â€œå¯¹è±¡â€ã€‚\n\n1.2 MySQLçš„èƒŒæ™¯å‰èº«å±äºç‘å…¸çš„ä¸€å®¶å…¬å¸ï¼ŒMySQL AB\n08å¹´è¢«sunå…¬å¸æ”¶è´­\n09å¹´sunè¢«oracleæ”¶è´­\nMySQLä¼˜ç‚¹\n1ã€å¼€æºã€å…è´¹ã€æˆæœ¬ä½\n2ã€æ€§èƒ½é«˜ã€ç§»æ¤æ€§ä¹Ÿå¥½\n3ã€ä½“ç§¯å°ï¼Œä¾¿äºå®‰è£…\n1.3 MySQLäº§å“çš„ä»‹ç»å’Œå®‰è£…MySQLæœåŠ¡çš„å¯åŠ¨å’Œåœæ­¢æ–¹å¼ä¸€ï¼šè®¡ç®—æœºâ€”â€”å³å‡»ç®¡ç†â€”â€”æœåŠ¡æ–¹å¼äºŒï¼šé€šè¿‡ç®¡ç†å‘˜èº«ä»½è¿è¡Œ\nnet start æœåŠ¡åï¼ˆå¯åŠ¨æœåŠ¡ï¼‰\nnet stop æœåŠ¡åï¼ˆåœæ­¢æœåŠ¡ï¼‰\nMySQLæœåŠ¡çš„ç™»å½•å’Œé€€å‡º  æ–¹å¼ä¸€ï¼šé€šè¿‡mysqlè‡ªå¸¦çš„å®¢æˆ·ç«¯ï¼ˆåªé™äºrootç”¨æˆ·ï¼‰\n  æ–¹å¼äºŒï¼šé€šè¿‡windowsè‡ªå¸¦çš„å®¢æˆ·ç«¯\n#ç™»å½•ï¼š\nmysql ã€-hä¸»æœºå -Pç«¯å£å· ã€‘-uç”¨æˆ·å -på¯†ç \n#é€€å‡ºï¼š\nexitæˆ–ctrl+C\n1.4SQLè¯­è¨€çš„è§„åˆ™ä¸è§„èŒƒåŸºæœ¬è§„åˆ™\nSQL å¯ä»¥å†™åœ¨ä¸€è¡Œæˆ–è€…å¤šè¡Œã€‚ä¸ºäº†æé«˜å¯è¯»æ€§ï¼Œå„å­å¥åˆ†è¡Œå†™ï¼Œå¿…è¦æ—¶ä½¿ç”¨ç¼©è¿›\næ¯æ¡å‘½ä»¤ä»¥ ; æˆ– \\g æˆ– \\G ç»“æŸ\nå…³é”®å­—ä¸èƒ½è¢«ç¼©å†™ä¹Ÿä¸èƒ½åˆ†è¡Œ\nå…³äºæ ‡ç‚¹ç¬¦å·\nå¿…é¡»ä¿è¯æ‰€æœ‰çš„()ã€å•å¼•å·ã€åŒå¼•å·æ˜¯æˆå¯¹ç»“æŸçš„\nå¿…é¡»ä½¿ç”¨è‹±æ–‡çŠ¶æ€ä¸‹çš„åŠè§’è¾“å…¥æ–¹å¼\nå­—ç¬¦ä¸²å‹å’Œæ—¥æœŸæ—¶é—´ç±»å‹çš„æ•°æ®å¯ä»¥ä½¿ç”¨å•å¼•å·ï¼ˆâ€™ â€˜ï¼‰è¡¨ç¤º\nåˆ—çš„åˆ«åï¼Œå°½é‡ä½¿ç”¨åŒå¼•å·ï¼ˆâ€ â€œï¼‰ï¼Œè€Œä¸”ä¸å»ºè®®çœç•¥as\n\n\n\nSQLå¤§å°å†™è§„èŒƒ ï¼ˆå»ºè®®éµå®ˆï¼‰\nMySQL åœ¨ Windows ç¯å¢ƒä¸‹æ˜¯å¤§å°å†™ä¸æ•æ„Ÿçš„\nMySQL åœ¨ Linux ç¯å¢ƒä¸‹æ˜¯å¤§å°å†™æ•æ„Ÿçš„\næ•°æ®åº“åã€è¡¨åã€è¡¨çš„åˆ«åã€å˜é‡åæ˜¯ä¸¥æ ¼åŒºåˆ†å¤§å°å†™çš„\nå…³é”®å­—ã€å‡½æ•°åã€åˆ—å(æˆ–å­—æ®µå)ã€åˆ—çš„åˆ«å(å­—æ®µçš„åˆ«å) æ˜¯å¿½ç•¥å¤§å°å†™çš„ã€‚\n\n\næ¨èé‡‡ç”¨ç»Ÿä¸€çš„ä¹¦å†™è§„èŒƒï¼š\næ•°æ®åº“åã€è¡¨åã€è¡¨åˆ«åã€å­—æ®µåã€å­—æ®µåˆ«åç­‰éƒ½å°å†™\nSQL å…³é”®å­—ã€å‡½æ•°åã€ç»‘å®šå˜é‡ç­‰éƒ½å¤§å†™\n\n\n\næ³¨ é‡Šå¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ ¼å¼çš„æ³¨é‡Šç»“æ„\nå•è¡Œæ³¨é‡Šï¼š#æ³¨é‡Šæ–‡å­—(MySQLç‰¹æœ‰çš„æ–¹å¼)\nå•è¡Œæ³¨é‡Šï¼š-- æ³¨é‡Šæ–‡å­—(--åé¢å¿…é¡»åŒ…å«ä¸€ä¸ªç©ºæ ¼ã€‚)\nå¤šè¡Œæ³¨é‡Šï¼š/* æ³¨é‡Šæ–‡å­—  */\nå‘½åè§„åˆ™ï¼ˆæš‚æ—¶äº†è§£ï¼‰\næ•°æ®åº“ã€è¡¨åä¸å¾—è¶…è¿‡30ä¸ªå­—ç¬¦ï¼Œå˜é‡åé™åˆ¶ä¸º29ä¸ª\nå¿…é¡»åªèƒ½åŒ…å« Aâ€“Z, aâ€“z, 0â€“9, _å…±63ä¸ªå­—ç¬¦\næ•°æ®åº“åã€è¡¨åã€å­—æ®µåç­‰å¯¹è±¡åä¸­é—´ä¸è¦åŒ…å«ç©ºæ ¼\nåŒä¸€ä¸ªMySQLè½¯ä»¶ä¸­ï¼Œæ•°æ®åº“ä¸èƒ½åŒåï¼›åŒä¸€ä¸ªåº“ä¸­ï¼Œè¡¨ä¸èƒ½é‡åï¼›åŒä¸€ä¸ªè¡¨ä¸­ï¼Œå­—æ®µä¸èƒ½é‡å\nå¿…é¡»ä¿è¯ä½ çš„å­—æ®µæ²¡æœ‰å’Œä¿ç•™å­—ã€æ•°æ®åº“ç³»ç»Ÿæˆ–å¸¸ç”¨æ–¹æ³•å†²çªã€‚å¦‚æœåšæŒä½¿ç”¨ï¼Œè¯·åœ¨SQLè¯­å¥ä¸­ä½¿ç”¨`ï¼ˆç€é‡å·ï¼‰å¼•èµ·æ¥\nä¿æŒå­—æ®µåå’Œç±»å‹çš„ä¸€è‡´æ€§ï¼Œåœ¨å‘½åå­—æ®µå¹¶ä¸ºå…¶æŒ‡å®šæ•°æ®ç±»å‹çš„æ—¶å€™ä¸€å®šè¦ä¿è¯ä¸€è‡´æ€§ã€‚å‡å¦‚æ•°æ®ç±»å‹åœ¨ä¸€ä¸ªè¡¨é‡Œæ˜¯æ•´æ•°ï¼Œé‚£åœ¨å¦ä¸€ä¸ªè¡¨é‡Œå¯å°±åˆ«å˜æˆå­—ç¬¦å‹äº†\n\nä¸¾ä¾‹ï¼š\n#ä»¥ä¸‹ä¸¤å¥æ˜¯ä¸€æ ·çš„ï¼Œä¸åŒºåˆ†å¤§å°å†™\nshow databases;\nSHOW DATABASES;\n\n#åˆ›å»ºè¡¨æ ¼\n#create table student info(...); #è¡¨åé”™è¯¯ï¼Œå› ä¸ºè¡¨åæœ‰ç©ºæ ¼\ncreate table student_info(...); \n\n#å…¶ä¸­orderä½¿ç”¨``é£˜å·ï¼Œå› ä¸ºorderå’Œç³»ç»Ÿå…³é”®å­—æˆ–ç³»ç»Ÿå‡½æ•°åç­‰é¢„å®šä¹‰æ ‡è¯†ç¬¦é‡åäº†\nCREATE TABLE `order`(\n    id INT,\n    lname VARCHAR(20)\n);\n\nselect id as \"ç¼–å·\", `name` as \"å§“å\" from t_stu; #èµ·åˆ«åæ—¶ï¼Œaséƒ½å¯ä»¥çœç•¥\nselect id as ç¼–å·, `name` as å§“å from t_stu; #å¦‚æœå­—æ®µåˆ«åä¸­æ²¡æœ‰ç©ºæ ¼ï¼Œé‚£ä¹ˆå¯ä»¥çœç•¥\"\"\nselect id as ç¼– å·, `name` as å§“ å from t_stu; #é”™è¯¯ï¼Œå¦‚æœå­—æ®µåˆ«åä¸­æœ‰ç©ºæ ¼ï¼Œé‚£ä¹ˆä¸èƒ½çœç•¥\"\"\n2. åŸºæœ¬æ“ä½œå­˜å‚¨è¿‡ç¨‹ï¼šåˆ›å»ºæ•°æ®åº“=&gt;ç¡®è®¤å­—æ®µ=&gt;åˆ›å»ºæ•°æ®è¡¨=&gt;æ’å…¥æ•°æ®\nåˆ›å»ºæ•°æ®åº“# å±•ç¤ºæ•°æ®åº“\nmysql&gt; SHOW DATABASES;\n+--------------------+\n| Database           |\n+--------------------+\n| information_schema |\n| mysql              |\n| performance_schema |\n| sakila             |\n| sys                |\n| world              |\n+--------------------+\n# æ‰“å¼€æŒ‡å®šçš„åº“\nmysql&gt; use åº“å\n# åˆ›å»ºæ•°æ®åº“\nmysql&gt; CREATE DATABASE demo;\n# åˆ é™¤æ•°æ®åº“\nmysql&gt; DROP DATABASE demo;\n# æŸ¥çœ‹æœåŠ¡å™¨çš„ç‰ˆæœ¬\n#æ–¹å¼ä¸€ï¼šç™»å½•åˆ°mysqlæœåŠ¡ç«¯\nmysql&gt; select version();\n#æ–¹å¼äºŒï¼šæ²¡æœ‰ç™»å½•åˆ°mysqlæœåŠ¡ç«¯\nmysql --version\næˆ–\nmysql --V\nâ—â€information_schemaâ€æ˜¯MySQLç³»ç»Ÿè‡ªå¸¦çš„æ•°æ®åº“,ä¸»è¦ä¿å­˜MySQLæ•°æ®åº“æœåŠ¡å™¨çš„ç³»ç»Ÿä¿¡æ¯ï¼Œæ¯”å¦‚æ•°æ®åº“çš„åç§°ã€æ•°æ®è¡¨çš„åç§°ã€å­—æ®µåç§°ã€å­˜å–æƒé™ã€æ•°æ®æ–‡ä»¶æ‰€åœ¨çš„æ–‡ä»¶å¤¹å’Œç³»ç»Ÿä½¿ç”¨çš„æ–‡ä»¶å¤¹ï¼Œç­‰ç­‰ã€‚â—â€performance_ schemaâ€æ˜¯MySQLç³»ç»Ÿè‡ªå¸¦çš„æ•°æ®åº“ï¼Œå¯ä»¥ç”¨æ¥ç›‘æ§MySQLçš„å„ç±»æ€§èƒ½æŒ‡æ ‡ã€‚â—â€œsysâ€ æ•°æ®åº“æ˜¯MySQLç³»ç»Ÿè‡ªå¸¦çš„æ•°æ®åº“ï¼Œä¸»è¦ä½œç”¨æ˜¯ï¼Œä»¥ä¸€ç§æ›´å®¹æ˜“è¢«ç†è§£çš„æ–¹å¼å±•ç¤ºMySQLæ•°æ®åº“æœåŠ¡å™¨çš„å„ç±»æ€§èƒ½æŒ‡æ ‡ï¼Œå¸®åŠ©ç³»ç»Ÿç®¡ç†å‘˜å’Œå¼€å‘äººå‘˜ç›‘æ§MySQLçš„æŠ€æœ¯æ€§èƒ½ã€‚â—â€mysqlâ€æ•°æ®åº“ä¿å­˜äº†MySQLæ•°æ®åº“æœåŠ¡å™¨è¿è¡Œæ—¶éœ€è¦çš„ç³»ç»Ÿä¿¡æ¯ï¼Œæ¯”å¦‚æ•°æ®æ–‡ä»¶å¤¹ã€å½“å‰ä½¿ç”¨çš„å­—ç¬¦é›†ã€çº¦æŸæ£€æŸ¥ä¿¡æ¯ï¼Œç­‰ç­‰ã€‚\nç¡®è®¤å­—æ®µMySQLæ•°æ®è¡¨ç”±è¡Œä¸åˆ—ç»„æˆï¼Œä¸€è¡Œå°±æ˜¯ä¸€æ¡æ•°æ®è®°å½•ï¼Œ æ¯ä¸€æ¡æ•°æ®è®°å½•éƒ½è¢«åˆ†æˆè®¸å¤šåˆ—ï¼Œä¸€åˆ—å°±å«ä¸€ä¸ªå­—æ®µã€‚æ¯ä¸ªå­—æ®µéƒ½éœ€è¦å®šä¹‰æ•°æ®ç±»å‹ï¼Œè¿™ä¸ªæ•°æ®ç±»å‹å«åšå­—æ®µç±»å‹ã€‚\nåˆ›å»ºæ•°æ®è¡¨#å±•ç¤ºæ•°æ®è¡¨\nmysql&gt; SHOW TABLES;\n+----------------+\n| Tables_in_demo |\n+----------------+\n| test           |\n+----------------+\n# æŸ¥çœ‹å…¶å®ƒåº“çš„æ‰€æœ‰è¡¨\nmysql&gt; show tables from åº“å;\n#åˆ›å»ºæ•°æ®è¡¨\nmysql&gt; CREATE TABLE demo.test(barcode text,goodname text,price int);\n# æŸ¥çœ‹è¡¨ç»“æ„\nmysql&gt; desc è¡¨å;\nmysql&gt; show columns from actor;\nmysql&gt; DESCRIBE demo.test;\n+----------+---------+------+-----+---------+-------+\n| Field    | Type    | Null | Key | Default | Extra |\n+----------+---------+------+-----+---------+-------+\n| barcode  | text    | YES  |     | NULL    |       |\n| goodname | text    | YES  |     | NULL    |       |\n| price    | int(11) | YES  |     | NULL    |       |\n+----------+---------+------+-----+---------+-------+\nâ—Field: è¡¨ç¤ºå­—æ®µåç§°ã€‚â—Type: è¡¨ç¤ºå­—æ®µç±»å‹ã€‚â—Null: è¡¨ç¤ºè¿™ä¸ªå­—æ®µæ˜¯å¦å…è®¸æ˜¯ç©ºå€¼(NULL) ã€‚åœ¨MySQLé‡Œé¢,ç©ºå€¼ä¸ç­‰äºç©ºå­—ç¬¦ä¸²ã€‚ä¸€ä¸ªç©ºå­—ç¬¦ä¸²çš„é•¿åº¦æ˜¯0,è€Œä¸€ä¸ªç©ºå€¼çš„é•¿åº¦æ˜¯ç©ºã€‚è€Œä¸”ï¼Œåœ¨MySQLé‡Œé¢ï¼Œç©ºå€¼æ˜¯å ç”¨ç©ºé—´çš„ã€‚â—Key:æˆ‘ä»¬æš‚æ—¶æŠŠå®ƒå«åšé”®ã€‚â—Default: è¡¨ç¤ºé»˜è®¤å€¼ã€‚æˆ‘ä»¬å¯¼å…¥çš„è¡¨çš„æ‰€æœ‰çš„å­—æ®µéƒ½å…è®¸æ˜¯ç©ºï¼Œé»˜è®¤å€¼éƒ½æ˜¯NULLã€‚â—Extra:è¡¨ç¤ºé™„åŠ ä¿¡æ¯ã€‚\n#å…¶ä»–showè¯­å¥\nâ‘ SHOW STATUSï¼Œç”¨äºæ˜¾ç¤ºå¹¿æ³›çš„æœåŠ¡å™¨çŠ¶æ€ä¿¡æ¯ï¼›\nâ‘ SHOW CREATE DATABASEå’ŒSHOW CREATE TABLEï¼Œåˆ†åˆ«ç”¨æ¥æ˜¾ç¤ºåˆ›å»ºç‰¹å®šæ•°æ®åº“æˆ–è¡¨çš„MySQLè¯­å¥ï¼›\nâ‘ SHOW GRANTSï¼Œç”¨æ¥æ˜¾ç¤ºæˆäºˆç”¨æˆ·ï¼ˆæ‰€æœ‰ç”¨æˆ·æˆ–ç‰¹å®šç”¨æˆ·ï¼‰çš„å®‰å…¨æƒé™ï¼›\nâ‘ SHOW ERRORS å’Œ SHOW WARNINGSï¼Œç”¨æ¥æ˜¾ç¤ºæœåŠ¡å™¨é”™è¯¯æˆ–è­¦å‘Šæ¶ˆæ¯ã€‚\næ’å…¥æ•°æ®#æ·»åŠ ä¸»é”®\nALTER TABLE demo. test\nADD COLUMN itemnumber int PRIMARY KEY AUTO_INCREMENT ;\n#å‘è¡¨ä¸­æ·»åŠ æ•°æ®\nINSERT INTO demo.test\n(barcode, goodsname,price)\nVALUES ('0001','æœ¬' ,3);\n\nSQLçš„è¯­è¨€åˆ†ç±»SQLè¯­è¨€åœ¨åŠŸèƒ½ä¸Šä¸»è¦åˆ†ä¸ºå¦‚ä¸‹3å¤§ç±»ï¼š\n\nDDLï¼ˆData Definition Languagesã€æ•°æ®å®šä¹‰è¯­è¨€ï¼‰ï¼Œè¿™äº›è¯­å¥å®šä¹‰äº†ä¸åŒçš„æ•°æ®åº“ã€è¡¨ã€è§†å›¾ã€ç´¢å¼•ç­‰æ•°æ®åº“å¯¹è±¡ï¼Œè¿˜å¯ä»¥ç”¨æ¥åˆ›å»ºã€åˆ é™¤ã€ä¿®æ”¹æ•°æ®åº“å’Œæ•°æ®è¡¨çš„ç»“æ„ã€‚\n\nä¸»è¦çš„è¯­å¥å…³é”®å­—åŒ…æ‹¬CREATEã€DROPã€ALTERç­‰ã€‚\n\n\nDMLï¼ˆData Manipulation Languageã€æ•°æ®æ“ä½œè¯­è¨€ï¼‰ï¼Œç”¨äºæ·»åŠ ã€åˆ é™¤ã€æ›´æ–°å’ŒæŸ¥è¯¢æ•°æ®åº“è®°å½•ï¼Œå¹¶æ£€æŸ¥æ•°æ®å®Œæ•´æ€§ã€‚\n\nä¸»è¦çš„è¯­å¥å…³é”®å­—åŒ…æ‹¬INSERTã€DELETEã€UPDATEã€SELECTç­‰ã€‚\nSELECTæ˜¯SQLè¯­è¨€çš„åŸºç¡€ï¼Œæœ€ä¸ºé‡è¦ã€‚\n\n\nDCLï¼ˆData Control Languageã€æ•°æ®æ§åˆ¶è¯­è¨€ï¼‰ï¼Œç”¨äºå®šä¹‰æ•°æ®åº“ã€è¡¨ã€å­—æ®µã€ç”¨æˆ·çš„è®¿é—®æƒé™å’Œå®‰å…¨çº§åˆ«ã€‚\n\nä¸»è¦çš„è¯­å¥å…³é”®å­—åŒ…æ‹¬GRANTã€REVOKEã€COMMITã€ROLLBACKã€SAVEPOINTç­‰ã€‚\n\n\n\n\n\n\n\n\n\n\n\n\nå› ä¸ºæŸ¥è¯¢è¯­å¥ä½¿ç”¨çš„éå¸¸çš„é¢‘ç¹ï¼Œæ‰€ä»¥å¾ˆå¤šäººæŠŠæŸ¥è¯¢è¯­å¥å•æ‹å‡ºæ¥ä¸€ç±»ï¼šDQLï¼ˆæ•°æ®æŸ¥è¯¢è¯­è¨€ï¼‰ã€‚\nè¿˜æœ‰å•ç‹¬å°†COMMITã€ROLLBACK å–å‡ºæ¥ç§°ä¸ºTCL ï¼ˆTransaction Control Languageï¼Œäº‹åŠ¡æ§åˆ¶è¯­è¨€ï¼‰ã€‚\n3. DQLè¯­è¨€æ•°æ®æŸ¥è¯¢è¯­è¨€ï¼šselect \n/*\nç±»ä¼¼äºJavaä¸­ :System.out.println(è¦æ‰“å°çš„ä¸œè¥¿);\nç‰¹ç‚¹ï¼š\nâ‘ é€šè¿‡selectæŸ¥è¯¢å®Œçš„ç»“æœ ï¼Œæ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„è¡¨æ ¼ï¼Œä¸æ˜¯çœŸå®å­˜åœ¨\nâ‘¡ è¦æŸ¥è¯¢çš„ä¸œè¥¿ å¯ä»¥æ˜¯å¸¸é‡å€¼ã€å¯ä»¥æ˜¯è¡¨è¾¾å¼ã€å¯ä»¥æ˜¯å­—æ®µã€å¯ä»¥æ˜¯å‡½æ•°*/\n\n#æ£€ç´¢å•ä¸ªåˆ—\nmysql&gt; SELECT åˆ—å FROM è¡¨å;\n#æ£€ç´¢å¤šä¸ªåˆ—\nmysql&gt; SELECT åˆ—å,åˆ—å... FROM è¡¨å;\n#æ£€ç´¢æ‰€æœ‰åˆ—\nmysql&gt; SELECT * FROM è¡¨å;\n#ä½¿ç”¨å®Œå…¨é™å®šçš„åå­—\nmysql&gt; SELECT è¡¨å.åˆ—å FROM æ•°æ®åº“.è¡¨å;\n#æ‹¼æ¥è®¡ç®—å­—æ®µ\nmysql&gt; SELECT CONCAT(åˆ—åï¼Œåˆ—å) FROM è¡¨å;\n#è®¡ç®—å­—æ®µè¿ç®—\nmysql&gt; SELECT åˆ—å*5 FROM è¡¨å;\n\n\n\n\nå­å¥\nåŠŸèƒ½\nç¤ºä¾‹\n\n\n\n\nDISTINCT\nå»é‡\nSELECT DISTINCT åˆ—å FROM è¡¨å;\n\n\nLIMIT\né™åˆ¶è¡Œæ•°\nSELECT åˆ—å FROM è¡¨å LIMIT 10;SELECT åˆ—å FROM è¡¨å LIMIT 10,3; #ä»è¡Œ10å¼€å§‹å–3è¡Œ\n\n\nORDER BY\næ’åº\nSELECT åˆ—å FROM è¡¨å ORDER BY åˆ—å LIMIT 10;   //å…ˆæ’åºå†å–10SELECT åˆ—å FROM è¡¨å ORDER BY åˆ—å,åˆ—å..;     //æŒ‰å¤šä¸ªåˆ—æ’åº\n\n\nDESC\né™åºæ’\nSELECT åˆ—å FROM è¡¨å ORDER BY åˆ—å DESC;\n\n\nASC\nå‡åºæ’\nä¸ä¸åŠ ç›¸åŒ\n\n\nWHERE\næ•°æ®è¿‡æ»¤\nSELECT åˆ—å FROM è¡¨å WHERE æ¡ä»¶;\n\n\nGROUP BY\nåˆ†ç»„æ•°æ®\nSELECT åˆ—å FROM è¡¨å GROUP BY åˆ—å;\n\n\nHAVING\nè¿‡æ»¤åŸºäºåˆ†ç»„å€¼\nSELECT åˆ—å FROM è¡¨å GROUP BY åˆ—å HAVING COUNT(*)&gt;=2;;\n\n\nUNION (ALL)\nç»„åˆæŸ¥è¯¢\næ‰§è¡Œå¤šæ¡SELECTè¯­å¥ï¼Œå¹¶å°†ç»“æœä½œä¸ºå•ä¸ªæŸ¥è¯¢ç»“æœé›†è¿”å›\n\n\n\n\nSELECTå­å¥é¡ºåº\n\n\n\nå­å¥\nè¯´æ˜\næ˜¯å¦å¿…é¡»ä½¿ç”¨\n\n\n\n\nSELECT\nè¦è¿”å›çš„åˆ—\næ˜¯\n\n\nFROM\nè¦æ£€ç´¢çš„è¡¨\nä»…åœ¨è¡¨ä¸­é€‰æ‹©æ•°æ®\n\n\nWHERE\nè¡Œè¿‡æ»¤\nå¦\n\n\nGROUP BY\nåˆ†ç»„è¯´æ˜\nä»…åœ¨æŒ‰ç»„è®¡ç®—èšé›†æ—¶\n\n\nHAVING\nç»„è¿‡æ»¤\nå¦\n\n\nORDER BY\næ’åº\nå¦\n\n\nLIMIT\nè¦æ£€ç´¢çš„è¡Œæ•°\nå¦\n\n\n\n\nSELECT è¯­å¥çš„æ‰§è¡Œé¡ºåº**ï¼ˆåœ¨ MySQL å’Œ Oracle ä¸­ï¼ŒSELECT æ‰§è¡Œé¡ºåºåŸºæœ¬ç›¸åŒï¼‰ï¼š\nFROM -&gt; WHERE -&gt; GROUP BY -&gt; HAVING -&gt; SELECT çš„å­—æ®µ -&gt; DISTINCT -&gt; ORDER BY -&gt; LIMIT\næ¯”å¦‚ä½ å†™äº†ä¸€ä¸ª SQL è¯­å¥ï¼Œé‚£ä¹ˆå®ƒçš„å…³é”®å­—é¡ºåºå’Œæ‰§è¡Œé¡ºåºæ˜¯ä¸‹é¢è¿™æ ·çš„ï¼š\nSELECT DISTINCT player_id, player_name, count(*) as num # é¡ºåº 5\nFROM player JOIN team ON player.team_id = team.team_id # é¡ºåº 1\nWHERE height &gt; 1.80 # é¡ºåº 2\nGROUP BY player.team_id # é¡ºåº 3\nHAVING num &gt; 2 # é¡ºåº 4\nORDER BY num DESC # é¡ºåº 6\nLIMIT 2 # é¡ºåº 7\nåœ¨ SELECT è¯­å¥æ‰§è¡Œè¿™äº›æ­¥éª¤çš„æ—¶å€™ï¼Œæ¯ä¸ªæ­¥éª¤éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªè™šæ‹Ÿè¡¨ï¼Œç„¶åå°†è¿™ä¸ªè™šæ‹Ÿè¡¨ä¼ å…¥ä¸‹ä¸€ä¸ªæ­¥éª¤ä¸­ä½œä¸ºè¾“å…¥ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™äº›æ­¥éª¤éšå«åœ¨ SQL çš„æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå¯¹äºæˆ‘ä»¬æ¥è¯´æ˜¯ä¸å¯è§çš„ã€‚\nSQL çš„æ‰§è¡ŒåŸç†SELECT æ˜¯å…ˆæ‰§è¡Œ FROM è¿™ä¸€æ­¥çš„ã€‚åœ¨è¿™ä¸ªé˜¶æ®µï¼Œå¦‚æœæ˜¯å¤šå¼ è¡¨è”æŸ¥ï¼Œè¿˜ä¼šç»å†ä¸‹é¢çš„å‡ ä¸ªæ­¥éª¤ï¼š\n\né¦–å…ˆå…ˆé€šè¿‡ CROSS JOIN æ±‚ç¬›å¡å°”ç§¯ï¼Œç›¸å½“äºå¾—åˆ°è™šæ‹Ÿè¡¨ vtï¼ˆvirtual tableï¼‰1-1ï¼›\né€šè¿‡ ON è¿›è¡Œç­›é€‰ï¼Œåœ¨è™šæ‹Ÿè¡¨ vt1-1 çš„åŸºç¡€ä¸Šè¿›è¡Œç­›é€‰ï¼Œå¾—åˆ°è™šæ‹Ÿè¡¨ vt1-2ï¼›\næ·»åŠ å¤–éƒ¨è¡Œã€‚å¦‚æœæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯å·¦è¿æ¥ã€å³é“¾æ¥æˆ–è€…å…¨è¿æ¥ï¼Œå°±ä¼šæ¶‰åŠåˆ°å¤–éƒ¨è¡Œï¼Œä¹Ÿå°±æ˜¯åœ¨è™šæ‹Ÿè¡¨ vt1-2 çš„åŸºç¡€ä¸Šå¢åŠ å¤–éƒ¨è¡Œï¼Œå¾—åˆ°è™šæ‹Ÿè¡¨ vt1-3ã€‚\n\nå½“ç„¶å¦‚æœæˆ‘ä»¬æ“ä½œçš„æ˜¯ä¸¤å¼ ä»¥ä¸Šçš„è¡¨ï¼Œè¿˜ä¼šé‡å¤ä¸Šé¢çš„æ­¥éª¤ï¼Œç›´åˆ°æ‰€æœ‰è¡¨éƒ½è¢«å¤„ç†å®Œä¸ºæ­¢ã€‚è¿™ä¸ªè¿‡ç¨‹å¾—åˆ°æ˜¯æˆ‘ä»¬çš„åŸå§‹æ•°æ®ã€‚\nå½“æˆ‘ä»¬æ‹¿åˆ°äº†æŸ¥è¯¢æ•°æ®è¡¨çš„åŸå§‹æ•°æ®ï¼Œä¹Ÿå°±æ˜¯æœ€ç»ˆçš„è™šæ‹Ÿè¡¨ vt1ï¼Œå°±å¯ä»¥åœ¨æ­¤åŸºç¡€ä¸Šå†è¿›è¡Œ WHERE é˜¶æ®µã€‚åœ¨è¿™ä¸ªé˜¶æ®µä¸­ï¼Œä¼šæ ¹æ® vt1 è¡¨çš„ç»“æœè¿›è¡Œç­›é€‰è¿‡æ»¤ï¼Œå¾—åˆ°è™šæ‹Ÿè¡¨ vt2ã€‚\nç„¶åè¿›å…¥ç¬¬ä¸‰æ­¥å’Œç¬¬å››æ­¥ï¼Œä¹Ÿå°±æ˜¯ GROUP å’Œ HAVING é˜¶æ®µã€‚åœ¨è¿™ä¸ªé˜¶æ®µä¸­ï¼Œå®é™…ä¸Šæ˜¯åœ¨è™šæ‹Ÿè¡¨ vt2 çš„åŸºç¡€ä¸Šè¿›è¡Œåˆ†ç»„å’Œåˆ†ç»„è¿‡æ»¤ï¼Œå¾—åˆ°ä¸­é—´çš„è™šæ‹Ÿè¡¨ vt3 å’Œ vt4ã€‚\nå½“æˆ‘ä»¬å®Œæˆäº†æ¡ä»¶ç­›é€‰éƒ¨åˆ†ä¹‹åï¼Œå°±å¯ä»¥ç­›é€‰è¡¨ä¸­æå–çš„å­—æ®µï¼Œä¹Ÿå°±æ˜¯è¿›å…¥åˆ° SELECT å’Œ DISTINCT é˜¶æ®µã€‚\né¦–å…ˆåœ¨ SELECT é˜¶æ®µä¼šæå–æƒ³è¦çš„å­—æ®µï¼Œç„¶ååœ¨ DISTINCT é˜¶æ®µè¿‡æ»¤æ‰é‡å¤çš„è¡Œï¼Œåˆ†åˆ«å¾—åˆ°ä¸­é—´çš„è™šæ‹Ÿè¡¨ vt5-1 å’Œ vt5-2ã€‚\nå½“æˆ‘ä»¬æå–äº†æƒ³è¦çš„å­—æ®µæ•°æ®ä¹‹åï¼Œå°±å¯ä»¥æŒ‰ç…§æŒ‡å®šçš„å­—æ®µè¿›è¡Œæ’åºï¼Œä¹Ÿå°±æ˜¯ ORDER BY é˜¶æ®µï¼Œå¾—åˆ°è™šæ‹Ÿè¡¨ vt6ã€‚\næœ€ååœ¨ vt6 çš„åŸºç¡€ä¸Šï¼Œå–å‡ºæŒ‡å®šè¡Œçš„è®°å½•ï¼Œä¹Ÿå°±æ˜¯ LIMIT é˜¶æ®µï¼Œå¾—åˆ°æœ€ç»ˆçš„ç»“æœï¼Œå¯¹åº”çš„æ˜¯è™šæ‹Ÿè¡¨ vt7ã€‚\nå½“ç„¶æˆ‘ä»¬åœ¨å†™ SELECT è¯­å¥çš„æ—¶å€™ï¼Œä¸ä¸€å®šå­˜åœ¨æ‰€æœ‰çš„å…³é”®å­—ï¼Œç›¸åº”çš„é˜¶æ®µå°±ä¼šçœç•¥ã€‚\nåŒæ—¶å› ä¸º SQL æ˜¯ä¸€é—¨ç±»ä¼¼è‹±è¯­çš„ç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å†™ SELECT è¯­å¥çš„æ—¶å€™ï¼Œè¿˜è¦æ³¨æ„ç›¸åº”çš„å…³é”®å­—é¡ºåºï¼Œæ‰€è°“åº•å±‚è¿è¡Œçš„åŸç†ï¼Œå°±æ˜¯æˆ‘ä»¬åˆšæ‰è®²åˆ°çš„æ‰§è¡Œé¡ºåºã€‚\nWHEREå­å¥æ“ä½œç¬¦\n\n\n\næ“ä½œç¬¦\nè¯´æ˜\n\n\n\n\n=\nç­‰äº\n\n\n&lt;&gt;æˆ–!=\nä¸ç­‰äº\n\n\n&lt;,&lt;=,&gt;,&gt;=\nå°äºå¤§äº\n\n\nNOTã€ï¼\nä¸\n\n\nANDã€&amp;&amp;\næˆ–\n\n\nORã€\\\n\\\n\né\n\n\nXOR\nå¼‚æˆ–\n\n\n&amp;ã€\\\nã€^ã€~ã€&gt;&gt;ã€&lt;&lt;\nä½è¿ç®—\n\n\n\n\nä¼˜å…ˆçº§ï¼šAND&gt;OR\nå®‰å…¨ç­‰äºè¿ç®—ç¬¦ï¼ˆ&lt;=&gt;ï¼‰ä¸ç­‰äºè¿ç®—ç¬¦ï¼ˆ=ï¼‰çš„ä½œç”¨æ˜¯ç›¸ä¼¼çš„ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯â€˜&lt;=&gt;â€™å¯ä»¥ç”¨æ¥å¯¹NULLè¿›è¡Œåˆ¤æ–­ã€‚åœ¨ä¸¤ä¸ªæ“ä½œæ•°å‡ä¸ºNULLæ—¶ï¼Œå…¶è¿”å›å€¼ä¸º1ï¼Œè€Œä¸ä¸ºNULLï¼›å½“ä¸€ä¸ªæ“ä½œæ•°ä¸ºNULLæ—¶ï¼Œå…¶è¿”å›å€¼ä¸º0ï¼Œè€Œä¸ä¸ºNULLã€‚\nmysql&gt; SELECT 1 &lt;=&gt; '1', 1 &lt;=&gt; 0, 'a' &lt;=&gt; 'a', (5 + 3) &lt;=&gt; (2 + 6), '' &lt;=&gt; NULL,NULL &lt;=&gt; NULL FROM dual;\n+-----------+---------+-------------+---------------------+-------------+---------------+\n| 1 &lt;=&gt; '1' | 1 &lt;=&gt; 0 | 'a' &lt;=&gt; 'a' | (5 + 3) &lt;=&gt; (2 + 6) | '' &lt;=&gt; NULL | NULL &lt;=&gt; NULL |\n+-----------+---------+-------------+---------------------+-------------+---------------+\n|         1 |       0 |           1 |                   1 |           0 |             1 |\n+-----------+---------+-------------+---------------------+-------------+---------------+\n1 row in set (0.00 sec)\n#æŸ¥è¯¢commission_pctç­‰äº0.40\nSELECT employee_id,commission_pct FROM employees WHERE commission_pct = 0.40;\n\nSELECT employee_id,commission_pct FROM employees WHERE commission_pct &lt;=&gt; 0.40;\n\n#å¦‚æœæŠŠ0.40æ”¹æˆ NULL å‘¢ï¼Ÿ\n\n\n\n\néç¬¦å·ç±»å‹çš„è¿ç®—ç¬¦\nåç§°\nä½œç”¨\n\n\n\n\nIS NULL\nä¸ºç©ºè¿ç®—ç¬¦\nåˆ¤æ–­å€¼ã€å­—ç¬¦ä¸²æˆ–è¡¨è¾¾å¼æ˜¯å¦ä¸ºç©º\n\n\nIS NOTNULL\nä¸ä¸ºç©ºè¿ç®—ç¬¦\nåˆ¤æ–­å€¼ã€å­—ç¬¦ä¸²æˆ–è¡¨è¾¾å¼æ˜¯å¦ä¸ä¸ºç©º\n\n\nLEAST\næœ€å°å€¼è¿ç®—ç¬¦\nåœ¨å¤šä¸ªå€¼ä¸­è¿”å›æœ€å°å€¼\n\n\nGREATEST\næœ€å¤§å€¼è¿ç®—ç¬¦\nåœ¨å¤šä¸ªå€¼ä¸­è¿”å›æœ€å¤§å€¼\n\n\nBETWEEN AND\nä¸¤å€¼ä¹‹é—´çš„è¿ç®—ç¬¦\nåˆ¤æ–­ä¸€ä¸ªå€¼æ˜¯å¦åœ¨ä¸¤ä¸ªå€¼ä¹‹é—´\n\n\nISNULL\nä¸ºç©ºè¿ç®—ç¬¦\nåˆ¤æ–­ä¸€ä¸ªå€¼ã€å­—ç¬¦ä¸²æˆ–è¡¨è¾¾å¼æ˜¯å¦ä¸ºç©º\n\n\nIN\nå±äºè¿ç®—ç¬¦\nåˆ¤æ–­ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºåˆ—è¡¨ä¸­çš„ä»»æ„ä¸€ä¸ªå€¼\n\n\nNOT IN\nä¸å±äºè¿ç®—ç¬¦\nåˆ¤æ–­ä¸€ä¸ªå€¼æ˜¯å¦ä¸æ˜¯ä¸€ä¸ªåˆ—è¡¨ä¸­çš„ä»»æ„ä¸€ä¸ªå€¼\n\n\nLIKE\næ¨¡ç³ŠåŒ¹é…è¿ç®—ç¬¦\nåˆ¤æ–­ä¸€ä¸ªå€¼æ˜¯å¦ç¬¦åˆæ¨¡ç³ŠåŒ¹é…è§„åˆ™\n\n\nREGEXP\næ­£åˆ™è¡¨è¾¾å¼è¿ç®—ç¬¦\nåˆ¤æ–­ä¸€ä¸ªå€¼æ˜¯å¦ç¬¦åˆæ­£åˆ™è¡¨è¾¾å¼çš„è§„åˆ™\n\n\nRLIKE\næ­£åˆ™è¡¨è¾¾å¼è¿ç®—ç¬¦\nåˆ¤æ–­ä¸€ä¸ªå€¼æ˜¯å¦ç¬¦åˆæ­£åˆ™è¡¨è¾¾å¼çš„è§„åˆ™\n\n\n\n\né€šé…ç¬¦LIKEç”¨æ³•\n\n\n\né€šé…ç¬¦\nå«ä¹‰\nç¤ºä¾‹\n\n\n\n\n%\nä»»ä½•å­—ç¬¦å‡ºç°ä»»æ„æ¬¡æ•°\nWHERE åˆ—å LIKE â€˜yfr%â€™ï¼š\n\n\n_\nåªåŒ¹é…å•ä¸ªå­—ç¬¦\nWHERE åˆ—å LIKE â€˜yfr_â€™ï¼š\n\n\n\n\næ­£åˆ™è¡¨è¾¾å¼\n\n\n\nå…³é”®å­—\nå«ä¹‰\nç¤ºä¾‹\n\n\n\n\nREGEXP\nåŒ…å«\nwhere åˆ—å REGEXP â€˜400â€™;\n\n\nBINARY\nä¸åŒºåˆ†å¤§å°åŒ¹é…\nwhere åˆ—å REGEXP BINARY  â€˜ASâ€™;\n\n\n\\\n\nORåŒ¹é…\nwhere åˆ—å REGEXP â€˜400\\\n500â€™;\n\n\n[123]\nåŒ¹é…å‡ ä¸ªå­—ç¬¦ä¹‹ä¸€\nwhere åˆ—å REGEXP â€˜[123]400â€™;\n\n\n123\nåŒ¹é…å‡ ä¸ªå­—ç¬¦ä¹‹å¤–æ‰€æœ‰\nwhere åˆ—å REGEXP â€˜[\\^123]400â€™;\n\n\n[0-9]\nèŒƒå›´åŒ¹é…\nwhere åˆ—å REGEXP â€˜[0-9]400â€™;\n\n\n\\\\\nåŒ¹é…ç‰¹æ®Šå­—ç¬¦ï¼ã€[]ã€\nå’Œ-where åˆ—å REGEXP â€˜\\400â€™;\n\n\nå­—ç¬¦ç±»\nåŒ¹é…å­—ç¬¦ç±»\n[ :alpha: ] [:blank:]ç­‰ç­‰\n\n\n{n,m}\nåŒ¹é…æ•°ç›®èŒƒå›´\nwhere åˆ—å REGEXP â€˜[0-9]{1,}â€™;åŒ¹é…ä¸€æ¬¡ä»¥ä¸Š\n\n\n[[:&lt;:]]ã€[[:&gt;:]]ã€$ã€^\nå®šä½ç¬¦ï¼šè¯çš„å¼€å§‹/å°¾ï¼Œæ–‡æœ¬çš„å¼€å§‹/å°¾\nwhere åˆ—å REGEXP â€˜^[0-9]â€™;\n\n\n\n\nå•è¡Œå‡½æ•°åŸºæœ¬å‡½æ•°\n\n\n\nå‡½æ•°\nç”¨æ³•\n\n\n\n\nABS(x)\nè¿”å›xçš„ç»å¯¹å€¼\n\n\nSIGN(X)\nè¿”å›Xçš„ç¬¦å·ã€‚æ­£æ•°è¿”å›1ï¼Œè´Ÿæ•°è¿”å›-1ï¼Œ0è¿”å›0\n\n\nPI()\nè¿”å›åœ†å‘¨ç‡çš„å€¼\n\n\nCEIL(x)ï¼ŒCEILING(x)\nè¿”å›å¤§äºæˆ–ç­‰äºæŸä¸ªå€¼çš„æœ€å°æ•´æ•°\n\n\nFLOOR(x)\nè¿”å›å°äºæˆ–ç­‰äºæŸä¸ªå€¼çš„æœ€å¤§æ•´æ•°\n\n\nLEAST(e1,e2,e3â€¦)\nè¿”å›åˆ—è¡¨ä¸­çš„æœ€å°å€¼\n\n\nGREATEST(e1,e2,e3â€¦)\nè¿”å›åˆ—è¡¨ä¸­çš„æœ€å¤§å€¼\n\n\nMOD(x,y)\nè¿”å›Xé™¤ä»¥Yåçš„ä½™æ•°\n\n\nRAND()\nè¿”å›0~1çš„éšæœºå€¼\n\n\nRAND(x)\nè¿”å›0~1çš„éšæœºå€¼ï¼Œå…¶ä¸­xçš„å€¼ç”¨ä½œç§å­å€¼ï¼Œç›¸åŒçš„Xå€¼ä¼šäº§ç”Ÿç›¸åŒçš„éšæœºæ•°\n\n\nROUND(x)\nè¿”å›ä¸€ä¸ªå¯¹xçš„å€¼è¿›è¡Œå››èˆäº”å…¥åï¼Œæœ€æ¥è¿‘äºXçš„æ•´æ•°\n\n\nROUND(x,y)\nè¿”å›ä¸€ä¸ªå¯¹xçš„å€¼è¿›è¡Œå››èˆäº”å…¥åæœ€æ¥è¿‘Xçš„å€¼ï¼Œå¹¶ä¿ç•™åˆ°å°æ•°ç‚¹åé¢Yä½\n\n\nTRUNCATE(x,y)\nè¿”å›æ•°å­—xæˆªæ–­ä¸ºyä½å°æ•°çš„ç»“æœ\n\n\nSQRT(x)\nè¿”å›xçš„å¹³æ–¹æ ¹ã€‚å½“Xçš„å€¼ä¸ºè´Ÿæ•°æ—¶ï¼Œè¿”å›NULL\n\n\n\n\nå­—ç¬¦ä¸²å‡½æ•°\n\n\n\nå‡½æ•°\nç”¨æ³•\n\n\n\n\nASCII(S)\nè¿”å›å­—ç¬¦ä¸²Sä¸­çš„ç¬¬ä¸€ä¸ªå­—ç¬¦çš„ASCIIç å€¼\n\n\nCHAR_LENGTH(s)\nè¿”å›å­—ç¬¦ä¸²sçš„å­—ç¬¦æ•°ã€‚ä½œç”¨ä¸CHARACTER_LENGTH(s)ç›¸åŒ\n\n\nLENGTH(s)\nè¿”å›å­—ç¬¦ä¸²sçš„å­—èŠ‚æ•°ï¼Œå’Œå­—ç¬¦é›†æœ‰å…³\n\n\nCONCAT(s1,s2,â€¦â€¦,sn)\nè¿æ¥s1,s2,â€¦â€¦,snä¸ºä¸€ä¸ªå­—ç¬¦ä¸²\n\n\nCONCAT_WS(x, s1,s2,â€¦â€¦,sn)\nåŒCONCAT(s1,s2,â€¦)å‡½æ•°ï¼Œä½†æ˜¯æ¯ä¸ªå­—ç¬¦ä¸²ä¹‹é—´è¦åŠ ä¸Šx\n\n\nINSERT(str, idx, len, replacestr)\nå°†å­—ç¬¦ä¸²strä»ç¬¬idxä½ç½®å¼€å§‹ï¼Œlenä¸ªå­—ç¬¦é•¿çš„å­ä¸²æ›¿æ¢ä¸ºå­—ç¬¦ä¸²replacestr\n\n\nREPLACE(str, a, b)\nç”¨å­—ç¬¦ä¸²bæ›¿æ¢å­—ç¬¦ä¸²strä¸­æ‰€æœ‰å‡ºç°çš„å­—ç¬¦ä¸²a\n\n\nUPPER(s) æˆ– UCASE(s)\nå°†å­—ç¬¦ä¸²sçš„æ‰€æœ‰å­—æ¯è½¬æˆå¤§å†™å­—æ¯\n\n\nLOWER(s)  æˆ–LCASE(s)\nå°†å­—ç¬¦ä¸²sçš„æ‰€æœ‰å­—æ¯è½¬æˆå°å†™å­—æ¯\n\n\nLEFT(str,n)\nè¿”å›å­—ç¬¦ä¸²stræœ€å·¦è¾¹çš„nä¸ªå­—ç¬¦\n\n\nRIGHT(str,n)\nè¿”å›å­—ç¬¦ä¸²stræœ€å³è¾¹çš„nä¸ªå­—ç¬¦\n\n\nLPAD(str, len, pad)\nç”¨å­—ç¬¦ä¸²padå¯¹stræœ€å·¦è¾¹è¿›è¡Œå¡«å……ï¼Œç›´åˆ°strçš„é•¿åº¦ä¸ºlenä¸ªå­—ç¬¦\n\n\nRPAD(str ,len, pad)\nç”¨å­—ç¬¦ä¸²padå¯¹stræœ€å³è¾¹è¿›è¡Œå¡«å……ï¼Œç›´åˆ°strçš„é•¿åº¦ä¸ºlenä¸ªå­—ç¬¦\n\n\nLTRIM(s)\nå»æ‰å­—ç¬¦ä¸²så·¦ä¾§çš„ç©ºæ ¼\n\n\nRTRIM(s)\nå»æ‰å­—ç¬¦ä¸²så³ä¾§çš„ç©ºæ ¼\n\n\nTRIM(s)\nå»æ‰å­—ç¬¦ä¸²så¼€å§‹ä¸ç»“å°¾çš„ç©ºæ ¼\n\n\nTRIM(s1 FROM s)\nå»æ‰å­—ç¬¦ä¸²så¼€å§‹ä¸ç»“å°¾çš„s1\n\n\nTRIM(LEADING s1 FROM s)\nå»æ‰å­—ç¬¦ä¸²så¼€å§‹å¤„çš„s1\n\n\nTRIM(TRAILING s1 FROM s)\nå»æ‰å­—ç¬¦ä¸²sç»“å°¾å¤„çš„s1\n\n\nREPEAT(str, n)\nè¿”å›stré‡å¤næ¬¡çš„ç»“æœ\n\n\nSPACE(n)\nè¿”å›nä¸ªç©ºæ ¼\n\n\nSTRCMP(s1,s2)\næ¯”è¾ƒå­—ç¬¦ä¸²s1,s2çš„ASCIIç å€¼çš„å¤§å°\n\n\nSUBSTR(s,index,len)\nè¿”å›ä»å­—ç¬¦ä¸²sçš„indexä½ç½®å…¶lenä¸ªå­—ç¬¦ï¼Œä½œç”¨ä¸SUBSTRING(s,n,len)ã€MID(s,n,len)ç›¸åŒ\n\n\nLOCATE(substr,str)\nè¿”å›å­—ç¬¦ä¸²substråœ¨å­—ç¬¦ä¸²strä¸­é¦–æ¬¡å‡ºç°çš„ä½ç½®ï¼Œä½œç”¨äºPOSITION(substr IN str)ã€INSTR(str,substr)ç›¸åŒã€‚æœªæ‰¾åˆ°ï¼Œè¿”å›0\n\n\nELT(m,s1,s2,â€¦,sn)\nè¿”å›æŒ‡å®šä½ç½®çš„å­—ç¬¦ä¸²ï¼Œå¦‚æœm=1ï¼Œåˆ™è¿”å›s1ï¼Œå¦‚æœm=2ï¼Œåˆ™è¿”å›s2ï¼Œå¦‚æœm=nï¼Œåˆ™è¿”å›sn\n\n\nFIELD(s,s1,s2,â€¦,sn)\nè¿”å›å­—ç¬¦ä¸²såœ¨å­—ç¬¦ä¸²åˆ—è¡¨ä¸­ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®\n\n\nFIND_IN_SET(s1,s2)\nè¿”å›å­—ç¬¦ä¸²s1åœ¨å­—ç¬¦ä¸²s2ä¸­å‡ºç°çš„ä½ç½®ã€‚å…¶ä¸­ï¼Œå­—ç¬¦ä¸²s2æ˜¯ä¸€ä¸ªä»¥é€—å·åˆ†éš”çš„å­—ç¬¦ä¸²\n\n\nREVERSE(s)\nè¿”å›såè½¬åçš„å­—ç¬¦ä¸²\n\n\nNULLIF(value1,value2)\næ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œå¦‚æœvalue1ä¸value2ç›¸ç­‰ï¼Œåˆ™è¿”å›NULLï¼Œå¦åˆ™è¿”å›value1\n\n\n\n\n\n\n\n\n\n\n\n\n\næ³¨æ„ï¼šMySQLä¸­ï¼Œå­—ç¬¦ä¸²çš„ä½ç½®æ˜¯ä»1å¼€å§‹çš„ã€‚\næ—¥æœŸæ—¶é—´å¤„ç†å‡½æ•°è·å–æ—¥æœŸã€æ—¶é—´\n\n\n\nå‡½æ•°\nç”¨æ³•\n\n\n\n\nCURDATE() ï¼ŒCURRENT_DATE()\nè¿”å›å½“å‰æ—¥æœŸï¼ŒåªåŒ…å«å¹´ã€æœˆã€æ—¥\n\n\nCURTIME() ï¼Œ CURRENT_TIME()\nè¿”å›å½“å‰æ—¶é—´ï¼ŒåªåŒ…å«æ—¶ã€åˆ†ã€ç§’\n\n\nNOW() / SYSDATE() / CURRENT_TIMESTAMP() / LOCALTIME() / LOCALTIMESTAMP()\nè¿”å›å½“å‰ç³»ç»Ÿæ—¥æœŸå’Œæ—¶é—´\n\n\nUTC_DATE()\nè¿”å›UTCï¼ˆä¸–ç•Œæ ‡å‡†æ—¶é—´ï¼‰æ—¥æœŸ\n\n\nUTC_TIME()\nè¿”å›UTCï¼ˆä¸–ç•Œæ ‡å‡†æ—¶é—´ï¼‰æ—¶é—´\n\n\n\n\næ—¥æœŸä¸æ—¶é—´æˆ³çš„è½¬æ¢\n\n\n\nå‡½æ•°\nç”¨æ³•\n\n\n\n\nUNIX_TIMESTAMP()\nä»¥UNIXæ—¶é—´æˆ³çš„å½¢å¼è¿”å›å½“å‰æ—¶é—´ã€‚SELECT UNIX_TIMESTAMP() -&gt;1634348884\n\n\nUNIX_TIMESTAMP(date)\nå°†æ—¶é—´dateä»¥UNIXæ—¶é—´æˆ³çš„å½¢å¼è¿”å›ã€‚\n\n\nFROM_UNIXTIME(timestamp)\nå°†UNIXæ—¶é—´æˆ³çš„æ—¶é—´è½¬æ¢ä¸ºæ™®é€šæ ¼å¼çš„æ—¶é—´\n\n\n\n\nè·å–æœˆä»½ã€æ˜ŸæœŸã€æ˜ŸæœŸæ•°ã€å¤©æ•°ç­‰å‡½æ•°\n\n\n\nå‡½æ•°\nç”¨æ³•\n\n\n\n\nYEAR(date) / MONTH(date) / DAY(date)\nè¿”å›å…·ä½“çš„æ—¥æœŸå€¼\n\n\nHOUR(time) / MINUTE(time) / SECOND(time)\nè¿”å›å…·ä½“çš„æ—¶é—´å€¼\n\n\nMONTHNAME(date)\nè¿”å›æœˆä»½ï¼šJanuaryï¼Œâ€¦\n\n\nDAYNAME(date)\nè¿”å›æ˜ŸæœŸå‡ ï¼šMONDAYï¼ŒTUESDAYâ€¦..SUNDAY\n\n\nWEEKDAY(date)\nè¿”å›å‘¨å‡ ï¼Œæ³¨æ„ï¼Œå‘¨1æ˜¯0ï¼Œå‘¨2æ˜¯1ï¼Œã€‚ã€‚ã€‚å‘¨æ—¥æ˜¯6\n\n\nQUARTER(date)\nè¿”å›æ—¥æœŸå¯¹åº”çš„å­£åº¦ï¼ŒèŒƒå›´ä¸º1ï½4\n\n\nWEEK(date) ï¼Œ WEEKOFYEAR(date)\nè¿”å›ä¸€å¹´ä¸­çš„ç¬¬å‡ å‘¨\n\n\nDAYOFYEAR(date)\nè¿”å›æ—¥æœŸæ˜¯ä¸€å¹´ä¸­çš„ç¬¬å‡ å¤©\n\n\nDAYOFMONTH(date)\nè¿”å›æ—¥æœŸä½äºæ‰€åœ¨æœˆä»½çš„ç¬¬å‡ å¤©\n\n\nDAYOFWEEK(date)\nè¿”å›å‘¨å‡ ï¼Œæ³¨æ„ï¼šå‘¨æ—¥æ˜¯1ï¼Œå‘¨ä¸€æ˜¯2ï¼Œã€‚ã€‚ã€‚å‘¨å…­æ˜¯7\n\n\n\n\næ—¥æœŸçš„æ“ä½œå‡½æ•°\n\n\n\nå‡½æ•°\nç”¨æ³•\n\n\n\n\nEXTRACT(type FROM date)\nè¿”å›æŒ‡å®šæ—¥æœŸä¸­ç‰¹å®šçš„éƒ¨åˆ†ï¼ŒtypeæŒ‡å®šè¿”å›çš„å€¼\n\n\n\n\n\n\n\n\ntypeå–å€¼\nå«ä¹‰\n\n\n\n\nMICROS ECONDtypeå–å€¼\nè¿”å›æ¯«ç§’æ•°\n\n\nSECONDMICROS ECOND\nè¿”å›ç§’æ•°\n\n\nMINUTE .SECOND\nè¿”å›åˆ†é’Ÿæ•°\n\n\nHOURMINUTE\nè¿”å›å°æ—¶æ•°\n\n\nDAYHOUR\nè¿”å›å¤©æ•°.\n\n\nWEEKDAY\nè¿”å›æ—¥æœŸåœ¨ä¸€å¹´ä¸­çš„ç¬¬å‡ ä¸ªæ˜ŸæœŸ\n\n\nMONTHWEEK\nè¿”å›æ—¥æœŸåœ¨ä¸€å¹´ä¸­çš„ç¬¬å‡ ä¸ªæœˆ\n\n\nQUARTERMONTH\nè¿”å›æ—¥æœŸåœ¨ä¸€å¹´ä¸­çš„ç¬¬å‡ ä¸ªå­£åº¦\n\n\nYEARQUARTER\nè¿”å›æ—¥æœŸçš„å¹´ä»½\n\n\nSECOND MICROSECONDYEAR\nè¿”å›ç§’å’Œæ¯«ç§’å€¼\n\n\nMINUTE MICROSECONDSECOND MICROSECOND\nè¿”å›åˆ†é’Ÿå’Œæ¯«ç§’å€¼\n\n\nMINUTE SECONDMINUTE MICROSECOND\nè¿”å›åˆ†é’Ÿå’Œç§’å€¼\n\n\nHOUR MICROSECONDMINUTE SECOND\nè¿”å›å°æ—¶å’Œæ¯«ç§’å€¼\n\n\nHOUR SECONDHOUR MICROSECOND\nè¿”å›å°æ—¶å’Œç§’å€¼\n\n\nHOUR_ MINUTEHOUR SECOND\nè¿”å›å°æ—¶å’Œåˆ†é’Ÿå€¼\n\n\nDAY MICROSECONDHOUR_ MINUTE\nè¿”å›å¤©å’Œæ¯«ç§’å€¼\n\n\nDAY_ SECONDDAY_ MICROSECOND\nè¿”å›å¤©å’Œç§’å€¼\n\n\nDAY_ MINUTEDAY_ SECOND\nè¿”å›å¤©å’Œåˆ†é’Ÿå€¼\n\n\nDAY_ HOURDAY_ MINUTE\nè¿”å›å¤©å’Œå°æ—¶\n\n\nYEAR MONTHDAY_ HOUR\nè¿”å›å¹´å’Œæœˆ\n\n\n\n\nSELECT EXTRACT(MINUTE FROM NOW()),EXTRACT( WEEK FROM NOW()),\nEXTRACT( QUARTER FROM NOW()),EXTRACT( MINUTE_SECOND FROM NOW())\nFROM DUAL;\næ—¶é—´å’Œç§’é’Ÿè½¬æ¢çš„å‡½æ•°\n\n\n\nå‡½æ•°\nç”¨æ³•\n\n\n\n\nTIME_TO_SEC(time)\nå°† time è½¬åŒ–ä¸ºç§’å¹¶è¿”å›ç»“æœå€¼ã€‚è½¬åŒ–çš„å…¬å¼ä¸ºï¼šå°æ—¶*3600+åˆ†é’Ÿ*60+ç§’\n\n\nSEC_TO_TIME(seconds)\nå°† seconds æè¿°è½¬åŒ–ä¸ºåŒ…å«å°æ—¶ã€åˆ†é’Ÿå’Œç§’çš„æ—¶é—´\n\n\n\n\nè®¡ç®—æ—¥æœŸå’Œæ—¶é—´çš„å‡½æ•°ç¬¬1ç»„ï¼š\n\n\n\n\nå‡½æ•°\nç”¨æ³•\n\n\n\n\nDATE_ADD(datetime, INTERVAL  expr type)ï¼ŒADDDATE(date,INTERVAL expr type)\nè¿”å›ä¸ç»™å®šæ—¥æœŸæ—¶é—´ç›¸å·®INTERVALæ—¶é—´æ®µçš„æ—¥æœŸæ—¶é—´\n\n\nDATE_SUB(date,INTERVAL expr type)ï¼ŒSUBDATE(date,INTERVAL expr type)\nè¿”å›ä¸dateç›¸å·®INTERVALæ—¶é—´é—´éš”çš„æ—¥æœŸ\n\n\n\n\nç¬¬2ç»„ï¼š\n\n\n\n\nå‡½æ•°\nç”¨æ³•\n\n\n\n\nADDTIME(time1,time2)\nè¿”å›time1åŠ ä¸Štime2çš„æ—¶é—´ã€‚å½“time2ä¸ºä¸€ä¸ªæ•°å­—æ—¶ï¼Œä»£è¡¨çš„æ˜¯ç§’ï¼Œå¯ä»¥ä¸ºè´Ÿæ•°\n\n\nSUBTIME(time1,time2)\nè¿”å›time1å‡å»time2åçš„æ—¶é—´ã€‚å½“time2ä¸ºä¸€ä¸ªæ•°å­—æ—¶ï¼Œä»£è¡¨çš„æ˜¯ç§’ï¼Œå¯ä»¥ä¸ºè´Ÿæ•°\n\n\nDATEDIFF(date1,date2)\nè¿”å›date1 - date2çš„æ—¥æœŸé—´éš”å¤©æ•°\n\n\nTIMEDIFF(time1, time2)\nè¿”å›time1 - time2çš„æ—¶é—´é—´éš”\n\n\nFROM_DAYS(N)\nè¿”å›ä»0000å¹´1æœˆ1æ—¥èµ·ï¼ŒNå¤©ä»¥åçš„æ—¥æœŸ\n\n\nTO_DAYS(date)\nè¿”å›æ—¥æœŸdateè·ç¦»0000å¹´1æœˆ1æ—¥çš„å¤©æ•°\n\n\nLAST_DAY(date)\nè¿”å›dateæ‰€åœ¨æœˆä»½çš„æœ€åä¸€å¤©çš„æ—¥æœŸ\n\n\nMAKEDATE(year,n)\né’ˆå¯¹ç»™å®šå¹´ä»½ä¸æ‰€åœ¨å¹´ä»½ä¸­çš„å¤©æ•°è¿”å›ä¸€ä¸ªæ—¥æœŸ\n\n\nMAKETIME(hour,minute,second)\nå°†ç»™å®šçš„å°æ—¶ã€åˆ†é’Ÿå’Œç§’ç»„åˆæˆæ—¶é—´å¹¶è¿”å›\n\n\nPERIOD_ADD(time,n)\nè¿”å›timeåŠ ä¸Šnåçš„æ—¶é—´\n\n\n\n\næ—¥æœŸçš„æ ¼å¼åŒ–ä¸è§£æ\n\n\n\nå‡½æ•°\nç”¨æ³•\n\n\n\n\nDATE_FORMAT(date,fmt)\næŒ‰ç…§å­—ç¬¦ä¸²fmtæ ¼å¼åŒ–æ—¥æœŸdateå€¼\n\n\nTIME_FORMAT(time,fmt)\næŒ‰ç…§å­—ç¬¦ä¸²fmtæ ¼å¼åŒ–æ—¶é—´timeå€¼\n\n\nGET_FORMAT(date_type,format_type)\nè¿”å›æ—¥æœŸå­—ç¬¦ä¸²çš„æ˜¾ç¤ºæ ¼å¼\n\n\nSTR_TO_DATE(str, fmt)\næŒ‰ç…§å­—ç¬¦ä¸²fmtå¯¹strè¿›è¡Œè§£æï¼Œè§£æä¸ºä¸€ä¸ªæ—¥æœŸ\n\n\n\n\nä¸Šè¿°éGET_FORMATå‡½æ•°ä¸­fmtå‚æ•°å¸¸ç”¨çš„æ ¼å¼ç¬¦ï¼š\n\n\n\n\næ ¼å¼ç¬¦\nè¯´æ˜\næ ¼å¼ç¬¦\nè¯´æ˜\n\n\n\n\n%Y\n4ä½æ•°å­—è¡¨ç¤ºå¹´ä»½\n%y\nè¡¨ç¤ºä¸¤ä½æ•°å­—è¡¨ç¤ºå¹´ä»½\n\n\n%M\næœˆåè¡¨ç¤ºæœˆä»½ï¼ˆJanuary,â€¦.ï¼‰\n%m\nä¸¤ä½æ•°å­—è¡¨ç¤ºæœˆä»½ï¼ˆ01,02,03ã€‚ã€‚ã€‚ï¼‰\n\n\n%b\nç¼©å†™çš„æœˆåï¼ˆJan.ï¼ŒFeb.ï¼Œâ€¦.ï¼‰\n%c\næ•°å­—è¡¨ç¤ºæœˆä»½ï¼ˆ1,2,3,â€¦ï¼‰\n\n\n%D\nè‹±æ–‡åç¼€è¡¨ç¤ºæœˆä¸­çš„å¤©æ•°ï¼ˆ1st,2nd,3rd,â€¦ï¼‰\n%d\nä¸¤ä½æ•°å­—è¡¨ç¤ºæœˆä¸­çš„å¤©æ•°(01,02â€¦)\n\n\n%e\næ•°å­—å½¢å¼è¡¨ç¤ºæœˆä¸­çš„å¤©æ•°ï¼ˆ1,2,3,4,5â€¦..ï¼‰\n\n\n\n\n%H\nä¸¤ä½æ•°å­—è¡¨ç¤ºå°æ•°ï¼Œ24å°æ—¶åˆ¶ï¼ˆ01,02..ï¼‰\n%hå’Œ%I\nä¸¤ä½æ•°å­—è¡¨ç¤ºå°æ—¶ï¼Œ12å°æ—¶åˆ¶ï¼ˆ01,02..ï¼‰\n\n\n%k\næ•°å­—å½¢å¼çš„å°æ—¶ï¼Œ24å°æ—¶åˆ¶(1,2,3)\n%l\næ•°å­—å½¢å¼è¡¨ç¤ºå°æ—¶ï¼Œ12å°æ—¶åˆ¶ï¼ˆ1,2,3,4â€¦.ï¼‰\n\n\n%i\nä¸¤ä½æ•°å­—è¡¨ç¤ºåˆ†é’Ÿï¼ˆ00,01,02ï¼‰\n%Så’Œ%s\nä¸¤ä½æ•°å­—è¡¨ç¤ºç§’(00,01,02â€¦)\n\n\n%W\nä¸€å‘¨ä¸­çš„æ˜ŸæœŸåç§°ï¼ˆSundayâ€¦ï¼‰\n%a\nä¸€å‘¨ä¸­çš„æ˜ŸæœŸç¼©å†™ï¼ˆSun.ï¼ŒMon.,Tues.ï¼Œ..ï¼‰\n\n\n%w\nä»¥æ•°å­—è¡¨ç¤ºå‘¨ä¸­çš„å¤©æ•°(0=Sunday,1=Mondayâ€¦.)\n\n\n\n\n%j\nä»¥3ä½æ•°å­—è¡¨ç¤ºå¹´ä¸­çš„å¤©æ•°(001,002â€¦)\n%U\nä»¥æ•°å­—è¡¨ç¤ºå¹´ä¸­çš„ç¬¬å‡ å‘¨ï¼Œï¼ˆ1,2,3ã€‚ã€‚ï¼‰å…¶ä¸­Sundayä¸ºå‘¨ä¸­ç¬¬ä¸€å¤©\n\n\n%u\nä»¥æ•°å­—è¡¨ç¤ºå¹´ä¸­çš„ç¬¬å‡ å‘¨ï¼Œï¼ˆ1,2,3ã€‚ã€‚ï¼‰å…¶ä¸­Mondayä¸ºå‘¨ä¸­ç¬¬ä¸€å¤©\n\n\n\n\n%T\n24å°æ—¶åˆ¶\n%r\n12å°æ—¶åˆ¶\n\n\n%p\nAMæˆ–PM\n%%\nè¡¨ç¤º%\n\n\n\n\nä¸‰è§’å‡½æ•°\n\n\n\nå‡½æ•°\nç”¨æ³•\n\n\n\n\nSIN(x)\nè¿”å›xçš„æ­£å¼¦å€¼ï¼Œå…¶ä¸­ï¼Œå‚æ•°xä¸ºå¼§åº¦å€¼\n\n\nASIN(x)\nè¿”å›xçš„åæ­£å¼¦å€¼ï¼Œå³è·å–æ­£å¼¦ä¸ºxçš„å€¼ã€‚å¦‚æœxçš„å€¼ä¸åœ¨-1åˆ°1ä¹‹é—´ï¼Œåˆ™è¿”å›NULL\n\n\nCOS(x)\nè¿”å›xçš„ä½™å¼¦å€¼ï¼Œå…¶ä¸­ï¼Œå‚æ•°xä¸ºå¼§åº¦å€¼\n\n\nACOS(x)\nè¿”å›xçš„åä½™å¼¦å€¼ï¼Œå³è·å–ä½™å¼¦ä¸ºxçš„å€¼ã€‚å¦‚æœxçš„å€¼ä¸åœ¨-1åˆ°1ä¹‹é—´ï¼Œåˆ™è¿”å›NULL\n\n\nTAN(x)\nè¿”å›xçš„æ­£åˆ‡å€¼ï¼Œå…¶ä¸­ï¼Œå‚æ•°xä¸ºå¼§åº¦å€¼\n\n\nATAN(x)\nè¿”å›xçš„åæ­£åˆ‡å€¼ï¼Œå³è¿”å›æ­£åˆ‡å€¼ä¸ºxçš„å€¼\n\n\nATAN2(m,n)\nè¿”å›ä¸¤ä¸ªå‚æ•°çš„åæ­£åˆ‡å€¼\n\n\nCOT(x)\nè¿”å›xçš„ä½™åˆ‡å€¼ï¼Œå…¶ä¸­ï¼ŒXä¸ºå¼§åº¦å€¼\n\n\n\n\næŒ‡æ•°ä¸å¯¹æ•°\n\n\n\nå‡½æ•°\nç”¨æ³•\n\n\n\n\nPOW(x,y)ï¼ŒPOWER(X,Y)\nè¿”å›xçš„yæ¬¡æ–¹\n\n\nEXP(X)\nè¿”å›eçš„Xæ¬¡æ–¹ï¼Œå…¶ä¸­eæ˜¯ä¸€ä¸ªå¸¸æ•°ï¼Œ2.718281828459045\n\n\nLN(X)ï¼ŒLOG(X)\nè¿”å›ä»¥eä¸ºåº•çš„Xçš„å¯¹æ•°ï¼Œå½“X &lt;= 0 æ—¶ï¼Œè¿”å›çš„ç»“æœä¸ºNULL\n\n\nLOG10(X)\nè¿”å›ä»¥10ä¸ºåº•çš„Xçš„å¯¹æ•°ï¼Œå½“X &lt;= 0 æ—¶ï¼Œè¿”å›çš„ç»“æœä¸ºNULL\n\n\nLOG2(X)\nè¿”å›ä»¥2ä¸ºåº•çš„Xçš„å¯¹æ•°ï¼Œå½“X &lt;= 0 æ—¶ï¼Œè¿”å›NULL\n\n\n\n\nè¿›åˆ¶é—´çš„è½¬æ¢\n\n\n\nå‡½æ•°\nç”¨æ³•\n\n\n\n\nBIN(x)\nè¿”å›xçš„äºŒè¿›åˆ¶ç¼–ç \n\n\nHEX(x)\nè¿”å›xçš„åå…­è¿›åˆ¶ç¼–ç \n\n\nOCT(x)\nè¿”å›xçš„å…«è¿›åˆ¶ç¼–ç \n\n\nCONV(x,f1,f2)\nè¿”å›f1è¿›åˆ¶æ•°å˜æˆf2è¿›åˆ¶æ•°\n\n\n\n\næµç¨‹æ§åˆ¶å‡½æ•°æµç¨‹å¤„ç†å‡½æ•°å¯ä»¥æ ¹æ®ä¸åŒçš„æ¡ä»¶ï¼Œæ‰§è¡Œä¸åŒçš„å¤„ç†æµç¨‹ï¼Œå¯ä»¥åœ¨SQLè¯­å¥ä¸­å®ç°ä¸åŒçš„æ¡ä»¶é€‰æ‹©ã€‚MySQLä¸­çš„æµç¨‹å¤„ç†å‡½æ•°ä¸»è¦åŒ…æ‹¬IF()ã€IFNULL()å’ŒCASE()å‡½æ•°ã€‚\n\n\n\n\nå‡½æ•°\nç”¨æ³•\n\n\n\n\nIF(value,value1,value2)\nå¦‚æœvalueçš„å€¼ä¸ºTRUEï¼Œè¿”å›value1ï¼Œå¦åˆ™è¿”å›value2\n\n\nIFNULL(value1, value2)\nå¦‚æœvalue1ä¸ä¸ºNULLï¼Œè¿”å›value1ï¼Œå¦åˆ™è¿”å›value2\n\n\nCASE WHEN æ¡ä»¶1 THEN ç»“æœ1 WHEN æ¡ä»¶2 THEN ç»“æœ2 â€¦. [ELSE resultn] END\nç›¸å½“äºJavaçš„ifâ€¦else ifâ€¦elseâ€¦\n\n\nCASE  expr WHEN å¸¸é‡å€¼1 THEN å€¼1 WHEN å¸¸é‡å€¼1 THEN å€¼1 â€¦. [ELSE å€¼n] END\nç›¸å½“äºJavaçš„switchâ€¦caseâ€¦\n\n\n\n\nåŠ å¯†ä¸è§£å¯†å‡½æ•°åŠ å¯†ä¸è§£å¯†å‡½æ•°ä¸»è¦ç”¨äºå¯¹æ•°æ®åº“ä¸­çš„æ•°æ®è¿›è¡ŒåŠ å¯†å’Œè§£å¯†å¤„ç†ï¼Œä»¥é˜²æ­¢æ•°æ®è¢«ä»–äººçªƒå–ã€‚è¿™äº›å‡½æ•°åœ¨ä¿è¯æ•°æ®åº“å®‰å…¨æ—¶éå¸¸æœ‰ç”¨ã€‚\n\n\n\n\nå‡½æ•°\nç”¨æ³•\n\n\n\n\nPASSWORD(str)\nè¿”å›å­—ç¬¦ä¸²strçš„åŠ å¯†ç‰ˆæœ¬ï¼Œ41ä½é•¿çš„å­—ç¬¦ä¸²ã€‚åŠ å¯†ç»“æœä¸å¯é€†ï¼Œå¸¸ç”¨äºç”¨æˆ·çš„å¯†ç åŠ å¯†\n\n\nMD5(str)\nè¿”å›å­—ç¬¦ä¸²strçš„md5åŠ å¯†åçš„å€¼ï¼Œä¹Ÿæ˜¯ä¸€ç§åŠ å¯†æ–¹å¼ã€‚è‹¥å‚æ•°ä¸ºNULLï¼Œåˆ™ä¼šè¿”å›NULL\n\n\nSHA(str)\nä»åŸæ˜æ–‡å¯†ç strè®¡ç®—å¹¶è¿”å›åŠ å¯†åçš„å¯†ç å­—ç¬¦ä¸²ï¼Œå½“å‚æ•°ä¸ºNULLæ—¶ï¼Œè¿”å›NULLã€‚SHAåŠ å¯†ç®—æ³•æ¯”MD5æ›´åŠ å®‰å…¨ã€‚\n\n\nENCODE(value,password_seed)\nè¿”å›ä½¿ç”¨password_seedä½œä¸ºåŠ å¯†å¯†ç åŠ å¯†value\n\n\nDECODE(value,password_seed)\nè¿”å›ä½¿ç”¨password_seedä½œä¸ºåŠ å¯†å¯†ç è§£å¯†value\n\n\n\n\nå¯ä»¥çœ‹åˆ°ï¼ŒENCODE(value,password_seed)å‡½æ•°ä¸DECODE(value,password_seed)å‡½æ•°äº’ä¸ºåå‡½æ•°ã€‚\nMySQLä¿¡æ¯å‡½æ•°MySQLä¸­å†…ç½®äº†ä¸€äº›å¯ä»¥æŸ¥è¯¢MySQLä¿¡æ¯çš„å‡½æ•°ï¼Œè¿™äº›å‡½æ•°ä¸»è¦ç”¨äºå¸®åŠ©æ•°æ®åº“å¼€å‘æˆ–è¿ç»´äººå‘˜æ›´å¥½åœ°å¯¹æ•°æ®åº“è¿›è¡Œç»´æŠ¤å·¥ä½œã€‚\n\n\n\n\nå‡½æ•°\nç”¨æ³•\n\n\n\n\nVERSION()\nè¿”å›å½“å‰MySQLçš„ç‰ˆæœ¬å·\n\n\nCONNECTION_ID()\nè¿”å›å½“å‰MySQLæœåŠ¡å™¨çš„è¿æ¥æ•°\n\n\nDATABASE()ï¼ŒSCHEMA()\nè¿”å›MySQLå‘½ä»¤è¡Œå½“å‰æ‰€åœ¨çš„æ•°æ®åº“\n\n\nUSER()ï¼ŒCURRENT_USER()ã€SYSTEM_USER()ï¼ŒSESSION_USER()\nè¿”å›å½“å‰è¿æ¥MySQLçš„ç”¨æˆ·åï¼Œè¿”å›ç»“æœæ ¼å¼ä¸ºâ€œä¸»æœºå@ç”¨æˆ·åâ€\n\n\nCHARSET(value)\nè¿”å›å­—ç¬¦ä¸²valueè‡ªå˜é‡çš„å­—ç¬¦é›†\n\n\nCOLLATION(value)\nè¿”å›å­—ç¬¦ä¸²valueçš„æ¯”è¾ƒè§„åˆ™\n\n\n\n\nå…¶ä»–å‡½æ•°MySQLä¸­æœ‰äº›å‡½æ•°æ— æ³•å¯¹å…¶è¿›è¡Œå…·ä½“çš„åˆ†ç±»ï¼Œä½†æ˜¯è¿™äº›å‡½æ•°åœ¨MySQLçš„å¼€å‘å’Œè¿ç»´è¿‡ç¨‹ä¸­ä¹Ÿæ˜¯ä¸å®¹å¿½è§†çš„ã€‚\n\n\n\n\nå‡½æ•°\nç”¨æ³•\n\n\n\n\nFORMAT(value,n)\nè¿”å›å¯¹æ•°å­—valueè¿›è¡Œæ ¼å¼åŒ–åçš„ç»“æœæ•°æ®ã€‚nè¡¨ç¤ºå››èˆäº”å…¥åä¿ç•™åˆ°å°æ•°ç‚¹ånä½\n\n\nCONV(value,from,to)\nå°†valueçš„å€¼è¿›è¡Œä¸åŒè¿›åˆ¶ä¹‹é—´çš„è½¬æ¢\n\n\nINET_ATON(ipvalue)\nå°†ä»¥ç‚¹åˆ†éš”çš„IPåœ°å€è½¬åŒ–ä¸ºä¸€ä¸ªæ•°å­—\n\n\nINET_NTOA(value)\nå°†æ•°å­—å½¢å¼çš„IPåœ°å€è½¬åŒ–ä¸ºä»¥ç‚¹åˆ†éš”çš„IPåœ°å€\n\n\nBENCHMARK(n,expr)\nå°†è¡¨è¾¾å¼expré‡å¤æ‰§è¡Œnæ¬¡ã€‚ç”¨äºæµ‹è¯•MySQLå¤„ç†exprè¡¨è¾¾å¼æ‰€è€—è´¹çš„æ—¶é—´\n\n\nCONVERT(value USING char_code)\nå°†valueæ‰€ä½¿ç”¨çš„å­—ç¬¦ç¼–ç ä¿®æ”¹ä¸ºchar_code\n\n\n\n\nSQLèšé›†å‡½æ•°\n\n\n\nå‡½æ•°\n\n\n\n\n\nAVG()\nmysql&gt; SELECT AVG(åˆ—å) from è¡¨å;\n\n\nCOUNT()\nmysql&gt; SELECT COUNT(åˆ—å) from è¡¨å;\n\n\nMAX()\nmysql&gt; SELECT MAX(åˆ—å) from è¡¨å;\n\n\nMIN()\nmysql&gt; SELECT MIN(åˆ—å) from è¡¨å;\n\n\nSUM()\nmysql&gt; SELECT SUM(åˆ—å) from è¡¨å;\n\n\n\n\nç‰¹ç‚¹ï¼š\n1ã€ä»¥ä¸Šäº”ä¸ªåˆ†ç»„å‡½æ•°éƒ½å¿½ç•¥nullå€¼ï¼Œé™¤äº†count(*)\n2ã€sumå’Œavgä¸€èˆ¬ç”¨äºå¤„ç†æ•°å€¼å‹\n    maxã€minã€countå¯ä»¥å¤„ç†ä»»ä½•æ•°æ®ç±»å‹\n3ã€éƒ½å¯ä»¥æ­é…distinctä½¿ç”¨ï¼Œç”¨äºç»Ÿè®¡å»é‡åçš„ç»“æœ\n4ã€countçš„å‚æ•°å¯ä»¥æ”¯æŒï¼š\n    å­—æ®µã€*ã€å¸¸é‡å€¼ï¼Œä¸€èˆ¬æ”¾1\n\n   å»ºè®®ä½¿ç”¨ count(*)\nGROUP BYå¯ä»¥ä½¿ç”¨GROUP BYå­å¥å°†è¡¨ä¸­çš„æ•°æ®åˆ†æˆè‹¥å¹²ç»„\nSELECT column, group_function(column)\nFROM table\n[WHERE\tcondition]\n[GROUP BY\tgroup_by_expression]\n[ORDER BY\tcolumn];\nä½¿ç”¨å¤šä¸ªåˆ—åˆ†ç»„\nSELECT   department_id dept_id, job_id, SUM(salary)\nFROM     employees\nGROUP BY department_id, job_id ;\nHAVINGè¿‡æ»¤åˆ†ç»„ï¼šHAVINGå­å¥\n\nè¡Œå·²ç»è¢«åˆ†ç»„ã€‚\nä½¿ç”¨äº†èšåˆå‡½æ•°ã€‚\næ»¡è¶³HAVING å­å¥ä¸­æ¡ä»¶çš„åˆ†ç»„å°†è¢«æ˜¾ç¤ºã€‚\nHAVING ä¸èƒ½å•ç‹¬ä½¿ç”¨ï¼Œå¿…é¡»è¦è·Ÿ GROUP BY ä¸€èµ·ä½¿ç”¨ã€‚\n\nSELECT   department_id, MAX(salary)\nFROM     employees\nGROUP BY department_id\nHAVING   MAX(salary)&gt;10000 ;\nWHEREå’ŒHAVINGçš„å¯¹æ¯”åŒºåˆ«1ï¼šWHERE å¯ä»¥ç›´æ¥ä½¿ç”¨è¡¨ä¸­çš„å­—æ®µä½œä¸ºç­›é€‰æ¡ä»¶ï¼Œä½†ä¸èƒ½ä½¿ç”¨åˆ†ç»„ä¸­çš„è®¡ç®—å‡½æ•°ä½œä¸ºç­›é€‰æ¡ä»¶ï¼›HAVING å¿…é¡»è¦ä¸ GROUP BY é…åˆä½¿ç”¨ï¼Œå¯ä»¥æŠŠåˆ†ç»„è®¡ç®—çš„å‡½æ•°å’Œåˆ†ç»„å­—æ®µä½œä¸ºç­›é€‰æ¡ä»¶ã€‚ \nè¿™å†³å®šäº†ï¼Œåœ¨éœ€è¦å¯¹æ•°æ®è¿›è¡Œåˆ†ç»„ç»Ÿè®¡çš„æ—¶å€™ï¼ŒHAVING å¯ä»¥å®Œæˆ WHERE ä¸èƒ½å®Œæˆçš„ä»»åŠ¡ã€‚è¿™æ˜¯å› ä¸ºï¼Œåœ¨æŸ¥è¯¢è¯­æ³•ç»“æ„ä¸­ï¼ŒWHERE åœ¨ GROUP BY ä¹‹å‰ï¼Œæ‰€ä»¥æ— æ³•å¯¹åˆ†ç»„ç»“æœè¿›è¡Œç­›é€‰ã€‚HAVING åœ¨ GROUP BY ä¹‹åï¼Œå¯ä»¥ä½¿ç”¨åˆ†ç»„å­—æ®µå’Œåˆ†ç»„ä¸­çš„è®¡ç®—å‡½æ•°ï¼Œå¯¹åˆ†ç»„çš„ç»“æœé›†è¿›è¡Œç­›é€‰ï¼Œè¿™ä¸ªåŠŸèƒ½æ˜¯ WHERE æ— æ³•å®Œæˆçš„ã€‚å¦å¤–ï¼ŒWHEREæ’é™¤çš„è®°å½•ä¸å†åŒ…æ‹¬åœ¨åˆ†ç»„ä¸­ã€‚\nåŒºåˆ«2ï¼šå¦‚æœéœ€è¦é€šè¿‡è¿æ¥ä»å…³è”è¡¨ä¸­è·å–éœ€è¦çš„æ•°æ®ï¼ŒWHERE æ˜¯å…ˆç­›é€‰åè¿æ¥ï¼Œè€Œ HAVING æ˜¯å…ˆè¿æ¥åç­›é€‰ã€‚ è¿™ä¸€ç‚¹ï¼Œå°±å†³å®šäº†åœ¨å…³è”æŸ¥è¯¢ä¸­ï¼ŒWHERE æ¯” HAVING æ›´é«˜æ•ˆã€‚å› ä¸º WHERE å¯ä»¥å…ˆç­›é€‰ï¼Œç”¨ä¸€ä¸ªç­›é€‰åçš„è¾ƒå°æ•°æ®é›†å’Œå…³è”è¡¨è¿›è¡Œè¿æ¥ï¼Œè¿™æ ·å ç”¨çš„èµ„æºæ¯”è¾ƒå°‘ï¼Œæ‰§è¡Œæ•ˆç‡ä¹Ÿæ¯”è¾ƒé«˜ã€‚HAVING åˆ™éœ€è¦å…ˆæŠŠç»“æœé›†å‡†å¤‡å¥½ï¼Œä¹Ÿå°±æ˜¯ç”¨æœªè¢«ç­›é€‰çš„æ•°æ®é›†è¿›è¡Œå…³è”ï¼Œç„¶åå¯¹è¿™ä¸ªå¤§çš„æ•°æ®é›†è¿›è¡Œç­›é€‰ï¼Œè¿™æ ·å ç”¨çš„èµ„æºå°±æ¯”è¾ƒå¤šï¼Œæ‰§è¡Œæ•ˆç‡ä¹Ÿè¾ƒä½ã€‚ \nå°ç»“å¦‚ä¸‹ï¼š\n\n\n\n\n\nä¼˜ç‚¹\nç¼ºç‚¹\n\n\n\n\nWHERE\nå…ˆç­›é€‰æ•°æ®å†å…³è”ï¼Œæ‰§è¡Œæ•ˆç‡é«˜\nä¸èƒ½ä½¿ç”¨åˆ†ç»„ä¸­çš„è®¡ç®—å‡½æ•°è¿›è¡Œç­›é€‰\n\n\nHAVING\nå¯ä»¥ä½¿ç”¨åˆ†ç»„ä¸­çš„è®¡ç®—å‡½æ•°\nåœ¨æœ€åçš„ç»“æœé›†ä¸­è¿›è¡Œç­›é€‰ï¼Œæ‰§è¡Œæ•ˆç‡è¾ƒä½\n\n\n\n\nå¼€å‘ä¸­çš„é€‰æ‹©ï¼š\nWHERE å’Œ HAVING ä¹Ÿä¸æ˜¯äº’ç›¸æ’æ–¥çš„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ªæŸ¥è¯¢é‡Œé¢åŒæ—¶ä½¿ç”¨ WHERE å’Œ HAVINGã€‚åŒ…å«åˆ†ç»„ç»Ÿè®¡å‡½æ•°çš„æ¡ä»¶ç”¨ HAVINGï¼Œæ™®é€šæ¡ä»¶ç”¨ WHEREã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±æ—¢åˆ©ç”¨äº† WHERE æ¡ä»¶çš„é«˜æ•ˆå¿«é€Ÿï¼Œåˆå‘æŒ¥äº† HAVING å¯ä»¥ä½¿ç”¨åŒ…å«åˆ†ç»„ç»Ÿè®¡å‡½æ•°çš„æŸ¥è¯¢æ¡ä»¶çš„ä¼˜ç‚¹ã€‚å½“æ•°æ®é‡ç‰¹åˆ«å¤§çš„æ—¶å€™ï¼Œè¿è¡Œæ•ˆç‡ä¼šæœ‰å¾ˆå¤§çš„å·®åˆ«ã€‚\nè¿æ¥è¡¨jionè”ç»“æ˜¯ä¸€ç§æœºåˆ¶ï¼Œç”¨æ¥åœ¨ä¸€æ¡SELECTè¯­å¥ä¸­å…³è”è¡¨ï¼Œå› æ­¤ç§°ä¹‹ä¸ºè”ç»“ã€‚ä½¿ç”¨ç‰¹æ®Šçš„è¯­æ³•ï¼Œå¯ä»¥è”ç»“å¤šä¸ªè¡¨è¿”å›ä¸€ç»„è¾“å‡ºï¼Œè”ç»“åœ¨è¿è¡Œæ—¶å…³è”è¡¨ä¸­æ­£ç¡®çš„è¡Œã€‚\n#ç­‰å€¼è”ç»“ï¼ˆequijoinï¼‰\nSELECT *\nFROM A,B\nWHERE A.c=B.c;\n\n1.ç­‰å€¼è¿æ¥çš„ç»“æœ = å¤šä¸ªè¡¨çš„äº¤é›†\n2.nè¡¨è¿æ¥ï¼Œè‡³å°‘éœ€è¦n-1ä¸ªè¿æ¥æ¡ä»¶\n3.å¤šä¸ªè¡¨ä¸åˆ†ä¸»æ¬¡ï¼Œæ²¡æœ‰é¡ºåºè¦æ±‚\n4.ä¸€èˆ¬ä¸ºè¡¨èµ·åˆ«åï¼Œæé«˜é˜…è¯»æ€§å’Œæ€§èƒ½\n\n#å†…éƒ¨è”ç»“\nSELECT *\nFROM A INNER JOIN B\nWHERE A.c=B.c;\n#è‡ªç„¶è”ç»“\nSELECT *\nFROM A AS a,A AS b\nWHERE a.c=b.c;\n#å¤–éƒ¨è”ç»“\nSELECT *\nFROM A OUTER JOIN B\nWHERE A.c=B.c;\næ€§èƒ½è€ƒè™‘ MySQLåœ¨è¿è¡Œæ—¶å…³è”æŒ‡å®šçš„æ¯ä¸ªè¡¨ä»¥å¤„ç†è”ç»“ã€‚è¿™ç§å¤„ç†å¯èƒ½æ˜¯éå¸¸è€—è´¹èµ„æºçš„ï¼Œå› æ­¤åº”è¯¥ä»”ç»†ï¼Œä¸è¦è”ç»“ä¸å¿…è¦çš„è¡¨ã€‚è”ç»“çš„è¡¨è¶Šå¤šï¼Œæ€§èƒ½ä¸‹é™è¶Šå‰å®³ã€‚\n\nè‡ªç„¶è”ç»“ï¼šæ— è®ºä½•æ—¶å¯¹è¡¨è¿›è¡Œè”ç»“ï¼Œåº”è¯¥è‡³å°‘æœ‰ä¸€ä¸ªåˆ—å‡ºç°åœ¨ä¸æ­¢ä¸€ä¸ªè¡¨ä¸­ï¼ˆè¢«è”ç»“çš„åˆ—ï¼‰ã€‚è‡ªç„¶è”ç»“æ’é™¤å¤šæ¬¡å‡ºç°ï¼Œä½¿æ¯ä¸ªåˆ—åªè¿”å›ä¸€æ¬¡ã€‚\nå¤–éƒ¨è”ç»“ï¼šè®¸å¤šè”ç»“å°†ä¸€ä¸ªè¡¨ä¸­çš„è¡Œä¸å¦ä¸€ä¸ªè¡¨ä¸­çš„è¡Œç›¸å…³è”ã€‚ä½†æœ‰æ—¶å€™ä¼šéœ€è¦åŒ…å«æ²¡æœ‰å…³è”è¡Œçš„é‚£äº›è¡Œã€‚\n\nsql99è¯­æ³•ï¼šé€šè¿‡joinå…³é”®å­—å®ç°è¿æ¥å«ä¹‰ï¼š1999å¹´æ¨å‡ºçš„sqlè¯­æ³•\næ”¯æŒï¼š\nç­‰å€¼è¿æ¥ã€éç­‰å€¼è¿æ¥ ï¼ˆå†…è¿æ¥ï¼‰\nå¤–è¿æ¥\näº¤å‰è¿æ¥\n\nè¯­æ³•ï¼š\n\nselect å­—æ®µï¼Œ...\nfrom è¡¨1\nã€inner|left outer|right outer|crossã€‘join è¡¨2 on  è¿æ¥æ¡ä»¶\nã€inner|left outer|right outer|crossã€‘join è¡¨3 on  è¿æ¥æ¡ä»¶\nã€where ç­›é€‰æ¡ä»¶ã€‘\nã€group by åˆ†ç»„å­—æ®µã€‘\nã€having åˆ†ç»„åçš„ç­›é€‰æ¡ä»¶ã€‘\nã€order by æ’åºçš„å­—æ®µæˆ–è¡¨è¾¾å¼ã€‘\n\nå¥½å¤„ï¼šè¯­å¥ä¸Šï¼Œè¿æ¥æ¡ä»¶å’Œç­›é€‰æ¡ä»¶å®ç°äº†åˆ†ç¦»ï¼Œç®€æ´æ˜äº†ï¼\nåˆ«åAS:åˆ«åç®€åŒ–ç¼–ç \nSELECT name as n\nFROM papa as p,Baba as b\nWHERE p.c=b.c;\næ»¡å¤–è¿æ¥(FULL OUTER JOIN)\næ»¡å¤–è¿æ¥çš„ç»“æœ = å·¦å³è¡¨åŒ¹é…çš„æ•°æ® + å·¦è¡¨æ²¡æœ‰åŒ¹é…åˆ°çš„æ•°æ® + å³è¡¨æ²¡æœ‰åŒ¹é…åˆ°çš„æ•°æ®ã€‚\nSQL99æ˜¯æ”¯æŒæ»¡å¤–è¿æ¥çš„ã€‚ä½¿ç”¨FULL JOIN æˆ– FULL OUTER JOINæ¥å®ç°ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒMySQLä¸æ”¯æŒFULL JOINï¼Œä½†æ˜¯å¯ä»¥ç”¨ LEFT JOIN UNION RIGHT joinä»£æ›¿ã€‚\n\nUNIONçš„ä½¿ç”¨åˆå¹¶æŸ¥è¯¢ç»“æœåˆ©ç”¨UNIONå…³é”®å­—ï¼Œå¯ä»¥ç»™å‡ºå¤šæ¡SELECTè¯­å¥ï¼Œå¹¶å°†å®ƒä»¬çš„ç»“æœç»„åˆæˆå•ä¸ªç»“æœé›†ã€‚åˆå¹¶æ—¶ï¼Œä¸¤ä¸ªè¡¨å¯¹åº”çš„åˆ—æ•°å’Œæ•°æ®ç±»å‹å¿…é¡»ç›¸åŒï¼Œå¹¶ä¸”ç›¸äº’å¯¹åº”ã€‚å„ä¸ªSELECTè¯­å¥ä¹‹é—´ä½¿ç”¨UNIONæˆ–UNION ALLå…³é”®å­—åˆ†éš”ã€‚\nè¯­æ³•æ ¼å¼ï¼š\nSELECT column,... FROM table1\nUNION [ALL]\nSELECT column,... FROM table2\nUNION æ“ä½œç¬¦è¿”å›ä¸¤ä¸ªæŸ¥è¯¢çš„ç»“æœé›†çš„å¹¶é›†ï¼Œå»é™¤é‡å¤è®°å½•ã€‚\nUNION ALLæ“ä½œç¬¦è¿”å›ä¸¤ä¸ªæŸ¥è¯¢çš„ç»“æœé›†çš„å¹¶é›†ã€‚å¯¹äºä¸¤ä¸ªç»“æœé›†çš„é‡å¤éƒ¨åˆ†ï¼Œä¸å»é‡ã€‚\n\nä»£ç å®ç°#ä¸­å›¾ï¼šå†…è¿æ¥ Aâˆ©B\nSELECT employee_id,last_name,department_name\nFROM employees e JOIN departments d\nON e.`department_id` = d.`department_id`;\n#å·¦ä¸Šå›¾ï¼šå·¦å¤–è¿æ¥\nSELECT employee_id,last_name,department_name\nFROM employees e LEFT JOIN departments d\nON e.`department_id` = d.`department_id`;\n#å³ä¸Šå›¾ï¼šå³å¤–è¿æ¥\nSELECT employee_id,last_name,department_name\nFROM employees e RIGHT JOIN departments d\nON e.`department_id` = d.`department_id`;\n#å·¦ä¸­å›¾ï¼šA - Aâˆ©B\nSELECT employee_id,last_name,department_name\nFROM employees e LEFT JOIN departments d\nON e.`department_id` = d.`department_id`\nWHERE d.`department_id` IS NULL\n#å³ä¸­å›¾ï¼šB-Aâˆ©B\nSELECT employee_id,last_name,department_name\nFROM employees e RIGHT JOIN departments d\nON e.`department_id` = d.`department_id`\nWHERE e.`department_id` IS NULL\n#å·¦ä¸‹å›¾ï¼šæ»¡å¤–è¿æ¥\n# å·¦ä¸­å›¾ + å³ä¸Šå›¾  AâˆªB\nSELECT employee_id,last_name,department_name\nFROM employees e LEFT JOIN departments d\nON e.`department_id` = d.`department_id`\nWHERE d.`department_id` IS NULL\nUNION ALL  #æ²¡æœ‰å»é‡æ“ä½œï¼Œæ•ˆç‡é«˜\nSELECT employee_id,last_name,department_name\nFROM employees e RIGHT JOIN departments d\nON e.`department_id` = d.`department_id`;\n#å³ä¸‹å›¾\n#å·¦ä¸­å›¾ + å³ä¸­å›¾  A âˆªB- Aâˆ©B æˆ–è€… (A -  Aâˆ©B) âˆª ï¼ˆB - Aâˆ©Bï¼‰\nSELECT employee_id,last_name,department_name\nFROM employees e LEFT JOIN departments d\nON e.`department_id` = d.`department_id`\nWHERE d.`department_id` IS NULL\nUNION ALL\nSELECT employee_id,last_name,department_name\nFROM employees e RIGHT JOIN departments d\nON e.`department_id` = d.`department_id`\nWHERE e.`department_id` IS NULL\nSQL99è¯­æ³•æ–°ç‰¹æ€§è‡ªç„¶è¿æ¥SQL99 åœ¨ SQL92 çš„åŸºç¡€ä¸Šæä¾›äº†ä¸€äº›ç‰¹æ®Šè¯­æ³•ï¼Œæ¯”å¦‚ NATURAL JOIN ç”¨æ¥è¡¨ç¤ºè‡ªç„¶è¿æ¥ã€‚æˆ‘ä»¬å¯ä»¥æŠŠè‡ªç„¶è¿æ¥ç†è§£ä¸º SQL92 ä¸­çš„ç­‰å€¼è¿æ¥ã€‚å®ƒä¼šå¸®ä½ è‡ªåŠ¨æŸ¥è¯¢ä¸¤å¼ è¿æ¥è¡¨ä¸­æ‰€æœ‰ç›¸åŒçš„å­—æ®µï¼Œç„¶åè¿›è¡Œç­‰å€¼è¿æ¥ã€‚\nåœ¨SQL92æ ‡å‡†ä¸­ï¼š\nSELECT employee_id,last_name,department_name\nFROM employees e JOIN departments d\nON e.`department_id` = d.`department_id`\nAND e.`manager_id` = d.`manager_id`;\nåœ¨ SQL99 ä¸­ä½ å¯ä»¥å†™æˆï¼š\nSELECT employee_id,last_name,department_name\nFROM employees e NATURAL JOIN departments d;\nUSINGè¿æ¥å½“æˆ‘ä»¬è¿›è¡Œè¿æ¥çš„æ—¶å€™ï¼ŒSQL99è¿˜æ”¯æŒä½¿ç”¨ USING æŒ‡å®šæ•°æ®è¡¨é‡Œçš„åŒåå­—æ®µè¿›è¡Œç­‰å€¼è¿æ¥ã€‚ä½†æ˜¯åªèƒ½é…åˆJOINä¸€èµ·ä½¿ç”¨ã€‚æ¯”å¦‚ï¼š\nSELECT employee_id,last_name,department_name\nFROM employees e JOIN departments d\nUSING (department_id);\nä½ èƒ½çœ‹å‡ºä¸è‡ªç„¶è¿æ¥ NATURAL JOIN ä¸åŒçš„æ˜¯ï¼ŒUSING æŒ‡å®šäº†å…·ä½“çš„ç›¸åŒçš„å­—æ®µåç§°ï¼Œä½ éœ€è¦åœ¨ USING çš„æ‹¬å· () ä¸­å¡«å…¥è¦æŒ‡å®šçš„åŒåå­—æ®µã€‚åŒæ—¶ä½¿ç”¨ JOIN...USING å¯ä»¥ç®€åŒ– JOIN ON çš„ç­‰å€¼è¿æ¥ã€‚å®ƒä¸ä¸‹é¢çš„ SQL æŸ¥è¯¢ç»“æœæ˜¯ç›¸åŒçš„ï¼š\nSELECT employee_id,last_name,department_name\nFROM employees e ,departments d\nWHERE e.department_id = d.department_id;\n åˆ†é¡µæŸ¥è¯¢Limitåº”ç”¨åœºæ™¯ï¼šå®é™…çš„webé¡¹ç›®ä¸­éœ€è¦æ ¹æ®ç”¨æˆ·çš„éœ€æ±‚æäº¤å¯¹åº”çš„åˆ†é¡µæŸ¥è¯¢çš„sqlè¯­å¥\nselect å­—æ®µ|è¡¨è¾¾å¼,...\nfrom è¡¨\nã€where æ¡ä»¶ã€‘\nã€group by åˆ†ç»„å­—æ®µã€‘\nã€having æ¡ä»¶ã€‘\nã€order by æ’åºçš„å­—æ®µã€‘\nlimit ã€èµ·å§‹çš„æ¡ç›®ç´¢å¼•ï¼Œã€‘æ¡ç›®æ•°;\nç‰¹ç‚¹ï¼š\n1.èµ·å§‹æ¡ç›®ç´¢å¼•ä»0å¼€å§‹\n\n2.limitå­å¥æ”¾åœ¨æŸ¥è¯¢è¯­å¥çš„æœ€å\n\n3.å…¬å¼ï¼šselect * from  è¡¨ limit ï¼ˆpage-1ï¼‰*sizePerPage,sizePerPage\nå‡å¦‚:\næ¯é¡µæ˜¾ç¤ºæ¡ç›®æ•°sizePerPage\nè¦æ˜¾ç¤ºçš„é¡µæ•° page\nå­æŸ¥è¯¢å­æŸ¥è¯¢æŒ‡ä¸€ä¸ªæŸ¥è¯¢è¯­å¥åµŒå¥—åœ¨å¦ä¸€ä¸ªæŸ¥è¯¢è¯­å¥å†…éƒ¨çš„æŸ¥è¯¢ï¼Œè¿™ä¸ªç‰¹æ€§ä»MySQL 4.1å¼€å§‹å¼•å…¥ã€‚\nSQL ä¸­å­æŸ¥è¯¢çš„ä½¿ç”¨å¤§å¤§å¢å¼ºäº† SELECT æŸ¥è¯¢çš„èƒ½åŠ›ï¼Œå› ä¸ºå¾ˆå¤šæ—¶å€™æŸ¥è¯¢éœ€è¦ä»ç»“æœé›†ä¸­è·å–æ•°æ®ï¼Œæˆ–è€…éœ€è¦ä»åŒä¸€ä¸ªè¡¨ä¸­å…ˆè®¡ç®—å¾—å‡ºä¸€ä¸ªæ•°æ®ç»“æœï¼Œç„¶åä¸è¿™ä¸ªæ•°æ®ç»“æœï¼ˆå¯èƒ½æ˜¯æŸä¸ªæ ‡é‡ï¼Œä¹Ÿå¯èƒ½æ˜¯æŸä¸ªé›†åˆï¼‰è¿›è¡Œæ¯”è¾ƒã€‚\nSELECT cust_id\nFROM orders\nWHERE order_num IN (SELECT order_num\n                     FROM orderitems\n                     WHERE prod_id = 'TNT2');\n/*\n1ã€å­æŸ¥è¯¢éƒ½æ”¾åœ¨å°æ‹¬å·å†…\n2ã€å­æŸ¥è¯¢å¯ä»¥æ”¾åœ¨fromåé¢ã€selectåé¢ã€whereåé¢ã€havingåé¢ï¼Œä½†ä¸€èˆ¬æ”¾åœ¨æ¡ä»¶çš„å³ä¾§\n3ã€å­æŸ¥è¯¢ä¼˜å…ˆäºä¸»æŸ¥è¯¢æ‰§è¡Œï¼Œä¸»æŸ¥è¯¢ä½¿ç”¨äº†å­æŸ¥è¯¢çš„æ‰§è¡Œç»“æœ\n4ã€å­æŸ¥è¯¢æ ¹æ®æŸ¥è¯¢ç»“æœçš„è¡Œæ•°ä¸åŒåˆ†ä¸ºä»¥ä¸‹ä¸¤ç±»ï¼š\nâ‘  å•è¡Œå­æŸ¥è¯¢\n\tç»“æœé›†åªæœ‰ä¸€è¡Œ\n\tä¸€èˆ¬æ­é…å•è¡Œæ“ä½œç¬¦ä½¿ç”¨ï¼š&gt; &lt; = &lt;&gt; &gt;= &lt;= \n\téæ³•ä½¿ç”¨å­æŸ¥è¯¢çš„æƒ…å†µï¼š\n\taã€å­æŸ¥è¯¢çš„ç»“æœä¸ºä¸€ç»„å€¼\n\tbã€å­æŸ¥è¯¢çš„ç»“æœä¸ºç©º\n\t\nâ‘¡ å¤šè¡Œå­æŸ¥è¯¢\n\tç»“æœé›†æœ‰å¤šè¡Œ\n\tä¸€èˆ¬æ­é…å¤šè¡Œæ“ä½œç¬¦ä½¿ç”¨ï¼šanyã€allã€inã€not in\n\tinï¼š å±äºå­æŸ¥è¯¢ç»“æœä¸­çš„ä»»æ„ä¸€ä¸ªå°±è¡Œ\n\tanyå’Œallå¾€å¾€å¯ä»¥ç”¨å…¶ä»–æŸ¥è¯¢ä»£æ›¿\n\t*/\nå•è¡Œå­æŸ¥è¯¢\n\n\n\nå•è¡Œæ¯”è¾ƒæ“ä½œç¬¦\nå«ä¹‰\n\n\n\n\n=\nequal to\n\n\n&gt;\ngreater than\n\n\n&gt;=\ngreater than or equal to\n\n\n&lt;\nless than\n\n\n&lt;=\nless than or equal to\n\n\n&lt;&gt;\nnot equal to\n\n\n\n\nè¿”å›job_idä¸141å·å‘˜å·¥ç›¸åŒï¼Œsalaryæ¯”143å·å‘˜å·¥å¤šçš„å‘˜å·¥å§“åï¼Œjob_idå’Œå·¥èµ„**\n\n```sql\nSELECT last_name, job_id, salary\nFROM   employees\nWHERE  job_id =  \n                (SELECT job_id\n                 FROM   employees\n                 WHERE  employee_id = 141)\nAND    salary &gt;\n                (SELECT salary\n                 FROM   employees\n                 WHERE  employee_id = 143);\n```\n\n\nå¤šè¡Œå­æŸ¥è¯¢\nä¹Ÿç§°ä¸ºé›†åˆæ¯”è¾ƒå­æŸ¥è¯¢\nå†…æŸ¥è¯¢è¿”å›å¤šè¡Œ\nä½¿ç”¨å¤šè¡Œæ¯”è¾ƒæ“ä½œç¬¦\n\n \n\n\n\nå¤šè¡Œæ¯”è¾ƒæ“ä½œç¬¦\nå«ä¹‰\n\n\n\n\nIN\nç­‰äºåˆ—è¡¨ä¸­çš„ä»»æ„ä¸€ä¸ª\n\n\nANY\néœ€è¦å’Œå•è¡Œæ¯”è¾ƒæ“ä½œç¬¦ä¸€èµ·ä½¿ç”¨ï¼Œå’Œå­æŸ¥è¯¢è¿”å›çš„æŸä¸€ä¸ªå€¼æ¯”è¾ƒ\n\n\nALL\néœ€è¦å’Œå•è¡Œæ¯”è¾ƒæ“ä½œç¬¦ä¸€èµ·ä½¿ç”¨ï¼Œå’Œå­æŸ¥è¯¢è¿”å›çš„æ‰€æœ‰å€¼æ¯”è¾ƒ\n\n\nSOME\nå®é™…ä¸Šæ˜¯ANYçš„åˆ«åï¼Œä½œç”¨ç›¸åŒï¼Œä¸€èˆ¬å¸¸ä½¿ç”¨ANY\n\n\n\n\n\n\n\n\n\n\n\n\n\nä½“ä¼š ANY å’Œ ALL çš„åŒºåˆ«\næŸ¥è¯¢å¹³å‡å·¥èµ„æœ€ä½çš„éƒ¨é—¨id**\n#æ–¹å¼1ï¼š\nSELECT department_id\nFROM employees\nGROUP BY department_id\nHAVING AVG(salary) = (\n\t\t\tSELECT MIN(avg_sal)\n\t\t\tFROM (\n\t\t\t\tSELECT AVG(salary) avg_sal\n\t\t\t\tFROM employees\n\t\t\t\tGROUP BY department_id\n\t\t\t\t) dept_avg_sal\n\t\t\t)\n#æ–¹å¼2ï¼š\nSELECT department_id\nFROM employees\nGROUP BY department_id\nHAVING AVG(salary) &lt;= ALL (\n\t\t\t\tSELECT AVG(salary) avg_sal\n\t\t\t\tFROM employees\n\t\t\t\tGROUP BY department_id\n)\nç›¸å…³å­æŸ¥è¯¢ç›¸å…³å­æŸ¥è¯¢æ‰§è¡Œæµç¨‹å¦‚æœå­æŸ¥è¯¢çš„æ‰§è¡Œä¾èµ–äºå¤–éƒ¨æŸ¥è¯¢ï¼Œé€šå¸¸æƒ…å†µä¸‹éƒ½æ˜¯å› ä¸ºå­æŸ¥è¯¢ä¸­çš„è¡¨ç”¨åˆ°äº†å¤–éƒ¨çš„è¡¨ï¼Œå¹¶è¿›è¡Œäº†æ¡ä»¶å…³è”ï¼Œå› æ­¤æ¯æ‰§è¡Œä¸€æ¬¡å¤–éƒ¨æŸ¥è¯¢ï¼Œå­æŸ¥è¯¢éƒ½è¦é‡æ–°è®¡ç®—ä¸€æ¬¡ï¼Œè¿™æ ·çš„å­æŸ¥è¯¢å°±ç§°ä¹‹ä¸ºå…³è”å­æŸ¥è¯¢ã€‚\nç›¸å…³å­æŸ¥è¯¢æŒ‰ç…§ä¸€è¡Œæ¥ä¸€è¡Œçš„é¡ºåºæ‰§è¡Œï¼Œä¸»æŸ¥è¯¢çš„æ¯ä¸€è¡Œéƒ½æ‰§è¡Œä¸€æ¬¡å­æŸ¥è¯¢ã€‚\n\n\nè¯´æ˜ï¼šå­æŸ¥è¯¢ä¸­ä½¿ç”¨ä¸»æŸ¥è¯¢ä¸­çš„åˆ—\nä»£ç ç¤ºä¾‹é¢˜ç›®ï¼šæŸ¥è¯¢å‘˜å·¥ä¸­å·¥èµ„å¤§äºæœ¬éƒ¨é—¨å¹³å‡å·¥èµ„çš„å‘˜å·¥çš„last_name,salaryå’Œå…¶department_id\næ–¹å¼ä¸€ï¼šç›¸å…³å­æŸ¥è¯¢\n\næ–¹å¼äºŒï¼šåœ¨ FROM ä¸­ä½¿ç”¨å­æŸ¥è¯¢\nSELECT last_name,salary,e1.department_id\nFROM employees e1,(SELECT department_id,AVG(salary) dept_avg_sal FROM employees GROUP BY department_id) e2\nWHERE e1.`department_id` = e2.department_id\nAND e2.dept_avg_sal &lt; e1.`salary`;\n\n\n\n\n\n\n\n\n\nfromå‹çš„å­æŸ¥è¯¢ï¼šå­æŸ¥è¯¢æ˜¯ä½œä¸ºfromçš„ä¸€éƒ¨åˆ†ï¼Œå­æŸ¥è¯¢è¦ç”¨()å¼•èµ·æ¥ï¼Œå¹¶ä¸”è¦ç»™è¿™ä¸ªå­æŸ¥è¯¢å–åˆ«åï¼ŒæŠŠå®ƒå½“æˆä¸€å¼ â€œä¸´æ—¶çš„è™šæ‹Ÿçš„è¡¨â€æ¥ä½¿ç”¨ã€‚\nåœ¨ORDER BY ä¸­ä½¿ç”¨å­æŸ¥è¯¢ï¼š\né¢˜ç›®ï¼šæŸ¥è¯¢å‘˜å·¥çš„id,salary,æŒ‰ç…§department_name æ’åº\nSELECT employee_id,salary\nFROM employees e\nORDER BY (\n\t  SELECT department_name\n\t  FROM departments d\n\t  WHERE e.`department_id` = d.`department_id`\n\t);\né¢˜ç›®ï¼šè‹¥employeesè¡¨ä¸­employee_idä¸job_historyè¡¨ä¸­employee_idç›¸åŒçš„æ•°ç›®ä¸å°äº2ï¼Œè¾“å‡ºè¿™äº›ç›¸åŒidçš„å‘˜å·¥çš„employee_id,last_nameå’Œå…¶job_id\nSELECT e.employee_id, last_name,e.job_id\nFROM   employees e \nWHERE  2 &lt;= (SELECT COUNT(*)\n             FROM   job_history \n             WHERE  employee_id = e.employee_id);\nEXISTS ä¸ NOT EXISTSå…³é”®å­—\nå…³è”å­æŸ¥è¯¢é€šå¸¸ä¹Ÿä¼šå’Œ EXISTSæ“ä½œç¬¦ä¸€èµ·æ¥ä½¿ç”¨ï¼Œç”¨æ¥æ£€æŸ¥åœ¨å­æŸ¥è¯¢ä¸­æ˜¯å¦å­˜åœ¨æ»¡è¶³æ¡ä»¶çš„è¡Œã€‚\nå¦‚æœåœ¨å­æŸ¥è¯¢ä¸­ä¸å­˜åœ¨æ»¡è¶³æ¡ä»¶çš„è¡Œï¼š\næ¡ä»¶è¿”å› FALSE\nç»§ç»­åœ¨å­æŸ¥è¯¢ä¸­æŸ¥æ‰¾\n\n\nå¦‚æœåœ¨å­æŸ¥è¯¢ä¸­å­˜åœ¨æ»¡è¶³æ¡ä»¶çš„è¡Œï¼š\nä¸åœ¨å­æŸ¥è¯¢ä¸­ç»§ç»­æŸ¥æ‰¾\næ¡ä»¶è¿”å› TRUE\n\n\nNOT EXISTSå…³é”®å­—è¡¨ç¤ºå¦‚æœä¸å­˜åœ¨æŸç§æ¡ä»¶ï¼Œåˆ™è¿”å›TRUEï¼Œå¦åˆ™è¿”å›FALSEã€‚\n\né¢˜ç›®ï¼šæŸ¥è¯¢å…¬å¸ç®¡ç†è€…çš„employee_idï¼Œlast_nameï¼Œjob_idï¼Œdepartment_idä¿¡æ¯\næ–¹å¼ä¸€ï¼š\nSELECT employee_id, last_name, job_id, department_id\nFROM   employees e1\nWHERE  EXISTS ( SELECT *\n                 FROM   employees e2\n                 WHERE  e2.manager_id = \n                        e1.employee_id);\næ–¹å¼äºŒï¼šè‡ªè¿æ¥\nSELECT DISTINCT e1.employee_id, e1.last_name, e1.job_id, e1.department_id\nFROM   employees e1 JOIN employees e2\nWHERE e1.employee_id = e2.manager_id;\næ–¹å¼ä¸‰ï¼š\nSELECT employee_id,last_name,job_id,department_id\nFROM employees\nWHERE employee_id IN (\n\t\t     SELECT DISTINCT manager_id\n\t\t     FROM employees\n\t\t     \n\t\t     );\né¢˜ç›®ï¼šæŸ¥è¯¢departmentsè¡¨ä¸­ï¼Œä¸å­˜åœ¨äºemployeesè¡¨ä¸­çš„éƒ¨é—¨çš„department_idå’Œdepartment_name\nSELECT department_id, department_name\nFROM departments d\nWHERE NOT EXISTS (SELECT 'X'\n                  FROM   employees\n                  WHERE  department_id = d.department_id);\n\nç›¸å…³æ›´æ–°UPDATE table1 alias1\nSET    column = (SELECT expression\n                 FROM   table2 alias2\n                 WHERE  alias1.column = alias2.column);\nä½¿ç”¨ç›¸å…³å­æŸ¥è¯¢ä¾æ®ä¸€ä¸ªè¡¨ä¸­çš„æ•°æ®æ›´æ–°å¦ä¸€ä¸ªè¡¨çš„æ•°æ®ã€‚\né¢˜ç›®ï¼šåœ¨employeesä¸­å¢åŠ ä¸€ä¸ªdepartment_nameå­—æ®µï¼Œæ•°æ®ä¸ºå‘˜å·¥å¯¹åº”çš„éƒ¨é—¨åç§°\n# 1ï¼‰\nALTER TABLE employees\nADD(department_name VARCHAR2(14));\n\n# 2ï¼‰\nUPDATE employees e\nSET department_name =  (SELECT department_name \n\t                       FROM   departments d\n\t                       WHERE  e.department_id = d.department_id);\n\nç›¸å…³åˆ é™¤DELETE FROM table1 alias1\nWHERE column operator (SELECT expression\n                       FROM   table2 alias2\n                       WHERE  alias1.column = alias2.column);\nä½¿ç”¨ç›¸å…³å­æŸ¥è¯¢ä¾æ®ä¸€ä¸ªè¡¨ä¸­çš„æ•°æ®åˆ é™¤å¦ä¸€ä¸ªè¡¨çš„æ•°æ®ã€‚\né¢˜ç›®ï¼šåˆ é™¤è¡¨employeesä¸­ï¼Œå…¶ä¸emp_historyè¡¨çš†æœ‰çš„æ•°æ®\nDELETE FROM employees e\nWHERE employee_id in  \n           (SELECT employee_id\n            FROM   emp_history \n            WHERE  employee_id = e.employee_id);\n 4. DMLè¯­è¨€æ•°æ®æ“ä½œè¯­è¨€ï¼šinsertã€updateã€delete\n4.1 æ’å…¥è¯­æ³•ï¼š\ninsert into è¡¨å(å­—æ®µåï¼Œ...)\nvalues(å€¼1ï¼Œ...);\n\n# æ”¯æŒä¸€æ¬¡æ’å…¥å¤šè¡Œï¼Œè¯­æ³•å¦‚ä¸‹ï¼š\ninsert into è¡¨åã€(å­—æ®µå,..)ã€‘ values(å€¼ï¼Œ..),(å€¼ï¼Œ...),...;\n\n#æ”¯æŒå­æŸ¥è¯¢ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š\ninsert into è¡¨å æŸ¥è¯¢è¯­å¥;\n\ninsert into è¡¨å set å­—æ®µ=å€¼,å­—æ®µ=å€¼,...;\nç‰¹ç‚¹ï¼š\n\nå­—æ®µç±»å‹å’Œå€¼ç±»å‹ä¸€è‡´æˆ–å…¼å®¹ï¼Œè€Œä¸”ä¸€ä¸€å¯¹åº”\nå¯ä»¥ä¸ºç©ºçš„å­—æ®µï¼Œå¯ä»¥ä¸ç”¨æ’å…¥å€¼ï¼Œæˆ–ç”¨nullå¡«å……\nä¸å¯ä»¥ä¸ºç©ºçš„å­—æ®µï¼Œå¿…é¡»æ’å…¥å€¼\nå­—æ®µä¸ªæ•°å’Œå€¼çš„ä¸ªæ•°å¿…é¡»ä¸€è‡´\nå­—æ®µå¯ä»¥çœç•¥ï¼Œä½†é»˜è®¤æ‰€æœ‰å­—æ®µï¼Œå¹¶ä¸”é¡ºåºå’Œè¡¨ä¸­çš„å­˜å‚¨é¡ºåºä¸€è‡´\n\n4.2 æ›´æ–°æ•°æ®ä¿®æ”¹å•è¡¨è¯­æ³•ï¼š\nupdate è¡¨å set å­—æ®µ=æ–°å€¼,å­—æ®µ=æ–°å€¼\nã€where æ¡ä»¶ã€‘\nä¿®æ”¹å¤šè¡¨è¯­æ³•ï¼š\nupdate è¡¨1 åˆ«å1,è¡¨2 åˆ«å2\nset å­—æ®µ=æ–°å€¼ï¼Œå­—æ®µ=æ–°å€¼\nwhere è¿æ¥æ¡ä»¶\nand ç­›é€‰æ¡ä»¶\n4.3 åˆ é™¤æ–¹å¼1ï¼šdeleteè¯­å¥å•è¡¨çš„åˆ é™¤ï¼š â˜…\ndelete from è¡¨å ã€where ç­›é€‰æ¡ä»¶ã€‘\nå¤šè¡¨çš„åˆ é™¤ï¼š    delete åˆ«å1ï¼Œåˆ«å2    from è¡¨1 åˆ«å1ï¼Œè¡¨2 åˆ«å2    where è¿æ¥æ¡ä»¶    and ç­›é€‰æ¡ä»¶;\næ–¹å¼2ï¼štruncateè¯­å¥truncate table è¡¨å\nä¸¤ç§æ–¹å¼çš„åŒºåˆ«ã€é¢è¯•é¢˜ã€‘\n#1.truncateä¸èƒ½åŠ whereæ¡ä»¶ï¼Œè€Œdeleteå¯ä»¥åŠ whereæ¡ä»¶\n\n#2.truncateçš„æ•ˆç‡é«˜ä¸€ä¸¢ä¸¢\n\n#3.truncate åˆ é™¤å¸¦è‡ªå¢é•¿çš„åˆ—çš„è¡¨åï¼Œå¦‚æœå†æ’å…¥æ•°æ®ï¼Œæ•°æ®ä»1å¼€å§‹\n#delete åˆ é™¤å¸¦è‡ªå¢é•¿åˆ—çš„è¡¨åï¼Œå¦‚æœå†æ’å…¥æ•°æ®ï¼Œæ•°æ®ä»ä¸Šä¸€æ¬¡çš„æ–­ç‚¹å¤„å¼€å§‹\n\n#4.truncateåˆ é™¤ä¸èƒ½å›æ»šï¼Œdeleteåˆ é™¤å¯ä»¥å›æ»š\nMySQL8æ–°ç‰¹æ€§ï¼šè®¡ç®—åˆ—ä»€ä¹ˆå«è®¡ç®—åˆ—å‘¢ï¼Ÿç®€å•æ¥è¯´å°±æ˜¯æŸä¸€åˆ—çš„å€¼æ˜¯é€šè¿‡åˆ«çš„åˆ—è®¡ç®—å¾—æ¥çš„ã€‚ä¾‹å¦‚ï¼Œaåˆ—å€¼ä¸º1ã€båˆ—å€¼ä¸º2ï¼Œcåˆ—ä¸éœ€è¦æ‰‹åŠ¨æ’å…¥ï¼Œå®šä¹‰a+bçš„ç»“æœä¸ºcçš„å€¼ï¼Œé‚£ä¹ˆcå°±æ˜¯è®¡ç®—åˆ—ï¼Œæ˜¯é€šè¿‡åˆ«çš„åˆ—è®¡ç®—å¾—æ¥çš„ã€‚\nåœ¨MySQL 8.0ä¸­ï¼ŒCREATE TABLE å’Œ ALTER TABLE ä¸­éƒ½æ”¯æŒå¢åŠ è®¡ç®—åˆ—ã€‚ä¸‹é¢ä»¥CREATE TABLEä¸ºä¾‹è¿›è¡Œè®²è§£ã€‚\nä¸¾ä¾‹ï¼šå®šä¹‰æ•°æ®è¡¨tb1ï¼Œç„¶åå®šä¹‰å­—æ®µidã€å­—æ®µaã€å­—æ®µbå’Œå­—æ®µcï¼Œå…¶ä¸­å­—æ®µcä¸ºè®¡ç®—åˆ—ï¼Œç”¨äºè®¡ç®—a+bçš„å€¼ã€‚é¦–å…ˆåˆ›å»ºæµ‹è¯•è¡¨tb1ï¼Œè¯­å¥å¦‚ä¸‹ï¼š\nCREATE TABLE tb1(\nid INT,\na INT,\nb INT,\nc INT GENERATED ALWAYS AS (a + b) VIRTUAL\n);\næ’å…¥æ¼”ç¤ºæ•°æ®ï¼Œè¯­å¥å¦‚ä¸‹ï¼š\nINSERT INTO tb1(a,b) VALUES (100,200);\næŸ¥è¯¢æ•°æ®è¡¨tb1ä¸­çš„æ•°æ®ï¼Œç»“æœå¦‚ä¸‹ï¼š\nmysql&gt; SELECT * FROM tb1;\n+------+------+------+------+\n| id   | a    | b    | c    |\n+------+------+------+------+\n| NULL |  100 |  200 |  300 |\n+------+------+------+------+\n1 row in set (0.00 sec)\næ›´æ–°æ•°æ®ä¸­çš„æ•°æ®ï¼Œè¯­å¥å¦‚ä¸‹ï¼š\nmysql&gt; UPDATE tb1 SET a = 500;\nQuery OK, 0 rows affected (0.00 sec)\nRows matched: 1  Changed: 0  Warnings: 0\n5. DDLè¯­è¨€æ•°æ®å®šä¹‰è¯­è¨€ï¼šcreateã€dropã€alter\n5.1åˆ›å»ºæ•°æ®åº“\næ–¹å¼1ï¼šåˆ›å»ºæ•°æ®åº“\n\nCREATE DATABASE æ•°æ®åº“å; \n\næ–¹å¼2ï¼šåˆ›å»ºæ•°æ®åº“å¹¶æŒ‡å®šå­—ç¬¦é›†\n\nCREATE DATABASE æ•°æ®åº“å CHARACTER SET å­—ç¬¦é›†;\n\næ–¹å¼3ï¼šåˆ¤æ–­æ•°æ®åº“æ˜¯å¦å·²ç»å­˜åœ¨ï¼Œä¸å­˜åœ¨åˆ™åˆ›å»ºæ•°æ®åº“ï¼ˆæ¨èï¼‰\n\nCREATE DATABASE IF NOT EXISTS æ•°æ®åº“å; \nå¦‚æœMySQLä¸­å·²ç»å­˜åœ¨ç›¸å…³çš„æ•°æ®åº“ï¼Œåˆ™å¿½ç•¥åˆ›å»ºè¯­å¥ï¼Œä¸å†åˆ›å»ºæ•°æ®åº“ã€‚\n\n\n\n\n\n\n\n\n\næ³¨æ„ï¼šDATABASE ä¸èƒ½æ”¹åã€‚ä¸€äº›å¯è§†åŒ–å·¥å…·å¯ä»¥æ”¹åï¼Œå®ƒæ˜¯å»ºæ–°åº“ï¼ŒæŠŠæ‰€æœ‰è¡¨å¤åˆ¶åˆ°æ–°åº“ï¼Œå†åˆ æ—§åº“å®Œæˆçš„ã€‚\nä½¿ç”¨æ•°æ®åº“\næŸ¥çœ‹å½“å‰æ‰€æœ‰çš„æ•°æ®åº“\n\nSHOW DATABASES; #æœ‰ä¸€ä¸ªSï¼Œä»£è¡¨å¤šä¸ªæ•°æ®åº“\n\næŸ¥çœ‹å½“å‰æ­£åœ¨ä½¿ç”¨çš„æ•°æ®åº“\n\nSELECT DATABASE();  #ä½¿ç”¨çš„ä¸€ä¸ª mysql ä¸­çš„å…¨å±€å‡½æ•°\n\næŸ¥çœ‹æŒ‡å®šåº“ä¸‹æ‰€æœ‰çš„è¡¨\n\nSHOW TABLES FROM æ•°æ®åº“å;\n\næŸ¥çœ‹æ•°æ®åº“çš„åˆ›å»ºä¿¡æ¯\n\nSHOW CREATE DATABASE æ•°æ®åº“å;\næˆ–è€…ï¼š\nSHOW CREATE DATABASE æ•°æ®åº“å\\G\n\nä½¿ç”¨/åˆ‡æ¢æ•°æ®åº“\n\nUSE æ•°æ®åº“å;\n\n\n\n\n\n\n\n\n\næ³¨æ„ï¼šè¦æ“ä½œè¡¨æ ¼å’Œæ•°æ®ä¹‹å‰å¿…é¡»å…ˆè¯´æ˜æ˜¯å¯¹å“ªä¸ªæ•°æ®åº“è¿›è¡Œæ“ä½œï¼Œå¦åˆ™å°±è¦å¯¹æ‰€æœ‰å¯¹è±¡åŠ ä¸Šâ€œæ•°æ®åº“å.â€ã€‚\nä¿®æ”¹æ•°æ®åº“\næ›´æ”¹æ•°æ®åº“å­—ç¬¦é›†\n\nALTER DATABASE æ•°æ®åº“å CHARACTER SET å­—ç¬¦é›†;  #æ¯”å¦‚ï¼šgbkã€utf8ç­‰\nåˆ é™¤æ•°æ®åº“\næ–¹å¼1ï¼šåˆ é™¤æŒ‡å®šçš„æ•°æ®åº“\n\nDROP DATABASE æ•°æ®åº“å;\n\næ–¹å¼2ï¼šåˆ é™¤æŒ‡å®šçš„æ•°æ®åº“ï¼ˆæ¨èï¼‰\n\nDROP DATABASE IF EXISTS æ•°æ®åº“å;\n5.2 åˆ›å»ºè¡¨ createcreate table è¡¨å(\n  å­—æ®µå å­—æ®µç±»å‹ not null,#éç©º\n  å­—æ®µå å­—æ®µç±»å‹ primary key,#ä¸»é”®\n  å­—æ®µå å­—æ®µç±»å‹ unique,#å”¯ä¸€\n  å­—æ®µå å­—æ®µç±»å‹ default å€¼,#é»˜è®¤\n  constraint çº¦æŸå foreign key(å­—æ®µå) references ä¸»è¡¨ï¼ˆè¢«å¼•ç”¨åˆ—ï¼‰\n)\nCREATE TABLE IF NOT EXISTS stuinfo(\n\tstuId INT,\n\tstuName VARCHAR(20),\n\tgender CHAR,\n\tbornDate DATETIME\n);\nDESC studentinfo;\n\n\n\n\n\næ”¯æŒç±»å‹\nå¯ä»¥èµ·çº¦æŸå\n\n\n\n\nåˆ—çº§çº¦æŸ\né™¤äº†å¤–é”®\nä¸å¯ä»¥\n\n\nè¡¨çº§çº¦æŸ\né™¤äº†éç©ºå’Œé»˜è®¤\nå¯ä»¥ï¼Œä½†å¯¹ä¸»é”®æ— æ•ˆ\n\n\n\n\nåˆ—çº§çº¦æŸå¯ä»¥åœ¨ä¸€ä¸ªå­—æ®µä¸Šè¿½åŠ å¤šä¸ªï¼Œä¸­é—´ç”¨ç©ºæ ¼éš”å¼€ï¼Œæ²¡æœ‰é¡ºåºè¦æ±‚\næ ‡è¯†ç¬¦å‘½åè§„åˆ™\næ•°æ®åº“åã€è¡¨åä¸å¾—è¶…è¿‡30ä¸ªå­—ç¬¦ï¼Œå˜é‡åé™åˆ¶ä¸º29ä¸ª\nå¿…é¡»åªèƒ½åŒ…å« Aâ€“Z, aâ€“z, 0â€“9, _å…±63ä¸ªå­—ç¬¦\næ•°æ®åº“åã€è¡¨åã€å­—æ®µåç­‰å¯¹è±¡åä¸­é—´ä¸è¦åŒ…å«ç©ºæ ¼\nåŒä¸€ä¸ªMySQLè½¯ä»¶ä¸­ï¼Œæ•°æ®åº“ä¸èƒ½åŒåï¼›åŒä¸€ä¸ªåº“ä¸­ï¼Œè¡¨ä¸èƒ½é‡åï¼›åŒä¸€ä¸ªè¡¨ä¸­ï¼Œå­—æ®µä¸èƒ½é‡å\nå¿…é¡»ä¿è¯ä½ çš„å­—æ®µæ²¡æœ‰å’Œä¿ç•™å­—ã€æ•°æ®åº“ç³»ç»Ÿæˆ–å¸¸ç”¨æ–¹æ³•å†²çªã€‚å¦‚æœåšæŒä½¿ç”¨ï¼Œè¯·åœ¨SQLè¯­å¥ä¸­ä½¿ç”¨`ï¼ˆç€é‡å·ï¼‰å¼•èµ·æ¥\nä¿æŒå­—æ®µåå’Œç±»å‹çš„ä¸€è‡´æ€§ï¼šåœ¨å‘½åå­—æ®µå¹¶ä¸ºå…¶æŒ‡å®šæ•°æ®ç±»å‹çš„æ—¶å€™ä¸€å®šè¦ä¿è¯ä¸€è‡´æ€§ï¼Œå‡å¦‚æ•°æ®ç±»å‹åœ¨ä¸€ä¸ªè¡¨é‡Œæ˜¯æ•´æ•°ï¼Œé‚£åœ¨å¦ä¸€ä¸ªè¡¨é‡Œå¯å°±åˆ«å˜æˆå­—ç¬¦å‹äº†\n\nMySQLä¸­çš„æ•°æ®ç±»å‹\n\n\n\nç±»å‹\nç±»å‹ä¸¾ä¾‹\n\n\n\n\næ•´æ•°ç±»å‹\nTINYINTã€SMALLINTã€MEDIUMINTã€INT(æˆ–INTEGER)ã€BIGINT\n\n\næµ®ç‚¹ç±»å‹\nFLOATã€DOUBLE\n\n\nå®šç‚¹æ•°ç±»å‹\nDECIMAL\n\n\nä½ç±»å‹\nBIT\n\n\næ—¥æœŸæ—¶é—´ç±»å‹\nYEARã€TIMEã€DATEã€DATETIMEã€TIMESTAMP\n\n\næ–‡æœ¬å­—ç¬¦ä¸²ç±»å‹\nCHARã€VARCHARã€TINYTEXTã€TEXTã€MEDIUMTEXTã€LONGTEXT\n\n\næšä¸¾ç±»å‹\nENUM\n\n\né›†åˆç±»å‹\nSET\n\n\näºŒè¿›åˆ¶å­—ç¬¦ä¸²ç±»å‹\nBINARYã€VARBINARYã€TINYBLOBã€BLOBã€MEDIUMBLOBã€LONGBLOB\n\n\nJSONç±»å‹\nJSONå¯¹è±¡ã€JSONæ•°ç»„\n\n\nç©ºé—´æ•°æ®ç±»å‹\nå•å€¼ï¼šGEOMETRYã€POINTã€LINESTRINGã€POLYGONï¼›é›†åˆï¼šMULTIPOINTã€MULTILINESTRINGã€MULTIPOLYGONã€GEOMETRYCOLLECTION\n\n\n\n\nå…¶ä¸­ï¼Œå¸¸ç”¨çš„å‡ ç±»ç±»å‹ä»‹ç»å¦‚ä¸‹ï¼š\n\n\n\n\næ•°æ®ç±»å‹\næè¿°\n\n\n\n\nINT\nä»-2^31åˆ°2^31-1çš„æ•´å‹æ•°æ®ã€‚å­˜å‚¨å¤§å°ä¸º 4ä¸ªå­—èŠ‚\n\n\nCHAR(size)\nå®šé•¿å­—ç¬¦æ•°æ®ã€‚è‹¥æœªæŒ‡å®šï¼Œé»˜è®¤ä¸º1ä¸ªå­—ç¬¦ï¼Œæœ€å¤§é•¿åº¦255\n\n\nVARCHAR(size)\nå¯å˜é•¿å­—ç¬¦æ•°æ®ï¼Œæ ¹æ®å­—ç¬¦ä¸²å®é™…é•¿åº¦ä¿å­˜ï¼Œå¿…é¡»æŒ‡å®šé•¿åº¦\n\n\nFLOAT(M,D)\nå•ç²¾åº¦ï¼Œå ç”¨4ä¸ªå­—èŠ‚ï¼ŒM=æ•´æ•°ä½+å°æ•°ä½ï¼ŒD=å°æ•°ä½ã€‚ D&lt;=M&lt;=255,0&lt;=D&lt;=30ï¼Œé»˜è®¤M+D&lt;=6\n\n\nDOUBLE(M,D)\nåŒç²¾åº¦ï¼Œå ç”¨8ä¸ªå­—èŠ‚ï¼ŒD&lt;=M&lt;=255,0&lt;=D&lt;=30ï¼Œé»˜è®¤M+D&lt;=15\n\n\nDECIMAL(M,D)\né«˜ç²¾åº¦å°æ•°ï¼Œå ç”¨M+2ä¸ªå­—èŠ‚ï¼ŒD&lt;=M&lt;=65ï¼Œ0&lt;=D&lt;=30ï¼Œæœ€å¤§å–å€¼èŒƒå›´ä¸DOUBLEç›¸åŒã€‚\n\n\nDATE\næ—¥æœŸå‹æ•°æ®ï¼Œæ ¼å¼â€™YYYY-MM-DDâ€™\n\n\nBLOB\näºŒè¿›åˆ¶å½¢å¼çš„é•¿æ–‡æœ¬æ•°æ®ï¼Œæœ€å¤§å¯è¾¾4G\n\n\nTEXT\né•¿æ–‡æœ¬æ•°æ®ï¼Œæœ€å¤§å¯è¾¾4G\n\n\n\n\nå¸¸è§çº¦æŸ\nNOT NULLï¼šéç©ºï¼Œè¯¥å­—æ®µçš„å€¼å¿…å¡«\nUNIQUEï¼šå”¯ä¸€ï¼Œè¯¥å­—æ®µçš„å€¼ä¸å¯é‡å¤\nDEFAULTï¼šé»˜è®¤ï¼Œè¯¥å­—æ®µçš„å€¼ä¸ç”¨æ‰‹åŠ¨æ’å…¥æœ‰é»˜è®¤å€¼\nCHECKï¼šæ£€æŸ¥ï¼Œmysqlä¸æ”¯æŒ\nPRIMARY KEYï¼šä¸»é”®ï¼Œè¯¥å­—æ®µçš„å€¼ä¸å¯é‡å¤å¹¶ä¸”éç©º unique+not null\nFOREIGN KEYï¼šå¤–é”®ï¼Œè¯¥å­—æ®µçš„å€¼å¼•ç”¨äº†å¦å¤–çš„è¡¨çš„å­—æ®µ\nä¸»é”®å’Œå”¯ä¸€\n1ã€åŒºåˆ«ï¼š\nâ‘ ã€ä¸€ä¸ªè¡¨è‡³å¤šæœ‰ä¸€ä¸ªä¸»é”®ï¼Œä½†å¯ä»¥æœ‰å¤šä¸ªå”¯ä¸€\nâ‘¡ã€ä¸»é”®ä¸å…è®¸ä¸ºç©ºï¼Œå”¯ä¸€å¯ä»¥ä¸ºç©º\n2ã€ç›¸åŒç‚¹\néƒ½å…·æœ‰å”¯ä¸€æ€§ï¼Œéƒ½æ”¯æŒç»„åˆé”®ï¼Œä½†ä¸æ¨è\nå¤–é”®ï¼š\n\nç”¨äºé™åˆ¶ä¸¤ä¸ªè¡¨çš„å…³ç³»ï¼Œä»è¡¨çš„å­—æ®µå€¼å¼•ç”¨äº†ä¸»è¡¨çš„æŸå­—æ®µå€¼\nå¤–é”®åˆ—å’Œä¸»è¡¨çš„è¢«å¼•ç”¨åˆ—è¦æ±‚ç±»å‹ä¸€è‡´ï¼Œæ„ä¹‰ä¸€æ ·ï¼Œåç§°æ— è¦æ±‚\nä¸»è¡¨çš„è¢«å¼•ç”¨åˆ—è¦æ±‚æ˜¯ä¸€ä¸ªkeyï¼ˆä¸€èˆ¬å°±æ˜¯ä¸»é”®ï¼‰\næ’å…¥æ•°æ®ï¼Œå…ˆæ’å…¥ä¸»è¡¨ï¼Œåˆ é™¤æ•°æ®ï¼Œå…ˆåˆ é™¤ä»è¡¨\n\nå¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹å¼æ¥åˆ é™¤ä¸»è¡¨çš„è®°å½•\n#æ–¹å¼ä¸€ï¼šçº§è”åˆ é™¤\nALTER TABLE stuinfo ADD CONSTRAINT fk_stu_major FOREIGN KEY(majorid) REFERENCES major(id) ON DELETE CASCADE;\n\n#æ–¹å¼äºŒï¼šçº§è”ç½®ç©º\nALTER TABLE stuinfo ADD CONSTRAINT fk_stu_major FOREIGN KEY(majorid) REFERENCES major(id) ON DELETE SET NULL;\nè‡ªå¢é•¿åˆ—ç‰¹ç‚¹ï¼š\n\nä¸ç”¨æ‰‹åŠ¨æ’å…¥å€¼ï¼Œå¯ä»¥è‡ªåŠ¨æä¾›åºåˆ—å€¼ï¼Œé»˜è®¤ä»1å¼€å§‹ï¼Œæ­¥é•¿ä¸º1\n\nå¦‚æœè¦æ›´æ”¹èµ·å§‹å€¼ï¼šæ‰‹åŠ¨æ’å…¥å€¼\nå¦‚æœè¦æ›´æ”¹æ­¥é•¿ï¼šæ›´æ”¹ç³»ç»Ÿå˜é‡\nset auto_increment_increment=å€¼;\n\nä¸€ä¸ªè¡¨è‡³å¤šæœ‰ä¸€ä¸ªè‡ªå¢é•¿åˆ—\n\nè‡ªå¢é•¿åˆ—åªèƒ½æ”¯æŒæ•°å€¼å‹\n\nè‡ªå¢é•¿åˆ—å¿…é¡»ä¸ºä¸€ä¸ªkey\n\n\nåˆ›å»ºè¡¨æ—¶è®¾ç½®è‡ªå¢é•¿åˆ—\ncreate table è¡¨(\n\tå­—æ®µå å­—æ®µç±»å‹ çº¦æŸ auto_increment\n)\nä¿®æ”¹è¡¨æ—¶è®¾ç½®è‡ªå¢é•¿åˆ—\nalter table è¡¨ modify column å­—æ®µå å­—æ®µç±»å‹ çº¦æŸ auto_increment\nåˆ é™¤è‡ªå¢é•¿åˆ—\nalter table è¡¨ modify column å­—æ®µå å­—æ®µç±»å‹ çº¦æŸ \n5.3 ä¿®æ”¹è¡¨ alterè¯­æ³•ï¼šALTER TABLE è¡¨å ADD|MODIFY|DROP|CHANGE COLUMN å­—æ®µå ã€å­—æ®µç±»å‹ã€‘;\n\n#ä¿®æ”¹å­—æ®µå\nALTER TABLE studentinfo CHANGE  COLUMN sex gender CHAR;\n\n#ä¿®æ”¹è¡¨å\nALTER TABLE stuinfo RENAME [TO]  studentinfo;\n\n#ä¿®æ”¹å­—æ®µç±»å‹å’Œåˆ—çº§çº¦æŸ\nALTER TABLE studentinfo MODIFY COLUMN borndate DATE ;\n\n#æ·»åŠ å­—æ®µ\nALTER TABLE studentinfo ADD COLUMN email VARCHAR(20) first;\n\n#åˆ é™¤å­—æ®µ\nALTER TABLE studentinfo DROP COLUMN email;\n\n#æ·»åŠ åˆ—\nalter table è¡¨å add column åˆ—å ç±»å‹ ã€first|after å­—æ®µåã€‘;\n\n#ä¿®æ”¹åˆ—å\nalter table è¡¨å change column æ—§åˆ—å æ–°åˆ—å ç±»å‹;\n\n#åˆ é™¤åˆ—\nalter table è¡¨å drop column åˆ—å;\n\nä¿®æ”¹è¡¨æ—¶æ·»åŠ æˆ–åˆ é™¤çº¦æŸ\n1ã€éç©º\næ·»åŠ éç©º\nalter table è¡¨å modify column å­—æ®µå å­—æ®µç±»å‹ not null;\nåˆ é™¤éç©º\nalter table è¡¨å modify column å­—æ®µå å­—æ®µç±»å‹ ;\n\n2ã€é»˜è®¤\næ·»åŠ é»˜è®¤\nalter table è¡¨å modify column å­—æ®µå å­—æ®µç±»å‹ default å€¼;\nåˆ é™¤é»˜è®¤\nalter table è¡¨å modify column å­—æ®µå å­—æ®µç±»å‹ ;\n3ã€ä¸»é”®\næ·»åŠ ä¸»é”®\nalter table è¡¨å addã€ constraint çº¦æŸåã€‘ primary key(å­—æ®µå);\nåˆ é™¤ä¸»é”®\nalter table è¡¨å drop primary key;\n\n4ã€å”¯ä¸€\næ·»åŠ å”¯ä¸€\nalter table è¡¨å addã€ constraint çº¦æŸåã€‘ unique(å­—æ®µå);\nåˆ é™¤å”¯ä¸€\nalter table è¡¨å drop index ç´¢å¼•å;\n5ã€å¤–é”®\næ·»åŠ å¤–é”®\nalter table è¡¨å addã€ constraint çº¦æŸåã€‘ foreign key(å­—æ®µå) references ä¸»è¡¨ï¼ˆè¢«å¼•ç”¨åˆ—ï¼‰;\nåˆ é™¤å¤–é”®\nalter table è¡¨å drop foreign key çº¦æŸå;\n\n5.4 åˆ é™¤è¡¨DROP TABLE [IF EXISTS] studentinfo;\nå¤åˆ¶è¡¨\n\nå¤åˆ¶è¡¨çš„ç»“æ„create table è¡¨å like æ—§è¡¨;\nå¤åˆ¶è¡¨çš„ç»“æ„+æ•°æ®create table è¡¨åselect æŸ¥è¯¢åˆ—è¡¨ from æ—§è¡¨ã€where ç­›é€‰ã€‘;\n\n6. TCLè¯­è¨€äº‹åŠ¡æ§åˆ¶è¯­è¨€ï¼šcommitã€rollback\n6.1 æ•°æ®åº“äº‹åŠ¡å«ä¹‰ï¼šé€šè¿‡ä¸€ç»„é€»è¾‘æ“ä½œå•å…ƒï¼ˆä¸€ç»„DMLâ€”â€”sqlè¯­å¥ï¼‰ï¼Œå°†æ•°æ®ä»ä¸€ç§çŠ¶æ€åˆ‡æ¢åˆ°å¦å¤–ä¸€ç§çŠ¶æ€\nç‰¹ç‚¹ï¼ˆACIDï¼‰ï¼š\n\nåŸå­æ€§ï¼šè¦ä¹ˆéƒ½æ‰§è¡Œï¼Œè¦ä¹ˆéƒ½å›æ»š\nä¸€è‡´æ€§ï¼šä¿è¯æ•°æ®çš„çŠ¶æ€æ“ä½œå‰å’Œæ“ä½œåä¿æŒä¸€è‡´\néš”ç¦»æ€§ï¼šå¤šä¸ªäº‹åŠ¡åŒæ—¶æ“ä½œç›¸åŒæ•°æ®åº“çš„åŒä¸€ä¸ªæ•°æ®æ—¶ï¼Œä¸€ä¸ªäº‹åŠ¡çš„æ‰§è¡Œä¸å—å¦å¤–ä¸€ä¸ªäº‹åŠ¡çš„å¹²æ‰°\næŒä¹…æ€§ï¼šä¸€ä¸ªäº‹åŠ¡ä¸€æ—¦æäº¤ï¼Œåˆ™æ•°æ®å°†æŒä¹…åŒ–åˆ°æœ¬åœ°ï¼Œé™¤éå…¶ä»–äº‹åŠ¡å¯¹å…¶è¿›è¡Œä¿®æ”¹\n\nç›¸å…³æ­¥éª¤ï¼š\nå¼€å¯äº‹åŠ¡\nç¼–å†™äº‹åŠ¡çš„ä¸€ç»„é€»è¾‘æ“ä½œå•å…ƒï¼ˆå¤šæ¡sqlè¯­å¥ï¼‰\næäº¤äº‹åŠ¡æˆ–å›æ»šäº‹åŠ¡\n\näº‹åŠ¡çš„åˆ†ç±»ï¼šéšå¼äº‹åŠ¡ï¼Œæ²¡æœ‰æ˜æ˜¾çš„å¼€å¯å’Œç»“æŸäº‹åŠ¡çš„æ ‡å¿—ï¼Œæ¯”å¦‚ insertã€updateã€deleteè¯­å¥æœ¬èº«å°±æ˜¯ä¸€ä¸ªäº‹åŠ¡\næ˜¾å¼äº‹åŠ¡ï¼Œå…·æœ‰æ˜æ˜¾çš„å¼€å¯å’Œç»“æŸäº‹åŠ¡çš„æ ‡å¿—\n1ã€å¼€å¯äº‹åŠ¡\nå–æ¶ˆè‡ªåŠ¨æäº¤äº‹åŠ¡çš„åŠŸèƒ½\n\n2ã€ç¼–å†™äº‹åŠ¡çš„ä¸€ç»„é€»è¾‘æ“ä½œå•å…ƒï¼ˆå¤šæ¡sqlè¯­å¥ï¼‰\ninsert\nupdate\ndelete\n\n3ã€æäº¤äº‹åŠ¡æˆ–å›æ»šäº‹åŠ¡\nä½¿ç”¨åˆ°çš„å…³é”®å­—set autocommit=0;\nstart transaction;\ncommit;\nrollback;\n\nsavepoint  æ–­ç‚¹\ncommit to æ–­ç‚¹\nrollback to æ–­ç‚¹\näº‹åŠ¡çš„éš”ç¦»çº§åˆ«:äº‹åŠ¡å¹¶å‘é—®é¢˜å¦‚ä½•å‘ç”Ÿï¼Ÿ\n\n\n\n\n\n\n\n\n\nå½“å¤šä¸ªäº‹åŠ¡åŒæ—¶æ“ä½œåŒä¸€ä¸ªæ•°æ®åº“çš„ç›¸åŒæ•°æ®æ—¶\näº‹åŠ¡çš„å¹¶å‘é—®é¢˜æœ‰å“ªäº›ï¼Ÿ\n\n\n\n\n\n\n\n\n\nè„è¯»ï¼šä¸€ä¸ªäº‹åŠ¡è¯»å–åˆ°äº†å¦å¤–ä¸€ä¸ªäº‹åŠ¡æœªæäº¤çš„æ•°æ®ä¸å¯é‡å¤è¯»ï¼šåŒä¸€ä¸ªäº‹åŠ¡ä¸­ï¼Œå¤šæ¬¡è¯»å–åˆ°çš„æ•°æ®ä¸ä¸€è‡´å¹»è¯»ï¼šä¸€ä¸ªäº‹åŠ¡è¯»å–æ•°æ®æ—¶ï¼Œå¦å¤–ä¸€ä¸ªäº‹åŠ¡è¿›è¡Œæ›´æ–°ï¼Œå¯¼è‡´ç¬¬ä¸€ä¸ªäº‹åŠ¡è¯»å–åˆ°äº†æ²¡æœ‰æ›´æ–°çš„æ•°æ®\nå¦‚ä½•é¿å…äº‹åŠ¡çš„å¹¶å‘é—®é¢˜ï¼Ÿ\n\n\n\n\n\n\n\n\n\né€šè¿‡è®¾ç½®äº‹åŠ¡çš„éš”ç¦»çº§åˆ«1ã€READ UNCOMMITTED2ã€READ COMMITTED å¯ä»¥é¿å…è„è¯»3ã€REPEATABLE READ å¯ä»¥é¿å…è„è¯»ã€ä¸å¯é‡å¤è¯»å’Œä¸€éƒ¨åˆ†å¹»è¯»4ã€SERIALIZABLEå¯ä»¥é¿å…è„è¯»ã€ä¸å¯é‡å¤è¯»å’Œå¹»è¯»\nè®¾ç½®éš”ç¦»çº§åˆ«ï¼š\nset session|global  transaction isolation level éš”ç¦»çº§åˆ«å;\næŸ¥çœ‹éš”ç¦»çº§åˆ«ï¼š\nselect @@tx_isolation;\n7. è§†å›¾å«ä¹‰ï¼šç†è§£æˆä¸€å¼ è™šæ‹Ÿçš„è¡¨\nè§†å›¾å’Œè¡¨çš„åŒºåˆ«ï¼š\n\n\n\n\n\nä½¿ç”¨æ–¹å¼\nå ç”¨ç‰©ç†ç©ºé—´\n\n\n\n\nè§†å›¾\nå®Œå…¨ç›¸åŒ\nå ç”¨ç‰©ç†ç©ºé—´\n\n\nè¡¨\nå®Œå…¨ç›¸åŒ\nå ç”¨\n\n\n\n\n\n\n\n\nè§†å›¾çš„å¥½å¤„ï¼š\n\nsqlè¯­å¥æé«˜é‡ç”¨æ€§ï¼Œæ•ˆç‡é«˜\nå’Œè¡¨å®ç°äº†åˆ†ç¦»ï¼Œæé«˜äº†å®‰å…¨æ€§\n\nå¸¸è§çš„æ•°æ®åº“å¯¹è±¡\n\n\n\n\nå¯¹è±¡\næè¿°\n\n\n\n\nè¡¨(TABLE)\nè¡¨æ˜¯å­˜å‚¨æ•°æ®çš„é€»è¾‘å•å…ƒï¼Œä»¥è¡Œå’Œåˆ—çš„å½¢å¼å­˜åœ¨ï¼Œåˆ—å°±æ˜¯å­—æ®µï¼Œè¡Œå°±æ˜¯è®°å½•\n\n\næ•°æ®å­—å…¸\nå°±æ˜¯ç³»ç»Ÿè¡¨ï¼Œå­˜æ”¾æ•°æ®åº“ç›¸å…³ä¿¡æ¯çš„è¡¨ã€‚ç³»ç»Ÿè¡¨çš„æ•°æ®é€šå¸¸ç”±æ•°æ®åº“ç³»ç»Ÿç»´æŠ¤ï¼Œç¨‹åºå‘˜é€šå¸¸ä¸åº”è¯¥ä¿®æ”¹ï¼Œåªå¯æŸ¥çœ‹\n\n\nçº¦æŸ(CONSTRAINT)\næ‰§è¡Œæ•°æ®æ ¡éªŒçš„è§„åˆ™ï¼Œç”¨äºä¿è¯æ•°æ®å®Œæ•´æ€§çš„è§„åˆ™\n\n\nè§†å›¾(VIEW)\nä¸€ä¸ªæˆ–è€…å¤šä¸ªæ•°æ®è¡¨é‡Œçš„æ•°æ®çš„é€»è¾‘æ˜¾ç¤ºï¼Œè§†å›¾å¹¶ä¸å­˜å‚¨æ•°æ®\n\n\nç´¢å¼•(INDEX)\nç”¨äºæé«˜æŸ¥è¯¢æ€§èƒ½ï¼Œç›¸å½“äºä¹¦çš„ç›®å½•\n\n\nå­˜å‚¨è¿‡ç¨‹(PROCEDURE)\nç”¨äºå®Œæˆä¸€æ¬¡å®Œæ•´çš„ä¸šåŠ¡å¤„ç†ï¼Œæ²¡æœ‰è¿”å›å€¼ï¼Œä½†å¯é€šè¿‡ä¼ å‡ºå‚æ•°å°†å¤šä¸ªå€¼ä¼ ç»™è°ƒç”¨ç¯å¢ƒ\n\n\nå­˜å‚¨å‡½æ•°(FUNCTION)\nç”¨äºå®Œæˆä¸€æ¬¡ç‰¹å®šçš„è®¡ç®—ï¼Œå…·æœ‰ä¸€ä¸ªè¿”å›å€¼\n\n\nè§¦å‘å™¨(TRIGGER)\nç›¸å½“äºä¸€ä¸ªäº‹ä»¶ç›‘å¬å™¨ï¼Œå½“æ•°æ®åº“å‘ç”Ÿç‰¹å®šäº‹ä»¶åï¼Œè§¦å‘å™¨è¢«è§¦å‘ï¼Œå®Œæˆç›¸åº”çš„å¤„ç†\n\n\n\n\n 7.1 è§†å›¾çš„åˆ›å»ºã€åˆ é™¤ã€æŸ¥çœ‹CREATE VIEW  è§†å›¾å\nAS\næŸ¥è¯¢è¯­å¥;\n\n#è§†å›¾çš„åˆ é™¤\nDROP VIEW test_v1,test_v2,test_v3;\n\n#è§†å›¾æŸ¥çœ‹\nSHOW TABLES;\n\n###è§†å›¾ç»“æ„çš„æŸ¥çœ‹\t\nDESC test_v7;\nSHOW CREATE VIEW test_v7;\n7.2 è§†å›¾çš„å¢åˆ æ”¹æŸ¥1ã€æŸ¥çœ‹è§†å›¾çš„æ•°æ® â˜…\nSELECT * FROM my_v4;\nSELECT * FROM my_v1 WHERE last_name='Partners';\n\n2ã€æ’å…¥è§†å›¾çš„æ•°æ®\nINSERT INTO my_v4(last_name,department_id) VALUES('è™šç«¹',90);\n\n3ã€ä¿®æ”¹è§†å›¾çš„æ•°æ®\nUPDATE my_v4 SET last_name ='æ¢¦å§‘' WHERE last_name='è™šç«¹';\n\n4ã€åˆ é™¤è§†å›¾çš„æ•°æ®\nDELETE FROM my_v4;\nâ€‹    \n7.3 æŸäº›è§†å›¾ä¸èƒ½æ›´æ–°â€‹    åŒ…å«ä»¥ä¸‹å…³é”®å­—çš„sqlè¯­å¥ï¼š\n\nåˆ†ç»„å‡½æ•°ã€distinctã€group  byã€havingã€unionæˆ–è€…union all\nå¸¸é‡è§†å›¾\nSelectä¸­åŒ…å«å­æŸ¥è¯¢\njoin\nfromä¸€ä¸ªä¸èƒ½æ›´æ–°çš„è§†å›¾\nwhereå­å¥çš„å­æŸ¥è¯¢å¼•ç”¨äº†fromå­å¥ä¸­çš„è¡¨\n\n\n7.4 è§†å›¾é€»è¾‘çš„æ›´æ–°#æ–¹å¼ä¸€ï¼š\nCREATE OR REPLACE VIEW test_v7\nAS\nSELECT last_name FROM employees\nWHERE employee_id&gt;100;\n\n#æ–¹å¼äºŒ:\nALTER VIEW test_v7\nAS\nSELECT employee_id FROM employees;\n\nSELECT * FROM test_v7;\nè§†å›¾ä¼˜ç‚¹1. æ“ä½œç®€å•\nå°†ç»å¸¸ä½¿ç”¨çš„æŸ¥è¯¢æ“ä½œå®šä¹‰ä¸ºè§†å›¾ï¼Œå¯ä»¥ä½¿å¼€å‘äººå‘˜ä¸éœ€è¦å…³å¿ƒè§†å›¾å¯¹åº”çš„æ•°æ®è¡¨çš„ç»“æ„ã€è¡¨ä¸è¡¨ä¹‹é—´çš„å…³è”å…³ç³»ï¼Œä¹Ÿä¸éœ€è¦å…³å¿ƒæ•°æ®è¡¨ä¹‹é—´çš„ä¸šåŠ¡é€»è¾‘å’ŒæŸ¥è¯¢æ¡ä»¶ï¼Œè€Œåªéœ€è¦ç®€å•åœ°æ“ä½œè§†å›¾å³å¯ï¼Œæå¤§ç®€åŒ–äº†å¼€å‘äººå‘˜å¯¹æ•°æ®åº“çš„æ“ä½œã€‚\n2. å‡å°‘æ•°æ®å†—ä½™\nè§†å›¾è·Ÿå®é™…æ•°æ®è¡¨ä¸ä¸€æ ·ï¼Œå®ƒå­˜å‚¨çš„æ˜¯æŸ¥è¯¢è¯­å¥ã€‚æ‰€ä»¥ï¼Œåœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦é€šè¿‡å®šä¹‰è§†å›¾çš„æŸ¥è¯¢è¯­å¥æ¥è·å–ç»“æœé›†ã€‚è€Œè§†å›¾æœ¬èº«ä¸å­˜å‚¨æ•°æ®ï¼Œä¸å ç”¨æ•°æ®å­˜å‚¨çš„èµ„æºï¼Œå‡å°‘äº†æ•°æ®å†—ä½™ã€‚\n3. æ•°æ®å®‰å…¨\nMySQLå°†ç”¨æˆ·å¯¹æ•°æ®çš„è®¿é—®é™åˆ¶åœ¨æŸäº›æ•°æ®çš„ç»“æœé›†ä¸Šï¼Œè€Œè¿™äº›æ•°æ®çš„ç»“æœé›†å¯ä»¥ä½¿ç”¨è§†å›¾æ¥å®ç°ã€‚ç”¨æˆ·ä¸å¿…ç›´æ¥æŸ¥è¯¢æˆ–æ“ä½œæ•°æ®è¡¨ã€‚è¿™ä¹Ÿå¯ä»¥ç†è§£ä¸ºè§†å›¾å…·æœ‰éš”ç¦»æ€§ã€‚è§†å›¾ç›¸å½“äºåœ¨ç”¨æˆ·å’Œå®é™…çš„æ•°æ®è¡¨ä¹‹é—´åŠ äº†ä¸€å±‚è™šæ‹Ÿè¡¨ã€‚\nåŒæ—¶ï¼ŒMySQLå¯ä»¥æ ¹æ®æƒé™å°†ç”¨æˆ·å¯¹æ•°æ®çš„è®¿é—®é™åˆ¶åœ¨æŸäº›è§†å›¾ä¸Šï¼Œç”¨æˆ·ä¸éœ€è¦æŸ¥è¯¢æ•°æ®è¡¨ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡è§†å›¾è·å–æ•°æ®è¡¨ä¸­çš„ä¿¡æ¯ã€‚è¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šä¿éšœäº†æ•°æ®è¡¨ä¸­æ•°æ®çš„å®‰å…¨æ€§ã€‚\n4. é€‚åº”çµæ´»å¤šå˜çš„éœ€æ±‚å½“ä¸šåŠ¡ç³»ç»Ÿçš„éœ€æ±‚å‘ç”Ÿå˜åŒ–åï¼Œå¦‚æœéœ€è¦æ”¹åŠ¨æ•°æ®è¡¨çš„ç»“æ„ï¼Œåˆ™å·¥ä½œé‡ç›¸å¯¹è¾ƒå¤§ï¼Œå¯ä»¥ä½¿ç”¨è§†å›¾æ¥å‡å°‘æ”¹åŠ¨çš„å·¥ä½œé‡ã€‚è¿™ç§æ–¹å¼åœ¨å®é™…å·¥ä½œä¸­ä½¿ç”¨å¾—æ¯”è¾ƒå¤šã€‚\n5. èƒ½å¤Ÿåˆ†è§£å¤æ‚çš„æŸ¥è¯¢é€»è¾‘æ•°æ®åº“ä¸­å¦‚æœå­˜åœ¨å¤æ‚çš„æŸ¥è¯¢é€»è¾‘ï¼Œåˆ™å¯ä»¥å°†é—®é¢˜è¿›è¡Œåˆ†è§£ï¼Œåˆ›å»ºå¤šä¸ªè§†å›¾è·å–æ•°æ®ï¼Œå†å°†åˆ›å»ºçš„å¤šä¸ªè§†å›¾ç»“åˆèµ·æ¥ï¼Œå®Œæˆå¤æ‚çš„æŸ¥è¯¢é€»è¾‘ã€‚\nè§†å›¾ä¸è¶³å¦‚æœæˆ‘ä»¬åœ¨å®é™…æ•°æ®è¡¨çš„åŸºç¡€ä¸Šåˆ›å»ºäº†è§†å›¾ï¼Œé‚£ä¹ˆï¼Œå¦‚æœå®é™…æ•°æ®è¡¨çš„ç»“æ„å˜æ›´äº†ï¼Œæˆ‘ä»¬å°±éœ€è¦åŠæ—¶å¯¹ç›¸å…³çš„è§†å›¾è¿›è¡Œç›¸åº”çš„ç»´æŠ¤ã€‚ç‰¹åˆ«æ˜¯åµŒå¥—çš„è§†å›¾ï¼ˆå°±æ˜¯åœ¨è§†å›¾çš„åŸºç¡€ä¸Šåˆ›å»ºè§†å›¾ï¼‰ï¼Œç»´æŠ¤ä¼šå˜å¾—æ¯”è¾ƒå¤æ‚ï¼Œå¯è¯»æ€§ä¸å¥½ï¼Œå®¹æ˜“å˜æˆç³»ç»Ÿçš„æ½œåœ¨éšæ‚£ã€‚å› ä¸ºåˆ›å»ºè§†å›¾çš„ SQL æŸ¥è¯¢å¯èƒ½ä¼šå¯¹å­—æ®µé‡å‘½åï¼Œä¹Ÿå¯èƒ½åŒ…å«å¤æ‚çš„é€»è¾‘ï¼Œè¿™äº›éƒ½ä¼šå¢åŠ ç»´æŠ¤çš„æˆæœ¬ã€‚\nå®é™…é¡¹ç›®ä¸­ï¼Œå¦‚æœè§†å›¾è¿‡å¤šï¼Œä¼šå¯¼è‡´æ•°æ®åº“ç»´æŠ¤æˆæœ¬çš„é—®é¢˜ã€‚\næ‰€ä»¥ï¼Œåœ¨åˆ›å»ºè§†å›¾çš„æ—¶å€™ï¼Œä½ è¦ç»“åˆå®é™…é¡¹ç›®éœ€æ±‚ï¼Œç»¼åˆè€ƒè™‘è§†å›¾çš„ä¼˜ç‚¹å’Œä¸è¶³ï¼Œè¿™æ ·æ‰èƒ½æ­£ç¡®ä½¿ç”¨è§†å›¾ï¼Œä½¿ç³»ç»Ÿæ•´ä½“è¾¾åˆ°æœ€ä¼˜ã€‚\n8 å­˜å‚¨è¿‡ç¨‹å«ä¹‰ï¼šä¸€ç»„ç»è¿‡é¢„å…ˆç¼–è¯‘çš„sqlè¯­å¥çš„é›†åˆå¥½å¤„ï¼š\n\næé«˜äº†sqlè¯­å¥çš„é‡ç”¨æ€§ï¼Œå‡å°‘äº†å¼€å‘ç¨‹åºå‘˜çš„å‹åŠ›\næé«˜äº†æ•ˆç‡\nå‡å°‘äº†ä¼ è¾“æ¬¡æ•°\n\nåˆ†ç±»ï¼š\n1ã€æ— è¿”å›æ— å‚2ã€ä»…ä»…å¸¦inç±»å‹ï¼Œæ— è¿”å›æœ‰å‚3ã€ä»…ä»…å¸¦outç±»å‹ï¼Œæœ‰è¿”å›æ— å‚4ã€æ—¢å¸¦inåˆå¸¦outï¼Œæœ‰è¿”å›æœ‰å‚5ã€å¸¦inoutï¼Œæœ‰è¿”å›æœ‰å‚æ³¨æ„ï¼šinã€outã€inoutéƒ½å¯ä»¥åœ¨ä¸€ä¸ªå­˜å‚¨è¿‡ç¨‹ä¸­å¸¦å¤šä¸ª\nå’Œè§†å›¾ã€å‡½æ•°çš„å¯¹æ¯”ï¼š\nå®ƒå’Œè§†å›¾æœ‰ç€åŒæ ·çš„ä¼˜ç‚¹ï¼Œæ¸…æ™°ã€å®‰å…¨ï¼Œè¿˜å¯ä»¥å‡å°‘ç½‘ç»œä¼ è¾“é‡ã€‚ä¸è¿‡å®ƒå’Œè§†å›¾ä¸åŒï¼Œè§†å›¾æ˜¯è™šæ‹Ÿè¡¨ï¼Œé€šå¸¸ä¸å¯¹åº•å±‚æ•°æ®è¡¨ç›´æ¥æ“ä½œï¼Œè€Œå­˜å‚¨è¿‡ç¨‹æ˜¯ç¨‹åºåŒ–çš„ SQLï¼Œå¯ä»¥ç›´æ¥æ“ä½œåº•å±‚æ•°æ®è¡¨ï¼Œç›¸æ¯”äºé¢å‘é›†åˆçš„æ“ä½œæ–¹å¼ï¼Œèƒ½å¤Ÿå®ç°ä¸€äº›æ›´å¤æ‚çš„æ•°æ®å¤„ç†ã€‚\nä¸€æ—¦å­˜å‚¨è¿‡ç¨‹è¢«åˆ›å»ºå‡ºæ¥ï¼Œä½¿ç”¨å®ƒå°±åƒä½¿ç”¨å‡½æ•°ä¸€æ ·ç®€å•ï¼Œæˆ‘ä»¬ç›´æ¥é€šè¿‡è°ƒç”¨å­˜å‚¨è¿‡ç¨‹åå³å¯ã€‚ç›¸è¾ƒäºå‡½æ•°ï¼Œå­˜å‚¨è¿‡ç¨‹æ˜¯æ²¡æœ‰è¿”å›å€¼çš„ã€‚\n8.1 åˆ›å»ºå­˜å‚¨è¿‡ç¨‹è¯­æ³•ï¼š\ncreate procedure å­˜å‚¨è¿‡ç¨‹å(in|out|inout å‚æ•°å  å‚æ•°ç±»å‹,...)\nbegin\n\tå­˜å‚¨è¿‡ç¨‹ä½“\nend\nç±»ä¼¼äºæ–¹æ³•ï¼š\nä¿®é¥°ç¬¦ è¿”å›ç±»å‹ æ–¹æ³•å(å‚æ•°ç±»å‹ å‚æ•°å,...){\n\n\tæ–¹æ³•ä½“;\n}\nè¯´æ˜ï¼š\n1ã€å‚æ•°å‰é¢çš„ç¬¦å·çš„æ„æ€\n\nINï¼šå½“å‰å‚æ•°ä¸ºè¾“å…¥å‚æ•°ï¼Œä¹Ÿå°±æ˜¯è¡¨ç¤ºå…¥å‚ï¼›\nå­˜å‚¨è¿‡ç¨‹åªæ˜¯è¯»å–è¿™ä¸ªå‚æ•°çš„å€¼ã€‚å¦‚æœæ²¡æœ‰å®šä¹‰å‚æ•°ç§ç±»ï¼Œé»˜è®¤å°±æ˜¯ INï¼Œè¡¨ç¤ºè¾“å…¥å‚æ•°ã€‚\n\nOUTï¼šå½“å‰å‚æ•°ä¸ºè¾“å‡ºå‚æ•°ï¼Œä¹Ÿå°±æ˜¯è¡¨ç¤ºå‡ºå‚ï¼›\næ‰§è¡Œå®Œæˆä¹‹åï¼Œè°ƒç”¨è¿™ä¸ªå­˜å‚¨è¿‡ç¨‹çš„å®¢æˆ·ç«¯æˆ–è€…åº”ç”¨ç¨‹åºå°±å¯ä»¥è¯»å–è¿™ä¸ªå‚æ•°è¿”å›çš„å€¼äº†ã€‚\n\nINOUTï¼šå½“å‰å‚æ•°æ—¢å¯ä»¥ä¸ºè¾“å…¥å‚æ•°ï¼Œä¹Ÿå¯ä»¥ä¸ºè¾“å‡ºå‚æ•°ã€‚\n\n\n2ã€å½¢å‚ç±»å‹å¯ä»¥æ˜¯ MySQLæ•°æ®åº“ä¸­çš„ä»»æ„ç±»å‹ã€‚\n3ã€characteristics è¡¨ç¤ºåˆ›å»ºå­˜å‚¨è¿‡ç¨‹æ—¶æŒ‡å®šçš„å¯¹å­˜å‚¨è¿‡ç¨‹çš„çº¦æŸæ¡ä»¶ï¼Œå…¶å–å€¼ä¿¡æ¯å¦‚ä¸‹ï¼š\nLANGUAGE SQL\n| [NOT] DETERMINISTIC\n| { CONTAINS SQL | NO SQL | READS SQL DATA | MODIFIES SQL DATA }\n| SQL SECURITY { DEFINER | INVOKER }\n| COMMENT 'string'\n\nLANGUAGE SQLï¼šè¯´æ˜å­˜å‚¨è¿‡ç¨‹æ‰§è¡Œä½“æ˜¯ç”±SQLè¯­å¥ç»„æˆçš„ï¼Œå½“å‰ç³»ç»Ÿæ”¯æŒçš„è¯­è¨€ä¸ºSQLã€‚\n[NOT] DETERMINISTICï¼šæŒ‡æ˜å­˜å‚¨è¿‡ç¨‹æ‰§è¡Œçš„ç»“æœæ˜¯å¦ç¡®å®šã€‚DETERMINISTICè¡¨ç¤ºç»“æœæ˜¯ç¡®å®šçš„ã€‚æ¯æ¬¡æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹æ—¶ï¼Œç›¸åŒçš„è¾“å…¥ä¼šå¾—åˆ°ç›¸åŒçš„è¾“å‡ºã€‚NOT DETERMINISTICè¡¨ç¤ºç»“æœæ˜¯ä¸ç¡®å®šçš„ï¼Œç›¸åŒçš„è¾“å…¥å¯èƒ½å¾—åˆ°ä¸åŒçš„è¾“å‡ºã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šä»»æ„ä¸€ä¸ªå€¼ï¼Œé»˜è®¤ä¸ºNOT DETERMINISTICã€‚\n{ CONTAINS SQL | NO SQL | READS SQL DATA | MODIFIES SQL DATA }ï¼šæŒ‡æ˜å­ç¨‹åºä½¿ç”¨SQLè¯­å¥çš„é™åˆ¶ã€‚\nCONTAINS SQLè¡¨ç¤ºå½“å‰å­˜å‚¨è¿‡ç¨‹çš„å­ç¨‹åºåŒ…å«SQLè¯­å¥ï¼Œä½†æ˜¯å¹¶ä¸åŒ…å«è¯»å†™æ•°æ®çš„SQLè¯­å¥ï¼›\nNO SQLè¡¨ç¤ºå½“å‰å­˜å‚¨è¿‡ç¨‹çš„å­ç¨‹åºä¸­ä¸åŒ…å«ä»»ä½•SQLè¯­å¥ï¼›\nREADS SQL DATAè¡¨ç¤ºå½“å‰å­˜å‚¨è¿‡ç¨‹çš„å­ç¨‹åºä¸­åŒ…å«è¯»æ•°æ®çš„SQLè¯­å¥ï¼›\nMODIFIES SQL DATAè¡¨ç¤ºå½“å‰å­˜å‚¨è¿‡ç¨‹çš„å­ç¨‹åºä¸­åŒ…å«å†™æ•°æ®çš„SQLè¯­å¥ã€‚\né»˜è®¤æƒ…å†µä¸‹ï¼Œç³»ç»Ÿä¼šæŒ‡å®šä¸ºCONTAINS SQLã€‚\n\n\nSQL SECURITY { DEFINER | INVOKER }ï¼šæ‰§è¡Œå½“å‰å­˜å‚¨è¿‡ç¨‹çš„æƒé™ï¼Œå³æŒ‡æ˜å“ªäº›ç”¨æˆ·èƒ½å¤Ÿæ‰§è¡Œå½“å‰å­˜å‚¨è¿‡ç¨‹ã€‚\nDEFINERè¡¨ç¤ºåªæœ‰å½“å‰å­˜å‚¨è¿‡ç¨‹çš„åˆ›å»ºè€…æˆ–è€…å®šä¹‰è€…æ‰èƒ½æ‰§è¡Œå½“å‰å­˜å‚¨è¿‡ç¨‹ï¼›\nINVOKERè¡¨ç¤ºæ‹¥æœ‰å½“å‰å­˜å‚¨è¿‡ç¨‹çš„è®¿é—®æƒé™çš„ç”¨æˆ·èƒ½å¤Ÿæ‰§è¡Œå½“å‰å­˜å‚¨è¿‡ç¨‹ã€‚\nå¦‚æœæ²¡æœ‰è®¾ç½®ç›¸å…³çš„å€¼ï¼Œåˆ™MySQLé»˜è®¤æŒ‡å®šå€¼ä¸ºDEFINERã€‚\n\n\nCOMMENT 'string'ï¼šæ³¨é‡Šä¿¡æ¯ï¼Œå¯ä»¥ç”¨æ¥æè¿°å­˜å‚¨è¿‡ç¨‹ã€‚\n\n4ã€å­˜å‚¨è¿‡ç¨‹ä½“ä¸­å¯ä»¥æœ‰å¤šæ¡ SQL è¯­å¥ï¼Œå¦‚æœä»…ä»…ä¸€æ¡SQL è¯­å¥ï¼Œåˆ™å¯ä»¥çœç•¥ BEGIN å’Œ END\nç¼–å†™å­˜å‚¨è¿‡ç¨‹å¹¶ä¸æ˜¯ä¸€ä»¶ç®€å•çš„äº‹æƒ…ï¼Œå¯èƒ½å­˜å‚¨è¿‡ç¨‹ä¸­éœ€è¦å¤æ‚çš„ SQL è¯­å¥ã€‚\n1. BEGINâ€¦ENDï¼šBEGINâ€¦END ä¸­é—´åŒ…å«äº†å¤šä¸ªè¯­å¥ï¼Œæ¯ä¸ªè¯­å¥éƒ½ä»¥ï¼ˆ;ï¼‰å·ä¸ºç»“æŸç¬¦ã€‚\n2. DECLAREï¼šDECLARE ç”¨æ¥å£°æ˜å˜é‡ï¼Œä½¿ç”¨çš„ä½ç½®åœ¨äº BEGINâ€¦END è¯­å¥ä¸­é—´ï¼Œè€Œä¸”éœ€è¦åœ¨å…¶ä»–è¯­å¥ä½¿ç”¨ä¹‹å‰è¿›è¡Œå˜é‡çš„å£°æ˜ã€‚\n3. SETï¼šèµ‹å€¼è¯­å¥ï¼Œç”¨äºå¯¹å˜é‡è¿›è¡Œèµ‹å€¼ã€‚\n4. SELECTâ€¦ INTOï¼šæŠŠä»æ•°æ®è¡¨ä¸­æŸ¥è¯¢çš„ç»“æœå­˜æ”¾åˆ°å˜é‡ä¸­ï¼Œä¹Ÿå°±æ˜¯ä¸ºå˜é‡èµ‹å€¼ã€‚\n5ã€éœ€è¦è®¾ç½®æ–°çš„ç»“æŸæ ‡è®°\nDELIMITER æ–°çš„ç»“æŸæ ‡è®°\nå› ä¸ºMySQLé»˜è®¤çš„è¯­å¥ç»“æŸç¬¦å·ä¸ºåˆ†å·â€˜;â€™ã€‚ä¸ºäº†é¿å…ä¸å­˜å‚¨è¿‡ç¨‹ä¸­SQLè¯­å¥ç»“æŸç¬¦ç›¸å†²çªï¼Œéœ€è¦ä½¿ç”¨DELIMITERæ”¹å˜å­˜å‚¨è¿‡ç¨‹çš„ç»“æŸç¬¦ã€‚\næ¯”å¦‚ï¼šâ€œDELIMITER //â€è¯­å¥çš„ä½œç”¨æ˜¯å°†MySQLçš„ç»“æŸç¬¦è®¾ç½®ä¸º//ï¼Œå¹¶ä»¥â€œEND //â€ç»“æŸå­˜å‚¨è¿‡ç¨‹ã€‚å­˜å‚¨è¿‡ç¨‹å®šä¹‰å®Œæ¯•ä¹‹åå†ä½¿ç”¨â€œDELIMITER ;â€æ¢å¤é»˜è®¤ç»“æŸç¬¦ã€‚DELIMITERä¹Ÿå¯ä»¥æŒ‡å®šå…¶ä»–ç¬¦å·ä½œä¸ºç»“æŸç¬¦ã€‚\nå½“ä½¿ç”¨DELIMITERå‘½ä»¤æ—¶ï¼Œåº”è¯¥é¿å…ä½¿ç”¨åæ–œæ ï¼ˆâ€˜\\â€™ï¼‰å­—ç¬¦ï¼Œå› ä¸ºåæ–œçº¿æ˜¯MySQLçš„è½¬ä¹‰å­—ç¬¦ã€‚\nç¤ºä¾‹ï¼š\nDELIMITER $\n\nCREATE PROCEDURE å­˜å‚¨è¿‡ç¨‹å(IN|OUT|INOUT å‚æ•°å  å‚æ•°ç±»å‹,...)\n[characteristics ...]\nBEGIN\n\tsqlè¯­å¥1;\n\tsqlè¯­å¥2;\n\nEND $\n8.2 è°ƒç”¨å­˜å‚¨è¿‡ç¨‹call å­˜å‚¨è¿‡ç¨‹å(å®å‚åˆ—è¡¨)\nå­¦è¿‡çš„å‡½æ•°ï¼šLENGTHã€SUBSTRã€CONCATç­‰è¯­æ³•ï¼š\nCREATE FUNCTION å‡½æ•°å(å‚æ•°å å‚æ•°ç±»å‹,...) RETURNS è¿”å›ç±»å‹\nBEGIN\n\tå‡½æ•°ä½“\n\nEND\næ ¼å¼ï¼š\n1ã€è°ƒç”¨inæ¨¡å¼çš„å‚æ•°ï¼š\nCALL sp1('å€¼');\n2ã€è°ƒç”¨outæ¨¡å¼çš„å‚æ•°ï¼š\nSET @name;\nCALL sp1(@name);\nSELECT @name;\n3ã€è°ƒç”¨inoutæ¨¡å¼çš„å‚æ•°ï¼š\nSET @name=å€¼;\nCALL sp1(@name);\nSELECT @name;\n è°ƒç”¨å‡½æ•°ï¼šSELECT å‡½æ•°åï¼ˆå®å‚åˆ—è¡¨ï¼‰\nå‡½æ•°å’Œå­˜å‚¨è¿‡ç¨‹çš„åŒºåˆ«\n\n\n\n\n\nå…³é”®å­—\nè°ƒç”¨è¯­æ³•\nè¿”å›å€¼\nåº”ç”¨åœºæ™¯\n\n\n\n\nå‡½æ•°\nFUNCTION\nSELECT\nåªèƒ½æ˜¯ä¸€ä¸ª\nä¸€èˆ¬ç”¨äºæŸ¥è¯¢ç»“æœä¸ºä¸€ä¸ªå€¼å¹¶è¿”å›æ—¶ï¼Œå½“æœ‰è¿”å›å€¼è€Œä¸”ä»…ä»…ä¸€ä¸ª\n\n\nå­˜å‚¨è¿‡ç¨‹\nPROCEDURE\nCALL\nå¯ä»¥æœ‰0ä¸ªæˆ–å¤šä¸ª\nä¸€èˆ¬ç”¨äºæ›´æ–°\n\n\n\n\n8.3 æŸ¥çœ‹å­˜å‚¨è¿‡ç¨‹show create procedure å­˜å‚¨è¿‡ç¨‹å;\n8.4 åˆ é™¤drop procedure å­˜å‚¨è¿‡ç¨‹å;\nå…³äºå­˜å‚¨è¿‡ç¨‹ä½¿ç”¨çš„äº‰è®®å°½ç®¡å­˜å‚¨è¿‡ç¨‹æœ‰è¯¸å¤šä¼˜ç‚¹ï¼Œä½†æ˜¯å¯¹äºå­˜å‚¨è¿‡ç¨‹çš„ä½¿ç”¨ï¼Œä¸€ç›´éƒ½å­˜åœ¨ç€å¾ˆå¤šäº‰è®®ï¼Œæ¯”å¦‚æœ‰äº›å…¬å¸å¯¹äºå¤§å‹é¡¹ç›®è¦æ±‚ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹ï¼Œè€Œæœ‰äº›å…¬å¸åœ¨æ‰‹å†Œä¸­æ˜ç¡®ç¦æ­¢ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹ï¼Œä¸ºä»€ä¹ˆè¿™äº›å…¬å¸å¯¹å­˜å‚¨è¿‡ç¨‹çš„ä½¿ç”¨éœ€æ±‚å·®åˆ«è¿™ä¹ˆå¤§å‘¢ï¼Ÿ\n6.1 ä¼˜ç‚¹1ã€å­˜å‚¨è¿‡ç¨‹å¯ä»¥ä¸€æ¬¡ç¼–è¯‘å¤šæ¬¡ä½¿ç”¨ã€‚å­˜å‚¨è¿‡ç¨‹åªåœ¨åˆ›å»ºæ—¶è¿›è¡Œç¼–è¯‘ï¼Œä¹‹åçš„ä½¿ç”¨éƒ½ä¸éœ€è¦é‡æ–°ç¼–è¯‘ï¼Œè¿™å°±æå‡äº† SQL çš„æ‰§è¡Œæ•ˆç‡ã€‚\n2ã€å¯ä»¥å‡å°‘å¼€å‘å·¥ä½œé‡ã€‚å°†ä»£ç å°è£…æˆæ¨¡å—ï¼Œå®é™…ä¸Šæ˜¯ç¼–ç¨‹çš„æ ¸å¿ƒæ€æƒ³ä¹‹ä¸€ï¼Œè¿™æ ·å¯ä»¥æŠŠå¤æ‚çš„é—®é¢˜æ‹†è§£æˆä¸åŒçš„æ¨¡å—ï¼Œç„¶åæ¨¡å—ä¹‹é—´å¯ä»¥é‡å¤ä½¿ç”¨ï¼Œåœ¨å‡å°‘å¼€å‘å·¥ä½œé‡çš„åŒæ—¶ï¼Œè¿˜èƒ½ä¿è¯ä»£ç çš„ç»“æ„æ¸…æ™°ã€‚\n3ã€å­˜å‚¨è¿‡ç¨‹çš„å®‰å…¨æ€§å¼ºã€‚æˆ‘ä»¬åœ¨è®¾å®šå­˜å‚¨è¿‡ç¨‹çš„æ—¶å€™å¯ä»¥è®¾ç½®å¯¹ç”¨æˆ·çš„ä½¿ç”¨æƒé™ï¼Œè¿™æ ·å°±å’Œè§†å›¾ä¸€æ ·å…·æœ‰è¾ƒå¼ºçš„å®‰å…¨æ€§ã€‚\n4ã€å¯ä»¥å‡å°‘ç½‘ç»œä¼ è¾“é‡ã€‚å› ä¸ºä»£ç å°è£…åˆ°å­˜å‚¨è¿‡ç¨‹ä¸­ï¼Œæ¯æ¬¡ä½¿ç”¨åªéœ€è¦è°ƒç”¨å­˜å‚¨è¿‡ç¨‹å³å¯ï¼Œè¿™æ ·å°±å‡å°‘äº†ç½‘ç»œä¼ è¾“é‡ã€‚\n5ã€è‰¯å¥½çš„å°è£…æ€§ã€‚åœ¨è¿›è¡Œç›¸å¯¹å¤æ‚çš„æ•°æ®åº“æ“ä½œæ—¶ï¼ŒåŸæœ¬éœ€è¦ä½¿ç”¨ä¸€æ¡ä¸€æ¡çš„ SQL è¯­å¥ï¼Œå¯èƒ½è¦è¿æ¥å¤šæ¬¡æ•°æ®åº“æ‰èƒ½å®Œæˆçš„æ“ä½œï¼Œç°åœ¨å˜æˆäº†ä¸€æ¬¡å­˜å‚¨è¿‡ç¨‹ï¼Œåªéœ€è¦è¿æ¥ä¸€æ¬¡å³å¯ã€‚\n6.2 ç¼ºç‚¹åŸºäºä¸Šé¢è¿™äº›ä¼˜ç‚¹ï¼Œä¸å°‘å¤§å…¬å¸éƒ½è¦æ±‚å¤§å‹é¡¹ç›®ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹ï¼Œæ¯”å¦‚å¾®è½¯ã€IBM ç­‰å…¬å¸ã€‚ä½†æ˜¯å›½å†…çš„é˜¿é‡Œå¹¶ä¸æ¨èå¼€å‘äººå‘˜ä½¿ç”¨å­˜å‚¨è¿‡ç¨‹ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ\n\n\n\n\n\n\n\n\n\n \nç¬¬13ç« _çº¦æŸè®²å¸ˆï¼šå°šç¡…è°·-å®‹çº¢åº·ï¼ˆæ±Ÿæ¹–äººç§°ï¼šåº·å¸ˆå‚…ï¼‰\nå®˜ç½‘ï¼šhttp://www.atguigu.com\n\n1. çº¦æŸ(constraint)æ¦‚è¿°1.1 ä¸ºä»€ä¹ˆéœ€è¦çº¦æŸæ•°æ®å®Œæ•´æ€§ï¼ˆData Integrityï¼‰æ˜¯æŒ‡æ•°æ®çš„ç²¾ç¡®æ€§ï¼ˆAccuracyï¼‰å’Œå¯é æ€§ï¼ˆReliabilityï¼‰ã€‚å®ƒæ˜¯é˜²æ­¢æ•°æ®åº“ä¸­å­˜åœ¨ä¸ç¬¦åˆè¯­ä¹‰è§„å®šçš„æ•°æ®å’Œé˜²æ­¢å› é”™è¯¯ä¿¡æ¯çš„è¾“å…¥è¾“å‡ºé€ æˆæ— æ•ˆæ“ä½œæˆ–é”™è¯¯ä¿¡æ¯è€Œæå‡ºçš„ã€‚\nä¸ºäº†ä¿è¯æ•°æ®çš„å®Œæ•´æ€§ï¼ŒSQLè§„èŒƒä»¥çº¦æŸçš„æ–¹å¼å¯¹è¡¨æ•°æ®è¿›è¡Œé¢å¤–çš„æ¡ä»¶é™åˆ¶ã€‚ä»ä»¥ä¸‹å››ä¸ªæ–¹é¢è€ƒè™‘ï¼š\n\nå®ä½“å®Œæ•´æ€§ï¼ˆEntity Integrityï¼‰ï¼šä¾‹å¦‚ï¼ŒåŒä¸€ä¸ªè¡¨ä¸­ï¼Œä¸èƒ½å­˜åœ¨ä¸¤æ¡å®Œå…¨ç›¸åŒæ— æ³•åŒºåˆ†çš„è®°å½•\nåŸŸå®Œæ•´æ€§ï¼ˆDomain Integrityï¼‰ï¼šä¾‹å¦‚ï¼šå¹´é¾„èŒƒå›´0-120ï¼Œæ€§åˆ«èŒƒå›´â€œç”·/å¥³â€\nå¼•ç”¨å®Œæ•´æ€§ï¼ˆReferential Integrityï¼‰ï¼šä¾‹å¦‚ï¼šå‘˜å·¥æ‰€åœ¨éƒ¨é—¨ï¼Œåœ¨éƒ¨é—¨è¡¨ä¸­è¦èƒ½æ‰¾åˆ°è¿™ä¸ªéƒ¨é—¨\nç”¨æˆ·è‡ªå®šä¹‰å®Œæ•´æ€§ï¼ˆUser-defined Integrityï¼‰ï¼šä¾‹å¦‚ï¼šç”¨æˆ·åå”¯ä¸€ã€å¯†ç ä¸èƒ½ä¸ºç©ºç­‰ï¼Œæœ¬éƒ¨é—¨ç»ç†çš„å·¥èµ„ä¸å¾—é«˜äºæœ¬éƒ¨é—¨èŒå·¥çš„å¹³å‡å·¥èµ„çš„5å€ã€‚\n\n1.2 ä»€ä¹ˆæ˜¯çº¦æŸçº¦æŸæ˜¯è¡¨çº§çš„å¼ºåˆ¶è§„å®šã€‚\nå¯ä»¥åœ¨åˆ›å»ºè¡¨æ—¶è§„å®šçº¦æŸï¼ˆé€šè¿‡ CREATE TABLE è¯­å¥ï¼‰ï¼Œæˆ–è€…åœ¨è¡¨åˆ›å»ºä¹‹åé€šè¿‡ ALTER TABLE è¯­å¥è§„å®šçº¦æŸã€‚\n1.3 çº¦æŸçš„åˆ†ç±»\næ ¹æ®çº¦æŸæ•°æ®åˆ—çš„é™åˆ¶ï¼Œçº¦æŸå¯åˆ†ä¸ºï¼š\nå•åˆ—çº¦æŸï¼šæ¯ä¸ªçº¦æŸåªçº¦æŸä¸€åˆ—\nå¤šåˆ—çº¦æŸï¼šæ¯ä¸ªçº¦æŸå¯çº¦æŸå¤šåˆ—æ•°æ®\n\n\næ ¹æ®çº¦æŸçš„ä½œç”¨èŒƒå›´ï¼Œçº¦æŸå¯åˆ†ä¸ºï¼š\nåˆ—çº§çº¦æŸï¼šåªèƒ½ä½œç”¨åœ¨ä¸€ä¸ªåˆ—ä¸Šï¼Œè·Ÿåœ¨åˆ—çš„å®šä¹‰åé¢\nè¡¨çº§çº¦æŸï¼šå¯ä»¥ä½œç”¨åœ¨å¤šä¸ªåˆ—ä¸Šï¼Œä¸ä¸åˆ—ä¸€èµ·ï¼Œè€Œæ˜¯å•ç‹¬å®šä¹‰\n\n\n\n\t\t\tä½ç½®\t\t\tæ”¯æŒçš„çº¦æŸç±»å‹\t\t\t\t\tæ˜¯å¦å¯ä»¥èµ·çº¦æŸå\nåˆ—çº§çº¦æŸï¼š\tåˆ—çš„åé¢\t\tè¯­æ³•éƒ½æ”¯æŒï¼Œä½†å¤–é”®æ²¡æœ‰æ•ˆæœ\t\tä¸å¯ä»¥\nè¡¨çº§çº¦æŸï¼š\tæ‰€æœ‰åˆ—çš„ä¸‹é¢\t   é»˜è®¤å’Œéç©ºä¸æ”¯æŒï¼Œå…¶ä»–æ”¯æŒ\t   å¯ä»¥ï¼ˆä¸»é”®æ²¡æœ‰æ•ˆæœï¼‰\n\næ ¹æ®çº¦æŸèµ·çš„ä½œç”¨ï¼Œçº¦æŸå¯åˆ†ä¸ºï¼š\nNOT NULL éç©ºçº¦æŸï¼Œè§„å®šæŸä¸ªå­—æ®µä¸èƒ½ä¸ºç©º\nUNIQUE  å”¯ä¸€çº¦æŸï¼Œè§„å®šæŸä¸ªå­—æ®µåœ¨æ•´ä¸ªè¡¨ä¸­æ˜¯å”¯ä¸€çš„\nPRIMARY KEY  ä¸»é”®(éç©ºä¸”å”¯ä¸€)çº¦æŸ\nFOREIGN KEY  å¤–é”®çº¦æŸ\nCHECK  æ£€æŸ¥çº¦æŸ\nDEFAULT  é»˜è®¤å€¼çº¦æŸ\n\n\n\n\næ³¨æ„ï¼š MySQLä¸æ”¯æŒcheckçº¦æŸï¼Œä½†å¯ä»¥ä½¿ç”¨checkçº¦æŸï¼Œè€Œæ²¡æœ‰ä»»ä½•æ•ˆæœ\n\næŸ¥çœ‹æŸä¸ªè¡¨å·²æœ‰çš„çº¦æŸ\n\n#information_schemaæ•°æ®åº“åï¼ˆç³»ç»Ÿåº“ï¼‰\n#table_constraintsè¡¨åç§°ï¼ˆä¸“é—¨å­˜å‚¨å„ä¸ªè¡¨çš„çº¦æŸï¼‰\nSELECT * FROM information_schema.table_constraints \nWHERE table_name = 'è¡¨åç§°';\n2. éç©ºçº¦æŸ2.1 ä½œç”¨é™å®šæŸä¸ªå­—æ®µ/æŸåˆ—çš„å€¼ä¸å…è®¸ä¸ºç©º\n\n2.2 å…³é”®å­—NOT NULL\n2.3 ç‰¹ç‚¹\né»˜è®¤ï¼Œæ‰€æœ‰çš„ç±»å‹çš„å€¼éƒ½å¯ä»¥æ˜¯NULLï¼ŒåŒ…æ‹¬INTã€FLOATç­‰æ•°æ®ç±»å‹\néç©ºçº¦æŸåªèƒ½å‡ºç°åœ¨è¡¨å¯¹è±¡çš„åˆ—ä¸Šï¼Œåªèƒ½æŸä¸ªåˆ—å•ç‹¬é™å®šéç©ºï¼Œä¸èƒ½ç»„åˆéç©º\n\nä¸€ä¸ªè¡¨å¯ä»¥æœ‰å¾ˆå¤šåˆ—éƒ½åˆ†åˆ«é™å®šäº†éç©º\n\nç©ºå­—ç¬¦ä¸²â€™â€™ä¸ç­‰äºNULLï¼Œ0ä¹Ÿä¸ç­‰äºNULL\n\n\n2.4 æ·»åŠ éç©ºçº¦æŸï¼ˆ1ï¼‰å»ºè¡¨æ—¶\nCREATE TABLE è¡¨åç§°(\n\tå­—æ®µå  æ•°æ®ç±»å‹,\n    å­—æ®µå  æ•°æ®ç±»å‹ NOT NULL,  \n    å­—æ®µå  æ•°æ®ç±»å‹ NOT NULL\n);\nä¸¾ä¾‹ï¼š\nCREATE TABLE emp(\nid INT(10) NOT NULL,\nNAME VARCHAR(20) NOT NULL,\nsex CHAR NULL\n);\nCREATE TABLE student(\n\tsid int,\n    sname varchar(20) not null,\n    tel char(11) ,\n    cardid char(18) not null\n);\ninsert into student values(1,'å¼ ä¸‰','13710011002','110222198912032545'); #æˆåŠŸ\n\ninsert into student values(2,'æå››','13710011002',null);#èº«ä»½è¯å·ä¸ºç©º\nERROR 1048 (23000): Column 'cardid' cannot be null\n\ninsert into student values(2,'æå››',null,'110222198912032546');#æˆåŠŸï¼Œtelå…è®¸ä¸ºç©º\n\ninsert into student values(3,null,null,'110222198912032547');#å¤±è´¥\nERROR 1048 (23000): Column 'sname' cannot be null\nï¼ˆ2ï¼‰å»ºè¡¨å\nalter table è¡¨åç§° modify å­—æ®µå æ•°æ®ç±»å‹ not null;\nä¸¾ä¾‹ï¼š\nALTER TABLE emp\nMODIFY sex VARCHAR(30) NOT NULL;\nalter table student modify sname varchar(20) not null;\n2.5 åˆ é™¤éç©ºçº¦æŸalter table è¡¨åç§° modify å­—æ®µå æ•°æ®ç±»å‹ NULL;#å»æ‰not nullï¼Œç›¸å½“äºä¿®æ”¹æŸä¸ªéæ³¨è§£å­—æ®µï¼Œè¯¥å­—æ®µå…è®¸ä¸ºç©º\n\næˆ– \n\nalter table è¡¨åç§° modify å­—æ®µå æ•°æ®ç±»å‹;#å»æ‰not nullï¼Œç›¸å½“äºä¿®æ”¹æŸä¸ªéæ³¨è§£å­—æ®µï¼Œè¯¥å­—æ®µå…è®¸ä¸ºç©º\nä¸¾ä¾‹ï¼š\nALTER TABLE emp\nMODIFY sex VARCHAR(30) NULL;\nALTER TABLE emp\nMODIFY NAME VARCHAR(15) DEFAULT 'abc' NULL;\n3. å”¯ä¸€æ€§çº¦æŸ3.1 ä½œç”¨ç”¨æ¥é™åˆ¶æŸä¸ªå­—æ®µ/æŸåˆ—çš„å€¼ä¸èƒ½é‡å¤ã€‚\n \n3.2 å…³é”®å­—UNIQUE\n3.3 ç‰¹ç‚¹\nåŒä¸€ä¸ªè¡¨å¯ä»¥æœ‰å¤šä¸ªå”¯ä¸€çº¦æŸã€‚\nå”¯ä¸€çº¦æŸå¯ä»¥æ˜¯æŸä¸€ä¸ªåˆ—çš„å€¼å”¯ä¸€ï¼Œä¹Ÿå¯ä»¥å¤šä¸ªåˆ—ç»„åˆçš„å€¼å”¯ä¸€ã€‚\nå”¯ä¸€æ€§çº¦æŸå…è®¸åˆ—å€¼ä¸ºç©ºã€‚\nåœ¨åˆ›å»ºå”¯ä¸€çº¦æŸçš„æ—¶å€™ï¼Œå¦‚æœä¸ç»™å”¯ä¸€çº¦æŸå‘½åï¼Œå°±é»˜è®¤å’Œåˆ—åç›¸åŒã€‚\nMySQLä¼šç»™å”¯ä¸€çº¦æŸçš„åˆ—ä¸Šé»˜è®¤åˆ›å»ºä¸€ä¸ªå”¯ä¸€ç´¢å¼•ã€‚\n\n3.4 æ·»åŠ å”¯ä¸€çº¦æŸï¼ˆ1ï¼‰å»ºè¡¨æ—¶\ncreate table è¡¨åç§°(\n\tå­—æ®µå  æ•°æ®ç±»å‹,\n    å­—æ®µå  æ•°æ®ç±»å‹  unique,  \n    å­—æ®µå  æ•°æ®ç±»å‹  unique key,\n    å­—æ®µå  æ•°æ®ç±»å‹\n);\ncreate table è¡¨åç§°(\n\tå­—æ®µå  æ•°æ®ç±»å‹,\n    å­—æ®µå  æ•°æ®ç±»å‹,  \n    å­—æ®µå  æ•°æ®ç±»å‹,\n    [constraint çº¦æŸå] unique key(å­—æ®µå)\n);\nä¸¾ä¾‹ï¼š\ncreate table student(\n\tsid int,\n    sname varchar(20),\n    tel char(11) unique,\n    cardid char(18) unique key\n);\nCREATE TABLE t_course(\n\tcid INT UNIQUE,\n\tcname VARCHAR(100) UNIQUE,\n\tdescription VARCHAR(200)\n);\n\nCREATE TABLE USER(\n id INT NOT NULL,\n NAME VARCHAR(25),\n PASSWORD VARCHAR(16),\n -- ä½¿ç”¨è¡¨çº§çº¦æŸè¯­æ³•\n CONSTRAINT uk_name_pwd UNIQUE(NAME,PASSWORD)\n);\n\n\n\n\n\n\n\n\n\nè¡¨ç¤ºç”¨æˆ·åå’Œå¯†ç ç»„åˆä¸èƒ½é‡å¤\ninsert into student values(1,'å¼ ä¸‰','13710011002','101223199012015623');\ninsert into student values(2,'æå››','13710011003','101223199012015624');\nmysql&gt; select * from student;\n+-----+-------+-------------+--------------------+\n| sid | sname | tel         | cardid             |\n+-----+-------+-------------+--------------------+\n|   1 | å¼ ä¸‰  | 13710011002 | 101223199012015623 |\n|   2 | æå››  | 13710011003 | 101223199012015624 |\n+-----+-------+-------------+--------------------+\n2 rows in set (0.00 sec)\ninsert into student values(3,'ç‹äº”','13710011004','101223199012015624'); #èº«ä»½è¯å·é‡å¤\nERROR 1062 (23000): Duplicate entry '101223199012015624' for key 'cardid'\n\ninsert into student values(3,'ç‹äº”','13710011003','101223199012015625'); \nERROR 1062 (23000): Duplicate entry '13710011003' for key 'tel'\nï¼ˆ2ï¼‰å»ºè¡¨åæŒ‡å®šå”¯ä¸€é”®çº¦æŸ\n#å­—æ®µåˆ—è¡¨ä¸­å¦‚æœæ˜¯ä¸€ä¸ªå­—æ®µï¼Œè¡¨ç¤ºè¯¥åˆ—çš„å€¼å”¯ä¸€ã€‚å¦‚æœæ˜¯ä¸¤ä¸ªæˆ–æ›´å¤šä¸ªå­—æ®µï¼Œé‚£ä¹ˆå¤åˆå”¯ä¸€ï¼Œå³å¤šä¸ªå­—æ®µçš„ç»„åˆæ˜¯å”¯ä¸€çš„\n#æ–¹å¼1ï¼š\nalter table è¡¨åç§° add unique key(å­—æ®µåˆ—è¡¨); \n#æ–¹å¼2ï¼š\nalter table è¡¨åç§° modify å­—æ®µå å­—æ®µç±»å‹ unique;\nä¸¾ä¾‹ï¼š\nALTER TABLE USER \nADD UNIQUE(NAME,PASSWORD);\nALTER TABLE USER \nADD CONSTRAINT uk_name_pwd UNIQUE(NAME,PASSWORD);\nALTER TABLE USER \nMODIFY NAME VARCHAR(20) UNIQUE;\nä¸¾ä¾‹ï¼š\ncreate table student(\n\tsid int primary key,\n    sname varchar(20),\n    tel char(11) ,\n    cardid char(18) \n);\nalter table student add unique key(tel);\nalter table student add unique key(cardid);\n3.5 å…³äºå¤åˆå”¯ä¸€çº¦æŸcreate table è¡¨åç§°(\n\tå­—æ®µå  æ•°æ®ç±»å‹,\n    å­—æ®µå  æ•°æ®ç±»å‹,  \n    å­—æ®µå  æ•°æ®ç±»å‹,\n    unique key(å­—æ®µåˆ—è¡¨) #å­—æ®µåˆ—è¡¨ä¸­å†™çš„æ˜¯å¤šä¸ªå­—æ®µåï¼Œå¤šä¸ªå­—æ®µåç”¨é€—å·åˆ†éš”ï¼Œè¡¨ç¤ºé‚£ä¹ˆæ˜¯å¤åˆå”¯ä¸€ï¼Œå³å¤šä¸ªå­—æ®µçš„ç»„åˆæ˜¯å”¯ä¸€çš„\n);\n#å­¦ç”Ÿè¡¨\ncreate table student(\n\tsid int,\t#å­¦å·\n    sname varchar(20),\t\t\t#å§“å\n    tel char(11) unique key,  #ç”µè¯\n    cardid char(18) unique key #èº«ä»½è¯å·\n);\n\n#è¯¾ç¨‹è¡¨\ncreate table course(\n\tcid int,  #è¯¾ç¨‹ç¼–å·\n    cname varchar(20)     #è¯¾ç¨‹åç§°\n);\n\n#é€‰è¯¾è¡¨\ncreate table student_course(\n    id int,\n\tsid int,\n    cid int,\n    score int,\n    unique key(sid,cid)  #å¤åˆå”¯ä¸€\n);\ninsert into student values(1,'å¼ ä¸‰','13710011002','101223199012015623');#æˆåŠŸ\ninsert into student values(2,'æå››','13710011003','101223199012015624');#æˆåŠŸ\ninsert into course values(1001,'Java'),(1002,'MySQL');#æˆåŠŸ\nmysql&gt; select * from student;\n+-----+-------+-------------+--------------------+\n| sid | sname | tel         | cardid             |\n+-----+-------+-------------+--------------------+\n|   1 | å¼ ä¸‰  | 13710011002 | 101223199012015623 |\n|   2 | æå››  | 13710011003 | 101223199012015624 |\n+-----+-------+-------------+--------------------+\n2 rows in set (0.00 sec)\n\nmysql&gt; select * from course;\n+------+-------+\n| cid  | cname |\n+------+-------+\n| 1001 | Java  |\n| 1002 | MySQL |\n+------+-------+\n2 rows in set (0.00 sec)\ninsert into student_course values\n(1, 1, 1001, 89),\n(2, 1, 1002, 90),\n(3, 2, 1001, 88),\n(4, 2, 1002, 56);#æˆåŠŸ\nmysql&gt; select * from student_course;\n+----+------+------+-------+\n| id | sid  | cid  | score |\n+----+------+------+-------+\n|  1 |    1 | 1001 |    89 |\n|  2 |    1 | 1002 |    90 |\n|  3 |    2 | 1001 |    88 |\n|  4 |    2 | 1002 |    56 |\n+----+------+------+-------+\n4 rows in set (0.00 sec)\ninsert into student_course values (5, 1, 1001, 88);#å¤±è´¥\n\n#ERROR 1062 (23000): Duplicate entry '1-1001' for key 'sid'   è¿åsid-cidçš„å¤åˆå”¯ä¸€\n3.5 åˆ é™¤å”¯ä¸€çº¦æŸ\næ·»åŠ å”¯ä¸€æ€§çº¦æŸçš„åˆ—ä¸Šä¹Ÿä¼šè‡ªåŠ¨åˆ›å»ºå”¯ä¸€ç´¢å¼•ã€‚\nåˆ é™¤å”¯ä¸€çº¦æŸåªèƒ½é€šè¿‡åˆ é™¤å”¯ä¸€ç´¢å¼•çš„æ–¹å¼åˆ é™¤ã€‚\nåˆ é™¤æ—¶éœ€è¦æŒ‡å®šå”¯ä¸€ç´¢å¼•åï¼Œå”¯ä¸€ç´¢å¼•åå°±å’Œå”¯ä¸€çº¦æŸåä¸€æ ·ã€‚\nå¦‚æœåˆ›å»ºå”¯ä¸€çº¦æŸæ—¶æœªæŒ‡å®šåç§°ï¼Œå¦‚æœæ˜¯å•åˆ—ï¼Œå°±é»˜è®¤å’Œåˆ—åç›¸åŒï¼›å¦‚æœæ˜¯ç»„åˆåˆ—ï¼Œé‚£ä¹ˆé»˜è®¤å’Œ()ä¸­æ’åœ¨ç¬¬ä¸€ä¸ªçš„åˆ—åç›¸åŒã€‚ä¹Ÿå¯ä»¥è‡ªå®šä¹‰å”¯ä¸€æ€§çº¦æŸåã€‚\n\nSELECT * FROM information_schema.table_constraints WHERE table_name = 'è¡¨å'; #æŸ¥çœ‹éƒ½æœ‰å“ªäº›çº¦æŸ\nALTER TABLE USER \nDROP INDEX uk_name_pwd;\n\n\n\n\n\n\n\n\n\næ³¨æ„ï¼šå¯ä»¥é€šè¿‡ show index from è¡¨åç§°;æŸ¥çœ‹è¡¨çš„ç´¢å¼•\n4. PRIMARY KEY çº¦æŸ4.1 ä½œç”¨ç”¨æ¥å”¯ä¸€æ ‡è¯†è¡¨ä¸­çš„ä¸€è¡Œè®°å½•ã€‚\n4.2 å…³é”®å­—primary key\n4.3 ç‰¹ç‚¹\nä¸»é”®çº¦æŸç›¸å½“äºå”¯ä¸€çº¦æŸ+éç©ºçº¦æŸçš„ç»„åˆï¼Œä¸»é”®çº¦æŸåˆ—ä¸å…è®¸é‡å¤ï¼Œä¹Ÿä¸å…è®¸å‡ºç°ç©ºå€¼ã€‚\n\n\n\nä¸€ä¸ªè¡¨æœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªä¸»é”®çº¦æŸï¼Œå»ºç«‹ä¸»é”®çº¦æŸå¯ä»¥åœ¨åˆ—çº§åˆ«åˆ›å»ºï¼Œä¹Ÿå¯ä»¥åœ¨è¡¨çº§åˆ«ä¸Šåˆ›å»ºã€‚\n\n\nä¸»é”®çº¦æŸå¯¹åº”ç€è¡¨ä¸­çš„ä¸€åˆ—æˆ–è€…å¤šåˆ—ï¼ˆå¤åˆä¸»é”®ï¼‰\nå¦‚æœæ˜¯å¤šåˆ—ç»„åˆçš„å¤åˆä¸»é”®çº¦æŸï¼Œé‚£ä¹ˆè¿™äº›åˆ—éƒ½ä¸å…è®¸ä¸ºç©ºå€¼ï¼Œå¹¶ä¸”ç»„åˆçš„å€¼ä¸å…è®¸é‡å¤ã€‚\nMySQLçš„ä¸»é”®åæ€»æ˜¯PRIMARYï¼Œå°±ç®—è‡ªå·±å‘½åäº†ä¸»é”®çº¦æŸåä¹Ÿæ²¡ç”¨ã€‚\n\nå½“åˆ›å»ºä¸»é”®çº¦æŸæ—¶ï¼Œç³»ç»Ÿé»˜è®¤ä¼šåœ¨æ‰€åœ¨çš„åˆ—æˆ–åˆ—ç»„åˆä¸Šå»ºç«‹å¯¹åº”çš„ä¸»é”®ç´¢å¼•ï¼ˆèƒ½å¤Ÿæ ¹æ®ä¸»é”®æŸ¥è¯¢çš„ï¼Œå°±æ ¹æ®ä¸»é”®æŸ¥è¯¢ï¼Œæ•ˆç‡æ›´é«˜ï¼‰ã€‚å¦‚æœåˆ é™¤ä¸»é”®çº¦æŸäº†ï¼Œä¸»é”®çº¦æŸå¯¹åº”çš„ç´¢å¼•å°±è‡ªåŠ¨åˆ é™¤äº†ã€‚\n\n\n\néœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œä¸è¦ä¿®æ”¹ä¸»é”®å­—æ®µçš„å€¼ã€‚å› ä¸ºä¸»é”®æ˜¯æ•°æ®è®°å½•çš„å”¯ä¸€æ ‡è¯†ï¼Œå¦‚æœä¿®æ”¹äº†ä¸»é”®çš„å€¼ï¼Œå°±æœ‰å¯èƒ½ä¼šç ´åæ•°æ®çš„å®Œæ•´æ€§ã€‚\n\n4.4 æ·»åŠ ä¸»é”®çº¦æŸï¼ˆ1ï¼‰å»ºè¡¨æ—¶æŒ‡å®šä¸»é”®çº¦æŸ\ncreate table è¡¨åç§°(\n\tå­—æ®µå  æ•°æ®ç±»å‹  primary key, #åˆ—çº§æ¨¡å¼\n    å­—æ®µå  æ•°æ®ç±»å‹,  \n    å­—æ®µå  æ•°æ®ç±»å‹  \n);\ncreate table è¡¨åç§°(\n\tå­—æ®µå  æ•°æ®ç±»å‹,\n    å­—æ®µå  æ•°æ®ç±»å‹,  \n    å­—æ®µå  æ•°æ®ç±»å‹,\n    [constraint çº¦æŸå] primary key(å­—æ®µå) #è¡¨çº§æ¨¡å¼\n);\nä¸¾ä¾‹ï¼š\ncreate table temp(\n\tid int primary key,\n    name varchar(20)\n);\nmysql&gt; desc temp;\n+-------+-------------+------+-----+---------+-------+\n| Field | Type        | Null | Key | Default | Extra |\n+-------+-------------+------+-----+---------+-------+\n| id    | int(11)     | NO   | PRI | NULL    |       |\n| name  | varchar(20) | YES  |     | NULL    |       |\n+-------+-------------+------+-----+---------+-------+\n2 rows in set (0.00 sec)\ninsert into temp values(1,'å¼ ä¸‰');#æˆåŠŸ\ninsert into temp values(2,'æå››');#æˆåŠŸ\nmysql&gt; select * from temp;\n+----+------+\n| id | name |\n+----+------+\n|  1 | å¼ ä¸‰ |\n|  2 | æå›› |\n+----+------+\n2 rows in set (0.00 sec)\ninsert into temp values(1,'å¼ ä¸‰');#å¤±è´¥\nERROR 1062 (23000): Duplicateï¼ˆé‡å¤ï¼‰ entryï¼ˆé”®å…¥ï¼Œè¾“å…¥ï¼‰ '1' for key 'PRIMARY'\n\n\ninsert into temp values(1,'ç‹äº”');#å¤±è´¥\nERROR 1062 (23000): Duplicate entry '1' for key 'PRIMARY'\n\ninsert into temp values(3,'å¼ ä¸‰');#æˆåŠŸ\nmysql&gt; select * from temp;\n+----+------+\n| id | name |\n+----+------+\n|  1 | å¼ ä¸‰ |\n|  2 | æå›› |\n|  3 | å¼ ä¸‰ |\n+----+------+\n3 rows in set (0.00 sec)\ninsert into temp values(4,null);#æˆåŠŸ\n\n\ninsert into temp values(null,'æç¦');#å¤±è´¥\nERROR 1048 (23000): Column 'id' cannot be null\nmysql&gt; select * from temp;\n+----+------+\n| id | name |\n+----+------+\n|  1 | å¼ ä¸‰ |\n|  2 | æå›› |\n|  3 | å¼ ä¸‰ |\n|  4 | NULL |\n+----+------+\n4 rows in set (0.00 sec)\n#æ¼”ç¤ºä¸€ä¸ªè¡¨å»ºç«‹ä¸¤ä¸ªä¸»é”®çº¦æŸ\ncreate table temp(\n\tid int primary key,\n    name varchar(20) primary key\n);\nERROR 1068 (42000): Multipleï¼ˆå¤šé‡çš„ï¼‰ primary key definedï¼ˆå®šä¹‰ï¼‰\nå†ä¸¾ä¾‹ï¼š\n\nåˆ—çº§çº¦æŸ\n\nCREATE TABLE emp4(\nid INT PRIMARY KEY AUTO_INCREMENT ,\nNAME VARCHAR(20)\n);\n\nè¡¨çº§çº¦æŸ\n\nCREATE TABLE emp5(\nid INT NOT NULL AUTO_INCREMENT,\nNAME VARCHAR(20),\npwd VARCHAR(15),\nCONSTRAINT emp5_id_pk PRIMARY KEY(id)\n);\nï¼ˆ2ï¼‰å»ºè¡¨åå¢åŠ ä¸»é”®çº¦æŸ\nALTER TABLE è¡¨åç§° ADD PRIMARY KEY(å­—æ®µåˆ—è¡¨); #å­—æ®µåˆ—è¡¨å¯ä»¥æ˜¯ä¸€ä¸ªå­—æ®µï¼Œä¹Ÿå¯ä»¥æ˜¯å¤šä¸ªå­—æ®µï¼Œå¦‚æœæ˜¯å¤šä¸ªå­—æ®µçš„è¯ï¼Œæ˜¯å¤åˆä¸»é”®\nALTER TABLE student ADD PRIMARY KEY (sid);\nALTER TABLE emp5 ADD PRIMARY KEY(NAME,pwd);\n4.5 å…³äºå¤åˆä¸»é”®create table è¡¨åç§°(\n\tå­—æ®µå  æ•°æ®ç±»å‹,\n    å­—æ®µå  æ•°æ®ç±»å‹,  \n    å­—æ®µå  æ•°æ®ç±»å‹,\n    primary key(å­—æ®µå1,å­—æ®µå2)  #è¡¨ç¤ºå­—æ®µ1å’Œå­—æ®µ2çš„ç»„åˆæ˜¯å”¯ä¸€çš„ï¼Œä¹Ÿå¯ä»¥æœ‰æ›´å¤šä¸ªå­—æ®µ\n);\n#å­¦ç”Ÿè¡¨\ncreate table student(\n\tsid int primary key,  #å­¦å·\n    sname varchar(20)     #å­¦ç”Ÿå§“å\n);\n\n#è¯¾ç¨‹è¡¨\ncreate table course(\n\tcid int primary key,  #è¯¾ç¨‹ç¼–å·\n    cname varchar(20)     #è¯¾ç¨‹åç§°\n);\n\n#é€‰è¯¾è¡¨\ncreate table student_course(\n\tsid int,\n    cid int,\n    score int,\n    primary key(sid,cid)  #å¤åˆä¸»é”®\n);\ninsert into student values(1,'å¼ ä¸‰'),(2,'æå››');\ninsert into course values(1001,'Java'),(1002,'MySQL');\nmysql&gt; select * from student;\n+-----+-------+\n| sid | sname |\n+-----+-------+\n|   1 | å¼ ä¸‰  |\n|   2 | æå››  |\n+-----+-------+\n2 rows in set (0.00 sec)\n\nmysql&gt; select * from course;\n+------+-------+\n| cid  | cname |\n+------+-------+\n| 1001 | Java  |\n| 1002 | MySQL |\n+------+-------+\n2 rows in set (0.00 sec)\ninsert into student_course values(1, 1001, 89),(1,1002,90),(2,1001,88),(2,1002,56);\nmysql&gt; select * from student_course;\n+-----+------+-------+\n| sid | cid  | score |\n+-----+------+-------+\n|   1 | 1001 |    89 |\n|   1 | 1002 |    90 |\n|   2 | 1001 |    88 |\n|   2 | 1002 |    56 |\n+-----+------+-------+\n4 rows in set (0.00 sec)\ninsert into student_course values(1, 1001, 100);\nERROR 1062 (23000): Duplicate entry '1-1001' for key 'PRIMARY'\nmysql&gt; desc student_course;\n+-------+---------+------+-----+---------+-------+\n| Field | Type    | Null | Key | Default | Extra |\n+-------+---------+------+-----+---------+-------+\n| sid   | int(11) | NO   | PRI | NULL    |       |\n| cid   | int(11) | NO   | PRI | NULL    |       |\n| score | int(11) | YES  |     | NULL    |       |\n+-------+---------+------+-----+---------+-------+\n3 rows in set (0.00 sec)\n\nå†ä¸¾ä¾‹\n\nCREATE TABLE emp6(\nid INT NOT NULL,\nNAME VARCHAR(20),\npwd VARCHAR(15),\nCONSTRAINT emp7_pk PRIMARY KEY(NAME,pwd)\n);\n4.6 åˆ é™¤ä¸»é”®çº¦æŸalter table è¡¨åç§° drop primary key;\nä¸¾ä¾‹ï¼š\nALTER TABLE student DROP PRIMARY KEY;\nALTER TABLE emp5 DROP PRIMARY KEY;\n\n\n\n\n\n\n\n\n\nè¯´æ˜ï¼šåˆ é™¤ä¸»é”®çº¦æŸï¼Œä¸éœ€è¦æŒ‡å®šä¸»é”®åï¼Œå› ä¸ºä¸€ä¸ªè¡¨åªæœ‰ä¸€ä¸ªä¸»é”®ï¼Œåˆ é™¤ä¸»é”®çº¦æŸåï¼Œéç©ºè¿˜å­˜åœ¨ã€‚\n5. è‡ªå¢åˆ—ï¼šAUTO_INCREMENT5.1 ä½œç”¨æŸä¸ªå­—æ®µçš„å€¼è‡ªå¢\n5.2 å…³é”®å­—auto_increment\n5.3 ç‰¹ç‚¹å’Œè¦æ±‚ï¼ˆ1ï¼‰ä¸€ä¸ªè¡¨æœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªè‡ªå¢é•¿åˆ—\nï¼ˆ2ï¼‰å½“éœ€è¦äº§ç”Ÿå”¯ä¸€æ ‡è¯†ç¬¦æˆ–é¡ºåºå€¼æ—¶ï¼Œå¯è®¾ç½®è‡ªå¢é•¿\nï¼ˆ3ï¼‰è‡ªå¢é•¿åˆ—çº¦æŸçš„åˆ—å¿…é¡»æ˜¯é”®åˆ—ï¼ˆä¸»é”®åˆ—ï¼Œå”¯ä¸€é”®åˆ—ï¼‰\nï¼ˆ4ï¼‰è‡ªå¢çº¦æŸçš„åˆ—çš„æ•°æ®ç±»å‹å¿…é¡»æ˜¯æ•´æ•°ç±»å‹\nï¼ˆ5ï¼‰å¦‚æœè‡ªå¢åˆ—æŒ‡å®šäº† 0 å’Œ nullï¼Œä¼šåœ¨å½“å‰æœ€å¤§å€¼çš„åŸºç¡€ä¸Šè‡ªå¢ï¼›å¦‚æœè‡ªå¢åˆ—æ‰‹åŠ¨æŒ‡å®šäº†å…·ä½“å€¼ï¼Œç›´æ¥èµ‹å€¼ä¸ºå…·ä½“å€¼ã€‚\né”™è¯¯æ¼”ç¤ºï¼š\ncreate table employee(\n\teid int auto_increment,\n    ename varchar(20)\n);\n# ERROR 1075 (42000): Incorrect table definition; there can be only one auto column and it must be defined as a key   \ncreate table employee(\n\teid int primary key,\n    ename varchar(20) unique key auto_increment\n);\n# ERROR 1063 (42000): Incorrect column specifier for column 'ename'  å› ä¸ºenameä¸æ˜¯æ•´æ•°ç±»å‹\n5.4 å¦‚ä½•æŒ‡å®šè‡ªå¢çº¦æŸï¼ˆ1ï¼‰å»ºè¡¨æ—¶\ncreate table è¡¨åç§°(\n\tå­—æ®µå  æ•°æ®ç±»å‹  primary key auto_increment,\n    å­—æ®µå  æ•°æ®ç±»å‹  unique key not null,  \n    å­—æ®µå  æ•°æ®ç±»å‹  unique key,\n    å­—æ®µå  æ•°æ®ç±»å‹  not null default é»˜è®¤å€¼, \n);\ncreate table è¡¨åç§°(\n\tå­—æ®µå  æ•°æ®ç±»å‹ default é»˜è®¤å€¼ ,\n    å­—æ®µå  æ•°æ®ç±»å‹ unique key auto_increment,  \n    å­—æ®µå  æ•°æ®ç±»å‹ not null default é»˜è®¤å€¼,,\n    primary key(å­—æ®µå)\n);\ncreate table employee(\n\teid int primary key auto_increment,\n    ename varchar(20)\n);\nmysql&gt; desc employee;\n+-------+-------------+------+-----+---------+----------------+\n| Field | Type        | Null | Key | Default | Extra          |\n+-------+-------------+------+-----+---------+----------------+\n| eid   | int(11)     | NO   | PRI | NULL    | auto_increment |\n| ename | varchar(20) | YES  |     | NULL    |                |\n+-------+-------------+------+-----+---------+----------------+\n2 rows in set (0.00 sec)\nï¼ˆ2ï¼‰å»ºè¡¨å\nalter table è¡¨åç§° modify å­—æ®µå æ•°æ®ç±»å‹ auto_increment;\nä¾‹å¦‚ï¼š\ncreate table employee(\n\teid int primary key ,\n    ename varchar(20)\n);\nalter table employee modify eid int auto_increment;\nmysql&gt; desc employee;\n+-------+-------------+------+-----+---------+----------------+\n| Field | Type        | Null | Key | Default | Extra          |\n+-------+-------------+------+-----+---------+----------------+\n| eid   | int(11)     | NO   | PRI | NULL    | auto_increment |\n| ename | varchar(20) | YES  |     | NULL    |                |\n+-------+-------------+------+-----+---------+----------------+\n2 rows in set (0.00 sec)\n5.5 å¦‚ä½•åˆ é™¤è‡ªå¢çº¦æŸ#alter table è¡¨åç§° modify å­—æ®µå æ•°æ®ç±»å‹ auto_increment;#ç»™è¿™ä¸ªå­—æ®µå¢åŠ è‡ªå¢çº¦æŸ\n\nalter table è¡¨åç§° modify å­—æ®µå æ•°æ®ç±»å‹; #å»æ‰auto_incrementç›¸å½“äºåˆ é™¤\nalter table employee modify eid int;\nmysql&gt; desc employee;\n+-------+-------------+------+-----+---------+-------+\n| Field | Type        | Null | Key | Default | Extra |\n+-------+-------------+------+-----+---------+-------+\n| eid   | int(11)     | NO   | PRI | NULL    |       |\n| ename | varchar(20) | YES  |     | NULL    |       |\n+-------+-------------+------+-----+---------+-------+\n2 rows in set (0.00 sec)\n5.6 MySQL 8.0æ–°ç‰¹æ€§â€”è‡ªå¢å˜é‡çš„æŒä¹…åŒ–åœ¨MySQL 8.0ä¹‹å‰ï¼Œè‡ªå¢ä¸»é”®AUTO_INCREMENTçš„å€¼å¦‚æœå¤§äºmax(primary key)+1ï¼Œåœ¨MySQLé‡å¯åï¼Œä¼šé‡ç½®AUTO_INCREMENT=max(primary key)+1ï¼Œè¿™ç§ç°è±¡åœ¨æŸäº›æƒ…å†µä¸‹ä¼šå¯¼è‡´ä¸šåŠ¡ä¸»é”®å†²çªæˆ–è€…å…¶ä»–éš¾ä»¥å‘ç°çš„é—®é¢˜ã€‚ä¸‹é¢é€šè¿‡æ¡ˆä¾‹æ¥å¯¹æ¯”ä¸åŒçš„ç‰ˆæœ¬ä¸­è‡ªå¢å˜é‡æ˜¯å¦æŒä¹…åŒ–ã€‚åœ¨MySQL 5.7ç‰ˆæœ¬ä¸­ï¼Œæµ‹è¯•æ­¥éª¤å¦‚ä¸‹ï¼šåˆ›å»ºçš„æ•°æ®è¡¨ä¸­åŒ…å«è‡ªå¢ä¸»é”®çš„idå­—æ®µï¼Œè¯­å¥å¦‚ä¸‹ï¼š\nCREATE TABLE test1(\nid INT PRIMARY KEY AUTO_INCREMENT\n);\næ’å…¥4ä¸ªç©ºå€¼ï¼Œæ‰§è¡Œå¦‚ä¸‹ï¼š\nINSERT INTO test1\nVALUES(0),(0),(0),(0);\næŸ¥è¯¢æ•°æ®è¡¨test1ä¸­çš„æ•°æ®ï¼Œç»“æœå¦‚ä¸‹ï¼š\nmysql&gt; SELECT * FROM test1;\n+----+\n| id |\n+----+\n|  1 |\n|  2 |\n|  3 |\n|  4 |\n+----+\n4 rows in set (0.00 sec)\nåˆ é™¤idä¸º4çš„è®°å½•ï¼Œè¯­å¥å¦‚ä¸‹ï¼š\nDELETE FROM test1 WHERE id = 4;\nå†æ¬¡æ’å…¥ä¸€ä¸ªç©ºå€¼ï¼Œè¯­å¥å¦‚ä¸‹ï¼š\nINSERT INTO test1 VALUES(0);\næŸ¥è¯¢æ­¤æ—¶æ•°æ®è¡¨test1ä¸­çš„æ•°æ®ï¼Œç»“æœå¦‚ä¸‹ï¼š\nmysql&gt; SELECT * FROM test1;\n+----+\n| id |\n+----+\n|  1 |\n|  2 |\n|  3 |\n|  5 |\n+----+\n4 rows in set (0.00 sec)\nä»ç»“æœå¯ä»¥çœ‹å‡ºï¼Œè™½ç„¶åˆ é™¤äº†idä¸º4çš„è®°å½•ï¼Œä½†æ˜¯å†æ¬¡æ’å…¥ç©ºå€¼æ—¶ï¼Œå¹¶æ²¡æœ‰é‡ç”¨è¢«åˆ é™¤çš„4ï¼Œè€Œæ˜¯åˆ†é…äº†5ã€‚åˆ é™¤idä¸º5çš„è®°å½•ï¼Œç»“æœå¦‚ä¸‹ï¼š\nDELETE FROM test1 where id=5;\né‡å¯æ•°æ®åº“ï¼Œé‡æ–°æ’å…¥ä¸€ä¸ªç©ºå€¼ã€‚\nINSERT INTO test1 values(0);\nå†æ¬¡æŸ¥è¯¢æ•°æ®è¡¨test1ä¸­çš„æ•°æ®ï¼Œç»“æœå¦‚ä¸‹ï¼š\nmysql&gt; SELECT * FROM test1;\n+----+\n| id |\n+----+\n|  1 |\n|  2 |\n|  3 |\n|  4 |\n+----+\n4 rows in set (0.00 sec)\nä»ç»“æœå¯ä»¥çœ‹å‡ºï¼Œæ–°æ’å…¥çš„0å€¼åˆ†é…çš„æ˜¯4ï¼ŒæŒ‰ç…§é‡å¯å‰çš„æ“ä½œé€»è¾‘ï¼Œæ­¤å¤„åº”è¯¥åˆ†é…6ã€‚å‡ºç°ä¸Šè¿°ç»“æœçš„ä¸»è¦åŸå› æ˜¯è‡ªå¢ä¸»é”®æ²¡æœ‰æŒä¹…åŒ–ã€‚åœ¨MySQL 5.7ç³»ç»Ÿä¸­ï¼Œå¯¹äºè‡ªå¢ä¸»é”®çš„åˆ†é…è§„åˆ™ï¼Œæ˜¯ç”±InnoDBæ•°æ®å­—å…¸å†…éƒ¨ä¸€ä¸ªè®¡æ•°å™¨æ¥å†³å®šçš„ï¼Œè€Œè¯¥è®¡æ•°å™¨åªåœ¨å†…å­˜ä¸­ç»´æŠ¤ï¼Œå¹¶ä¸ä¼šæŒä¹…åŒ–åˆ°ç£ç›˜ä¸­ã€‚å½“æ•°æ®åº“é‡å¯æ—¶ï¼Œè¯¥è®¡æ•°å™¨ä¼šè¢«åˆå§‹åŒ–ã€‚\nåœ¨MySQL 8.0ç‰ˆæœ¬ä¸­ï¼Œä¸Šè¿°æµ‹è¯•æ­¥éª¤æœ€åä¸€æ­¥çš„ç»“æœå¦‚ä¸‹ï¼š\nmysql&gt; SELECT * FROM test1;\n+----+\n| id |\n+----+\n|  1 |\n|  2 |\n|  3 |\n|  6 |\n+----+\n4 rows in set (0.00 sec)\nä»ç»“æœå¯ä»¥çœ‹å‡ºï¼Œè‡ªå¢å˜é‡å·²ç»æŒä¹…åŒ–äº†ã€‚\nMySQL 8.0å°†è‡ªå¢ä¸»é”®çš„è®¡æ•°å™¨æŒä¹…åŒ–åˆ°é‡åšæ—¥å¿—ä¸­ã€‚æ¯æ¬¡è®¡æ•°å™¨å‘ç”Ÿæ”¹å˜ï¼Œéƒ½ä¼šå°†å…¶å†™å…¥é‡åšæ—¥å¿—ä¸­ã€‚å¦‚æœæ•°æ®åº“é‡å¯ï¼ŒInnoDBä¼šæ ¹æ®é‡åšæ—¥å¿—ä¸­çš„ä¿¡æ¯æ¥åˆå§‹åŒ–è®¡æ•°å™¨çš„å†…å­˜å€¼ã€‚\n6. FOREIGN KEY çº¦æŸ6.1 ä½œç”¨é™å®šæŸä¸ªè¡¨çš„æŸä¸ªå­—æ®µçš„å¼•ç”¨å®Œæ•´æ€§ã€‚\næ¯”å¦‚ï¼šå‘˜å·¥è¡¨çš„å‘˜å·¥æ‰€åœ¨éƒ¨é—¨çš„é€‰æ‹©ï¼Œå¿…é¡»åœ¨éƒ¨é—¨è¡¨èƒ½æ‰¾åˆ°å¯¹åº”çš„éƒ¨åˆ†ã€‚\n\n6.2 å…³é”®å­—FOREIGN KEY\n6.3 ä¸»è¡¨å’Œä»è¡¨/çˆ¶è¡¨å’Œå­è¡¨ä¸»è¡¨ï¼ˆçˆ¶è¡¨ï¼‰ï¼šè¢«å¼•ç”¨çš„è¡¨ï¼Œè¢«å‚è€ƒçš„è¡¨\nä»è¡¨ï¼ˆå­è¡¨ï¼‰ï¼šå¼•ç”¨åˆ«äººçš„è¡¨ï¼Œå‚è€ƒåˆ«äººçš„è¡¨\nä¾‹å¦‚ï¼šå‘˜å·¥è¡¨çš„å‘˜å·¥æ‰€åœ¨éƒ¨é—¨è¿™ä¸ªå­—æ®µçš„å€¼è¦å‚è€ƒéƒ¨é—¨è¡¨ï¼šéƒ¨é—¨è¡¨æ˜¯ä¸»è¡¨ï¼Œå‘˜å·¥è¡¨æ˜¯ä»è¡¨ã€‚\nä¾‹å¦‚ï¼šå­¦ç”Ÿè¡¨ã€è¯¾ç¨‹è¡¨ã€é€‰è¯¾è¡¨ï¼šé€‰è¯¾è¡¨çš„å­¦ç”Ÿå’Œè¯¾ç¨‹è¦åˆ†åˆ«å‚è€ƒå­¦ç”Ÿè¡¨å’Œè¯¾ç¨‹è¡¨ï¼Œå­¦ç”Ÿè¡¨å’Œè¯¾ç¨‹è¡¨æ˜¯ä¸»è¡¨ï¼Œé€‰è¯¾è¡¨æ˜¯ä»è¡¨ã€‚\n6.4 ç‰¹ç‚¹ï¼ˆ1ï¼‰ä»è¡¨çš„å¤–é”®åˆ—ï¼Œå¿…é¡»å¼•ç”¨/å‚è€ƒä¸»è¡¨çš„ä¸»é”®æˆ–å”¯ä¸€çº¦æŸçš„åˆ—\nâ€‹          ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºè¢«ä¾èµ–/è¢«å‚è€ƒçš„å€¼å¿…é¡»æ˜¯å”¯ä¸€çš„\nï¼ˆ2ï¼‰åœ¨åˆ›å»ºå¤–é”®çº¦æŸæ—¶ï¼Œå¦‚æœä¸ç»™å¤–é”®çº¦æŸå‘½åï¼Œé»˜è®¤åä¸æ˜¯åˆ—åï¼Œè€Œæ˜¯è‡ªåŠ¨äº§ç”Ÿä¸€ä¸ªå¤–é”®åï¼ˆä¾‹å¦‚ student_ibfk_1;ï¼‰ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šå¤–é”®çº¦æŸåã€‚\nï¼ˆ3ï¼‰åˆ›å»º(CREATE)è¡¨æ—¶å°±æŒ‡å®šå¤–é”®çº¦æŸçš„è¯ï¼Œå…ˆåˆ›å»ºä¸»è¡¨ï¼Œå†åˆ›å»ºä»è¡¨\nï¼ˆ4ï¼‰åˆ è¡¨æ—¶ï¼Œå…ˆåˆ ä»è¡¨ï¼ˆæˆ–å…ˆåˆ é™¤å¤–é”®çº¦æŸï¼‰ï¼Œå†åˆ é™¤ä¸»è¡¨\nï¼ˆ5ï¼‰å½“ä¸»è¡¨çš„è®°å½•è¢«ä»è¡¨å‚ç…§æ—¶ï¼Œä¸»è¡¨çš„è®°å½•å°†ä¸å…è®¸åˆ é™¤ï¼Œå¦‚æœè¦åˆ é™¤æ•°æ®ï¼Œéœ€è¦å…ˆåˆ é™¤ä»è¡¨ä¸­ä¾èµ–è¯¥è®°å½•çš„æ•°æ®ï¼Œç„¶åæ‰å¯ä»¥åˆ é™¤ä¸»è¡¨çš„æ•°æ®\nï¼ˆ6ï¼‰åœ¨â€œä»è¡¨â€ä¸­æŒ‡å®šå¤–é”®çº¦æŸï¼Œå¹¶ä¸”ä¸€ä¸ªè¡¨å¯ä»¥å»ºç«‹å¤šä¸ªå¤–é”®çº¦æŸ\nï¼ˆ7ï¼‰ä»è¡¨çš„å¤–é”®åˆ—ä¸ä¸»è¡¨è¢«å‚ç…§çš„åˆ—åå­—å¯ä»¥ä¸ç›¸åŒï¼Œä½†æ˜¯æ•°æ®ç±»å‹å¿…é¡»ä¸€æ ·ï¼Œé€»è¾‘æ„ä¹‰ä¸€è‡´ã€‚å¦‚æœç±»å‹ä¸ä¸€æ ·ï¼Œåˆ›å»ºå­è¡¨æ—¶ï¼Œå°±ä¼šå‡ºç°é”™è¯¯â€œERROR 1005 (HY000): Canâ€™t create tableâ€™database.tablenameâ€™(errno: 150)â€ã€‚\nâ€‹          ä¾‹å¦‚ï¼šéƒ½æ˜¯è¡¨ç¤ºéƒ¨é—¨ç¼–å·ï¼Œéƒ½æ˜¯intç±»å‹ã€‚\nï¼ˆ8ï¼‰å½“åˆ›å»ºå¤–é”®çº¦æŸæ—¶ï¼Œç³»ç»Ÿé»˜è®¤ä¼šåœ¨æ‰€åœ¨çš„åˆ—ä¸Šå»ºç«‹å¯¹åº”çš„æ™®é€šç´¢å¼•ã€‚ä½†æ˜¯ç´¢å¼•åæ˜¯å¤–é”®çš„çº¦æŸåã€‚ï¼ˆæ ¹æ®å¤–é”®æŸ¥è¯¢æ•ˆç‡å¾ˆé«˜ï¼‰\nï¼ˆ9ï¼‰åˆ é™¤å¤–é”®çº¦æŸåï¼Œå¿…é¡»æ‰‹åŠ¨åˆ é™¤å¯¹åº”çš„ç´¢å¼•\n6.5 æ·»åŠ å¤–é”®çº¦æŸï¼ˆ1ï¼‰å»ºè¡¨æ—¶\ncreate table ä¸»è¡¨åç§°(\n\tå­—æ®µ1  æ•°æ®ç±»å‹  primary key,\n    å­—æ®µ2  æ•°æ®ç±»å‹\n);\n\ncreate table ä»è¡¨åç§°(\n\tå­—æ®µ1  æ•°æ®ç±»å‹  primary key,\n    å­—æ®µ2  æ•°æ®ç±»å‹,\n    [CONSTRAINT &lt;å¤–é”®çº¦æŸåç§°&gt;] FOREIGN KEYï¼ˆä»è¡¨çš„æŸä¸ªå­—æ®µ) references ä¸»è¡¨å(è¢«å‚è€ƒå­—æ®µ)\n);\n#(ä»è¡¨çš„æŸä¸ªå­—æ®µ)çš„æ•°æ®ç±»å‹å¿…é¡»ä¸ä¸»è¡¨å(è¢«å‚è€ƒå­—æ®µ)çš„æ•°æ®ç±»å‹ä¸€è‡´ï¼Œé€»è¾‘æ„ä¹‰ä¹Ÿä¸€æ ·\n#(ä»è¡¨çš„æŸä¸ªå­—æ®µ)çš„å­—æ®µåå¯ä»¥ä¸ä¸»è¡¨å(è¢«å‚è€ƒå­—æ®µ)çš„å­—æ®µåä¸€æ ·ï¼Œä¹Ÿå¯ä»¥ä¸ä¸€æ ·\n\n-- FOREIGN KEY: åœ¨è¡¨çº§æŒ‡å®šå­è¡¨ä¸­çš„åˆ—\n-- REFERENCES: æ ‡ç¤ºåœ¨çˆ¶è¡¨ä¸­çš„åˆ—\ncreate table dept( #ä¸»è¡¨\n\tdid int primary key,\t\t#éƒ¨é—¨ç¼–å·\n    dname varchar(50)\t\t\t#éƒ¨é—¨åç§°\n);\n\ncreate table emp(#ä»è¡¨\n\teid int primary key,  #å‘˜å·¥ç¼–å·\n    ename varchar(5),     #å‘˜å·¥å§“å\n    deptid int,\t\t\t\t#å‘˜å·¥æ‰€åœ¨çš„éƒ¨é—¨\n    foreign key (deptid) references dept(did)   #åœ¨ä»è¡¨ä¸­æŒ‡å®šå¤–é”®çº¦æŸ\n    #empè¡¨çš„deptidå’Œå’Œdeptè¡¨çš„didçš„æ•°æ®ç±»å‹ä¸€è‡´ï¼Œæ„ä¹‰éƒ½æ˜¯è¡¨ç¤ºéƒ¨é—¨çš„ç¼–å·\n);\n\nè¯´æ˜ï¼š\nï¼ˆ1ï¼‰ä¸»è¡¨deptå¿…é¡»å…ˆåˆ›å»ºæˆåŠŸï¼Œç„¶åæ‰èƒ½åˆ›å»ºempè¡¨ï¼ŒæŒ‡å®šå¤–é”®æˆåŠŸã€‚\nï¼ˆ2ï¼‰åˆ é™¤è¡¨æ—¶ï¼Œå…ˆåˆ é™¤ä»è¡¨empï¼Œå†åˆ é™¤ä¸»è¡¨dept\nï¼ˆ2ï¼‰å»ºè¡¨å\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè¡¨ä¸è¡¨çš„å…³è”éƒ½æ˜¯æå‰è®¾è®¡å¥½äº†çš„ï¼Œå› æ­¤ï¼Œä¼šåœ¨åˆ›å»ºè¡¨çš„æ—¶å€™å°±æŠŠå¤–é”®çº¦æŸå®šä¹‰å¥½ã€‚ä¸è¿‡ï¼Œå¦‚æœéœ€è¦ä¿®æ”¹è¡¨çš„è®¾è®¡ï¼ˆæ¯”å¦‚æ·»åŠ æ–°çš„å­—æ®µï¼Œå¢åŠ æ–°çš„å…³è”å…³ç³»ï¼‰ï¼Œä½†æ²¡æœ‰é¢„å…ˆå®šä¹‰å¤–é”®çº¦æŸï¼Œé‚£ä¹ˆï¼Œå°±è¦ç”¨ä¿®æ”¹è¡¨çš„æ–¹å¼æ¥è¡¥å……å®šä¹‰ã€‚\næ ¼å¼ï¼š\nALTER TABLE ä»è¡¨å ADD [CONSTRAINT çº¦æŸå] FOREIGN KEY (ä»è¡¨çš„å­—æ®µ) REFERENCES ä¸»è¡¨å(è¢«å¼•ç”¨å­—æ®µ) [on update xx][on delete xx];\nä¸¾ä¾‹ï¼š\nALTER TABLE emp1\nADD [CONSTRAINT emp_dept_id_fk] FOREIGN KEY(dept_id) REFERENCES dept(dept_id);\nä¸¾ä¾‹ï¼š\ncreate table dept(\n\tdid int primary key,\t\t#éƒ¨é—¨ç¼–å·\n    dname varchar(50)\t\t\t#éƒ¨é—¨åç§°\n);\n\ncreate table emp(\n\teid int primary key,  #å‘˜å·¥ç¼–å·\n    ename varchar(5),     #å‘˜å·¥å§“å\n    deptid int\t\t\t\t#å‘˜å·¥æ‰€åœ¨çš„éƒ¨é—¨\n);\n#è¿™ä¸¤ä¸ªè¡¨åˆ›å»ºæ—¶ï¼Œæ²¡æœ‰æŒ‡å®šå¤–é”®çš„è¯ï¼Œé‚£ä¹ˆåˆ›å»ºé¡ºåºæ˜¯éšæ„\nalter table emp add foreign key (deptid) references dept(did);\n6.6 æ¼”ç¤ºé—®é¢˜ï¼ˆ1ï¼‰å¤±è´¥ï¼šä¸æ˜¯é”®åˆ—\ncreate table dept(\n\tdid int ,\t\t#éƒ¨é—¨ç¼–å·\n    dname varchar(50)\t\t\t#éƒ¨é—¨åç§°\n);\n\ncreate table emp(\n\teid int primary key,  #å‘˜å·¥ç¼–å·\n    ename varchar(5),     #å‘˜å·¥å§“å\n    deptid int,\t\t\t\t#å‘˜å·¥æ‰€åœ¨çš„éƒ¨é—¨\n    foreign key (deptid) references dept(did)\n);\n#ERROR 1215 (HY000): Cannot add foreign key constraint  åŸå› æ˜¯deptçš„didä¸æ˜¯é”®åˆ—\nï¼ˆ2ï¼‰å¤±è´¥ï¼šæ•°æ®ç±»å‹ä¸ä¸€è‡´\ncreate table dept(\n\tdid int primary key,\t\t#éƒ¨é—¨ç¼–å·\n    dname varchar(50)\t\t\t#éƒ¨é—¨åç§°\n);\n\ncreate table emp(\n\teid int primary key,  #å‘˜å·¥ç¼–å·\n    ename varchar(5),     #å‘˜å·¥å§“å\n    deptid char,\t\t\t\t#å‘˜å·¥æ‰€åœ¨çš„éƒ¨é—¨\n    foreign key (deptid) references dept(did)\n);\n#ERROR 1215 (HY000): Cannot add foreign key constraint  åŸå› æ˜¯ä»è¡¨çš„deptidå­—æ®µå’Œä¸»è¡¨çš„didå­—æ®µçš„æ•°æ®ç±»å‹ä¸ä¸€è‡´ï¼Œå¹¶ä¸”è¦å®ƒä¿©çš„é€»è¾‘æ„ä¹‰ä¸€è‡´\nï¼ˆ3ï¼‰æˆåŠŸï¼Œä¸¤ä¸ªè¡¨å­—æ®µåä¸€æ ·\ncreate table dept(\n\tdid int primary key,\t\t#éƒ¨é—¨ç¼–å·\n    dname varchar(50)\t\t\t#éƒ¨é—¨åç§°\n);\n\ncreate table emp(\n\teid int primary key,  #å‘˜å·¥ç¼–å·\n    ename varchar(5),     #å‘˜å·¥å§“å\n    did int,\t\t\t\t#å‘˜å·¥æ‰€åœ¨çš„éƒ¨é—¨\n    foreign key (did) references dept(did)  \n    #empè¡¨çš„deptidå’Œå’Œdeptè¡¨çš„didçš„æ•°æ®ç±»å‹ä¸€è‡´ï¼Œæ„ä¹‰éƒ½æ˜¯è¡¨ç¤ºéƒ¨é—¨çš„ç¼–å·\n    #æ˜¯å¦é‡åæ²¡é—®é¢˜ï¼Œå› ä¸ºä¸¤ä¸ªdidåœ¨ä¸åŒçš„è¡¨ä¸­\n);\nï¼ˆ4ï¼‰æ·»åŠ ã€åˆ é™¤ã€ä¿®æ”¹é—®é¢˜\ncreate table dept(\n\tdid int primary key,\t\t#éƒ¨é—¨ç¼–å·\n    dname varchar(50)\t\t\t#éƒ¨é—¨åç§°\n);\n\ncreate table emp(\n\teid int primary key,  #å‘˜å·¥ç¼–å·\n    ename varchar(5),     #å‘˜å·¥å§“å\n    deptid int,\t\t\t\t#å‘˜å·¥æ‰€åœ¨çš„éƒ¨é—¨\n    foreign key (deptid) references dept(did)  \n    #empè¡¨çš„deptidå’Œå’Œdeptè¡¨çš„didçš„æ•°æ®ç±»å‹ä¸€è‡´ï¼Œæ„ä¹‰éƒ½æ˜¯è¡¨ç¤ºéƒ¨é—¨çš„ç¼–å·\n);\ninsert into dept values(1001,'æ•™å­¦éƒ¨');\ninsert into dept values(1003, 'è´¢åŠ¡éƒ¨');\n\ninsert into emp values(1,'å¼ ä¸‰',1001); #æ·»åŠ ä»è¡¨è®°å½•æˆåŠŸï¼Œåœ¨æ·»åŠ è¿™æ¡è®°å½•æ—¶ï¼Œè¦æ±‚éƒ¨é—¨è¡¨æœ‰1001éƒ¨é—¨\n\ninsert into emp values(2,'æå››',1005);#æ·»åŠ ä»è¡¨è®°å½•å¤±è´¥\nERROR 1452 (23000): Cannot addï¼ˆæ·»åŠ ï¼‰ or updateï¼ˆä¿®æ”¹ï¼‰ a child row: a foreign key constraint fails (`atguigudb`.`emp`, CONSTRAINT `emp_ibfk_1` FOREIGN KEY (`deptid`) REFERENCES `dept` (`did`)) ä»è¡¨empæ·»åŠ è®°å½•å¤±è´¥ï¼Œå› ä¸ºä¸»è¡¨deptæ²¡æœ‰1005éƒ¨é—¨\nmysql&gt; select * from dept;\n+------+--------+\n| did  | dname  |\n+------+--------+\n| 1001 | æ•™å­¦éƒ¨  |\n| 1003 | è´¢åŠ¡éƒ¨  |\n+------+--------+\n2 rows in set (0.00 sec)\n\nmysql&gt; select * from emp;\n+-----+-------+--------+\n| eid | ename | deptid |\n+-----+-------+--------+\n|   1 | å¼ ä¸‰   |   1001 |\n+-----+-------+--------+\n1 row in set (0.00 sec)\nupdate emp set deptid = 1002 where eid = 1;#ä¿®æ”¹ä»è¡¨å¤±è´¥ \nERROR 1452 (23000): Cannot addï¼ˆæ·»åŠ ï¼‰ or updateï¼ˆä¿®æ”¹ï¼‰ a child rowï¼ˆå­è¡¨çš„è®°å½•ï¼‰: a foreign key constraint failsï¼ˆå¤–é”®çº¦æŸå¤±è´¥ï¼‰ (`atguigudb`.`emp`, CONSTRAINT `emp_ibfk_1` FOREIGN KEY (`deptid`) REFERENCES `dept` (`did`))  #éƒ¨é—¨è¡¨didå­—æ®µç°åœ¨æ²¡æœ‰1002çš„å€¼ï¼Œæ‰€ä»¥å‘˜å·¥è¡¨ä¸­ä¸èƒ½ä¿®æ”¹å‘˜å·¥æ‰€åœ¨éƒ¨é—¨deptidä¸º1002\n\nupdate dept set did = 1002 where did = 1001;#ä¿®æ”¹ä¸»è¡¨å¤±è´¥\nERROR 1451 (23000): Cannot deleteï¼ˆåˆ é™¤ï¼‰ or updateï¼ˆä¿®æ”¹ï¼‰ a parent rowï¼ˆçˆ¶è¡¨çš„è®°å½•ï¼‰: a foreign key constraint fails (`atguigudb`.`emp`, CONSTRAINT `emp_ibfk_1` FOREIGN KEY (`deptid`) REFERENCES `dept` (`did`)) #éƒ¨é—¨è¡¨didçš„1001å­—æ®µå·²ç»è¢«empå¼•ç”¨äº†ï¼Œæ‰€ä»¥éƒ¨é—¨è¡¨çš„1001å­—æ®µå°±ä¸èƒ½ä¿®æ”¹äº†ã€‚\n\nupdate dept set did = 1002 where did = 1003;#ä¿®æ”¹ä¸»è¡¨æˆåŠŸ  å› ä¸ºéƒ¨é—¨è¡¨çš„1003éƒ¨é—¨æ²¡æœ‰è¢«empè¡¨å¼•ç”¨ï¼Œæ‰€ä»¥å¯ä»¥ä¿®æ”¹\ndelete from dept where did=1001; #åˆ é™¤ä¸»è¡¨å¤±è´¥\nERROR 1451 (23000): Cannot deleteï¼ˆåˆ é™¤ï¼‰ or updateï¼ˆä¿®æ”¹ï¼‰ a parent rowï¼ˆçˆ¶è¡¨è®°å½•ï¼‰: a foreign key constraint fails (`atguigudb`.`emp`, CONSTRAINT `emp_ibfk_1` FOREIGN KEY (`deptid`) REFERENCES `dept` (`did`))  #å› ä¸ºéƒ¨é—¨è¡¨didçš„1001å­—æ®µå·²ç»è¢«empå¼•ç”¨äº†ï¼Œæ‰€ä»¥éƒ¨é—¨è¡¨çš„1001å­—æ®µå¯¹åº”çš„è®°å½•å°±ä¸èƒ½è¢«åˆ é™¤\næ€»ç»“ï¼šçº¦æŸå…³ç³»æ˜¯é’ˆå¯¹åŒæ–¹çš„\n\næ·»åŠ äº†å¤–é”®çº¦æŸåï¼Œä¸»è¡¨çš„ä¿®æ”¹å’Œåˆ é™¤æ•°æ®å—çº¦æŸ\n\næ·»åŠ äº†å¤–é”®çº¦æŸåï¼Œä»è¡¨çš„æ·»åŠ å’Œä¿®æ”¹æ•°æ®å—çº¦æŸ\n\nåœ¨ä»è¡¨ä¸Šå»ºç«‹å¤–é”®ï¼Œè¦æ±‚ä¸»è¡¨å¿…é¡»å­˜åœ¨\nåˆ é™¤ä¸»è¡¨æ—¶ï¼Œè¦æ±‚ä»è¡¨ä»è¡¨å…ˆåˆ é™¤ï¼Œæˆ–å°†ä»è¡¨ä¸­å¤–é”®å¼•ç”¨è¯¥ä¸»è¡¨çš„å…³ç³»å…ˆåˆ é™¤\n\n6.7 çº¦æŸç­‰çº§\nCascadeæ–¹å¼ï¼šåœ¨çˆ¶è¡¨ä¸Šupdate/deleteè®°å½•æ—¶ï¼ŒåŒæ­¥update/deleteæ‰å­è¡¨çš„åŒ¹é…è®°å½• \n\nSet nullæ–¹å¼ï¼šåœ¨çˆ¶è¡¨ä¸Šupdate/deleteè®°å½•æ—¶ï¼Œå°†å­è¡¨ä¸ŠåŒ¹é…è®°å½•çš„åˆ—è®¾ä¸ºnullï¼Œä½†æ˜¯è¦æ³¨æ„å­è¡¨çš„å¤–é”®åˆ—ä¸èƒ½ä¸ºnot null  \n\nNo actionæ–¹å¼ï¼šå¦‚æœå­è¡¨ä¸­æœ‰åŒ¹é…çš„è®°å½•ï¼Œåˆ™ä¸å…è®¸å¯¹çˆ¶è¡¨å¯¹åº”å€™é€‰é”®è¿›è¡Œupdate/deleteæ“ä½œ  \n\nRestrictæ–¹å¼ï¼šåŒno actionï¼Œ éƒ½æ˜¯ç«‹å³æ£€æŸ¥å¤–é”®çº¦æŸ\n\nSet defaultæ–¹å¼ï¼ˆåœ¨å¯è§†åŒ–å·¥å…·SQLyogä¸­å¯èƒ½æ˜¾ç¤ºç©ºç™½ï¼‰ï¼šçˆ¶è¡¨æœ‰å˜æ›´æ—¶ï¼Œå­è¡¨å°†å¤–é”®åˆ—è®¾ç½®æˆä¸€ä¸ªé»˜è®¤çš„å€¼ï¼Œä½†Innodbä¸èƒ½è¯†åˆ«\n\n\nå¦‚æœæ²¡æœ‰æŒ‡å®šç­‰çº§ï¼Œå°±ç›¸å½“äºRestrictæ–¹å¼ã€‚\nå¯¹äºå¤–é”®çº¦æŸï¼Œæœ€å¥½æ˜¯é‡‡ç”¨: ON UPDATE CASCADE ON DELETE RESTRICT çš„æ–¹å¼ã€‚\nï¼ˆ1ï¼‰æ¼”ç¤º1ï¼šon update cascade on delete set null\ncreate table dept(\n\tdid int primary key,\t\t#éƒ¨é—¨ç¼–å·\n    dname varchar(50)\t\t\t#éƒ¨é—¨åç§°\n);\n\ncreate table emp(\n\teid int primary key,  #å‘˜å·¥ç¼–å·\n    ename varchar(5),     #å‘˜å·¥å§“å\n    deptid int,\t\t\t\t#å‘˜å·¥æ‰€åœ¨çš„éƒ¨é—¨\n    foreign key (deptid) references dept(did)  on update cascade on delete set null\n    #æŠŠä¿®æ”¹æ“ä½œè®¾ç½®ä¸ºçº§è”ä¿®æ”¹ç­‰çº§ï¼ŒæŠŠåˆ é™¤æ“ä½œè®¾ç½®ä¸ºset nullç­‰çº§\n);\ninsert into dept values(1001,'æ•™å­¦éƒ¨');\ninsert into dept values(1002, 'è´¢åŠ¡éƒ¨');\ninsert into dept values(1003, 'å’¨è¯¢éƒ¨');\n\n\ninsert into emp values(1,'å¼ ä¸‰',1001); #åœ¨æ·»åŠ è¿™æ¡è®°å½•æ—¶ï¼Œè¦æ±‚éƒ¨é—¨è¡¨æœ‰1001éƒ¨é—¨\ninsert into emp values(2,'æå››',1001);\ninsert into emp values(3,'ç‹äº”',1002);\n\nmysql&gt; select * from dept;\n\nmysql&gt; select * from emp;\n\n#ä¿®æ”¹ä¸»è¡¨æˆåŠŸï¼Œä»è¡¨ä¹Ÿè·Ÿç€ä¿®æ”¹ï¼Œä¿®æ”¹äº†ä¸»è¡¨è¢«å¼•ç”¨çš„å­—æ®µ1002ä¸º1004ï¼Œä»è¡¨çš„å¼•ç”¨å­—æ®µå°±è·Ÿç€ä¿®æ”¹ä¸º1004äº†\nmysql&gt; update dept set did = 1004 where did = 1002;\nQuery OK, 1 row affected (0.00 sec)\nRows matched: 1  Changed: 1  Warnings: 0\n\nmysql&gt; select * from dept;\n+------+--------+\n| did  | dname  |\n+------+--------+\n| 1001 | æ•™å­¦éƒ¨ |\n| 1003 | å’¨è¯¢éƒ¨ |\n| 1004 | è´¢åŠ¡éƒ¨ | #åŸæ¥æ˜¯1002ï¼Œä¿®æ”¹ä¸º1004\n+------+--------+\n3 rows in set (0.00 sec)\n\nmysql&gt; select * from emp;\n+-----+-------+--------+\n| eid | ename | deptid |\n+-----+-------+--------+\n|   1 | å¼ ä¸‰  |   1001 |\n|   2 | æå››  |   1001 |\n|   3 | ç‹äº”  |   1004 | #åŸæ¥æ˜¯1002ï¼Œè·Ÿç€ä¿®æ”¹ä¸º1004\n+-----+-------+--------+\n3 rows in set (0.00 sec)\n#åˆ é™¤ä¸»è¡¨çš„è®°å½•æˆåŠŸï¼Œä»è¡¨å¯¹åº”çš„å­—æ®µçš„å€¼è¢«ä¿®æ”¹ä¸ºnull\nmysql&gt; delete from dept where did = 1001;\nQuery OK, 1 row affected (0.01 sec)\n\nmysql&gt; select * from dept;\n+------+--------+\n| did  | dname  | #è®°å½•1001éƒ¨é—¨è¢«åˆ é™¤äº†\n+------+--------+\n| 1003 | å’¨è¯¢éƒ¨  |\n| 1004 | è´¢åŠ¡éƒ¨  |\n+------+--------+\n2 rows in set (0.00 sec)\n\nmysql&gt; select * from emp;\n+-----+-------+--------+\n| eid | ename | deptid |\n+-----+-------+--------+\n|   1 | å¼ ä¸‰  |   NULL | #åŸæ¥å¼•ç”¨1001éƒ¨é—¨çš„å‘˜å·¥ï¼Œdeptidå­—æ®µå˜ä¸ºnull\n|   2 | æå››  |   NULL |\n|   3 | ç‹äº”  |   1004 |\n+-----+-------+--------+\n3 rows in set (0.00 sec)\nï¼ˆ2ï¼‰æ¼”ç¤º2ï¼šon update set null on delete cascade\ncreate table dept(\n\tdid int primary key,\t\t#éƒ¨é—¨ç¼–å·\n    dname varchar(50)\t\t\t#éƒ¨é—¨åç§°\n);\n\ncreate table emp(\n\teid int primary key,  #å‘˜å·¥ç¼–å·\n    ename varchar(5),     #å‘˜å·¥å§“å\n    deptid int,\t\t\t\t#å‘˜å·¥æ‰€åœ¨çš„éƒ¨é—¨\n    foreign key (deptid) references dept(did)  on update set null on delete cascade\n    #æŠŠä¿®æ”¹æ“ä½œè®¾ç½®ä¸ºset nullç­‰çº§ï¼ŒæŠŠåˆ é™¤æ“ä½œè®¾ç½®ä¸ºçº§è”åˆ é™¤ç­‰çº§\n);\ninsert into dept values(1001,'æ•™å­¦éƒ¨');\ninsert into dept values(1002, 'è´¢åŠ¡éƒ¨');\ninsert into dept values(1003, 'å’¨è¯¢éƒ¨');\n\ninsert into emp values(1,'å¼ ä¸‰',1001); #åœ¨æ·»åŠ è¿™æ¡è®°å½•æ—¶ï¼Œè¦æ±‚éƒ¨é—¨è¡¨æœ‰1001éƒ¨é—¨\ninsert into emp values(2,'æå››',1001);\ninsert into emp values(3,'ç‹äº”',1002);\nmysql&gt; select * from dept;\n+------+--------+\n| did  | dname  |\n+------+--------+\n| 1001 | æ•™å­¦éƒ¨ |\n| 1002 | è´¢åŠ¡éƒ¨ |\n| 1003 | å’¨è¯¢éƒ¨ |\n+------+--------+\n3 rows in set (0.00 sec)\n\nmysql&gt; select * from emp;\n+-----+-------+--------+\n| eid | ename | deptid |\n+-----+-------+--------+\n|   1 | å¼ ä¸‰  |   1001 |\n|   2 | æå››  |   1001 |\n|   3 | ç‹äº”  |   1002 |\n+-----+-------+--------+\n3 rows in set (0.00 sec)\n#ä¿®æ”¹ä¸»è¡¨ï¼Œä»è¡¨å¯¹åº”çš„å­—æ®µè®¾ç½®ä¸ºnull\nmysql&gt; update dept set did = 1004 where did = 1002;\nQuery OK, 1 row affected (0.00 sec)\nRows matched: 1  Changed: 1  Warnings: 0\n\nmysql&gt; select * from dept;\n+------+--------+\n| did  | dname  |\n+------+--------+\n| 1001 | æ•™å­¦éƒ¨ |\n| 1003 | å’¨è¯¢éƒ¨ |\n| 1004 | è´¢åŠ¡éƒ¨ | #åŸæ¥didæ˜¯1002\n+------+--------+\n3 rows in set (0.00 sec)\n\nmysql&gt; select * from emp;\n+-----+-------+--------+\n| eid | ename | deptid |\n+-----+-------+--------+\n|   1 | å¼ ä¸‰  |   1001 |\n|   2 | æå››  |   1001 |\n|   3 | ç‹äº”  |   NULL | #åŸæ¥deptidæ˜¯1002ï¼Œå› ä¸ºéƒ¨é—¨è¡¨1002è¢«ä¿®æ”¹äº†ï¼Œ1002æ²¡æœ‰å¯¹åº”çš„äº†ï¼Œå°±è®¾ç½®ä¸ºnull\n+-----+-------+--------+\n3 rows in set (0.00 sec)\n#åˆ é™¤ä¸»è¡¨çš„è®°å½•æˆåŠŸï¼Œä¸»è¡¨çš„1001è¡Œè¢«åˆ é™¤äº†ï¼Œä»è¡¨ç›¸åº”çš„è®°å½•ä¹Ÿè¢«åˆ é™¤äº†\nmysql&gt; delete from dept where did=1001;\nQuery OK, 1 row affected (0.00 sec)\n\nmysql&gt; select * from dept;\n+------+--------+\n| did  | dname  | #éƒ¨é—¨è¡¨ä¸­1001éƒ¨é—¨è¢«åˆ é™¤\n+------+--------+\n| 1003 | å’¨è¯¢éƒ¨ |\n| 1004 | è´¢åŠ¡éƒ¨ |\n+------+--------+\n2 rows in set (0.00 sec)\n\nmysql&gt; select * from emp;\n+-----+-------+--------+\n| eid | ename | deptid |#åŸæ¥1001éƒ¨é—¨çš„å‘˜å·¥ä¹Ÿè¢«åˆ é™¤äº†\n+-----+-------+--------+\n|   3 | ç‹äº”  |   NULL |\n+-----+-------+--------+\n1 row in set (0.00 sec)\n\nï¼ˆ3ï¼‰æ¼”ç¤ºï¼šon update cascade on delete cascade\ncreate table dept(\n\tdid int primary key,\t\t#éƒ¨é—¨ç¼–å·\n    dname varchar(50)\t\t\t#éƒ¨é—¨åç§°\n);\n\ncreate table emp(\n\teid int primary key,  #å‘˜å·¥ç¼–å·\n    ename varchar(5),     #å‘˜å·¥å§“å\n    deptid int,\t\t\t\t#å‘˜å·¥æ‰€åœ¨çš„éƒ¨é—¨\n    foreign key (deptid) references dept(did)  on update cascade on delete cascade\n    #æŠŠä¿®æ”¹æ“ä½œè®¾ç½®ä¸ºçº§è”ä¿®æ”¹ç­‰çº§ï¼ŒæŠŠåˆ é™¤æ“ä½œä¹Ÿè®¾ç½®ä¸ºçº§è”åˆ é™¤ç­‰çº§\n);\ninsert into dept values(1001,'æ•™å­¦éƒ¨');\ninsert into dept values(1002, 'è´¢åŠ¡éƒ¨');\ninsert into dept values(1003, 'å’¨è¯¢éƒ¨');\n\ninsert into emp values(1,'å¼ ä¸‰',1001); #åœ¨æ·»åŠ è¿™æ¡è®°å½•æ—¶ï¼Œè¦æ±‚éƒ¨é—¨è¡¨æœ‰1001éƒ¨é—¨\ninsert into emp values(2,'æå››',1001);\ninsert into emp values(3,'ç‹äº”',1002);\nmysql&gt; select * from dept;\n+------+--------+\n| did  | dname  |\n+------+--------+\n| 1001 | æ•™å­¦éƒ¨ |\n| 1002 | è´¢åŠ¡éƒ¨ |\n| 1003 | å’¨è¯¢éƒ¨ |\n+------+--------+\n3 rows in set (0.00 sec)\n\nmysql&gt; select * from emp;\n+-----+-------+--------+\n| eid | ename | deptid |\n+-----+-------+--------+\n|   1 | å¼ ä¸‰  |   1001 |\n|   2 | æå››  |   1001 |\n|   3 | ç‹äº”  |   1002 |\n+-----+-------+--------+\n3 rows in set (0.00 sec)\n#ä¿®æ”¹ä¸»è¡¨ï¼Œä»è¡¨å¯¹åº”çš„å­—æ®µè‡ªåŠ¨ä¿®æ”¹\nmysql&gt; update dept set did = 1004 where did = 1002;\nQuery OK, 1 row affected (0.00 sec)\nRows matched: 1  Changed: 1  Warnings: 0\n\nmysql&gt; select * from dept;\n+------+--------+\n| did  | dname  |\n+------+--------+\n| 1001 | æ•™å­¦éƒ¨ |\n| 1003 | å’¨è¯¢éƒ¨ |\n| 1004 | è´¢åŠ¡éƒ¨ | #éƒ¨é—¨1002ä¿®æ”¹ä¸º1004\n+------+--------+\n3 rows in set (0.00 sec)\n\nmysql&gt; select * from emp;\n+-----+-------+--------+\n| eid | ename | deptid |\n+-----+-------+--------+\n|   1 | å¼ ä¸‰  |   1001 |\n|   2 | æå››  |   1001 |\n|   3 | ç‹äº”  |   1004 | #çº§è”ä¿®æ”¹\n+-----+-------+--------+\n3 rows in set (0.00 sec)\n#åˆ é™¤ä¸»è¡¨çš„è®°å½•æˆåŠŸï¼Œä¸»è¡¨çš„1001è¡Œè¢«åˆ é™¤äº†ï¼Œä»è¡¨ç›¸åº”çš„è®°å½•ä¹Ÿè¢«åˆ é™¤äº†\nmysql&gt; delete from dept where did=1001;\nQuery OK, 1 row affected (0.00 sec)\n\nmysql&gt; select * from dept;\n+------+--------+\n| did  | dname  | #1001éƒ¨é—¨è¢«åˆ é™¤äº†\n+------+--------+\n| 1003 | å’¨è¯¢éƒ¨ |\n| 1004 | è´¢åŠ¡éƒ¨ | \n+------+--------+\n2 rows in set (0.00 sec)\n\nmysql&gt; select * from emp;\n+-----+-------+--------+\n| eid | ename | deptid |  #1001éƒ¨é—¨çš„å‘˜å·¥ä¹Ÿè¢«åˆ é™¤äº†\n+-----+-------+--------+\n|   3 | ç‹äº”  |   1004 |\n+-----+-------+--------+\n1 row in set (0.00 sec)\n6.8 åˆ é™¤å¤–é”®çº¦æŸæµç¨‹å¦‚ä¸‹ï¼š\n(1)ç¬¬ä¸€æ­¥å…ˆæŸ¥çœ‹çº¦æŸåå’Œåˆ é™¤å¤–é”®çº¦æŸ\nSELECT * FROM information_schema.table_constraints WHERE table_name = 'è¡¨åç§°';#æŸ¥çœ‹æŸä¸ªè¡¨çš„çº¦æŸå\n\nALTER TABLE ä»è¡¨å DROP FOREIGN KEY å¤–é”®çº¦æŸå;\n\nï¼ˆ2ï¼‰ç¬¬äºŒæ­¥æŸ¥çœ‹ç´¢å¼•åå’Œåˆ é™¤ç´¢å¼•ã€‚ï¼ˆæ³¨æ„ï¼Œåªèƒ½æ‰‹åŠ¨åˆ é™¤ï¼‰\nSHOW INDEX FROM è¡¨åç§°; #æŸ¥çœ‹æŸä¸ªè¡¨çš„ç´¢å¼•å\n\nALTER TABLE ä»è¡¨å DROP INDEX ç´¢å¼•å;\n\nä¸¾ä¾‹ï¼š\nmysql&gt; SELECT * FROM information_schema.table_constraints WHERE table_name = 'emp';\n\nmysql&gt; alter table emp drop foreign key emp_ibfk_1;\nQuery OK, 0 rows affected (0.02 sec)\nRecords: 0  Duplicates: 0  Warnings: 0\n\nmysql&gt; show index from emp;\n\nmysql&gt; alter table emp drop index deptid;\nQuery OK, 0 rows affected (0.01 sec)\nRecords: 0  Duplicates: 0  Warnings: 0\n\nmysql&gt;  show index from emp;\n6.9 å¼€å‘åœºæ™¯é—®é¢˜1ï¼šå¦‚æœä¸¤ä¸ªè¡¨ä¹‹é—´æœ‰å…³ç³»ï¼ˆä¸€å¯¹ä¸€ã€ä¸€å¯¹å¤šï¼‰ï¼Œæ¯”å¦‚ï¼šå‘˜å·¥è¡¨å’Œéƒ¨é—¨è¡¨ï¼ˆä¸€å¯¹å¤šï¼‰ï¼Œå®ƒä»¬ä¹‹é—´æ˜¯å¦ä¸€å®šè¦å»ºå¤–é”®çº¦æŸï¼Ÿ\nç­”ï¼šä¸æ˜¯çš„\né—®é¢˜2ï¼šå»ºå’Œä¸å»ºå¤–é”®çº¦æŸæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\nç­”ï¼šå»ºå¤–é”®çº¦æŸï¼Œä½ çš„æ“ä½œï¼ˆåˆ›å»ºè¡¨ã€åˆ é™¤è¡¨ã€æ·»åŠ ã€ä¿®æ”¹ã€åˆ é™¤ï¼‰ä¼šå—åˆ°é™åˆ¶ï¼Œä»è¯­æ³•å±‚é¢å—åˆ°é™åˆ¶ã€‚ä¾‹å¦‚ï¼šåœ¨å‘˜å·¥è¡¨ä¸­ä¸å¯èƒ½æ·»åŠ ä¸€ä¸ªå‘˜å·¥ä¿¡æ¯ï¼Œå®ƒçš„éƒ¨é—¨çš„å€¼åœ¨éƒ¨é—¨è¡¨ä¸­æ‰¾ä¸åˆ°ã€‚\nä¸å»ºå¤–é”®çº¦æŸï¼Œä½ çš„æ“ä½œï¼ˆåˆ›å»ºè¡¨ã€åˆ é™¤è¡¨ã€æ·»åŠ ã€ä¿®æ”¹ã€åˆ é™¤ï¼‰ä¸å—é™åˆ¶ï¼Œè¦ä¿è¯æ•°æ®çš„å¼•ç”¨å®Œæ•´æ€§ï¼Œåªèƒ½ä¾é ç¨‹åºå‘˜çš„è‡ªè§‰ï¼Œæˆ–è€…æ˜¯åœ¨Javaç¨‹åºä¸­è¿›è¡Œé™å®šã€‚ä¾‹å¦‚ï¼šåœ¨å‘˜å·¥è¡¨ä¸­ï¼Œå¯ä»¥æ·»åŠ ä¸€ä¸ªå‘˜å·¥çš„ä¿¡æ¯ï¼Œå®ƒçš„éƒ¨é—¨æŒ‡å®šä¸ºä¸€ä¸ªå®Œå…¨ä¸å­˜åœ¨çš„éƒ¨é—¨ã€‚\né—®é¢˜3ï¼šé‚£ä¹ˆå»ºå’Œä¸å»ºå¤–é”®çº¦æŸå’ŒæŸ¥è¯¢æœ‰æ²¡æœ‰å…³ç³»ï¼Ÿ\nç­”ï¼šæ²¡æœ‰\n\n\n\n\n\n\n\n\n\nåœ¨ MySQL é‡Œï¼Œå¤–é”®çº¦æŸæ˜¯æœ‰æˆæœ¬çš„ï¼Œéœ€è¦æ¶ˆè€—ç³»ç»Ÿèµ„æºã€‚å¯¹äºå¤§å¹¶å‘çš„ SQL æ“ä½œï¼Œæœ‰å¯èƒ½ä¼šä¸é€‚åˆã€‚æ¯”å¦‚å¤§å‹ç½‘ç«™çš„ä¸­å¤®æ•°æ®åº“ï¼Œå¯èƒ½ä¼šå› ä¸ºå¤–é”®çº¦æŸçš„ç³»ç»Ÿå¼€é”€è€Œå˜å¾—éå¸¸æ…¢ã€‚æ‰€ä»¥ï¼Œ MySQL å…è®¸ä½ ä¸ä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„å¤–é”®çº¦æŸï¼Œåœ¨åº”ç”¨å±‚é¢å®Œæˆæ£€æŸ¥æ•°æ®ä¸€è‡´æ€§çš„é€»è¾‘ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå³ä½¿ä½ ä¸ç”¨å¤–é”®çº¦æŸï¼Œä¹Ÿè¦æƒ³åŠæ³•é€šè¿‡åº”ç”¨å±‚é¢çš„é™„åŠ é€»è¾‘ï¼Œæ¥å®ç°å¤–é”®çº¦æŸçš„åŠŸèƒ½ï¼Œç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§ã€‚\n6.10 é˜¿é‡Œå¼€å‘è§„èŒƒã€å¼ºåˆ¶ã€‘ä¸å¾—ä½¿ç”¨å¤–é”®ä¸çº§è”ï¼Œä¸€åˆ‡å¤–é”®æ¦‚å¿µå¿…é¡»åœ¨åº”ç”¨å±‚è§£å†³ã€‚ \nè¯´æ˜ï¼šï¼ˆæ¦‚å¿µè§£é‡Šï¼‰å­¦ç”Ÿè¡¨ä¸­çš„ student_id æ˜¯ä¸»é”®ï¼Œé‚£ä¹ˆæˆç»©è¡¨ä¸­çš„ student_id åˆ™ä¸ºå¤–é”®ã€‚å¦‚æœæ›´æ–°å­¦ç”Ÿè¡¨ä¸­çš„ student_idï¼ŒåŒæ—¶è§¦å‘æˆç»©è¡¨ä¸­çš„ student_id æ›´æ–°ï¼Œå³ä¸ºçº§è”æ›´æ–°ã€‚å¤–é”®ä¸çº§è”æ›´æ–°é€‚ç”¨äºå•æœºä½å¹¶å‘ï¼Œä¸é€‚åˆåˆ†å¸ƒå¼ã€é«˜å¹¶å‘é›†ç¾¤ï¼›çº§è”æ›´æ–°æ˜¯å¼ºé˜»å¡ï¼Œå­˜åœ¨æ•°æ®åº“æ›´æ–°é£æš´çš„é£é™©ï¼›å¤–é”®å½±å“æ•°æ®åº“çš„æ’å…¥é€Ÿåº¦ã€‚\n7. CHECK çº¦æŸ7.1 ä½œç”¨æ£€æŸ¥æŸä¸ªå­—æ®µçš„å€¼æ˜¯å¦ç¬¦å·xxè¦æ±‚ï¼Œä¸€èˆ¬æŒ‡çš„æ˜¯å€¼çš„èŒƒå›´\n2ã€å…³é”®å­—CHECK\n3ã€è¯´æ˜ï¼šMySQL 5.7 ä¸æ”¯æŒMySQL5.7 å¯ä»¥ä½¿ç”¨checkçº¦æŸï¼Œä½†checkçº¦æŸå¯¹æ•°æ®éªŒè¯æ²¡æœ‰ä»»ä½•ä½œç”¨ã€‚æ·»åŠ æ•°æ®æ—¶ï¼Œæ²¡æœ‰ä»»ä½•é”™è¯¯æˆ–è­¦å‘Š\nä½†æ˜¯MySQL 8.0ä¸­å¯ä»¥ä½¿ç”¨checkçº¦æŸäº†ã€‚\ncreate table employee(\n\teid int primary key,\n    ename varchar(5),\n    gender char check ('ç”·' or 'å¥³')\n);\ninsert into employee values(1,'å¼ ä¸‰','å¦–');\nmysql&gt; select * from employee;\n+-----+-------+--------+\n| eid | ename | gender |\n+-----+-------+--------+\n|   1 | å¼ ä¸‰   | å¦–     |\n+-----+-------+--------+\n1 row in set (0.00 sec)\n\nå†ä¸¾ä¾‹\n\nCREATE TABLE temp(\nid INT AUTO_INCREMENT,\nNAME VARCHAR(20),\nage INT CHECK(age &gt; 20),\nPRIMARY KEY(id)\n);\n\nå†ä¸¾ä¾‹\n\nage tinyint check(age &gt;20) æˆ– sex char(2) check(sex in(â€˜ç”·â€™,â€™å¥³â€™))\n\nå†ä¸¾ä¾‹\n\nCHECK(height&gt;=0 AND height&lt;3)\n8. DEFAULTçº¦æŸ8.1 ä½œç”¨ç»™æŸä¸ªå­—æ®µ/æŸåˆ—æŒ‡å®šé»˜è®¤å€¼ï¼Œä¸€æ—¦è®¾ç½®é»˜è®¤å€¼ï¼Œåœ¨æ’å…¥æ•°æ®æ—¶ï¼Œå¦‚æœæ­¤å­—æ®µæ²¡æœ‰æ˜¾å¼èµ‹å€¼ï¼Œåˆ™èµ‹å€¼ä¸ºé»˜è®¤å€¼ã€‚\n8.2 å…³é”®å­—DEFAULT\n8.3 å¦‚ä½•ç»™å­—æ®µåŠ é»˜è®¤å€¼ï¼ˆ1ï¼‰å»ºè¡¨æ—¶\ncreate table è¡¨åç§°(\n\tå­—æ®µå  æ•°æ®ç±»å‹  primary key,\n    å­—æ®µå  æ•°æ®ç±»å‹  unique key not null,  \n    å­—æ®µå  æ•°æ®ç±»å‹  unique key,\n    å­—æ®µå  æ•°æ®ç±»å‹  not null default é»˜è®¤å€¼, \n);\ncreate table è¡¨åç§°(\n\tå­—æ®µå  æ•°æ®ç±»å‹ default é»˜è®¤å€¼ ,\n    å­—æ®µå  æ•°æ®ç±»å‹ not null default é»˜è®¤å€¼,  \n    å­—æ®µå  æ•°æ®ç±»å‹ not null default é»˜è®¤å€¼,\n    primary key(å­—æ®µå),\n    unique key(å­—æ®µå)\n);\n\nè¯´æ˜ï¼šé»˜è®¤å€¼çº¦æŸä¸€èˆ¬ä¸åœ¨å”¯ä¸€é”®å’Œä¸»é”®åˆ—ä¸ŠåŠ \ncreate table employee(\n\teid int primary key,\n    ename varchar(20) not null,\n    gender char default 'ç”·',\n    tel char(11) not null default '' #é»˜è®¤æ˜¯ç©ºå­—ç¬¦ä¸²\n);\nmysql&gt; desc employee;\n+--------+-------------+------+-----+---------+-------+\n| Field  | Type        | Null | Key | Default | Extra |\n+--------+-------------+------+-----+---------+-------+\n| eid    | int(11)     | NO   | PRI | NULL    |       |\n| ename  | varchar(20) | NO   |     | NULL    |       |\n| gender | char(1)     | YES  |     | ç”·      |       |\n| tel    | char(11)    | NO   |     |         |       |\n+--------+-------------+------+-----+---------+-------+\n4 rows in set (0.00 sec)\ninsert into employee values(1,'æ±ªé£','ç”·','13700102535'); #æˆåŠŸ\nmysql&gt; select * from employee;\n+-----+-------+--------+-------------+\n| eid | ename | gender | tel         |\n+-----+-------+--------+-------------+\n|   1 | æ±ªé£  | ç”·     | 13700102535 |\n+-----+-------+--------+-------------+\n1 row in set (0.00 sec)\ninsert into employee(eid,ename) values(2,'å¤©çª'); #æˆåŠŸ\nmysql&gt; select * from employee;\n+-----+-------+--------+-------------+\n| eid | ename | gender | tel         |\n+-----+-------+--------+-------------+\n|   1 | æ±ªé£  | ç”·     | 13700102535 |\n|   2 | å¤©çª  | ç”·     |             |\n+-----+-------+--------+-------------+\n2 rows in set (0.00 sec)\ninsert into employee(eid,ename) values(3,'äºŒè™');\n#ERROR 1062 (23000): Duplicate entry '' for key 'tel'  \n#å¦‚æœtelæœ‰å”¯ä¸€æ€§çº¦æŸçš„è¯ä¼šæŠ¥é”™ï¼Œå¦‚æœtelæ²¡æœ‰å”¯ä¸€æ€§çº¦æŸï¼Œå¯ä»¥æ·»åŠ æˆåŠŸ\nå†ä¸¾ä¾‹ï¼š\nCREATE TABLE myemp(\nid INT AUTO_INCREMENT PRIMARY KEY,\nNAME VARCHAR(15),\nsalary DOUBLE(10,2) DEFAULT 2000\n);\nï¼ˆ2ï¼‰å»ºè¡¨å\nalter table è¡¨åç§° modify å­—æ®µå æ•°æ®ç±»å‹ default é»˜è®¤å€¼;\n\n#å¦‚æœè¿™ä¸ªå­—æ®µåŸæ¥æœ‰éç©ºçº¦æŸï¼Œä½ è¿˜ä¿ç•™éç©ºçº¦æŸï¼Œé‚£ä¹ˆåœ¨åŠ é»˜è®¤å€¼çº¦æŸæ—¶ï¼Œè¿˜å¾—ä¿ç•™éç©ºçº¦æŸï¼Œå¦åˆ™éç©ºçº¦æŸå°±è¢«åˆ é™¤äº†\n#åŒç†ï¼Œåœ¨ç»™æŸä¸ªå­—æ®µåŠ éç©ºçº¦æŸä¹Ÿä¸€æ ·ï¼Œå¦‚æœè¿™ä¸ªå­—æ®µåŸæ¥æœ‰é»˜è®¤å€¼çº¦æŸï¼Œä½ æƒ³ä¿ç•™ï¼Œä¹Ÿè¦åœ¨modifyè¯­å¥ä¸­ä¿ç•™é»˜è®¤å€¼çº¦æŸï¼Œå¦åˆ™å°±åˆ é™¤äº†\nalter table è¡¨åç§° modify å­—æ®µå æ•°æ®ç±»å‹ default é»˜è®¤å€¼ not null;\ncreate table employee(\n\teid int primary key,\n    ename varchar(20),\n    gender char,\n    tel char(11) not null\n);\nmysql&gt; desc employee;\n+--------+-------------+------+-----+---------+-------+\n| Field  | Type        | Null | Key | Default | Extra |\n+--------+-------------+------+-----+---------+-------+\n| eid    | int(11)     | NO   | PRI | NULL    |       |\n| ename  | varchar(20) | YES  |     | NULL    |       |\n| gender | char(1)     | YES  |     | NULL    |       |\n| tel    | char(11)    | NO   |     | NULL    |       |\n+--------+-------------+------+-----+---------+-------+\n4 rows in set (0.00 sec)\nalter table employee modify gender char default 'ç”·';  #ç»™genderå­—æ®µå¢åŠ é»˜è®¤å€¼çº¦æŸ\nalter table employee modify tel char(11) default ''; #ç»™telå­—æ®µå¢åŠ é»˜è®¤å€¼çº¦æŸ\nmysql&gt; desc employee;\n+--------+-------------+------+-----+---------+-------+\n| Field  | Type        | Null | Key | Default | Extra |\n+--------+-------------+------+-----+---------+-------+\n| eid    | int(11)     | NO   | PRI | NULL    |       |\n| ename  | varchar(20) | YES  |     | NULL    |       |\n| gender | char(1)     | YES  |     | ç”·      |       |\n| tel    | char(11)    | YES  |     |         |       |\n+--------+-------------+------+-----+---------+-------+\n4 rows in set (0.00 sec)\nalter table employee modify tel char(11) default ''  not null;#ç»™telå­—æ®µå¢åŠ é»˜è®¤å€¼çº¦æŸï¼Œå¹¶ä¿ç•™éç©ºçº¦æŸ\nmysql&gt; desc employee;\n+--------+-------------+------+-----+---------+-------+\n| Field  | Type        | Null | Key | Default | Extra |\n+--------+-------------+------+-----+---------+-------+\n| eid    | int(11)     | NO   | PRI | NULL    |       |\n| ename  | varchar(20) | YES  |     | NULL    |       |\n| gender | char(1)     | YES  |     | ç”·      |       |\n| tel    | char(11)    | NO   |     |         |       |\n+--------+-------------+------+-----+---------+-------+\n4 rows in set (0.00 sec)\n8.4 å¦‚ä½•åˆ é™¤é»˜è®¤å€¼çº¦æŸalter table è¡¨åç§° modify å­—æ®µå æ•°æ®ç±»å‹ ;#åˆ é™¤é»˜è®¤å€¼çº¦æŸï¼Œä¹Ÿä¸ä¿ç•™éç©ºçº¦æŸ\n\nalter table è¡¨åç§° modify å­—æ®µå æ•°æ®ç±»å‹  not null; #åˆ é™¤é»˜è®¤å€¼çº¦æŸï¼Œä¿ç•™éç©ºçº¦æŸ\nalter table employee modify gender char; #åˆ é™¤genderå­—æ®µé»˜è®¤å€¼çº¦æŸï¼Œå¦‚æœæœ‰éç©ºçº¦æŸï¼Œä¹Ÿä¸€å¹¶åˆ é™¤\nalter table employee modify tel char(11)  not null;#åˆ é™¤telå­—æ®µé»˜è®¤å€¼çº¦æŸï¼Œä¿ç•™éç©ºçº¦æŸ\nmysql&gt; desc employee;\n+--------+-------------+------+-----+---------+-------+\n| Field  | Type        | Null | Key | Default | Extra |\n+--------+-------------+------+-----+---------+-------+\n| eid    | int(11)     | NO   | PRI | NULL    |       |\n| ename  | varchar(20) | YES  |     | NULL    |       |\n| gender | char(1)     | YES  |     | NULL    |       |\n| tel    | char(11)    | NO   |     | NULL    |       |\n+--------+-------------+------+-----+---------+-------+\n4 rows in set (0.00 sec)\n9. é¢è¯•é¢è¯•1ã€ä¸ºä»€ä¹ˆå»ºè¡¨æ—¶ï¼ŒåŠ  not null default â€˜â€™ æˆ– default 0\nç­”ï¼šä¸æƒ³è®©è¡¨ä¸­å‡ºç°nullå€¼ã€‚\né¢è¯•2ã€ä¸ºä»€ä¹ˆä¸æƒ³è¦ null çš„å€¼\nç­”:ï¼ˆ1ï¼‰ä¸å¥½æ¯”è¾ƒã€‚nullæ˜¯ä¸€ç§ç‰¹æ®Šå€¼ï¼Œæ¯”è¾ƒæ—¶åªèƒ½ç”¨ä¸“é—¨çš„is null å’Œ is not nullæ¥æ¯”è¾ƒã€‚ç¢°åˆ°è¿ç®—ç¬¦ï¼Œé€šå¸¸è¿”å›nullã€‚\nâ€‹     ï¼ˆ2ï¼‰æ•ˆç‡ä¸é«˜ã€‚å½±å“æé«˜ç´¢å¼•æ•ˆæœã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¾€å¾€åœ¨å»ºè¡¨æ—¶ not null default â€˜â€™ æˆ– default 0\né¢è¯•3ã€å¸¦AUTO_INCREMENTçº¦æŸçš„å­—æ®µå€¼æ˜¯ä»1å¼€å§‹çš„å—ï¼Ÿåœ¨MySQLä¸­ï¼Œé»˜è®¤AUTO_INCREMENTçš„åˆå§‹å€¼æ˜¯1ï¼Œæ¯æ–°å¢ä¸€æ¡è®°å½•ï¼Œå­—æ®µå€¼è‡ªåŠ¨åŠ 1ã€‚è®¾ç½®è‡ªå¢å±æ€§ï¼ˆAUTO_INCREMENTï¼‰çš„æ—¶å€™ï¼Œè¿˜å¯ä»¥æŒ‡å®šç¬¬ä¸€æ¡æ’å…¥è®°å½•çš„è‡ªå¢å­—æ®µçš„å€¼ï¼Œè¿™æ ·æ–°æ’å…¥çš„è®°å½•çš„è‡ªå¢å­—æ®µå€¼ä»åˆå§‹å€¼å¼€å§‹é€’å¢ï¼Œå¦‚åœ¨è¡¨ä¸­æ’å…¥ç¬¬ä¸€æ¡è®°å½•ï¼ŒåŒæ—¶æŒ‡å®šidå€¼ä¸º5ï¼Œåˆ™ä»¥åæ’å…¥çš„è®°å½•çš„idå€¼å°±ä¼šä»6å¼€å§‹å¾€ä¸Šå¢åŠ ã€‚æ·»åŠ ä¸»é”®çº¦æŸæ—¶ï¼Œå¾€å¾€éœ€è¦è®¾ç½®å­—æ®µè‡ªåŠ¨å¢åŠ å±æ€§ã€‚\né¢è¯•4ã€å¹¶ä¸æ˜¯æ¯ä¸ªè¡¨éƒ½å¯ä»¥ä»»æ„é€‰æ‹©å­˜å‚¨å¼•æ“ï¼Ÿå¤–é”®çº¦æŸï¼ˆFOREIGN KEYï¼‰ä¸èƒ½è·¨å¼•æ“ä½¿ç”¨ã€‚\nMySQLæ”¯æŒå¤šç§å­˜å‚¨å¼•æ“ï¼Œæ¯ä¸€ä¸ªè¡¨éƒ½å¯ä»¥æŒ‡å®šä¸€ä¸ªä¸åŒçš„å­˜å‚¨å¼•æ“ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼šå¤–é”®çº¦æŸæ˜¯ç”¨æ¥ä¿è¯æ•°æ®çš„å‚ç…§å®Œæ•´æ€§çš„ï¼Œå¦‚æœè¡¨ä¹‹é—´éœ€è¦å…³è”å¤–é”®ï¼Œå´æŒ‡å®šäº†ä¸åŒçš„å­˜å‚¨å¼•æ“ï¼Œé‚£ä¹ˆè¿™äº›è¡¨ä¹‹é—´æ˜¯ä¸èƒ½åˆ›å»ºå¤–é”®çº¦æŸçš„ã€‚æ‰€ä»¥è¯´ï¼Œå­˜å‚¨å¼•æ“çš„é€‰æ‹©ä¹Ÿä¸å®Œå…¨æ˜¯éšæ„çš„ã€‚\nç¬¬16ç« _å˜é‡ã€æµç¨‹æ§åˆ¶ä¸æ¸¸æ ‡åœ¨MySQLæ•°æ®åº“çš„å­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°ä¸­ï¼Œå¯ä»¥ä½¿ç”¨å˜é‡æ¥å­˜å‚¨æŸ¥è¯¢æˆ–è®¡ç®—çš„ä¸­é—´ç»“æœæ•°æ®ï¼Œæˆ–è€…è¾“å‡ºæœ€ç»ˆçš„ç»“æœæ•°æ®ã€‚\nåœ¨ MySQL æ•°æ®åº“ä¸­ï¼Œå˜é‡åˆ†ä¸ºç³»ç»Ÿå˜é‡ä»¥åŠç”¨æˆ·è‡ªå®šä¹‰å˜é‡ã€‚\n1.1 ç³»ç»Ÿå˜é‡1.1.1 ç³»ç»Ÿå˜é‡åˆ†ç±»å˜é‡ç”±ç³»ç»Ÿå®šä¹‰ï¼Œä¸æ˜¯ç”¨æˆ·å®šä¹‰ï¼Œå±äºæœåŠ¡å™¨å±‚é¢ã€‚å¯åŠ¨MySQLæœåŠ¡ï¼Œç”ŸæˆMySQLæœåŠ¡å®ä¾‹æœŸé—´ï¼ŒMySQLå°†ä¸ºMySQLæœåŠ¡å™¨å†…å­˜ä¸­çš„ç³»ç»Ÿå˜é‡èµ‹å€¼ï¼Œè¿™äº›ç³»ç»Ÿå˜é‡å®šä¹‰äº†å½“å‰MySQLæœåŠ¡å®ä¾‹çš„å±æ€§ã€ç‰¹å¾ã€‚è¿™äº›ç³»ç»Ÿå˜é‡çš„å€¼è¦ä¹ˆæ˜¯ç¼–è¯‘MySQLæ—¶å‚æ•°çš„é»˜è®¤å€¼ï¼Œè¦ä¹ˆæ˜¯é…ç½®æ–‡ä»¶ï¼ˆä¾‹å¦‚my.iniç­‰ï¼‰ä¸­çš„å‚æ•°å€¼ã€‚å¤§å®¶å¯ä»¥é€šè¿‡ç½‘å€ https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html æŸ¥çœ‹MySQLæ–‡æ¡£çš„ç³»ç»Ÿå˜é‡ã€‚\nç³»ç»Ÿå˜é‡åˆ†ä¸ºå…¨å±€ç³»ç»Ÿå˜é‡ï¼ˆéœ€è¦æ·»åŠ global å…³é”®å­—ï¼‰ä»¥åŠä¼šè¯ç³»ç»Ÿå˜é‡ï¼ˆéœ€è¦æ·»åŠ  session å…³é”®å­—ï¼‰ï¼Œæœ‰æ—¶ä¹ŸæŠŠå…¨å±€ç³»ç»Ÿå˜é‡ç®€ç§°ä¸ºå…¨å±€å˜é‡ï¼Œæœ‰æ—¶ä¹ŸæŠŠä¼šè¯ç³»ç»Ÿå˜é‡ç§°ä¸ºlocalå˜é‡ã€‚å¦‚æœä¸å†™ï¼Œé»˜è®¤ä¼šè¯çº§åˆ«ã€‚é™æ€å˜é‡ï¼ˆåœ¨ MySQL æœåŠ¡å®ä¾‹è¿è¡ŒæœŸé—´å®ƒä»¬çš„å€¼ä¸èƒ½ä½¿ç”¨ set åŠ¨æ€ä¿®æ”¹ï¼‰å±äºç‰¹æ®Šçš„å…¨å±€ç³»ç»Ÿå˜é‡ã€‚\næ¯ä¸€ä¸ªMySQLå®¢æˆ·æœºæˆåŠŸè¿æ¥MySQLæœåŠ¡å™¨åï¼Œéƒ½ä¼šäº§ç”Ÿä¸ä¹‹å¯¹åº”çš„ä¼šè¯ã€‚ä¼šè¯æœŸé—´ï¼ŒMySQLæœåŠ¡å®ä¾‹ä¼šåœ¨MySQLæœåŠ¡å™¨å†…å­˜ä¸­ç”Ÿæˆä¸è¯¥ä¼šè¯å¯¹åº”çš„ä¼šè¯ç³»ç»Ÿå˜é‡ï¼Œè¿™äº›ä¼šè¯ç³»ç»Ÿå˜é‡çš„åˆå§‹å€¼æ˜¯å…¨å±€ç³»ç»Ÿå˜é‡å€¼çš„å¤åˆ¶ã€‚å¦‚ä¸‹å›¾ï¼š\n\n\nå…¨å±€ç³»ç»Ÿå˜é‡é’ˆå¯¹äºæ‰€æœ‰ä¼šè¯ï¼ˆè¿æ¥ï¼‰æœ‰æ•ˆï¼Œä½†ä¸èƒ½è·¨é‡å¯\nä¼šè¯ç³»ç»Ÿå˜é‡ä»…é’ˆå¯¹äºå½“å‰ä¼šè¯ï¼ˆè¿æ¥ï¼‰æœ‰æ•ˆã€‚ä¼šè¯æœŸé—´ï¼Œå½“å‰ä¼šè¯å¯¹æŸä¸ªä¼šè¯ç³»ç»Ÿå˜é‡å€¼çš„ä¿®æ”¹ï¼Œä¸ä¼šå½±å“å…¶ä»–ä¼šè¯åŒä¸€ä¸ªä¼šè¯ç³»ç»Ÿå˜é‡çš„å€¼ã€‚\nä¼šè¯1å¯¹æŸä¸ªå…¨å±€ç³»ç»Ÿå˜é‡å€¼çš„ä¿®æ”¹ä¼šå¯¼è‡´ä¼šè¯2ä¸­åŒä¸€ä¸ªå…¨å±€ç³»ç»Ÿå˜é‡å€¼çš„ä¿®æ”¹ã€‚\n\nåœ¨MySQLä¸­æœ‰äº›ç³»ç»Ÿå˜é‡åªèƒ½æ˜¯å…¨å±€çš„ï¼Œä¾‹å¦‚ max_connections ç”¨äºé™åˆ¶æœåŠ¡å™¨çš„æœ€å¤§è¿æ¥æ•°ï¼›æœ‰äº›ç³»ç»Ÿå˜é‡ä½œç”¨åŸŸæ—¢å¯ä»¥æ˜¯å…¨å±€åˆå¯ä»¥æ˜¯ä¼šè¯ï¼Œä¾‹å¦‚ character_set_client ç”¨äºè®¾ç½®å®¢æˆ·ç«¯çš„å­—ç¬¦é›†ï¼›æœ‰äº›ç³»ç»Ÿå˜é‡çš„ä½œç”¨åŸŸåªèƒ½æ˜¯å½“å‰ä¼šè¯ï¼Œä¾‹å¦‚ pseudo_thread_id ç”¨äºæ ‡è®°å½“å‰ä¼šè¯çš„ MySQL è¿æ¥ IDã€‚\n1.1.2 æŸ¥çœ‹ç³»ç»Ÿå˜é‡\næŸ¥çœ‹æ‰€æœ‰æˆ–éƒ¨åˆ†ç³»ç»Ÿå˜é‡\n\n#æŸ¥çœ‹æ‰€æœ‰å…¨å±€å˜é‡\nSHOW GLOBAL VARIABLES;\n\n#æŸ¥çœ‹æ‰€æœ‰ä¼šè¯å˜é‡\nSHOW SESSION VARIABLES;\næˆ–\nSHOW VARIABLES;\n#æŸ¥çœ‹æ»¡è¶³æ¡ä»¶çš„éƒ¨åˆ†ç³»ç»Ÿå˜é‡ã€‚\nSHOW GLOBAL VARIABLES LIKE '%æ ‡è¯†ç¬¦%';\n\n#æŸ¥çœ‹æ»¡è¶³æ¡ä»¶çš„éƒ¨åˆ†ä¼šè¯å˜é‡\nSHOW SESSION VARIABLES LIKE '%æ ‡è¯†ç¬¦%';\nä¸¾ä¾‹ï¼š\nSHOW GLOBAL VARIABLES LIKE 'admin_%';\n\næŸ¥çœ‹æŒ‡å®šç³»ç»Ÿå˜é‡\n\nä½œä¸º MySQL ç¼–ç è§„èŒƒï¼ŒMySQL ä¸­çš„ç³»ç»Ÿå˜é‡ä»¥ä¸¤ä¸ªâ€œ@â€å¼€å¤´ï¼Œå…¶ä¸­â€œ@@globalâ€ä»…ç”¨äºæ ‡è®°å…¨å±€ç³»ç»Ÿå˜é‡ï¼Œâ€œ@@sessionâ€ä»…ç”¨äºæ ‡è®°ä¼šè¯ç³»ç»Ÿå˜é‡ã€‚â€œ@@â€é¦–å…ˆæ ‡è®°ä¼šè¯ç³»ç»Ÿå˜é‡ï¼Œå¦‚æœä¼šè¯ç³»ç»Ÿå˜é‡ä¸å­˜åœ¨ï¼Œåˆ™æ ‡è®°å…¨å±€ç³»ç»Ÿå˜é‡ã€‚\n#æŸ¥çœ‹æŒ‡å®šçš„ç³»ç»Ÿå˜é‡çš„å€¼\nSELECT @@global.å˜é‡å;\n\n#æŸ¥çœ‹æŒ‡å®šçš„ä¼šè¯å˜é‡çš„å€¼\nSELECT @@session.å˜é‡å;\n#æˆ–è€…\nSELECT @@å˜é‡å;\n\nä¿®æ”¹ç³»ç»Ÿå˜é‡çš„å€¼\n\næœ‰äº›æ—¶å€™ï¼Œæ•°æ®åº“ç®¡ç†å‘˜éœ€è¦ä¿®æ”¹ç³»ç»Ÿå˜é‡çš„é»˜è®¤å€¼ï¼Œä»¥ä¾¿ä¿®æ”¹å½“å‰ä¼šè¯æˆ–è€…MySQLæœåŠ¡å®ä¾‹çš„å±æ€§ã€ç‰¹å¾ã€‚å…·ä½“æ–¹æ³•ï¼š\næ–¹å¼1ï¼šä¿®æ”¹MySQLé…ç½®æ–‡ä»¶ï¼Œç»§è€Œä¿®æ”¹MySQLç³»ç»Ÿå˜é‡çš„å€¼ï¼ˆè¯¥æ–¹æ³•éœ€è¦é‡å¯MySQLæœåŠ¡ï¼‰\næ–¹å¼2ï¼šåœ¨MySQLæœåŠ¡è¿è¡ŒæœŸé—´ï¼Œä½¿ç”¨â€œsetâ€å‘½ä»¤é‡æ–°è®¾ç½®ç³»ç»Ÿå˜é‡çš„å€¼\n#ä¸ºæŸä¸ªç³»ç»Ÿå˜é‡èµ‹å€¼\n#æ–¹å¼1ï¼š\nSET @@global.å˜é‡å=å˜é‡å€¼;\n#æ–¹å¼2ï¼š\nSET GLOBAL å˜é‡å=å˜é‡å€¼;\n\n\n#ä¸ºæŸä¸ªä¼šè¯å˜é‡èµ‹å€¼\n#æ–¹å¼1ï¼š\nSET @@session.å˜é‡å=å˜é‡å€¼;\n#æ–¹å¼2ï¼š\nSET SESSION å˜é‡å=å˜é‡å€¼;\nä¸¾ä¾‹ï¼š\nSELECT @@global.autocommit;\nSET GLOBAL autocommit=0;\nSELECT @@session.tx_isolation;\nSET @@session.tx_isolation='read-uncommitted';\nSET GLOBAL max_connections = 1000;\nSELECT @@global.max_connections;\n1.2 ç”¨æˆ·å˜é‡1.2.1 ç”¨æˆ·å˜é‡åˆ†ç±»ç”¨æˆ·å˜é‡æ˜¯ç”¨æˆ·è‡ªå·±å®šä¹‰çš„ï¼Œä½œä¸º MySQL ç¼–ç è§„èŒƒï¼ŒMySQL ä¸­çš„ç”¨æˆ·å˜é‡ä»¥ä¸€ä¸ªâ€œ@â€å¼€å¤´ã€‚æ ¹æ®ä½œç”¨èŒƒå›´ä¸åŒï¼Œåˆåˆ†ä¸ºä¼šè¯ç”¨æˆ·å˜é‡å’Œå±€éƒ¨å˜é‡ã€‚\n\nä¼šè¯ç”¨æˆ·å˜é‡ï¼šä½œç”¨åŸŸå’Œä¼šè¯å˜é‡ä¸€æ ·ï¼Œåªå¯¹å½“å‰è¿æ¥ä¼šè¯æœ‰æ•ˆã€‚\n\nå±€éƒ¨å˜é‡ï¼šåªåœ¨ BEGIN å’Œ END è¯­å¥å—ä¸­æœ‰æ•ˆã€‚å±€éƒ¨å˜é‡åªèƒ½åœ¨å­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°ä¸­ä½¿ç”¨ã€‚\n\n\n1.2.2 ä¼šè¯ç”¨æˆ·å˜é‡\nå˜é‡çš„å®šä¹‰\n\n#æ–¹å¼1ï¼šâ€œ=â€æˆ–â€œ:=â€\nSET @ç”¨æˆ·å˜é‡ = å€¼;\nSET @ç”¨æˆ·å˜é‡ := å€¼;\n\n#æ–¹å¼2ï¼šâ€œ:=â€ æˆ– INTOå…³é”®å­—\nSELECT @ç”¨æˆ·å˜é‡ := è¡¨è¾¾å¼ [FROM ç­‰å­å¥];\nSELECT è¡¨è¾¾å¼ INTO @ç”¨æˆ·å˜é‡  [FROM ç­‰å­å¥];\n\n\næŸ¥çœ‹ç”¨æˆ·å˜é‡çš„å€¼ ï¼ˆæŸ¥çœ‹ã€æ¯”è¾ƒã€è¿ç®—ç­‰ï¼‰\n\nSELECT @ç”¨æˆ·å˜é‡\n\nä¸¾ä¾‹\n\nSET @a = 1;\n\nSELECT @a;\nSELECT @num := COUNT(*) FROM employees;\n\nSELECT @num;\nSELECT AVG(salary) INTO @avgsalary FROM employees;\n\nSELECT @avgsalary;\nSELECT @big;  #æŸ¥çœ‹æŸä¸ªæœªå£°æ˜çš„å˜é‡æ—¶ï¼Œå°†å¾—åˆ°NULLå€¼\n1.2.3 å±€éƒ¨å˜é‡å®šä¹‰ï¼šå¯ä»¥ä½¿ç”¨DECLAREè¯­å¥å®šä¹‰ä¸€ä¸ªå±€éƒ¨å˜é‡\nä½œç”¨åŸŸï¼šä»…ä»…åœ¨å®šä¹‰å®ƒçš„ BEGIN â€¦ END ä¸­æœ‰æ•ˆ\nä½ç½®ï¼šåªèƒ½æ”¾åœ¨ BEGIN â€¦ END ä¸­ï¼Œè€Œä¸”åªèƒ½æ”¾åœ¨ç¬¬ä¸€å¥\nBEGIN\n\t#å£°æ˜å±€éƒ¨å˜é‡\n\tDECLARE å˜é‡å1 å˜é‡æ•°æ®ç±»å‹ [DEFAULT å˜é‡é»˜è®¤å€¼];\n\tDECLARE å˜é‡å2,å˜é‡å3,... å˜é‡æ•°æ®ç±»å‹ [DEFAULT å˜é‡é»˜è®¤å€¼];\n\n\t#ä¸ºå±€éƒ¨å˜é‡èµ‹å€¼\n\tSET å˜é‡å1 = å€¼;\n\tSELECT å€¼ INTO å˜é‡å2 [FROM å­å¥];\n\n\t#æŸ¥çœ‹å±€éƒ¨å˜é‡çš„å€¼\n\tSELECT å˜é‡1,å˜é‡2,å˜é‡3;\nEND\n\n1.å®šä¹‰å˜é‡\nDECLARE å˜é‡å ç±»å‹ [default å€¼];  # å¦‚æœæ²¡æœ‰DEFAULTå­å¥ï¼Œåˆå§‹å€¼ä¸ºNULL\nä¸¾ä¾‹ï¼š\nDECLAREã€€myparamã€€INTã€€DEFAULT 100;\n2.å˜é‡èµ‹å€¼\næ–¹å¼1ï¼šä¸€èˆ¬ç”¨äºèµ‹ç®€å•çš„å€¼\nSET å˜é‡å=å€¼;\nSET å˜é‡å:=å€¼;\næ–¹å¼2ï¼šä¸€èˆ¬ç”¨äºèµ‹è¡¨ä¸­çš„å­—æ®µå€¼\nSELECT å­—æ®µåæˆ–è¡¨è¾¾å¼ INTO å˜é‡å FROM è¡¨;\n3.ä½¿ç”¨å˜é‡ï¼ˆæŸ¥çœ‹ã€æ¯”è¾ƒã€è¿ç®—ç­‰ï¼‰\nSELECT å±€éƒ¨å˜é‡å;\nä¸¾ä¾‹1ï¼šå£°æ˜å±€éƒ¨å˜é‡ï¼Œå¹¶åˆ†åˆ«èµ‹å€¼ä¸ºemployeesè¡¨ä¸­employee_idä¸º102çš„last_nameå’Œsalary\nDELIMITER //\n\nCREATE PROCEDURE set_value()\nBEGIN\n\tDECLARE emp_name VARCHAR(25);\n\tDECLARE sal DOUBLE(10,2);\n\t\n\tSELECT last_name,salary INTO emp_name,sal\n\tFROM employees \n\tWHERE employee_id = 102;\n\t\n\tSELECT emp_name,sal;\nEND //\n\nDELIMITER ;\nä¸¾ä¾‹2ï¼šå£°æ˜ä¸¤ä¸ªå˜é‡ï¼Œæ±‚å’Œå¹¶æ‰“å° ï¼ˆåˆ†åˆ«ä½¿ç”¨ä¼šè¯ç”¨æˆ·å˜é‡ã€å±€éƒ¨å˜é‡çš„æ–¹å¼å®ç°ï¼‰\n#æ–¹å¼1ï¼šä½¿ç”¨ç”¨æˆ·å˜é‡\nSET @m=1;\nSET @n=1;\nSET @sum=@m+@n;\n\nSELECT @sum;\n#æ–¹å¼2ï¼šä½¿ç”¨å±€éƒ¨å˜é‡\nDELIMITER //\n\nCREATE PROCEDURE add_value()\nBEGIN\n\t#å±€éƒ¨å˜é‡\n\tDECLARE m INT DEFAULT 1;\n\tDECLARE n INT DEFAULT 3;\n\tDECLARE SUM INT;\n\t\n\tSET SUM = m+n;\n\tSELECT SUM;\nEND //\n\nDELIMITER ;\nä¸¾ä¾‹3ï¼šåˆ›å»ºå­˜å‚¨è¿‡ç¨‹â€œdifferent_salaryâ€æŸ¥è¯¢æŸå‘˜å·¥å’Œä»–é¢†å¯¼çš„è–ªèµ„å·®è·ï¼Œå¹¶ç”¨INå‚æ•°emp_idæ¥æ”¶å‘˜å·¥idï¼Œç”¨OUTå‚æ•°dif_salaryè¾“å‡ºè–ªèµ„å·®è·ç»“æœã€‚\n#å£°æ˜\nDELIMITER //\n\nCREATE PROCEDURE different_salary(IN emp_id INT,OUT dif_salary DOUBLE)\nBEGIN\n\t#å£°æ˜å±€éƒ¨å˜é‡\n\tDECLARE emp_sal,mgr_sal DOUBLE DEFAULT 0.0;\n\tDECLARE mgr_id INT;\n\t\n\tSELECT salary INTO emp_sal FROM employees WHERE employee_id = emp_id;\n\tSELECT manager_id INTO mgr_id FROM employees WHERE employee_id = emp_id;\n\tSELECT salary INTO mgr_sal FROM employees WHERE employee_id = mgr_id;\n\tSET dif_salary = mgr_sal - emp_sal;\n\nEND //\n\nDELIMITER ;\n\n#è°ƒç”¨\nSET @emp_id = 102;\nCALL different_salary(@emp_id,@diff_sal);\n\n\n#æŸ¥çœ‹\nSELECT @diff_sal;\n1.2.4 å¯¹æ¯”ä¼šè¯ç”¨æˆ·å˜é‡ä¸å±€éƒ¨å˜é‡\t\t\t  ä½œç”¨åŸŸ\t\t\t\t\tå®šä¹‰ä½ç½®\t\t\t\t  è¯­æ³•\nä¼šè¯ç”¨æˆ·å˜é‡\t  å½“å‰ä¼šè¯\t\t\t\t   ä¼šè¯çš„ä»»ä½•åœ°æ–¹\t\t\t\tåŠ @ç¬¦å·ï¼Œä¸ç”¨æŒ‡å®šç±»å‹\nå±€éƒ¨å˜é‡\t   å®šä¹‰å®ƒçš„BEGIN ENDä¸­ \t\tBEGIN ENDçš„ç¬¬ä¸€å¥è¯\t\t  ä¸€èˆ¬ä¸ç”¨åŠ @,éœ€è¦æŒ‡å®šç±»å‹\n2. å®šä¹‰æ¡ä»¶ä¸å¤„ç†ç¨‹åºå®šä¹‰æ¡ä»¶æ˜¯äº‹å…ˆå®šä¹‰ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­å¯èƒ½é‡åˆ°çš„é—®é¢˜ï¼Œå¤„ç†ç¨‹åºå®šä¹‰äº†åœ¨é‡åˆ°é—®é¢˜æ—¶åº”å½“é‡‡å–çš„å¤„ç†æ–¹å¼ï¼Œå¹¶ä¸”ä¿è¯å­˜å‚¨è¿‡ç¨‹æˆ–å‡½æ•°åœ¨é‡åˆ°è­¦å‘Šæˆ–é”™è¯¯æ—¶èƒ½ç»§ç»­æ‰§è¡Œã€‚è¿™æ ·å¯ä»¥å¢å¼ºå­˜å‚¨ç¨‹åºå¤„ç†é—®é¢˜çš„èƒ½åŠ›ï¼Œé¿å…ç¨‹åºå¼‚å¸¸åœæ­¢è¿è¡Œã€‚\nè¯´æ˜ï¼šå®šä¹‰æ¡ä»¶å’Œå¤„ç†ç¨‹åºåœ¨å­˜å‚¨è¿‡ç¨‹ã€å­˜å‚¨å‡½æ•°ä¸­éƒ½æ˜¯æ”¯æŒçš„ã€‚\n2.1 æ¡ˆä¾‹åˆ†ææ¡ˆä¾‹åˆ†æï¼šåˆ›å»ºä¸€ä¸ªåç§°ä¸ºâ€œUpdateDataNoConditionâ€çš„å­˜å‚¨è¿‡ç¨‹ã€‚ä»£ç å¦‚ä¸‹ï¼š\nDELIMITER //\n\nCREATE PROCEDURE UpdateDataNoCondition()\n\tBEGIN\n\t\tSET @x = 1;\n\t\tUPDATE employees SET email = NULL WHERE last_name = 'Abel';\n\t\tSET @x = 2;\n\t\tUPDATE employees SET email = 'aabbel' WHERE last_name = 'Abel';\n\t\tSET @x = 3;\n\tEND //\n\nDELIMITER ;\nè°ƒç”¨å­˜å‚¨è¿‡ç¨‹ï¼š\nmysql&gt; CALL UpdateDataNoCondition();\nERROR 1048 (23000): Column 'email' cannot be null\n\nmysql&gt; SELECT @x;\n+------+\n| @x   |\n+------+\n|   1  |\n+------+\n1 row in set (0.00 sec)\n\nå¯ä»¥çœ‹åˆ°ï¼Œæ­¤æ—¶@xå˜é‡çš„å€¼ä¸º1ã€‚ç»“åˆåˆ›å»ºå­˜å‚¨è¿‡ç¨‹çš„SQLè¯­å¥ä»£ç å¯ä»¥å¾—å‡ºï¼šåœ¨å­˜å‚¨è¿‡ç¨‹ä¸­æœªå®šä¹‰æ¡ä»¶å’Œå¤„ç†ç¨‹åºï¼Œä¸”å½“å­˜å‚¨è¿‡ç¨‹ä¸­æ‰§è¡Œçš„SQLè¯­å¥æŠ¥é”™æ—¶ï¼ŒMySQLæ•°æ®åº“ä¼šæŠ›å‡ºé”™è¯¯ï¼Œå¹¶é€€å‡ºå½“å‰SQLé€»è¾‘ï¼Œä¸å†å‘ä¸‹ç»§ç»­æ‰§è¡Œã€‚\n2.2 å®šä¹‰æ¡ä»¶å®šä¹‰æ¡ä»¶å°±æ˜¯ç»™MySQLä¸­çš„é”™è¯¯ç å‘½åï¼Œè¿™æœ‰åŠ©äºå­˜å‚¨çš„ç¨‹åºä»£ç æ›´æ¸…æ™°ã€‚å®ƒå°†ä¸€ä¸ªé”™è¯¯åå­—å’ŒæŒ‡å®šçš„é”™è¯¯æ¡ä»¶å…³è”èµ·æ¥ã€‚è¿™ä¸ªåå­—å¯ä»¥éšåè¢«ç”¨åœ¨å®šä¹‰å¤„ç†ç¨‹åºçš„DECLARE HANDLERè¯­å¥ä¸­ã€‚\nå®šä¹‰æ¡ä»¶ä½¿ç”¨DECLAREè¯­å¥ï¼Œè¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š\nDECLARE é”™è¯¯åç§° CONDITION FOR é”™è¯¯ç ï¼ˆæˆ–é”™è¯¯æ¡ä»¶ï¼‰\né”™è¯¯ç çš„è¯´æ˜ï¼š\n\nMySQL_error_codeå’Œsqlstate_valueéƒ½å¯ä»¥è¡¨ç¤ºMySQLçš„é”™è¯¯ã€‚\nMySQL_error_codeæ˜¯æ•°å€¼ç±»å‹é”™è¯¯ä»£ç ã€‚\nsqlstate_valueæ˜¯é•¿åº¦ä¸º5çš„å­—ç¬¦ä¸²ç±»å‹é”™è¯¯ä»£ç ã€‚\n\n\nä¾‹å¦‚ï¼Œåœ¨ERROR 1418 (HY000)ä¸­ï¼Œ1418æ˜¯MySQL_error_codeï¼Œâ€™HY000â€™æ˜¯sqlstate_valueã€‚\nä¾‹å¦‚ï¼Œåœ¨ERROR 1142ï¼ˆ42000ï¼‰ä¸­ï¼Œ1142æ˜¯MySQL_error_codeï¼Œâ€™42000â€™æ˜¯sqlstate_valueã€‚\n\nä¸¾ä¾‹1ï¼šå®šä¹‰â€œField_Not_Be_NULLâ€é”™è¯¯åä¸MySQLä¸­è¿åéç©ºçº¦æŸçš„é”™è¯¯ç±»å‹æ˜¯â€œERROR 1048 (23000)â€å¯¹åº”ã€‚\n#ä½¿ç”¨MySQL_error_code\nDECLARE Field_Not_Be_NULL CONDITION FOR 1048;\n\n#ä½¿ç”¨sqlstate_value\nDECLARE Field_Not_Be_NULL CONDITION FOR SQLSTATE '23000';\nä¸¾ä¾‹2ï¼šå®šä¹‰â€ERROR 1148(42000)â€é”™è¯¯ï¼Œåç§°ä¸ºcommand_not_allowedã€‚\n#ä½¿ç”¨MySQL_error_code\nDECLARE command_not_allowed CONDITION FOR 1148;\n\n#ä½¿ç”¨sqlstate_value\nDECLARE command_not_allowed CONDITION FOR SQLSTATE '42000';\n2.3 å®šä¹‰å¤„ç†ç¨‹åºå¯ä»¥ä¸ºSQLæ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿçš„æŸç§ç±»å‹çš„é”™è¯¯å®šä¹‰ç‰¹æ®Šçš„å¤„ç†ç¨‹åºã€‚å®šä¹‰å¤„ç†ç¨‹åºæ—¶ï¼Œä½¿ç”¨DECLAREè¯­å¥çš„è¯­æ³•å¦‚ä¸‹ï¼š\nDECLARE å¤„ç†æ–¹å¼ HANDLER FOR é”™è¯¯ç±»å‹ å¤„ç†è¯­å¥\n\nå¤„ç†æ–¹å¼ï¼šå¤„ç†æ–¹å¼æœ‰3ä¸ªå–å€¼ï¼šCONTINUEã€EXITã€UNDOã€‚\nCONTINUEï¼šè¡¨ç¤ºé‡åˆ°é”™è¯¯ä¸å¤„ç†ï¼Œç»§ç»­æ‰§è¡Œã€‚\nEXITï¼šè¡¨ç¤ºé‡åˆ°é”™è¯¯é©¬ä¸Šé€€å‡ºã€‚\nUNDOï¼šè¡¨ç¤ºé‡åˆ°é”™è¯¯åæ’¤å›ä¹‹å‰çš„æ“ä½œã€‚MySQLä¸­æš‚æ—¶ä¸æ”¯æŒè¿™æ ·çš„æ“ä½œã€‚\n\n\né”™è¯¯ç±»å‹ï¼ˆå³æ¡ä»¶ï¼‰å¯ä»¥æœ‰å¦‚ä¸‹å–å€¼ï¼š\nSQLSTATE 'å­—ç¬¦ä¸²é”™è¯¯ç 'ï¼šè¡¨ç¤ºé•¿åº¦ä¸º5çš„sqlstate_valueç±»å‹çš„é”™è¯¯ä»£ç ï¼›\nMySQL_error_codeï¼šåŒ¹é…æ•°å€¼ç±»å‹é”™è¯¯ä»£ç ï¼›\né”™è¯¯åç§°ï¼šè¡¨ç¤ºDECLARE â€¦ CONDITIONå®šä¹‰çš„é”™è¯¯æ¡ä»¶åç§°ã€‚\nSQLWARNINGï¼šåŒ¹é…æ‰€æœ‰ä»¥01å¼€å¤´çš„SQLSTATEé”™è¯¯ä»£ç ï¼›\nNOT FOUNDï¼šåŒ¹é…æ‰€æœ‰ä»¥02å¼€å¤´çš„SQLSTATEé”™è¯¯ä»£ç ï¼›\nSQLEXCEPTIONï¼šåŒ¹é…æ‰€æœ‰æ²¡æœ‰è¢«SQLWARNINGæˆ–NOT FOUNDæ•è·çš„SQLSTATEé”™è¯¯ä»£ç ï¼›\n\n\nå¤„ç†è¯­å¥ï¼šå¦‚æœå‡ºç°ä¸Šè¿°æ¡ä»¶ä¹‹ä¸€ï¼Œåˆ™é‡‡ç”¨å¯¹åº”çš„å¤„ç†æ–¹å¼ï¼Œå¹¶æ‰§è¡ŒæŒ‡å®šçš„å¤„ç†è¯­å¥ã€‚è¯­å¥å¯ä»¥æ˜¯åƒâ€œSET å˜é‡ = å€¼â€è¿™æ ·çš„ç®€å•è¯­å¥ï¼Œä¹Ÿå¯ä»¥æ˜¯ä½¿ç”¨BEGIN ... ENDç¼–å†™çš„å¤åˆè¯­å¥ã€‚\n\nå®šä¹‰å¤„ç†ç¨‹åºçš„å‡ ç§æ–¹å¼ï¼Œä»£ç å¦‚ä¸‹ï¼š\n#æ–¹æ³•1ï¼šæ•è·sqlstate_value\nDECLARE CONTINUE HANDLER FOR SQLSTATE '42S02' SET @info = 'NO_SUCH_TABLE';\n\n#æ–¹æ³•2ï¼šæ•è·mysql_error_value\nDECLARE CONTINUE HANDLER FOR 1146 SET @info = 'NO_SUCH_TABLE';\n\n#æ–¹æ³•3ï¼šå…ˆå®šä¹‰æ¡ä»¶ï¼Œå†è°ƒç”¨\nDECLARE no_such_table CONDITION FOR 1146;\nDECLARE CONTINUE HANDLER FOR NO_SUCH_TABLE SET @info = 'NO_SUCH_TABLE';\n\n#æ–¹æ³•4ï¼šä½¿ç”¨SQLWARNING\nDECLARE EXIT HANDLER FOR SQLWARNING SET @info = 'ERROR';\n\n#æ–¹æ³•5ï¼šä½¿ç”¨NOT FOUND\nDECLARE EXIT HANDLER FOR NOT FOUND SET @info = 'NO_SUCH_TABLE';\n\n#æ–¹æ³•6ï¼šä½¿ç”¨SQLEXCEPTION\nDECLARE EXIT HANDLER FOR SQLEXCEPTION SET @info = 'ERROR';\n2.4 æ¡ˆä¾‹è§£å†³åœ¨å­˜å‚¨è¿‡ç¨‹ä¸­ï¼Œå®šä¹‰å¤„ç†ç¨‹åºï¼Œæ•è·sqlstate_valueå€¼ï¼Œå½“é‡åˆ°MySQL_error_codeå€¼ä¸º1048æ—¶ï¼Œæ‰§è¡ŒCONTINUEæ“ä½œï¼Œå¹¶ä¸”å°†@proc_valueçš„å€¼è®¾ç½®ä¸º-1ã€‚\nDELIMITER //\n\nCREATE PROCEDURE UpdateDataNoCondition()\n\tBEGIN\n\t\t#å®šä¹‰å¤„ç†ç¨‹åº\n\t\tDECLARE CONTINUE HANDLER FOR 1048 SET @proc_value = -1;\n\t\t\n\t\tSET @x = 1;\n\t\tUPDATE employees SET email = NULL WHERE last_name = 'Abel';\n\t\tSET @x = 2;\n\t\tUPDATE employees SET email = 'aabbel' WHERE last_name = 'Abel';\n\t\tSET @x = 3;\n\tEND //\n\nDELIMITER ;\nè°ƒç”¨è¿‡ç¨‹ï¼š\nmysql&gt; CALL UpdateDataWithCondition();\nQuery OK, 0 rows affected (0.01 sec)\n\nmysql&gt; SELECT @x,@proc_value;\n+------+-------------+\n| @x   | @proc_value |\n+------+-------------+\n|    3 |       \t -1  |\n+------+-------------+\n1 row in set (0.00 sec)\n\nä¸¾ä¾‹ï¼š\nåˆ›å»ºä¸€ä¸ªåç§°ä¸ºâ€œInsertDataWithConditionâ€çš„å­˜å‚¨è¿‡ç¨‹ï¼Œä»£ç å¦‚ä¸‹ã€‚\nåœ¨å­˜å‚¨è¿‡ç¨‹ä¸­ï¼Œå®šä¹‰å¤„ç†ç¨‹åºï¼Œæ•è·sqlstate_valueå€¼ï¼Œå½“é‡åˆ°sqlstate_valueå€¼ä¸º23000æ—¶ï¼Œæ‰§è¡ŒEXITæ“ä½œï¼Œå¹¶ä¸”å°†@proc_valueçš„å€¼è®¾ç½®ä¸º-1ã€‚\n#å‡†å¤‡å·¥ä½œ\nCREATE TABLE departments\nAS\nSELECT * FROM atguigudb.`departments`;\n\nALTER TABLE departments\nADD CONSTRAINT uk_dept_name UNIQUE(department_id);\nDELIMITER //\n\nCREATE PROCEDURE InsertDataWithCondition()\n\tBEGIN\n\t\tDECLARE duplicate_entry CONDITION FOR SQLSTATE '23000' ;\n\t\tDECLARE EXIT HANDLER FOR duplicate_entry SET @proc_value = -1;\n\t\t\n\t\tSET @x = 1;\n\t\tINSERT INTO departments(department_name) VALUES('æµ‹è¯•');\n\t\tSET @x = 2;\n\t\tINSERT INTO departments(department_name) VALUES('æµ‹è¯•');\n\t\tSET @x = 3;\n\tEND //\n\nDELIMITER ;\nè°ƒç”¨å­˜å‚¨è¿‡ç¨‹ï¼š\nmysql&gt; CALL InsertDataWithCondition();\nQuery OK, 0 rows affected (0.01 sec)\n\nmysql&gt; SELECT @x,@proc_value;\n+------+-------------+\n| @x   | @proc_value |\n+------+-------------+\n|    2 |       \t -1  |\n+------+-------------+\n1 row in set (0.00 sec)\n\n3. æµç¨‹æ§åˆ¶è§£å†³å¤æ‚é—®é¢˜ä¸å¯èƒ½é€šè¿‡ä¸€ä¸ª SQL è¯­å¥å®Œæˆï¼Œæˆ‘ä»¬éœ€è¦æ‰§è¡Œå¤šä¸ª SQL æ“ä½œã€‚æµç¨‹æ§åˆ¶è¯­å¥çš„ä½œç”¨å°±æ˜¯æ§åˆ¶å­˜å‚¨è¿‡ç¨‹ä¸­ SQL è¯­å¥çš„æ‰§è¡Œé¡ºåºï¼Œæ˜¯æˆ‘ä»¬å®Œæˆå¤æ‚æ“ä½œå¿…ä¸å¯å°‘çš„ä¸€éƒ¨åˆ†ã€‚åªè¦æ˜¯æ‰§è¡Œçš„ç¨‹åºï¼Œæµç¨‹å°±åˆ†ä¸ºä¸‰å¤§ç±»ï¼š\n\né¡ºåºç»“æ„ï¼šç¨‹åºä»ä¸Šå¾€ä¸‹ä¾æ¬¡æ‰§è¡Œ\nåˆ†æ”¯ç»“æ„ï¼šç¨‹åºæŒ‰æ¡ä»¶è¿›è¡Œé€‰æ‹©æ‰§è¡Œï¼Œä»ä¸¤æ¡æˆ–å¤šæ¡è·¯å¾„ä¸­é€‰æ‹©ä¸€æ¡æ‰§è¡Œ\nå¾ªç¯ç»“æ„ï¼šç¨‹åºæ»¡è¶³ä¸€å®šæ¡ä»¶ä¸‹ï¼Œé‡å¤æ‰§è¡Œä¸€ç»„è¯­å¥\n\né’ˆå¯¹äºMySQL çš„æµç¨‹æ§åˆ¶è¯­å¥ä¸»è¦æœ‰ 3 ç±»ã€‚æ³¨æ„ï¼šåªèƒ½ç”¨äºå­˜å‚¨ç¨‹åºã€‚\n\næ¡ä»¶åˆ¤æ–­è¯­å¥ï¼šIF è¯­å¥å’Œ CASE è¯­å¥\nå¾ªç¯è¯­å¥ï¼šLOOPã€WHILE å’Œ REPEAT è¯­å¥\nè·³è½¬è¯­å¥ï¼šITERATE å’Œ LEAVE è¯­å¥\n\n3.1 åˆ†æ”¯ç»“æ„ä¹‹ IF\nIF è¯­å¥çš„è¯­æ³•ç»“æ„æ˜¯ï¼š\n\nIF è¡¨è¾¾å¼1 THEN æ“ä½œ1\n[ELSEIF è¡¨è¾¾å¼2 THEN æ“ä½œ2]â€¦â€¦\n[ELSE æ“ä½œN]\nEND IF\næ ¹æ®è¡¨è¾¾å¼çš„ç»“æœä¸ºTRUEæˆ–FALSEæ‰§è¡Œç›¸åº”çš„è¯­å¥ã€‚è¿™é‡Œâ€œ[]â€ä¸­çš„å†…å®¹æ˜¯å¯é€‰çš„ã€‚\n\nç‰¹ç‚¹ï¼šâ‘  ä¸åŒçš„è¡¨è¾¾å¼å¯¹åº”ä¸åŒçš„æ“ä½œ â‘¡ ä½¿ç”¨åœ¨begin endä¸­\n\nä¸¾ä¾‹1ï¼š\nIF val IS NULL \n\tTHEN SELECT 'val is null';\nELSE SELECT 'val is not null';\n\nEND IF;\n\nä¸¾ä¾‹2ï¼šå£°æ˜å­˜å‚¨è¿‡ç¨‹â€œupdate_salary_by_eid1â€ï¼Œå®šä¹‰INå‚æ•°emp_idï¼Œè¾“å…¥å‘˜å·¥ç¼–å·ã€‚åˆ¤æ–­è¯¥å‘˜å·¥è–ªèµ„å¦‚æœä½äº8000å…ƒå¹¶ä¸”å…¥èŒæ—¶é—´è¶…è¿‡5å¹´ï¼Œå°±æ¶¨è–ª500å…ƒï¼›å¦åˆ™å°±ä¸å˜ã€‚\nDELIMITER //\n\nCREATE PROCEDURE update_salary_by_eid1(IN emp_id INT)\nBEGIN\n\tDECLARE emp_salary DOUBLE;\n\tDECLARE hire_year DOUBLE;\n\n\tSELECT salary INTO emp_salary FROM employees WHERE employee_id = emp_id;\n\n\tSELECT DATEDIFF(CURDATE(),hire_date)/365 INTO hire_year\n\tFROM employees WHERE employee_id = emp_id;\n\n\tIF emp_salary &lt; 8000 AND hire_year &gt; 5\n\tTHEN UPDATE employees SET salary = salary + 500 WHERE employee_id = emp_id;\n\tEND IF;\nEND //\n\n\nDELIMITER ;\n\nä¸¾ä¾‹3ï¼šå£°æ˜å­˜å‚¨è¿‡ç¨‹â€œupdate_salary_by_eid2â€ï¼Œå®šä¹‰INå‚æ•°emp_idï¼Œè¾“å…¥å‘˜å·¥ç¼–å·ã€‚åˆ¤æ–­è¯¥å‘˜å·¥è–ªèµ„å¦‚æœä½äº9000å…ƒå¹¶ä¸”å…¥èŒæ—¶é—´è¶…è¿‡5å¹´ï¼Œå°±æ¶¨è–ª500å…ƒï¼›å¦åˆ™å°±æ¶¨è–ª100å…ƒã€‚\nDELIMITER //\n\nCREATE PROCEDURE update_salary_by_eid2(IN emp_id INT)\nBEGIN\n\tDECLARE emp_salary DOUBLE;\n\tDECLARE hire_year DOUBLE;\n\n\tSELECT salary INTO emp_salary FROM employees WHERE employee_id = emp_id;\n\n\tSELECT DATEDIFF(CURDATE(),hire_date)/365 INTO hire_year\n\tFROM employees WHERE employee_id = emp_id;\n\n\tIF emp_salary &lt; 8000 AND hire_year &gt; 5\n\t\tTHEN UPDATE employees SET salary = salary + 500 WHERE employee_id = emp_id;\n\tELSE \n\t\tUPDATE employees SET salary = salary + 100 WHERE employee_id = emp_id;\n\tEND IF;\nEND //\n\n\nDELIMITER ;\n\nä¸¾ä¾‹4ï¼šå£°æ˜å­˜å‚¨è¿‡ç¨‹â€œupdate_salary_by_eid3â€ï¼Œå®šä¹‰INå‚æ•°emp_idï¼Œè¾“å…¥å‘˜å·¥ç¼–å·ã€‚åˆ¤æ–­è¯¥å‘˜å·¥è–ªèµ„å¦‚æœä½äº9000å…ƒï¼Œå°±æ›´æ–°è–ªèµ„ä¸º9000å…ƒï¼›è–ªèµ„å¦‚æœå¤§äºç­‰äº9000å…ƒä¸”ä½äº10000çš„ï¼Œä½†æ˜¯å¥–é‡‘æ¯”ä¾‹ä¸ºNULLçš„ï¼Œå°±æ›´æ–°å¥–é‡‘æ¯”ä¾‹ä¸º0.01ï¼›å…¶ä»–çš„æ¶¨è–ª100å…ƒã€‚\nDELIMITER //\n\nCREATE PROCEDURE update_salary_by_eid3(IN emp_id INT)\nBEGIN\n\tDECLARE emp_salary DOUBLE;\n\tDECLARE bonus DECIMAL(3,2);\n\n\tSELECT salary INTO emp_salary FROM employees WHERE employee_id = emp_id;\n\tSELECT commission_pct INTO bonus FROM employees WHERE employee_id = emp_id;\n\n\tIF emp_salary &lt; 9000\n\t\tTHEN UPDATE employees SET salary = 9000 WHERE employee_id = emp_id;\n\tELSEIF emp_salary &lt; 10000 AND bonus IS NULL\n\t\tTHEN UPDATE employees SET commission_pct = 0.01 WHERE employee_id = emp_id;\n\tELSE\n\t\tUPDATE employees SET salary = salary + 100 WHERE employee_id = emp_id;\n\tEND IF;\nEND //\n\nDELIMITER ;\n\n\n3.2 åˆ†æ”¯ç»“æ„ä¹‹ CASECASE è¯­å¥çš„è¯­æ³•ç»“æ„1ï¼š\n#æƒ…å†µä¸€ï¼šç±»ä¼¼äºswitch\nCASE è¡¨è¾¾å¼\nWHEN å€¼1 THEN ç»“æœ1æˆ–è¯­å¥1(å¦‚æœæ˜¯è¯­å¥ï¼Œéœ€è¦åŠ åˆ†å·) \nWHEN å€¼2 THEN ç»“æœ2æˆ–è¯­å¥2(å¦‚æœæ˜¯è¯­å¥ï¼Œéœ€è¦åŠ åˆ†å·)\n...\nELSE ç»“æœnæˆ–è¯­å¥n(å¦‚æœæ˜¯è¯­å¥ï¼Œéœ€è¦åŠ åˆ†å·)\nEND [case]ï¼ˆå¦‚æœæ˜¯æ”¾åœ¨begin endä¸­éœ€è¦åŠ ä¸Šcaseï¼Œå¦‚æœæ”¾åœ¨selectåé¢ä¸éœ€è¦ï¼‰\nCASE è¯­å¥çš„è¯­æ³•ç»“æ„2ï¼š\n#æƒ…å†µäºŒï¼šç±»ä¼¼äºå¤šé‡if\nCASE \nWHEN æ¡ä»¶1 THEN ç»“æœ1æˆ–è¯­å¥1(å¦‚æœæ˜¯è¯­å¥ï¼Œéœ€è¦åŠ åˆ†å·) \nWHEN æ¡ä»¶2 THEN ç»“æœ2æˆ–è¯­å¥2(å¦‚æœæ˜¯è¯­å¥ï¼Œéœ€è¦åŠ åˆ†å·)\n...\nELSE ç»“æœnæˆ–è¯­å¥n(å¦‚æœæ˜¯è¯­å¥ï¼Œéœ€è¦åŠ åˆ†å·)\nEND [case]ï¼ˆå¦‚æœæ˜¯æ”¾åœ¨begin endä¸­éœ€è¦åŠ ä¸Šcaseï¼Œå¦‚æœæ”¾åœ¨selectåé¢ä¸éœ€è¦ï¼‰\n\nä¸¾ä¾‹1ï¼š\n\nä½¿ç”¨CASEæµç¨‹æ§åˆ¶è¯­å¥çš„ç¬¬1ç§æ ¼å¼ï¼Œåˆ¤æ–­valå€¼ç­‰äº1ã€ç­‰äº2ï¼Œæˆ–è€…ä¸¤è€…éƒ½ä¸ç­‰ã€‚\nCASE val\nã€€ã€€ã€€WHEN 1 THEN SELECT 'val is 1';\nã€€ã€€ã€€WHEN 2 THEN SELECT 'val is 2';\nã€€ã€€ã€€ELSE SELECT 'val is not 1 or 2';\nEND CASE;\n\nä¸¾ä¾‹2ï¼š\n\nä½¿ç”¨CASEæµç¨‹æ§åˆ¶è¯­å¥çš„ç¬¬2ç§æ ¼å¼ï¼Œåˆ¤æ–­valæ˜¯å¦ä¸ºç©ºã€å°äº0ã€å¤§äº0æˆ–è€…ç­‰äº0ã€‚\nCASE\n\tWHEN val IS NULL THEN SELECT 'val is null';\n\tWHEN val &lt; 0 THEN SELECT 'val is less than 0';\n\tWHEN val &gt; 0 THEN SELECT 'val is greater than 0';\n\tELSE SELECT 'val is 0';\nEND CASE;\n\nä¸¾ä¾‹3ï¼šå£°æ˜å­˜å‚¨è¿‡ç¨‹â€œupdate_salary_by_eid4â€ï¼Œå®šä¹‰INå‚æ•°emp_idï¼Œè¾“å…¥å‘˜å·¥ç¼–å·ã€‚åˆ¤æ–­è¯¥å‘˜å·¥è–ªèµ„å¦‚æœä½äº9000å…ƒï¼Œå°±æ›´æ–°è–ªèµ„ä¸º9000å…ƒï¼›è–ªèµ„å¤§äºç­‰äº9000å…ƒä¸”ä½äº10000çš„ï¼Œä½†æ˜¯å¥–é‡‘æ¯”ä¾‹ä¸ºNULLçš„ï¼Œå°±æ›´æ–°å¥–é‡‘æ¯”ä¾‹ä¸º0.01ï¼›å…¶ä»–çš„æ¶¨è–ª100å…ƒã€‚\n\nDELIMITER //\n\nCREATE PROCEDURE update_salary_by_eid4(IN emp_id INT)\nBEGIN\n\tDECLARE emp_sal DOUBLE;\n\tDECLARE bonus DECIMAL(3,2);\n\n\tSELECT salary INTO emp_sal FROM employees WHERE employee_id = emp_id;\n\tSELECT commission_pct INTO bonus FROM employees WHERE employee_id = emp_id;\n\n\tCASE\n\tWHEN emp_sal&lt;9000\n\t\tTHEN UPDATE employees SET salary=9000 WHERE employee_id = emp_id;\n\tWHEN emp_sal&lt;10000 AND bonus IS NULL\n\t\tTHEN UPDATE employees SET commission_pct=0.01 WHERE employee_id = emp_id;\n\tELSE\n\t\tUPDATE employees SET salary=salary+100 WHERE employee_id = emp_id;\n\tEND CASE;\nEND //\n\nDELIMITER ;\n\nä¸¾ä¾‹4ï¼šå£°æ˜å­˜å‚¨è¿‡ç¨‹update_salary_by_eid5ï¼Œå®šä¹‰INå‚æ•°emp_idï¼Œè¾“å…¥å‘˜å·¥ç¼–å·ã€‚åˆ¤æ–­è¯¥å‘˜å·¥çš„å…¥èŒå¹´é™ï¼Œå¦‚æœæ˜¯0å¹´ï¼Œè–ªèµ„æ¶¨50ï¼›å¦‚æœæ˜¯1å¹´ï¼Œè–ªèµ„æ¶¨100ï¼›å¦‚æœæ˜¯2å¹´ï¼Œè–ªèµ„æ¶¨200ï¼›å¦‚æœæ˜¯3å¹´ï¼Œè–ªèµ„æ¶¨300ï¼›å¦‚æœæ˜¯4å¹´ï¼Œè–ªèµ„æ¶¨400ï¼›å…¶ä»–çš„æ¶¨è–ª500ã€‚\n\nDELIMITER //\n\nCREATE PROCEDURE update_salary_by_eid5(IN emp_id INT)\nBEGIN\n\tDECLARE emp_sal DOUBLE;\n\tDECLARE hire_year DOUBLE;\n\n\tSELECT salary INTO emp_sal FROM employees WHERE employee_id = emp_id;\n\t\n\tSELECT ROUND(DATEDIFF(CURDATE(),hire_date)/365) INTO hire_year FROM employees WHERE employee_id = emp_id;\n\n\tCASE hire_year\n\t\tWHEN 0 THEN UPDATE employees SET salary=salary+50 WHERE employee_id = emp_id;\n\t\tWHEN 1 THEN UPDATE employees SET salary=salary+100 WHERE employee_id = emp_id;\n\t\tWHEN 2 THEN UPDATE employees SET salary=salary+200 WHERE employee_id = emp_id;\n\t\tWHEN 3 THEN UPDATE employees SET salary=salary+300 WHERE employee_id = emp_id;\n\t\tWHEN 4 THEN UPDATE employees SET salary=salary+400 WHERE employee_id = emp_id;\n\t\tELSE UPDATE employees SET salary=salary+500 WHERE employee_id = emp_id;\n\tEND CASE;\nEND //\n\nDELIMITER ;\n3.3 å¾ªç¯ç»“æ„ä¹‹LOOPLOOPå¾ªç¯è¯­å¥ç”¨æ¥é‡å¤æ‰§è¡ŒæŸäº›è¯­å¥ã€‚LOOPå†…çš„è¯­å¥ä¸€ç›´é‡å¤æ‰§è¡Œç›´åˆ°å¾ªç¯è¢«é€€å‡ºï¼ˆä½¿ç”¨LEAVEå­å¥ï¼‰ï¼Œè·³å‡ºå¾ªç¯è¿‡ç¨‹ã€‚\nLOOPè¯­å¥çš„åŸºæœ¬æ ¼å¼å¦‚ä¸‹ï¼š\n[loop_label:] LOOP\n\tå¾ªç¯æ‰§è¡Œçš„è¯­å¥\nEND LOOP [loop_label]\nå…¶ä¸­ï¼Œloop_labelè¡¨ç¤ºLOOPè¯­å¥çš„æ ‡æ³¨åç§°ï¼Œè¯¥å‚æ•°å¯ä»¥çœç•¥ã€‚\nä¸¾ä¾‹1ï¼š\nä½¿ç”¨LOOPè¯­å¥è¿›è¡Œå¾ªç¯æ“ä½œï¼Œidå€¼å°äº10æ—¶å°†é‡å¤æ‰§è¡Œå¾ªç¯è¿‡ç¨‹ã€‚\nDECLARE id INT DEFAULT 0;\nadd_loop:LOOP\n\tSET id = id +1;\n\tIF id &gt;= 10 THEN LEAVE add_loop;\n\tEND IF;\n\nEND LOOP add_loop;\nä¸¾ä¾‹2ï¼šå½“å¸‚åœºç¯å¢ƒå˜å¥½æ—¶ï¼Œå…¬å¸ä¸ºäº†å¥–åŠ±å¤§å®¶ï¼Œå†³å®šç»™å¤§å®¶æ¶¨å·¥èµ„ã€‚å£°æ˜å­˜å‚¨è¿‡ç¨‹â€œupdate_salary_loop()â€ï¼Œå£°æ˜OUTå‚æ•°numï¼Œè¾“å‡ºå¾ªç¯æ¬¡æ•°ã€‚å­˜å‚¨è¿‡ç¨‹ä¸­å®ç°å¾ªç¯ç»™å¤§å®¶æ¶¨è–ªï¼Œè–ªèµ„æ¶¨ä¸ºåŸæ¥çš„1.1å€ã€‚ç›´åˆ°å…¨å…¬å¸çš„å¹³å‡è–ªèµ„è¾¾åˆ°12000ç»“æŸã€‚å¹¶ç»Ÿè®¡å¾ªç¯æ¬¡æ•°ã€‚\nDELIMITER //\n\nCREATE PROCEDURE update_salary_loop(OUT num INT)\nBEGIN\n\tDECLARE avg_salary DOUBLE;\n\tDECLARE loop_count INT DEFAULT 0;\n\t\n\tSELECT AVG(salary) INTO avg_salary FROM employees;\n\t\n\tlabel_loop:LOOP\n\t\tIF avg_salary &gt;= 12000 THEN LEAVE label_loop;\n\t\tEND IF;\n\t\t\n\t\tUPDATE employees SET salary = salary * 1.1;\n\t\tSET loop_count = loop_count + 1;\n\t\tSELECT AVG(salary) INTO avg_salary FROM employees;\n\tEND LOOP label_loop;\n\t\n\tSET num = loop_count;\n\nEND //\n\nDELIMITER ;\n3.4 å¾ªç¯ç»“æ„ä¹‹WHILEWHILEè¯­å¥åˆ›å»ºä¸€ä¸ªå¸¦æ¡ä»¶åˆ¤æ–­çš„å¾ªç¯è¿‡ç¨‹ã€‚WHILEåœ¨æ‰§è¡Œè¯­å¥æ‰§è¡Œæ—¶ï¼Œå…ˆå¯¹æŒ‡å®šçš„è¡¨è¾¾å¼è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœä¸ºçœŸï¼Œå°±æ‰§è¡Œå¾ªç¯å†…çš„è¯­å¥ï¼Œå¦åˆ™é€€å‡ºå¾ªç¯ã€‚WHILEè¯­å¥çš„åŸºæœ¬æ ¼å¼å¦‚ä¸‹ï¼š\n[while_label:] WHILE å¾ªç¯æ¡ä»¶  DO\n\tå¾ªç¯ä½“\nEND WHILE [while_label];\nwhile_labelä¸ºWHILEè¯­å¥çš„æ ‡æ³¨åç§°ï¼›å¦‚æœå¾ªç¯æ¡ä»¶ç»“æœä¸ºçœŸï¼ŒWHILEè¯­å¥å†…çš„è¯­å¥æˆ–è¯­å¥ç¾¤è¢«æ‰§è¡Œï¼Œç›´è‡³å¾ªç¯æ¡ä»¶ä¸ºå‡ï¼Œé€€å‡ºå¾ªç¯ã€‚\nä¸¾ä¾‹1ï¼š\nWHILEè¯­å¥ç¤ºä¾‹ï¼Œiå€¼å°äº10æ—¶ï¼Œå°†é‡å¤æ‰§è¡Œå¾ªç¯è¿‡ç¨‹ï¼Œä»£ç å¦‚ä¸‹ï¼š\nDELIMITER //\n\nCREATE PROCEDURE test_while()\nBEGIN\t\n\tDECLARE i INT DEFAULT 0;\n\t\n\tWHILE i &lt; 10 DO\n\t\tSET i = i + 1;\n\tEND WHILE;\n\t\n\tSELECT i;\nEND //\n\nDELIMITER ;\n#è°ƒç”¨\nCALL test_while();\nä¸¾ä¾‹2ï¼šå¸‚åœºç¯å¢ƒä¸å¥½æ—¶ï¼Œå…¬å¸ä¸ºäº†æ¸¡è¿‡éš¾å…³ï¼Œå†³å®šæš‚æ—¶é™ä½å¤§å®¶çš„è–ªèµ„ã€‚å£°æ˜å­˜å‚¨è¿‡ç¨‹â€œupdate_salary_while()â€ï¼Œå£°æ˜OUTå‚æ•°numï¼Œè¾“å‡ºå¾ªç¯æ¬¡æ•°ã€‚å­˜å‚¨è¿‡ç¨‹ä¸­å®ç°å¾ªç¯ç»™å¤§å®¶é™è–ªï¼Œè–ªèµ„é™ä¸ºåŸæ¥çš„90%ã€‚ç›´åˆ°å…¨å…¬å¸çš„å¹³å‡è–ªèµ„è¾¾åˆ°5000ç»“æŸã€‚å¹¶ç»Ÿè®¡å¾ªç¯æ¬¡æ•°ã€‚\nDELIMITER //\n\nCREATE PROCEDURE update_salary_while(OUT num INT)\nBEGIN\n\tDECLARE avg_sal DOUBLE ;\n\tDECLARE while_count INT DEFAULT 0;\n\t\n\tSELECT AVG(salary) INTO avg_sal FROM employees;\n\t\n\tWHILE avg_sal &gt; 5000 DO\n\t\tUPDATE employees SET salary = salary * 0.9;\n\t\t\n\t\tSET while_count = while_count + 1;\n\t\t\n\t\tSELECT AVG(salary) INTO avg_sal FROM employees;\n\tEND WHILE;\n\t\n\tSET num = while_count;\n\nEND //\n\nDELIMITER ;\n3.5 å¾ªç¯ç»“æ„ä¹‹REPEATREPEATè¯­å¥åˆ›å»ºä¸€ä¸ªå¸¦æ¡ä»¶åˆ¤æ–­çš„å¾ªç¯è¿‡ç¨‹ã€‚ä¸WHILEå¾ªç¯ä¸åŒçš„æ˜¯ï¼ŒREPEAT å¾ªç¯é¦–å…ˆä¼šæ‰§è¡Œä¸€æ¬¡å¾ªç¯ï¼Œç„¶ååœ¨ UNTIL ä¸­è¿›è¡Œè¡¨è¾¾å¼çš„åˆ¤æ–­ï¼Œå¦‚æœæ»¡è¶³æ¡ä»¶å°±é€€å‡ºï¼Œå³ END REPEATï¼›å¦‚æœæ¡ä»¶ä¸æ»¡è¶³ï¼Œåˆ™ä¼šå°±ç»§ç»­æ‰§è¡Œå¾ªç¯ï¼Œç›´åˆ°æ»¡è¶³é€€å‡ºæ¡ä»¶ä¸ºæ­¢ã€‚\nREPEATè¯­å¥çš„åŸºæœ¬æ ¼å¼å¦‚ä¸‹ï¼š\n[repeat_label:] REPEAT\nã€€ã€€ã€€ã€€å¾ªç¯ä½“çš„è¯­å¥\nUNTIL ç»“æŸå¾ªç¯çš„æ¡ä»¶è¡¨è¾¾å¼\nEND REPEAT [repeat_label]\nrepeat_labelä¸ºREPEATè¯­å¥çš„æ ‡æ³¨åç§°ï¼Œè¯¥å‚æ•°å¯ä»¥çœç•¥ï¼›REPEATè¯­å¥å†…çš„è¯­å¥æˆ–è¯­å¥ç¾¤è¢«é‡å¤ï¼Œç›´è‡³expr_conditionä¸ºçœŸã€‚\nä¸¾ä¾‹1ï¼š\nDELIMITER //\n\nCREATE PROCEDURE test_repeat()\nBEGIN\t\n\tDECLARE i INT DEFAULT 0;\n\t\n\tREPEAT \n\t\tSET i = i + 1;\n\tUNTIL i &gt;= 10\n\tEND REPEAT;\n\t\n\tSELECT i;\nEND //\n\nDELIMITER ;\nä¸¾ä¾‹2ï¼šå½“å¸‚åœºç¯å¢ƒå˜å¥½æ—¶ï¼Œå…¬å¸ä¸ºäº†å¥–åŠ±å¤§å®¶ï¼Œå†³å®šç»™å¤§å®¶æ¶¨å·¥èµ„ã€‚å£°æ˜å­˜å‚¨è¿‡ç¨‹â€œupdate_salary_repeat()â€ï¼Œå£°æ˜OUTå‚æ•°numï¼Œè¾“å‡ºå¾ªç¯æ¬¡æ•°ã€‚å­˜å‚¨è¿‡ç¨‹ä¸­å®ç°å¾ªç¯ç»™å¤§å®¶æ¶¨è–ªï¼Œè–ªèµ„æ¶¨ä¸ºåŸæ¥çš„1.15å€ã€‚ç›´åˆ°å…¨å…¬å¸çš„å¹³å‡è–ªèµ„è¾¾åˆ°13000ç»“æŸã€‚å¹¶ç»Ÿè®¡å¾ªç¯æ¬¡æ•°ã€‚\nDELIMITER //\n\nCREATE PROCEDURE update_salary_repeat(OUT num INT)\nBEGIN\n\tDECLARE avg_sal DOUBLE ;\n\tDECLARE repeat_count INT DEFAULT 0;\n\t\n\tSELECT AVG(salary) INTO avg_sal FROM employees;\n\t\n\tREPEAT\n\t\tUPDATE employees SET salary = salary * 1.15;\n\t\t\n\t\tSET repeat_count = repeat_count + 1;\n\t\t\n\t\tSELECT AVG(salary) INTO avg_sal FROM employees;\n\tUNTIL avg_sal &gt;= 13000\n\tEND REPEAT;\n\t\n\tSET num = repeat_count;\n\t\t\nEND //\n\nDELIMITER ;\nå¯¹æ¯”ä¸‰ç§å¾ªç¯ç»“æ„ï¼š\n1ã€è¿™ä¸‰ç§å¾ªç¯éƒ½å¯ä»¥çœç•¥åç§°ï¼Œä½†å¦‚æœå¾ªç¯ä¸­æ·»åŠ äº†å¾ªç¯æ§åˆ¶è¯­å¥ï¼ˆLEAVEæˆ–ITERATEï¼‰åˆ™å¿…é¡»æ·»åŠ åç§°ã€‚2ã€LOOPï¼šä¸€èˆ¬ç”¨äºå®ç°ç®€å•çš„â€æ­»â€å¾ªç¯WHILEï¼šå…ˆåˆ¤æ–­åæ‰§è¡ŒREPEATï¼šå…ˆæ‰§è¡Œååˆ¤æ–­ï¼Œæ— æ¡ä»¶è‡³å°‘æ‰§è¡Œä¸€æ¬¡\n3.6 è·³è½¬è¯­å¥ä¹‹LEAVEè¯­å¥LEAVEè¯­å¥ï¼šå¯ä»¥ç”¨åœ¨å¾ªç¯è¯­å¥å†…ï¼Œæˆ–è€…ä»¥ BEGIN å’Œ END åŒ…è£¹èµ·æ¥çš„ç¨‹åºä½“å†…ï¼Œè¡¨ç¤ºè·³å‡ºå¾ªç¯æˆ–è€…è·³å‡ºç¨‹åºä½“çš„æ“ä½œã€‚å¦‚æœä½ æœ‰é¢å‘è¿‡ç¨‹çš„ç¼–ç¨‹è¯­è¨€çš„ä½¿ç”¨ç»éªŒï¼Œä½ å¯ä»¥æŠŠ LEAVE ç†è§£ä¸º breakã€‚\nåŸºæœ¬æ ¼å¼å¦‚ä¸‹ï¼š\nLEAVE æ ‡è®°å\nå…¶ä¸­ï¼Œlabelå‚æ•°è¡¨ç¤ºå¾ªç¯çš„æ ‡å¿—ã€‚LEAVEå’ŒBEGIN â€¦ ENDæˆ–å¾ªç¯ä¸€èµ·è¢«ä½¿ç”¨ã€‚\nä¸¾ä¾‹1ï¼šåˆ›å»ºå­˜å‚¨è¿‡ç¨‹ â€œleave_begin()â€ï¼Œå£°æ˜INTç±»å‹çš„INå‚æ•°numã€‚ç»™BEGINâ€¦ENDåŠ æ ‡è®°åï¼Œå¹¶åœ¨BEGINâ€¦ENDä¸­ä½¿ç”¨IFè¯­å¥åˆ¤æ–­numå‚æ•°çš„å€¼ã€‚\n\nå¦‚æœnum&lt;=0ï¼Œåˆ™ä½¿ç”¨LEAVEè¯­å¥é€€å‡ºBEGINâ€¦ENDï¼›\nå¦‚æœnum=1ï¼Œåˆ™æŸ¥è¯¢â€œemployeesâ€è¡¨çš„å¹³å‡è–ªèµ„ï¼›\nå¦‚æœnum=2ï¼Œåˆ™æŸ¥è¯¢â€œemployeesâ€è¡¨çš„æœ€ä½è–ªèµ„ï¼›\nå¦‚æœnum&gt;2ï¼Œåˆ™æŸ¥è¯¢â€œemployeesâ€è¡¨çš„æœ€é«˜è–ªèµ„ã€‚\n\nIFè¯­å¥ç»“æŸåæŸ¥è¯¢â€œemployeesâ€è¡¨çš„æ€»äººæ•°ã€‚\nDELIMITER //\n\nCREATE PROCEDURE leave_begin(IN num INT)\n\n\tbegin_label: BEGIN\n\t\tIF num&lt;=0 \n\t\t\tTHEN LEAVE begin_label;\n\t\tELSEIF num=1 \n\t\t\tTHEN SELECT AVG(salary) FROM employees;\n\t\tELSEIF num=2 \n\t\t\tTHEN SELECT MIN(salary) FROM employees;\n\t\tELSE \n\t\t\tSELECT MAX(salary) FROM employees;\n\t\tEND IF;\n\t\t\n\t\tSELECT COUNT(*) FROM employees;\n\tEND //\n\n\nDELIMITER ;\nä¸¾ä¾‹2ï¼š\nå½“å¸‚åœºç¯å¢ƒä¸å¥½æ—¶ï¼Œå…¬å¸ä¸ºäº†æ¸¡è¿‡éš¾å…³ï¼Œå†³å®šæš‚æ—¶é™ä½å¤§å®¶çš„è–ªèµ„ã€‚å£°æ˜å­˜å‚¨è¿‡ç¨‹â€œleave_while()â€ï¼Œå£°æ˜OUTå‚æ•°numï¼Œè¾“å‡ºå¾ªç¯æ¬¡æ•°ï¼Œå­˜å‚¨è¿‡ç¨‹ä¸­ä½¿ç”¨WHILEå¾ªç¯ç»™å¤§å®¶é™ä½è–ªèµ„ä¸ºåŸæ¥è–ªèµ„çš„90%ï¼Œç›´åˆ°å…¨å…¬å¸çš„å¹³å‡è–ªèµ„å°äºç­‰äº10000ï¼Œå¹¶ç»Ÿè®¡å¾ªç¯æ¬¡æ•°ã€‚\nDELIMITER //\nCREATE PROCEDURE leave_while(OUT num INT)\n\nBEGIN \n\t#\n\tDECLARE avg_sal DOUBLE;#è®°å½•å¹³å‡å·¥èµ„\n\tDECLARE while_count INT DEFAULT 0; #è®°å½•å¾ªç¯æ¬¡æ•°\n\t\n\tSELECT AVG(salary) INTO avg_sal FROM employees; #â‘  åˆå§‹åŒ–æ¡ä»¶\n\t\n\twhile_label:WHILE TRUE DO  #â‘¡ å¾ªç¯æ¡ä»¶\n\t\t\n\t\t#â‘¢ å¾ªç¯ä½“\n\t\tIF avg_sal &lt;= 10000 THEN\n\t\t\tLEAVE while_label;\n\t\tEND IF;\n\t\t\n\t\tUPDATE employees SET salary  = salary * 0.9;\n\t\tSET while_count = while_count + 1;\n\t\t\n\t\t#â‘£ è¿­ä»£æ¡ä»¶\n\t\tSELECT AVG(salary) INTO avg_sal FROM employees;\n\t\n\tEND WHILE;\n\t\n\t#èµ‹å€¼\n\tSET num = while_count;\n\nEND //\n\nDELIMITER ;\n3.7 è·³è½¬è¯­å¥ä¹‹ITERATEè¯­å¥ITERATEè¯­å¥ï¼šåªèƒ½ç”¨åœ¨å¾ªç¯è¯­å¥ï¼ˆLOOPã€REPEATå’ŒWHILEè¯­å¥ï¼‰å†…ï¼Œè¡¨ç¤ºé‡æ–°å¼€å§‹å¾ªç¯ï¼Œå°†æ‰§è¡Œé¡ºåºè½¬åˆ°è¯­å¥æ®µå¼€å¤´å¤„ã€‚å¦‚æœä½ æœ‰é¢å‘è¿‡ç¨‹çš„ç¼–ç¨‹è¯­è¨€çš„ä½¿ç”¨ç»éªŒï¼Œä½ å¯ä»¥æŠŠ ITERATE ç†è§£ä¸º continueï¼Œæ„æ€ä¸ºâ€œå†æ¬¡å¾ªç¯â€ã€‚\nè¯­å¥åŸºæœ¬æ ¼å¼å¦‚ä¸‹ï¼š\nITERATE label\nlabelå‚æ•°è¡¨ç¤ºå¾ªç¯çš„æ ‡å¿—ã€‚ITERATEè¯­å¥å¿…é¡»è·Ÿåœ¨å¾ªç¯æ ‡å¿—å‰é¢ã€‚\nä¸¾ä¾‹ï¼š  å®šä¹‰å±€éƒ¨å˜é‡numï¼Œåˆå§‹å€¼ä¸º0ã€‚å¾ªç¯ç»“æ„ä¸­æ‰§è¡Œnum + 1æ“ä½œã€‚\n\nå¦‚æœnum &lt; 10ï¼Œåˆ™ç»§ç»­æ‰§è¡Œå¾ªç¯ï¼›\nå¦‚æœnum &gt; 15ï¼Œåˆ™é€€å‡ºå¾ªç¯ç»“æ„ï¼›\n\nDELIMITER //\n\nCREATE PROCEDURE test_iterate()\n\nBEGIN\n\tDECLARE num INT DEFAULT 0;\n\t\n\tmy_loop:LOOP\n\t\tSET num = num + 1;\n\t\n\t\tIF num &lt; 10 \n\t\t\tTHEN ITERATE my_loop;\n\t\tELSEIF num &gt; 15 \n\t\t\tTHEN LEAVE my_loop;\n\t\tEND IF;\n\t\n\t\tSELECT 'å°šç¡…è°·ï¼šè®©å¤©ä¸‹æ²¡æœ‰éš¾å­¦çš„æŠ€æœ¯';\n\t\n\tEND LOOP my_loop;\n\nEND //\n\nDELIMITER ;\n4. æ¸¸æ ‡4.1 ä»€ä¹ˆæ˜¯æ¸¸æ ‡ï¼ˆæˆ–å…‰æ ‡ï¼‰è™½ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ç­›é€‰æ¡ä»¶ WHERE å’Œ HAVINGï¼Œæˆ–è€…æ˜¯é™å®šè¿”å›è®°å½•çš„å…³é”®å­— LIMIT è¿”å›ä¸€æ¡è®°å½•ï¼Œä½†æ˜¯ï¼Œå´æ— æ³•åœ¨ç»“æœé›†ä¸­åƒæŒ‡é’ˆä¸€æ ·ï¼Œå‘å‰å®šä½ä¸€æ¡è®°å½•ã€å‘åå®šä½ä¸€æ¡è®°å½•ï¼Œæˆ–è€…æ˜¯éšæ„å®šä½åˆ°æŸä¸€æ¡è®°å½•ï¼Œå¹¶å¯¹è®°å½•çš„æ•°æ®è¿›è¡Œå¤„ç†ã€‚\nè¿™ä¸ªæ—¶å€™ï¼Œå°±å¯ä»¥ç”¨åˆ°æ¸¸æ ‡ã€‚æ¸¸æ ‡ï¼Œæä¾›äº†ä¸€ç§çµæ´»çš„æ“ä½œæ–¹å¼ï¼Œè®©æˆ‘ä»¬èƒ½å¤Ÿå¯¹ç»“æœé›†ä¸­çš„æ¯ä¸€æ¡è®°å½•è¿›è¡Œå®šä½ï¼Œå¹¶å¯¹æŒ‡å‘çš„è®°å½•ä¸­çš„æ•°æ®è¿›è¡Œæ“ä½œçš„æ•°æ®ç»“æ„ã€‚æ¸¸æ ‡è®© SQL è¿™ç§é¢å‘é›†åˆçš„è¯­è¨€æœ‰äº†é¢å‘è¿‡ç¨‹å¼€å‘çš„èƒ½åŠ›ã€‚\nåœ¨ SQL ä¸­ï¼Œæ¸¸æ ‡æ˜¯ä¸€ç§ä¸´æ—¶çš„æ•°æ®åº“å¯¹è±¡ï¼Œå¯ä»¥æŒ‡å‘å­˜å‚¨åœ¨æ•°æ®åº“è¡¨ä¸­çš„æ•°æ®è¡ŒæŒ‡é’ˆã€‚è¿™é‡Œæ¸¸æ ‡å……å½“äº†æŒ‡é’ˆçš„ä½œç”¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ“ä½œæ¸¸æ ‡æ¥å¯¹æ•°æ®è¡Œè¿›è¡Œæ“ä½œã€‚\nMySQLä¸­æ¸¸æ ‡å¯ä»¥åœ¨å­˜å‚¨è¿‡ç¨‹å’Œå‡½æ•°ä¸­ä½¿ç”¨ã€‚\næ¯”å¦‚ï¼Œæˆ‘ä»¬æŸ¥è¯¢äº† employees æ•°æ®è¡¨ä¸­å·¥èµ„é«˜äº15000çš„å‘˜å·¥éƒ½æœ‰å“ªäº›ï¼š\nSELECT employee_id,last_name,salary FROM employees\nWHERE salary &gt; 15000;\n \nè¿™é‡Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡æ¸¸æ ‡æ¥æ“ä½œæ•°æ®è¡Œï¼Œå¦‚å›¾æ‰€ç¤ºæ­¤æ—¶æ¸¸æ ‡æ‰€åœ¨çš„è¡Œæ˜¯â€œ108â€çš„è®°å½•ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ç»“æœé›†ä¸Šæ»šåŠ¨æ¸¸æ ‡ï¼ŒæŒ‡å‘ç»“æœé›†ä¸­çš„ä»»æ„ä¸€è¡Œã€‚\n4.2 ä½¿ç”¨æ¸¸æ ‡æ­¥éª¤æ¸¸æ ‡å¿…é¡»åœ¨å£°æ˜å¤„ç†ç¨‹åºä¹‹å‰è¢«å£°æ˜ï¼Œå¹¶ä¸”å˜é‡å’Œæ¡ä»¶è¿˜å¿…é¡»åœ¨å£°æ˜æ¸¸æ ‡æˆ–å¤„ç†ç¨‹åºä¹‹å‰è¢«å£°æ˜ã€‚\nå¦‚æœæˆ‘ä»¬æƒ³è¦ä½¿ç”¨æ¸¸æ ‡ï¼Œä¸€èˆ¬éœ€è¦ç»å†å››ä¸ªæ­¥éª¤ã€‚ä¸åŒçš„ DBMS ä¸­ï¼Œä½¿ç”¨æ¸¸æ ‡çš„è¯­æ³•å¯èƒ½ç•¥æœ‰ä¸åŒã€‚\nç¬¬ä¸€æ­¥ï¼Œå£°æ˜æ¸¸æ ‡\nåœ¨MySQLä¸­ï¼Œä½¿ç”¨DECLAREå…³é”®å­—æ¥å£°æ˜æ¸¸æ ‡ï¼Œå…¶è¯­æ³•çš„åŸºæœ¬å½¢å¼å¦‚ä¸‹ï¼š\nDECLARE cursor_name CURSOR FOR select_statement; \nè¿™ä¸ªè¯­æ³•é€‚ç”¨äº MySQLï¼ŒSQL Serverï¼ŒDB2 å’Œ MariaDBã€‚å¦‚æœæ˜¯ç”¨ Oracle æˆ–è€… PostgreSQLï¼Œéœ€è¦å†™æˆï¼š\nDECLARE cursor_name CURSOR IS select_statement;\nè¦ä½¿ç”¨ SELECT è¯­å¥æ¥è·å–æ•°æ®ç»“æœé›†ï¼Œè€Œæ­¤æ—¶è¿˜æ²¡æœ‰å¼€å§‹éå†æ•°æ®ï¼Œè¿™é‡Œ select_statement ä»£è¡¨çš„æ˜¯ SELECT è¯­å¥ï¼Œè¿”å›ä¸€ä¸ªç”¨äºåˆ›å»ºæ¸¸æ ‡çš„ç»“æœé›†ã€‚\næ¯”å¦‚ï¼š\nDECLARE cur_emp CURSOR FOR \nSELECT employee_id,salary FROM employees;\nDECLARE cursor_fruit CURSOR FOR \nSELECT f_name, f_price FROM fruits ;\nç¬¬äºŒæ­¥ï¼Œæ‰“å¼€æ¸¸æ ‡\næ‰“å¼€æ¸¸æ ‡çš„è¯­æ³•å¦‚ä¸‹ï¼š\nOPEN cursor_name\nå½“æˆ‘ä»¬å®šä¹‰å¥½æ¸¸æ ‡ä¹‹åï¼Œå¦‚æœæƒ³è¦ä½¿ç”¨æ¸¸æ ‡ï¼Œå¿…é¡»å…ˆæ‰“å¼€æ¸¸æ ‡ã€‚æ‰“å¼€æ¸¸æ ‡çš„æ—¶å€™ SELECT è¯­å¥çš„æŸ¥è¯¢ç»“æœé›†å°±ä¼šé€åˆ°æ¸¸æ ‡å·¥ä½œåŒºï¼Œä¸ºåé¢æ¸¸æ ‡çš„é€æ¡è¯»å–ç»“æœé›†ä¸­çš„è®°å½•åšå‡†å¤‡ã€‚\nOPENã€€cur_emp ;\nç¬¬ä¸‰æ­¥ï¼Œä½¿ç”¨æ¸¸æ ‡ï¼ˆä»æ¸¸æ ‡ä¸­å–å¾—æ•°æ®ï¼‰\nè¯­æ³•å¦‚ä¸‹ï¼š\nFETCH cursor_name INTO var_name [, var_name] ...\nè¿™å¥çš„ä½œç”¨æ˜¯ä½¿ç”¨ cursor_name è¿™ä¸ªæ¸¸æ ‡æ¥è¯»å–å½“å‰è¡Œï¼Œå¹¶ä¸”å°†æ•°æ®ä¿å­˜åˆ° var_name è¿™ä¸ªå˜é‡ä¸­ï¼Œæ¸¸æ ‡æŒ‡é’ˆæŒ‡åˆ°ä¸‹ä¸€è¡Œã€‚å¦‚æœæ¸¸æ ‡è¯»å–çš„æ•°æ®è¡Œæœ‰å¤šä¸ªåˆ—åï¼Œåˆ™åœ¨ INTO å…³é”®å­—åé¢èµ‹å€¼ç»™å¤šä¸ªå˜é‡åå³å¯ã€‚\næ³¨æ„ï¼švar_nameå¿…é¡»åœ¨å£°æ˜æ¸¸æ ‡ä¹‹å‰å°±å®šä¹‰å¥½ã€‚\nFETCHã€€cur_emp INTO emp_id, emp_sal ;\næ³¨æ„ï¼šæ¸¸æ ‡çš„æŸ¥è¯¢ç»“æœé›†ä¸­çš„å­—æ®µæ•°ï¼Œå¿…é¡»è·Ÿ INTO åé¢çš„å˜é‡æ•°ä¸€è‡´ï¼Œå¦åˆ™ï¼Œåœ¨å­˜å‚¨è¿‡ç¨‹æ‰§è¡Œçš„æ—¶å€™ï¼ŒMySQL ä¼šæç¤ºé”™è¯¯ã€‚\nç¬¬å››æ­¥ï¼Œå…³é—­æ¸¸æ ‡\nCLOSE cursor_name\næœ‰ OPEN å°±ä¼šæœ‰ CLOSEï¼Œä¹Ÿå°±æ˜¯æ‰“å¼€å’Œå…³é—­æ¸¸æ ‡ã€‚å½“æˆ‘ä»¬ä½¿ç”¨å®Œæ¸¸æ ‡åéœ€è¦å…³é—­æ‰è¯¥æ¸¸æ ‡ã€‚å› ä¸ºæ¸¸æ ‡ä¼šå ç”¨ç³»ç»Ÿèµ„æºï¼Œå¦‚æœä¸åŠæ—¶å…³é—­ï¼Œæ¸¸æ ‡ä¼šä¸€ç›´ä¿æŒåˆ°å­˜å‚¨è¿‡ç¨‹ç»“æŸï¼Œå½±å“ç³»ç»Ÿè¿è¡Œçš„æ•ˆç‡ã€‚è€Œå…³é—­æ¸¸æ ‡çš„æ“ä½œï¼Œä¼šé‡Šæ”¾æ¸¸æ ‡å ç”¨çš„ç³»ç»Ÿèµ„æºã€‚\nå…³é—­æ¸¸æ ‡ä¹‹åï¼Œæˆ‘ä»¬å°±ä¸èƒ½å†æ£€ç´¢æŸ¥è¯¢ç»“æœä¸­çš„æ•°æ®è¡Œï¼Œå¦‚æœéœ€è¦æ£€ç´¢åªèƒ½å†æ¬¡æ‰“å¼€æ¸¸æ ‡ã€‚\nCLOSEã€€cur_emp;\n4.3 ä¸¾ä¾‹åˆ›å»ºå­˜å‚¨è¿‡ç¨‹â€œget_count_by_limit_total_salary()â€ï¼Œå£°æ˜INå‚æ•° limit_total_salaryï¼ŒDOUBLEç±»å‹ï¼›å£°æ˜OUTå‚æ•°total_countï¼ŒINTç±»å‹ã€‚å‡½æ•°çš„åŠŸèƒ½å¯ä»¥å®ç°ç´¯åŠ è–ªèµ„æœ€é«˜çš„å‡ ä¸ªå‘˜å·¥çš„è–ªèµ„å€¼ï¼Œç›´åˆ°è–ªèµ„æ€»å’Œè¾¾åˆ°limit_total_salaryå‚æ•°çš„å€¼ï¼Œè¿”å›ç´¯åŠ çš„äººæ•°ç»™total_countã€‚\nDELIMITER //\n\nCREATE PROCEDURE get_count_by_limit_total_salary(IN limit_total_salary DOUBLE,OUT total_count INT)\n\nBEGIN\n\tDECLARE sum_salary DOUBLE DEFAULT 0;  #è®°å½•ç´¯åŠ çš„æ€»å·¥èµ„\n\tDECLARE cursor_salary DOUBLE DEFAULT 0; #è®°å½•æŸä¸€ä¸ªå·¥èµ„å€¼\n\tDECLARE emp_count INT DEFAULT 0; #è®°å½•å¾ªç¯ä¸ªæ•°\n\t#å®šä¹‰æ¸¸æ ‡\n\tDECLARE emp_cursor CURSOR FOR SELECT salary FROM employees ORDER BY salary DESC;\n\t#æ‰“å¼€æ¸¸æ ‡\n\tOPEN emp_cursor;\n\t\n\tREPEAT\n\t\t#ä½¿ç”¨æ¸¸æ ‡ï¼ˆä»æ¸¸æ ‡ä¸­è·å–æ•°æ®ï¼‰\n\t\tFETCH emp_cursor INTO cursor_salary;\n\t\t\n\t\tSET sum_salary = sum_salary + cursor_salary;\n\t\tSET emp_count = emp_count + 1;\n\t\t\n\t\tUNTIL sum_salary &gt;= limit_total_salary\n\tEND REPEAT;\n\t\n\tSET total_count = emp_count;\n\t#å…³é—­æ¸¸æ ‡\n\tCLOSE emp_cursor;\n\t\nEND //\n\nDELIMITER ;\n4.5 å°ç»“æ¸¸æ ‡æ˜¯ MySQL çš„ä¸€ä¸ªé‡è¦çš„åŠŸèƒ½ï¼Œä¸ºé€æ¡è¯»å–ç»“æœé›†ä¸­çš„æ•°æ®ï¼Œæä¾›äº†å®Œç¾çš„è§£å†³æ–¹æ¡ˆã€‚è·Ÿåœ¨åº”ç”¨å±‚é¢å®ç°ç›¸åŒçš„åŠŸèƒ½ç›¸æ¯”ï¼Œæ¸¸æ ‡å¯ä»¥åœ¨å­˜å‚¨ç¨‹åºä¸­ä½¿ç”¨ï¼Œæ•ˆç‡é«˜ï¼Œç¨‹åºä¹Ÿæ›´åŠ ç®€æ´ã€‚\nä½†åŒæ—¶ä¹Ÿä¼šå¸¦æ¥ä¸€äº›æ€§èƒ½é—®é¢˜ï¼Œæ¯”å¦‚åœ¨ä½¿ç”¨æ¸¸æ ‡çš„è¿‡ç¨‹ä¸­ï¼Œä¼šå¯¹æ•°æ®è¡Œè¿›è¡ŒåŠ é”ï¼Œè¿™æ ·åœ¨ä¸šåŠ¡å¹¶å‘é‡å¤§çš„æ—¶å€™ï¼Œä¸ä»…ä¼šå½±å“ä¸šåŠ¡ä¹‹é—´çš„æ•ˆç‡ï¼Œè¿˜ä¼šæ¶ˆè€—ç³»ç»Ÿèµ„æºï¼Œé€ æˆå†…å­˜ä¸è¶³ï¼Œè¿™æ˜¯å› ä¸ºæ¸¸æ ‡æ˜¯åœ¨å†…å­˜ä¸­è¿›è¡Œçš„å¤„ç†ã€‚\nå»ºè®®ï¼šå…»æˆç”¨å®Œä¹‹åå°±å…³é—­çš„ä¹ æƒ¯ï¼Œè¿™æ ·æ‰èƒ½æé«˜ç³»ç»Ÿçš„æ•´ä½“æ•ˆç‡ã€‚\nè¡¥å……ï¼šMySQL 8.0çš„æ–°ç‰¹æ€§â€”å…¨å±€å˜é‡çš„æŒä¹…åŒ–åœ¨MySQLæ•°æ®åº“ä¸­ï¼Œå…¨å±€å˜é‡å¯ä»¥é€šè¿‡SET GLOBALè¯­å¥æ¥è®¾ç½®ã€‚ä¾‹å¦‚ï¼Œè®¾ç½®æœåŠ¡å™¨è¯­å¥è¶…æ—¶çš„é™åˆ¶ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®ç³»ç»Ÿå˜é‡max_execution_timeæ¥å®ç°ï¼š\nSET GLOBAL MAX_EXECUTION_TIME=2000;\nä½¿ç”¨SET GLOBALè¯­å¥è®¾ç½®çš„å˜é‡å€¼åªä¼šä¸´æ—¶ç”Ÿæ•ˆã€‚æ•°æ®åº“é‡å¯åï¼ŒæœåŠ¡å™¨åˆä¼šä»MySQLé…ç½®æ–‡ä»¶ä¸­è¯»å–å˜é‡çš„é»˜è®¤å€¼ã€‚MySQL 8.0ç‰ˆæœ¬æ–°å¢äº†SET PERSISTå‘½ä»¤ã€‚ä¾‹å¦‚ï¼Œè®¾ç½®æœåŠ¡å™¨çš„æœ€å¤§è¿æ¥æ•°ä¸º1000ï¼š\nSET PERSIST global max_connections = 1000;\nMySQLä¼šå°†è¯¥å‘½ä»¤çš„é…ç½®ä¿å­˜åˆ°æ•°æ®ç›®å½•ä¸‹çš„mysqld-auto.cnfæ–‡ä»¶ä¸­ï¼Œä¸‹æ¬¡å¯åŠ¨æ—¶ä¼šè¯»å–è¯¥æ–‡ä»¶ï¼Œç”¨å…¶ä¸­çš„é…ç½®æ¥è¦†ç›–é»˜è®¤çš„é…ç½®æ–‡ä»¶ã€‚\nä¸¾ä¾‹ï¼š\næŸ¥çœ‹å…¨å±€å˜é‡max_connectionsçš„å€¼ï¼Œç»“æœå¦‚ä¸‹ï¼š\nmysql&gt; show variables like '%max_connections%';\n+------------------------+-------+\n| Variable_name          | Value |\n+------------------------+-------+\n| max_connections        | 151   |\n| mysqlx_max_connections | 100   |\n+------------------------+-------+\n2 rows in set, 1 warning (0.00 sec)\nè®¾ç½®å…¨å±€å˜é‡max_connectionsçš„å€¼ï¼š\nmysql&gt; set persist max_connections=1000;\nQuery OK, 0 rows affected (0.00 sec)\né‡å¯MySQLæœåŠ¡å™¨ï¼Œå†æ¬¡æŸ¥è¯¢max_connectionsçš„å€¼ï¼š\nmysql&gt; show variables like '%max_connections%';\n+------------------------+-------+\n| Variable_name          | Value |\n+------------------------+-------+\n| max_connections        | 1000  |\n| mysqlx_max_connections | 100   |\n+------------------------+-------+\n2 rows in set, 1 warning (0.00 sec)\nç¬¬17ç« _è§¦å‘å™¨è®²å¸ˆï¼šå°šç¡…è°·-å®‹çº¢åº·ï¼ˆæ±Ÿæ¹–äººç§°ï¼šåº·å¸ˆå‚…ï¼‰\nå®˜ç½‘ï¼šhttp://www.atguigu.com\n\nåœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°è¿™æ ·çš„æƒ…å†µï¼šæœ‰ 2 ä¸ªæˆ–è€…å¤šä¸ªç›¸äº’å…³è”çš„è¡¨ï¼Œå¦‚å•†å“ä¿¡æ¯å’Œåº“å­˜ä¿¡æ¯åˆ†åˆ«å­˜æ”¾åœ¨ 2 ä¸ªä¸åŒçš„æ•°æ®è¡¨ä¸­ï¼Œæˆ‘ä»¬åœ¨æ·»åŠ ä¸€æ¡æ–°å•†å“è®°å½•çš„æ—¶å€™ï¼Œä¸ºäº†ä¿è¯æ•°æ®çš„å®Œæ•´æ€§ï¼Œå¿…é¡»åŒæ—¶åœ¨åº“å­˜è¡¨ä¸­æ·»åŠ ä¸€æ¡åº“å­˜è®°å½•ã€‚\nè¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬å°±å¿…é¡»æŠŠè¿™ä¸¤ä¸ªå…³è”çš„æ“ä½œæ­¥éª¤å†™åˆ°ç¨‹åºé‡Œé¢ï¼Œè€Œä¸”è¦ç”¨äº‹åŠ¡åŒ…è£¹èµ·æ¥ï¼Œç¡®ä¿è¿™ä¸¤ä¸ªæ“ä½œæˆä¸ºä¸€ä¸ªåŸå­æ“ä½œï¼Œè¦ä¹ˆå…¨éƒ¨æ‰§è¡Œï¼Œè¦ä¹ˆå…¨éƒ¨ä¸æ‰§è¡Œã€‚è¦æ˜¯é‡åˆ°ç‰¹æ®Šæƒ…å†µï¼Œå¯èƒ½è¿˜éœ€è¦å¯¹æ•°æ®è¿›è¡Œæ‰‹åŠ¨ç»´æŠ¤ï¼Œè¿™æ ·å°±å¾ˆå®¹æ˜“å¿˜è®°å…¶ä¸­çš„ä¸€æ­¥ï¼Œå¯¼è‡´æ•°æ®ç¼ºå¤±ã€‚\nè¿™ä¸ªæ—¶å€™ï¼Œå’±ä»¬å¯ä»¥ä½¿ç”¨è§¦å‘å™¨ã€‚ä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªè§¦å‘å™¨ï¼Œè®©å•†å“ä¿¡æ¯æ•°æ®çš„æ’å…¥æ“ä½œè‡ªåŠ¨è§¦å‘åº“å­˜æ•°æ®çš„æ’å…¥æ“ä½œã€‚è¿™æ ·ä¸€æ¥ï¼Œå°±ä¸ç”¨æ‹…å¿ƒå› ä¸ºå¿˜è®°æ·»åŠ åº“å­˜æ•°æ®è€Œå¯¼è‡´çš„æ•°æ®ç¼ºå¤±äº†ã€‚\n1. è§¦å‘å™¨æ¦‚è¿°MySQLä»5.0.2ç‰ˆæœ¬å¼€å§‹æ”¯æŒè§¦å‘å™¨ã€‚MySQLçš„è§¦å‘å™¨å’Œå­˜å‚¨è¿‡ç¨‹ä¸€æ ·ï¼Œéƒ½æ˜¯åµŒå…¥åˆ°MySQLæœåŠ¡å™¨çš„ä¸€æ®µç¨‹åºã€‚\nè§¦å‘å™¨æ˜¯ç”±äº‹ä»¶æ¥è§¦å‘æŸä¸ªæ“ä½œï¼Œè¿™äº›äº‹ä»¶åŒ…æ‹¬INSERTã€UPDATEã€DELETEäº‹ä»¶ã€‚æ‰€è°“äº‹ä»¶å°±æ˜¯æŒ‡ç”¨æˆ·çš„åŠ¨ä½œæˆ–è€…è§¦å‘æŸé¡¹è¡Œä¸ºã€‚å¦‚æœå®šä¹‰äº†è§¦å‘ç¨‹åºï¼Œå½“æ•°æ®åº“æ‰§è¡Œè¿™äº›è¯­å¥æ—¶å€™ï¼Œå°±ç›¸å½“äºäº‹ä»¶å‘ç”Ÿäº†ï¼Œå°±ä¼šè‡ªåŠ¨æ¿€å‘è§¦å‘å™¨æ‰§è¡Œç›¸åº”çš„æ“ä½œã€‚\nå½“å¯¹æ•°æ®è¡¨ä¸­çš„æ•°æ®æ‰§è¡Œæ’å…¥ã€æ›´æ–°å’Œåˆ é™¤æ“ä½œï¼Œéœ€è¦è‡ªåŠ¨æ‰§è¡Œä¸€äº›æ•°æ®åº“é€»è¾‘æ—¶ï¼Œå¯ä»¥ä½¿ç”¨è§¦å‘å™¨æ¥å®ç°ã€‚\n2. è§¦å‘å™¨çš„åˆ›å»º2.1 åˆ›å»ºè§¦å‘å™¨è¯­æ³•åˆ›å»ºè§¦å‘å™¨çš„è¯­æ³•ç»“æ„æ˜¯ï¼š\nCREATE TRIGGER è§¦å‘å™¨åç§° \n{BEFORE|AFTER} {INSERT|UPDATE|DELETE} ON è¡¨å \nFOR EACH ROW \nè§¦å‘å™¨æ‰§è¡Œçš„è¯­å¥å—;\nè¯´æ˜ï¼š\n\nè¡¨åï¼šè¡¨ç¤ºè§¦å‘å™¨ç›‘æ§çš„å¯¹è±¡ã€‚\nBEFORE|AFTERï¼šè¡¨ç¤ºè§¦å‘çš„æ—¶é—´ã€‚BEFORE è¡¨ç¤ºåœ¨äº‹ä»¶ä¹‹å‰è§¦å‘ï¼›AFTER è¡¨ç¤ºåœ¨äº‹ä»¶ä¹‹åè§¦å‘ã€‚\nINSERT|UPDATE|DELETEï¼šè¡¨ç¤ºè§¦å‘çš„äº‹ä»¶ã€‚\nINSERT è¡¨ç¤ºæ’å…¥è®°å½•æ—¶è§¦å‘ï¼›\nUPDATE è¡¨ç¤ºæ›´æ–°è®°å½•æ—¶è§¦å‘ï¼›\nDELETE è¡¨ç¤ºåˆ é™¤è®°å½•æ—¶è§¦å‘ã€‚\n\n\n\n\nè§¦å‘å™¨æ‰§è¡Œçš„è¯­å¥å—ï¼šå¯ä»¥æ˜¯å•æ¡SQLè¯­å¥ï¼Œä¹Ÿå¯ä»¥æ˜¯ç”±BEGINâ€¦ENDç»“æ„ç»„æˆçš„å¤åˆè¯­å¥å—ã€‚\n\n2.2 ä»£ç ä¸¾ä¾‹ä¸¾ä¾‹1ï¼š\n1ã€åˆ›å»ºæ•°æ®è¡¨ï¼š\nCREATE TABLE test_trigger (\nid INT PRIMARY KEY AUTO_INCREMENT,\nt_note VARCHAR(30)\n);\n\n\nCREATE TABLE test_trigger_log (\nid INT PRIMARY KEY AUTO_INCREMENT,\nt_log VARCHAR(30)\n);\n2ã€åˆ›å»ºè§¦å‘å™¨ï¼šåˆ›å»ºåç§°ä¸ºbefore_insertçš„è§¦å‘å™¨ï¼Œå‘test_triggeræ•°æ®è¡¨æ’å…¥æ•°æ®ä¹‹å‰ï¼Œå‘test_trigger_logæ•°æ®è¡¨ä¸­æ’å…¥before_insertçš„æ—¥å¿—ä¿¡æ¯ã€‚\nDELIMITER //\n\nCREATE TRIGGER before_insert\nBEFORE INSERT ON test_trigger \nFOR EACH ROW\nBEGIN\n\tINSERT INTO test_trigger_log (t_log)\n\tVALUES('before_insert');\n\nEND //\n\nDELIMITER ;\n3ã€å‘test_triggeræ•°æ®è¡¨ä¸­æ’å…¥æ•°æ®\nINSERT INTO test_trigger (t_note) VALUES ('æµ‹è¯• BEFORE INSERT è§¦å‘å™¨');\n4ã€æŸ¥çœ‹test_trigger_logæ•°æ®è¡¨ä¸­çš„æ•°æ®\nmysql&gt; SELECT * FROM test_trigger_log;\n+----+---------------+\n| id | t_log         |\n+----+---------------+\n|  1 | before_insert |\n+----+---------------+\n1 row in set (0.00 sec)\nä¸¾ä¾‹2ï¼š\n1ã€åˆ›å»ºåç§°ä¸ºafter_insertçš„è§¦å‘å™¨ï¼Œå‘test_triggeræ•°æ®è¡¨æ’å…¥æ•°æ®ä¹‹åï¼Œå‘test_trigger_logæ•°æ®è¡¨ä¸­æ’å…¥after_insertçš„æ—¥å¿—ä¿¡æ¯ã€‚\nDELIMITER //\n\nCREATE TRIGGER after_insert\nAFTER INSERT ON test_trigger\nFOR EACH ROW\nBEGIN\n\tINSERT INTO test_trigger_log (t_log)\n\tVALUES('after_insert');\nEND //\n\nDELIMITER ;\n2ã€å‘test_triggeræ•°æ®è¡¨ä¸­æ’å…¥æ•°æ®ã€‚\nINSERT INTO test_trigger (t_note) VALUES ('æµ‹è¯• AFTER INSERT è§¦å‘å™¨');\n3ã€æŸ¥çœ‹test_trigger_logæ•°æ®è¡¨ä¸­çš„æ•°æ®\nmysql&gt; SELECT * FROM test_trigger_log;\n+----+---------------+\n| id | t_log         |\n+----+---------------+\n|  1 | before_insert |\n|  2 | before_insert |\n|  3 | after_insert  |\n+----+---------------+\n3 rows in set (0.00 sec)\nä¸¾ä¾‹3ï¼šå®šä¹‰è§¦å‘å™¨â€œsalary_check_triggerâ€ï¼ŒåŸºäºå‘˜å·¥è¡¨â€œemployeesâ€çš„INSERTäº‹ä»¶ï¼Œåœ¨INSERTä¹‹å‰æ£€æŸ¥å°†è¦æ·»åŠ çš„æ–°å‘˜å·¥è–ªèµ„æ˜¯å¦å¤§äºä»–é¢†å¯¼çš„è–ªèµ„ï¼Œå¦‚æœå¤§äºé¢†å¯¼è–ªèµ„ï¼Œåˆ™æŠ¥sqlstate_valueä¸ºâ€™HY000â€™çš„é”™è¯¯ï¼Œä»è€Œä½¿å¾—æ·»åŠ å¤±è´¥ã€‚\nDELIMITER //\n\nCREATE TRIGGER salary_check_trigger\nBEFORE INSERT ON employees FOR EACH ROW\nBEGIN\n\tDECLARE mgrsalary DOUBLE;\n\tSELECT salary INTO mgrsalary FROM employees WHERE employee_id = NEW.manager_id;\n\n\tIF NEW.salary &gt; mgrsalary THEN\n\t\tSIGNAL SQLSTATE 'HY000' SET MESSAGE_TEXT = 'è–ªèµ„é«˜äºé¢†å¯¼è–ªèµ„é”™è¯¯';\n\tEND IF;\nEND //\n\nDELIMITER ;\nä¸Šé¢è§¦å‘å™¨å£°æ˜è¿‡ç¨‹ä¸­çš„NEWå…³é”®å­—ä»£è¡¨INSERTæ·»åŠ è¯­å¥çš„æ–°è®°å½•ã€‚\n3. æŸ¥çœ‹ã€åˆ é™¤è§¦å‘å™¨3.1 æŸ¥çœ‹è§¦å‘å™¨æŸ¥çœ‹è§¦å‘å™¨æ˜¯æŸ¥çœ‹æ•°æ®åº“ä¸­å·²ç»å­˜åœ¨çš„è§¦å‘å™¨çš„å®šä¹‰ã€çŠ¶æ€å’Œè¯­æ³•ä¿¡æ¯ç­‰ã€‚\næ–¹å¼1ï¼šæŸ¥çœ‹å½“å‰æ•°æ®åº“çš„æ‰€æœ‰è§¦å‘å™¨çš„å®šä¹‰\nSHOW TRIGGERS\\G\næ–¹å¼2ï¼šæŸ¥çœ‹å½“å‰æ•°æ®åº“ä¸­æŸä¸ªè§¦å‘å™¨çš„å®šä¹‰\nSHOW CREATE TRIGGER è§¦å‘å™¨å\næ–¹å¼3ï¼šä»ç³»ç»Ÿåº“information_schemaçš„TRIGGERSè¡¨ä¸­æŸ¥è¯¢â€œsalary_check_triggerâ€è§¦å‘å™¨çš„ä¿¡æ¯ã€‚\nSELECT * FROM information_schema.TRIGGERS;\n3.2 åˆ é™¤è§¦å‘å™¨è§¦å‘å™¨ä¹Ÿæ˜¯æ•°æ®åº“å¯¹è±¡ï¼Œåˆ é™¤è§¦å‘å™¨ä¹Ÿç”¨DROPè¯­å¥ï¼Œè¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š\nDROP TRIGGER  IF EXISTS è§¦å‘å™¨åç§°;\n4. è§¦å‘å™¨çš„ä¼˜ç¼ºç‚¹4.1 ä¼˜ç‚¹1ã€è§¦å‘å™¨å¯ä»¥ç¡®ä¿æ•°æ®çš„å®Œæ•´æ€§ã€‚\nå‡è®¾æˆ‘ä»¬ç”¨è¿›è´§å•å¤´è¡¨ï¼ˆdemo.importheadï¼‰æ¥ä¿å­˜è¿›è´§å•çš„æ€»ä½“ä¿¡æ¯ï¼ŒåŒ…æ‹¬è¿›è´§å•ç¼–å·ã€ä¾›è´§å•†ç¼–å·ã€ä»“åº“ç¼–å·ã€æ€»è®¡è¿›è´§æ•°é‡ã€æ€»è®¡è¿›è´§é‡‘é¢å’ŒéªŒæ”¶æ—¥æœŸã€‚\n \nç”¨è¿›è´§å•æ˜ç»†è¡¨ï¼ˆdemo.importdetailsï¼‰æ¥ä¿å­˜è¿›è´§å•†å“çš„æ˜ç»†ï¼ŒåŒ…æ‹¬è¿›è´§å•ç¼–å·ã€å•†å“ç¼–å·ã€è¿›è´§æ•°é‡ã€è¿›è´§ä»·æ ¼å’Œè¿›è´§é‡‘é¢ã€‚\n \næ¯å½“æˆ‘ä»¬å½•å…¥ã€åˆ é™¤å’Œä¿®æ”¹ä¸€æ¡è¿›è´§å•æ˜ç»†æ•°æ®çš„æ—¶å€™ï¼Œè¿›è´§å•æ˜ç»†è¡¨é‡Œçš„æ•°æ®å°±ä¼šå‘ç”Ÿå˜åŠ¨ã€‚è¿™ä¸ªæ—¶å€™ï¼Œåœ¨è¿›è´§å•å¤´è¡¨ä¸­çš„æ€»è®¡æ•°é‡å’Œæ€»è®¡é‡‘é¢å°±å¿…é¡»é‡æ–°è®¡ç®—ï¼Œå¦åˆ™ï¼Œè¿›è´§å•å¤´è¡¨ä¸­çš„æ€»è®¡æ•°é‡å’Œæ€»è®¡é‡‘é¢å°±ä¸ç­‰äºè¿›è´§å•æ˜ç»†è¡¨ä¸­æ•°é‡åˆè®¡å’Œé‡‘é¢åˆè®¡äº†ï¼Œè¿™å°±æ˜¯æ•°æ®ä¸ä¸€è‡´ã€‚\nä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨è§¦å‘å™¨ï¼Œè§„å®šæ¯å½“è¿›è´§å•æ˜ç»†è¡¨æœ‰æ•°æ®æ’å…¥ã€ä¿®æ”¹å’Œåˆ é™¤çš„æ“ä½œæ—¶ï¼Œè‡ªåŠ¨è§¦å‘ 2 æ­¥æ“ä½œï¼š\n1ï¼‰é‡æ–°è®¡ç®—è¿›è´§å•æ˜ç»†è¡¨ä¸­çš„æ•°é‡åˆè®¡å’Œé‡‘é¢åˆè®¡ï¼›\n2ï¼‰ç”¨ç¬¬ä¸€æ­¥ä¸­è®¡ç®—å‡ºæ¥çš„å€¼æ›´æ–°è¿›è´§å•å¤´è¡¨ä¸­çš„åˆè®¡æ•°é‡ä¸åˆè®¡é‡‘é¢ã€‚\nè¿™æ ·ä¸€æ¥ï¼Œè¿›è´§å•å¤´è¡¨ä¸­çš„åˆè®¡æ•°é‡ä¸åˆè®¡é‡‘é¢çš„å€¼ï¼Œå°±å§‹ç»ˆä¸è¿›è´§å•æ˜ç»†è¡¨ä¸­è®¡ç®—å‡ºæ¥çš„åˆè®¡æ•°é‡ä¸åˆè®¡é‡‘é¢çš„å€¼ç›¸åŒï¼Œæ•°æ®å°±æ˜¯ä¸€è‡´çš„ï¼Œä¸ä¼šäº’ç›¸çŸ›ç›¾ã€‚\n2ã€è§¦å‘å™¨å¯ä»¥å¸®åŠ©æˆ‘ä»¬è®°å½•æ“ä½œæ—¥å¿—ã€‚\nåˆ©ç”¨è§¦å‘å™¨ï¼Œå¯ä»¥å…·ä½“è®°å½•ä»€ä¹ˆæ—¶é—´å‘ç”Ÿäº†ä»€ä¹ˆã€‚æ¯”å¦‚ï¼Œè®°å½•ä¿®æ”¹ä¼šå‘˜å‚¨å€¼é‡‘é¢çš„è§¦å‘å™¨ï¼Œå°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ã€‚è¿™å¯¹æˆ‘ä»¬è¿˜åŸæ“ä½œæ‰§è¡Œæ—¶çš„å…·ä½“åœºæ™¯ï¼Œæ›´å¥½åœ°å®šä½é—®é¢˜åŸå› å¾ˆæœ‰å¸®åŠ©ã€‚\n3ã€è§¦å‘å™¨è¿˜å¯ä»¥ç”¨åœ¨æ“ä½œæ•°æ®å‰ï¼Œå¯¹æ•°æ®è¿›è¡Œåˆæ³•æ€§æ£€æŸ¥ã€‚\næ¯”å¦‚ï¼Œè¶…å¸‚è¿›è´§çš„æ—¶å€™ï¼Œéœ€è¦åº“ç®¡å½•å…¥è¿›è´§ä»·æ ¼ã€‚ä½†æ˜¯ï¼Œäººä¸ºæ“ä½œå¾ˆå®¹æ˜“çŠ¯é”™è¯¯ï¼Œæ¯”å¦‚è¯´åœ¨å½•å…¥æ•°é‡çš„æ—¶å€™ï¼ŒæŠŠæ¡å½¢ç æ‰«è¿›å»äº†ï¼›å½•å…¥é‡‘é¢çš„æ—¶å€™ï¼Œçœ‹ä¸²äº†è¡Œï¼Œå½•å…¥çš„ä»·æ ¼è¿œè¶…å”®ä»·ï¼Œå¯¼è‡´è´¦é¢ä¸Šçš„å·¨äºâ€¦â€¦è¿™äº›éƒ½å¯ä»¥é€šè¿‡è§¦å‘å™¨ï¼Œåœ¨å®é™…æ’å…¥æˆ–è€…æ›´æ–°æ“ä½œä¹‹å‰ï¼Œå¯¹ç›¸åº”çš„æ•°æ®è¿›è¡Œæ£€æŸ¥ï¼ŒåŠæ—¶æç¤ºé”™è¯¯ï¼Œé˜²æ­¢é”™è¯¯æ•°æ®è¿›å…¥ç³»ç»Ÿã€‚\n4.2 ç¼ºç‚¹1ã€è§¦å‘å™¨æœ€å¤§çš„ä¸€ä¸ªé—®é¢˜å°±æ˜¯å¯è¯»æ€§å·®ã€‚\nå› ä¸ºè§¦å‘å™¨å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œå¹¶ä¸”ç”±äº‹ä»¶é©±åŠ¨ï¼Œè¿™å°±æ„å‘³ç€è§¦å‘å™¨æœ‰å¯èƒ½ä¸å—åº”ç”¨å±‚çš„æ§åˆ¶ã€‚è¿™å¯¹ç³»ç»Ÿç»´æŠ¤æ˜¯éå¸¸æœ‰æŒ‘æˆ˜çš„ã€‚\næ¯”å¦‚ï¼Œåˆ›å»ºè§¦å‘å™¨ç”¨äºä¿®æ”¹ä¼šå‘˜å‚¨å€¼æ“ä½œã€‚å¦‚æœè§¦å‘å™¨ä¸­çš„æ“ä½œå‡ºäº†é—®é¢˜ï¼Œä¼šå¯¼è‡´ä¼šå‘˜å‚¨å€¼é‡‘é¢æ›´æ–°å¤±è´¥ã€‚æˆ‘ç”¨ä¸‹é¢çš„ä»£ç æ¼”ç¤ºä¸€ä¸‹ï¼š\nmysql&gt; update demo.membermaster set memberdeposit=20 where memberid = 2;\nERROR 1054 (42S22): Unknown column 'aa' in 'field list'\nç»“æœæ˜¾ç¤ºï¼Œç³»ç»Ÿæç¤ºé”™è¯¯ï¼Œå­—æ®µâ€œaaâ€ä¸å­˜åœ¨ã€‚\nè¿™æ˜¯å› ä¸ºï¼Œè§¦å‘å™¨ä¸­çš„æ•°æ®æ’å…¥æ“ä½œå¤šäº†ä¸€ä¸ªå­—æ®µï¼Œç³»ç»Ÿæç¤ºé”™è¯¯ã€‚å¯æ˜¯ï¼Œå¦‚æœä½ ä¸äº†è§£è¿™ä¸ªè§¦å‘å™¨ï¼Œå¾ˆå¯èƒ½ä¼šè®¤ä¸ºæ˜¯æ›´æ–°è¯­å¥æœ¬èº«çš„é—®é¢˜ï¼Œæˆ–è€…æ˜¯ä¼šå‘˜ä¿¡æ¯è¡¨çš„ç»“æ„å‡ºäº†é—®é¢˜ã€‚è¯´ä¸å®šä½ è¿˜ä¼šç»™ä¼šå‘˜ä¿¡æ¯è¡¨æ·»åŠ ä¸€ä¸ªå«â€œaaâ€çš„å­—æ®µï¼Œè¯•å›¾è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç»“æœåªèƒ½æ˜¯ç™½è´¹åŠ›ã€‚\n2ã€ç›¸å…³æ•°æ®çš„å˜æ›´ï¼Œå¯èƒ½ä¼šå¯¼è‡´è§¦å‘å™¨å‡ºé”™ã€‚\nç‰¹åˆ«æ˜¯æ•°æ®è¡¨ç»“æ„çš„å˜æ›´ï¼Œéƒ½å¯èƒ½ä¼šå¯¼è‡´è§¦å‘å™¨å‡ºé”™ï¼Œè¿›è€Œå½±å“æ•°æ®æ“ä½œçš„æ­£å¸¸è¿è¡Œã€‚è¿™äº›éƒ½ä¼šç”±äºè§¦å‘å™¨æœ¬èº«çš„éšè”½æ€§ï¼Œå½±å“åˆ°åº”ç”¨ä¸­é”™è¯¯åŸå› æ’æŸ¥çš„æ•ˆç‡ã€‚\n4.3 æ³¨æ„ç‚¹æ³¨æ„ï¼Œå¦‚æœåœ¨å­è¡¨ä¸­å®šä¹‰äº†å¤–é”®çº¦æŸï¼Œå¹¶ä¸”å¤–é”®æŒ‡å®šäº†ON UPDATE/DELETE CASCADE/SET NULLå­å¥ï¼Œæ­¤æ—¶ä¿®æ”¹çˆ¶è¡¨è¢«å¼•ç”¨çš„é”®å€¼æˆ–åˆ é™¤çˆ¶è¡¨è¢«å¼•ç”¨çš„è®°å½•è¡Œæ—¶ï¼Œä¹Ÿä¼šå¼•èµ·å­è¡¨çš„ä¿®æ”¹å’Œåˆ é™¤æ“ä½œï¼Œæ­¤æ—¶åŸºäºå­è¡¨çš„UPDATEå’ŒDELETEè¯­å¥å®šä¹‰çš„è§¦å‘å™¨å¹¶ä¸ä¼šè¢«æ¿€æ´»ã€‚\nä¾‹å¦‚ï¼šåŸºäºå­è¡¨å‘˜å·¥è¡¨ï¼ˆt_employeeï¼‰çš„DELETEè¯­å¥å®šä¹‰äº†è§¦å‘å™¨t1ï¼Œè€Œå­è¡¨çš„éƒ¨é—¨ç¼–å·ï¼ˆdidï¼‰å­—æ®µå®šä¹‰äº†å¤–é”®çº¦æŸå¼•ç”¨äº†çˆ¶è¡¨éƒ¨é—¨è¡¨ï¼ˆt_departmentï¼‰çš„ä¸»é”®åˆ—éƒ¨é—¨ç¼–å·ï¼ˆdidï¼‰ï¼Œå¹¶ä¸”è¯¥å¤–é”®åŠ äº†â€œON DELETE SET NULLâ€å­å¥ï¼Œé‚£ä¹ˆå¦‚æœæ­¤æ—¶åˆ é™¤çˆ¶è¡¨éƒ¨é—¨è¡¨ï¼ˆt_departmentï¼‰åœ¨å­è¡¨å‘˜å·¥è¡¨ï¼ˆt_employeeï¼‰æœ‰åŒ¹é…è®°å½•çš„éƒ¨é—¨è®°å½•æ—¶ï¼Œä¼šå¼•èµ·å­è¡¨å‘˜å·¥è¡¨ï¼ˆt_employeeï¼‰åŒ¹é…è®°å½•çš„éƒ¨é—¨ç¼–å·ï¼ˆdidï¼‰ä¿®æ”¹ä¸ºNULLï¼Œä½†æ˜¯æ­¤æ—¶ä¸ä¼šæ¿€æ´»è§¦å‘å™¨t1ã€‚åªæœ‰ç›´æ¥å¯¹å­è¡¨å‘˜å·¥è¡¨ï¼ˆt_employeeï¼‰æ‰§è¡ŒDELETEè¯­å¥æ—¶æ‰ä¼šæ¿€æ´»è§¦å‘å™¨t1ã€‚\nMySQL8æ–°ç‰¹æ€§MySQLä»5.7ç‰ˆæœ¬ç›´æ¥è·³è·ƒå‘å¸ƒäº†8.0ç‰ˆæœ¬ï¼Œå¯è§è¿™æ˜¯ä¸€ä¸ªä»¤äººå…´å¥‹çš„é‡Œç¨‹ç¢‘ç‰ˆæœ¬ã€‚MySQL 8ç‰ˆæœ¬åœ¨åŠŸèƒ½ä¸Šåšäº†æ˜¾è‘—çš„æ”¹è¿›ä¸å¢å¼ºï¼Œå¼€å‘è€…å¯¹MySQLçš„æºä»£ç è¿›è¡Œäº†é‡æ„ï¼Œæœ€çªå‡ºçš„ä¸€ç‚¹æ˜¯å¤šMySQL Optimizerä¼˜åŒ–å™¨è¿›è¡Œäº†æ”¹è¿›ã€‚ä¸ä»…åœ¨é€Ÿåº¦ä¸Šå¾—åˆ°äº†æ”¹å–„ï¼Œè¿˜ä¸ºç”¨æˆ·å¸¦æ¥äº†æ›´å¥½çš„æ€§èƒ½å’Œæ›´æ£’çš„ä½“éªŒã€‚\n1. æ–°ç‰¹æ€§æ¦‚è¿°1.1 MySQL8.0 æ–°å¢ç‰¹æ€§1. æ›´ç®€ä¾¿çš„NoSQLæ”¯æŒNoSQLæ³›æŒ‡éå…³ç³»å‹æ•°æ®åº“å’Œæ•°æ®å­˜å‚¨ã€‚éšç€äº’è”ç½‘å¹³å°çš„è§„æ¨¡é£é€Ÿå‘å±•ï¼Œä¼ ç»Ÿçš„å…³ç³»å‹æ•°æ®åº“å·²ç»è¶Šæ¥è¶Šä¸èƒ½æ»¡è¶³éœ€æ±‚ã€‚ä»5.6ç‰ˆæœ¬å¼€å§‹ï¼ŒMySQLå°±å¼€å§‹æ”¯æŒç®€å•çš„NoSQLå­˜å‚¨åŠŸèƒ½ã€‚MySQL 8å¯¹è¿™ä¸€åŠŸèƒ½åšäº†ä¼˜åŒ–ï¼Œä»¥æ›´çµæ´»çš„æ–¹å¼å®ç°NoSQLåŠŸèƒ½ï¼Œä¸å†ä¾èµ–æ¨¡å¼ï¼ˆschemaï¼‰ã€‚\n2. æ›´å¥½çš„ç´¢å¼•åœ¨æŸ¥è¯¢ä¸­ï¼Œæ­£ç¡®åœ°ä½¿ç”¨ç´¢å¼•å¯ä»¥æé«˜æŸ¥è¯¢çš„æ•ˆç‡ã€‚MySQL 8ä¸­æ–°å¢äº†éšè—ç´¢å¼•å’Œé™åºç´¢å¼•ã€‚éšè—ç´¢å¼•å¯ä»¥ç”¨æ¥æµ‹è¯•å»æ‰ç´¢å¼•å¯¹æŸ¥è¯¢æ€§èƒ½çš„å½±å“ã€‚åœ¨æŸ¥è¯¢ä¸­æ··åˆå­˜åœ¨å¤šåˆ—ç´¢å¼•æ—¶ï¼Œä½¿ç”¨é™åºç´¢å¼•å¯ä»¥æé«˜æŸ¥è¯¢çš„æ€§èƒ½ã€‚\n3.æ›´å®Œå–„çš„JSONæ”¯æŒMySQLä»5.7å¼€å§‹æ”¯æŒåŸç”ŸJSONæ•°æ®çš„å­˜å‚¨ï¼ŒMySQL 8å¯¹è¿™ä¸€åŠŸèƒ½åšäº†ä¼˜åŒ–ï¼Œå¢åŠ äº†èšåˆå‡½æ•°JSON_ARRAYAGG()å’ŒJSON_OBJECTAGG()ï¼Œå°†å‚æ•°èšåˆä¸ºJSONæ•°ç»„æˆ–å¯¹è±¡ï¼Œæ–°å¢äº†è¡Œå†…æ“ä½œç¬¦ -&gt;&gt;ï¼Œæ˜¯åˆ—è·¯å¾„è¿ç®—ç¬¦ -&gt;çš„å¢å¼ºï¼Œå¯¹JSONæ’åºåšäº†æå‡ï¼Œå¹¶ä¼˜åŒ–äº†JSONçš„æ›´æ–°æ“ä½œã€‚\n4.å®‰å…¨å’Œè´¦æˆ·ç®¡ç†MySQL 8ä¸­æ–°å¢äº†caching_sha2_password æˆæƒæ’ä»¶ã€è§’è‰²ã€å¯†ç å†å²è®°å½•å’ŒFIPSæ¨¡å¼æ”¯æŒï¼Œè¿™äº›ç‰¹æ€§æé«˜äº†æ•°æ®åº“çš„å®‰å…¨æ€§å’Œæ€§èƒ½ï¼Œä½¿æ•°æ®åº“ç®¡ç†å‘˜èƒ½å¤Ÿæ›´çµæ´»åœ°è¿›è¡Œè´¦æˆ·ç®¡ç†å·¥ä½œã€‚\n5.InnoDBçš„å˜åŒ–InnoDBæ˜¯MySQLé»˜è®¤çš„å­˜å‚¨å¼•æ“ï¼Œæ˜¯äº‹åŠ¡å‹æ•°æ®åº“çš„é¦–é€‰å¼•æ“ï¼Œæ”¯æŒäº‹åŠ¡å®‰å…¨è¡¨ï¼ˆACIDï¼‰ï¼Œæ”¯æŒè¡Œé”å®šå’Œå¤–é”®ã€‚åœ¨MySQL 8 ç‰ˆæœ¬ä¸­ï¼ŒInnoDBåœ¨è‡ªå¢ã€ç´¢å¼•ã€åŠ å¯†ã€æ­»é”ã€å…±äº«é”ç­‰æ–¹é¢åšäº†å¤§é‡çš„æ”¹è¿›å’Œä¼˜åŒ–ï¼Œå¹¶ä¸”æ”¯æŒåŸå­æ•°æ®å®šä¹‰è¯­è¨€ï¼ˆDDLï¼‰ï¼Œæé«˜äº†æ•°æ®å®‰å…¨æ€§ï¼Œå¯¹äº‹åŠ¡æä¾›æ›´å¥½çš„æ”¯æŒã€‚\n6.æ•°æ®å­—å…¸åœ¨ä¹‹å‰çš„MySQLç‰ˆæœ¬ä¸­ï¼Œå­—å…¸æ•°æ®éƒ½å­˜å‚¨åœ¨å…ƒæ•°æ®æ–‡ä»¶å’Œéäº‹åŠ¡è¡¨ä¸­ã€‚ä»MySQL 8å¼€å§‹æ–°å¢äº†äº‹åŠ¡æ•°æ®å­—å…¸ï¼Œåœ¨è¿™ä¸ªå­—å…¸é‡Œå­˜å‚¨ç€æ•°æ®åº“å¯¹è±¡ä¿¡æ¯ï¼Œè¿™äº›æ•°æ®å­—å…¸å­˜å‚¨åœ¨å†…éƒ¨äº‹åŠ¡è¡¨ä¸­ã€‚\n7. åŸå­æ•°æ®å®šä¹‰è¯­å¥MySQL 8å¼€å§‹æ”¯æŒåŸå­æ•°æ®å®šä¹‰è¯­å¥ï¼ˆAutomic DDLï¼‰ï¼Œå³åŸå­DDLã€‚ç›®å‰ï¼Œåªæœ‰InnoDBå­˜å‚¨å¼•æ“æ”¯æŒåŸå­DDLã€‚åŸå­æ•°æ®å®šä¹‰è¯­å¥ï¼ˆDDLï¼‰å°†ä¸DDLæ“ä½œç›¸å…³çš„æ•°æ®å­—å…¸æ›´æ–°ã€å­˜å‚¨å¼•æ“æ“ä½œã€äºŒè¿›åˆ¶æ—¥å¿—å†™å…¥ç»“åˆåˆ°ä¸€ä¸ªå•ç‹¬çš„åŸå­äº‹åŠ¡ä¸­ï¼Œè¿™ä½¿å¾—å³ä½¿æœåŠ¡å™¨å´©æºƒï¼Œäº‹åŠ¡ä¹Ÿä¼šæäº¤æˆ–å›æ»šã€‚ä½¿ç”¨æ”¯æŒåŸå­æ“ä½œçš„å­˜å‚¨å¼•æ“æ‰€åˆ›å»ºçš„è¡¨ï¼Œåœ¨æ‰§è¡ŒDROP TABLEã€CREATE TABLEã€ALTER TABLEã€ RENAME TABLEã€TRUNCATE TABLEã€CREATE TABLESPACEã€DROP TABLESPACEç­‰æ“ä½œæ—¶ï¼Œéƒ½æ”¯æŒåŸå­æ“ä½œï¼Œå³äº‹åŠ¡è¦ä¹ˆå®Œå…¨æ“ä½œæˆåŠŸï¼Œè¦ä¹ˆå¤±è´¥åå›æ»šï¼Œä¸å†è¿›è¡Œéƒ¨åˆ†æäº¤ã€‚å¯¹äºä»MySQL 5.7å¤åˆ¶åˆ°MySQL 8 ç‰ˆæœ¬ä¸­çš„è¯­å¥ï¼Œå¯ä»¥æ·»åŠ IF EXISTSæˆ–IF NOT EXISTSè¯­å¥æ¥é¿å…å‘ç”Ÿé”™è¯¯ã€‚\n8.èµ„æºç®¡ç†MySQL 8å¼€å§‹æ”¯æŒåˆ›å»ºå’Œç®¡ç†èµ„æºç»„ï¼Œå…è®¸å°†æœåŠ¡å™¨å†…è¿è¡Œçš„çº¿ç¨‹åˆ†é…ç»™ç‰¹å®šçš„åˆ†ç»„ï¼Œä»¥ä¾¿çº¿ç¨‹æ ¹æ®ç»„å†…å¯ç”¨èµ„æºæ‰§è¡Œã€‚ç»„å±æ€§èƒ½å¤Ÿæ§åˆ¶ç»„å†…èµ„æºï¼Œå¯ç”¨æˆ–é™åˆ¶ç»„å†…èµ„æºæ¶ˆè€—ã€‚æ•°æ®åº“ç®¡ç†å‘˜èƒ½å¤Ÿæ ¹æ®ä¸åŒçš„å·¥ä½œè´Ÿè½½é€‚å½“åœ°æ›´æ”¹è¿™äº›å±æ€§ã€‚ç›®å‰ï¼ŒCPUæ—¶é—´æ˜¯å¯æ§èµ„æºï¼Œç”±â€œè™šæ‹ŸCPUâ€è¿™ä¸ªæ¦‚å¿µæ¥è¡¨ç¤ºï¼Œæ­¤æœ¯è¯­åŒ…å«CPUçš„æ ¸å¿ƒæ•°ï¼Œè¶…çº¿ç¨‹ï¼Œç¡¬ä»¶çº¿ç¨‹ç­‰ç­‰ã€‚æœåŠ¡å™¨åœ¨å¯åŠ¨æ—¶ç¡®å®šå¯ç”¨çš„è™šæ‹ŸCPUæ•°é‡ã€‚æ‹¥æœ‰å¯¹åº”æƒé™çš„æ•°æ®åº“ç®¡ç†å‘˜å¯ä»¥å°†è¿™äº›CPUä¸èµ„æºç»„å…³è”ï¼Œå¹¶ä¸ºèµ„æºç»„åˆ†é…çº¿ç¨‹ã€‚èµ„æºç»„ç»„ä»¶ä¸ºMySQLä¸­çš„èµ„æºç»„ç®¡ç†æä¾›äº†SQLæ¥å£ã€‚èµ„æºç»„çš„å±æ€§ç”¨äºå®šä¹‰èµ„æºç»„ã€‚MySQLä¸­å­˜åœ¨ä¸¤ä¸ªé»˜è®¤ç»„ï¼Œç³»ç»Ÿç»„å’Œç”¨æˆ·ç»„ï¼Œé»˜è®¤çš„ç»„ä¸èƒ½è¢«åˆ é™¤ï¼Œå…¶å±æ€§ä¹Ÿä¸èƒ½è¢«æ›´æ”¹ã€‚å¯¹äºç”¨æˆ·è‡ªå®šä¹‰çš„ç»„ï¼Œèµ„æºç»„åˆ›å»ºæ—¶å¯åˆå§‹åŒ–æ‰€æœ‰çš„å±æ€§ï¼Œé™¤å»åå­—å’Œç±»å‹ï¼Œå…¶ä»–å±æ€§éƒ½å¯åœ¨åˆ›å»ºä¹‹åè¿›è¡Œæ›´æ”¹ã€‚åœ¨ä¸€äº›å¹³å°ä¸‹ï¼Œæˆ–è¿›è¡Œäº†æŸäº›MySQLçš„é…ç½®æ—¶ï¼Œèµ„æºç®¡ç†çš„åŠŸèƒ½å°†å—åˆ°é™åˆ¶ï¼Œç”šè‡³ä¸å¯ç”¨ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå®‰è£…äº†çº¿ç¨‹æ± æ’ä»¶ï¼Œæˆ–è€…ä½¿ç”¨çš„æ˜¯macOSç³»ç»Ÿï¼Œèµ„æºç®¡ç†å°†å¤„äºä¸å¯ç”¨çŠ¶æ€ã€‚åœ¨FreeBSDå’ŒSolarisç³»ç»Ÿä¸­ï¼Œèµ„æºçº¿ç¨‹ä¼˜å…ˆçº§å°†å¤±æ•ˆã€‚åœ¨Linuxç³»ç»Ÿä¸­ï¼Œåªæœ‰é…ç½®äº†CAP_SYS_NICEå±æ€§ï¼Œèµ„æºç®¡ç†ä¼˜å…ˆçº§æ‰èƒ½å‘æŒ¥ä½œç”¨ã€‚\n9.å­—ç¬¦é›†æ”¯æŒMySQL 8ä¸­é»˜è®¤çš„å­—ç¬¦é›†ç”±latin1æ›´æ”¹ä¸ºutf8mb4ï¼Œå¹¶é¦–æ¬¡å¢åŠ äº†æ—¥è¯­æ‰€ç‰¹å®šä½¿ç”¨çš„é›†åˆï¼Œutf8mb4_ja_0900_as_csã€‚\n10.ä¼˜åŒ–å™¨å¢å¼ºMySQLä¼˜åŒ–å™¨å¼€å§‹æ”¯æŒéšè—ç´¢å¼•å’Œé™åºç´¢å¼•ã€‚éšè—ç´¢å¼•ä¸ä¼šè¢«ä¼˜åŒ–å™¨ä½¿ç”¨ï¼ŒéªŒè¯ç´¢å¼•çš„å¿…è¦æ€§æ—¶ä¸éœ€è¦åˆ é™¤ç´¢å¼•ï¼Œå…ˆå°†ç´¢å¼•éšè—ï¼Œå¦‚æœä¼˜åŒ–å™¨æ€§èƒ½æ— å½±å“å°±å¯ä»¥çœŸæ­£åœ°åˆ é™¤ç´¢å¼•ã€‚é™åºç´¢å¼•å…è®¸ä¼˜åŒ–å™¨å¯¹å¤šä¸ªåˆ—è¿›è¡Œæ’åºï¼Œå¹¶ä¸”å…è®¸æ’åºé¡ºåºä¸ä¸€è‡´ã€‚\n11.å…¬ç”¨è¡¨è¡¨è¾¾å¼å…¬ç”¨è¡¨è¡¨è¾¾å¼ï¼ˆCommon Table Expressionsï¼‰ç®€ç§°ä¸ºCTEï¼ŒMySQLç°åœ¨æ”¯æŒé€’å½’å’Œéé€’å½’ä¸¤ç§å½¢å¼çš„CTEã€‚CTEé€šè¿‡åœ¨SELECTè¯­å¥æˆ–å…¶ä»–ç‰¹å®šè¯­å¥å‰ä½¿ç”¨WITHè¯­å¥å¯¹ä¸´æ—¶ç»“æœé›†è¿›è¡Œå‘½åã€‚\nåŸºç¡€è¯­æ³•å¦‚ä¸‹ï¼š\nWITH cte_name (col_name1,col_name2 ...) AS (Subquery)\nSELECT * FROM cte_name;\nSubqueryä»£è¡¨å­æŸ¥è¯¢ï¼Œå­æŸ¥è¯¢å‰ä½¿ç”¨WITHè¯­å¥å°†ç»“æœé›†å‘½åä¸ºcte_nameï¼Œåœ¨åç»­çš„æŸ¥è¯¢ä¸­å³å¯ä½¿ç”¨cte_nameè¿›è¡ŒæŸ¥è¯¢ã€‚\n12.çª—å£å‡½æ•°MySQL 8å¼€å§‹æ”¯æŒçª—å£å‡½æ•°ã€‚åœ¨ä¹‹å‰çš„ç‰ˆæœ¬ä¸­å·²å­˜åœ¨çš„å¤§éƒ¨åˆ†èšåˆå‡½æ•°åœ¨MySQL 8ä¸­ä¹Ÿå¯ä»¥ä½œä¸ºçª—å£å‡½æ•°æ¥ä½¿ç”¨ã€‚\n\n13.æ­£åˆ™è¡¨è¾¾å¼æ”¯æŒMySQLåœ¨8.0.4ä»¥åçš„ç‰ˆæœ¬ä¸­é‡‡ç”¨æ”¯æŒUnicodeçš„å›½é™…åŒ–ç»„ä»¶åº“å®ç°æ­£åˆ™è¡¨è¾¾å¼æ“ä½œï¼Œè¿™ç§æ–¹å¼ä¸ä»…èƒ½æä¾›å®Œå…¨çš„Unicodeæ”¯æŒï¼Œè€Œä¸”æ˜¯å¤šå­—èŠ‚å®‰å…¨ç¼–ç ã€‚MySQLå¢åŠ äº†REGEXP_LIKE()ã€EGEXP_INSTR()ã€REGEXP_REPLACE()å’Œ REGEXP_SUBSTR()ç­‰å‡½æ•°æ¥æå‡æ€§èƒ½ã€‚å¦å¤–ï¼Œregexp_stack_limitå’Œregexp_time_limit ç³»ç»Ÿå˜é‡èƒ½å¤Ÿé€šè¿‡åŒ¹é…å¼•æ“æ¥æ§åˆ¶èµ„æºæ¶ˆè€—ã€‚\n14.å†…éƒ¨ä¸´æ—¶è¡¨TempTableå­˜å‚¨å¼•æ“å–ä»£MEMORYå­˜å‚¨å¼•æ“æˆä¸ºå†…éƒ¨ä¸´æ—¶è¡¨çš„é»˜è®¤å­˜å‚¨å¼•æ“ã€‚TempTableå­˜å‚¨å¼•æ“ä¸ºVARCHARå’ŒVARBINARYåˆ—æä¾›é«˜æ•ˆå­˜å‚¨ã€‚internal_tmp_mem_storage_engineä¼šè¯å˜é‡å®šä¹‰äº†å†…éƒ¨ä¸´æ—¶è¡¨çš„å­˜å‚¨å¼•æ“ï¼Œå¯é€‰çš„å€¼æœ‰ä¸¤ä¸ªï¼ŒTempTableå’ŒMEMORYï¼Œå…¶ä¸­TempTableä¸ºé»˜è®¤çš„å­˜å‚¨å¼•æ“ã€‚temptable_max_ramç³»ç»Ÿé…ç½®é¡¹å®šä¹‰äº†TempTableå­˜å‚¨å¼•æ“å¯ä½¿ç”¨çš„æœ€å¤§å†…å­˜æ•°é‡ã€‚\n15.æ—¥å¿—è®°å½•åœ¨MySQL 8ä¸­é”™è¯¯æ—¥å¿—å­ç³»ç»Ÿç”±ä¸€ç³»åˆ—MySQLç»„ä»¶æ„æˆã€‚è¿™äº›ç»„ä»¶çš„æ„æˆç”±ç³»ç»Ÿå˜é‡log_error_servicesæ¥é…ç½®ï¼Œèƒ½å¤Ÿå®ç°æ—¥å¿—äº‹ä»¶çš„è¿‡æ»¤å’Œå†™å…¥ã€‚\n16.å¤‡ä»½é”æ–°çš„å¤‡ä»½é”å…è®¸åœ¨çº¿å¤‡ä»½æœŸé—´æ‰§è¡Œæ•°æ®æ“ä½œè¯­å¥ï¼ŒåŒæ—¶é˜»æ­¢å¯èƒ½é€ æˆå¿«ç…§ä¸ä¸€è‡´çš„æ“ä½œã€‚æ–°å¤‡ä»½é”ç”± LOCK INSTANCE FOR BACKUP å’Œ UNLOCK INSTANCE è¯­æ³•æä¾›æ”¯æŒï¼Œæ‰§è¡Œè¿™äº›æ“ä½œéœ€è¦å¤‡ä»½ç®¡ç†å‘˜ç‰¹æƒã€‚\n17.å¢å¼ºçš„MySQLå¤åˆ¶MySQL 8å¤åˆ¶æ”¯æŒå¯¹JSONæ–‡æ¡£è¿›è¡Œéƒ¨åˆ†æ›´æ–°çš„äºŒè¿›åˆ¶æ—¥å¿—è®°å½•ï¼Œè¯¥è®°å½•ä½¿ç”¨ç´§å‡‘çš„äºŒè¿›åˆ¶æ ¼å¼ï¼Œä»è€ŒèŠ‚çœè®°å½•å®Œæ•´JSONæ–‡æ¡£çš„ç©ºé—´ã€‚å½“ä½¿ç”¨åŸºäºè¯­å¥çš„æ—¥å¿—è®°å½•æ—¶ï¼Œè¿™ç§ç´§å‡‘çš„æ—¥å¿—è®°å½•ä¼šè‡ªåŠ¨å®Œæˆï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡å°†æ–°çš„binlog_row_value_optionsç³»ç»Ÿå˜é‡å€¼è®¾ç½®ä¸ºPARTIAL_JSONæ¥å¯ç”¨ã€‚\n1.2 MySQL8.0ç§»é™¤çš„æ—§ç‰¹æ€§åœ¨MySQL 5.7ç‰ˆæœ¬ä¸Šå¼€å‘çš„åº”ç”¨ç¨‹åºå¦‚æœä½¿ç”¨äº†MySQL8.0 ç§»é™¤çš„ç‰¹æ€§ï¼Œè¯­å¥å¯èƒ½ä¼šå¤±è´¥ï¼Œæˆ–è€…äº§ç”Ÿä¸åŒçš„æ‰§è¡Œç»“æœã€‚ä¸ºäº†é¿å…è¿™äº›é—®é¢˜ï¼Œå¯¹äºä½¿ç”¨äº†ç§»é™¤ç‰¹æ€§çš„åº”ç”¨ï¼Œåº”å½“å°½åŠ›ä¿®æ­£é¿å…ä½¿ç”¨è¿™äº›ç‰¹æ€§ï¼Œå¹¶å°½å¯èƒ½ä½¿ç”¨æ›¿ä»£æ–¹æ³•ã€‚\n1. æŸ¥è¯¢ç¼“å­˜æŸ¥è¯¢ç¼“å­˜å·²è¢«ç§»é™¤ï¼Œåˆ é™¤çš„é¡¹æœ‰ï¼šï¼ˆ1ï¼‰è¯­å¥ï¼šFLUSH QUERY CACHEå’ŒRESET QUERY CACHEã€‚ï¼ˆ2ï¼‰ç³»ç»Ÿå˜é‡ï¼šquery_cache_limitã€query_cache_min_res_unitã€query_cache_sizeã€query_cache_typeã€query_cache_wlock_invalidateã€‚ï¼ˆ3ï¼‰çŠ¶æ€å˜é‡ï¼šQcache_free_blocksã€Qcache_free_memoryã€Qcache_hitsã€Qcache_insertsã€Qcache_lowmem_prunesã€Qcache_not_cachedã€Qcache_queries_in_cacheã€Qcache_total_blocksã€‚ï¼ˆ4ï¼‰çº¿ç¨‹çŠ¶æ€ï¼šchecking privileges on cached queryã€checking query cache for queryã€invalidating query cache entriesã€sending cached result to clientã€storing result in query cacheã€waiting for query cache lockã€‚\n2.åŠ å¯†ç›¸å…³åˆ é™¤çš„åŠ å¯†ç›¸å…³çš„å†…å®¹æœ‰ï¼šENCODE()ã€DECODE()ã€ENCRYPT()ã€DES_ENCRYPT()å’ŒDES_DECRYPT()å‡½æ•°ï¼Œé…ç½®é¡¹des-key-fileï¼Œç³»ç»Ÿå˜é‡have_cryptï¼ŒFLUSHè¯­å¥çš„DES_KEY_FILEé€‰é¡¹ï¼ŒHAVE_CRYPT CMakeé€‰é¡¹ã€‚å¯¹äºç§»é™¤çš„ENCRYPT()å‡½æ•°ï¼Œè€ƒè™‘ä½¿ç”¨SHA2()æ›¿ä»£ï¼Œå¯¹äºå…¶ä»–ç§»é™¤çš„å‡½æ•°ï¼Œä½¿ç”¨AES_ENCRYPT()å’ŒAES_DECRYPT()æ›¿ä»£ã€‚\n3.ç©ºé—´å‡½æ•°ç›¸å…³åœ¨MySQL 5.7ç‰ˆæœ¬ä¸­ï¼Œå¤šä¸ªç©ºé—´å‡½æ•°å·²è¢«æ ‡è®°ä¸ºè¿‡æ—¶ã€‚è¿™äº›è¿‡æ—¶å‡½æ•°åœ¨MySQL 8ä¸­éƒ½å·²è¢«ç§»é™¤ï¼Œåªä¿ç•™äº†å¯¹åº”çš„ST_å’ŒMBRå‡½æ•°ã€‚\n4.\\Nå’ŒNULLåœ¨SQLè¯­å¥ä¸­ï¼Œè§£æå™¨ä¸å†å°†\\Nè§†ä¸ºNULLï¼Œæ‰€ä»¥åœ¨SQLè¯­å¥ä¸­åº”ä½¿ç”¨NULLä»£æ›¿\\Nã€‚è¿™é¡¹å˜åŒ–ä¸ä¼šå½±å“ä½¿ç”¨LOAD DATA INFILEæˆ–è€…SELECTâ€¦INTO OUTFILEæ“ä½œæ–‡ä»¶çš„å¯¼å…¥å’Œå¯¼å‡ºã€‚åœ¨è¿™ç±»æ“ä½œä¸­ï¼ŒNULLä»ç­‰åŒäº\\Nã€‚\n5. mysql_install_dbåœ¨MySQLåˆ†å¸ƒä¸­ï¼Œå·²ç§»é™¤äº†mysql_install_dbç¨‹åºï¼Œæ•°æ®å­—å…¸åˆå§‹åŒ–éœ€è¦è°ƒç”¨å¸¦ç€â€”initializeæˆ–è€…â€”initialize-insecureé€‰é¡¹çš„mysqldæ¥ä»£æ›¿å®ç°ã€‚å¦å¤–ï¼Œâ€”bootstrapå’ŒINSTALL_SCRIPTDIR CMakeä¹Ÿå·²è¢«åˆ é™¤ã€‚\n6.é€šç”¨åˆ†åŒºå¤„ç†ç¨‹åºé€šç”¨åˆ†åŒºå¤„ç†ç¨‹åºå·²ä»MySQLæœåŠ¡ä¸­è¢«ç§»é™¤ã€‚ä¸ºäº†å®ç°ç»™å®šè¡¨åˆ†åŒºï¼Œè¡¨æ‰€ä½¿ç”¨çš„å­˜å‚¨å¼•æ“éœ€è¦è‡ªæœ‰çš„åˆ†åŒºå¤„ç†ç¨‹åºã€‚æä¾›æœ¬åœ°åˆ†åŒºæ”¯æŒçš„MySQLå­˜å‚¨å¼•æ“æœ‰ä¸¤ä¸ªï¼Œå³InnoDBå’ŒNDBï¼Œè€Œåœ¨MySQL 8ä¸­åªæ”¯æŒInnoDBã€‚\n7.ç³»ç»Ÿå’ŒçŠ¶æ€å˜é‡ä¿¡æ¯åœ¨INFORMATION_SCHEMAæ•°æ®åº“ä¸­ï¼Œå¯¹ç³»ç»Ÿå’ŒçŠ¶æ€å˜é‡ä¿¡æ¯ä¸å†è¿›è¡Œç»´æŠ¤ã€‚GLOBAL_VARIABLESã€SESSION_VARIABLESã€GLOBAL_STATUSã€SESSION_STATUSè¡¨éƒ½å·²è¢«åˆ é™¤ã€‚å¦å¤–ï¼Œç³»ç»Ÿå˜é‡show_compatibility_56ä¹Ÿå·²è¢«åˆ é™¤ã€‚è¢«åˆ é™¤çš„çŠ¶æ€å˜é‡æœ‰Slave_heartbeat_periodã€Slave_last_heartbeat,Slave_received_heartbeatsã€Slave_retried_transactionsã€Slave_runningã€‚ä»¥ä¸Šè¢«åˆ é™¤çš„å†…å®¹éƒ½å¯ä½¿ç”¨æ€§èƒ½æ¨¡å¼ä¸­å¯¹åº”çš„å†…å®¹è¿›è¡Œæ›¿ä»£ã€‚\n8.mysql_pluginå·¥å…·mysql_pluginå·¥å…·ç”¨æ¥é…ç½®MySQLæœåŠ¡å™¨æ’ä»¶ï¼Œç°å·²è¢«åˆ é™¤ï¼Œå¯ä½¿ç”¨â€”plugin-loadæˆ–â€”plugin-load-addé€‰é¡¹åœ¨æœåŠ¡å™¨å¯åŠ¨æ—¶åŠ è½½æ’ä»¶æˆ–è€…åœ¨è¿è¡Œæ—¶ä½¿ç”¨INSTALL PLUGINè¯­å¥åŠ è½½æ’ä»¶æ¥æ›¿ä»£è¯¥å·¥å…·ã€‚\n2. æ–°ç‰¹æ€§1ï¼šçª—å£å‡½æ•°2.1 ä½¿ç”¨çª—å£å‡½æ•°å‰åå¯¹æ¯”å‡è®¾æˆ‘ç°åœ¨æœ‰è¿™æ ·ä¸€ä¸ªæ•°æ®è¡¨ï¼Œå®ƒæ˜¾ç¤ºäº†æŸè´­ç‰©ç½‘ç«™åœ¨æ¯ä¸ªåŸå¸‚æ¯ä¸ªåŒºçš„é”€å”®é¢ï¼š\nCREATE TABLE sales(\nid INT PRIMARY KEY AUTO_INCREMENT,\ncity VARCHAR(15),\ncounty VARCHAR(15),\nsales_value DECIMAL\n\n);\n\nINSERT INTO sales(city,county,sales_value)\nVALUES\n('åŒ—äº¬','æµ·æ·€',10.00),\n('åŒ—äº¬','æœé˜³',20.00),\n('ä¸Šæµ·','é»„åŸ”',30.00),\n('ä¸Šæµ·','é•¿å®',10.00);\næŸ¥è¯¢ï¼š\nmysql&gt; SELECT * FROM sales;\n+----+------+--------+-------------+\n| id | city | county | sales_value |\n+----+------+--------+-------------+\n|  1 | åŒ—äº¬ | æµ·æ·€    |          10 |\n|  2 | åŒ—äº¬ | æœé˜³    |          20 |\n|  3 | ä¸Šæµ· | é»„åŸ”    |          30 |\n|  4 | ä¸Šæµ· | é•¿å®    |          10 |\n+----+------+--------+-------------+\n4 rows in set (0.00 sec)\néœ€æ±‚ï¼šç°åœ¨è®¡ç®—è¿™ä¸ªç½‘ç«™åœ¨æ¯ä¸ªåŸå¸‚çš„é”€å”®æ€»é¢ã€åœ¨å…¨å›½çš„é”€å”®æ€»é¢ã€æ¯ä¸ªåŒºçš„é”€å”®é¢å æ‰€åœ¨åŸå¸‚é”€å”®é¢ä¸­çš„æ¯”ç‡ï¼Œä»¥åŠå æ€»é”€å”®é¢ä¸­çš„æ¯”ç‡ã€‚\nå¦‚æœç”¨åˆ†ç»„å’Œèšåˆå‡½æ•°ï¼Œå°±éœ€è¦åˆ†å¥½å‡ æ­¥æ¥è®¡ç®—ã€‚\nç¬¬ä¸€æ­¥ï¼Œè®¡ç®—æ€»é”€å”®é‡‘é¢ï¼Œå¹¶å­˜å…¥ä¸´æ—¶è¡¨ aï¼š\nCREATE TEMPORARY TABLE a       -- åˆ›å»ºä¸´æ—¶è¡¨\nSELECT SUM(sales_value) AS sales_value -- è®¡ç®—æ€»è®¡é‡‘é¢\nFROM sales;\næŸ¥çœ‹ä¸€ä¸‹ä¸´æ—¶è¡¨ a ï¼š\nmysql&gt; SELECT * FROM a;\n+-------------+\n| sales_value |\n+-------------+\n|          70 |\n+-------------+\n1 row in set (0.00 sec)\nç¬¬äºŒæ­¥ï¼Œè®¡ç®—æ¯ä¸ªåŸå¸‚çš„é”€å”®æ€»é¢å¹¶å­˜å…¥ä¸´æ—¶è¡¨ bï¼š\nCREATE TEMPORARY TABLE b    -- åˆ›å»ºä¸´æ—¶è¡¨\nSELECT city,SUM(sales_value) AS sales_value  -- è®¡ç®—åŸå¸‚é”€å”®åˆè®¡\nFROM sales\nGROUP BY city;\næŸ¥çœ‹ä¸´æ—¶è¡¨ b ï¼š\nmysql&gt; SELECT * FROM b;\n+------+-------------+\n| city | sales_value |\n+------+-------------+\n| åŒ—äº¬ |          30 |\n| ä¸Šæµ· |          40 |\n+------+-------------+\n2 rows in set (0.00 sec)\nç¬¬ä¸‰æ­¥ï¼Œè®¡ç®—å„åŒºçš„é”€å”®å æ‰€åœ¨åŸå¸‚çš„æ€»è®¡é‡‘é¢çš„æ¯”ä¾‹ï¼Œå’Œå å…¨éƒ¨é”€å”®æ€»è®¡é‡‘é¢çš„æ¯”ä¾‹ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„è¿æ¥æŸ¥è¯¢è·å¾—éœ€è¦çš„ç»“æœï¼š\nmysql&gt; SELECT s.city AS åŸå¸‚,s.county AS åŒº,s.sales_value AS åŒºé”€å”®é¢,\n    -&gt; b.sales_value AS å¸‚é”€å”®é¢,s.sales_value/b.sales_value AS å¸‚æ¯”ç‡,\n    -&gt; a.sales_value AS æ€»é”€å”®é¢,s.sales_value/a.sales_value AS æ€»æ¯”ç‡\n    -&gt; FROM sales s\n    -&gt; JOIN b ON (s.city=b.city) -- è¿æ¥å¸‚ç»Ÿè®¡ç»“æœä¸´æ—¶è¡¨\n    -&gt; JOIN a                   -- è¿æ¥æ€»è®¡é‡‘é¢ä¸´æ—¶è¡¨\n    -&gt; ORDER BY s.city,s.county;\n+------+------+----------+----------+--------+----------+--------+\n| åŸå¸‚  | åŒº   | åŒºé”€å”®é¢  | å¸‚é”€å”®é¢   | å¸‚æ¯”ç‡  | æ€»é”€å”®é¢  | æ€»æ¯”ç‡  |\n+------+------+----------+----------+--------+----------+--------+\n| ä¸Šæµ·  | é•¿å® |       10 |       40 | 0.2500 |       70 | 0.1429 |\n| ä¸Šæµ·  | é»„åŸ” |       30 |       40 | 0.7500 |       70 | 0.4286 |\n| åŒ—äº¬  | æœé˜³ |       20 |       30 | 0.6667 |       70 | 0.2857 |\n| åŒ—äº¬  | æµ·æ·€ |       10 |       30 | 0.3333 |       70 | 0.1429 |\n+------+------+----------+----------+--------+----------+--------+\n4 rows in set (0.00 sec)\nç»“æœæ˜¾ç¤ºï¼šå¸‚é”€å”®é‡‘é¢ã€å¸‚é”€å”®å æ¯”ã€æ€»é”€å”®é‡‘é¢ã€æ€»é”€å”®å æ¯”éƒ½è®¡ç®—å‡ºæ¥äº†ã€‚\nåŒæ ·çš„æŸ¥è¯¢ï¼Œå¦‚æœç”¨çª—å£å‡½æ•°ï¼Œå°±ç®€å•å¤šäº†ã€‚æˆ‘ä»¬å¯ä»¥ç”¨ä¸‹é¢çš„ä»£ç æ¥å®ç°ï¼š\nmysql&gt; SELECT city AS åŸå¸‚,county AS åŒº,sales_value AS åŒºé”€å”®é¢,\n    -&gt; SUM(sales_value) OVER(PARTITION BY city) AS å¸‚é”€å”®é¢,  -- è®¡ç®—å¸‚é”€å”®é¢\n    -&gt; sales_value/SUM(sales_value) OVER(PARTITION BY city) AS å¸‚æ¯”ç‡,\n    -&gt; SUM(sales_value) OVER() AS æ€»é”€å”®é¢,   -- è®¡ç®—æ€»é”€å”®é¢\n    -&gt; sales_value/SUM(sales_value) OVER() AS æ€»æ¯”ç‡\n    -&gt; FROM sales\n    -&gt; ORDER BY city,county;\n+------+------+----------+----------+--------+----------+--------+\n| åŸå¸‚  | åŒº   | åŒºé”€å”®é¢  | å¸‚é”€å”®é¢   | å¸‚æ¯”ç‡  | æ€»é”€å”®é¢  | æ€»æ¯”ç‡  |\n+------+------+----------+----------+--------+----------+--------+\n| ä¸Šæµ·  | é•¿å® |       10 |       40  | 0.2500 |       70 | 0.1429 |\n| ä¸Šæµ·  | é»„åŸ” |       30 |       40  | 0.7500 |       70 | 0.4286 |\n| åŒ—äº¬  | æœé˜³ |       20 |       30  | 0.6667 |       70 | 0.2857 |\n| åŒ—äº¬  | æµ·æ·€ |       10 |       30  | 0.3333 |       70 | 0.1429 |\n+------+------+----------+-----------+--------+----------+--------+\n4 rows in set (0.00 sec)\nç»“æœæ˜¾ç¤ºï¼Œæˆ‘ä»¬å¾—åˆ°äº†ä¸ä¸Šé¢é‚£ç§æŸ¥è¯¢åŒæ ·çš„ç»“æœã€‚\nä½¿ç”¨çª—å£å‡½æ•°ï¼Œåªç”¨äº†ä¸€æ­¥å°±å®Œæˆäº†æŸ¥è¯¢ã€‚è€Œä¸”ï¼Œç”±äºæ²¡æœ‰ç”¨åˆ°ä¸´æ—¶è¡¨ï¼Œæ‰§è¡Œçš„æ•ˆç‡ä¹Ÿæ›´é«˜äº†ã€‚å¾ˆæ˜¾ç„¶ï¼Œåœ¨è¿™ç§éœ€è¦ç”¨åˆ°åˆ†ç»„ç»Ÿè®¡çš„ç»“æœå¯¹æ¯ä¸€æ¡è®°å½•è¿›è¡Œè®¡ç®—çš„åœºæ™¯ä¸‹ï¼Œä½¿ç”¨çª—å£å‡½æ•°æ›´å¥½ã€‚\n2.2 çª—å£å‡½æ•°åˆ†ç±»MySQLä»8.0ç‰ˆæœ¬å¼€å§‹æ”¯æŒçª—å£å‡½æ•°ã€‚çª—å£å‡½æ•°çš„ä½œç”¨ç±»ä¼¼äºåœ¨æŸ¥è¯¢ä¸­å¯¹æ•°æ®è¿›è¡Œåˆ†ç»„ï¼Œä¸åŒçš„æ˜¯ï¼Œåˆ†ç»„æ“ä½œä¼šæŠŠåˆ†ç»„çš„ç»“æœèšåˆæˆä¸€æ¡è®°å½•ï¼Œè€Œçª—å£å‡½æ•°æ˜¯å°†ç»“æœç½®äºæ¯ä¸€æ¡æ•°æ®è®°å½•ä¸­ã€‚\nçª—å£å‡½æ•°å¯ä»¥åˆ†ä¸ºé™æ€çª—å£å‡½æ•°å’ŒåŠ¨æ€çª—å£å‡½æ•°ã€‚\n\né™æ€çª—å£å‡½æ•°çš„çª—å£å¤§å°æ˜¯å›ºå®šçš„ï¼Œä¸ä¼šå› ä¸ºè®°å½•çš„ä¸åŒè€Œä¸åŒï¼›\nåŠ¨æ€çª—å£å‡½æ•°çš„çª—å£å¤§å°ä¼šéšç€è®°å½•çš„ä¸åŒè€Œå˜åŒ–ã€‚\n\nMySQLå®˜æ–¹ç½‘ç«™çª—å£å‡½æ•°çš„ç½‘å€ä¸ºhttps://dev.mysql.com/doc/refman/8.0/en/window-function-descriptions.html#function_row-numberã€‚\nçª—å£å‡½æ•°æ€»ä½“ä¸Šå¯ä»¥åˆ†ä¸ºåºå·å‡½æ•°ã€åˆ†å¸ƒå‡½æ•°ã€å‰åå‡½æ•°ã€é¦–å°¾å‡½æ•°å’Œå…¶ä»–å‡½æ•°ï¼Œå¦‚ä¸‹è¡¨ï¼š\n\n2.3 è¯­æ³•ç»“æ„çª—å£å‡½æ•°çš„è¯­æ³•ç»“æ„æ˜¯ï¼š\nå‡½æ•° OVERï¼ˆ[PARTITION BY å­—æ®µå ORDER BY å­—æ®µå ASC|DESC]ï¼‰\næˆ–è€…æ˜¯ï¼š\nå‡½æ•° OVER çª—å£å â€¦ WINDOW çª—å£å AS ï¼ˆ[PARTITION BY å­—æ®µå ORDER BY å­—æ®µå ASC|DESC]ï¼‰\n\nOVER å…³é”®å­—æŒ‡å®šå‡½æ•°çª—å£çš„èŒƒå›´ã€‚\nå¦‚æœçœç•¥åé¢æ‹¬å·ä¸­çš„å†…å®¹ï¼Œåˆ™çª—å£ä¼šåŒ…å«æ»¡è¶³WHEREæ¡ä»¶çš„æ‰€æœ‰è®°å½•ï¼Œçª—å£å‡½æ•°ä¼šåŸºäºæ‰€æœ‰æ»¡è¶³WHEREæ¡ä»¶çš„è®°å½•è¿›è¡Œè®¡ç®—ã€‚\nå¦‚æœOVERå…³é”®å­—åé¢çš„æ‹¬å·ä¸ä¸ºç©ºï¼Œåˆ™å¯ä»¥ä½¿ç”¨å¦‚ä¸‹è¯­æ³•è®¾ç½®çª—å£ã€‚\n\n\nçª—å£åï¼šä¸ºçª—å£è®¾ç½®ä¸€ä¸ªåˆ«åï¼Œç”¨æ¥æ ‡è¯†çª—å£ã€‚\nPARTITION BYå­å¥ï¼šæŒ‡å®šçª—å£å‡½æ•°æŒ‰ç…§å“ªäº›å­—æ®µè¿›è¡Œåˆ†ç»„ã€‚åˆ†ç»„åï¼Œçª—å£å‡½æ•°å¯ä»¥åœ¨æ¯ä¸ªåˆ†ç»„ä¸­åˆ†åˆ«æ‰§è¡Œã€‚\nORDER BYå­å¥ï¼šæŒ‡å®šçª—å£å‡½æ•°æŒ‰ç…§å“ªäº›å­—æ®µè¿›è¡Œæ’åºã€‚æ‰§è¡Œæ’åºæ“ä½œä½¿çª—å£å‡½æ•°æŒ‰ç…§æ’åºåçš„æ•°æ®è®°å½•çš„é¡ºåºè¿›è¡Œç¼–å·ã€‚\nFRAMEå­å¥ï¼šä¸ºåˆ†åŒºä¸­çš„æŸä¸ªå­é›†å®šä¹‰è§„åˆ™ï¼Œå¯ä»¥ç”¨æ¥ä½œä¸ºæ»‘åŠ¨çª—å£ä½¿ç”¨ã€‚\n\n2.4 åˆ†ç±»è®²è§£åˆ›å»ºè¡¨ï¼š\nCREATE TABLE goods(\nid INT PRIMARY KEY AUTO_INCREMENT,\ncategory_id INT,\ncategory VARCHAR(15),\nNAME VARCHAR(30),\nprice DECIMAL(10,2),\nstock INT,\nupper_time DATETIME\n\n);\næ·»åŠ æ•°æ®ï¼š\nINSERT INTO goods(category_id,category,NAME,price,stock,upper_time)\nVALUES\n(1, 'å¥³è£…/å¥³å£«ç²¾å“', 'Tæ¤', 39.90, 1000, '2020-11-10 00:00:00'),\n(1, 'å¥³è£…/å¥³å£«ç²¾å“', 'è¿è¡£è£™', 79.90, 2500, '2020-11-10 00:00:00'),\n(1, 'å¥³è£…/å¥³å£«ç²¾å“', 'å«è¡£', 89.90, 1500, '2020-11-10 00:00:00'),\n(1, 'å¥³è£…/å¥³å£«ç²¾å“', 'ç‰›ä»”è£¤', 89.90, 3500, '2020-11-10 00:00:00'),\n(1, 'å¥³è£…/å¥³å£«ç²¾å“', 'ç™¾è¤¶è£™', 29.90, 500, '2020-11-10 00:00:00'),\n(1, 'å¥³è£…/å¥³å£«ç²¾å“', 'å‘¢ç»’å¤–å¥—', 399.90, 1200, '2020-11-10 00:00:00'),\n(2, 'æˆ·å¤–è¿åŠ¨', 'è‡ªè¡Œè½¦', 399.90, 1000, '2020-11-10 00:00:00'),\n(2, 'æˆ·å¤–è¿åŠ¨', 'å±±åœ°è‡ªè¡Œè½¦', 1399.90, 2500, '2020-11-10 00:00:00'),\n(2, 'æˆ·å¤–è¿åŠ¨', 'ç™»å±±æ–', 59.90, 1500, '2020-11-10 00:00:00'),\n(2, 'æˆ·å¤–è¿åŠ¨', 'éª‘è¡Œè£…å¤‡', 399.90, 3500, '2020-11-10 00:00:00'),\n(2, 'æˆ·å¤–è¿åŠ¨', 'è¿åŠ¨å¤–å¥—', 799.90, 500, '2020-11-10 00:00:00'),\n(2, 'æˆ·å¤–è¿åŠ¨', 'æ»‘æ¿', 499.90, 1200, '2020-11-10 00:00:00');\nä¸‹é¢é’ˆå¯¹goodsè¡¨ä¸­çš„æ•°æ®æ¥éªŒè¯æ¯ä¸ªçª—å£å‡½æ•°çš„åŠŸèƒ½ã€‚\n1. åºå·å‡½æ•°1ï¼ROW_NUMBER()å‡½æ•°\nROW_NUMBER()å‡½æ•°èƒ½å¤Ÿå¯¹æ•°æ®ä¸­çš„åºå·è¿›è¡Œé¡ºåºæ˜¾ç¤ºã€‚\nä¸¾ä¾‹ï¼šæŸ¥è¯¢ goods æ•°æ®è¡¨ä¸­æ¯ä¸ªå•†å“åˆ†ç±»ä¸‹ä»·æ ¼é™åºæ’åˆ—çš„å„ä¸ªå•†å“ä¿¡æ¯ã€‚\nmysql&gt; SELECT ROW_NUMBER() OVER(PARTITION BY category_id ORDER BY price DESC) AS row_num,\n    -&gt; id, category_id, category, NAME, price, stock\n    -&gt; FROM goods;\n+---------+----+-------------+---------------+------------+---------+-------+\n| row_num | id | category_id | category      | NAME       | price   | stock |\n+---------+----+-------------+---------------+------------+---------+-------+\n|       1 |  6 |           1 | å¥³è£…/å¥³å£«ç²¾å“   | å‘¢ç»’å¤–å¥—    |  399.90 |  1200 |\n|       2 |  3 |           1 | å¥³è£…/å¥³å£«ç²¾å“   | å«è¡£        |   89.90 |  1500 |\n|       3 |  4 |           1 | å¥³è£…/å¥³å£«ç²¾å“   | ç‰›ä»”è£¤      |   89.90 |  3500 |\n|       4 |  2 |           1 | å¥³è£…/å¥³å£«ç²¾å“   | è¿è¡£è£™      |   79.90 |  2500 |\n|       5 |  1 |           1 | å¥³è£…/å¥³å£«ç²¾å“   | Tæ¤        |   39.90 |  1000 |\n|       6 |  5 |           1 | å¥³è£…/å¥³å£«ç²¾å“   | ç™¾è¤¶è£™      |   29.90 |   500 |\n|       1 |  8 |           2 | æˆ·å¤–è¿åŠ¨       | å±±åœ°è‡ªè¡Œè½¦   | 1399.90 |  2500 |\n|       2 | 11 |           2 | æˆ·å¤–è¿åŠ¨       | è¿åŠ¨å¤–å¥—     |  799.90 |   500 |\n|       3 | 12 |           2 | æˆ·å¤–è¿åŠ¨       | æ»‘æ¿        |  499.90 |  1200 |\n|       4 |  7 |           2 | æˆ·å¤–è¿åŠ¨       | è‡ªè¡Œè½¦      |  399.90 |  1000 |\n|       5 | 10 |           2 | æˆ·å¤–è¿åŠ¨       | éª‘è¡Œè£…å¤‡    |  399.90 |  3500 |\n|       6 |  9 |           2 | æˆ·å¤–è¿åŠ¨       | ç™»å±±æ–      |   59.90 |  1500 |\n+---------+----+-------------+---------------+------------+---------+-------+\n12 rows in set (0.00 sec)\nä¸¾ä¾‹ï¼šæŸ¥è¯¢ goods æ•°æ®è¡¨ä¸­æ¯ä¸ªå•†å“åˆ†ç±»ä¸‹ä»·æ ¼æœ€é«˜çš„3ç§å•†å“ä¿¡æ¯ã€‚\nmysql&gt; SELECT *\n    -&gt; FROM (\n    -&gt;  SELECT ROW_NUMBER() OVER(PARTITION BY category_id ORDER BY price DESC) AS row_num,\n    -&gt;  id, category_id, category, NAME, price, stock\n    -&gt;  FROM goods) t\n    -&gt; WHERE row_num &lt;= 3;\n+---------+----+-------------+---------------+------------+---------+-------+\n| row_num | id | category_id | category      | NAME       | price   | stock |\n+---------+----+-------------+---------------+------------+---------+-------+\n|       1 |  6 |           1 | å¥³è£…/å¥³å£«ç²¾å“   | å‘¢ç»’å¤–å¥—    |  399.90  |  1200 |\n|       2 |  3 |           1 | å¥³è£…/å¥³å£«ç²¾å“   | å«è¡£        |   89.90 |  1500 |\n|       3 |  4 |           1 | å¥³è£…/å¥³å£«ç²¾å“   | ç‰›ä»”è£¤      |   89.90  |  3500 |\n|       1 |  8 |           2 | æˆ·å¤–è¿åŠ¨       | å±±åœ°è‡ªè¡Œè½¦   | 1399.90  |  2500 |\n|       2 | 11 |           2 | æˆ·å¤–è¿åŠ¨       | è¿åŠ¨å¤–å¥—     |  799.90  |   500 |\n|       3 | 12 |           2 | æˆ·å¤–è¿åŠ¨       | æ»‘æ¿        |  499.90  |  1200 |\n+---------+----+-------------+---------------+------------+----------+-------+\n6 rows in set (0.00 sec)\nåœ¨åç§°ä¸ºâ€œå¥³è£…/å¥³å£«ç²¾å“â€çš„å•†å“ç±»åˆ«ä¸­ï¼Œæœ‰ä¸¤æ¬¾å•†å“çš„ä»·æ ¼ä¸º89.90å…ƒï¼Œåˆ†åˆ«æ˜¯å«è¡£å’Œç‰›ä»”è£¤ã€‚ä¸¤æ¬¾å•†å“çš„åºå·éƒ½åº”è¯¥ä¸º2ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªä¸º2ï¼Œå¦ä¸€ä¸ªä¸º3ã€‚æ­¤æ—¶ï¼Œå¯ä»¥ä½¿ç”¨RANK()å‡½æ•°å’ŒDENSE_RANK()å‡½æ•°è§£å†³ã€‚\n2ï¼RANK()å‡½æ•°\nä½¿ç”¨RANK()å‡½æ•°èƒ½å¤Ÿå¯¹åºå·è¿›è¡Œå¹¶åˆ—æ’åºï¼Œå¹¶ä¸”ä¼šè·³è¿‡é‡å¤çš„åºå·ï¼Œæ¯”å¦‚åºå·ä¸º1ã€1ã€3ã€‚\nä¸¾ä¾‹ï¼šä½¿ç”¨RANK()å‡½æ•°è·å– goods æ•°æ®è¡¨ä¸­å„ç±»åˆ«çš„ä»·æ ¼ä»é«˜åˆ°ä½æ’åºçš„å„å•†å“ä¿¡æ¯ã€‚\nmysql&gt; SELECT RANK() OVER(PARTITION BY category_id ORDER BY price DESC) AS row_num,\n    -&gt; id, category_id, category, NAME, price, stock\n    -&gt; FROM goods;\n+---------+----+-------------+---------------+------------+---------+-------+\n| row_num | id | category_id | category      | NAME       | price   | stock |\n+---------+----+-------------+---------------+------------+---------+-------+\n|       1 |  6 |           1 | å¥³è£…/å¥³å£«ç²¾å“   | å‘¢ç»’å¤–å¥—    |  399.90 |  1200 |\n|       2 |  3 |           1 | å¥³è£…/å¥³å£«ç²¾å“   | å«è¡£        |   89.90 |  1500 |\n|       2 |  4 |           1 | å¥³è£…/å¥³å£«ç²¾å“   | ç‰›ä»”è£¤      |   89.90 |  3500 |\n|       4 |  2 |           1 | å¥³è£…/å¥³å£«ç²¾å“   | è¿è¡£è£™      |   79.90 |  2500 |\n|       5 |  1 |           1 | å¥³è£…/å¥³å£«ç²¾å“   | Tæ¤         |   39.90 |  1000 |\n|       6 |  5 |           1 | å¥³è£…/å¥³å£«ç²¾å“   | ç™¾è¤¶è£™      |   29.90 |   500 |\n|       1 |  8 |           2 | æˆ·å¤–è¿åŠ¨       | å±±åœ°è‡ªè¡Œè½¦   | 1399.90 |  2500 |\n|       2 | 11 |           2 | æˆ·å¤–è¿åŠ¨       | è¿åŠ¨å¤–å¥—     |  799.90 |   500 |\n|       3 | 12 |           2 | æˆ·å¤–è¿åŠ¨       | æ»‘æ¿        |  499.90 |  1200 |\n|       4 |  7 |           2 | æˆ·å¤–è¿åŠ¨       | è‡ªè¡Œè½¦      |  399.90 |  1000 |\n|       4 | 10 |           2 | æˆ·å¤–è¿åŠ¨       | éª‘è¡Œè£…å¤‡    |  399.90 |  3500 |\n|       6 |  9 |           2 | æˆ·å¤–è¿åŠ¨       | ç™»å±±æ–      |   59.90 |  1500 |\n+---------+----+-------------+---------------+------------+---------+-------+\n12 rows in set (0.00 sec)\nä¸¾ä¾‹ï¼šä½¿ç”¨RANK()å‡½æ•°è·å– goods æ•°æ®è¡¨ä¸­ç±»åˆ«ä¸ºâ€œå¥³è£…/å¥³å£«ç²¾å“â€çš„ä»·æ ¼æœ€é«˜çš„4æ¬¾å•†å“ä¿¡æ¯ã€‚\nmysql&gt; SELECT *\n    -&gt; FROM(\n    -&gt;  SELECT RANK() OVER(PARTITION BY category_id ORDER BY price DESC) AS row_num,\n    -&gt;  id, category_id, category, NAME, price, stock\n    -&gt;  FROM goods) t\n    -&gt; WHERE category_id = 1 AND row_num &lt;= 4;\n+---------+----+-------------+---------------+----------+--------+-------+\n| row_num | id | category_id | category      | NAME     | price  | stock |\n+---------+----+-------------+---------------+----------+--------+-------+\n|       1 |  6 |           1 | å¥³è£…/å¥³å£«ç²¾å“   | å‘¢ç»’å¤–å¥—  | 399.90 |  1200 |\n|       2 |  3 |           1 | å¥³è£…/å¥³å£«ç²¾å“   | å«è¡£      |  89.90 |  1500 |\n|       2 |  4 |           1 | å¥³è£…/å¥³å£«ç²¾å“   | ç‰›ä»”è£¤    |  89.90 |  3500 |\n|       4 |  2 |           1 | å¥³è£…/å¥³å£«ç²¾å“   | è¿è¡£è£™    |  79.90 |  2500 |\n+---------+----+-------------+---------------+----------+--------+-------+\n4 rows in set (0.00 sec)\nå¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨RANK()å‡½æ•°å¾—å‡ºçš„åºå·ä¸º1ã€2ã€2ã€4ï¼Œç›¸åŒä»·æ ¼çš„å•†å“åºå·ç›¸åŒï¼Œåé¢çš„å•†å“åºå·æ˜¯ä¸è¿ç»­çš„ï¼Œè·³è¿‡äº†é‡å¤çš„åºå·ã€‚\n3ï¼DENSE_RANK()å‡½æ•°\nDENSE_RANK()å‡½æ•°å¯¹åºå·è¿›è¡Œå¹¶åˆ—æ’åºï¼Œå¹¶ä¸”ä¸ä¼šè·³è¿‡é‡å¤çš„åºå·ï¼Œæ¯”å¦‚åºå·ä¸º1ã€1ã€2ã€‚\nä¸¾ä¾‹ï¼šä½¿ç”¨DENSE_RANK()å‡½æ•°è·å– goods æ•°æ®è¡¨ä¸­å„ç±»åˆ«çš„ä»·æ ¼ä»é«˜åˆ°ä½æ’åºçš„å„å•†å“ä¿¡æ¯ã€‚\nmysql&gt; SELECT DENSE_RANK() OVER(PARTITION BY category_id ORDER BY price DESC) AS row_num,\n    -&gt; id, category_id, category, NAME, price, stock\n    -&gt; FROM goods;\n+---------+----+-------------+---------------+------------+---------+-------+\n| row_num | id | category_id | category      | NAME       | price   | stock |\n+---------+----+-------------+---------------+------------+---------+-------+\n|       1 |  6 |           1 | å¥³è£…/å¥³å£«ç²¾å“   | å‘¢ç»’å¤–å¥—    |  399.90 |  1200 |\n|       2 |  3 |           1 | å¥³è£…/å¥³å£«ç²¾å“   | å«è¡£        |   89.90 |  1500 |\n|       2 |  4 |           1 | å¥³è£…/å¥³å£«ç²¾å“   | ç‰›ä»”è£¤      |   89.90 |  3500 |\n|       3 |  2 |           1 | å¥³è£…/å¥³å£«ç²¾å“   | è¿è¡£è£™      |   79.90 |  2500 |\n|       4 |  1 |           1 | å¥³è£…/å¥³å£«ç²¾å“   | Tæ¤        |   39.90 |  1000 |\n|       5 |  5 |           1 | å¥³è£…/å¥³å£«ç²¾å“   | ç™¾è¤¶è£™      |   29.90 |   500 |\n|       1 |  8 |           2 | æˆ·å¤–è¿åŠ¨       | å±±åœ°è‡ªè¡Œè½¦   | 1399.90 |  2500 |\n|       2 | 11 |           2 | æˆ·å¤–è¿åŠ¨       | è¿åŠ¨å¤–å¥—     |  799.90 |   500 |\n|       3 | 12 |           2 | æˆ·å¤–è¿åŠ¨       | æ»‘æ¿        |  499.90 |  1200 |\n|       4 |  7 |           2 | æˆ·å¤–è¿åŠ¨       | è‡ªè¡Œè½¦       |  399.90 |  1000 |\n|       4 | 10 |           2 | æˆ·å¤–è¿åŠ¨       | éª‘è¡Œè£…å¤‡     |  399.90 |  3500 |\n|       5 |  9 |           2 | æˆ·å¤–è¿åŠ¨       | ç™»å±±æ–       |   59.90 |  1500 |\n+---------+----+-------------+---------------+------------+---------+-------+\n12 rows in set (0.00 sec)\nä¸¾ä¾‹ï¼šä½¿ç”¨DENSE_RANK()å‡½æ•°è·å– goods æ•°æ®è¡¨ä¸­ç±»åˆ«ä¸ºâ€œå¥³è£…/å¥³å£«ç²¾å“â€çš„ä»·æ ¼æœ€é«˜çš„4æ¬¾å•†å“ä¿¡æ¯ã€‚\nmysql&gt; SELECT *\n    -&gt; FROM(\n    -&gt;  SELECT DENSE_RANK() OVER(PARTITION BY category_id ORDER BY price DESC) AS row_num,\n    -&gt;  id, category_id, category, NAME, price, stock\n    -&gt;  FROM goods) t\n    -&gt; WHERE category_id = 1 AND row_num &lt;= 3;\n+---------+----+-------------+---------------+----------+--------+-------+\n| row_num | id | category_id | category      | NAME     | price  | stock |\n+---------+----+-------------+---------------+----------+--------+-------+\n|       1 |  6 |           1 | å¥³è£…/å¥³å£«ç²¾å“   | å‘¢ç»’å¤–å¥—  | 399.90 |  1200 |\n|       2 |  3 |           1 | å¥³è£…/å¥³å£«ç²¾å“   | å«è¡£     |  89.90  |  1500 |\n|       2 |  4 |           1 | å¥³è£…/å¥³å£«ç²¾å“   | ç‰›ä»”è£¤    |  89.90 |  3500 |\n|       3 |  2 |           1 | å¥³è£…/å¥³å£«ç²¾å“   | è¿è¡£è£™    |  79.90 |  2500 |\n+---------+----+-------------+---------------+----------+--------+-------+\n4 rows in set (0.00 sec)\nå¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨DENSE_RANK()å‡½æ•°å¾—å‡ºçš„è¡Œå·ä¸º1ã€2ã€2ã€3ï¼Œç›¸åŒä»·æ ¼çš„å•†å“åºå·ç›¸åŒï¼Œåé¢çš„å•†å“åºå·æ˜¯è¿ç»­çš„ï¼Œå¹¶ä¸”æ²¡æœ‰è·³è¿‡é‡å¤çš„åºå·ã€‚\n2. åˆ†å¸ƒå‡½æ•°1ï¼PERCENT_RANK()å‡½æ•°\nPERCENT_RANK()å‡½æ•°æ˜¯ç­‰çº§å€¼ç™¾åˆ†æ¯”å‡½æ•°ã€‚æŒ‰ç…§å¦‚ä¸‹æ–¹å¼è¿›è¡Œè®¡ç®—ã€‚\n(rank - 1) / (rows - 1)\nå…¶ä¸­ï¼Œrankçš„å€¼ä¸ºä½¿ç”¨RANK()å‡½æ•°äº§ç”Ÿçš„åºå·ï¼Œrowsçš„å€¼ä¸ºå½“å‰çª—å£çš„æ€»è®°å½•æ•°ã€‚\nä¸¾ä¾‹ï¼šè®¡ç®— goods æ•°æ®è¡¨ä¸­åç§°ä¸ºâ€œå¥³è£…/å¥³å£«ç²¾å“â€çš„ç±»åˆ«ä¸‹çš„å•†å“çš„PERCENT_RANKå€¼ã€‚\n#å†™æ³•ä¸€ï¼š\nSELECT RANK() OVER (PARTITION BY category_id ORDER BY price DESC) AS r,\nPERCENT_RANK() OVER (PARTITION BY category_id ORDER BY price DESC) AS pr,\nid, category_id, category, NAME, price, stock\nFROM goods\nWHERE category_id = 1;\n\n#å†™æ³•äºŒï¼š\nmysql&gt; SELECT RANK() OVER w AS r,\n    -&gt; PERCENT_RANK() OVER w AS pr,\n    -&gt; id, category_id, category, NAME, price, stock\n    -&gt; FROM goods\n    -&gt; WHERE category_id = 1 WINDOW w AS (PARTITION BY category_id ORDER BY price DESC);\n+---+-----+----+-------------+---------------+----------+--------+-------+\n| r | pr  | id | category_id | category      | NAME     | price  | stock |\n+---+-----+----+-------------+---------------+----------+--------+-------+\n| 1 |   0 |  6 |           1 | å¥³è£…/å¥³å£«ç²¾å“   | å‘¢ç»’å¤–å¥—  | 399.90 |  1200 |\n| 2 | 0.2 |  3 |           1 | å¥³è£…/å¥³å£«ç²¾å“   | å«è¡£     |  89.90 |  1500 |\n| 2 | 0.2 |  4 |           1 | å¥³è£…/å¥³å£«ç²¾å“   | ç‰›ä»”è£¤   |  89.90 |  3500  |\n| 4 | 0.6 |  2 |           1 | å¥³è£…/å¥³å£«ç²¾å“   | è¿è¡£è£™   |  79.90 |  2500  |\n| 5 | 0.8 |  1 |           1 | å¥³è£…/å¥³å£«ç²¾å“   | Tæ¤      |  39.90 |  1000 |\n| 6 |   1 |  5 |           1 | å¥³è£…/å¥³å£«ç²¾å“   | ç™¾è¤¶è£™   |  29.90  |   500 |\n+---+-----+----+-------------+---------------+----------+--------+-------+\n6 rows in set (0.00 sec)\n2ï¼CUME_DIST()å‡½æ•°\nCUME_DIST()å‡½æ•°ä¸»è¦ç”¨äºæŸ¥è¯¢å°äºæˆ–ç­‰äºæŸä¸ªå€¼çš„æ¯”ä¾‹ã€‚\nä¸¾ä¾‹ï¼šæŸ¥è¯¢goodsæ•°æ®è¡¨ä¸­å°äºæˆ–ç­‰äºå½“å‰ä»·æ ¼çš„æ¯”ä¾‹ã€‚\nmysql&gt; SELECT CUME_DIST() OVER(PARTITION BY category_id ORDER BY price ASC) AS cd,\n    -&gt; id, category, NAME, price\n    -&gt; FROM goods;\n+---------------------+----+---------------+------------+---------+\n| cd                  | id | category      | NAME       | price   |\n+---------------------+----+---------------+------------+---------+\n| 0.16666666666666666 |  5 | å¥³è£…/å¥³å£«ç²¾å“   | ç™¾è¤¶è£™      |   29.90 |\n|  0.3333333333333333 |  1 | å¥³è£…/å¥³å£«ç²¾å“   | Tæ¤        |   39.90 |\n|                 0.5 |  2 | å¥³è£…/å¥³å£«ç²¾å“   | è¿è¡£è£™      |   79.90 |\n|  0.8333333333333334 |  3 | å¥³è£…/å¥³å£«ç²¾å“   | å«è¡£        |   89.90 |\n|  0.8333333333333334 |  4 | å¥³è£…/å¥³å£«ç²¾å“   | ç‰›ä»”è£¤      |   89.90 |\n|                   1 |  6 | å¥³è£…/å¥³å£«ç²¾å“   | å‘¢ç»’å¤–å¥—    |  399.90 |\n| 0.16666666666666666 |  9 | æˆ·å¤–è¿åŠ¨       | ç™»å±±æ–      |   59.90 |\n|                 0.5 |  7 | æˆ·å¤–è¿åŠ¨       | è‡ªè¡Œè½¦      |  399.90 |\n|                 0.5 | 10 | æˆ·å¤–è¿åŠ¨       | éª‘è¡Œè£…å¤‡     |  399.90 |\n|  0.6666666666666666 | 12 | æˆ·å¤–è¿åŠ¨       | æ»‘æ¿        |  499.90 |\n|  0.8333333333333334 | 11 | æˆ·å¤–è¿åŠ¨       | è¿åŠ¨å¤–å¥—    |  799.90 |\n|                   1 |  8 | æˆ·å¤–è¿åŠ¨       | å±±åœ°è‡ªè¡Œè½¦   | 1399.90 |\n+---------------------+----+---------------+------------+---------+\n12 rows in set (0.00 sec)\n3. å‰åå‡½æ•°1ï¼LAG(expr,n)å‡½æ•°\nLAG(expr,n)å‡½æ•°è¿”å›å½“å‰è¡Œçš„å‰nè¡Œçš„exprçš„å€¼ã€‚\nä¸¾ä¾‹ï¼šæŸ¥è¯¢goodsæ•°æ®è¡¨ä¸­å‰ä¸€ä¸ªå•†å“ä»·æ ¼ä¸å½“å‰å•†å“ä»·æ ¼çš„å·®å€¼ã€‚\nmysql&gt; SELECT id, category, NAME, price, pre_price, price - pre_price AS diff_price\n    -&gt; FROM (\n    -&gt;  SELECT  id, category, NAME, price,LAG(price,1) OVER w AS pre_price\n    -&gt;  FROM goods\n    -&gt;  WINDOW w AS (PARTITION BY category_id ORDER BY price)) t;\n+----+---------------+------------+---------+-----------+------------+\n| id | category      | NAME       | price   | pre_price | diff_price |\n+----+---------------+------------+---------+-----------+------------+\n|  5 | å¥³è£…/å¥³å£«ç²¾å“   | ç™¾è¤¶è£™      |   29.90 |      NULL |       NULL |\n|  1 | å¥³è£…/å¥³å£«ç²¾å“   | Tæ¤        |   39.90 |     29.90 |      10.00 |\n|  2 | å¥³è£…/å¥³å£«ç²¾å“   | è¿è¡£è£™      |   79.90 |     39.90 |      40.00 |\n|  3 | å¥³è£…/å¥³å£«ç²¾å“   | å«è¡£       |   89.90 |     79.90 |      10.00 |\n|  4 | å¥³è£…/å¥³å£«ç²¾å“   | ç‰›ä»”è£¤      |   89.90 |     89.90 |       0.00 |\n|  6 | å¥³è£…/å¥³å£«ç²¾å“   | å‘¢ç»’å¤–å¥—    |  399.90 |     89.90 |     310.00 |\n|  9 | æˆ·å¤–è¿åŠ¨       | ç™»å±±æ–      |   59.90 |      NULL |       NULL |\n|  7 | æˆ·å¤–è¿åŠ¨       | è‡ªè¡Œè½¦      |  399.90 |     59.90 |     340.00 |\n| 10 | æˆ·å¤–è¿åŠ¨       | éª‘è¡Œè£…å¤‡    |  399.90 |    399.90 |       0.00 |\n| 12 | æˆ·å¤–è¿åŠ¨       | æ»‘æ¿       |  499.90 |    399.90 |     100.00 |\n| 11 | æˆ·å¤–è¿åŠ¨       | è¿åŠ¨å¤–å¥—    |  799.90 |    499.90 |     300.00 |\n|  8 | æˆ·å¤–è¿åŠ¨       | å±±åœ°è‡ªè¡Œè½¦  | 1399.90 |    799.90 |     600.00 |\n+----+---------------+------------+---------+-----------+------------+\n12 rows in set (0.00 sec)\n2ï¼LEAD(expr,n)å‡½æ•°\nLEAD(expr,n)å‡½æ•°è¿”å›å½“å‰è¡Œçš„ånè¡Œçš„exprçš„å€¼ã€‚\nä¸¾ä¾‹ï¼šæŸ¥è¯¢goodsæ•°æ®è¡¨ä¸­åä¸€ä¸ªå•†å“ä»·æ ¼ä¸å½“å‰å•†å“ä»·æ ¼çš„å·®å€¼ã€‚\nmysql&gt; SELECT id, category, NAME, behind_price, price,behind_price - price AS diff_price\n    -&gt; FROM(\n    -&gt;  SELECT id, category, NAME, price,LEAD(price, 1) OVER w AS behind_price\n    -&gt;  FROM goods WINDOW w AS (PARTITION BY category_id ORDER BY price)) t;\n+----+---------------+------------+--------------+---------+------------+\n| id | category      | NAME       | behind_price | price   | diff_price |\n+----+---------------+------------+--------------+---------+------------+\n|  5 | å¥³è£…/å¥³å£«ç²¾å“   | ç™¾è¤¶è£™      |        39.90 |   29.90 |      10.00 |\n|  1 | å¥³è£…/å¥³å£«ç²¾å“   | Tæ¤        |        79.90 |   39.90 |      40.00 |\n|  2 | å¥³è£…/å¥³å£«ç²¾å“   | è¿è¡£è£™      |        89.90 |   79.90 |      10.00 |\n|  3 | å¥³è£…/å¥³å£«ç²¾å“   | å«è¡£        |        89.90 |   89.90 |       0.00 |\n|  4 | å¥³è£…/å¥³å£«ç²¾å“   | ç‰›ä»”è£¤      |       399.90 |   89.90 |     310.00 |\n|  6 | å¥³è£…/å¥³å£«ç²¾å“   | å‘¢ç»’å¤–å¥—     |         NULL |  399.90 |       NULL |\n|  9 | æˆ·å¤–è¿åŠ¨       | ç™»å±±æ–       |       399.90 |   59.90 |     340.00 |\n|  7 | æˆ·å¤–è¿åŠ¨       | è‡ªè¡Œè½¦       |       399.90 |  399.90 |       0.00 |\n| 10 | æˆ·å¤–è¿åŠ¨       | éª‘è¡Œè£…å¤‡     |       499.90 |  399.90 |     100.00 |\n| 12 | æˆ·å¤–è¿åŠ¨       | æ»‘æ¿        |       799.90 |  499.90 |     300.00 |\n| 11 | æˆ·å¤–è¿åŠ¨       | è¿åŠ¨å¤–å¥—     |      1399.90 |  799.90 |     600.00 |\n|  8 | æˆ·å¤–è¿åŠ¨       | å±±åœ°è‡ªè¡Œè½¦   |         NULL | 1399.90 |       NULL |\n+----+---------------+------------+--------------+---------+------------+\n12 rows in set (0.00 sec)\n4. é¦–å°¾å‡½æ•°1ï¼FIRST_VALUE(expr)å‡½æ•°\nFIRST_VALUE(expr)å‡½æ•°è¿”å›ç¬¬ä¸€ä¸ªexprçš„å€¼ã€‚\nä¸¾ä¾‹ï¼šæŒ‰ç…§ä»·æ ¼æ’åºï¼ŒæŸ¥è¯¢ç¬¬1ä¸ªå•†å“çš„ä»·æ ¼ä¿¡æ¯ã€‚\nmysql&gt; SELECT id, category, NAME, price, stock,FIRST_VALUE(price) OVER w AS first_price\n    -&gt; FROM goods WINDOW w AS (PARTITION BY category_id ORDER BY price);\n+----+---------------+------------+---------+-------+-------------+\n| id | category      | NAME       | price   | stock | first_price |\n+----+---------------+------------+---------+-------+-------------+\n|  5 | å¥³è£…/å¥³å£«ç²¾å“   | ç™¾è¤¶è£™      |   29.90 |   500 |       29.90 |\n|  1 | å¥³è£…/å¥³å£«ç²¾å“   | Tæ¤        |   39.90 |  1000 |       29.90 |\n|  2 | å¥³è£…/å¥³å£«ç²¾å“   | è¿è¡£è£™      |   79.90 |  2500 |       29.90 |\n|  3 | å¥³è£…/å¥³å£«ç²¾å“   | å«è¡£       |   89.90 |  1500 |       29.90 |\n|  4 | å¥³è£…/å¥³å£«ç²¾å“   | ç‰›ä»”è£¤      |   89.90 |  3500 |       29.90 |\n|  6 | å¥³è£…/å¥³å£«ç²¾å“   | å‘¢ç»’å¤–å¥—    |  399.90 |  1200 |       29.90 |\n|  9 | æˆ·å¤–è¿åŠ¨       | ç™»å±±æ–      |   59.90 |  1500 |       59.90 |\n|  7 | æˆ·å¤–è¿åŠ¨       | è‡ªè¡Œè½¦      |  399.90 |  1000 |       59.90 |\n| 10 | æˆ·å¤–è¿åŠ¨       | éª‘è¡Œè£…å¤‡    |  399.90 |  3500 |       59.90 |\n| 12 | æˆ·å¤–è¿åŠ¨       | æ»‘æ¿       |  499.90 |  1200 |       59.90 |\n| 11 | æˆ·å¤–è¿åŠ¨       | è¿åŠ¨å¤–å¥—    |  799.90 |   500 |       59.90 |\n|  8 | æˆ·å¤–è¿åŠ¨       | å±±åœ°è‡ªè¡Œè½¦  | 1399.90 |  2500 |       59.90 |\n+----+---------------+------------+---------+-------+-------------+\n12 rows in set (0.00 sec)\n2ï¼LAST_VALUE(expr)å‡½æ•°\nLAST_VALUE(expr)å‡½æ•°è¿”å›æœ€åä¸€ä¸ªexprçš„å€¼ã€‚\nä¸¾ä¾‹ï¼šæŒ‰ç…§ä»·æ ¼æ’åºï¼ŒæŸ¥è¯¢æœ€åä¸€ä¸ªå•†å“çš„ä»·æ ¼ä¿¡æ¯ã€‚\nmysql&gt; SELECT id, category, NAME, price, stock,LAST_VALUE(price) OVER w AS last_price\n    -&gt; FROM goods WINDOW w AS (PARTITION BY category_id ORDER BY price);\n+----+---------------+------------+---------+-------+------------+\n| id | category      | NAME       | price   | stock | last_price |\n+----+---------------+------------+---------+-------+------------+\n|  5 | å¥³è£…/å¥³å£«ç²¾å“   | ç™¾è¤¶è£™     |   29.90 |   500 |      29.90 |\n|  1 | å¥³è£…/å¥³å£«ç²¾å“   | Tæ¤        |   39.90 |  1000 |      39.90 |\n|  2 | å¥³è£…/å¥³å£«ç²¾å“   | è¿è¡£è£™     |   79.90 |  2500 |      79.90 |\n|  3 | å¥³è£…/å¥³å£«ç²¾å“   | å«è¡£       |   89.90 |  1500 |      89.90 |\n|  4 | å¥³è£…/å¥³å£«ç²¾å“   | ç‰›ä»”è£¤     |   89.90 |  3500 |      89.90 |\n|  6 | å¥³è£…/å¥³å£«ç²¾å“   | å‘¢ç»’å¤–å¥—   |  399.90 |  1200 |     399.90 |\n|  9 | æˆ·å¤–è¿åŠ¨       | ç™»å±±æ–     |   59.90 |  1500 |      59.90 |\n|  7 | æˆ·å¤–è¿åŠ¨       | è‡ªè¡Œè½¦     |  399.90 |  1000 |     399.90 |\n| 10 | æˆ·å¤–è¿åŠ¨       | éª‘è¡Œè£…å¤‡   |  399.90 |  3500 |     399.90 |\n| 12 | æˆ·å¤–è¿åŠ¨       | æ»‘æ¿       |  499.90 |  1200 |     499.90 |\n| 11 | æˆ·å¤–è¿åŠ¨       | è¿åŠ¨å¤–å¥—   |  799.90 |   500 |     799.90 |\n|  8 | æˆ·å¤–è¿åŠ¨       | å±±åœ°è‡ªè¡Œè½¦ | 1399.90 |  2500 |    1399.90 |\n+----+---------------+------------+---------+-------+------------+\n12 rows in set (0.00 sec)\n5. å…¶ä»–å‡½æ•°1ï¼NTH_VALUE(expr,n)å‡½æ•°\nNTH_VALUE(expr,n)å‡½æ•°è¿”å›ç¬¬nä¸ªexprçš„å€¼ã€‚\nä¸¾ä¾‹ï¼šæŸ¥è¯¢goodsæ•°æ®è¡¨ä¸­æ’åç¬¬2å’Œç¬¬3çš„ä»·æ ¼ä¿¡æ¯ã€‚\nmysql&gt; SELECT id, category, NAME, price,NTH_VALUE(price,2) OVER w AS second_price,\n    -&gt; NTH_VALUE(price,3) OVER w AS third_price\n    -&gt; FROM goods WINDOW w AS (PARTITION BY category_id ORDER BY price);\n+----+---------------+------------+---------+--------------+-------------+\n| id | category      | NAME       | price   | second_price | third_price |\n+----+---------------+------------+---------+--------------+-------------+\n|  5 | å¥³è£…/å¥³å£«ç²¾å“   | ç™¾è¤¶è£™     |   29.90 |         NULL |        NULL |\n|  1 | å¥³è£…/å¥³å£«ç²¾å“   | Tæ¤        |   39.90 |        39.90 |        NULL |\n|  2 | å¥³è£…/å¥³å£«ç²¾å“   | è¿è¡£è£™     |   79.90 |        39.90 |       79.90 |\n|  3 | å¥³è£…/å¥³å£«ç²¾å“   | å«è¡£       |   89.90 |        39.90 |       79.90 |\n|  4 | å¥³è£…/å¥³å£«ç²¾å“   | ç‰›ä»”è£¤     |   89.90 |        39.90 |       79.90 |\n|  6 | å¥³è£…/å¥³å£«ç²¾å“   | å‘¢ç»’å¤–å¥—   |  399.90 |        39.90 |       79.90 |\n|  9 | æˆ·å¤–è¿åŠ¨       | ç™»å±±æ–     |   59.90 |         NULL |        NULL |\n|  7 | æˆ·å¤–è¿åŠ¨       | è‡ªè¡Œè½¦     |  399.90 |       399.90 |      399.90 |\n| 10 | æˆ·å¤–è¿åŠ¨       | éª‘è¡Œè£…å¤‡   |  399.90 |       399.90 |      399.90 |\n| 12 | æˆ·å¤–è¿åŠ¨       | æ»‘æ¿       |  499.90 |       399.90 |      399.90 |\n| 11 | æˆ·å¤–è¿åŠ¨       | è¿åŠ¨å¤–å¥—   |  799.90 |       399.90 |      399.90 |\n|  8 | æˆ·å¤–è¿åŠ¨       | å±±åœ°è‡ªè¡Œè½¦ | 1399.90 |       399.90 |      399.90 |\n+----+---------------+------------+---------+--------------+-------------+\n12 rows in set (0.00 sec)\n2ï¼NTILE(n)å‡½æ•°\nNTILE(n)å‡½æ•°å°†åˆ†åŒºä¸­çš„æœ‰åºæ•°æ®åˆ†ä¸ºnä¸ªæ¡¶ï¼Œè®°å½•æ¡¶ç¼–å·ã€‚\nä¸¾ä¾‹ï¼šå°†goodsè¡¨ä¸­çš„å•†å“æŒ‰ç…§ä»·æ ¼åˆ†ä¸º3ç»„ã€‚\nmysql&gt; SELECT NTILE(3) OVER w AS nt,id, category, NAME, price\n    -&gt; FROM goods WINDOW w AS (PARTITION BY category_id ORDER BY price);\n+----+----+---------------+------------+---------+\n| nt | id | category      | NAME       | price   |\n+----+----+---------------+------------+---------+\n|  1 |  5 | å¥³è£…/å¥³å£«ç²¾å“ | ç™¾è¤¶è£™     |   29.90 |\n|  1 |  1 | å¥³è£…/å¥³å£«ç²¾å“ | Tæ¤        |   39.90 |\n|  2 |  2 | å¥³è£…/å¥³å£«ç²¾å“ | è¿è¡£è£™     |   79.90 |\n|  2 |  3 | å¥³è£…/å¥³å£«ç²¾å“ | å«è¡£       |   89.90 |\n|  3 |  4 | å¥³è£…/å¥³å£«ç²¾å“ | ç‰›ä»”è£¤     |   89.90 |\n|  3 |  6 | å¥³è£…/å¥³å£«ç²¾å“ | å‘¢ç»’å¤–å¥—   |  399.90 |\n|  1 |  9 | æˆ·å¤–è¿åŠ¨      | ç™»å±±æ–     |   59.90 |\n|  1 |  7 | æˆ·å¤–è¿åŠ¨      | è‡ªè¡Œè½¦     |  399.90 |\n|  2 | 10 | æˆ·å¤–è¿åŠ¨      | éª‘è¡Œè£…å¤‡   |  399.90 |\n|  2 | 12 | æˆ·å¤–è¿åŠ¨      | æ»‘æ¿       |  499.90 |\n|  3 | 11 | æˆ·å¤–è¿åŠ¨      | è¿åŠ¨å¤–å¥—   |  799.90 |\n|  3 |  8 | æˆ·å¤–è¿åŠ¨      | å±±åœ°è‡ªè¡Œè½¦ | 1399.90 |\n+----+----+---------------+------------+---------+\n12 rows in set (0.00 sec)\n2.5 å° ç»“çª—å£å‡½æ•°çš„ç‰¹ç‚¹æ˜¯å¯ä»¥åˆ†ç»„ï¼Œè€Œä¸”å¯ä»¥åœ¨åˆ†ç»„å†…æ’åºã€‚å¦å¤–ï¼Œçª—å£å‡½æ•°ä¸ä¼šå› ä¸ºåˆ†ç»„è€Œå‡å°‘åŸè¡¨ä¸­çš„è¡Œæ•°ï¼Œè¿™å¯¹æˆ‘ä»¬åœ¨åŸè¡¨æ•°æ®çš„åŸºç¡€ä¸Šè¿›è¡Œç»Ÿè®¡å’Œæ’åºéå¸¸æœ‰ç”¨ã€‚\n3. æ–°ç‰¹æ€§2ï¼šå…¬ç”¨è¡¨è¡¨è¾¾å¼å…¬ç”¨è¡¨è¡¨è¾¾å¼ï¼ˆæˆ–é€šç”¨è¡¨è¡¨è¾¾å¼ï¼‰ç®€ç§°ä¸ºCTEï¼ˆCommon Table Expressionsï¼‰ã€‚CTEæ˜¯ä¸€ä¸ªå‘½åçš„ä¸´æ—¶ç»“æœé›†ï¼Œä½œç”¨èŒƒå›´æ˜¯å½“å‰è¯­å¥ã€‚CTEå¯ä»¥ç†è§£æˆä¸€ä¸ªå¯ä»¥å¤ç”¨çš„å­æŸ¥è¯¢ï¼Œå½“ç„¶è·Ÿå­æŸ¥è¯¢è¿˜æ˜¯æœ‰ç‚¹åŒºåˆ«çš„ï¼ŒCTEå¯ä»¥å¼•ç”¨å…¶ä»–CTEï¼Œä½†å­æŸ¥è¯¢ä¸èƒ½å¼•ç”¨å…¶ä»–å­æŸ¥è¯¢ã€‚æ‰€ä»¥ï¼Œå¯ä»¥è€ƒè™‘ä»£æ›¿å­æŸ¥è¯¢ã€‚\nä¾æ®è¯­æ³•ç»“æ„å’Œæ‰§è¡Œæ–¹å¼çš„ä¸åŒï¼Œå…¬ç”¨è¡¨è¡¨è¾¾å¼åˆ†ä¸ºæ™®é€šå…¬ç”¨è¡¨è¡¨è¾¾å¼å’Œé€’å½’å…¬ç”¨è¡¨è¡¨è¾¾å¼ 2 ç§ã€‚\n3.1 æ™®é€šå…¬ç”¨è¡¨è¡¨è¾¾å¼æ™®é€šå…¬ç”¨è¡¨è¡¨è¾¾å¼çš„è¯­æ³•ç»“æ„æ˜¯ï¼š\nWITH CTEåç§° \nAS ï¼ˆå­æŸ¥è¯¢ï¼‰\nSELECT|DELETE|UPDATE è¯­å¥;\næ™®é€šå…¬ç”¨è¡¨è¡¨è¾¾å¼ç±»ä¼¼äºå­æŸ¥è¯¢ï¼Œä¸è¿‡ï¼Œè·Ÿå­æŸ¥è¯¢ä¸åŒçš„æ˜¯ï¼Œå®ƒå¯ä»¥è¢«å¤šæ¬¡å¼•ç”¨ï¼Œè€Œä¸”å¯ä»¥è¢«å…¶ä»–çš„æ™®é€šå…¬ç”¨è¡¨è¡¨è¾¾å¼æ‰€å¼•ç”¨ã€‚\nä¸¾ä¾‹ï¼šæŸ¥è¯¢å‘˜å·¥æ‰€åœ¨çš„éƒ¨é—¨çš„è¯¦ç»†ä¿¡æ¯ã€‚\nmysql&gt; SELECT * FROM departments\n    -&gt; WHERE department_id IN (\n    -&gt;                  SELECT DISTINCT department_id\n    -&gt;                  FROM employees\n    -&gt;                  );\n+---------------+------------------+------------+-------------+\n| department_id | department_name  | manager_id | location_id |\n+---------------+------------------+------------+-------------+\n|            10 | Administration   |        200 |        1700 |\n|            20 | Marketing        |        201 |        1800 |\n|            30 | Purchasing       |        114 |        1700 |\n|            40 | Human Resources  |        203 |        2400 |\n|            50 | Shipping         |        121 |        1500 |\n|            60 | IT               |        103 |        1400 |\n|            70 | Public Relations |        204 |        2700 |\n|            80 | Sales            |        145 |        2500 |\n|            90 | Executive        |        100 |        1700 |\n|           100 | Finance          |        108 |        1700 |\n|           110 | Accounting       |        205 |        1700 |\n+---------------+------------------+------------+-------------+\n11 rows in set (0.00 sec)\nè¿™ä¸ªæŸ¥è¯¢ä¹Ÿå¯ä»¥ç”¨æ™®é€šå…¬ç”¨è¡¨è¡¨è¾¾å¼çš„æ–¹å¼å®Œæˆï¼š\nmysql&gt; WITH emp_dept_id\n    -&gt; AS (SELECT DISTINCT department_id FROM employees)\n    -&gt; SELECT *\n    -&gt; FROM departments d JOIN emp_dept_id e\n    -&gt; ON d.department_id = e.department_id;\n+---------------+------------------+------------+-------------+---------------+\n| department_id | department_name  | manager_id | location_id | department_id |\n+---------------+------------------+------------+-------------+---------------+\n|            90 | Executive        |        100 |        1700 |            90 |\n|            60 | IT               |        103 |        1400 |            60 |\n|           100 | Finance          |        108 |        1700 |           100 |\n|            30 | Purchasing       |        114 |        1700 |            30 |\n|            50 | Shipping         |        121 |        1500 |            50 |\n|            80 | Sales            |        145 |        2500 |            80 |\n|            10 | Administration   |        200 |        1700 |            10 |\n|            20 | Marketing        |        201 |        1800 |            20 |\n|            40 | Human Resources  |        203 |        2400 |            40 |\n|            70 | Public Relations |        204 |        2700 |            70 |\n|           110 | Accounting       |        205 |        1700 |           110 |\n+---------------+------------------+------------+-------------+---------------+\n11 rows in set (0.00 sec)\nä¾‹å­è¯´æ˜ï¼Œå…¬ç”¨è¡¨è¡¨è¾¾å¼å¯ä»¥èµ·åˆ°å­æŸ¥è¯¢çš„ä½œç”¨ã€‚ä»¥åå¦‚æœé‡åˆ°éœ€è¦ä½¿ç”¨å­æŸ¥è¯¢çš„åœºæ™¯ï¼Œä½ å¯ä»¥åœ¨æŸ¥è¯¢ä¹‹å‰ï¼Œå…ˆå®šä¹‰å…¬ç”¨è¡¨è¡¨è¾¾å¼ï¼Œç„¶ååœ¨æŸ¥è¯¢ä¸­ç”¨å®ƒæ¥ä»£æ›¿å­æŸ¥è¯¢ã€‚è€Œä¸”ï¼Œè·Ÿå­æŸ¥è¯¢ç›¸æ¯”ï¼Œå…¬ç”¨è¡¨è¡¨è¾¾å¼æœ‰ä¸€ä¸ªä¼˜ç‚¹ï¼Œå°±æ˜¯å®šä¹‰è¿‡å…¬ç”¨è¡¨è¡¨è¾¾å¼ä¹‹åçš„æŸ¥è¯¢ï¼Œå¯ä»¥åƒä¸€ä¸ªè¡¨ä¸€æ ·å¤šæ¬¡å¼•ç”¨å…¬ç”¨è¡¨è¡¨è¾¾å¼ï¼Œè€Œå­æŸ¥è¯¢åˆ™ä¸èƒ½ã€‚\n3.2 é€’å½’å…¬ç”¨è¡¨è¡¨è¾¾å¼é€’å½’å…¬ç”¨è¡¨è¡¨è¾¾å¼ä¹Ÿæ˜¯ä¸€ç§å…¬ç”¨è¡¨è¡¨è¾¾å¼ï¼Œåªä¸è¿‡ï¼Œé™¤äº†æ™®é€šå…¬ç”¨è¡¨è¡¨è¾¾å¼çš„ç‰¹ç‚¹ä»¥å¤–ï¼Œå®ƒè¿˜æœ‰è‡ªå·±çš„ç‰¹ç‚¹ï¼Œå°±æ˜¯å¯ä»¥è°ƒç”¨è‡ªå·±ã€‚å®ƒçš„è¯­æ³•ç»“æ„æ˜¯ï¼š\nWITH RECURSIVE\nCTEåç§° AS ï¼ˆå­æŸ¥è¯¢ï¼‰\nSELECT|DELETE|UPDATE è¯­å¥;\né€’å½’å…¬ç”¨è¡¨è¡¨è¾¾å¼ç”± 2 éƒ¨åˆ†ç»„æˆï¼Œåˆ†åˆ«æ˜¯ç§å­æŸ¥è¯¢å’Œé€’å½’æŸ¥è¯¢ï¼Œä¸­é—´é€šè¿‡å…³é”®å­— UNION  [ALL]è¿›è¡Œè¿æ¥ã€‚è¿™é‡Œçš„ç§å­æŸ¥è¯¢ï¼Œæ„æ€å°±æ˜¯è·å¾—é€’å½’çš„åˆå§‹å€¼ã€‚è¿™ä¸ªæŸ¥è¯¢åªä¼šè¿è¡Œä¸€æ¬¡ï¼Œä»¥åˆ›å»ºåˆå§‹æ•°æ®é›†ï¼Œä¹‹åé€’å½’æŸ¥è¯¢ä¼šä¸€ç›´æ‰§è¡Œï¼Œç›´åˆ°æ²¡æœ‰ä»»ä½•æ–°çš„æŸ¥è¯¢æ•°æ®äº§ç”Ÿï¼Œé€’å½’è¿”å›ã€‚\næ¡ˆä¾‹ï¼šé’ˆå¯¹äºæˆ‘ä»¬å¸¸ç”¨çš„employeesè¡¨ï¼ŒåŒ…å«employee_idï¼Œlast_nameå’Œmanager_idä¸‰ä¸ªå­—æ®µã€‚å¦‚æœaæ˜¯bçš„ç®¡ç†è€…ï¼Œé‚£ä¹ˆï¼Œæˆ‘ä»¬å¯ä»¥æŠŠbå«åšaçš„ä¸‹å±ï¼Œå¦‚æœåŒæ—¶båˆæ˜¯cçš„ç®¡ç†è€…ï¼Œé‚£ä¹ˆcå°±æ˜¯bçš„ä¸‹å±ï¼Œæ˜¯açš„ä¸‹ä¸‹å±ã€‚\nä¸‹é¢æˆ‘ä»¬å°è¯•ç”¨æŸ¥è¯¢è¯­å¥åˆ—å‡ºæ‰€æœ‰å…·æœ‰ä¸‹ä¸‹å±èº«ä»½çš„äººå‘˜ä¿¡æ¯ã€‚\nå¦‚æœç”¨æˆ‘ä»¬ä¹‹å‰å­¦è¿‡çš„çŸ¥è¯†æ¥è§£å†³ï¼Œä¼šæ¯”è¾ƒå¤æ‚ï¼Œè‡³å°‘è¦è¿›è¡Œ 4 æ¬¡æŸ¥è¯¢æ‰èƒ½æå®šï¼š\n\nç¬¬ä¸€æ­¥ï¼Œå…ˆæ‰¾å‡ºåˆä»£ç®¡ç†è€…ï¼Œå°±æ˜¯ä¸ä»¥ä»»ä½•åˆ«äººä¸ºç®¡ç†è€…çš„äººï¼ŒæŠŠç»“æœå­˜å…¥ä¸´æ—¶è¡¨ï¼›\n\nç¬¬äºŒæ­¥ï¼Œæ‰¾å‡ºæ‰€æœ‰ä»¥åˆä»£ç®¡ç†è€…ä¸ºç®¡ç†è€…çš„äººï¼Œå¾—åˆ°ä¸€ä¸ªä¸‹å±é›†ï¼ŒæŠŠç»“æœå­˜å…¥ä¸´æ—¶è¡¨ï¼›\n\nç¬¬ä¸‰æ­¥ï¼Œæ‰¾å‡ºæ‰€æœ‰ä»¥ä¸‹å±ä¸ºç®¡ç†è€…çš„äººï¼Œå¾—åˆ°ä¸€ä¸ªä¸‹ä¸‹å±é›†ï¼ŒæŠŠç»“æœå­˜å…¥ä¸´æ—¶è¡¨ã€‚\n\nç¬¬å››æ­¥ï¼Œæ‰¾å‡ºæ‰€æœ‰ä»¥ä¸‹ä¸‹å±ä¸ºç®¡ç†è€…çš„äººï¼Œå¾—åˆ°ä¸€ä¸ªç»“æœé›†ã€‚\n\n\nå¦‚æœç¬¬å››æ­¥çš„ç»“æœé›†ä¸ºç©ºï¼Œåˆ™è®¡ç®—ç»“æŸï¼Œç¬¬ä¸‰æ­¥çš„ç»“æœé›†å°±æ˜¯æˆ‘ä»¬éœ€è¦çš„ä¸‹ä¸‹å±é›†äº†ï¼Œå¦åˆ™å°±å¿…é¡»ç»§ç»­è¿›è¡Œç¬¬å››æ­¥ï¼Œä¸€ç›´åˆ°ç»“æœé›†ä¸ºç©ºä¸ºæ­¢ã€‚æ¯”å¦‚ä¸Šé¢çš„è¿™ä¸ªæ•°æ®è¡¨ï¼Œå°±éœ€è¦åˆ°ç¬¬äº”æ­¥ï¼Œæ‰èƒ½å¾—åˆ°ç©ºç»“æœé›†ã€‚è€Œä¸”ï¼Œæœ€åè¿˜è¦è¿›è¡Œç¬¬å…­æ­¥ï¼šæŠŠç¬¬ä¸‰æ­¥å’Œç¬¬å››æ­¥çš„ç»“æœé›†åˆå¹¶ï¼Œè¿™æ ·æ‰èƒ½æœ€ç»ˆè·å¾—æˆ‘ä»¬éœ€è¦çš„ç»“æœé›†ã€‚\nå¦‚æœç”¨é€’å½’å…¬ç”¨è¡¨è¡¨è¾¾å¼ï¼Œå°±éå¸¸ç®€å•äº†ã€‚æˆ‘ä»‹ç»ä¸‹å…·ä½“çš„æ€è·¯ã€‚\n\nç”¨é€’å½’å…¬ç”¨è¡¨è¡¨è¾¾å¼ä¸­çš„ç§å­æŸ¥è¯¢ï¼Œæ‰¾å‡ºåˆä»£ç®¡ç†è€…ã€‚å­—æ®µ n è¡¨ç¤ºä»£æ¬¡ï¼Œåˆå§‹å€¼ä¸º 1ï¼Œè¡¨ç¤ºæ˜¯ç¬¬ä¸€ä»£ç®¡ç†è€…ã€‚\n\nç”¨é€’å½’å…¬ç”¨è¡¨è¡¨è¾¾å¼ä¸­çš„é€’å½’æŸ¥è¯¢ï¼ŒæŸ¥å‡ºä»¥è¿™ä¸ªé€’å½’å…¬ç”¨è¡¨è¡¨è¾¾å¼ä¸­çš„äººä¸ºç®¡ç†è€…çš„äººï¼Œå¹¶ä¸”ä»£æ¬¡çš„å€¼åŠ  1ã€‚ç›´åˆ°æ²¡æœ‰äººä»¥è¿™ä¸ªé€’å½’å…¬ç”¨è¡¨è¡¨è¾¾å¼ä¸­çš„äººä¸ºç®¡ç†è€…äº†ï¼Œé€’å½’è¿”å›ã€‚\n\nåœ¨æœ€åçš„æŸ¥è¯¢ä¸­ï¼Œé€‰å‡ºæ‰€æœ‰ä»£æ¬¡å¤§äºç­‰äº 3 çš„äººï¼Œä»–ä»¬è‚¯å®šæ˜¯ç¬¬ä¸‰ä»£åŠä»¥ä¸Šä»£æ¬¡çš„ä¸‹å±äº†ï¼Œä¹Ÿå°±æ˜¯ä¸‹ä¸‹å±äº†ã€‚è¿™æ ·å°±å¾—åˆ°äº†æˆ‘ä»¬éœ€è¦çš„ç»“æœé›†ã€‚\n\n\nè¿™é‡Œçœ‹ä¼¼ä¹Ÿæ˜¯ 3 æ­¥ï¼Œå®é™…ä¸Šæ˜¯ä¸€ä¸ªæŸ¥è¯¢çš„ 3 ä¸ªéƒ¨åˆ†ï¼Œåªéœ€è¦æ‰§è¡Œä¸€æ¬¡å°±å¯ä»¥äº†ã€‚è€Œä¸”ä¹Ÿä¸éœ€è¦ç”¨ä¸´æ—¶è¡¨ä¿å­˜ä¸­é—´ç»“æœï¼Œæ¯”åˆšåˆšçš„æ–¹æ³•ç®€å•å¤šäº†ã€‚\nä»£ç å®ç°ï¼š\nWITH RECURSIVE cte \nAS \n(\nSELECT employee_id,last_name,manager_id,1 AS n FROM employees WHERE employee_id = 100 -- ç§å­æŸ¥è¯¢ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä»£é¢†å¯¼\nUNION ALL\nSELECT a.employee_id,a.last_name,a.manager_id,n+1 FROM employees AS a JOIN cte\nON (a.manager_id = cte.employee_id) -- é€’å½’æŸ¥è¯¢ï¼Œæ‰¾å‡ºä»¥é€’å½’å…¬ç”¨è¡¨è¡¨è¾¾å¼çš„äººä¸ºé¢†å¯¼çš„äºº\n)\nSELECT employee_id,last_name FROM cte WHERE n &gt;= 3; \næ€»ä¹‹ï¼Œé€’å½’å…¬ç”¨è¡¨è¡¨è¾¾å¼å¯¹äºæŸ¥è¯¢ä¸€ä¸ªæœ‰å…±åŒçš„æ ¹èŠ‚ç‚¹çš„æ ‘å½¢ç»“æ„æ•°æ®ï¼Œéå¸¸æœ‰ç”¨ã€‚å®ƒå¯ä»¥ä¸å—å±‚çº§çš„é™åˆ¶ï¼Œè½»æ¾æŸ¥å‡ºæ‰€æœ‰èŠ‚ç‚¹çš„æ•°æ®ã€‚å¦‚æœç”¨å…¶ä»–çš„æŸ¥è¯¢æ–¹å¼ï¼Œå°±æ¯”è¾ƒå¤æ‚äº†ã€‚\n3.3 å° ç»“å…¬ç”¨è¡¨è¡¨è¾¾å¼çš„ä½œç”¨æ˜¯å¯ä»¥æ›¿ä»£å­æŸ¥è¯¢ï¼Œè€Œä¸”å¯ä»¥è¢«å¤šæ¬¡å¼•ç”¨ã€‚é€’å½’å…¬ç”¨è¡¨è¡¨è¾¾å¼å¯¹æŸ¥è¯¢æœ‰ä¸€ä¸ªå…±åŒæ ¹èŠ‚ç‚¹çš„æ ‘å½¢ç»“æ„æ•°æ®éå¸¸é«˜æ•ˆï¼Œå¯ä»¥è½»æ¾æå®šå…¶ä»–æŸ¥è¯¢æ–¹å¼éš¾ä»¥å¤„ç†çš„æŸ¥è¯¢ã€‚\nå…¶ä»–æŸ¥è¯¢æŸä¸ªæ•°æ®åº“å ç”¨ç©ºé—´\nSELECT \n  ROUND(SUM(data_length / 1024 / 1024), 2) 'Data Size in MB',\n  ROUND(SUM(index_length / 1024 / 1024), 2) 'Index Size in MB',\n  ROUND(\n    SUM(\n      (index_length + data_length) / 1024 / 1024\n    ),\n    2\n  ) 'All Size in MB' \nFROM\n  information_schema.TABLES \nWHERE table_schema = 'åº“å' ;\næŸ¥è¯¢æŸä¸ªåº“ä¸­æ‰€æœ‰è¡¨å ç”¨ç©ºé—´\nSELECT \n  TABLE_NAME,\n  CONCAT(\n    TRUNCATE (data_length / 1024 / 1024, 2),\n    ' MB'\n  ) AS data_size,\n  CONCAT(\n    TRUNCATE (index_length / 1024 / 1024, 2),\n    ' MB'\n  ) AS index_size \nFROM\n  information_schema.TABLES \nWHERE TABLE_SCHEMA = 'åº“å' \nGROUP BY TABLE_NAME \nORDER BY data_length DESC ;\næŸ¥è¯¢æ‰€æœ‰æ•°æ®åº“å ç”¨ç©ºé—´\nSELECT \n  TABLE_SCHEMA,\n  CONCAT(\n    TRUNCATE(SUM(data_length) / 1024 / 1024, 2),\n    ' MB'\n  ) AS data_size,\n  CONCAT(\n    TRUNCATE(SUM(index_length) / 1024 / 1024, 2),\n    'MB'\n  ) AS index_size \nFROM\n  information_schema.tables \nGROUP BY TABLE_SCHEMA \nORDER BY data_length DESC ;\n","slug":"B1-MySQLåŸºç¡€","date":"2021-11-10T12:30:04.000Z","categories_index":"æ•°æ®åº“","tags_index":"MySQL","author_index":"YFR718"},{"id":"31135c47a98e6bfd7ef6f55be399b5e8","title":"PyMySQL","content":"1. è¿æ¥æ•°æ®åº“import pymysql\n\n# åˆ›å»ºè¿æ¥å¯¹è±¡\nconn = pymysql.connect(host='localhost', port=3306, user='root', password='mysql',database='python', charset='utf8')\n\n# è·å–æ¸¸æ ‡å¯¹è±¡\ncursor = conn.cursor()\n\n# å…³é—­æ¸¸æ ‡\ncursor.close()\n\n# å…³é—­è¿æ¥\nconn.close()\n2. æ•°æ®åº“æ“ä½œ2.1 DQLè¯­è¨€selectselecté€‰æ‹©\n# æŸ¥è¯¢ SQL è¯­å¥\nsql = \"select * from students;\"\n# æ‰§è¡Œ SQL è¯­å¥ è¿”å›å€¼å°±æ˜¯ SQL è¯­å¥åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å½±å“çš„è¡Œæ•°\nrow_count = cursor.execute(sql)\n\n# å–å‡ºç»“æœé›†ä¸­ä¸€è¡Œæ•°æ®,ã€€ä¾‹å¦‚:(1, 'å¼ ä¸‰')\nprint(cursor.fetchone())\n\n# å–å‡ºç»“æœé›†ä¸­çš„æ‰€æœ‰æ•°æ®, ä¾‹å¦‚:((1, 'å¼ ä¸‰'), (2, 'æå››'), (3, 'ç‹äº”'))\nfor line in cursor.fetchall():\n    print(line)\n        \nPythonæŸ¥è¯¢Mysqlä½¿ç”¨ fetchone() æ–¹æ³•è·å–å•æ¡æ•°æ®, ä½¿ç”¨fetchall() æ–¹æ³•è·å–å¤šæ¡æ•°æ®ã€‚\n\nfetchone(): è¯¥æ–¹æ³•è·å–ä¸‹ä¸€ä¸ªæŸ¥è¯¢ç»“æœé›†ã€‚ç»“æœé›†æ˜¯ä¸€ä¸ªå¯¹è±¡\n\nfetchall(): æ¥æ”¶å…¨éƒ¨çš„è¿”å›ç»“æœè¡Œ.\n\nrowcount: è¿™æ˜¯ä¸€ä¸ªåªè¯»å±æ€§ï¼Œå¹¶è¿”å›æ‰§è¡Œexecute()æ–¹æ³•åå½±å“çš„è¡Œæ•°ã€‚\n\n\n2.2 DMLæ•°æ®æ“ä½œè¯­è¨€insert ã€updateã€deleteinsertæ’å…¥\n# SQL æ’å…¥è¯­å¥\nsql = \"\"\"INSERT INTO EMPLOYEE(FIRST_NAME,\n         LAST_NAME, AGE, SEX, INCOME)\n         VALUES ('Mac', 'Mohan', 20, 'M', 2000)\"\"\"\ntry:\n   # æ‰§è¡Œsqlè¯­å¥\n   cursor.execute(sql)\n   # æäº¤åˆ°æ•°æ®åº“æ‰§è¡Œ\n   db.commit()\nexcept:\n   # å¦‚æœå‘ç”Ÿé”™è¯¯åˆ™å›æ»š\n   db.rollback()\næ’å…¥å¤šè¡Œæ•°æ®æ—¶ï¼Œæ•°æ®æ˜¯listï¼Œå…¶ä¸­å…ƒç´ æ˜¯å…ƒç»„ã€‚\n# ä¸€æ¬¡æ’å…¥å¤šè¡Œæ•°æ®\n# print(value)\nsql = 'insert into summary(id,dataname,herf,rel) values(%s,%s,%s,%s)'\nvalue = []\nfor rep in root.findall('repository'):\n    id = rep.find('id').text\n    dataname = rep.find('name').text\n    herf = rep.find('link').attrib['href']\n    rel = rep.find('link').attrib['rel']\n    value.append((id,dataname,herf,rel))\n    \ntry:\n    cursor.executemany(sql,value)\n    db.commit()\n    print(\"summaryå†™å…¥æˆåŠŸ\")\nexcept Exception as e:\n    print(e)\n    db.rollback()\n    print(\"summaryå†™å…¥å¤±è´¥\")\nfinally:\n    db.close()\n\nupdateæ›´æ–°\n# SQL æ›´æ–°è¯­å¥\nsql = \"UPDATE EMPLOYEE SET AGE = AGE + 1 WHERE SEX = '%c'\" % ('M')\ntry:\n   # æ‰§è¡ŒSQLè¯­å¥\n   cursor.execute(sql)\n   # æäº¤åˆ°æ•°æ®åº“æ‰§è¡Œ\n   db.commit()\nexcept:\n   # å‘ç”Ÿé”™è¯¯æ—¶å›æ»š\n   db.rollback()\ndeleteåˆ é™¤\n# SQL åˆ é™¤è¯­å¥\nsql = \"DELETE FROM EMPLOYEE WHERE AGE &gt; %s\" % (20)\ntry:\n   # æ‰§è¡ŒSQLè¯­å¥\n   cursor.execute(sql)\n   # æäº¤ä¿®æ”¹\n   db.commit()\nexcept:\n   # å‘ç”Ÿé”™è¯¯æ—¶å›æ»š\n   db.rollback()\n2.3 DDLæ•°æ®å®šä¹‰è¯­è¨€createã€dropã€altercreateåˆ›å»ºæ•°æ®è¡¨\n# ä½¿ç”¨ cursor() æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ¸¸æ ‡å¯¹è±¡ cursor\ncursor = db.cursor()\n \n\n# ä½¿ç”¨é¢„å¤„ç†è¯­å¥åˆ›å»ºè¡¨\nsql = \"\"\"CREATE TABLE EMPLOYEE (\n         FIRST_NAME  CHAR(20) NOT NULL,\n         LAST_NAME  CHAR(20),\n         AGE INT,  \n         SEX CHAR(1),\n         INCOME FLOAT )\"\"\"\n \ncursor.execute(sql)\ndropåˆ é™¤æ•°æ®è¡¨\n# ä½¿ç”¨ execute() æ–¹æ³•æ‰§è¡Œ SQLï¼Œå¦‚æœè¡¨å­˜åœ¨åˆ™åˆ é™¤\ncursor.execute(\"DROP TABLE IF EXISTS EMPLOYEE\")\n \nalteræ›´æ”¹æ•°æ®è¡¨\n2.4 TCLäº‹åŠ¡æ§åˆ¶è¯­è¨€commitã€rollback# SQLåˆ é™¤è®°å½•è¯­å¥\nsql = \"DELETE FROM EMPLOYEE WHERE AGE &gt; %s\" % (20)\ntry:\n   # æ‰§è¡ŒSQLè¯­å¥\n   cursor.execute(sql)\n   # å‘æ•°æ®åº“æäº¤\n   db.commit()\nexcept:\n   # å‘ç”Ÿé”™è¯¯æ—¶å›æ»š\n   db.rollback()\n","slug":"P2-PyMySQL","date":"2021-11-10T02:06:01.000Z","categories_index":"Python","tags_index":"MySQL","author_index":"YFR718"},{"id":"446bbf5d6e6c49aba6d56562199f8a0a","title":"XMLè§£æ","content":"1 xml.etree.ElementTreeå¯¹Pythonçš„è½»é‡çº§XMLæ”¯æŒã€‚\nXMLæ˜¯ä¸€ç§å›ºæœ‰çš„åˆ†å±‚æ•°æ®æ ¼å¼ï¼Œæœ€è‡ªç„¶çš„è¡¨ç¤ºæ–¹æ³•æ˜¯ä½¿ç”¨æ ‘ã€‚è¿™ä¸ªæ¨¡å—æœ‰ä¸¤ä¸ªç±»ç”¨äºæ­¤ç›®çš„:\n\nElementTreeå°†æ•´ä¸ªXMLæ–‡æ¡£è¡¨ç¤ºä¸ºæ ‘ã€‚\nå…ƒç´ è¡¨ç¤ºæ­¤æ ‘ä¸­çš„å•ä¸ªèŠ‚ç‚¹ã€‚\n\nâ€‹        ä¸æ•´ä¸ªæ–‡æ¡£çš„äº¤äº’(å¯¹æ–‡ä»¶çš„è¯»å†™)é€šå¸¸åœ¨ElementTreeçº§åˆ«å®Œæˆã€‚ä¸å•ä¸ªXMLå…ƒç´ åŠå…¶å­å…ƒç´ çš„äº¤äº’æ˜¯åœ¨elementçº§åˆ«ä¸Šå®Œæˆçš„ã€‚\nâ€‹        å…ƒç´ æ˜¯ä¸€ç§çµæ´»çš„å®¹å™¨å¯¹è±¡ï¼Œç”¨äºåœ¨å†…å­˜ä¸­å­˜å‚¨åˆ†å±‚æ•°æ®ç»“æ„ã€‚å®ƒå¯ä»¥è¢«æè¿°ä¸ºä»‹äºåˆ—è¡¨å’Œå­—å…¸ä¹‹é—´çš„æ··åˆä½“ã€‚æ¯ä¸ªå…ƒç´ éƒ½æœ‰è®¸å¤šä¸ä¹‹ç›¸å…³çš„å±æ€§:\n\nâ€˜tagâ€™â€”â€”åŒ…å«å…ƒç´ åç§°çš„å­—ç¬¦ä¸²ã€‚\nâ€˜attributesâ€™â€”â€”ä¸€ä¸ªå­˜å‚¨å…ƒç´ å±æ€§çš„Pythonå­—å…¸ã€‚\nâ€˜textâ€™ -ä¸€ä¸ªåŒ…å«å…ƒç´ æ–‡æœ¬å†…å®¹çš„å­—ç¬¦ä¸²ã€‚\nâ€˜tailâ€™ -ä¸€ä¸ªå¯é€‰å­—ç¬¦ä¸²ï¼Œåœ¨å…ƒç´ çš„ç»“æŸæ ‡ç­¾ä¹‹ååŒ…å«æ–‡æœ¬ã€‚ä»¥åŠä¸€ç³»åˆ—å­˜å‚¨åœ¨Pythonåºåˆ—ä¸­çš„å­å…ƒç´ ã€‚\n\nâ€‹        è¦åˆ›å»ºå…ƒç´ å®ä¾‹ï¼Œè¯·ä½¿ç”¨elementæ„é€ å‡½æ•°æˆ–SubElementå·¥å‚å‡½æ•°ã€‚è¿˜å¯ä»¥ä½¿ç”¨ElementTreeç±»åŒ…è£…å…ƒç´ ç»“æ„ï¼Œå¹¶å°†å…¶ä¸XMLè¿›è¡Œè½¬æ¢ã€‚\n1.1 å¯¼å…¥æ•°æ®ä»xmlæ–‡ä»¶å¯¼å…¥\nimport xml.etree.ElementTree as ET\ntree = ET.parse('country_data.xml')\nroot = tree.getroot()\nä»htmlå¯¼å…¥\nimport xml.etree.ElementTree as ET\n# è¦çˆ¬å–çš„åœ°å€\nurl = \"https://www.re3data.org/api/v1/repositories\"\nres = requests.get(url)\nroot = ET.fromstring(res.text)\n1.2 æ•°æ®æŸ¥è¯¢1.2.1 è·å–å››ä¸ªå±æ€§print(root.tag)\nprint(root.attrib)\nprint(root.tail)\nprint(res.text)\n1.2.2 è®¿é—®å­èŠ‚ç‚¹ç”¨ len(Element) æ£€æŸ¥å­èŠ‚ç‚¹ä¸ªæ•°\nç”¨ Element[0] è®¿é—®ç¬¬0ä¸ªå­èŠ‚ç‚¹ï¼ŒElement[1] è®¿é—®ç¬¬1ä¸ªå­èŠ‚ç‚¹â€¦\nç”¨ for child in Element éå†æ‰€æœ‰å­èŠ‚ç‚¹\nç”¨ Element.remove(child) åˆ é™¤æŸä¸ªå­èŠ‚ç‚¹\nfor i in root:\n    print(i.tag)\n1.2.3 æŸ¥è¯¢æŒ‡å®šæ ‡ç­¾\nElementt.iter() #é€’å½’è¿­ä»£xmlæ–‡ä»¶ä¸­æ‰€æœ‰èŠ‚ç‚¹ï¼ˆåŒ…å«å­èŠ‚ç‚¹ï¼Œä»¥åŠå­èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ï¼‰ï¼Œè¿”å›ä¸€ä¸ªåŒ…å«æ‰€æœ‰èŠ‚ç‚¹çš„è¿­ä»£å™¨\nElement.find(tag) #æŸ¥æ‰¾ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ä¸ºtagçš„ç›´æ¥å­å…ƒç´ ï¼Œè¿”å›ä¸€ä¸ªèŠ‚ç‚¹å¯¹è±¡\nElement.findall(tag) #æŸ¥æ‰¾èŠ‚ç‚¹ä¸ºtagçš„æ‰€æœ‰ç›´æ¥å­å…ƒç´ â€™ï¼Œè¿”å›ä¸€ä¸ªèŠ‚ç‚¹åˆ—è¡¨ç›´æ¥å­å…ƒç´ çš„æ„æ€ï¼šåªä¼šæŸ¥æ‰¾å½“å‰èŠ‚ç‚¹çš„å­èŠ‚ç‚¹é‚£ä¸€çº§ç›®å½•\n\nfor rep in root.findall('repository'):\n    # print(rep.find('id').text)\n    # print(rep.find('name').text)\n    print(rep.find('link').attrib['href'],rep.find('link').attrib['rel'])\nå¤„ç†å«namespaceçš„æ–‡ä»¶\nnamespace = \"{http://www.re3data.org/schema/2-2}\"\nfor element in root.iter(namespace + \"re3data.orgIdentifier\"):  # ID\n    print(\"1#   \", element.text)\n    ID = element.text\n1.2.4 æ ‘ç»“æ„ä¸ XML å­—ç¬¦ä¸²çš„ç›¸äº’è½¬æ¢ä½¿ç”¨ xml.etree.ElementTree åŒ…ä¸­çš„ tostring() å’Œ fromstring() å‡½æ•°ï¼š\n\nå¦‚æœ tostring() å‚æ•°ä¸æŒ‡å®š encoding=\"unicode\"ï¼Œå‡½æ•°å°†è¿”å› byte åºåˆ—ã€‚\n\nfrom xml.etree.ElementTree import Element, tostring\n\ntree_str = tostring(root, encoding=\"unicode\")\n\nnew_root = fromstring(tree_str)\nprint(new_root.tag, new_root[0].tag, new_root[1].tag)\n1.3 æ•°æ®åˆ›å»º1.3.1 åˆ›å»ºæ ‘èŠ‚ç‚¹åˆ›å»ºæ ‘èŠ‚ç‚¹æ—¶ï¼Œä¸€å®šè¦æŒ‡å®šèŠ‚ç‚¹åï¼š\ntree_node = Element(\"node1\")\nprint(tree_node.tag)    # è¾“å‡º node1\nprint(tree_node.text)   # è¾“å‡º None\nprint(tree_node.tail)   # è¾“å‡º None\nprint(tree_node.attrib) # è¾“å‡º {}\nä¹Ÿå¯åœ¨åˆ›å»ºæ—¶æŒ‡å®šå±æ€§ï¼ˆElement.attribï¼‰ï¼š\ntree_node = Element(\"node2\", {\"attr1\": 1, \"attr2\": 2})\nprint(tree_node.tag)    # è¾“å‡º node2\nprint(tree_node.text)   # è¾“å‡º None\nprint(tree_node.tail)   # è¾“å‡º None\nprint(tree_node.attrib) # è¾“å‡º {'attr1': 1, 'attr2': 2}\n1.3.2 è®¾ç½®æ–‡æœ¬ï¼ˆElement.textï¼‰æˆ–é™„åŠ æ–‡æœ¬ï¼ˆElement.tailï¼‰åˆ›å»ºèŠ‚ç‚¹åï¼Œå¯ä»¥è®¾ç½® text, tail ç­‰ç±»æˆå‘˜ã€‚è¿™äº›æˆå‘˜çš„åˆå§‹å€¼ä¸º Noneã€‚\ntree_node = Element(\"node1\")\ntree_node.text = \"Hello world\"\ntree_node.tail = \"Bye\"\n1.3.3 æ·»åŠ å­èŠ‚ç‚¹å¯ä»¥ç”¨ Element.append() æˆå‘˜å‡½æ•°æ·»åŠ å­èŠ‚ç‚¹ï¼š\nroot = Element(\"root\")\nchild1 = Element(\"child1\")\nchild2 = Element(\"child2\")\n\nroot.append(child1)\nroot.append(child2)\n","slug":"P1-XMLè§£æ","date":"2021-11-10T01:23:54.000Z","categories_index":"Python","tags_index":"XML","author_index":"YFR718"},{"id":"0e809b380a45c732473fb3fa1636bd4c","title":"ASCIIç ","content":"ASCIIç è¡¨æ ¼ï¼š\n\n\n\n\nASCIIå€¼\næ§åˆ¶å­—ç¬¦\nASCIIå€¼\nå­—ç¬¦\nASCIIå€¼\nå­—ç¬¦\nASCIIå€¼\nå­—ç¬¦\n\n\n\n\n0\nNUT\n32\n(space)\n64\n@\n96\nã€\n\n\n1\nSOH\n33\n!\n65\nA\n97\na\n\n\n2\nSTX\n34\nâ€œ\n66\nB\n98\nb\n\n\n3\nETX\n35\n#\n67\nC\n99\nc\n\n\n4\nEOT\n36\n$\n68\nD\n100\nd\n\n\n5\nENQ\n37\n%\n69\nE\n101\ne\n\n\n6\nACK\n38\n&amp;\n70\nF\n102\nf\n\n\n7\nBEL\n39\n,\n71\nG\n103\ng\n\n\n8\nBS\n40\n(\n72\nH\n104\nh\n\n\n9\nHT\n41\n)\n73\nI\n105\ni\n\n\n10\nLF\n42\n*\n74\nJ\n106\nj\n\n\n11\nVT\n43\n+\n75\nK\n107\nk\n\n\n12\nFF\n44\n,\n76\nL\n108\nl\n\n\n13\nCR\n45\n-\n77\nM\n109\nm\n\n\n14\nSO\n46\n.\n78\nN\n110\nn\n\n\n15\nSI\n47\n/\n79\nO\n111\no\n\n\n16\nDLE\n48\n0\n80\nP\n112\np\n\n\n17\nDCI\n49\n1\n81\nQ\n113\nq\n\n\n18\nDC2\n50\n2\n82\nR\n114\nr\n\n\n19\nDC3\n51\n3\n83\nS\n115\ns\n\n\n20\nDC4\n52\n4\n84\nT\n116\nt\n\n\n21\nNAK\n53\n5\n85\nU\n117\nu\n\n\n22\nSYN\n54\n6\n86\nV\n118\nv\n\n\n23\nTB\n55\n7\n87\nW\n119\nw\n\n\n24\nCAN\n56\n8\n88\nX\n120\nx\n\n\n25\nEM\n57\n9\n89\nY\n121\ny\n\n\n26\nSUB\n58\n:\n90\nZ\n122\nz\n\n\n27\nESC\n59\n;\n91\n[\n123\n{\n\n\n28\nFS\n60\n&lt;\n92\n/\n124\n\\\n\n\n\n29\nGS\n61\n=\n93\n]\n125\n}\n\n\n30\nRS\n62\n&gt;\n94\n^\n126\n`\n\n\n31\nUS\n63\n?\n95\n_\n127\nDEL\n\n\n\n\nASCII ç å¤§è‡´ç”±ä»¥ä¸‹ä¸¤éƒ¨åˆ†ç»„æˆï¼š\n\nASCII éæ‰“å°æ§åˆ¶å­—ç¬¦ï¼š ASCII è¡¨ä¸Šçš„æ•°å­— 0-31 åˆ†é…ç»™äº†æ§åˆ¶å­—ç¬¦ï¼Œç”¨äºæ§åˆ¶åƒæ‰“å°æœºç­‰ä¸€äº›å¤–å›´è®¾å¤‡ã€‚\nASCII æ‰“å°å­—ç¬¦ï¼šæ•°å­— 32-126 åˆ†é…ç»™äº†èƒ½åœ¨é”®ç›˜ä¸Šæ‰¾åˆ°çš„å­—ç¬¦ï¼Œå½“æŸ¥çœ‹æˆ–æ‰“å°æ–‡æ¡£æ—¶å°±ä¼šå‡ºç°ã€‚\n\n","slug":"Z0-è®¡ç®—æœºåŸºç¡€","date":"2021-11-06T11:52:59.000Z","categories_index":"è®¡ç®—æœºåŸºç¡€","tags_index":"","author_index":"YFR718"},{"id":"f8534e8f12d0bc66698739d3b7153c65","title":"J5.å¯¹è±¡ä¸ç±»","content":"\né¢å‘å¯¹è±¡ç¼–ç¨‹OOPç±»(Class)å’Œå¯¹è±¡(Object)æ˜¯é¢å‘å¯¹è±¡çš„æ ¸å¿ƒæ¦‚å¿µã€‚\n\nç±»æ˜¯å¯¹ä¸€ç±»äº‹ç‰©çš„æè¿°ï¼Œæ˜¯æŠ½è±¡çš„ã€æ¦‚å¿µä¸Šçš„å®šä¹‰\nå¯¹è±¡æ˜¯å®é™…å­˜åœ¨çš„è¯¥ç±»äº‹ç‰©çš„æ¯ä¸ªä¸ªä½“ï¼Œå› è€Œä¹Ÿç§°ä¸ºå®ä¾‹(instance)ã€‚\nå± æ€§ï¼šå¯¹åº”ç±»ä¸­çš„æˆå‘˜å˜é‡\nè¡Œ ä¸ºï¼šå¯¹åº”ç±»ä¸­çš„æˆå‘˜æ–¹æ³•\nç”±ç±»æ„é€ ï¼ˆconstructï¼‰å¯¹è±¡çš„è¿‡ç¨‹ç§°ä¸ºåˆ›å»ºç±»çš„å®ä¾‹ï¼ˆinstanceï¼‰ã€‚\n\nåˆ›å»ºJavaè‡ªå®šä¹‰ç±»\n\nå®šä¹‰ç±»ï¼ˆè€ƒè™‘ä¿®é¥°ç¬¦ã€ç±»åï¼‰\nç¼–å†™ç±»çš„å±æ€§ï¼ˆè€ƒè™‘ä¿®é¥°ç¬¦ã€å±æ€§ç±»å‹ã€å±æ€§åã€åˆå§‹åŒ–å€¼ï¼‰\nç¼–å†™ç±»çš„æ–¹æ³•ï¼ˆè€ƒè™‘ä¿®é¥°ç¬¦ã€è¿”å›å€¼ç±»å‹ã€æ–¹æ³•åã€å½¢å‚ç­‰ï¼‰\n\nå¯¹è±¡çš„åˆ›å»ºå’Œä½¿ç”¨\nåˆ›å»ºå¯¹è±¡è¯­æ³•ï¼š ç±»å å¯¹è±¡å = new ç±»å();ä½¿ç”¨â€œå¯¹è±¡å.å¯¹è±¡æˆå‘˜â€çš„æ–¹å¼è®¿é—®å¯¹è±¡æˆå‘˜ï¼ˆåŒ…æ‹¬å±æ€§å’Œæ–¹æ³•ï¼‰\nå±æ€§ä¿®é¥°ç¬¦ æ•°æ®ç±»å‹ å±æ€§å = åˆå§‹åŒ–å€¼ ; \n\nä¿®é¥°ç¬¦ï¼šå¸¸ç”¨çš„æƒé™ä¿®é¥°ç¬¦æœ‰ï¼šprivateã€ç¼ºçœã€protectedã€publicï¼Œå…¶ä»–ä¿®é¥°ç¬¦ï¼šstaticã€final (æš‚ä¸è€ƒè™‘)\næ•°æ®ç±»å‹ï¼šä»»ä½•åŸºæœ¬æ•°æ®ç±»å‹(å¦‚intã€Boolean) æˆ– ä»»ä½•å¼•ç”¨æ•°æ®ç±»å‹ã€‚\nå±æ€§åï¼šå±äºæ ‡è¯†ç¬¦ï¼Œç¬¦åˆå‘½åè§„åˆ™å’Œè§„èŒƒå³å¯ã€‚\n\nå˜é‡çš„åˆ†ç±»ï¼šæˆå‘˜å˜é‡ä¸å±€éƒ¨å˜é‡\n\n\n\n\n\n\næˆå‘˜å˜é‡\nå±€éƒ¨å˜é‡\n\n\n\n\nå£°æ˜çš„ä½ç½®\nç›´æ¥å£°æ˜åœ¨ç±»ä¸­\næ–¹æ³•å½¢å‚æˆ–å†…éƒ¨ã€ä»£ç å—å†…ã€æ„é€ å™¨å†…ç­‰\n\n\nä¿®é¥°ç¬¦\nprivateã€publicã€staticã€finalç­‰\nä¸èƒ½ç”¨æƒé™ä¿®é¥°ç¬¦ä¿®é¥°ï¼Œå¯ä»¥ç”¨finalä¿®é¥°\n\n\nåˆå§‹åŒ–å€¼\næœ‰é»˜è®¤åˆå§‹åŒ–å€¼\næ²¡æœ‰é»˜è®¤åˆå§‹åŒ–å€¼ï¼Œå¿…é¡»æ˜¾å¼èµ‹å€¼ï¼Œæ–¹å¯ä½¿ç”¨\n\n\nå†…å­˜åŠ è½½ä½ç½®\nå †ç©ºé—´ æˆ– é™æ€åŸŸå†…\næ ˆç©ºé—´\n\n\n\n\næ–¹æ³•\næ–¹æ³•æ˜¯ç±»æˆ–å¯¹è±¡è¡Œä¸ºç‰¹å¾çš„æŠ½è±¡ï¼Œç”¨æ¥å®ŒæˆæŸä¸ªåŠŸèƒ½æ“ä½œã€‚åœ¨æŸäº›è¯­è¨€ä¸­ä¹Ÿç§°ä¸ºå‡½æ•°æˆ–è¿‡ç¨‹ã€‚\nå°†åŠŸèƒ½å°è£…ä¸ºæ–¹æ³•çš„ç›®çš„æ˜¯ï¼Œå¯ä»¥å®ç°ä»£ç é‡ç”¨ï¼Œç®€åŒ–ä»£ç \nJavaé‡Œçš„æ–¹æ³•ä¸èƒ½ç‹¬ç«‹å­˜åœ¨ï¼Œæ‰€æœ‰çš„æ–¹æ³•å¿…é¡»å®šä¹‰åœ¨ç±»é‡Œã€‚\n\n// æ–¹æ³•çš„å£°æ˜æ ¼å¼ï¼š\nä¿®é¥°ç¬¦  è¿”å›å€¼ç±»å‹  æ–¹æ³•åï¼ˆå‚æ•°ç±»å‹å½¢å‚1, å‚æ•°ç±»å‹å½¢å‚2, â€¦.ï¼‰ï½›\n    æ–¹æ³•ä½“ç¨‹åºä»£ç \n    return è¿”å›å€¼;\n}\nä¿®é¥°ç¬¦ï¼špublic,ç¼ºçœ,private, protectedç­‰è¿”å›å€¼ç±»å‹ï¼š\nè¿”å›å€¼ç±»å‹ï¼šæ²¡æœ‰è¿”å›å€¼ï¼švoidï¼Œæœ‰è¿”å›å€¼ï¼Œå£°æ˜å‡ºè¿”å›å€¼çš„ç±»å‹ã€‚ä¸æ–¹æ³•ä½“ä¸­â€œreturn è¿”å›å€¼â€æ­é…ä½¿ç”¨\næ–¹æ³•åï¼šå±äºæ ‡è¯†ç¬¦ï¼Œå‘½åæ—¶éµå¾ªæ ‡è¯†ç¬¦å‘½åè§„åˆ™å’Œè§„èŒƒï¼Œâ€œè§åçŸ¥æ„â€ \nå½¢å‚åˆ—è¡¨ï¼šå¯ä»¥åŒ…å«é›¶ä¸ªï¼Œä¸€ä¸ªæˆ–å¤šä¸ªå‚æ•°ã€‚å¤šä¸ªå‚æ•°æ—¶ï¼Œä¸­é—´ç”¨â€œ,â€éš”å¼€è¿”å›å€¼ï¼šæ–¹æ³•åœ¨æ‰§è¡Œå®Œæ¯•åè¿”è¿˜ç»™è°ƒç”¨å®ƒçš„ç¨‹åºçš„æ•°æ®ã€‚\nmainæ–¹æ³•\n\n\n\nmainæ–¹æ³•\n\n\n\n\n\npublic\nç”±äºJavaè™šæ‹Ÿæœºéœ€è¦è°ƒç”¨ç±»çš„main()æ–¹æ³•ï¼Œæ‰€ä»¥è¯¥æ–¹æ³•çš„è®¿é—®æƒé™å¿…é¡»æ˜¯public\n\n\nstatic\nå› ä¸ºJavaè™šæ‹Ÿæœºåœ¨æ‰§è¡Œmain()æ–¹æ³•æ—¶ä¸å¿…åˆ›å»ºå¯¹è±¡ï¼Œæ‰€ä»¥è¯¥æ–¹æ³•å¿…é¡»æ˜¯staticçš„\n\n\nString[] args\nè¯¥æ–¹æ³•æ¥æ”¶ä¸€ä¸ªStringç±»å‹çš„æ•°ç»„å‚æ•°ï¼Œè¯¥æ•°ç»„ä¸­ä¿å­˜æ‰§è¡ŒJavaå‘½ä»¤æ—¶ä¼ é€’ç»™æ‰€è¿è¡Œçš„ç±»çš„å‚æ•°\n\n\n\n\nä»£ç å—ä»£ç å—(æˆ–åˆå§‹åŒ–å—)çš„ä½œç”¨ï¼š å¯¹Javaç±»æˆ–å¯¹è±¡è¿›è¡Œåˆå§‹åŒ–ä»£ç å—(æˆ–åˆå§‹åŒ–å—)çš„åˆ†ç±»ï¼šä¸€ä¸ªç±»ä¸­ä»£ç å—è‹¥æœ‰ä¿®é¥°ç¬¦ï¼Œåˆ™åªèƒ½è¢«staticä¿®é¥°ï¼Œç§°ä¸ºé™æ€ä»£ç å—(static block)ï¼Œæ²¡æœ‰ä½¿ç”¨staticä¿®é¥°çš„ï¼Œä¸ºéé™æ€ä»£ç å—ã€‚\n// staticä»£ç å—é€šå¸¸ç”¨äºåˆå§‹åŒ–staticçš„å±æ€§\nclass Person {\n    public static int total; \n    static {\n        total = 100;//ä¸ºtotalèµ‹åˆå€¼\n    }\n}\n\né™æ€ä»£ç å—ï¼šç”¨static ä¿®é¥°çš„ä»£ç å—\n\n\nå¯ä»¥æœ‰è¾“å‡ºè¯­å¥ã€‚\nå¯ä»¥å¯¹ç±»çš„å±æ€§ã€ç±»çš„å£°æ˜è¿›è¡Œåˆå§‹åŒ–æ“ä½œã€‚\nä¸å¯ä»¥å¯¹éé™æ€çš„å±æ€§åˆå§‹åŒ–ã€‚å³ï¼šä¸å¯ä»¥è°ƒç”¨éé™æ€çš„å±æ€§å’Œæ–¹æ³•ã€‚\nè‹¥æœ‰å¤šä¸ªé™æ€çš„ä»£ç å—ï¼Œé‚£ä¹ˆæŒ‰ç…§ä»ä¸Šåˆ°ä¸‹çš„é¡ºåºä¾æ¬¡æ‰§è¡Œã€‚\né™æ€ä»£ç å—çš„æ‰§è¡Œè¦å…ˆäºéé™æ€ä»£ç å—ã€‚\né™æ€ä»£ç å—éšç€ç±»çš„åŠ è½½è€ŒåŠ è½½ï¼Œä¸”åªæ‰§è¡Œä¸€æ¬¡ã€‚\n\n\néé™æ€ä»£ç å—ï¼šæ²¡æœ‰staticä¿®é¥°çš„ä»£ç å—\n\n\nå¯ä»¥æœ‰è¾“å‡ºè¯­å¥ã€‚\nå¯ä»¥å¯¹ç±»çš„å±æ€§ã€ç±»çš„å£°æ˜è¿›è¡Œåˆå§‹åŒ–æ“ä½œã€‚\né™¤äº†è°ƒç”¨éé™æ€çš„ç»“æ„å¤–ï¼Œè¿˜å¯ä»¥è°ƒç”¨é™æ€çš„å˜é‡æˆ–æ–¹æ³•ã€‚\nè‹¥æœ‰å¤šä¸ªéé™æ€çš„ä»£ç å—ï¼Œé‚£ä¹ˆæŒ‰ç…§ä»ä¸Šåˆ°ä¸‹çš„é¡ºåºä¾æ¬¡æ‰§è¡Œã€‚\næ¯æ¬¡åˆ›å»ºå¯¹è±¡çš„æ—¶å€™ï¼Œéƒ½ä¼šæ‰§è¡Œä¸€æ¬¡ã€‚ä¸”å…ˆäºæ„é€ å™¨æ‰§è¡Œã€‚\n\nâ­ç¨‹åºä¸­æˆå‘˜å˜é‡èµ‹å€¼çš„æ‰§è¡Œé¡ºåº\n\nå£°æ˜æˆå‘˜å˜é‡çš„é»˜è®¤åˆå§‹åŒ–\næ˜¾å¼åˆå§‹åŒ–ã€å¤šä¸ªåˆå§‹åŒ–å—ä¾æ¬¡è¢«æ‰§è¡Œï¼ˆåŒçº§åˆ«ä¸‹æŒ‰å…ˆåé¡ºåºæ‰§è¡Œï¼‰\næ„é€ å™¨å†å¯¹æˆå‘˜è¿›è¡Œåˆå§‹åŒ–æ“ä½œ\né€šè¿‡â€å¯¹è±¡.å±æ€§â€æˆ–â€å¯¹è±¡.æ–¹æ³•â€çš„æ–¹å¼ï¼Œå¯å¤šæ¬¡ç»™å±æ€§èµ‹å€¼\n\né‡è½½ overloadåœ¨åŒä¸€ä¸ªç±»ä¸­ï¼Œå…è®¸å­˜åœ¨ä¸€ä¸ªä»¥ä¸Šçš„==åŒåæ–¹æ³•==ï¼Œåªè¦å®ƒä»¬çš„==å‚æ•°ä¸ªæ•°æˆ–è€…å‚æ•°ç±»å‹==ä¸åŒå³å¯ã€‚\n==ä¸è¿”å›å€¼ç±»å‹æ— å…³==ï¼Œåªçœ‹å‚æ•°åˆ—è¡¨ï¼Œä¸”å‚æ•°åˆ—è¡¨å¿…é¡»ä¸åŒã€‚(å‚æ•°ä¸ªæ•°æˆ–å‚æ•°ç±»å‹)ã€‚è°ƒç”¨æ—¶ï¼Œæ ¹æ®æ–¹æ³•å‚æ•°åˆ—è¡¨çš„ä¸åŒæ¥åŒºåˆ«ã€‚\n//è¿”å›ä¸¤ä¸ªæ•´æ•°çš„å’Œ\nint add(int x,int y){return x+y;}\n//è¿”å›ä¸‰ä¸ªæ•´æ•°çš„å’Œ\nint add(int x,int y,int z){return x+y+z;} \n//è¿”å›ä¸¤ä¸ªå°æ•°çš„å’Œ\ndouble add(double x,double y){return x+y;}\nå¯å˜ä¸ªæ•°çš„å½¢å‚public static void test(int a ,Stringâ€¦books);\n\nå¯å˜å‚æ•°ï¼šæ–¹æ³•å‚æ•°éƒ¨åˆ†æŒ‡å®šç±»å‹çš„å‚æ•°ä¸ªæ•°æ˜¯å¯å˜å¤šä¸ªï¼š0ä¸ªï¼Œ1ä¸ªæˆ–å¤šä¸ª\nå¯å˜ä¸ªæ•°å½¢å‚çš„æ–¹æ³•ä¸åŒåçš„æ–¹æ³•ä¹‹é—´ï¼Œå½¼æ­¤æ„æˆé‡è½½\nå¯å˜å‚æ•°æ–¹æ³•çš„ä½¿ç”¨ä¸æ–¹æ³•å‚æ•°éƒ¨åˆ†ä½¿ç”¨æ•°ç»„æ˜¯ä¸€è‡´çš„\næ–¹æ³•çš„å‚æ•°éƒ¨åˆ†æœ‰å¯å˜å½¢å‚ï¼Œéœ€è¦æ”¾åœ¨å½¢å‚å£°æ˜çš„æœ€å\nåœ¨ä¸€ä¸ªæ–¹æ³•çš„å½¢å‚ä½ç½®ï¼Œæœ€å¤šåªèƒ½å£°æ˜ä¸€ä¸ªå¯å˜ä¸ªæ•°å½¢å‚\n\næ–¹æ³•å‚æ•°çš„å€¼ä¼ é€’æœºåˆ¶ïƒ˜    å½¢å‚ï¼šæ–¹æ³•å£°æ˜æ—¶çš„å‚æ•°ïƒ˜    å®å‚ï¼šæ–¹æ³•è°ƒç”¨æ—¶å®é™…ä¼ ç»™å½¢å‚çš„å‚æ•°å€¼\nJavaé‡Œæ–¹æ³•çš„å‚æ•°ä¼ é€’æ–¹å¼åªæœ‰ä¸€ç§ï¼šå€¼ä¼ é€’ã€‚ å³å°†å®é™…å‚æ•°å€¼çš„å‰¯æœ¬ï¼ˆå¤åˆ¶å“ï¼‰ä¼ å…¥æ–¹æ³•å†…ï¼Œè€Œå‚æ•°æœ¬èº«ä¸å—å½±å“ã€‚\nïƒ˜    å½¢å‚æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ï¼šå°†å®å‚åŸºæœ¬æ•°æ®ç±»å‹å˜é‡çš„â€œæ•°æ®å€¼â€ä¼ é€’ç»™å½¢å‚ïƒ˜    å½¢å‚æ˜¯å¼•ç”¨æ•°æ®ç±»å‹ï¼šå°†å®å‚å¼•ç”¨æ•°æ®ç±»å‹å˜é‡çš„â€œåœ°å€å€¼â€ä¼ é€’ç»™å½¢å‚\nint[] arr = new int[10];\nSystem.out.println(arr);//åœ°å€å€¼\nchar[] arr1 = new char[10]; System.out.println(arr1); //å†…å®¹\n//æºç è§£æ\npublic void println(Object x) {\n    String s = String.valueOf(x);\n    synchronized (this) {\n        print(s);\n        newLine();\n    }\n}\npublic void println(char x[]) {\n    synchronized (this) {\n        print(x);\n        newLine();\n    }\n}\næ„é€ å™¨ (æˆ–æ„é€ æ–¹æ³•)æ„é€ å™¨çš„ç‰¹å¾\n\nå®ƒå…·æœ‰ä¸ç±»ç›¸åŒçš„åç§°\nå®ƒä¸å£°æ˜è¿”å›å€¼ç±»å‹ã€‚ï¼ˆä¸å£°æ˜ä¸ºvoidä¸åŒï¼‰\nä¸èƒ½è¢«staticã€finalã€synchronizedã€abstractã€nativeä¿®é¥°ï¼Œä¸èƒ½æœ‰returnè¯­å¥è¿”å›å€¼\n\næ„é€ å™¨çš„ä½œç”¨ï¼šåˆ›å»ºå¯¹è±¡ï¼›ç»™å¯¹è±¡è¿›è¡Œåˆå§‹åŒ–\n\nå¦‚ï¼šOrder o = new Order();    Person p = new Person(â€œPeterâ€,15);\nå¦‚åŒæˆ‘ä»¬è§„å®šæ¯ä¸ªâ€œäººâ€ä¸€å‡ºç”Ÿå°±å¿…é¡»å…ˆæ´—æ¾¡ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨â€œäººâ€çš„æ„é€ å™¨ä¸­åŠ å…¥å®Œæˆâ€œæ´—æ¾¡â€çš„ç¨‹åºä»£ç ï¼Œäºæ˜¯æ¯ä¸ªâ€œäººâ€ä¸€å‡ºç”Ÿå°±ä¼šè‡ªåŠ¨å®Œæˆâ€œæ´—æ¾¡â€ï¼Œç¨‹åºå°±ä¸å¿…å†åœ¨æ¯ä¸ªäººåˆšå‡ºç”Ÿæ—¶ä¸€ä¸ªä¸€ä¸ªåœ°å‘Šè¯‰ä»–ä»¬è¦â€œæ´—æ¾¡â€äº†ã€‚\n\n// è¯­æ³•æ ¼å¼ï¼š\nä¿®é¥°ç¬¦ ç±»å (å‚æ•°åˆ—è¡¨) {\n    åˆå§‹åŒ–è¯­å¥;\n}\næ ¹æ®å‚æ•°ä¸åŒï¼Œæ„é€ å™¨å¯ä»¥åˆ†ä¸ºå¦‚ä¸‹ä¸¤ç±»ï¼šïƒ˜    éšå¼æ— å‚æ„é€ å™¨ï¼ˆç³»ç»Ÿé»˜è®¤æä¾›ï¼‰ïƒ˜    æ˜¾å¼å®šä¹‰ä¸€ä¸ªæˆ–å¤šä¸ªæ„é€ å™¨ï¼ˆæ— å‚ã€æœ‰å‚ï¼‰æ³¨ æ„ï¼šïƒ˜    Javaè¯­è¨€ä¸­ï¼Œæ¯ä¸ªç±»éƒ½è‡³å°‘æœ‰ä¸€ä¸ªæ„é€ å™¨ïƒ˜    é»˜è®¤æ„é€ å™¨çš„ä¿®é¥°ç¬¦ä¸æ‰€å±ç±»çš„ä¿®é¥°ç¬¦ä¸€è‡´ïƒ˜    ä¸€æ—¦æ˜¾å¼å®šä¹‰äº†æ„é€ å™¨ï¼Œåˆ™ç³»ç»Ÿä¸å†æä¾›é»˜è®¤æ„é€ å™¨ïƒ˜    ä¸€ä¸ªç±»å¯ä»¥åˆ›å»ºå¤šä¸ªé‡è½½çš„æ„é€ å™¨ïƒ˜    çˆ¶ç±»çš„æ„é€ å™¨ä¸å¯è¢«å­ç±»ç»§æ‰¿\næ„é€ å™¨é‡è½½\næ„é€ å™¨é‡è½½ä½¿å¾—å¯¹è±¡çš„åˆ›å»ºæ›´åŠ çµæ´»ï¼Œæ–¹ä¾¿åˆ›å»ºå„ç§ä¸åŒçš„å¯¹è±¡ã€‚\n// æ„é€ å™¨é‡è½½ä¸¾ä¾‹ï¼š\npublic class Person{\n    public Person(String name, int age, Date d) {this(name,age);â€¦} \n    public Person(String name, int age) {â€¦}\n    public Person(String name, Date d) {â€¦}\n    public Person(){â€¦}\n}\nå…³é”®å­—â€”thisïƒ˜    å®ƒåœ¨æ–¹æ³•å†…éƒ¨ä½¿ç”¨ï¼Œå³è¿™ä¸ªæ–¹æ³•æ‰€å±å¯¹è±¡çš„å¼•ç”¨ï¼›ïƒ˜    å®ƒåœ¨æ„é€ å™¨å†…éƒ¨ä½¿ç”¨ï¼Œè¡¨ç¤ºè¯¥æ„é€ å™¨æ­£åœ¨åˆå§‹åŒ–çš„å¯¹è±¡ã€‚\nthis å¯ä»¥è°ƒç”¨ç±»çš„å±æ€§ã€æ–¹æ³•å’Œæ„é€ å™¨\nä»€ä¹ˆæ—¶å€™ä½¿ç”¨thiså…³é”®å­—å‘¢ï¼Ÿïƒ˜    å½“åœ¨æ–¹æ³•å†…éœ€è¦ç”¨åˆ°è°ƒç”¨è¯¥æ–¹æ³•çš„å¯¹è±¡æ—¶ï¼Œå°±ç”¨thisã€‚å…·ä½“çš„ï¼šæˆ‘ä»¬å¯ä»¥ç”¨thisæ¥åŒºåˆ†å±æ€§å’Œå±€éƒ¨å˜é‡ã€‚æ¯”å¦‚ï¼šthis.name = name;\nâ­thiså¯ä»¥ä½œä¸ºä¸€ä¸ªç±»ä¸­æ„é€ å™¨ç›¸äº’è°ƒç”¨çš„ç‰¹æ®Šæ ¼å¼\nclass Person{\n    //å®šä¹‰Personç±»\n    private String name ;\n    private int age ;\n    public Person(){\n        //æ— å‚æ„é€ å™¨\n        System.out.println(\"æ–°å¯¹è±¡å®ä¾‹åŒ–\");\n    }\n    public Person(String name ){\n        this(); //è°ƒç”¨æœ¬ç±»ä¸­çš„æ— å‚æ„é€ å™¨\n        this.name = name ;\n    }\n    public Person(String name,int age){\n        this(name); // è°ƒç”¨æœ‰ä¸€ä¸ªå‚æ•°çš„æ„é€ å™¨\n        this.age = age;\n    }\n    public String getInfo(){\n    return \"å§“å: \"+name+\"ï¼Œå¹´é¾„:\"+age;\n    }\n}\n\nïƒ˜    å¯ä»¥åœ¨ç±»çš„æ„é€ å™¨ä¸­ä½¿ç”¨â€this(å½¢å‚åˆ—è¡¨)â€çš„æ–¹å¼ï¼Œè°ƒç”¨æœ¬ç±»ä¸­é‡è½½çš„å…¶ä»–çš„æ„é€ å™¨ï¼ïƒ˜    æ˜ç¡®ï¼šæ„é€ å™¨ä¸­ä¸èƒ½é€šè¿‡â€this(å½¢å‚åˆ—è¡¨)â€çš„æ–¹å¼è°ƒç”¨è‡ªèº«æ„é€ å™¨ïƒ˜    å¦‚æœä¸€ä¸ªç±»ä¸­å£°æ˜äº†nä¸ªæ„é€ å™¨ï¼Œåˆ™æœ€å¤šæœ‰ n - 1ä¸ªæ„é€ å™¨ä¸­ä½¿ç”¨äº†â€this(å½¢å‚åˆ—è¡¨)â€ïƒ˜    â€œthis(å½¢å‚åˆ—è¡¨)â€å¿…é¡»å£°æ˜åœ¨ç±»çš„æ„é€ å™¨çš„é¦–è¡Œï¼ïƒ˜    åœ¨ç±»çš„ä¸€ä¸ªæ„é€ å™¨ä¸­ï¼Œæœ€å¤šåªèƒ½å£°æ˜ä¸€ä¸ªâ€this(å½¢å‚åˆ—è¡¨)â€\nå°è£…ä¸éšè—ïƒ˜    é«˜å†…èš ï¼šç±»çš„å†…éƒ¨æ•°æ®æ“ä½œç»†èŠ‚è‡ªå·±å®Œæˆï¼Œä¸å…è®¸å¤–éƒ¨å¹²æ¶‰ï¼›ïƒ˜    ä½è€¦åˆ ï¼šä»…å¯¹å¤–æš´éœ²å°‘é‡çš„æ–¹æ³•ç”¨äºä½¿ç”¨ã€‚\néšè—å¯¹è±¡å†…éƒ¨çš„å¤æ‚æ€§ï¼Œåªå¯¹å¤–å…¬å¼€ç®€å•çš„æ¥å£ã€‚ä¾¿äºå¤–ç•Œè°ƒç”¨ï¼Œä»è€Œæé«˜ç³»ç»Ÿçš„å¯æ‰©å±•æ€§ã€å¯ç»´æŠ¤æ€§ã€‚é€šä¿—çš„è¯´ï¼ŒæŠŠè¯¥éšè—çš„éšè—èµ·æ¥ï¼Œè¯¥æš´éœ²çš„æš´éœ²å‡ºæ¥ã€‚è¿™å°±æ˜¯å°è£…æ€§çš„è®¾è®¡æ€æƒ³ã€‚\nJavaä¸­é€šè¿‡å°†æ•°æ®å£°æ˜ä¸ºç§æœ‰çš„(private)ï¼Œå†æä¾›å…¬å…±çš„ï¼ˆpublicï¼‰æ–¹æ³•:getXxx()å’ŒsetXxx()å®ç°å¯¹è¯¥å±æ€§çš„æ“ä½œï¼Œä»¥å®ç°ä¸‹è¿°ç›®çš„ï¼š\nïƒ˜    éšè—ä¸€ä¸ªç±»ä¸­ä¸éœ€è¦å¯¹å¤–æä¾›çš„å®ç°ç»†èŠ‚ï¼›ïƒ˜    ä½¿ç”¨è€…åªèƒ½é€šè¿‡äº‹å…ˆå®šåˆ¶å¥½çš„æ–¹æ³•æ¥è®¿é—®æ•°æ®ï¼Œå¯ä»¥æ–¹ä¾¿åœ°åŠ å…¥æ§åˆ¶é€»è¾‘ï¼Œé™åˆ¶å¯¹å±æ€§çš„ä¸åˆç†æ“ä½œï¼›ïƒ˜    ä¾¿äºä¿®æ”¹ï¼Œå¢å¼ºä»£ç çš„å¯ç»´æŠ¤æ€§ï¼›\n\n\n\n\nä¿®é¥°ç¬¦\nç±»å†…éƒ¨\nåŒä¸€ä¸ªåŒ…\nä¸åŒåŒ…çš„å­ç±»\nåŒä¸€ä¸ªå·¥ç¨‹\n\n\n\n\nprivate\nâˆš\n\n\n\n\n\n(ç¼ºçœ)\nâˆš\nâˆš\n\n\n\n\nprotected\nâˆš\nâˆš\nâˆš\n\n\n\npublic\nâˆš\nâˆš\nâˆš\nâˆš\n\n\n\n\nåŒ…(package)çš„ç®¡ç†ä¸ä½œç”¨packageè¯­å¥ä½œä¸ºJavaæºæ–‡ä»¶çš„ç¬¬ä¸€æ¡è¯­å¥ï¼ŒæŒ‡æ˜è¯¥æ–‡ä»¶ä¸­å®šä¹‰çš„ç±»æ‰€åœ¨çš„åŒ…ã€‚(è‹¥ç¼ºçœè¯¥è¯­å¥ï¼Œåˆ™æŒ‡å®šä¸ºæ— ååŒ…)ã€‚å®ƒçš„æ ¼å¼ä¸ºï¼špackage é¡¶å±‚åŒ…å.å­åŒ…å ;\n//ä¸¾ä¾‹ï¼špack1\\pack2\\PackageTest.java\npackage pack1.pack2;    //æŒ‡å®šç±»PackageTestå±äºåŒ…pack1.pack2 \n\npublic class PackageTest{\n    public void display(){\n        System.out.println(\"in  method display()\");\n    }\n}\nï¬    åŒ…å¯¹åº”äºæ–‡ä»¶ç³»ç»Ÿçš„ç›®å½•ï¼Œpackageè¯­å¥ä¸­ï¼Œç”¨ â€œ.â€ æ¥æŒ‡æ˜åŒ…(ç›®å½•)çš„å±‚æ¬¡ï¼›ï¬    åŒ…é€šå¸¸ç”¨å°å†™å•è¯æ ‡è¯†ã€‚é€šå¸¸ä½¿ç”¨æ‰€åœ¨å…¬å¸åŸŸåçš„å€’ç½®ï¼šcom.atguigu.xxx\nåŒ…çš„ä½œç”¨ï¼š\nï¬    åŒ…å¸®åŠ©ç®¡ç†å¤§å‹è½¯ä»¶ç³»ç»Ÿï¼šå°†åŠŸèƒ½ç›¸è¿‘çš„ç±»åˆ’åˆ†åˆ°åŒä¸€ä¸ªåŒ…ä¸­ã€‚æ¯”å¦‚ï¼šMVCçš„è®¾è®¡æ¨¡å¼ï¬    åŒ…å¯ä»¥åŒ…å«ç±»å’Œå­åŒ…ï¼Œåˆ’åˆ†é¡¹ç›®å±‚æ¬¡ï¼Œä¾¿äºç®¡ç†ï¬    è§£å†³ç±»å‘½åå†²çªçš„é—®é¢˜ï¬    æ§åˆ¶è®¿é—®æƒé™\n\n\n\n\n\nJDKä¸­ä¸»è¦çš„åŒ…ä»‹ç»\n\n\n\n\njava.lang\nåŒ…å«ä¸€äº›Javaè¯­è¨€çš„æ ¸å¿ƒç±»ï¼Œå¦‚Stringã€Mathã€Integerã€ Systemå’ŒThreadï¼Œæä¾›å¸¸ç”¨åŠŸèƒ½\n\n\njava.net\nåŒ…å«æ‰§è¡Œä¸ç½‘ç»œç›¸å…³çš„æ“ä½œçš„ç±»å’Œæ¥å£\n\n\njava.io\nåŒ…å«èƒ½æä¾›å¤šç§è¾“å…¥/è¾“å‡ºåŠŸèƒ½çš„ç±»\n\n\njava.util\nåŒ…å«ä¸€äº›å®ç”¨å·¥å…·ç±»ï¼Œå¦‚å®šä¹‰ç³»ç»Ÿç‰¹æ€§ã€æ¥å£çš„é›†åˆæ¡†æ¶ç±»ã€ä½¿ç”¨ä¸æ—¥æœŸæ—¥å†ç›¸å…³çš„å‡½æ•°\n\n\njava.text\nåŒ…å«äº†ä¸€äº›javaæ ¼å¼åŒ–ç›¸å…³çš„ç±»\n\n\njava.sql\nåŒ…å«äº†javaè¿›è¡ŒJDBCæ•°æ®åº“ç¼–ç¨‹çš„ç›¸å…³ç±»/æ¥å£\n\n\njava.awt\nåŒ…å«äº†æ„æˆæŠ½è±¡çª—å£å·¥å…·é›†ï¼ˆabstract window toolkitsï¼‰çš„å¤šä¸ªç±»ï¼Œè¿™äº›ç±»è¢«ç”¨æ¥æ„å»ºå’Œç®¡ç†åº”ç”¨ç¨‹åºçš„å›¾å½¢ç”¨æˆ·ç•Œé¢(GUI)\n\n\n\n\nç»§æ‰¿ (inheritance)å¤šä¸ªç±»ä¸­å­˜åœ¨ç›¸åŒå±æ€§å’Œè¡Œä¸ºæ—¶ï¼Œå°†è¿™äº›å†…å®¹æŠ½å–åˆ°å•ç‹¬ä¸€ä¸ªç±»ä¸­ï¼Œé‚£ä¹ˆå¤šä¸ªç±»æ— éœ€å†å®šä¹‰è¿™äº›å±æ€§å’Œè¡Œä¸ºï¼Œåªè¦ç»§æ‰¿é‚£ä¸ªç±»å³å¯ã€‚\nï¬    æ­¤å¤„çš„å¤šä¸ªç±»ç§°ä¸ºå­ç±»(æ´¾ç”Ÿç±»)ï¼Œå•ç‹¬çš„è¿™ä¸ªç±»ç§°ä¸ºçˆ¶ç±»(åŸºç±»æˆ–è¶…ç±»)ã€‚å¯ä»¥ç†è§£ä¸º:â€œå­ç±» is a çˆ¶ç±»â€\n// ç±»ç»§æ‰¿è¯­æ³•è§„åˆ™:\nclass Subclass extends SuperClass{ }\nä½œç”¨ï¼šïƒ˜    ç»§æ‰¿çš„å‡ºç°å‡å°‘äº†ä»£ç å†—ä½™ï¼Œæé«˜äº†ä»£ç çš„å¤ç”¨æ€§ã€‚ïƒ˜    ç»§æ‰¿çš„å‡ºç°ï¼Œæ›´æœ‰åˆ©äºåŠŸèƒ½çš„æ‰©å±•ã€‚ïƒ˜    ç»§æ‰¿çš„å‡ºç°è®©ç±»ä¸ç±»ä¹‹é—´äº§ç”Ÿäº†å…³ç³»ï¼Œæä¾›äº†å¤šæ€çš„å‰æã€‚\n\nå­ç±»ç»§æ‰¿äº†çˆ¶ç±»ï¼Œå°±ç»§æ‰¿äº†çˆ¶ç±»çš„æ–¹æ³•å’Œå±æ€§ã€‚\nåœ¨å­ç±»ä¸­ï¼Œå¯ä»¥ä½¿ç”¨çˆ¶ç±»ä¸­å®šä¹‰çš„æ–¹æ³•å’Œå±æ€§ï¼Œä¹Ÿå¯ä»¥åˆ›å»ºæ–°çš„æ•°æ®å’Œæ–¹æ³•ã€‚\nåœ¨Java ä¸­ï¼Œç»§æ‰¿çš„å…³é”®å­—ç”¨çš„æ˜¯â€œextendsâ€ï¼Œå³å­ç±»ä¸æ˜¯çˆ¶ç±»çš„å­é›†ï¼Œè€Œæ˜¯å¯¹çˆ¶ç±»çš„â€œæ‰©å±•â€ã€‚\n\nå…³äºç»§æ‰¿çš„è§„åˆ™ï¼š\n\nå­ç±»ä¸èƒ½ç›´æ¥è®¿é—®çˆ¶ç±»ä¸­ç§æœ‰çš„(private)çš„æˆå‘˜å˜é‡å’Œæ–¹æ³•ã€‚\nâ­Javaåªæ”¯æŒå•ç»§æ‰¿å’Œå¤šå±‚ç»§æ‰¿ï¼Œä¸å…è®¸å¤šé‡ç»§æ‰¿\n\næ–¹æ³•çš„é‡å†™ (override/overwrite)å®šä¹‰ï¼šåœ¨å­ç±»ä¸­å¯ä»¥æ ¹æ®éœ€è¦å¯¹ä»çˆ¶ç±»ä¸­ç»§æ‰¿æ¥çš„æ–¹æ³•è¿›è¡Œæ”¹é€ ï¼Œä¹Ÿç§°ä¸ºæ–¹æ³•çš„é‡ç½®ã€è¦†ç›–ã€‚åœ¨ç¨‹åºæ‰§è¡Œæ—¶ï¼Œå­ç±»çš„æ–¹æ³•å°†è¦†ç›–çˆ¶ç±»çš„æ–¹æ³•ã€‚\nè¦æ±‚ï¼š\n\nå­ç±»é‡å†™çš„æ–¹æ³•å¿…é¡»å’Œçˆ¶ç±»è¢«é‡å†™çš„æ–¹æ³•å…·æœ‰ç›¸åŒçš„æ–¹æ³•åç§°ã€å‚æ•°åˆ—è¡¨\nå­ç±»é‡å†™çš„æ–¹æ³•çš„è¿”å›å€¼ç±»å‹ä¸èƒ½å¤§äºçˆ¶ç±»è¢«é‡å†™çš„æ–¹æ³•çš„è¿”å›å€¼ç±»å‹\nå­ç±»é‡å†™çš„æ–¹æ³•ä½¿ç”¨çš„è®¿é—®æƒé™ä¸èƒ½å°äºçˆ¶ç±»è¢«é‡å†™çš„æ–¹æ³•çš„è®¿é—®æƒé™ïƒ˜    å­ç±»ä¸èƒ½é‡å†™çˆ¶ç±»ä¸­å£°æ˜ä¸ºprivateæƒé™çš„æ–¹æ³•\nå­ç±»æ–¹æ³•æŠ›å‡ºçš„å¼‚å¸¸ä¸èƒ½å¤§äºçˆ¶ç±»è¢«é‡å†™æ–¹æ³•çš„å¼‚å¸¸\nå­ç±»ä¸çˆ¶ç±»ä¸­åŒååŒå‚æ•°çš„æ–¹æ³•å¿…é¡»åŒæ—¶å£°æ˜ä¸ºéstaticçš„(å³ä¸ºé‡å†™)ï¼Œæˆ–è€…åŒæ—¶å£°æ˜ä¸ºstaticçš„ï¼ˆä¸æ˜¯é‡å†™ï¼‰ã€‚å› ä¸ºstaticæ–¹æ³•æ˜¯å±äºç±»çš„ï¼Œå­ç±»æ— æ³•è¦†ç›–çˆ¶ç±»çš„æ–¹æ³•ã€‚\n\nå­ç±»ç»§æ‰¿çˆ¶ç±»\nïƒ˜    è‹¥å­ç±»é‡å†™äº†çˆ¶ç±»æ–¹æ³•ï¼Œå°±æ„å‘³ç€å­ç±»é‡Œå®šä¹‰çš„æ–¹æ³•å½»åº•è¦†ç›–äº†çˆ¶ç±»é‡Œçš„åŒåæ–¹æ³•ï¼Œç³»ç»Ÿå°†ä¸å¯èƒ½æŠŠçˆ¶ç±»é‡Œçš„æ–¹æ³•è½¬ç§»åˆ°å­ç±»ä¸­ã€‚ïƒ˜    å¯¹äºå®ä¾‹å˜é‡åˆ™ä¸å­˜åœ¨è¿™æ ·çš„ç°è±¡ï¼Œå³ä½¿å­ç±»é‡Œå®šä¹‰äº†ä¸çˆ¶ç±»å®Œå…¨ç›¸åŒçš„å®ä¾‹å˜é‡ï¼Œè¿™ä¸ªå®ä¾‹å˜é‡ä¾ç„¶ä¸å¯èƒ½è¦†ç›–çˆ¶ç±»ä¸­å®šä¹‰çš„å®ä¾‹å˜é‡\nå…³é”®å­—â€”superåœ¨Javaç±»ä¸­ä½¿ç”¨superæ¥è°ƒç”¨çˆ¶ç±»ä¸­çš„æŒ‡å®šæ“ä½œï¼š\n\nsuperå¯ç”¨äºè®¿é—®çˆ¶ç±»ä¸­å®šä¹‰çš„å±æ€§\nsuperå¯ç”¨äºè°ƒç”¨çˆ¶ç±»ä¸­å®šä¹‰çš„æˆå‘˜æ–¹æ³•\nsuperå¯ç”¨äºåœ¨å­ç±»æ„é€ å™¨ä¸­è°ƒç”¨çˆ¶ç±»çš„æ„é€ å™¨\nå°¤å…¶å½“å­çˆ¶ç±»å‡ºç°åŒåæˆå‘˜æ—¶ï¼Œå¯ä»¥ç”¨superè¡¨æ˜è°ƒç”¨çš„æ˜¯çˆ¶ç±»ä¸­çš„æˆå‘˜\nsuperçš„è¿½æº¯ä¸ä»…é™äºç›´æ¥çˆ¶ç±»\nsuperå’Œthisçš„ç”¨æ³•ç›¸åƒï¼Œthisä»£è¡¨æœ¬ç±»å¯¹è±¡çš„å¼•ç”¨ï¼Œsuperä»£è¡¨çˆ¶ç±»çš„å†…å­˜ç©ºé—´çš„æ ‡è¯†\n\nè°ƒç”¨çˆ¶ç±»çš„æ„é€ å™¨\nï¬    å­ç±»ä¸­æ‰€æœ‰çš„æ„é€ å™¨é»˜è®¤éƒ½ä¼šè®¿é—®çˆ¶ç±»ä¸­ç©ºå‚æ•°çš„æ„é€ å™¨ï¬    å½“çˆ¶ç±»ä¸­æ²¡æœ‰ç©ºå‚æ•°çš„æ„é€ å™¨æ—¶ï¼Œå­ç±»çš„æ„é€ å™¨å¿…é¡»é€šè¿‡this(å‚æ•°åˆ—è¡¨)æˆ–è€…super(å‚æ•°åˆ—è¡¨)è¯­å¥æŒ‡å®šè°ƒç”¨æœ¬ç±»æˆ–è€…çˆ¶ç±»ä¸­ç›¸åº”çš„æ„é€ å™¨ã€‚åŒæ—¶ï¼Œåªèƒ½â€äºŒé€‰ä¸€â€ï¼Œä¸”å¿…é¡»æ”¾åœ¨æ„é€ å™¨çš„é¦–è¡Œï¬    å¦‚æœå­ç±»æ„é€ å™¨ä¸­æ—¢æœªæ˜¾å¼è°ƒç”¨çˆ¶ç±»æˆ–æœ¬ç±»çš„æ„é€ å™¨ï¼Œä¸”çˆ¶ç±»ä¸­åˆæ²¡æœ‰æ— å‚çš„æ„é€ å™¨ï¼Œåˆ™ç¼–è¯‘å‡ºé”™\n\n\n\n\nNo.\nåŒºåˆ«ç‚¹\nthis\nsuper\n\n\n\n\n1\nè®¿é—®å±æ€§\nè®¿é—®æœ¬ç±»ä¸­çš„å±æ€§ï¼Œå¦‚æœæœ¬ç±»æ²¡æœ‰æ­¤å±æ€§åˆ™ä»çˆ¶ç±»ä¸­ç»§ç»­æŸ¥æ‰¾\nç›´æ¥è®¿é—®çˆ¶ç±»ä¸­çš„å±æ€§\n\n\n2\nè°ƒç”¨æ–¹æ³•\nè®¿é—®æœ¬ç±»ä¸­çš„æ–¹æ³•ï¼Œå¦‚æœæœ¬ç±»æ²¡æœ‰æ­¤æ–¹æ³•åˆ™ä»çˆ¶ç±»ä¸­ç»§ç»­æŸ¥æ‰¾\nç›´æ¥è®¿é—®çˆ¶ç±»ä¸­çš„æ–¹æ³•\n\n\n3\nè°ƒç”¨æ„é€ å™¨\nè°ƒç”¨æœ¬ç±»æ„é€ å™¨ï¼Œå¿…é¡»æ”¾åœ¨æ„é€ å™¨çš„é¦–è¡Œ\nè°ƒç”¨çˆ¶ç±»æ„é€ å™¨ï¼Œå¿…é¡»æ”¾åœ¨å­ç±»æ„é€ å™¨çš„é¦–è¡Œ\n\n\n\n\nå­ç±»å¯¹è±¡çš„å®ä¾‹åŒ–è¿‡ç¨‹\nå¤šæ€æ€§å¯¹è±¡çš„å¤šæ€æ€§ï¼šçˆ¶ç±»çš„å¼•ç”¨æŒ‡å‘å­ç±»çš„å¯¹è±¡\nJavaå¼•ç”¨å˜é‡æœ‰ä¸¤ä¸ªç±»å‹ï¼š\n\nç¼–è¯‘æ—¶ç±»å‹ï¼šç”±å£°æ˜è¯¥å˜é‡æ—¶ä½¿ç”¨çš„ç±»å‹å†³å®šã€‚\nè¿è¡Œæ—¶ç±»å‹ï¼šç”±å®é™…èµ‹ç»™è¯¥å˜é‡çš„å¯¹è±¡å†³å®šã€‚\n\n\nç¼–è¯‘æ—¶ï¼Œçœ‹å·¦è¾¹ï¼›è¿è¡Œæ—¶ï¼Œçœ‹å³è¾¹ã€‚\nè‹¥ç¼–è¯‘æ—¶ç±»å‹å’Œè¿è¡Œæ—¶ç±»å‹ä¸ä¸€è‡´ï¼Œå°±å‡ºç°äº†å¯¹è±¡çš„å¤šæ€æ€§(Polymorphism)\n\n\n\n\n\n\n\n\n\n\n\nå¤šæ€ä½œç”¨\nïƒ˜    æé«˜äº†ä»£ç çš„é€šç”¨æ€§ï¼Œå¸¸ç§°ä½œæ¥å£é‡ç”¨\n\n\nå‰æ\nïƒ˜    éœ€è¦å­˜åœ¨ç»§æ‰¿æˆ–è€…å®ç°å…³ç³»ïƒ˜    æœ‰æ–¹æ³•çš„é‡å†™\n\n\næˆå‘˜æ–¹æ³•\nïƒ˜    ç¼–è¯‘æ—¶ï¼šè¦æŸ¥çœ‹å¼•ç”¨å˜é‡æ‰€å£°æ˜çš„ç±»ä¸­æ˜¯å¦æœ‰æ‰€è°ƒç”¨çš„æ–¹æ³•ã€‚ïƒ˜    è¿è¡Œæ—¶ï¼šè°ƒç”¨å®é™…newçš„å¯¹è±¡æ‰€å±çš„ç±»ä¸­çš„é‡å†™æ–¹æ³•ã€‚\n\n\næˆå‘˜å˜é‡\nä¸å…·å¤‡å¤šæ€æ€§ï¼Œåªçœ‹å¼•ç”¨å˜é‡æ‰€å£°æ˜çš„ç±»ã€‚\n\n\n\n\nå¯¹è±¡çš„å¤šæ€ï¼šåœ¨Javaä¸­,å­ç±»çš„å¯¹è±¡å¯ä»¥æ›¿ä»£çˆ¶ç±»çš„å¯¹è±¡ä½¿ç”¨ïƒ˜    ä¸€ä¸ªå˜é‡åªèƒ½æœ‰ä¸€ç§ç¡®å®šçš„æ•°æ®ç±»å‹ïƒ˜    ä¸€ä¸ªå¼•ç”¨ç±»å‹å˜é‡å¯èƒ½æŒ‡å‘(å¼•ç”¨)å¤šç§ä¸åŒç±»å‹çš„å¯¹è±¡\n\nå­ç±»å¯çœ‹åšæ˜¯ç‰¹æ®Šçš„çˆ¶ç±»ï¼Œæ‰€ä»¥çˆ¶ç±»ç±»å‹çš„å¼•ç”¨å¯ä»¥æŒ‡å‘å­ç±»çš„å¯¹è±¡ï¼šå‘ä¸Šè½¬å‹(upcasting)ã€‚\n\nä¸€ä¸ªå¼•ç”¨ç±»å‹å˜é‡å¦‚æœå£°æ˜ä¸ºçˆ¶ç±»çš„ç±»å‹ï¼Œä½†å®é™…å¼•ç”¨çš„æ˜¯å­ç±»å¯¹è±¡ï¼Œé‚£ä¹ˆè¯¥å˜é‡å°±==ä¸èƒ½==å†è®¿é—®å­ç±»ä¸­æ·»åŠ çš„å±æ€§å’Œæ–¹æ³•\nè™šæ‹Ÿæ–¹æ³•è°ƒç”¨\nå­ç±»ä¸­å®šä¹‰äº†ä¸çˆ¶ç±»åŒååŒå‚æ•°çš„æ–¹æ³•ï¼Œåœ¨å¤šæ€æƒ…å†µä¸‹ï¼Œå°†æ­¤æ—¶çˆ¶ç±»çš„æ–¹æ³•ç§°ä¸ºè™šæ‹Ÿæ–¹æ³•ï¼Œçˆ¶ç±»æ ¹æ®èµ‹ç»™å®ƒçš„ä¸åŒå­ç±»å¯¹è±¡ï¼ŒåŠ¨æ€è°ƒç”¨å±äºå­ç±»çš„è¯¥æ–¹æ³•ã€‚è¿™æ ·çš„æ–¹æ³•è°ƒç”¨åœ¨ç¼–è¯‘æœŸæ˜¯æ— æ³•ç¡®å®šçš„ã€‚\ninstanceofè¿ç®—ç¬¦x instanceof Aï¼šæ£€éªŒxæ˜¯å¦ä¸ºç±»Açš„å¯¹è±¡ï¼Œè¿”å›å€¼ä¸ºbooleanå‹ã€‚\nå¯¹è±¡ç±»å‹è½¬æ¢\nïƒ˜    ä»å­ç±»åˆ°çˆ¶ç±»çš„ç±»å‹è½¬æ¢å¯ä»¥è‡ªåŠ¨è¿›è¡Œïƒ˜    ä»çˆ¶ç±»åˆ°å­ç±»çš„ç±»å‹è½¬æ¢å¿…é¡»é€šè¿‡é€ å‹(å¼ºåˆ¶ç±»å‹è½¬æ¢)å®ç°ïƒ˜    æ— ç»§æ‰¿å…³ç³»çš„å¼•ç”¨ç±»å‹é—´çš„è½¬æ¢æ˜¯éæ³•çš„ïƒ˜    åœ¨é€ å‹å‰å¯ä»¥ä½¿ç”¨instanceofæ“ä½œç¬¦æµ‹è¯•ä¸€ä¸ªå¯¹è±¡çš„ç±»å‹\nå¯¹è±¡ç±»å‹è½¬æ¢ (Casting )åŸºæœ¬æ•°æ®ç±»å‹çš„Castingï¼š\n\nè‡ªåŠ¨ç±»å‹è½¬æ¢ï¼šå°çš„æ•°æ®ç±»å‹å¯ä»¥è‡ªåŠ¨è½¬æ¢æˆå¤§çš„æ•°æ®ç±»å‹å¦‚long g=20; double d=12.0f\nå¼ºåˆ¶ç±»å‹è½¬æ¢ï¼šå¯ä»¥æŠŠå¤§çš„æ•°æ®ç±»å‹å¼ºåˆ¶è½¬æ¢(casting)æˆå°çš„æ•°æ®ç±»å‹å¦‚ float f=(float)12.0; int a=(int)1200Lï¬    å¯¹Javaå¯¹è±¡çš„å¼ºåˆ¶ç±»å‹è½¬æ¢ç§°ä¸ºé€ å‹ïƒ˜    ä»å­ç±»åˆ°çˆ¶ç±»çš„ç±»å‹è½¬æ¢å¯ä»¥è‡ªåŠ¨è¿›è¡Œïƒ˜    ä»çˆ¶ç±»åˆ°å­ç±»çš„ç±»å‹è½¬æ¢å¿…é¡»é€šè¿‡é€ å‹(å¼ºåˆ¶ç±»å‹è½¬æ¢)å®ç°ïƒ˜    æ— ç»§æ‰¿å…³ç³»çš„å¼•ç”¨ç±»å‹é—´çš„è½¬æ¢æ˜¯éæ³•çš„ïƒ˜    åœ¨é€ å‹å‰å¯ä»¥ä½¿ç”¨instanceofæ“ä½œç¬¦æµ‹è¯•ä¸€ä¸ªå¯¹è±¡çš„ç±»å‹\n\næ–¹æ³•çš„é‡è½½ä¸é‡å†™ä»ç¼–è¯‘å’Œè¿è¡Œçš„è§’åº¦çœ‹ï¼šé‡è½½ï¼Œæ˜¯æŒ‡å…è®¸å­˜åœ¨å¤šä¸ªåŒåæ–¹æ³•ï¼Œè€Œè¿™äº›æ–¹æ³•çš„å‚æ•°ä¸åŒã€‚ç¼–è¯‘å™¨æ ¹æ®æ–¹æ³•ä¸åŒçš„å‚æ•°è¡¨ï¼Œå¯¹åŒåæ–¹æ³•çš„åç§°åšä¿®é¥°ã€‚å¯¹äºç¼–è¯‘å™¨è€Œè¨€ï¼Œè¿™äº›åŒåæ–¹æ³•å°±æˆäº†ä¸åŒçš„æ–¹æ³•ã€‚å®ƒä»¬çš„è°ƒç”¨åœ°å€åœ¨ç¼–è¯‘æœŸå°±ç»‘å®šäº†ã€‚Javaçš„é‡è½½æ˜¯å¯ä»¥åŒ…æ‹¬çˆ¶ç±»å’Œå­ç±»çš„ï¼Œå³å­ç±»å¯ä»¥é‡è½½çˆ¶ç±»çš„åŒåä¸åŒå‚æ•°çš„æ–¹æ³•ã€‚æ‰€ä»¥ï¼šå¯¹äºé‡è½½è€Œè¨€ï¼Œåœ¨æ–¹æ³•è°ƒç”¨ä¹‹å‰ï¼Œç¼–è¯‘å™¨å°±å·²ç»ç¡®å®šäº†æ‰€è¦è°ƒç”¨çš„æ–¹æ³•ï¼Œè¿™ç§°ä¸ºâ€œæ—©ç»‘å®šâ€æˆ–â€œé™æ€ç»‘å®šâ€ï¼›è€Œå¯¹äºå¤šæ€ï¼Œåªæœ‰ç­‰åˆ°æ–¹æ³•è°ƒç”¨çš„é‚£ä¸€åˆ»ï¼Œè§£é‡Šè¿è¡Œå™¨æ‰ä¼šç¡®å®šæ‰€è¦è°ƒç”¨çš„å…·ä½“æ–¹æ³•ï¼Œè¿™ç§°ä¸ºâ€œæ™šç»‘å®šâ€æˆ–â€œåŠ¨æ€ç»‘å®šâ€ã€‚å¼•ç”¨ä¸€å¥Bruce Eckelçš„è¯ï¼šâ€œä¸è¦çŠ¯å‚»ï¼Œå¦‚æœå®ƒä¸æ˜¯æ™šç»‘å®šï¼Œå®ƒå°±ä¸æ˜¯å¤šæ€ã€‚â€\n Objectç±»çš„ç»“æ„ä¸æ–¹æ³•Objectç±»æ˜¯æ‰€æœ‰Javaç±»çš„æ ¹çˆ¶ç±»ï¬    å¦‚æœåœ¨ç±»çš„å£°æ˜ä¸­æœªä½¿ç”¨extendså…³é”®å­—æŒ‡æ˜å…¶çˆ¶ç±»ï¼Œåˆ™é»˜è®¤çˆ¶ç±»ä¸ºjava.lang.Objectç±»\npublic class Person { ...\n}\n//ç­‰ä»·äº\npublic class Person extends Object { ...\n}\n\n\n\n\næ–¹æ³•åç§°\nç±»å‹\næè¿°\n\n\n\n\npublic Object()\næ„é€ \næ„é€ å™¨\n\n\npublic boolean equals(Object obj)\næ™®é€š\nå¯¹è±¡æ¯”è¾ƒ\n\n\npublic int hashCode()\næ™®é€š\nå–å¾—Hashç \n\n\npublic String toString()\næ™®é€š\nå¯¹è±¡æ‰“å°æ—¶è°ƒç”¨\n\n\n\n\n==æ“ä½œç¬¦ä¸equalsæ–¹æ³•åŸºæœ¬ç±»å‹æ¯”è¾ƒå€¼:åªè¦ä¸¤ä¸ªå˜é‡çš„å€¼ç›¸ç­‰ï¼Œå³ä¸ºtrueã€‚\nå¼•ç”¨ç±»å‹æ¯”è¾ƒå¼•ç”¨(æ˜¯å¦æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡)ï¼šåªæœ‰æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œ==æ‰è¿”å›trueã€‚\nç”¨â€œ==â€è¿›è¡Œæ¯”è¾ƒæ—¶ï¼Œç¬¦å·ä¸¤è¾¹çš„æ•°æ®ç±»å‹å¿…é¡»å…¼å®¹(å¯è‡ªåŠ¨è½¬æ¢çš„åŸºæœ¬æ•°æ®ç±»å‹é™¤å¤–)ï¼Œå¦åˆ™ç¼–è¯‘å‡ºé”™\nequals()ï¼šæ‰€æœ‰ç±»éƒ½ç»§æ‰¿äº†Objectï¼Œä¹Ÿå°±è·å¾—äº†equals()æ–¹æ³•ã€‚è¿˜å¯ä»¥é‡å†™ã€‚ïƒ˜    åªèƒ½æ¯”è¾ƒå¼•ç”¨ç±»å‹ï¼Œå…¶ä½œç”¨ä¸â€œ==â€ç›¸åŒ,æ¯”è¾ƒæ˜¯å¦æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ã€‚ïƒ˜    æ ¼å¼:obj1.equals(obj2)ï¬    ç‰¹ä¾‹ï¼šå½“ç”¨equals()æ–¹æ³•è¿›è¡Œæ¯”è¾ƒæ—¶ï¼Œå¯¹ç±»Fileã€Stringã€DateåŠåŒ…è£…ç±»ï¼ˆWrapper Classï¼‰æ¥è¯´ï¼Œæ˜¯æ¯”è¾ƒç±»å‹åŠå†…å®¹è€Œä¸è€ƒè™‘å¼•ç”¨çš„æ˜¯å¦æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼›ïƒ˜    åŸå› ï¼šåœ¨è¿™äº›ç±»ä¸­é‡å†™äº†Objectç±»çš„equals()æ–¹æ³•ã€‚ï¬    å½“è‡ªå®šä¹‰ä½¿ç”¨equals()æ—¶ï¼Œå¯ä»¥é‡å†™ã€‚ç”¨äºæ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡çš„â€œå†…å®¹â€æ˜¯å¦éƒ½ç›¸ç­‰\né‡å†™equals()æ–¹æ³•çš„åŸåˆ™ï¬    å¯¹ç§°æ€§ï¼šå¦‚æœx.equals(y)è¿”å›æ˜¯â€œtrueâ€ï¼Œé‚£ä¹ˆy.equals(x)ä¹Ÿåº”è¯¥è¿”å›æ˜¯ â€œtrueâ€ã€‚ï¬    è‡ªåæ€§ï¼šx.equals(x)å¿…é¡»è¿”å›æ˜¯â€œtrueâ€ã€‚ï¬    ä¼ é€’æ€§ï¼šå¦‚æœx.equals(y)è¿”å›æ˜¯â€œtrueâ€ï¼Œè€Œä¸”y.equals(z)è¿”å›æ˜¯â€œtrueâ€ï¼Œé‚£ä¹ˆz.equals(x)ä¹Ÿåº”è¯¥è¿”å›æ˜¯â€œtrueâ€ã€‚ï¬    ä¸€è‡´æ€§ï¼šå¦‚æœx.equals(y)è¿”å›æ˜¯â€œtrueâ€ï¼Œåªè¦xå’Œyå†…å®¹ä¸€ç›´ä¸å˜ï¼Œä¸ç®¡ä½ é‡å¤x.equals(y)å¤šå°‘æ¬¡ï¼Œè¿”å›éƒ½æ˜¯â€œtrueâ€ã€‚ï¬    ä»»ä½•æƒ…å†µä¸‹ï¼Œx.equals(null)ï¼Œæ°¸è¿œè¿”å›æ˜¯â€œfalseâ€ï¼›x.equals(å’Œxä¸åŒç±»å‹çš„å¯¹è±¡)æ°¸è¿œè¿”å›æ˜¯â€œfalseâ€ã€‚\nâ­é¢è¯•é¢˜ï¼š==å’Œequalsçš„åŒºåˆ«\n== æ—¢å¯ä»¥æ¯”è¾ƒåŸºæœ¬ç±»å‹ä¹Ÿå¯ä»¥æ¯”è¾ƒå¼•ç”¨ç±»å‹ã€‚å¯¹äºåŸºæœ¬ç±»å‹å°±æ˜¯æ¯”è¾ƒå€¼ï¼Œå¯¹äºå¼•ç”¨ç±»å‹å°±æ˜¯æ¯”è¾ƒå†…å­˜åœ°å€\nequalsçš„è¯ï¼Œå®ƒæ˜¯å±äºjava.lang.Objectç±»é‡Œé¢çš„æ–¹æ³•ï¼Œå¦‚æœè¯¥æ–¹æ³•æ²¡æœ‰è¢«é‡å†™è¿‡é»˜è®¤ä¹Ÿæ˜¯==;æˆ‘ä»¬å¯ä»¥çœ‹åˆ°Stringç­‰ç±»çš„equalsæ–¹æ³•æ˜¯è¢«é‡å†™è¿‡çš„ï¼Œè€Œä¸”Stringç±»åœ¨æ—¥å¸¸å¼€å‘ä¸­ç”¨çš„æ¯”è¾ƒå¤šï¼Œä¹…è€Œä¹…ä¹‹ï¼Œå½¢æˆäº†equalsæ˜¯æ¯”è¾ƒå€¼çš„é”™è¯¯è§‚ç‚¹ã€‚\nå…·ä½“è¦çœ‹è‡ªå®šä¹‰ç±»é‡Œæœ‰æ²¡æœ‰é‡å†™Objectçš„equalsæ–¹æ³•æ¥åˆ¤æ–­ã€‚\né€šå¸¸æƒ…å†µä¸‹ï¼Œé‡å†™equalsæ–¹æ³•ï¼Œä¼šæ¯”è¾ƒç±»ä¸­çš„ç›¸åº”å±æ€§æ˜¯å¦éƒ½ç›¸ç­‰ã€‚\n\ntoString() æ–¹æ³•toString()æ–¹æ³•åœ¨Objectç±»ä¸­å®šä¹‰ï¼Œå…¶è¿”å›å€¼æ˜¯Stringç±»å‹ï¼Œè¿”å›ç±»åå’Œå®ƒçš„å¼•ç”¨åœ°å€ã€‚åœ¨è¿›è¡ŒStringä¸å…¶å®ƒç±»å‹æ•°æ®çš„è¿æ¥æ“ä½œæ—¶ï¼Œè‡ªåŠ¨è°ƒç”¨toString()æ–¹æ³•Date now=new Date();\nSystem.out.println(â€œnow=â€+now); //ç›¸å½“äº\nSystem.out.println(â€œnow=â€+now.toString());\nå¯ä»¥æ ¹æ®éœ€è¦åœ¨ç”¨æˆ·è‡ªå®šä¹‰ç±»å‹ä¸­é‡å†™toString()æ–¹æ³•\n//å¦‚String ç±»é‡å†™äº†toString()æ–¹æ³•ï¼Œè¿”å›å­—ç¬¦ä¸²çš„å€¼ã€‚\ns1=â€œhelloâ€;\nSystem.out.println(s1);//ç›¸å½“äºSystem.out.println(s1.toString());\nï¬    åŸºæœ¬ç±»å‹æ•°æ®è½¬æ¢ä¸ºStringç±»å‹æ—¶ï¼Œè°ƒç”¨äº†å¯¹åº”åŒ…è£…ç±»çš„toString()æ–¹æ³•ïƒ˜    int a=10; System.out.println(â€œa=â€+a);\nåŒ…è£…ç±»çš„ä½¿ç”¨ï¬    é’ˆå¯¹å…«ç§åŸºæœ¬æ•°æ®ç±»å‹å®šä¹‰ç›¸åº”çš„å¼•ç”¨ç±»å‹â€”åŒ…è£…ç±»ï¼ˆå°è£…ç±»ï¼‰\nByteã€Shortã€Integerã€Longã€Floatã€Doubleã€Booleanã€Character\nåŸºæœ¬æ•°æ®ç±»å‹åŒ…è£…æˆåŒ…è£…ç±»çš„å®ä¾‹ â€”-è£…ç®±é€šè¿‡åŒ…è£…ç±»çš„æ„é€ å™¨å®ç°ï¼š\nint i = 500;   Integer t = new Integer(i);\nint i = new Integer(â€œ12â€);\né€šè¿‡å­—ç¬¦ä¸²å‚æ•°æ„é€ åŒ…è£…ç±»å¯¹è±¡ï¼š\nFloat f = new Float(â€œ4.56â€);\nLong l = new Long(â€œasdfâ€);  //NumberFormatException\nè·å¾—åŒ…è£…ç±»å¯¹è±¡ä¸­åŒ…è£…çš„åŸºæœ¬ç±»å‹å˜é‡ â€”-æ‹†ç®±è°ƒç”¨åŒ…è£…ç±»çš„.xxxValue()æ–¹æ³•ï¼š\nboolean b = bObj.booleanValue();\né€šè¿‡åŒ…è£…ç±»çš„parseXxx(String s)é™æ€æ–¹æ³•ï¼š\n// å­—ç¬¦ä¸²è½¬åŒ…è£…ç±»\nFloat f = Float.parseFloat(â€œ12.1â€);\n\n// åŸºæœ¬æ•°æ®ç±»å‹åŒ…è£…æˆåŒ…è£…ç±»çš„å®ä¾‹ ---è£…ç®±\n// é€šè¿‡åŒ…è£…ç±»çš„æ„é€ å™¨å®ç°ï¼š\nint i = 500;   Integer t = new Integer(i);\n// é€šè¿‡å­—ç¬¦ä¸²å‚æ•°æ„é€ åŒ…è£…ç±»å¯¹è±¡ï¼š\nFloat f = new Float(â€œ4.56â€);\nLong l = new Long(â€œasdfâ€);  //NumberFormatException\n\n//è·å¾—åŒ…è£…ç±»å¯¹è±¡ä¸­åŒ…è£…çš„åŸºæœ¬ç±»å‹å˜é‡ ---æ‹†ç®±\n// è°ƒç”¨åŒ…è£…ç±»çš„.xxxValue()æ–¹æ³•ï¼š\nboolean b = bObj.booleanValue();\n\n// å­—ç¬¦ä¸²è½¬æ¢æˆåŸºæœ¬æ•°æ®ç±»å‹\n// é€šè¿‡åŒ…è£…ç±»çš„æ„é€ å™¨å®ç°ï¼š\nint i = new Integer(â€œ12â€);\n// é€šè¿‡åŒ…è£…ç±»çš„parseXxx(String s)é™æ€æ–¹æ³•ï¼š\nFloat f = Float.parseFloat(â€œ12.1â€);\n\n// åŸºæœ¬æ•°æ®ç±»å‹è½¬æ¢æˆå­—ç¬¦ä¸²\n// è°ƒç”¨å­—ç¬¦ä¸²é‡è½½çš„valueOf()æ–¹æ³•ï¼š\nString fstr = String.valueOf(2.34f);\n//æ›´ç›´æ¥çš„æ–¹å¼ï¼š\nString intStr = 5 + â€œâ€\nå…³é”®å­—â€”staticå½“æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªç±»æ—¶ï¼Œå…¶å®å°±æ˜¯åœ¨æè¿°å…¶å¯¹è±¡çš„å±æ€§å’Œè¡Œä¸ºï¼Œè€Œå¹¶æ²¡æœ‰äº§ç”Ÿå®è´¨ä¸Šçš„å¯¹è±¡ï¼Œ==åªæœ‰é€šè¿‡newå…³é”®å­—æ‰ä¼šäº§ç”Ÿå‡ºå¯¹è±¡==ï¼Œè¿™æ—¶ç³»ç»Ÿæ‰ä¼šåˆ†é…å†…å­˜ç©ºé—´ç»™å¯¹è±¡ï¼Œå…¶æ–¹æ³•æ‰å¯ä»¥ä¾›å¤–éƒ¨è°ƒç”¨ã€‚æˆ‘ä»¬æœ‰æ—¶å€™å¸Œæœ›æ— è®ºæ˜¯å¦äº§ç”Ÿäº†å¯¹è±¡æˆ–æ— è®ºäº§ç”Ÿäº†å¤šå°‘å¯¹è±¡çš„æƒ…å†µä¸‹ï¼Œ==æŸäº›ç‰¹å®šçš„æ•°æ®åœ¨å†…å­˜ç©ºé—´é‡Œåªæœ‰ä¸€ä»½==ã€‚\n\nç±»å±æ€§ä½œä¸ºè¯¥ç±»==å„ä¸ªå¯¹è±¡ä¹‹é—´å…±äº«çš„å˜é‡==ã€‚åœ¨è®¾è®¡ç±»æ—¶,åˆ†æå“ªäº›å±æ€§ä¸å› å¯¹è±¡çš„ä¸åŒè€Œæ”¹å˜ï¼Œå°†è¿™äº›å±æ€§è®¾ç½®ä¸ºç±»å±æ€§ã€‚ç›¸åº”çš„æ–¹æ³•è®¾ç½®ä¸ºç±»æ–¹æ³•ã€‚\nå¦‚æœæ–¹æ³•ä¸è°ƒç”¨è€…æ— å…³ï¼Œåˆ™è¿™æ ·çš„æ–¹æ³•é€šå¸¸è¢«å£°æ˜ä¸ºç±»æ–¹æ³•ï¼Œç”±äºä¸éœ€è¦åˆ›å»ºå¯¹è±¡å°±å¯ä»¥è°ƒç”¨ç±»æ–¹æ³•ï¼Œä»è€Œç®€åŒ–äº†æ–¹æ³•çš„è°ƒç”¨ã€‚\n\nï¬    ä½¿ç”¨èŒƒå›´ï¼šåœ¨Javaç±»ä¸­ï¼Œå¯ç”¨staticä¿®é¥°å±æ€§ã€æ–¹æ³•ã€ä»£ç å—ã€å†…éƒ¨ç±»\nè¢«ä¿®é¥°åçš„æˆå‘˜å…·å¤‡ä»¥ä¸‹ç‰¹ç‚¹ï¼šïƒ˜    éšç€ç±»çš„åŠ è½½è€ŒåŠ è½½ïƒ˜    ä¼˜å…ˆäºå¯¹è±¡å­˜åœ¨ïƒ˜    ä¿®é¥°çš„æˆå‘˜ï¼Œè¢«æ‰€æœ‰å¯¹è±¡æ‰€å…±äº«ïƒ˜    è®¿é—®æƒé™å…è®¸æ—¶ï¼Œå¯ä¸åˆ›å»ºå¯¹è±¡ï¼Œç›´æ¥è¢«ç±»è°ƒç”¨\nåŒ¿åå¯¹è±¡\nä¸å®šä¹‰å¯¹è±¡çš„å¥æŸ„ï¼Œè€Œç›´æ¥è°ƒç”¨è¿™ä¸ªå¯¹è±¡çš„æ–¹æ³•ã€‚è¿™æ ·çš„å¯¹è±¡å«åšåŒ¿åå¯¹è±¡ã€‚\nnew Person().shout();\nç±»å˜é‡(class Variable)ç±»å˜é‡ï¼ˆç±»å±æ€§ï¼‰ç”±è¯¥ç±»çš„æ‰€æœ‰å®ä¾‹å…±äº«\npublic static int total = 0;\n\nPerson.total = 100; // ä¸ç”¨åˆ›å»ºå¯¹è±¡å°±å¯ä»¥è®¿é—®é™æ€æˆå‘˜ \n//è®¿é—®æ–¹å¼ï¼šç±»å.ç±»å±æ€§ï¼Œç±»å.ç±»æ–¹æ³•\nç±»æ–¹æ³•(class method)æ²¡æœ‰å¯¹è±¡çš„å®ä¾‹æ—¶ï¼Œå¯ä»¥ç”¨ç±»å.æ–¹æ³•å()çš„å½¢å¼è®¿é—®ç”±staticä¿®é¥°çš„ç±»æ–¹æ³•ã€‚ï¬    åœ¨staticæ–¹æ³•å†…éƒ¨åªèƒ½è®¿é—®ç±»çš„staticä¿®é¥°çš„å±æ€§æˆ–æ–¹æ³•ï¼Œä¸èƒ½è®¿é—®ç±»çš„éstaticçš„ç»“æ„ã€‚ï¬    åœ¨staticæ–¹æ³•ä¸­ä¸èƒ½æœ‰thisï¼Œä¹Ÿä¸èƒ½æœ‰super\nç†è§£mainæ–¹æ³•çš„è¯­æ³•â€‹        ç”±äºJavaè™šæ‹Ÿæœºéœ€è¦è°ƒç”¨ç±»çš„main()æ–¹æ³•ï¼Œæ‰€ä»¥è¯¥æ–¹æ³•çš„è®¿é—®æƒé™å¿…é¡»æ˜¯publicï¼Œåˆå› ä¸ºJavaè™šæ‹Ÿæœºåœ¨æ‰§è¡Œmain()æ–¹æ³•æ—¶ä¸å¿…åˆ›å»ºå¯¹è±¡ï¼Œæ‰€ä»¥è¯¥æ–¹æ³•å¿…é¡»æ˜¯staticçš„ï¼Œè¯¥æ–¹æ³•æ¥æ”¶ä¸€ä¸ªStringç±»å‹çš„æ•°ç»„å‚æ•°ï¼Œè¯¥æ•°ç»„ä¸­ä¿å­˜æ‰§è¡ŒJavaå‘½ä»¤æ—¶ä¼ é€’ç»™æ‰€è¿è¡Œçš„ç±»çš„å‚æ•°ã€‚\nâ€‹        åˆå› ä¸ºmain() æ–¹æ³•æ˜¯é™æ€çš„ï¼Œæˆ‘ä»¬ä¸èƒ½ç›´æ¥è®¿é—®è¯¥ç±»ä¸­çš„éé™æ€æˆå‘˜ï¼Œå¿…é¡»åˆ›å»ºè¯¥ç±»çš„ä¸€ä¸ªå®ä¾‹å¯¹è±¡åï¼Œæ‰èƒ½é€šè¿‡è¿™ä¸ªå¯¹è±¡å»è®¿é—®ç±»ä¸­çš„éé™æ€æˆå‘˜ï¼Œè¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬åœ¨ä¹‹å‰çš„ä¾‹å­ä¸­å¤šæ¬¡ç¢°åˆ°ã€‚\nå…³é”®å­—â€”final\nfinalæ ‡è®°çš„ç±»ä¸èƒ½è¢«ç»§æ‰¿ã€‚æé«˜å®‰å…¨æ€§ï¼Œæé«˜ç¨‹åºçš„å¯è¯»æ€§ã€‚Stringç±»ã€Systemç±»ã€StringBufferç±»\nfinalæ ‡è®°çš„æ–¹æ³•ä¸èƒ½è¢«å­ç±»é‡å†™ã€‚Objectç±»ä¸­çš„getClass()ã€‚\nïƒ˜    finalæ ‡è®°çš„å˜é‡(æˆå‘˜å˜é‡æˆ–å±€éƒ¨å˜é‡)å³ç§°ä¸ºå¸¸é‡ã€‚åç§°å¤§å†™ï¼Œä¸”åªèƒ½è¢«èµ‹å€¼ä¸€æ¬¡ã€‚\n\n\n\n\n\nfinal\nåœ¨ç±»ã€å˜é‡å’Œæ–¹æ³•æ—¶è¡¨ç¤ºâ€œæœ€ç»ˆçš„â€\n\n\n\n\nç±»ä¸èƒ½è¢«ç»§æ‰¿\næé«˜å®‰å…¨æ€§ï¼Œæé«˜ç¨‹åºçš„å¯è¯»æ€§ã€‚\n\n\næ–¹æ³•ä¸èƒ½è¢«å­ç±»é‡å†™\nïƒ¼    æ¯”å¦‚ï¼šObjectç±»ä¸­çš„getClass()\n\n\nfinalæ ‡è®°çš„å˜é‡\nåç§°å¤§å†™ï¼Œä¸”åªèƒ½è¢«èµ‹å€¼ä¸€æ¬¡\n\n\n\n\n// finalä¿®é¥°ç±»\nfinal class A{\n}\n// finalä¿®é¥°æ–¹æ³•\nclass A {\n    public final void print() {\n        System . out . println(\"A\");\n    }\n}\n//finalä¿®é¥°å˜é‡â€”â€”å¸¸é‡\nprivate final String INFO = \"atguigu\";  //å£°æ˜å¸¸é‡\næŠ½è±¡ç±»ä¸æŠ½è±¡æ–¹æ³•â€”abstractç±»çš„è®¾è®¡åº”è¯¥ä¿è¯çˆ¶ç±»å’Œå­ç±»èƒ½å¤Ÿå…±äº«ç‰¹å¾ã€‚æœ‰æ—¶å°†ä¸€ä¸ªçˆ¶ç±»è®¾è®¡å¾—éå¸¸æŠ½è±¡ï¼Œä»¥è‡³äºå®ƒæ²¡æœ‰å…·ä½“çš„å®ä¾‹ï¼Œè¿™æ ·çš„ç±»å«åšæŠ½è±¡ç±»ã€‚\nç”¨abstractå…³é”®å­—æ¥ä¿®é¥°ä¸€ä¸ªç±»ï¼Œè¿™ä¸ªç±»å«åš==æŠ½è±¡ç±»==ã€‚ç”¨abstractæ¥ä¿®é¥°ä¸€ä¸ªæ–¹æ³•ï¼Œè¯¥æ–¹æ³•å«åš==æŠ½è±¡æ–¹æ³•==ã€‚ïƒ˜    æŠ½è±¡æ–¹æ³•ï¼šåªæœ‰æ–¹æ³•çš„å£°æ˜ï¼Œæ²¡æœ‰æ–¹æ³•çš„å®ç°ã€‚ä»¥åˆ†å·ç»“æŸï¼šæ¯”å¦‚ï¼špublic abstract void talk();ï¬    å«æœ‰æŠ½è±¡æ–¹æ³•çš„ç±»å¿…é¡»è¢«å£°æ˜ä¸ºæŠ½è±¡ç±»ã€‚ï¬    æŠ½è±¡ç±»ä¸èƒ½è¢«å®ä¾‹åŒ–ã€‚æŠ½è±¡ç±»æ˜¯ç”¨æ¥è¢«ç»§æ‰¿çš„ï¼ŒæŠ½è±¡ç±»çš„å­ç±»å¿…é¡»é‡å†™çˆ¶ç±»çš„æŠ½è±¡æ–¹æ³•ï¼Œå¹¶æä¾›æ–¹æ³•ä½“ã€‚è‹¥æ²¡æœ‰é‡å†™å…¨éƒ¨çš„æŠ½è±¡æ–¹æ³•ï¼Œä»ä¸ºæŠ½è±¡ç±»ã€‚ï¬    ä¸èƒ½ç”¨abstractä¿®é¥°å˜é‡ã€ä»£ç å—ã€æ„é€ å™¨ï¼›ï¬    ä¸èƒ½ç”¨abstractä¿®é¥°ç§æœ‰æ–¹æ³•ã€é™æ€æ–¹æ³•ã€finalçš„æ–¹æ³•ã€finalçš„ç±»ã€‚\nå…³é”®å­—â€”interfaceæ¥å£(interface)æ˜¯æŠ½è±¡æ–¹æ³•å’Œå¸¸é‡å€¼å®šä¹‰çš„é›†åˆã€‚æ¥å£çš„ç‰¹ç‚¹ï¼šïƒ˜    ç”¨interfaceæ¥å®šä¹‰ã€‚ïƒ˜    æ¥å£ä¸­çš„æ‰€æœ‰æˆå‘˜å˜é‡éƒ½é»˜è®¤æ˜¯ç”±public static finalä¿®é¥°çš„ã€‚ïƒ˜    æ¥å£ä¸­çš„æ‰€æœ‰æŠ½è±¡æ–¹æ³•éƒ½é»˜è®¤æ˜¯ç”±public abstractä¿®é¥°çš„ã€‚ïƒ˜    æ¥å£ä¸­æ²¡æœ‰æ„é€ å™¨ã€‚ïƒ˜    æ¥å£é‡‡ç”¨å¤šç»§æ‰¿æœºåˆ¶ã€‚\npublic interface Runner {\n    public static final int ID = 1; \n    public abstract void start(); \n    public abstract void run(); \n    public abstract void stop();\n}\nå®šä¹‰Javaç±»çš„è¯­æ³•æ ¼å¼ï¼šå…ˆå†™extendsï¼Œåå†™implementsïƒ˜    class SubClass extends SuperClass implements InterfaceA{ }ä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£ï¼Œæ¥å£ä¹Ÿå¯ä»¥ç»§æ‰¿å…¶å®ƒæ¥å£ã€‚ï¬    å®ç°æ¥å£çš„ç±»ä¸­å¿…é¡»æä¾›æ¥å£ä¸­æ‰€æœ‰æ–¹æ³•çš„å…·ä½“å®ç°å†…å®¹ï¼Œæ–¹å¯å®ä¾‹åŒ–ã€‚å¦åˆ™ï¼Œä»ä¸ºæŠ½è±¡ç±»ã€‚ï¬    æ¥å£çš„ä¸»è¦ç”¨é€”å°±æ˜¯è¢«å®ç°ç±»å®ç°ã€‚ï¼ˆé¢å‘æ¥å£ç¼–ç¨‹ï¼‰ï¬    ä¸ç»§æ‰¿å…³ç³»ç±»ä¼¼ï¼Œæ¥å£ä¸å®ç°ç±»ä¹‹é—´å­˜åœ¨å¤šæ€æ€§ï¬    æ¥å£å’Œç±»æ˜¯å¹¶åˆ—å…³ç³»ï¼Œæˆ–è€…å¯ä»¥ç†è§£ä¸ºä¸€ç§ç‰¹æ®Šçš„ç±»ã€‚ä»æœ¬è´¨ä¸Šè®²ï¼Œæ¥å£æ˜¯ä¸€ç§ç‰¹æ®Šçš„æŠ½è±¡ç±»ï¼Œè¿™ç§æŠ½è±¡ç±»ä¸­åªåŒ…å«å¸¸é‡å’Œæ–¹æ³•çš„å®šä¹‰ï¼Œ(JDK7.0åŠä¹‹å‰)ï¼Œè€Œæ²¡æœ‰å˜é‡å’Œæ–¹æ³•çš„å®ç°ã€‚\n\nä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ— å…³çš„æ¥å£\nä¸ç»§æ‰¿å…³ç³»ç±»ä¼¼ï¼Œæ¥å£ä¸å®ç°ç±»ä¹‹é—´å­˜åœ¨å¤šæ€æ€§\n\n\n\n\n\nåŒºåˆ«ç‚¹\næŠ½è±¡ç±»\næ¥å£\n\n\n\n\nå®šä¹‰\nåŒ…å«æŠ½è±¡æ–¹æ³•çš„ç±»\nä¸»è¦æ˜¯æŠ½è±¡æ–¹æ³•å’Œå…¨å±€å¸¸é‡çš„é›†åˆ\n\n\nç»„æˆ\næ„é€ æ–¹æ³•ã€æŠ½è±¡æ–¹æ³•ã€æ™®é€šæ–¹æ³•ã€å¸¸é‡ã€å˜é‡\nå¸¸é‡ã€æŠ½è±¡æ–¹æ³•ã€(jdk8.0:é»˜è®¤æ–¹æ³•ã€é™æ€æ–¹æ³•)\n\n\nä½¿ç”¨\nå­ç±»ç»§æ‰¿æŠ½è±¡ç±»(extends)\nå­ç±»å®ç°æ¥å£(implements)\n\n\nå…³ç³»\næŠ½è±¡ç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£\næ¥å£ä¸èƒ½ç»§æ‰¿æŠ½è±¡ç±»ï¼Œä½†å…è®¸ç»§æ‰¿å¤šä¸ªæ¥å£\n\n\nå¸¸è§è®¾è®¡æ¨¡å¼\næ¨¡æ¿æ–¹æ³•\nç®€å•å·¥å‚ã€å·¥å‚æ–¹æ³•ã€ä»£ç†æ¨¡å¼\n\n\nå¯¹è±¡\néƒ½é€šè¿‡å¯¹è±¡çš„å¤šæ€æ€§äº§ç”Ÿå®ä¾‹åŒ–å¯¹è±¡\n\n\n\nå±€é™\næŠ½è±¡ç±»æœ‰å•ç»§æ‰¿çš„å±€é™\næ¥å£æ²¡æœ‰æ­¤å±€é™\n\n\nå®é™…\nä½œä¸ºä¸€ä¸ªæ¨¡æ¿\næ˜¯ä½œä¸ºä¸€ä¸ªæ ‡å‡†æˆ–æ˜¯è¡¨ç¤ºä¸€ç§èƒ½åŠ›\n\n\né€‰æ‹©\nå¦‚æœæŠ½è±¡ç±»å’Œæ¥å£éƒ½å¯ä»¥ä½¿ç”¨çš„è¯ï¼Œ\nä¼˜å…ˆä½¿ç”¨æ¥å£ï¼Œå› ä¸ºé¿å…å•ç»§æ‰¿çš„å±€é™\n\n\n\n\nåœ¨å¼€å‘ä¸­ï¼Œå¸¸çœ‹åˆ°ä¸€ä¸ªç±»ä¸æ˜¯å»ç»§æ‰¿ä¸€ä¸ªå·²ç»å®ç°å¥½çš„ç±»ï¼Œè€Œæ˜¯è¦ä¹ˆç»§æ‰¿æŠ½è±¡ç±»ï¼Œè¦ä¹ˆå®ç°æ¥å£ã€‚\nJava 8ä¸­å…³äºæ¥å£çš„æ”¹è¿›Java 8ä¸­ï¼Œä½ å¯ä»¥ä¸ºæ¥å£æ·»åŠ é™æ€æ–¹æ³•å’Œé»˜è®¤æ–¹æ³•ã€‚ä»æŠ€æœ¯è§’åº¦æ¥è¯´ï¼Œè¿™æ˜¯å®Œå…¨åˆæ³•çš„ï¼Œåªæ˜¯å®ƒçœ‹èµ·æ¥è¿åäº†æ¥å£ä½œä¸ºä¸€ä¸ªæŠ½è±¡å®šä¹‰çš„ç†å¿µã€‚é™æ€æ–¹æ³•ï¼šä½¿ç”¨ static å…³é”®å­—ä¿®é¥°ã€‚å¯ä»¥é€šè¿‡æ¥å£ç›´æ¥è°ƒç”¨é™æ€æ–¹æ³•ï¼Œå¹¶æ‰§è¡Œå…¶æ–¹æ³•ä½“ã€‚æˆ‘ä»¬ç»å¸¸åœ¨ç›¸äº’ä¸€èµ·ä½¿ç”¨çš„ç±»ä¸­ä½¿ç”¨é™æ€æ–¹æ³•ã€‚ä½ å¯ä»¥åœ¨æ ‡å‡†åº“ä¸­æ‰¾åˆ°åƒCollection/Collectionsæˆ–è€…Path/Pathsè¿™æ ·æˆå¯¹çš„æ¥å£å’Œç±»ã€‚é»˜è®¤æ–¹æ³•ï¼šé»˜è®¤æ–¹æ³•ä½¿ç”¨ default å…³é”®å­—ä¿®é¥°ã€‚å¯ä»¥é€šè¿‡å®ç°ç±»å¯¹è±¡æ¥è°ƒç”¨ã€‚æˆ‘ä»¬åœ¨å·²æœ‰çš„æ¥å£ä¸­æä¾›æ–°æ–¹æ³•çš„åŒæ—¶ï¼Œè¿˜ä¿æŒäº†ä¸æ—§ç‰ˆæœ¬ä»£ç çš„å…¼å®¹æ€§ã€‚æ¯”å¦‚ï¼šjava 8 APIä¸­å¯¹Collectionã€Listã€Comparatorç­‰æ¥å£æä¾›äº†ä¸°å¯Œçš„é»˜è®¤æ–¹æ³•ã€‚\næ¥å£ä¸­çš„é»˜è®¤æ–¹æ³•\nï¬    è‹¥ä¸€ä¸ªæ¥å£ä¸­å®šä¹‰äº†ä¸€ä¸ªé»˜è®¤æ–¹æ³•ï¼Œè€Œå¦å¤–ä¸€ä¸ªæ¥å£ä¸­ä¹Ÿå®šä¹‰äº†ä¸€ä¸ªåŒååŒå‚æ•°çš„æ–¹æ³•ï¼ˆä¸ç®¡æ­¤æ–¹æ³•æ˜¯å¦æ˜¯é»˜è®¤æ–¹æ³•ï¼‰ï¼Œåœ¨å®ç°ç±»åŒæ—¶å®ç°äº†è¿™ä¸¤ä¸ªæ¥å£æ—¶ï¼Œä¼šå‡ºç°ï¼šæ¥å£å†²çªã€‚ïƒ˜    è§£å†³åŠæ³•ï¼šå®ç°ç±»å¿…é¡»è¦†ç›–æ¥å£ä¸­åŒååŒå‚æ•°çš„æ–¹æ³•ï¼Œæ¥è§£å†³å†²çªã€‚\nè‹¥ä¸€ä¸ªæ¥å£ä¸­å®šä¹‰äº†ä¸€ä¸ªé»˜è®¤æ–¹æ³•ï¼Œè€Œçˆ¶ç±»ä¸­ä¹Ÿå®šä¹‰äº†ä¸€ä¸ªåŒååŒå‚æ•°çš„éæŠ½è±¡æ–¹æ³•ï¼Œåˆ™ä¸ä¼šå‡ºç°å†²çªé—®é¢˜ã€‚å› ä¸ºæ­¤æ—¶éµå®ˆï¼šç±»ä¼˜å…ˆåŸåˆ™ã€‚æ¥å£ä¸­å…·æœ‰ç›¸åŒåç§°å’Œå‚æ•°çš„é»˜è®¤æ–¹æ³•ä¼šè¢«å¿½ç•¥ã€‚\nå†…éƒ¨ç±»å½“ä¸€ä¸ªäº‹ç‰©çš„å†…éƒ¨ï¼Œè¿˜æœ‰ä¸€ä¸ªéƒ¨åˆ†éœ€è¦ä¸€ä¸ªå®Œæ•´çš„ç»“æ„è¿›è¡Œæè¿°ï¼Œè€Œè¿™ä¸ªå†…éƒ¨çš„å®Œæ•´çš„ç»“æ„åˆåªä¸ºå¤–éƒ¨äº‹ç‰©æä¾›æœåŠ¡ï¼Œé‚£ä¹ˆæ•´ä¸ªå†…éƒ¨çš„å®Œæ•´ç»“æ„æœ€å¥½ä½¿ç”¨å†…éƒ¨ç±»ã€‚\nï¬    Inner classä¸€èˆ¬ç”¨åœ¨å®šä¹‰å®ƒçš„ç±»æˆ–è¯­å¥å—ä¹‹å†…ï¼Œåœ¨å¤–éƒ¨å¼•ç”¨å®ƒæ—¶å¿…é¡»ç»™å‡ºå®Œæ•´çš„åç§°ã€‚ïƒ˜    Inner classçš„åå­—ä¸èƒ½ä¸åŒ…å«å®ƒçš„å¤–éƒ¨ç±»ç±»åç›¸åŒï¼›\n\næˆå‘˜å†…éƒ¨ç±»ï¼ˆstaticæˆå‘˜å†…éƒ¨ç±»å’Œéstaticæˆå‘˜å†…éƒ¨ç±»ï¼‰\n\nå±€éƒ¨å†…éƒ¨ç±»ï¼ˆä¸è°ˆä¿®é¥°ç¬¦ï¼‰ã€åŒ¿åå†…éƒ¨ç±»\n\n\næˆå‘˜å†…éƒ¨ç±»ä½œä¸ºç±»çš„æˆå‘˜çš„è§’è‰²ï¼šïƒ˜    å’Œå¤–éƒ¨ç±»ä¸åŒï¼ŒInner classè¿˜å¯ä»¥å£°æ˜ä¸ºprivateæˆ–protectedï¼›ïƒ˜    å¯ä»¥è°ƒç”¨å¤–éƒ¨ç±»çš„ç»“æ„ïƒ˜    Inner class å¯ä»¥å£°æ˜ä¸ºstaticçš„ï¼Œä½†æ­¤æ—¶å°±ä¸èƒ½å†ä½¿ç”¨å¤–å±‚ç±»çš„éstaticçš„æˆå‘˜å˜é‡ï¼›æˆå‘˜å†…éƒ¨ç±»ä½œä¸ºç±»çš„è§’è‰²ï¼šïƒ˜    å¯ä»¥åœ¨å†…éƒ¨å®šä¹‰å±æ€§ã€æ–¹æ³•ã€æ„é€ å™¨ç­‰ç»“æ„ïƒ˜    å¯ä»¥å£°æ˜ä¸ºabstractç±» ï¼Œå› æ­¤å¯ä»¥è¢«å…¶å®ƒçš„å†…éƒ¨ç±»ç»§æ‰¿ïƒ˜    å¯ä»¥å£°æ˜ä¸ºfinalçš„ïƒ˜    ç¼–è¯‘ä»¥åç”ŸæˆOuterClass$InnerClass.classå­—èŠ‚ç æ–‡ä»¶ï¼ˆä¹Ÿé€‚ç”¨äºå±€éƒ¨å†…éƒ¨ç±»ï¼‰\næ³¨æ„ï¼š\n\néstaticçš„æˆå‘˜å†…éƒ¨ç±»ä¸­çš„æˆå‘˜ä¸èƒ½å£°æ˜ä¸ºstaticçš„ï¼Œåªæœ‰åœ¨å¤–éƒ¨ç±»æˆ–staticçš„æˆå‘˜å†…éƒ¨ç±»ä¸­æ‰å¯å£°æ˜staticæˆå‘˜ã€‚\nå¤–éƒ¨ç±»è®¿é—®æˆå‘˜å†…éƒ¨ç±»çš„æˆå‘˜ï¼Œéœ€è¦â€œå†…éƒ¨ç±».æˆå‘˜â€æˆ–â€œå†…éƒ¨ç±»å¯¹è±¡.æˆå‘˜â€çš„æ–¹å¼\næˆå‘˜å†…éƒ¨ç±»å¯ä»¥ç›´æ¥ä½¿ç”¨å¤–éƒ¨ç±»çš„æ‰€æœ‰æˆå‘˜ï¼ŒåŒ…æ‹¬ç§æœ‰çš„æ•°æ®\nå½“æƒ³è¦åœ¨å¤–éƒ¨ç±»çš„é™æ€æˆå‘˜éƒ¨åˆ†ä½¿ç”¨å†…éƒ¨ç±»æ—¶ï¼Œå¯ä»¥è€ƒè™‘å†…éƒ¨ç±»å£°æ˜ä¸ºé™æ€çš„\n\nclasså¤–éƒ¨ç±»{\n    æ–¹æ³•(){\n    \tclasså±€éƒ¨å†…éƒ¨ç±»{\n    \t}\n\t}\n    {\n        classå±€éƒ¨å†…éƒ¨ç±»{\n\t\t}\n    }\n}\n\nå¦‚ä½•ä½¿ç”¨å±€éƒ¨å†…éƒ¨ç±»\n\nïƒ˜    åªèƒ½åœ¨å£°æ˜å®ƒçš„æ–¹æ³•æˆ–ä»£ç å—ä¸­ä½¿ç”¨ï¼Œè€Œä¸”æ˜¯å…ˆå£°æ˜åä½¿ç”¨ã€‚é™¤æ­¤ä¹‹å¤–çš„ä»»ä½•åœ°æ–¹éƒ½ä¸èƒ½ä½¿ç”¨è¯¥ç±»ïƒ˜    ä½†æ˜¯å®ƒçš„å¯¹è±¡å¯ä»¥é€šè¿‡å¤–éƒ¨æ–¹æ³•çš„è¿”å›å€¼è¿”å›ä½¿ç”¨ï¼Œè¿”å›å€¼ç±»å‹åªèƒ½æ˜¯å±€éƒ¨å†…éƒ¨ç±»çš„çˆ¶ç±»æˆ–çˆ¶æ¥å£ç±»å‹\n\nå±€éƒ¨å†…éƒ¨ç±»çš„ç‰¹ç‚¹\n\nïƒ˜    å†…éƒ¨ç±»ä»ç„¶æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„ç±»ï¼Œåœ¨ç¼–è¯‘ä¹‹åå†…éƒ¨ç±»ä¼šè¢«ç¼–è¯‘æˆç‹¬ç«‹çš„.classæ–‡ä»¶ï¼Œä½†æ˜¯å‰é¢å† ä»¥å¤–éƒ¨ç±»çš„ç±»åå’Œ$ç¬¦å·ï¼Œä»¥åŠæ•°å­—ç¼–å·ã€‚ïƒ˜    åªèƒ½åœ¨å£°æ˜å®ƒçš„æ–¹æ³•æˆ–ä»£ç å—ä¸­ä½¿ç”¨ï¼Œè€Œä¸”æ˜¯å…ˆå£°æ˜åä½¿ç”¨ã€‚é™¤æ­¤ä¹‹å¤–çš„ä»»ä½•åœ°æ–¹éƒ½ä¸èƒ½ä½¿ç”¨è¯¥ç±»ã€‚ïƒ˜    å±€éƒ¨å†…éƒ¨ç±»å¯ä»¥ä½¿ç”¨å¤–éƒ¨ç±»çš„æˆå‘˜ï¼ŒåŒ…æ‹¬ç§æœ‰çš„ã€‚ïƒ˜    å±€éƒ¨å†…éƒ¨ç±»å¯ä»¥ä½¿ç”¨å¤–éƒ¨æ–¹æ³•çš„å±€éƒ¨å˜é‡ï¼Œä½†æ˜¯å¿…é¡»æ˜¯finalçš„ã€‚ç”±å±€éƒ¨å†…éƒ¨ç±»å’Œå±€éƒ¨å˜é‡çš„å£°æ˜å‘¨æœŸä¸åŒæ‰€è‡´ã€‚ïƒ˜    å±€éƒ¨å†…éƒ¨ç±»å’Œå±€éƒ¨å˜é‡åœ°ä½ç±»ä¼¼ï¼Œä¸èƒ½ä½¿ç”¨public,protected,ç¼ºçœ,privateïƒ˜    å±€éƒ¨å†…éƒ¨ç±»ä¸èƒ½ä½¿ç”¨staticä¿®é¥°ï¼Œå› æ­¤ä¹Ÿä¸èƒ½åŒ…å«é™æ€æˆå‘˜\nåŒ¿åå†…éƒ¨ç±»\nï¬    åŒ¿åå†…éƒ¨ç±»ä¸èƒ½å®šä¹‰ä»»ä½•é™æ€æˆå‘˜ã€æ–¹æ³•å’Œç±»ï¼Œåªèƒ½åˆ›å»ºåŒ¿åå†…éƒ¨ç±»çš„ä¸€ä¸ªå®ä¾‹ã€‚ä¸€ä¸ªåŒ¿åå†…éƒ¨ç±»ä¸€å®šæ˜¯åœ¨newçš„åé¢ï¼Œç”¨å…¶éšå«å®ç°ä¸€ä¸ªæ¥å£æˆ–å®ç°ä¸€ä¸ªç±»ã€‚\nnew çˆ¶ç±»æ„é€ å™¨ï¼ˆå®å‚åˆ—è¡¨ï¼‰|å®ç°æ¥å£(){\n    //åŒ¿åå†…éƒ¨ç±»çš„ç±»ä½“éƒ¨åˆ†\n}\nåŒ¿åå†…éƒ¨ç±»çš„ç‰¹ç‚¹ïƒ˜    åŒ¿åå†…éƒ¨ç±»å¿…é¡»ç»§æ‰¿çˆ¶ç±»æˆ–å®ç°æ¥å£ïƒ˜    åŒ¿åå†…éƒ¨ç±»åªèƒ½æœ‰ä¸€ä¸ªå¯¹è±¡ïƒ˜    åŒ¿åå†…éƒ¨ç±»å¯¹è±¡åªèƒ½ä½¿ç”¨å¤šæ€å½¢å¼å¼•ç”¨\nå…³é”®å­—â€”nativeä½¿ç”¨ native å…³é”®å­—è¯´æ˜è¿™ä¸ªæ–¹æ³•æ˜¯==åŸç”Ÿå‡½æ•°==ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªæ–¹æ³•æ˜¯ç”¨ ==C/C++==ç­‰éJava è¯­è¨€å®ç°çš„ï¼Œå¹¶ä¸”è¢«ç¼–è¯‘æˆäº† DLLï¼Œç”± java å»è°ƒç”¨ã€‚ \nï¼ˆ1ï¼‰ä¸ºä»€ä¹ˆè¦ç”¨ native æ–¹æ³•java ä½¿ç”¨èµ·æ¥éå¸¸æ–¹ä¾¿ï¼Œç„¶è€Œæœ‰äº›å±‚æ¬¡çš„ä»»åŠ¡ç”¨ java å®ç°èµ·æ¥ä¸å®¹æ˜“ï¼Œæˆ–è€…æˆ‘ä»¬å¯¹ç¨‹åºçš„æ•ˆç‡å¾ˆåœ¨æ„æ—¶ï¼Œé—®é¢˜å°±æ¥äº†ã€‚ä¾‹å¦‚ï¼šæœ‰æ—¶ java åº”ç”¨éœ€è¦ä¸ java å¤–é¢çš„ç¯å¢ƒäº¤äº’ã€‚è¿™æ˜¯æœ¬åœ°æ–¹æ³•å­˜åœ¨çš„ä¸»è¦åŸå› ï¼Œä½ å¯ä»¥æƒ³æƒ³ java éœ€è¦ä¸ä¸€äº›åº•å±‚ç³»ç»Ÿå¦‚æ“ä½œç³»ç»Ÿæˆ–æŸäº›ç¡¬ä»¶äº¤æ¢ä¿¡æ¯æ—¶çš„æƒ…å†µã€‚æœ¬åœ°æ–¹æ³•æ­£æ˜¯è¿™æ ·ä¸€ç§äº¤æµæœºåˆ¶ï¼šå®ƒä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªéå¸¸ç®€æ´çš„æ¥å£ï¼Œè€Œä¸”æˆ‘ä»¬æ— éœ€å»äº†è§£ java åº”ç”¨ä¹‹å¤–çš„ç¹ççš„ç»†èŠ‚ã€‚ï¼ˆ2ï¼‰native å£°æ˜çš„æ–¹æ³•ï¼Œå¯¹äºè°ƒç”¨è€…ï¼Œå¯ä»¥å½“åšå’Œå…¶ä»– Java æ–¹æ³•ä¸€æ ·ä½¿ç”¨ä¸€ä¸ªnative method æ–¹æ³•å¯ä»¥è¿”å›ä»»ä½• java ç±»å‹ï¼ŒåŒ…æ‹¬éåŸºæœ¬ç±»å‹ï¼Œè€Œä¸”åŒæ ·å¯ä»¥è¿›è¡Œå¼‚å¸¸æ§åˆ¶ã€‚native method çš„å­˜åœ¨å¹¶ä¸ä¼šå¯¹å…¶ä»–ç±»è°ƒç”¨è¿™äº›æœ¬åœ°æ–¹æ³•äº§ç”Ÿä»»ä½•å½±å“ï¼Œå®é™…ä¸Šè°ƒç”¨è¿™äº›æ–¹æ³•çš„å…¶ä»–ç±»ç”šè‡³ä¸çŸ¥é“å®ƒæ‰€è°ƒç”¨çš„æ˜¯ä¸€ä¸ªæœ¬åœ°æ–¹æ³•ã€‚JVM å°†æ§åˆ¶è°ƒç”¨æœ¬åœ°æ–¹æ³•çš„æ‰€æœ‰ç»†èŠ‚ã€‚å¦‚æœä¸€ä¸ªå«æœ‰æœ¬åœ°æ–¹æ³•çš„ç±»è¢«ç»§æ‰¿ï¼Œå­ç±»ä¼šç»§æ‰¿è¿™ä¸ªæœ¬åœ°æ–¹æ³•å¹¶ä¸”å¯ä»¥ç”¨ javaè¯­è¨€é‡å†™è¿™ä¸ªæ–¹æ³•ï¼ˆå¦‚æœéœ€è¦çš„è¯ï¼‰ã€‚ \n","slug":"J1-å¯¹è±¡ä¸ç±»","date":"2021-11-05T06:23:36.000Z","categories_index":"JAVA","tags_index":"java","author_index":"YFR718"},{"id":"30c2d1a91e3f3491d3662bdaaf39ffa5","title":"Leetcodeï¼š1~100","content":"1. ä¸¤æ•°ä¹‹å’Œç»™å®šä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•°ç›®æ ‡å€¼ targetï¼Œè¯·ä½ åœ¨è¯¥æ•°ç»„ä¸­æ‰¾å‡º å’Œä¸ºç›®æ ‡å€¼ target  çš„é‚£ ä¸¤ä¸ª æ•´æ•°ï¼Œå¹¶è¿”å›å®ƒä»¬çš„æ•°ç»„ä¸‹æ ‡ã€‚\nä½ å¯ä»¥å‡è®¾æ¯ç§è¾“å…¥åªä¼šå¯¹åº”ä¸€ä¸ªç­”æ¡ˆã€‚ä½†æ˜¯ï¼Œæ•°ç»„ä¸­åŒä¸€ä¸ªå…ƒç´ åœ¨ç­”æ¡ˆé‡Œä¸èƒ½é‡å¤å‡ºç°ã€‚\nä½ å¯ä»¥æŒ‰ä»»æ„é¡ºåºè¿”å›ç­”æ¡ˆã€‚\n\n\n\n\n\n\n\n\n\nè¾“å…¥ï¼šnums = [2,7,11,15], target = 9è¾“å‡ºï¼š[0,1]è§£é‡Šï¼šå› ä¸º nums[0] + nums[1] == 9 ï¼Œè¿”å› [0, 1] ã€‚\n\n\n\n\n\n\n\næš´åŠ›è§£æ³•\nåŒé‡forå¾ªç¯\n\n\n// Java\nclass Solution {\n    public int[] twoSum(int[] nums, int target) {\n        for(int i = 0;i&lt;nums.length;i++) { \n            for(int j = i+1;j&lt;nums.length;j++) {\n                if(nums[i] + nums[j] == target) {\n                    return new int[] {i,j};\n                }\n            }\n        }\n        return new int[] {0};\n    }\n}\n\n\n\n\n\n\n\n å“ˆå¸Œè¡¨\n\n\n// Java\nclass Solution {\n    public int[] twoSum(int[] nums, int target) {\n        Map&lt;Integer, Integer&gt; hashTable = new HashMap&lt;Integer, Integer&gt;();\n        for (int i = 0; i &lt; nums.length; i++) {\n            if(hashTable.containsKey(target - nums[i])) {\n                return new int[]{hashTable.get(target - nums[i]),i};\n            }\n            hashTable.put(nums[i],i);\n        }\n        return new int[] {0};\n\n    }\n}\n# Python\nclass Solution(object):\n    def twoSum(self, nums, target):\n        \"\"\"\n        :type nums: List[int]\n        :type target: int\n        :rtype: List[int]\n        \"\"\"\n        d = {}\n        for i in range(len(nums)):\n            r = target-nums[i]\n            if r in d:\n                return [d[r],i]\n            else:\n                d[nums[i]]=i\n2. ä¸¤æ•°ç›¸åŠ ç»™ä½ ä¸¤ä¸ª éç©º çš„é“¾è¡¨ï¼Œè¡¨ç¤ºä¸¤ä¸ªéè´Ÿçš„æ•´æ•°ã€‚å®ƒä»¬æ¯ä½æ•°å­—éƒ½æ˜¯æŒ‰ç…§ é€†åº çš„æ–¹å¼å­˜å‚¨çš„ï¼Œå¹¶ä¸”æ¯ä¸ªèŠ‚ç‚¹åªèƒ½å­˜å‚¨ ä¸€ä½ æ•°å­—ã€‚\nè¯·ä½ å°†ä¸¤ä¸ªæ•°ç›¸åŠ ï¼Œå¹¶ä»¥ç›¸åŒå½¢å¼è¿”å›ä¸€ä¸ªè¡¨ç¤ºå’Œçš„é“¾è¡¨ã€‚\nä½ å¯ä»¥å‡è®¾é™¤äº†æ•°å­— 0 ä¹‹å¤–ï¼Œè¿™ä¸¤ä¸ªæ•°éƒ½ä¸ä¼šä»¥ 0 å¼€å¤´ã€‚\n\n\n\n\n\n\n\n\n\nè¾“å…¥ï¼šl1 = [2,4,3], l2 = [5,6,4]è¾“å‡ºï¼š[7,0,8]è§£é‡Šï¼š342 + 465 = 807.\n\n\n\n\n\n\n\næ¨¡æ‹Ÿ\næ¨¡æ‹ŸåŠ æ³•ï¼Œæ›´æ–°è¿›ä½ï¼Œæ³¨æ„æœ€åç»“æœå¦‚æœæœ‰è¿›ä½å°±å†åŠ ä¸€ä¸ªèŠ‚ç‚¹ã€‚\n\n\n/**\n * Definition for singly-linked list.\n * public class ListNode {\n *     int val;\n *     ListNode next;\n *     ListNode() {}\n *     ListNode(int val) { this.val = val; }\n *     ListNode(int val, ListNode next) { this.val = val; this.next = next; }\n * }\n */\nclass Solution {\n    public ListNode addTwoNumbers(ListNode l1, ListNode l2) {\n        ListNode ans = new ListNode();\n        ListNode a = ans;\n        int t = 0;\n        while(l1 != null || l2 != null){\n            if(l1 != null) {\n                t += l1.val;\n                l1 = l1.next;\n            }\n            if(l2 != null) {\n                t += l2.val;\n                l2 = l2.next;\n            }\n            a.next = new ListNode(t%10);\n            a = a.next;\n            t = t/10;\n        }\n        if(t != 0) a.next = new ListNode(t);\n        return ans.next;\n\n    }\n}\n3. æ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² s ï¼Œè¯·ä½ æ‰¾å‡ºå…¶ä¸­ä¸å«æœ‰é‡å¤å­—ç¬¦çš„ æœ€é•¿å­ä¸² çš„é•¿åº¦ã€‚\n\n\n\n\n\n\n\n\n\nè¾“å…¥: s = â€œabcabcbbâ€è¾“å‡º: 3è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ â€œabcâ€ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 3ã€‚\n\n\n\n\n\n\n\nåŒæŒ‡é’ˆ \n\nè®¾ç½®å·¦æŒ‡é’ˆåˆå€¼-1ï¼Œå³æŒ‡é’ˆåˆå€¼0ï¼Œintæ•°ç»„å¯¹åŒºé—´(l,r]å‡ºç°è¿‡çš„å­—æ¯è®¡æ•°\nforå¾ªç¯å¯¹å³æŒ‡é’ˆæŒ‡å‘çš„å­—æ¯è®¡æ•°\nå¦‚æœè®¡æ•°&lt;=1,æ›´æ–°ç­”æ¡ˆ\nå¦‚æœè®¡æ•°&gt;1,å·¦æŒ‡é’ˆå‘å³ç§»ï¼Œç›´åˆ°è®¡æ•°=1\n\n\n\n// æ•°ç»„è®¡æ•°\nclass Solution {\n    public int lengthOfLongestSubstring(String s) {\n        int a[] = new int[1000];\n        int l = -1, r = 0;\n        int maxl = 0;\n        for(r = 0; r&lt; s.length();r++){\n            a[(int)s.charAt(r)]+=1;     // è®¡æ•°\n            if(a[(int)s.charAt(r)]&lt;=1){ // ä¸é‡å¤æ›´æ–°ç­”æ¡ˆ\n                maxl = maxl&gt; (r-l) ? maxl: r-l; \n            }else{                      //é‡å¤å·¦æŒ‡é’ˆå‘å³ç§»ï¼Œç›´åˆ°ä¸é‡å¤\n                while(a[(int)s.charAt(r)]&gt;1){\n                    l+=1;\n                    a[(int)s.charAt(l)]-=1;\n                }\n            }\n        }\n        return maxl;\n    }\n    \n}\n// å“ˆå¸Œé›†åˆ\nclass Solution {\n    public int lengthOfLongestSubstring(String s) {\n        Set&lt;Character&gt; occ = new HashSet&lt;Character&gt;();\n        int len = s.length();\n        int l = -1, r = 0;\n        int maxl = 0;\n        for(r = 0; r&lt; s.length();r++){\n            while(occ.contains(s.charAt(r))) {\n                occ.remove(s.charAt(++l));\n            }\n            occ.add(s.charAt(r));\n            maxl = Math.max(maxl,r-l);\n        }\n        return maxl;\n    }\n    \n}\n\n\n\n\n\n\n\n\n\nHashSetï¼šå­˜å‚¨é›†åˆï¼Œå¯ä»¥ç”¨æ¥åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨\nHashSet&lt;Character&gt; hs = new HashSep&lt;Character&gt;();\n//æ·»åŠ \nhs.add(1);\n//åˆ¤æ–­æ˜¯å¦å­˜åœ¨\nhs.contains()\n//åˆ é™¤å…ƒç´ \nhs.remove(1)\n\n4. å¯»æ‰¾ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ä¸­ä½æ•°ç»™å®šä¸¤ä¸ªå¤§å°åˆ†åˆ«ä¸º m å’Œ n çš„æ­£åºï¼ˆä»å°åˆ°å¤§ï¼‰æ•°ç»„ nums1 å’Œ nums2ã€‚è¯·ä½ æ‰¾å‡ºå¹¶è¿”å›è¿™ä¸¤ä¸ªæ­£åºæ•°ç»„çš„ ä¸­ä½æ•° ã€‚\n\n\n\n\n\n\n\n\n\nè¾“å…¥ï¼šnums1 = [1,3], nums2 = [2]è¾“å‡ºï¼š2.00000è§£é‡Šï¼šåˆå¹¶æ•°ç»„ = [1,2,3] ï¼Œä¸­ä½æ•° 2\n\n\n\n\n\n\n\nsort\nåˆ©ç”¨ä¸¤æ•°ç»„æœ‰åºçš„æ€§è´¨ï¼Œå°†ä¸¤ä¸ªæ•°ç»„å½’å¹¶ä¸ºä¸€ä¸ªæ•°ç»„ã€‚\nç„¶åè¾“å‡ºä¸­ä½æ•°å³å¯ã€‚\n\n\nclass Solution {\n    public double findMedianSortedArrays(int[] nums1, int[] nums2) {\n        int l1 = nums1.length, l2 = nums2.length;\n        int[] nums = new int[l1+l2];\n        for(int i = 0;i &lt; l1; i++) {\n            nums[i] = nums1[i];\n        }\n        for(int i = 0; i &lt; l2; i++) {\n            nums[l1+i] = nums2[i];\n        }\n        Arrays.sort(nums);\n\n        if((l1 + l2) % 2 == 1) {\n            return (double)nums[(l1 + l2) / 2];\n        }else{\n            return (double)(nums[(l1 + l2) / 2]+nums[(l1 + l2) / 2 - 1]) / 2.0;\n        }\n    }\n}\n\n\n\n\n\n\n\né€’å½’\nè½¬æ¢ä¸ºæŸ¥æ‰¾ä¸¤ä¸ªæ•°ç»„ç¬¬kå°æ•°ï¼Œ\nåˆ†åˆ«çœ‹ä¸¤ä¸ªæ•°ç»„k/2çš„æ•°ï¼Œå°çš„é‚£ä¸ªå·¦è¾¹çš„æ•°ä¸€å®šä¸æ˜¯ç¬¬kå°ï¼Œé€’å½’ä¸‹å»ã€‚\næ³¨æ„è¾¹ç•Œã€‚\n\n\nclass Solution {\n    public double findMedianSortedArrays(int[] nums1, int[] nums2) {\n        int l1 = nums1.length, l2 = nums2.length;\n        if((l1 + l2) % 2 == 1) {\n            return findk(nums1,nums2,0,0,(l1+l2)/2+1);\n        }else{\n            return (findk(nums1,nums2,0,0,(l1+l2)/2)+findk(nums1,nums2,0,0,(l1+l2)/2+1)) / 2.0;\n        }\n    }\n    private double findk(int[] nums1,int[] nums2,int i,int j,int k){\n        //è¾¹ç•Œæƒ…å†µ\n        if(i == nums1.length) return (double)nums2[j+k-1];\n        if(j == nums2.length) return (double)nums1[i+k-1];\n        if(k==1) return Math.min(nums1[i],nums2[j]);\n        //æ ¹æ®æƒ…å†µå»é€’å½’ä¸‹å»\n        int x = Math.min(nums1.length - 1, i+k/2 - 1);\n        int y = Math.min(nums2.length - 1, j+k/2 - 1);\n        if(nums1[x] &lt; nums2[y]) return findk(nums1,nums2,x+1,j,k - (x - i) - 1);\n        else return findk(nums1,nums2,i,y+1,k - (y - j) - 1);\n    }\n}\n5. æœ€é•¿å›æ–‡å­ä¸²ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² sï¼Œæ‰¾åˆ° s ä¸­æœ€é•¿çš„å›æ–‡å­ä¸²ã€‚\n\n\n\n\n\n\n\n\n\nè¾“å…¥ï¼šs = â€œbabadâ€è¾“å‡ºï¼šâ€babâ€è§£é‡Šï¼šâ€abaâ€ åŒæ ·æ˜¯ç¬¦åˆé¢˜æ„çš„ç­”æ¡ˆã€‚\n\n\n\n\n\n\n\nä¸­å¿ƒæ‰©æ•£æ³•\nä»ä¸­é—´å‘ä¸¤è¾¹æ‰©ï¼Œç›´åˆ°ä¸å¯¹ç§°ã€‚ä¾æ¬¡å¯¹æ¯ä¸€ä¸ªä¸­å¿ƒè¿›è¡Œæ‰©å±•ï¼Œæ›´æ–°æœ€å¤§å€¼ã€‚\næ³¨æ„å•ä¸­å¿ƒå’ŒåŒä¸­å¿ƒä¸¤ç§æƒ…å†µã€‚\n\n\nclass Solution {\n    public String longestPalindrome(String s) {\n        int len = s.length();\n        int maxl = 0;\n        String ans = \"\";\n        for (int i = 0; i &lt; len; i++){\n            int j = 0;\n            while(i-j&gt;=0 &amp;&amp; i+j &lt; len &amp;&amp; s.charAt(i-j) == s.charAt(i+j)){\n                if(2*j+1&gt;maxl){\n                    maxl=2*j+1;\n                    ans = s.substring(i-j,i+j+1);\n                }\n                j++;\n            }\n             j = 0;\n            while(i-j&gt;=0 &amp;&amp; i+j+1 &lt; len &amp;&amp; s.charAt(i-j) == s.charAt(i+j+1)){\n                if(2*(j+1)&gt;maxl){\n                    maxl=2*(j+1);\n                    ans = s.substring(i-j,i+j+2);\n                }\n                j++;\n            }\n        }\n        return ans;\n    }\n}\n6. Z å­—å½¢å˜æ¢å°†ä¸€ä¸ªç»™å®šå­—ç¬¦ä¸² s æ ¹æ®ç»™å®šçš„è¡Œæ•° numRows ï¼Œä»¥ä»ä¸Šå¾€ä¸‹ã€ä»å·¦åˆ°å³è¿›è¡Œ Z å­—å½¢æ’åˆ—ã€‚\næ¯”å¦‚è¾“å…¥å­—ç¬¦ä¸²ä¸º â€œPAYPALISHIRINGâ€ è¡Œæ•°ä¸º 3 æ—¶ï¼Œæ’åˆ—å¦‚ä¸‹ï¼š\n\n\n\n\n\n\n\n\n\nP    A    H   NA P L S  I  I GY     I     Rä¹‹åï¼Œä½ çš„è¾“å‡ºéœ€è¦ä»å·¦å¾€å³é€è¡Œè¯»å–ï¼Œäº§ç”Ÿå‡ºä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œæ¯”å¦‚ï¼šâ€PAHNAPLSIIGYIRâ€ã€‚\n\n\n\n\n\n\n\næ•°å­¦è§„å¾‹\nè®¾è¡Œæ•°ä¸ºkï¼Œæ‰¾ä¸€ä¸‹æ¯ä¸€è¡Œçš„è§„å¾‹ï¼š\nåŒä¸€è¡Œç«–ç›´æ–¹å‘çš„å­—æ¯ä¸‹æ ‡èµ·å§‹ä¸ºi,å…¬å·®ä¸º2*(k-1)ï¼Œ\nåŒä¸€è¡Œæ–œæ–¹å‘çš„å­—æ¯ä¸‹æ ‡èµ·å§‹ä¸º2(k-1) - i,å…¬å·®ä¸º2\\(k-1)ã€‚\næ³¨æ„ä¸è¦è¶Šç•Œã€‚\n\n\nclass Solution {\npublic:\n    string convert(string s, int numRows) {\n        string ans = \"\";\n        for(int i = 0;i&lt;numRows;i++){\n            int j = 0;\n            if(numRows==1) return s;\n            while(i+j*2*(numRows-1)&lt;s.size()){\n                ans+=s[i+j*2*(numRows-1)];\n                if(i!=numRows-1 &amp;&amp; i!=0){\n                    if(i+j*2*(numRows-1)+2*(numRows-1-i)&lt;s.size()){\n                        ans+=s[i+j*2*(numRows-1)+2*(numRows-1-i)];\n                    }\n                }\n                j++;\n            }\n        }\n        return ans;\n    }\n};\n7. æ•´æ•°åè½¬ç»™ä½ ä¸€ä¸ª 32 ä½çš„æœ‰ç¬¦å·æ•´æ•° x ï¼Œè¿”å›å°† x ä¸­çš„æ•°å­—éƒ¨åˆ†åè½¬åçš„ç»“æœã€‚\nå¦‚æœåè½¬åæ•´æ•°è¶…è¿‡ 32 ä½çš„æœ‰ç¬¦å·æ•´æ•°çš„èŒƒå›´ [âˆ’231,  231 âˆ’ 1] ï¼Œå°±è¿”å› 0ã€‚\nå‡è®¾ç¯å¢ƒä¸å…è®¸å­˜å‚¨ 64 ä½æ•´æ•°ï¼ˆæœ‰ç¬¦å·æˆ–æ— ç¬¦å·ï¼‰ã€‚\n\n\n\n\n\n\n\n\n\nè¾“å…¥ï¼šx = 123è¾“å‡ºï¼š321 \n\n\n\n\n\n\n\nåˆç­‰æ•°å­¦\nä¸æ–­å–æœ€åä¸€ä½åŠ åˆ°ç­”æ¡ˆçš„æœ€å³è¾¹ã€‚\næ³¨æ„å¤„ç†è¶Šç•Œæƒ…å†µï¼š\n\n\\begin{array}{l}\nans*10 + x > pow(2,31) - 1\\\\\nans > (pow(2,31) - 1 - x)/10\\\\\nans*10 + x æ³¨æ„ï¼šä¸Šé¢çš„ansä¸ºæ­£æ•°\nä¸‹é¢æ˜¯ansä¸ºè´Ÿæ•°ï¼Œå…¶ä¸­xä¹Ÿæ˜¯è´Ÿæ•°ã€‚\n\n\nclass Solution {\n    public int reverse(int x) {\n        int ans = 0;\n        while(x !=0 ) {\n            if( x &lt; 0 &amp;&amp; ans &lt; (-Math.pow(2,31) - x %10) / 10) {\n                return 0;\n            }\n            if( x &gt; 0 &amp;&amp; ans &gt; (Math.pow(2,31) - x %10 -1) / 10){\n                return 0;\n            }\n            ans = ans * 10 + x % 10;\n            x = x / 10;\n        }\n        return ans;\n    }\n}\n8. å­—ç¬¦ä¸²è½¬æ¢æ•´æ•° (atoi)è¯·ä½ æ¥å®ç°ä¸€ä¸ª myAtoi(string s) å‡½æ•°ï¼Œä½¿å…¶èƒ½å°†å­—ç¬¦ä¸²è½¬æ¢æˆä¸€ä¸ª 32 ä½æœ‰ç¬¦å·æ•´æ•°ï¼ˆç±»ä¼¼ C/C++ ä¸­çš„ atoi å‡½æ•°ï¼‰ã€‚\nå‡½æ•° myAtoi(string s) çš„ç®—æ³•å¦‚ä¸‹ï¼š\nè¯»å…¥å­—ç¬¦ä¸²å¹¶ä¸¢å¼ƒæ— ç”¨çš„å‰å¯¼ç©ºæ ¼æ£€æŸ¥ä¸‹ä¸€ä¸ªå­—ç¬¦ï¼ˆå‡è®¾è¿˜æœªåˆ°å­—ç¬¦æœ«å°¾ï¼‰ä¸ºæ­£è¿˜æ˜¯è´Ÿå·ï¼Œè¯»å–è¯¥å­—ç¬¦ï¼ˆå¦‚æœæœ‰ï¼‰ã€‚ ç¡®å®šæœ€ç»ˆç»“æœæ˜¯è´Ÿæ•°è¿˜æ˜¯æ­£æ•°ã€‚ å¦‚æœä¸¤è€…éƒ½ä¸å­˜åœ¨ï¼Œåˆ™å‡å®šç»“æœä¸ºæ­£ã€‚è¯»å…¥ä¸‹ä¸€ä¸ªå­—ç¬¦ï¼Œç›´åˆ°åˆ°è¾¾ä¸‹ä¸€ä¸ªéæ•°å­—å­—ç¬¦æˆ–åˆ°è¾¾è¾“å…¥çš„ç»“å°¾ã€‚å­—ç¬¦ä¸²çš„å…¶ä½™éƒ¨åˆ†å°†è¢«å¿½ç•¥ã€‚å°†å‰é¢æ­¥éª¤è¯»å…¥çš„è¿™äº›æ•°å­—è½¬æ¢ä¸ºæ•´æ•°ï¼ˆå³ï¼Œâ€123â€ -&gt; 123ï¼Œ â€œ0032â€ -&gt; 32ï¼‰ã€‚å¦‚æœæ²¡æœ‰è¯»å…¥æ•°å­—ï¼Œåˆ™æ•´æ•°ä¸º 0 ã€‚å¿…è¦æ—¶æ›´æ”¹ç¬¦å·ï¼ˆä»æ­¥éª¤ 2 å¼€å§‹ï¼‰ã€‚å¦‚æœæ•´æ•°æ•°è¶…è¿‡ 32 ä½æœ‰ç¬¦å·æ•´æ•°èŒƒå›´ [âˆ’231,  231 âˆ’ 1] ï¼Œéœ€è¦æˆªæ–­è¿™ä¸ªæ•´æ•°ï¼Œä½¿å…¶ä¿æŒåœ¨è¿™ä¸ªèŒƒå›´å†…ã€‚å…·ä½“æ¥è¯´ï¼Œå°äº âˆ’231 çš„æ•´æ•°åº”è¯¥è¢«å›ºå®šä¸º âˆ’231 ï¼Œå¤§äº 231 âˆ’ 1 çš„æ•´æ•°åº”è¯¥è¢«å›ºå®šä¸º 231 âˆ’ 1 ã€‚è¿”å›æ•´æ•°ä½œä¸ºæœ€ç»ˆç»“æœã€‚æ³¨æ„ï¼š\næœ¬é¢˜ä¸­çš„ç©ºç™½å­—ç¬¦åªåŒ…æ‹¬ç©ºæ ¼å­—ç¬¦ â€˜ â€˜ ã€‚é™¤å‰å¯¼ç©ºæ ¼æˆ–æ•°å­—åçš„å…¶ä½™å­—ç¬¦ä¸²å¤–ï¼Œè¯·å‹¿å¿½ç•¥ ä»»ä½•å…¶ä»–å­—ç¬¦ã€‚\nç¤ºä¾‹ ï¼š\n\n\n\n\n\n\n\n\n\nè¾“å…¥ï¼šs = â€œ42â€è¾“å‡ºï¼š42\n\n\n\n\n\n\n\næ¨¡æ‹Ÿ\nä¸€æ­¥æ­¥æ¨¡æ‹Ÿï¼Œæ³¨æ„æ•°æ®è¶Šç•Œçš„æƒ…å†µï¼ˆå’Œ7å¤„ç†ç±»ä¼¼ï¼‰\n\n\nclass Solution {\n    public int myAtoi(String s) {\n        int l = 0;\n        int f = 1;\n        while(l &lt; s.length() &amp;&amp; s.charAt(l) == ' ') {\n            l++;\n        }\n        if(l &lt; s.length() &amp;&amp; s.charAt(l)=='-'){\n            f = -1;\n            l++;\n        }else if( l &lt; s.length() &amp;&amp; s.charAt(l)=='+' ){\n            l++;\n        }\n        int ans = 0;\n        while(l &lt; s.length() &amp;&amp; (s.charAt(l)&gt;='0' &amp;&amp; s.charAt(l)&lt;='9')){\n            int x = (int)s.charAt(l)-(int)'0';\n            if(f==-1 &amp;&amp; f*ans&lt;(-Math.pow(2,31)+x)/10) return -(int)Math.pow(-2,31);\n            if(f==1 &amp;&amp; ans&gt;(Math.pow(2,31)-x-1)/10) return (int)(Math.pow(2,31) - 1);\n            ans = ans*10 + x;\n            l++;\n        }\n\n        return f*ans;\n    }\n}\n9. å›æ–‡æ•°ç»™ä½ ä¸€ä¸ªæ•´æ•° x ï¼Œå¦‚æœ x æ˜¯ä¸€ä¸ªå›æ–‡æ•´æ•°ï¼Œè¿”å› true ï¼›å¦åˆ™ï¼Œè¿”å› false ã€‚\nå›æ–‡æ•°æ˜¯æŒ‡æ­£åºï¼ˆä»å·¦å‘å³ï¼‰å’Œå€’åºï¼ˆä»å³å‘å·¦ï¼‰è¯»éƒ½æ˜¯ä¸€æ ·çš„æ•´æ•°ã€‚ä¾‹å¦‚ï¼Œ121 æ˜¯å›æ–‡ï¼Œè€Œ 123 ä¸æ˜¯ã€‚\nç¤ºä¾‹ ï¼š\n\n\n\n\n\n\n\n\n\nè¾“å…¥ï¼šx = 121è¾“å‡ºï¼štrue\n\n\n\n\n\n\n\nåè½¬æ•°å­—\næŠŠæ•´æ•°å€’è¿‡æ¥æ¯”ä¸€ä¸‹å€¼å°±æœ‰äº†ã€‚\n\n\nclass Solution {\n    public boolean isPalindrome(int x) {\n        if(x &lt; 0) return false;\n        int y = 0;\n        int xx = x;\n        while(xx != 0){\n            y = y * 10 + xx % 10;\n            xx = xx / 10;\n        }\n        if(y == x){\n            return true;\n        }\n        else {\n            return false;\n        }\n\n    }\n}\n\n10. æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ç»™ä½ ä¸€ä¸ªå­—ç¬¦ä¸² s å’Œä¸€ä¸ªå­—ç¬¦è§„å¾‹ pï¼Œè¯·ä½ æ¥å®ç°ä¸€ä¸ªæ”¯æŒ â€˜.â€™ å’Œ â€˜*â€™ çš„æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ã€‚\nâ€˜.â€™ åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦â€˜*â€™ åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ªå‰é¢çš„é‚£ä¸€ä¸ªå…ƒç´ æ‰€è°“åŒ¹é…ï¼Œæ˜¯è¦æ¶µç›– æ•´ä¸ª å­—ç¬¦ä¸² sçš„ï¼Œè€Œä¸æ˜¯éƒ¨åˆ†å­—ç¬¦ä¸²ã€‚\nç¤ºä¾‹ ï¼š\n\n\n\n\n\n\n\n\n\nè¾“å…¥ï¼šs = â€œaaâ€ p = â€œaâ€è¾“å‡ºï¼šfalseè§£é‡Šï¼šâ€aâ€ æ— æ³•åŒ¹é… â€œaaâ€ æ•´ä¸ªå­—ç¬¦ä¸²ã€‚\n\n\n\n\n\n\n\nå¤ªéš¾äº†ï¼Œæˆ‘æ‘Šç‰Œäº†\n\n\n11. ç››æœ€å¤šæ°´çš„å®¹å™¨ç»™ä½  n ä¸ªéè´Ÿæ•´æ•° a1ï¼Œa2ï¼Œâ€¦ï¼Œanï¼Œæ¯ä¸ªæ•°ä»£è¡¨åæ ‡ä¸­çš„ä¸€ä¸ªç‚¹ (i, ai) ã€‚åœ¨åæ ‡å†…ç”» n æ¡å‚ç›´çº¿ï¼Œå‚ç›´çº¿ i çš„ä¸¤ä¸ªç«¯ç‚¹åˆ†åˆ«ä¸º (i, ai) å’Œ (i, 0) ã€‚æ‰¾å‡ºå…¶ä¸­çš„ä¸¤æ¡çº¿ï¼Œä½¿å¾—å®ƒä»¬ä¸ x è½´å…±åŒæ„æˆçš„å®¹å™¨å¯ä»¥å®¹çº³æœ€å¤šçš„æ°´ã€‚\nè¯´æ˜ï¼šä½ ä¸èƒ½å€¾æ–œå®¹å™¨ã€‚\n \nç¤ºä¾‹ ï¼š\n\n\n\n\n\n\n\n\n\nè¾“å…¥ï¼š[1,8,6,2,5,4,8,3,7]è¾“å‡ºï¼š49è§£é‡Šï¼šå›¾ä¸­å‚ç›´çº¿ä»£è¡¨è¾“å…¥æ•°ç»„ [1,8,6,2,5,4,8,3,7]ã€‚åœ¨æ­¤æƒ…å†µä¸‹ï¼Œå®¹å™¨èƒ½å¤Ÿå®¹çº³æ°´ï¼ˆè¡¨ç¤ºä¸ºè“è‰²éƒ¨åˆ†ï¼‰çš„æœ€å¤§å€¼ä¸º 49ã€‚\n :::warning è´ªå¿ƒ+åŒæŒ‡é’ˆ\nå·¦å³æŒ‡é’ˆåˆ†åˆ«ä»ä¸¤ç«¯å¼€å§‹ï¼Œè®¡ç®—ä¸€ä¸‹æ­¤æ—¶çš„æ°´é‡ã€‚ä¸‹é¢é‡ç‚¹è´ªå¿ƒï¼š\n\nå‡è®¾æˆ‘æƒ³æ°´é‡æ›´å¤šï¼Œç§»åŠ¨æŒ‡é’ˆï¼Œå®½åº¦å˜çŸ­ï¼Œå¿…é¡»ä½¿çŸ­æ¿è¾¹é•¿æ‰æœ‰å¯èƒ½ï¼Œä¹Ÿå°±æ˜¯çŸ­æ¿ä¸å¯èƒ½åœ¨æ˜¯æ›´ä¼˜è§£çš„è¾¹ç•Œã€‚\né‚£ä¹ˆæˆ‘ä»¬å°è¯•ç§»åŠ¨é«˜åº¦çŸ®çš„æŒ‡é’ˆï¼Œé‡æ–°è®¡ç®—æ°´é‡ã€‚\næŒ‰ç…§æ­¥éª¤2å¾ªç¯ç›´åˆ°ä¸¤ä¸ªæŒ‡é’ˆç¢°å¤´ã€‚\n\n:::\nclass Solution {\n    public int maxArea(int[] height) {\n        int l = 0;\n        int r = height.length - 1;\n        int ans = 0;\n        while(l&lt;r){\n            ans = Math.max(ans, Math.min(height[l], height[r])*(r-l));\n            if(height[l] &gt; height[r] ) {\n                r--;\n            }else{\n                l++;\n            }\n        }\n        return ans;\n    }\n}\n12. æ•´æ•°è½¬ç½—é©¬æ•°å­—ç½—é©¬æ•°å­—åŒ…å«ä»¥ä¸‹ä¸ƒç§å­—ç¬¦ï¼š Iï¼Œ Vï¼Œ Xï¼Œ Lï¼ŒCï¼ŒD å’Œ Mã€‚\nå­—ç¬¦          æ•°å€¼I             1V             5X             10L             50C             100D             500M             1000ä¾‹å¦‚ï¼Œ ç½—é©¬æ•°å­— 2 å†™åš II ï¼Œå³ä¸ºä¸¤ä¸ªå¹¶åˆ—çš„ 1ã€‚12 å†™åš XII ï¼Œå³ä¸º X + II ã€‚ 27 å†™åš  XXVII, å³ä¸º XX + V + II ã€‚\né€šå¸¸æƒ…å†µä¸‹ï¼Œç½—é©¬æ•°å­—ä¸­å°çš„æ•°å­—åœ¨å¤§çš„æ•°å­—çš„å³è¾¹ã€‚ä½†ä¹Ÿå­˜åœ¨ç‰¹ä¾‹ï¼Œä¾‹å¦‚ 4 ä¸å†™åš IIIIï¼Œè€Œæ˜¯ IVã€‚æ•°å­— 1 åœ¨æ•°å­— 5 çš„å·¦è¾¹ï¼Œæ‰€è¡¨ç¤ºçš„æ•°ç­‰äºå¤§æ•° 5 å‡å°æ•° 1 å¾—åˆ°çš„æ•°å€¼ 4 ã€‚åŒæ ·åœ°ï¼Œæ•°å­— 9 è¡¨ç¤ºä¸º IXã€‚è¿™ä¸ªç‰¹æ®Šçš„è§„åˆ™åªé€‚ç”¨äºä»¥ä¸‹å…­ç§æƒ…å†µï¼š\nI å¯ä»¥æ”¾åœ¨ V (5) å’Œ X (10) çš„å·¦è¾¹ï¼Œæ¥è¡¨ç¤º 4 å’Œ 9ã€‚X å¯ä»¥æ”¾åœ¨ L (50) å’Œ C (100) çš„å·¦è¾¹ï¼Œæ¥è¡¨ç¤º 40 å’Œ 90ã€‚C å¯ä»¥æ”¾åœ¨ D (500) å’Œ M (1000) çš„å·¦è¾¹ï¼Œæ¥è¡¨ç¤º 400 å’Œ 900ã€‚ç»™ä½ ä¸€ä¸ªæ•´æ•°ï¼Œå°†å…¶è½¬ä¸ºç½—é©¬æ•°å­—ã€‚\nç¤ºä¾‹ :\n\n\n\n\n\n\n\n\n\nè¾“å…¥: num = 3è¾“å‡º: â€œIIIâ€\n :::warning è´ªå¿ƒ\nç”¨ä¸¤ä¸ªæ•°ç»„åˆ—å¥½æ•°å­—ä»¥åŠå¯¹åº”çš„å­—æ¯ï¼Œ\nè´ªå¿ƒæ³•ä»å¤§åˆ°å°ä¸æ–­å‡æ•°ï¼Œå°¾ç«¯æ·»åŠ å¯¹åº”çš„å­—æ¯\n:::\nclass Solution {\n    public String intToRoman(int num) {\n        int[] nums = {1000, 900, 500, 400, 100, 90, 50, 40, 10, 9, 5, 4, 1};\n        String[] s = {\"M\", \"CM\", \"D\", \"CD\", \"C\", \"XC\", \"L\", \"XL\", \"X\", \"IX\", \"V\", \"IV\", \"I\"};\n        int l = 0;\n        String ans = \"\";\n        while(l &lt; nums.length){\n            while(num&gt;=nums[l]){\n                num -= nums[l];\n                ans += s[l];\n            }\n            l++;\n        }\n        return ans;\n\n    }\n}\n13. ç½—é©¬æ•°å­—è½¬æ•´æ•°ç½—é©¬æ•°å­—åŒ…å«ä»¥ä¸‹ä¸ƒç§å­—ç¬¦: Iï¼Œ Vï¼Œ Xï¼Œ Lï¼ŒCï¼ŒD å’Œ Mã€‚\nå­—ç¬¦          æ•°å€¼I             1V             5X             10L             50C             100D             500M             1000ä¾‹å¦‚ï¼Œ ç½—é©¬æ•°å­— 2 å†™åš II ï¼Œå³ä¸ºä¸¤ä¸ªå¹¶åˆ—çš„ 1 ã€‚12 å†™åš XII ï¼Œå³ä¸º X + II ã€‚ 27 å†™åš  XXVII, å³ä¸º XX + V + II ã€‚\né€šå¸¸æƒ…å†µä¸‹ï¼Œç½—é©¬æ•°å­—ä¸­å°çš„æ•°å­—åœ¨å¤§çš„æ•°å­—çš„å³è¾¹ã€‚ä½†ä¹Ÿå­˜åœ¨ç‰¹ä¾‹ï¼Œä¾‹å¦‚ 4 ä¸å†™åš IIIIï¼Œè€Œæ˜¯ IVã€‚æ•°å­— 1 åœ¨æ•°å­— 5 çš„å·¦è¾¹ï¼Œæ‰€è¡¨ç¤ºçš„æ•°ç­‰äºå¤§æ•° 5 å‡å°æ•° 1 å¾—åˆ°çš„æ•°å€¼ 4 ã€‚åŒæ ·åœ°ï¼Œæ•°å­— 9 è¡¨ç¤ºä¸º IXã€‚è¿™ä¸ªç‰¹æ®Šçš„è§„åˆ™åªé€‚ç”¨äºä»¥ä¸‹å…­ç§æƒ…å†µï¼š\nI å¯ä»¥æ”¾åœ¨ V (5) å’Œ X (10) çš„å·¦è¾¹ï¼Œæ¥è¡¨ç¤º 4 å’Œ 9ã€‚X å¯ä»¥æ”¾åœ¨ L (50) å’Œ C (100) çš„å·¦è¾¹ï¼Œæ¥è¡¨ç¤º 40 å’Œ 90ã€‚C å¯ä»¥æ”¾åœ¨ D (500) å’Œ M (1000) çš„å·¦è¾¹ï¼Œæ¥è¡¨ç¤º 400 å’Œ 900ã€‚ç»™å®šä¸€ä¸ªç½—é©¬æ•°å­—ï¼Œå°†å…¶è½¬æ¢æˆæ•´æ•°ã€‚\nç¤ºä¾‹:\n\n\n\n\n\n\n\n\n\nè¾“å…¥: s = â€œIIIâ€è¾“å‡º: 3\n :::warning æ¨¡æ‹Ÿ\nä»å·¦å‘å³æšä¸¾æ¯ä¸€ä¸ªå­—æ¯ï¼ŒåŠ ä¸Šå¯¹åº”çš„é’±æ•°ã€‚\næ³¨æ„å°å•ä½åœ¨å¤§å•ä½å·¦è¾¹çš„æƒ…å†µä»£è¡¨è´Ÿï¼Œä¹‹å‰åŠ äº†ä¸€ä¸ªï¼Œåº”è¯¥å‡å»ä¸¤ä¸ªã€‚\n:::\nclass Solution {\n    public int romanToInt(String s) {\n        Map&lt;Character, Integer&gt; values = new HashMap&lt;Character, Integer&gt;(){\n            {\n                put('I',1);\n                put('V',5);\n                put('X',10);\n                put('L',50);\n                put('C',100);\n                put('D',500);\n                put('M',1000);\n            }\n        };\n        int ans = 0;\n        for(int i = 0;i&lt;s.length();i++){\n            ans+=values.get(s.charAt(i));\n            if(i+1&lt;s.length() &amp;&amp; values.get(s.charAt(i))&lt;values.get(s.charAt(i+1))){\n                ans-=2*values.get(s.charAt(i));\n            }\n        }\n        return ans;\n    }\n}\n14. æœ€é•¿å…¬å…±å‰ç¼€ç¼–å†™ä¸€ä¸ªå‡½æ•°æ¥æŸ¥æ‰¾å­—ç¬¦ä¸²æ•°ç»„ä¸­çš„æœ€é•¿å…¬å…±å‰ç¼€ã€‚\nå¦‚æœä¸å­˜åœ¨å…¬å…±å‰ç¼€ï¼Œè¿”å›ç©ºå­—ç¬¦ä¸² â€œâ€ã€‚\nç¤ºä¾‹ï¼š\n\n\n\n\n\n\n\n\n\nè¾“å…¥ï¼šstrs = [â€œflowerâ€,â€flowâ€,â€flightâ€]è¾“å‡ºï¼šâ€flâ€\n :::warning æ¨¡æ‹Ÿ\né¦–å…ˆåšåˆ°æœ€çŸ­çš„å­—ç¬¦ä¸²é•¿åº¦ï¼Œ\nç„¶åä»å·¦å‘å³çœ‹æ¯ä¸€ä½æ˜¯å¦éƒ½ç›¸ç­‰ï¼Œä¸ç›¸ç­‰è¿”å›ç»“æœå³å¯ã€‚\nç‰¹åˆ¤é•¿åº¦ä¸º0çš„æƒ…å†µã€‚\n:::\nclass Solution {\n    public String longestCommonPrefix(String[] strs) {\n        int max = strs[0].length();\n        for( int i = 0; i&lt; strs.length; i++){\n            max = Math.min(strs[i].length(),max);\n        }\n        if(max==0) return \"\";\n        String ans = \"\";\n        int j;\n        for(int i = 0;i &lt; max; i++){\n            int f = 1;\n            for( j = 1;j&lt;strs.length;j++){\n                if(strs[j].charAt(i)!=strs[j-1].charAt(i)){\n                    f = 0;\n                }\n            }\n            if(f==0){\n                break;\n            }\n            ans+=strs[0].charAt(i);\n        }\n        return ans;\n    }\n}\n15. ä¸‰æ•°ä¹‹å’Œç»™ä½ ä¸€ä¸ªåŒ…å« n ä¸ªæ•´æ•°çš„æ•°ç»„ numsï¼Œåˆ¤æ–­ nums ä¸­æ˜¯å¦å­˜åœ¨ä¸‰ä¸ªå…ƒç´  aï¼Œbï¼Œc ï¼Œä½¿å¾— a + b + c = 0 ï¼Ÿè¯·ä½ æ‰¾å‡ºæ‰€æœ‰å’Œä¸º 0 ä¸”ä¸é‡å¤çš„ä¸‰å…ƒç»„ã€‚\næ³¨æ„ï¼šç­”æ¡ˆä¸­ä¸å¯ä»¥åŒ…å«é‡å¤çš„ä¸‰å…ƒç»„ã€‚\nç¤ºä¾‹ï¼š\n\n\n\n\n\n\n\n\n\nè¾“å…¥ï¼šnums = [-1,0,1,2,-1,-4]è¾“å‡ºï¼š[[-1,-1,2],[-1,0,1]]\n\n\n\n\n\n\n\n\nå‰æçŸ¥è¯†ï¼š\næœ‰åºæ•°ç»„æ±‚ä¸¤æ•°ä¹‹å’Œä¸ºå®šå€¼ï¼Œå¯ä»¥ç”¨åŒæŒ‡é’ˆï¼šå’Œå¤§äºå®šå€¼æ—¶å³æŒ‡é’ˆå·¦ç§»ï¼Œå’Œå°äºå®šå€¼å·¦æŒ‡é’ˆå³ç§»ï¼ŒO(n)\næœ¬é¢˜ç­–ç•¥ï¼š\næš´åŠ›è¦O(n^3)ï¼Œå¯ä»¥å…ˆæ’åºï¼Œæšä¸¾ç¬¬ä¸€ä¸ªæ•°ï¼Œé—®é¢˜è½¬åŒ–ä¸ºå‰æçŸ¥è¯†çš„æ¨¡å‹ã€‚\næœ€åO(n^2)å¯ä»¥è§£å†³ã€‚\næ³¨æ„è·³è¿‡é‡å¤ç»“æœã€‚\n\n\nclass Solution {\n    public List&lt;List&lt;Integer&gt;&gt; threeSum(int[] nums) {\n        Arrays.sort(nums);\n        List&lt;List&lt;Integer&gt;&gt; ans = new ArrayList&lt;List&lt;Integer&gt;&gt;();\n       \n        for(int i = 0;i &lt; nums.length; i++){\n            //ç¡®ä¿ä¸é‡å¤\n            if(i&gt;0 &amp;&amp; nums[i]==nums[i-1]) continue;\n            int l = i+1, r = nums.length-1,target = -nums[i];\n            while(l&lt;r){\n\n                if(nums[l]+nums[r]&gt;target) {\n                    r--;\n                }\n                else if(nums[l]+nums[r]&lt;target){\n                    l++;\n\n                }\n                else {\n                    List&lt;Integer&gt; n = new ArrayList&lt;Integer&gt;();\n                    n.add(nums[i]);\n                    n.add(nums[l]);\n                    n.add(nums[r]);\n                    ans.add(n);\n                    r--;l++;\n                    //ç¡®ä¿ä¸é‡å¤\n                    while(l&lt;nums.length &amp;&amp; nums[l]==nums[l-1]) l++;\n                    while(r&gt;=0 &amp;&amp; nums[r]==nums[r+1]) r--;\n                }\n            }\n        }\n        return ans;\n    }\n}\n16. æœ€æ¥è¿‘çš„ä¸‰æ•°ä¹‹å’Œç»™ä½ ä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•´æ•°æ•°ç»„ nums å’Œ ä¸€ä¸ªç›®æ ‡å€¼ targetã€‚è¯·ä½ ä» nums ä¸­é€‰å‡ºä¸‰ä¸ªæ•´æ•°ï¼Œä½¿å®ƒä»¬çš„å’Œä¸ target æœ€æ¥è¿‘ã€‚\nè¿”å›è¿™ä¸‰ä¸ªæ•°çš„å’Œã€‚\nå‡å®šæ¯ç»„è¾“å…¥åªå­˜åœ¨æ°å¥½ä¸€ä¸ªè§£ã€‚\nç¤ºä¾‹ï¼š\n\n\n\n\n\n\n\n\n\nè¾“å…¥ï¼šnums = [-1,2,1,-4], target = 1è¾“å‡ºï¼š2è§£é‡Šï¼šä¸ target æœ€æ¥è¿‘çš„å’Œæ˜¯ 2 (-1 + 2 + 1 = 2) ã€‚\n\n\n\n\n\n\n\næš´åŠ›\nä¸‰æ¬¡å¾ªç¯è§£å†³\n\n\nclass Solution {\n    public int threeSumClosest(int[] nums, int target) {\n        Arrays.sort(nums);\n        int ans = nums[0]+nums[1]+nums[2];\n        for(int i = 0;i&lt;nums.length;i++){\n            for(int j = i+1;j&lt;nums.length;j++){\n                for(int k = j+1;k&lt;nums.length;k++){\n                    //System.out.println(\"\"+i+j+k);\n                    if(Math.abs(nums[i]+nums[j]+nums[k]-target)&lt;Math.abs(target-ans)){\n                        ans = nums[i]+nums[j]+nums[k];\n                    }\n                    if(nums[i]+nums[j]+nums[k]&gt;target){\n                        break;\n                    }\n                }\n            }\n        }\n        return ans;\n\n    }\n}\n\n\n\n\n\n\n\næ’åº+åŒæŒ‡é’ˆ\nä¸15é¢˜å¾ˆåƒä¸æ–­æšä¸¾æŒ‡é’ˆï¼š\nå’Œå¤§äºå³æŒ‡é’ˆå·¦ç§»ï¼Œå’Œå°äºå·¦æŒ‡é’ˆå³ç§»ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚\n\n\n17. ç”µè¯å·ç çš„å­—æ¯ç»„åˆç»™å®šä¸€ä¸ªä»…åŒ…å«æ•°å­— 2-9 çš„å­—ç¬¦ä¸²ï¼Œè¿”å›æ‰€æœ‰å®ƒèƒ½è¡¨ç¤ºçš„å­—æ¯ç»„åˆã€‚ç­”æ¡ˆå¯ä»¥æŒ‰ ä»»æ„é¡ºåº è¿”å›ã€‚\nç»™å‡ºæ•°å­—åˆ°å­—æ¯çš„æ˜ å°„å¦‚ä¸‹ï¼ˆä¸ç”µè¯æŒ‰é”®ç›¸åŒï¼‰ã€‚æ³¨æ„ 1 ä¸å¯¹åº”ä»»ä½•å­—æ¯ã€‚\n\nç¤ºä¾‹ï¼š\n\n\n\n\n\n\n\n\n\nè¾“å…¥ï¼šdigits = â€œ23â€è¾“å‡ºï¼š[â€œadâ€,â€aeâ€,â€afâ€,â€bdâ€,â€beâ€,â€bfâ€,â€cdâ€,â€ceâ€,â€cfâ€]\n\n\n\n\n\n\n\n\n\n\n18. å››æ•°ä¹‹å’Œç»™ä½ ä¸€ä¸ªç”± n ä¸ªæ•´æ•°ç»„æˆçš„æ•°ç»„ nums ï¼Œå’Œä¸€ä¸ªç›®æ ‡å€¼ target ã€‚è¯·ä½ æ‰¾å‡ºå¹¶è¿”å›æ»¡è¶³ä¸‹è¿°å…¨éƒ¨æ¡ä»¶ä¸”ä¸é‡å¤çš„å››å…ƒç»„ [nums[a], nums[b], nums[c], nums[d]] ï¼ˆè‹¥ä¸¤ä¸ªå››å…ƒç»„å…ƒç´ ä¸€ä¸€å¯¹åº”ï¼Œåˆ™è®¤ä¸ºä¸¤ä¸ªå››å…ƒç»„é‡å¤ï¼‰ï¼š\n0 &lt;= a, b, c, d &lt; naã€bã€c å’Œ d äº’ä¸ç›¸åŒnums[a] + nums[b] + nums[c] + nums[d] == targetä½ å¯ä»¥æŒ‰ ä»»æ„é¡ºåº è¿”å›ç­”æ¡ˆ ã€‚\nç¤ºä¾‹ï¼š\n\n\n\n\n\n\n\n\n\nè¾“å…¥ï¼šnums = [1,0,-1,0,-2,2], target = 0è¾“å‡ºï¼š[[-2,-1,1,2],[-2,0,0,2],[-1,0,0,1]]\n\n\n\n\n\n\n\næ’åº+åŒæŒ‡é’ˆ\nä¸15é¢˜å¾ˆåƒ,å†åŠ ä¸€å±‚å¾ªç¯å³å¯ã€‚\n\n\nclass Solution {\n    public List&lt;List&lt;Integer&gt;&gt; fourSum(int[] nums, int target) {\n        Arrays.sort(nums);\n        List&lt;List&lt;Integer&gt;&gt; ans = new ArrayList&lt;List&lt;Integer&gt;&gt;();\n        for(int i = 0;i&lt;nums.length;i++){\n            if(i&gt;0 &amp;&amp; nums[i]==nums[i-1]) continue;\n            for(int j = i+1;j&lt;nums.length;j++){\n                if(j&gt;i+1 &amp;&amp; nums[j]==nums[j-1]) continue;\n                int l = j+1,r = nums.length-1,t = target-(nums[i]+nums[j]);\n                while(l&lt;r){\n                    if(nums[l]+nums[r]&gt;t) r--;\n                    else if(nums[l]+nums[r]&lt;t) l++;\n                    else{\n                        List&lt;Integer&gt; new_ans = new ArrayList&lt;Integer&gt;();\n                        new_ans.add(nums[i]);\n                        new_ans.add(nums[j]);\n                        new_ans.add(nums[l]);\n                        new_ans.add(nums[r]);\n                        ans.add(new_ans);\n                        l++;r--;\n                        while(l&lt;nums.length &amp;&amp; nums[l]==nums[l-1]) l++;\n                        while(r&gt;j &amp;&amp; nums[r]==nums[r+1]) r--;\n\n                    }\n                }\n            }\n        }\n        return ans;\n    }\n}\n19. åˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ N ä¸ªç»“ç‚¹ç»™ä½ ä¸€ä¸ªé“¾è¡¨ï¼Œåˆ é™¤é“¾è¡¨çš„å€’æ•°ç¬¬ n ä¸ªç»“ç‚¹ï¼Œå¹¶ä¸”è¿”å›é“¾è¡¨çš„å¤´ç»“ç‚¹ã€‚\n\nç¤ºä¾‹ï¼š\n\n\n\n\n\n\n\n\n\nè¾“å…¥ï¼šhead = [1,2,3,4,5], n = 2è¾“å‡ºï¼š[1,2,3,5]\n\n\n\n\n\n\n\nåŒæŒ‡é’ˆ\nå³æŒ‡é’ˆå…ˆèµ°næ­¥ï¼Œç„¶åå·¦å³æŒ‡é’ˆä¸€èµ·å‘å³èµ°ï¼Œç›´åˆ°å³æŒ‡é’ˆåˆ°å¤´ï¼Œç„¶åå·¦æŒ‡é’ˆè¿›è¡Œåˆ é™¤èŠ‚ç‚¹æ“ä½œã€‚\nç‰¹åˆ¤è§£å†³åˆ é™¤ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„æƒ…å†µã€‚\n\n\n/**\n * Definition for singly-linked list.\n * public class ListNode {\n *     int val;\n *     ListNode next;\n *     ListNode() {}\n *     ListNode(int val) { this.val = val; }\n *     ListNode(int val, ListNode next) { this.val = val; this.next = next; }\n * }\n */\nclass Solution {\n    public ListNode removeNthFromEnd(ListNode head, int n) {\n        int len = 0;\n        ListNode l = head;\n        while(l!=null){\n            len++;\n            l = l.next;\n        }\n        if(n==len) return head.next;\n        ListNode l1 = head;\n        ListNode l2 = head;\n        while(n!= 0){\n            l2 = l2.next;\n            n--;\n        }\n        while(l2.next != null){\n            l1 = l1.next;\n            l2 = l2.next;\n        }\n        if(l1.next !=null) l1.next = l1.next.next;\n        else l1.next = null;\n        return head;\n\n    }\n}\npsï¼šå¯ä»¥æ·»åŠ é¢å¤–å¤´èŠ‚ç‚¹ï¼Œä¼˜åŒ–ç‰¹åˆ¤æƒ…å†µã€‚\n\n\n\n\n\n\n\nèµ°ä¸¤é\nå…ˆèµ°ä¸€éè®¡ç®—é•¿åº¦ï¼Œå†èµ°ä¸€éæ‰¾åˆ°å€’æ•°ç¬¬nä¸ªèŠ‚ç‚¹ã€‚\n\n\n\n\n\n\n\n\n\næ ˆ\nå…ˆå…¨å…¥æ ˆï¼Œå†å‡ºæ ˆnä¸ªå³å¯æ‰¾åˆ°åˆ é™¤çš„ä½ç½®ã€‚\n\n\nclass Solution {\n    public ListNode removeNthFromEnd(ListNode head, int n) {\n        ListNode dummy = new ListNode(0, head);\n        Deque&lt;ListNode&gt; stack = new LinkedList&lt;ListNode&gt;();\n        ListNode cur = dummy;\n        while (cur != null) {\n            stack.push(cur);\n            cur = cur.next;\n        }\n        for (int i = 0; i &lt; n; ++i) {\n            stack.pop();\n        }\n        ListNode prev = stack.peek();\n        prev.next = prev.next.next;\n        ListNode ans = dummy.next;\n        return ans;\n    }\n}\n20. æœ‰æ•ˆçš„æ‹¬å·ç»™å®šä¸€ä¸ªåªåŒ…æ‹¬ â€˜(â€˜ï¼Œâ€™)â€™ï¼Œâ€™{â€˜ï¼Œâ€™}â€™ï¼Œâ€™[â€˜ï¼Œâ€™]â€™ çš„å­—ç¬¦ä¸² s ï¼Œåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æœ‰æ•ˆã€‚\næœ‰æ•ˆå­—ç¬¦ä¸²éœ€æ»¡è¶³ï¼š\nå·¦æ‹¬å·å¿…é¡»ç”¨ç›¸åŒç±»å‹çš„å³æ‹¬å·é—­åˆã€‚å·¦æ‹¬å·å¿…é¡»ä»¥æ­£ç¡®çš„é¡ºåºé—­åˆã€‚\nç¤ºä¾‹ï¼š\n\n\n\n\n\n\n\n\n\nè¾“å…¥ï¼šs = â€œ()â€è¾“å‡ºï¼štrue\n\n\n\n\n\n\n\næ ˆ\nç”¨å­—ç¬¦æ•°ç»„æ¨¡æ‹Ÿæ ˆï¼š\n\né‡åˆ°å·¦æ‹¬å·å…¥æ ˆã€‚\né‡åˆ°å³æ‹¬å·å‡ºæ ˆï¼Œåˆ¤æ–­æ˜¯å¦åŒ¹é…ï¼Œä¸åŒ¹é…ç›´æ¥è¿”å›ã€‚\næœ€åéå†å®Œå¦‚æœæ ˆéç©ºè¯´æ˜ä¸åŒ¹é…ã€‚\n\n\n\nclass Solution {\n    public boolean isValid(String s) {\n        char z[] = new char[10005];\n        int l = 0;\n        for(int i = 0;i&lt;s.length();i++){\n            if(s.charAt(i)=='(' || s.charAt(i)=='[' || s.charAt(i)=='{'){\n                z[l++] = s.charAt(i);\n            }else{\n                if(l&lt;=0) return false;\n                if((s.charAt(i)==')' &amp;&amp; z[l-1]!='(') || (s.charAt(i)==']' &amp;&amp; z[l-1]!='[') || (s.charAt(i)=='}' &amp;&amp; z[l-1]!='{')){\n                    return false;\n                }else l--;\n            }\n        }\n        if(l!=0) return false;\n        return true;\n    }\n}\n21. åˆå¹¶ä¸¤ä¸ªæœ‰åºé“¾è¡¨å°†ä¸¤ä¸ªå‡åºé“¾è¡¨åˆå¹¶ä¸ºä¸€ä¸ªæ–°çš„ å‡åº é“¾è¡¨å¹¶è¿”å›ã€‚æ–°é“¾è¡¨æ˜¯é€šè¿‡æ‹¼æ¥ç»™å®šçš„ä¸¤ä¸ªé“¾è¡¨çš„æ‰€æœ‰èŠ‚ç‚¹ç»„æˆçš„ã€‚ \nç¤ºä¾‹ï¼š\n\nè¾“å…¥ï¼šl1 = [1,2,4], l2 = [1,3,4]è¾“å‡ºï¼š[1,1,2,3,4,4]\næ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰é“¾æ¥ï¼šhttps://leetcode-cn.com/problems/merge-two-sorted-listsè‘—ä½œæƒå½’é¢†æ‰£ç½‘ç»œæ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»å®˜æ–¹æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚\n\n\n\n\n\n\n\næ¨¡æ‹Ÿ\nç›´æ¥ä¸€ä¸ªä¸ªåŠ åˆ°æ–°é“¾è¡¨é‡Œï¼Œ\næ³¨æ„æœ€åå‰©ä¸€ä¸ªé“¾è¡¨çš„æƒ…å†µï¼Œç›´æ¥è¿½åŠ åˆ°ç»“æœé‡Œã€‚\n\n\nclass Solution {\n    public ListNode mergeTwoLists(ListNode l1, ListNode l2) {\n        ListNode ans = new ListNode();\n        ListNode a = ans;\n        while(l1 != null &amp;&amp; l2 !=null){\n            if(l1.val&lt;l2.val){\n                a.next = l1;\n                a = l1;\n                l1 = l1.next;\n            }else{\n                a.next = l2;\n                a = l2;\n                l2 = l2.next;\n            }\n        }\n        if(l1 != null) a.next = l1;\n        if(l2 != null) a.next = l2;\n        return ans.next;\n\n    }\n}\n\n\n\n\n\n\n\n\né€’å½’\nå…ˆåˆ¤æ–­è¾¹ç•Œæƒ…å†µï¼Œå†åˆ¤æ–­å¸¸è§„æƒ…å†µã€‚\n\n\nclass Solution {\n    public ListNode mergeTwoLists(ListNode l1, ListNode l2) {\n        if(l1 == null) return l2;\n        if(l2 == null) return l1;\n        if(l1.val &lt; l2.val){\n            ListNode a = l1;\n            a.next = mergeTwoLists(l1.next,l2);\n            return a;\n        }else{\n            ListNode a = l2;\n            a.next = mergeTwoLists(l2.next,l1);\n            return a;\n        }\n\n    }\n}\n22. æ‹¬å·ç”Ÿæˆæ•°å­— n ä»£è¡¨ç”Ÿæˆæ‹¬å·çš„å¯¹æ•°ï¼Œè¯·ä½ è®¾è®¡ä¸€ä¸ªå‡½æ•°ï¼Œç”¨äºèƒ½å¤Ÿç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„å¹¶ä¸” æœ‰æ•ˆçš„ æ‹¬å·ç»„åˆã€‚\n\n\n\n\n\n\n\n\n\nè¾“å…¥ï¼šn = 3è¾“å‡ºï¼š[â€œ((()))â€,â€(()())â€,â€(())()â€,â€()(())â€,â€()()()â€]\n23. åˆå¹¶Kä¸ªå‡åºé“¾è¡¨ç»™ä½ ä¸€ä¸ªé“¾è¡¨æ•°ç»„ï¼Œæ¯ä¸ªé“¾è¡¨éƒ½å·²ç»æŒ‰å‡åºæ’åˆ—ã€‚\nè¯·ä½ å°†æ‰€æœ‰é“¾è¡¨åˆå¹¶åˆ°ä¸€ä¸ªå‡åºé“¾è¡¨ä¸­ï¼Œè¿”å›åˆå¹¶åçš„é“¾è¡¨ã€‚\n\n\n\n\n\n\n\n\n\nè¾“å…¥ï¼šlists = [[1,4,5],[1,3,4],[2,6]]è¾“å‡ºï¼š[1,1,2,3,4,4,5,6]è§£é‡Šï¼šé“¾è¡¨æ•°ç»„å¦‚ä¸‹ï¼š[  1-&gt;4-&gt;5,  1-&gt;3-&gt;4,  2-&gt;6]å°†å®ƒä»¬åˆå¹¶åˆ°ä¸€ä¸ªæœ‰åºé“¾è¡¨ä¸­å¾—åˆ°ã€‚1-&gt;1-&gt;2-&gt;3-&gt;4-&gt;4-&gt;5-&gt;6\n\n\n\n\n\n\n\nå½’å¹¶åˆå¹¶\næŒ‰ç…§å½’å¹¶æ’åºçš„æ€æƒ³ï¼Œä¸¤ä¸¤å½’å¹¶ï¼Œç›´åˆ°åˆä¸ºä¸€ä½“\n\n\nclass Solution {\n    private ListNode[] merge2(ListNode[] list){\n        int len = list.length;\n        //System.out.println(len);\n        if(len == 1) return list;\n        ListNode[] new_list = new ListNode[(len+1)/2];\n        for(int i=0;i+1&lt;len;i+=2){\n            ListNode listhead = new ListNode();\n            ListNode list_tial = listhead; \n            while(list[i]!=null &amp;&amp; list[i+1]!=null){\n                if(list[i].val&lt;list[i+1].val){\n                    list_tial.next = list[i];\n                    list_tial = list[i];\n                    list[i] = list[i].next;\n                }else{\n                    list_tial.next = list[i+1];\n                    list_tial = list[i+1];\n                    list[i+1] = list[i+1].next;  \n                }\n            }\n            if(list[i] != null) list_tial.next = list[i];\n            if(list[i+1] != null) list_tial.next = list[i+1];\n            new_list[i/2] = listhead.next;\n        }\n        if(len%2==1){\n            new_list[(len+1)/2-1] = list[len-1];\n        }\n        return new_list;\n\n    }\n    public ListNode mergeKLists(ListNode[] lists) {\n        ListNode[] ans= merge2(lists);\n        if(ans.length==0) return null;\n        //System.out.println(ans.length);\n\n        while(ans.length!=1){\n            ans = merge2(ans);\n        }\n        return ans[0];\n    }\n}\n24. ä¸¤ä¸¤äº¤æ¢é“¾è¡¨ä¸­çš„èŠ‚ç‚¹ç»™ä½ ä¸€ä¸ªé“¾è¡¨ï¼Œä¸¤ä¸¤äº¤æ¢å…¶ä¸­ç›¸é‚»çš„èŠ‚ç‚¹ï¼Œå¹¶è¿”å›äº¤æ¢åé“¾è¡¨çš„å¤´èŠ‚ç‚¹ã€‚ä½ å¿…é¡»åœ¨ä¸ä¿®æ”¹èŠ‚ç‚¹å†…éƒ¨çš„å€¼çš„æƒ…å†µä¸‹å®Œæˆæœ¬é¢˜ï¼ˆå³ï¼Œåªèƒ½è¿›è¡ŒèŠ‚ç‚¹äº¤æ¢ï¼‰ã€‚\n \n\n\n\n\n\n\n\n\n\nè¾“å…¥ï¼šhead = [1,2,3,4]è¾“å‡ºï¼š[2,1,4,3]\n\n\n\n\n\n\n\né€’å½’\nå¤§äº‹åŒ–å°ï¼Œåªäº¤æ¢å‰ä¸¤ä¸ªï¼Œå‰©ä¸‹çš„äº¤ç»™é€’å½’\n\n\nclass Solution {\n    public ListNode swapPairs(ListNode head) {\n        if(head == null) return head;\n        if(head.next == null) return head;\n        ListNode l1 = head.next;\n        ListNode l2 = head.next.next;\n        l1.next = head;\n        head.next = swapPairs(l2);\n        return l1;\n    }\n}\n25. K ä¸ªä¸€ç»„ç¿»è½¬é“¾è¡¨ç»™ä½ ä¸€ä¸ªé“¾è¡¨ï¼Œæ¯ k ä¸ªèŠ‚ç‚¹ä¸€ç»„è¿›è¡Œç¿»è½¬ï¼Œè¯·ä½ è¿”å›ç¿»è½¬åçš„é“¾è¡¨ã€‚\nk æ˜¯ä¸€ä¸ªæ­£æ•´æ•°ï¼Œå®ƒçš„å€¼å°äºæˆ–ç­‰äºé“¾è¡¨çš„é•¿åº¦ã€‚\nå¦‚æœèŠ‚ç‚¹æ€»æ•°ä¸æ˜¯ k çš„æ•´æ•°å€ï¼Œé‚£ä¹ˆè¯·å°†æœ€åå‰©ä½™çš„èŠ‚ç‚¹ä¿æŒåŸæœ‰é¡ºåºã€‚\nè¿›é˜¶ï¼š\n\nä½ å¯ä»¥è®¾è®¡ä¸€ä¸ªåªä½¿ç”¨å¸¸æ•°é¢å¤–ç©ºé—´çš„ç®—æ³•æ¥è§£å†³æ­¤é—®é¢˜å—ï¼Ÿ\nä½ ä¸èƒ½åªæ˜¯å•çº¯çš„æ”¹å˜èŠ‚ç‚¹å†…éƒ¨çš„å€¼ï¼Œè€Œæ˜¯éœ€è¦å®é™…è¿›è¡ŒèŠ‚ç‚¹äº¤æ¢ã€‚\n\n\n\n\n\n\n\n\n\n\n\nè¾“å…¥ï¼šhead = [1,2,3,4,5], k = 2è¾“å‡ºï¼š[2,1,4,3,5]\n\n\n\n\n\n\n\né€’å½’\nå¤§äº‹åŒ–å°ï¼Œåªäº¤æ¢å‰kä¸ªï¼Œå‰©ä¸‹çš„äº¤ç»™é€’å½’\n\n\nclass Solution {\n    public ListNode reverseKGroup(ListNode head, int k) {\n        if(k==1) return head;\n        int len =0;\n        ListNode n = head;\n        while(n!=null &amp;&amp; len &lt; k){\n            n = n.next;\n            len++;\n        }\n        if(len &lt; k) return head;\n        else{\n            ListNode l1 = head,l2 = head.next,l3 = head.next.next;\n            l1.next = reverseKGroup(n,k);\n            for(int i = 1;i&lt;k;i++){\n                l2.next = l1;\n                l1 = l2;\n                l2 = l3;\n                if(l3!=null)\n                l3 =l3.next;\n            }\n            return l1; \n\n        }\n\n    }\n}\n26. åˆ é™¤æœ‰åºæ•°ç»„ä¸­çš„é‡å¤é¡¹ç»™ä½ ä¸€ä¸ªæœ‰åºæ•°ç»„ nums ï¼Œè¯·ä½  åŸåœ° åˆ é™¤é‡å¤å‡ºç°çš„å…ƒç´ ï¼Œä½¿æ¯ä¸ªå…ƒç´  åªå‡ºç°ä¸€æ¬¡ ï¼Œè¿”å›åˆ é™¤åæ•°ç»„çš„æ–°é•¿åº¦ã€‚\nä¸è¦ä½¿ç”¨é¢å¤–çš„æ•°ç»„ç©ºé—´ï¼Œä½ å¿…é¡»åœ¨ åŸåœ° ä¿®æ”¹è¾“å…¥æ•°ç»„ å¹¶åœ¨ä½¿ç”¨ O(1) é¢å¤–ç©ºé—´çš„æ¡ä»¶ä¸‹å®Œæˆã€‚\nç¤ºä¾‹ï¼š\n\n\n\n\n\n\n\n\n\nè¾“å…¥ï¼šnums = [1,1,2]è¾“å‡ºï¼š2, nums = [1,2]è§£é‡Šï¼šå‡½æ•°åº”è¯¥è¿”å›æ–°çš„é•¿åº¦ 2 ï¼Œå¹¶ä¸”åŸæ•°ç»„ nums çš„å‰ä¸¤ä¸ªå…ƒç´ è¢«ä¿®æ”¹ä¸º 1, 2 ã€‚ä¸éœ€è¦è€ƒè™‘æ•°ç»„ä¸­è¶…å‡ºæ–°é•¿åº¦åé¢çš„å…ƒç´ ã€‚\n\n\n\n\n\n\n\nåŒæŒ‡é’ˆ\nå·¦æŒ‡é’ˆä¸ºä¸‹ä¸€ä¸ªæ•°åº”è¯¥çš„ä½ç½®ï¼Œå³æŒ‡é’ˆä¸ºéå†çš„æ¯ä¸€ä¸ªæ•°ã€‚\nå½“å³æŒ‡é’ˆçš„æ•°ä¸å®ƒå·¦è¾¹æ•°ä¸åŒï¼Œè¯´æ˜ä¸é‡å¤ï¼Œå°†å…¶æ”¾åˆ°å·¦æŒ‡é’ˆçš„ä½ç½®ï¼Œå·¦æŒ‡é’ˆå³ç§»ã€‚\n\n\nclass Solution {\n    public int removeDuplicates(int[] nums) {\n        int len = nums.length;\n        int l = 1;\n        for(int i = 1;i&lt;nums.length;i++){\n            if(nums[i]!=nums[i-1]){\n                nums[l++] = nums[i];\n                \n            }else{\n                len--;\n            }\n        }\n        return len;\n    }\n}\n27. ç§»é™¤å…ƒç´ ç»™ä½ ä¸€ä¸ªæ•°ç»„ nums å’Œä¸€ä¸ªå€¼ valï¼Œä½ éœ€è¦ åŸåœ° ç§»é™¤æ‰€æœ‰æ•°å€¼ç­‰äº val çš„å…ƒç´ ï¼Œå¹¶è¿”å›ç§»é™¤åæ•°ç»„çš„æ–°é•¿åº¦ã€‚\nä¸è¦ä½¿ç”¨é¢å¤–çš„æ•°ç»„ç©ºé—´ï¼Œä½ å¿…é¡»ä»…ä½¿ç”¨ O(1) é¢å¤–ç©ºé—´å¹¶ åŸåœ° ä¿®æ”¹è¾“å…¥æ•°ç»„ã€‚\nå…ƒç´ çš„é¡ºåºå¯ä»¥æ”¹å˜ã€‚ä½ ä¸éœ€è¦è€ƒè™‘æ•°ç»„ä¸­è¶…å‡ºæ–°é•¿åº¦åé¢çš„å…ƒç´ ã€‚\nç¤ºä¾‹ï¼š\n\n\n\n\n\n\n\n\n\nè¾“å…¥ï¼šnums = [3,2,2,3], val = 3è¾“å‡ºï¼š2, nums = [2,2]è§£é‡Šï¼šå‡½æ•°åº”è¯¥è¿”å›æ–°çš„é•¿åº¦ 2, å¹¶ä¸” nums ä¸­çš„å‰ä¸¤ä¸ªå…ƒç´ å‡ä¸º 2ã€‚ä½ ä¸éœ€è¦è€ƒè™‘æ•°ç»„ä¸­è¶…å‡ºæ–°é•¿åº¦åé¢çš„å…ƒç´ ã€‚ä¾‹å¦‚ï¼Œå‡½æ•°è¿”å›çš„æ–°é•¿åº¦ä¸º 2 ï¼Œè€Œ nums = [2,2,3,3] æˆ– nums = [2,2,0,0]ï¼Œä¹Ÿä¼šè¢«è§†ä½œæ­£ç¡®ç­”æ¡ˆã€‚\n\n\n\n\n\n\n\nåŒæŒ‡é’ˆ\nä¸26é¢˜ç›¸ä¼¼ï¼Œåˆ¤æ–­æ¡ä»¶æ”¹ä¸ºä¸ç›®æ ‡å€¼ä¸åŒã€‚\n\n\nclass Solution {\n    public int removeElement(int[] nums, int val) {\n        int len = nums.length,len_now = nums.length;\n        int l = 0;\n        for(int i=0;i&lt;len;i++){\n            if(nums[i]!=val){\n                nums[l++] = nums[i];\n            }else{\n                len_now--;\n            }\n        }\n        return len_now;\n    }\n}\n28. å®ç° strStr()å®ç° strStr() å‡½æ•°ã€‚\nç»™ä½ ä¸¤ä¸ªå­—ç¬¦ä¸² haystack å’Œ needle ï¼Œè¯·ä½ åœ¨ haystack å­—ç¬¦ä¸²ä¸­æ‰¾å‡º needle å­—ç¬¦ä¸²å‡ºç°çš„ç¬¬ä¸€ä¸ªä½ç½®ï¼ˆä¸‹æ ‡ä» 0 å¼€å§‹ï¼‰ã€‚å¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¿”å›  -1 ã€‚\nè¯´æ˜ï¼š\nå½“ needle æ˜¯ç©ºå­—ç¬¦ä¸²æ—¶ï¼Œæˆ‘ä»¬åº”å½“è¿”å›ä»€ä¹ˆå€¼å‘¢ï¼Ÿè¿™æ˜¯ä¸€ä¸ªåœ¨é¢è¯•ä¸­å¾ˆå¥½çš„é—®é¢˜ã€‚\nå¯¹äºæœ¬é¢˜è€Œè¨€ï¼Œå½“ needle æ˜¯ç©ºå­—ç¬¦ä¸²æ—¶æˆ‘ä»¬åº”å½“è¿”å› 0 ã€‚è¿™ä¸ C è¯­è¨€çš„ strstr() ä»¥åŠ Java çš„ indexOf() å®šä¹‰ç›¸ç¬¦ã€‚\nç¤ºä¾‹ï¼š\n\n\n\n\n\n\n\n\n\nè¾“å…¥ï¼šhaystack = â€œhelloâ€, needle = â€œllâ€è¾“å‡ºï¼š2\n\n\n\n\n\n\n\næš´åŠ›\nç‹‚æš´å°±å®Œäº‹äº†\n\n\nclass Solution {\n    public int strStr(String haystack, String needle) {\n        int l2 = needle.length(),l1 = haystack.length();\n        if(l2==0) return 0;\n        if(l1&lt;l2) return -1;\n        for(int i = 0;i&lt;=l1-l2;i++){\n            int f = 1;\n            for(int j = 0;j&lt;l2;j++){\n                if(haystack.charAt(i+j)!=needle.charAt(j)){\n                    f = 0;\n                    break;\n                }\n            }\n            if(f==1){\n                return i;\n            }\n        }\n        return -1;\n\n    }\n}\n\n\n\n\n\n\n\nKMP\næ ‡å‡†KMPæ¨¡æ¿é¢˜\n\n\n29. ä¸¤æ•°ç›¸é™¤ç»™å®šä¸¤ä¸ªæ•´æ•°ï¼Œè¢«é™¤æ•° dividend å’Œé™¤æ•° divisorã€‚å°†ä¸¤æ•°ç›¸é™¤ï¼Œè¦æ±‚ä¸ä½¿ç”¨ä¹˜æ³•ã€é™¤æ³•å’Œ mod è¿ç®—ç¬¦ã€‚\nè¿”å›è¢«é™¤æ•° dividend é™¤ä»¥é™¤æ•° divisor å¾—åˆ°çš„å•†ã€‚\næ•´æ•°é™¤æ³•çš„ç»“æœåº”å½“æˆªå»ï¼ˆtruncateï¼‰å…¶å°æ•°éƒ¨åˆ†ï¼Œä¾‹å¦‚ï¼štruncate(8.345) = 8 ä»¥åŠ truncate(-2.7335) = -2\nç¤ºä¾‹ 1:\n\n\n\n\n\n\n\n\n\nè¾“å…¥: dividend = 10, divisor = 3è¾“å‡º: 3è§£é‡Š: 10/3 = truncate(3.33333..) = truncate(3) = 3\n\n\n\n\n\n\n\nå€å‡æ³•\næ ‡å‡†KMPæ¨¡æ¿é¢˜\n\n\nclass Solution {\n    public int divide(int dividend, int divisor) {\n        int f1=1,f2=1,ans=0;\n        if(divisor==dividend) return 1;\n        if(divisor==-2147483648) return 0;\n\n        if(dividend==-Math.pow(2,31) &amp;&amp; divisor==-1){\n            return (int)(Math.pow(2,31)-1);\n        }\n        if(dividend&lt;0){\n            f1 = -1;\n        }\n        if(divisor&lt;0){\n            f2 = -1;\n        }\n        int num = 1;\n        while(Math.abs(divisor)&lt;Math.pow(2,28)){\n            divisor = divisor + divisor;\n            num = num +num;\n        }\n        while(num !=0){\n            System.out.println(\"\"+num+\" \"+divisor+\" \"+dividend);\n            while(f1*(dividend-f1*f2*divisor)&gt;=0){\n                dividend-=f1*f2*divisor;\n                ans+=num;\n            }\n            num = num&gt;&gt;1;\n            if(f2==-1) divisor = -divisor;\n            divisor = divisor&gt;&gt;1;\n            if(f2==-1) divisor = -divisor;\n\n        }\n        return ans*f1*f2;\n\n    }\n}\n30. ä¸²è”æ‰€æœ‰å•è¯çš„å­ä¸²ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² s å’Œä¸€äº› é•¿åº¦ç›¸åŒ çš„å•è¯ words ã€‚æ‰¾å‡º s ä¸­æ°å¥½å¯ä»¥ç”± words ä¸­æ‰€æœ‰å•è¯ä¸²è”å½¢æˆçš„å­ä¸²çš„èµ·å§‹ä½ç½®ã€‚\næ³¨æ„å­ä¸²è¦ä¸ words ä¸­çš„å•è¯å®Œå…¨åŒ¹é…ï¼Œä¸­é—´ä¸èƒ½æœ‰å…¶ä»–å­—ç¬¦ ï¼Œä½†ä¸éœ€è¦è€ƒè™‘ words ä¸­å•è¯ä¸²è”çš„é¡ºåºã€‚\n\n\n\n\n\n\n\n\n\nè¾“å…¥ï¼šs = â€œbarfoothefoobarmanâ€, words = [â€œfooâ€,â€barâ€]è¾“å‡ºï¼š[0,9]è§£é‡Šï¼šä»ç´¢å¼• 0 å’Œ 9 å¼€å§‹çš„å­ä¸²åˆ†åˆ«æ˜¯ â€œbarfooâ€ å’Œ â€œfoobarâ€ ã€‚è¾“å‡ºçš„é¡ºåºä¸é‡è¦, [9,0] ä¹Ÿæ˜¯æœ‰æ•ˆç­”æ¡ˆã€‚\n31. ä¸‹ä¸€ä¸ªæ’åˆ—å®ç°è·å– ä¸‹ä¸€ä¸ªæ’åˆ— çš„å‡½æ•°ï¼Œç®—æ³•éœ€è¦å°†ç»™å®šæ•°å­—åºåˆ—é‡æ–°æ’åˆ—æˆå­—å…¸åºä¸­ä¸‹ä¸€ä¸ªæ›´å¤§çš„æ’åˆ—ï¼ˆå³ï¼Œç»„åˆå‡ºä¸‹ä¸€ä¸ªæ›´å¤§çš„æ•´æ•°ï¼‰ã€‚\nå¦‚æœä¸å­˜åœ¨ä¸‹ä¸€ä¸ªæ›´å¤§çš„æ’åˆ—ï¼Œåˆ™å°†æ•°å­—é‡æ–°æ’åˆ—æˆæœ€å°çš„æ’åˆ—ï¼ˆå³å‡åºæ’åˆ—ï¼‰ã€‚\nå¿…é¡» åŸåœ° ä¿®æ”¹ï¼Œåªå…è®¸ä½¿ç”¨é¢å¤–å¸¸æ•°ç©ºé—´ã€‚\n\n\n\n\n\n\n\n\n\nè¾“å…¥ï¼šnums = [1,2,3]è¾“å‡ºï¼š[1,3,2]\n32. æœ€é•¿æœ‰æ•ˆæ‹¬å·ç»™ä½ ä¸€ä¸ªåªåŒ…å« â€˜(â€˜ å’Œ â€˜)â€™ çš„å­—ç¬¦ä¸²ï¼Œæ‰¾å‡ºæœ€é•¿æœ‰æ•ˆï¼ˆæ ¼å¼æ­£ç¡®ä¸”è¿ç»­ï¼‰æ‹¬å·å­ä¸²çš„é•¿åº¦ã€‚\n\n\n\n\n\n\n\n\n\nè¾“å…¥ï¼šs = â€œ(()â€è¾“å‡ºï¼š2è§£é‡Šï¼šæœ€é•¿æœ‰æ•ˆæ‹¬å·å­ä¸²æ˜¯ â€œ()â€\n33. æœç´¢æ—‹è½¬æ’åºæ•°ç»„æ•´æ•°æ•°ç»„ nums æŒ‰å‡åºæ’åˆ—ï¼Œæ•°ç»„ä¸­çš„å€¼ äº’ä¸ç›¸åŒ ã€‚\nåœ¨ä¼ é€’ç»™å‡½æ•°ä¹‹å‰ï¼Œnums åœ¨é¢„å…ˆæœªçŸ¥çš„æŸä¸ªä¸‹æ ‡ kï¼ˆ0 &lt;= k &lt; nums.lengthï¼‰ä¸Šè¿›è¡Œäº† æ—‹è½¬ï¼Œä½¿æ•°ç»„å˜ä¸º [nums[k], nums[k+1], â€¦, nums[n-1], nums[0], nums[1], â€¦, nums[k-1]]ï¼ˆä¸‹æ ‡ ä» 0 å¼€å§‹ è®¡æ•°ï¼‰ã€‚ä¾‹å¦‚ï¼Œ [0,1,2,4,5,6,7] åœ¨ä¸‹æ ‡ 3 å¤„ç»æ—‹è½¬åå¯èƒ½å˜ä¸º [4,5,6,7,0,1,2] ã€‚\nç»™ä½  æ—‹è½¬å çš„æ•°ç»„ nums å’Œä¸€ä¸ªæ•´æ•° target ï¼Œå¦‚æœ nums ä¸­å­˜åœ¨è¿™ä¸ªç›®æ ‡å€¼ target ï¼Œåˆ™è¿”å›å®ƒçš„ä¸‹æ ‡ï¼Œå¦åˆ™è¿”å› -1 ã€‚\n\n\n\n\n\n\n\n\n\nè¾“å…¥ï¼šnums = [4,5,6,7,0,1,2], target = 0è¾“å‡ºï¼š4\n\n\n\n\n\n\n\nä¸¤æ¬¡äºŒåˆ† \nå…ˆäºŒåˆ†æ‰¾åˆ°åˆ†ç•Œç‚¹ï¼Œå†å¯¹åˆ†ç•Œç‚¹å‰æˆ–è€…åå¯»æ‰¾ç­”æ¡ˆã€‚\n\n\nclass Solution {\n    public int search(int[] nums, int target) {\n        int len = nums.length;\n        int l = 0,r = len-1,mid ;\n        if(nums[0]&gt;nums[len-1]){\n\n            while(l&lt;r){\n                mid = (l+r)&gt;&gt;1;\n                if(nums[mid]&gt;=nums[0]){\n                    l = mid+1;\n                }else{\n                    r = mid-1;\n                }\n            }\n        }\n        //System.out.println(\"\"+l+\" \"+r);\n        if(nums[0]&lt;=target){\n            l = 0;\n            System.out.println(\"\"+l+\" \"+r);\n            while(l&lt;r){\n                mid = (l+r)&gt;&gt;1;\n                if(nums[mid]==target){\n                return mid;\n                }\n                if(nums[mid]&gt;target){\n                    r = mid-1;\n                    \n                }else{\n                    l = mid+1;\n                }\n            }\n            System.out.println(\"\"+l+\" \"+r);\n            if(nums[l]==target){\n                return l;\n            }\n        }else{\n            r = len-1;\n            while(l&lt;r){\n                mid = (l+r)&gt;&gt;1;\n                if(nums[mid]==target){\n                return mid;\n                }\n                if(nums[mid]&gt;target){\n                    r = mid-1;\n                    \n                }else{\n                    l = mid+1;\n                }\n            }\n            if(nums[l]==target){\n                return l;\n            }\n        }\n        return -1;\n    }\n}\n34. åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªä½ç½®ç»™å®šä¸€ä¸ªæŒ‰ç…§å‡åºæ’åˆ—çš„æ•´æ•°æ•°ç»„ numsï¼Œå’Œä¸€ä¸ªç›®æ ‡å€¼ targetã€‚æ‰¾å‡ºç»™å®šç›®æ ‡å€¼åœ¨æ•°ç»„ä¸­çš„å¼€å§‹ä½ç½®å’Œç»“æŸä½ç½®ã€‚\nå¦‚æœæ•°ç»„ä¸­ä¸å­˜åœ¨ç›®æ ‡å€¼ targetï¼Œè¿”å› [-1, -1]ã€‚\nè¿›é˜¶ï¼š\nä½ å¯ä»¥è®¾è®¡å¹¶å®ç°æ—¶é—´å¤æ‚åº¦ä¸º O(log n) çš„ç®—æ³•è§£å†³æ­¤é—®é¢˜å—ï¼Ÿ\n\n\n\n\n\n\n\n\n\nè¾“å…¥ï¼šnums = [5,7,7,8,8,10], target = 8è¾“å‡ºï¼š[3,4]\n\n\n\n\n\n\n\näºŒåˆ†\nå¾ˆæ˜æ˜¾ï¼Œæ’åºçš„ç”¨äºŒåˆ†ã€‚ç›´æ¥äºŒåˆ†æ‰¾åˆ°å·¦å³è¾¹ç•Œã€‚\n\n\nclass Solution {\n    public int[] searchRange(int[] nums, int target) {\n        if(nums.length==0) return new int[]{-1,-1};\n        int l = 0,r = nums.length-1;\n        int mid;\n        int ansl = -1,ansr = -1;\n        while(l&lt;r){\n            mid = (l+r)&gt;&gt;1;\n            if(nums[mid]&lt;target) l = mid+1;\n            else r = mid;\n        }\n        ansl = l;\n        l = 0;\n        r = nums.length-1;\n        while(l&lt;r){\n            mid = (l+r+1)&gt;&gt;1;\n            if(nums[mid]&lt;=target) l = mid;\n            else r = mid-1;\n        }\n        ansr = l;\n        if(ansl&lt;=ansr &amp;&amp; ansl&lt;nums.length &amp;&amp; ansr&gt;=0 &amp;&amp; nums[ansl]==target &amp;&amp; nums[ansr]==target){\n            return new int[]{ansl,ansr};\n        }\n        return new int[]{-1,-1};\n    }\n}\n35. æœç´¢æ’å…¥ä½ç½®ç»™å®šä¸€ä¸ªæ’åºæ•°ç»„å’Œä¸€ä¸ªç›®æ ‡å€¼ï¼Œåœ¨æ•°ç»„ä¸­æ‰¾åˆ°ç›®æ ‡å€¼ï¼Œå¹¶è¿”å›å…¶ç´¢å¼•ã€‚å¦‚æœç›®æ ‡å€¼ä¸å­˜åœ¨äºæ•°ç»„ä¸­ï¼Œè¿”å›å®ƒå°†ä¼šè¢«æŒ‰é¡ºåºæ’å…¥çš„ä½ç½®ã€‚\nè¯·å¿…é¡»ä½¿ç”¨æ—¶é—´å¤æ‚åº¦ä¸º O(log n) çš„ç®—æ³•ã€‚\n\n\n\n\n\n\n\n\n\nè¾“å…¥: nums = [1,3,5,6], target = 5è¾“å‡º: 2\n\n\n\n\n\n\n\näºŒåˆ†\nå¾ˆæ˜æ˜¾ï¼Œæ’åºçš„ç”¨äºŒåˆ†ã€‚äºŒåˆ†æ¨¡æ¿é¢˜ã€‚\n\n\nclass Solution {\n    public int searchInsert(int[] nums, int target) {\n        int l = 0,r = nums.length-1;\n        int mid;\n        while(l&lt;=r){\n            mid = (l+r)&gt;&gt;1;\n            if(nums[mid]==target) return mid;\n            if(nums[mid]&lt;target) l = mid+1;\n            else r = mid-1;\n        }\n        return l;\n    }\n}\n36. æœ‰æ•ˆçš„æ•°ç‹¬è¯·ä½ åˆ¤æ–­ä¸€ä¸ª 9 x 9 çš„æ•°ç‹¬æ˜¯å¦æœ‰æ•ˆã€‚åªéœ€è¦ æ ¹æ®ä»¥ä¸‹è§„åˆ™ ï¼ŒéªŒè¯å·²ç»å¡«å…¥çš„æ•°å­—æ˜¯å¦æœ‰æ•ˆå³å¯ã€‚\n\næ•°å­— 1-9 åœ¨æ¯ä¸€è¡Œåªèƒ½å‡ºç°ä¸€æ¬¡ã€‚\næ•°å­— 1-9 åœ¨æ¯ä¸€åˆ—åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚\næ•°å­— 1-9 åœ¨æ¯ä¸€ä¸ªä»¥ç²—å®çº¿åˆ†éš”çš„ 3x3 å®«å†…åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚ï¼ˆè¯·å‚è€ƒç¤ºä¾‹å›¾ï¼‰\n\næ³¨æ„ï¼š\n\nä¸€ä¸ªæœ‰æ•ˆçš„æ•°ç‹¬ï¼ˆéƒ¨åˆ†å·²è¢«å¡«å……ï¼‰ä¸ä¸€å®šæ˜¯å¯è§£çš„ã€‚\nåªéœ€è¦æ ¹æ®ä»¥ä¸Šè§„åˆ™ï¼ŒéªŒè¯å·²ç»å¡«å…¥çš„æ•°å­—æ˜¯å¦æœ‰æ•ˆå³å¯ã€‚\nç©ºç™½æ ¼ç”¨ '.' è¡¨ç¤ºã€‚\n\n\n\n\n\n\n\n\n\n\n\nè¾“å…¥ï¼šboard =[[â€œ5â€,â€3â€,â€.â€,â€.â€,â€7â€,â€.â€,â€.â€,â€.â€,â€.â€],[â€œ6â€,â€.â€,â€.â€,â€1â€,â€9â€,â€5â€,â€.â€,â€.â€,â€.â€],[â€œ.â€,â€9â€,â€8â€,â€.â€,â€.â€,â€.â€,â€.â€,â€6â€,â€.â€],[â€œ8â€,â€.â€,â€.â€,â€.â€,â€6â€,â€.â€,â€.â€,â€.â€,â€3â€],[â€œ4â€,â€.â€,â€.â€,â€8â€,â€.â€,â€3â€,â€.â€,â€.â€,â€1â€],[â€œ7â€,â€.â€,â€.â€,â€.â€,â€2â€,â€.â€,â€.â€,â€.â€,â€6â€],[â€œ.â€,â€6â€,â€.â€,â€.â€,â€.â€,â€.â€,â€2â€,â€8â€,â€.â€],[â€œ.â€,â€.â€,â€.â€,â€4â€,â€1â€,â€9â€,â€.â€,â€.â€,â€5â€],[â€œ.â€,â€.â€,â€.â€,â€.â€,â€8â€,â€.â€,â€.â€,â€7â€,â€9â€]]è¾“å‡ºï¼štrue\n\n\n\n\n\n\n\næš´åŠ›éªŒè¯\nç›´æ¥æš´åŠ›éªŒè¯\n\n\nclass Solution {\n    public boolean isValidSudoku(char[][] board) {\n        int[] a = new int[10];\n        for(int i = 0;i&lt;9;i++){\n            for(int j = 0;j&lt;=9;j++) a[j] = 0;\n            for(int j = 0;j&lt;9;j++){\n                if(board[i][j]&gt;='0'){\n                    a[board[i][j]-'0']++;\n                    if(a[board[i][j]-'0']&gt;1){\n                        System.out.println(\"1 \"+i+j);\n                        return false;\n                    }\n                }\n            }\n            for(int j = 0;j&lt;=9;j++) a[j] = 0;\n            for(int j = 0;j&lt;9;j++){\n                if(board[j][i]&gt;='0'){\n                    a[board[j][i]-'0']++;\n                    if(a[board[j][i]-'0']&gt;1){\n                        System.out.println(\"2 \"+i+j+(board[j][i]-'0'));\n                        return false;\n                    }\n                }\n            }\n        }\n        for(int i = 0;i&lt;9;i+=3){\n            for(int j = 0;j&lt;9;j+=3){\n                for(int k = 0;k&lt;=9;k++) a[k] = 0;\n                for(int m = 0;m&lt;3;m++){\n                    for(int n = 0;n&lt;3;n++){\n                        if(board[i+m][j+n]&gt;='0'){\n                            a[board[i+m][j+n]-'0']++;\n                            if(a[board[i+m][j+n]-'0']&gt;1){\n                        System.out.println(\"3 \"+i+j);\n                        return false;\n                    }\n                        }\n                    }\n                }\n            }\n        }\n        return true;\n    }\n}\n37. è§£æ•°ç‹¬ç¼–å†™ä¸€ä¸ªç¨‹åºï¼Œé€šè¿‡å¡«å……ç©ºæ ¼æ¥è§£å†³æ•°ç‹¬é—®é¢˜ã€‚\næ•°ç‹¬çš„è§£æ³•éœ€ éµå¾ªå¦‚ä¸‹è§„åˆ™ï¼š\n\næ•°å­— 1-9 åœ¨æ¯ä¸€è¡Œåªèƒ½å‡ºç°ä¸€æ¬¡ã€‚\næ•°å­— 1-9 åœ¨æ¯ä¸€åˆ—åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚\næ•°å­— 1-9 åœ¨æ¯ä¸€ä¸ªä»¥ç²—å®çº¿åˆ†éš”çš„ 3x3 å®«å†…åªèƒ½å‡ºç°ä¸€æ¬¡ã€‚ï¼ˆè¯·å‚è€ƒç¤ºä¾‹å›¾ï¼‰\n\næ•°ç‹¬éƒ¨åˆ†ç©ºæ ¼å†…å·²å¡«å…¥äº†æ•°å­—ï¼Œç©ºç™½æ ¼ç”¨ '.' è¡¨ç¤ºã€‚\n\n\n\n\n\n\n\n\n\n\nè¾“å…¥ï¼šboard = [[â€œ5â€,â€3â€,â€.â€,â€.â€,â€7â€,â€.â€,â€.â€,â€.â€,â€.â€],[â€œ6â€,â€.â€,â€.â€,â€1â€,â€9â€,â€5â€,â€.â€,â€.â€,â€.â€],[â€œ.â€,â€9â€,â€8â€,â€.â€,â€.â€,â€.â€,â€.â€,â€6â€,â€.â€],[â€œ8â€,â€.â€,â€.â€,â€.â€,â€6â€,â€.â€,â€.â€,â€.â€,â€3â€],[â€œ4â€,â€.â€,â€.â€,â€8â€,â€.â€,â€3â€,â€.â€,â€.â€,â€1â€],[â€œ7â€,â€.â€,â€.â€,â€.â€,â€2â€,â€.â€,â€.â€,â€.â€,â€6â€],[â€œ.â€,â€6â€,â€.â€,â€.â€,â€.â€,â€.â€,â€2â€,â€8â€,â€.â€],[â€œ.â€,â€.â€,â€.â€,â€4â€,â€1â€,â€9â€,â€.â€,â€.â€,â€5â€],[â€œ.â€,â€.â€,â€.â€,â€.â€,â€8â€,â€.â€,â€.â€,â€7â€,â€9â€]]è¾“å‡ºï¼š[[â€œ5â€,â€3â€,â€4â€,â€6â€,â€7â€,â€8â€,â€9â€,â€1â€,â€2â€],[â€œ6â€,â€7â€,â€2â€,â€1â€,â€9â€,â€5â€,â€3â€,â€4â€,â€8â€],[â€œ1â€,â€9â€,â€8â€,â€3â€,â€4â€,â€2â€,â€5â€,â€6â€,â€7â€],[â€œ8â€,â€5â€,â€9â€,â€7â€,â€6â€,â€1â€,â€4â€,â€2â€,â€3â€],[â€œ4â€,â€2â€,â€6â€,â€8â€,â€5â€,â€3â€,â€7â€,â€9â€,â€1â€],[â€œ7â€,â€1â€,â€3â€,â€9â€,â€2â€,â€4â€,â€8â€,â€5â€,â€6â€],[â€œ9â€,â€6â€,â€1â€,â€5â€,â€3â€,â€7â€,â€2â€,â€8â€,â€4â€],[â€œ2â€,â€8â€,â€7â€,â€4â€,â€1â€,â€9â€,â€6â€,â€3â€,â€5â€],[â€œ3â€,â€4â€,â€5â€,â€2â€,â€8â€,â€6â€,â€1â€,â€7â€,â€9â€]]è§£é‡Šï¼šè¾“å…¥çš„æ•°ç‹¬å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå”¯ä¸€æœ‰æ•ˆçš„è§£å†³æ–¹æ¡ˆå¦‚ä¸‹æ‰€ç¤ºï¼š\n\n\n\n\n\n\n\n\nä¸ä¼šäº†å“‡\nå“‡å“‡å“‡\n\n\n38. å¤–è§‚æ•°åˆ—éš¾åº¦ä¸­ç­‰844\nç»™å®šä¸€ä¸ªæ­£æ•´æ•° n ï¼Œè¾“å‡ºå¤–è§‚æ•°åˆ—çš„ç¬¬ n é¡¹ã€‚\nã€Œå¤–è§‚æ•°åˆ—ã€æ˜¯ä¸€ä¸ªæ•´æ•°åºåˆ—ï¼Œä»æ•°å­— 1 å¼€å§‹ï¼Œåºåˆ—ä¸­çš„æ¯ä¸€é¡¹éƒ½æ˜¯å¯¹å‰ä¸€é¡¹çš„æè¿°ã€‚\nä½ å¯ä»¥å°†å…¶è§†ä½œæ˜¯ç”±é€’å½’å…¬å¼å®šä¹‰çš„æ•°å­—å­—ç¬¦ä¸²åºåˆ—ï¼š\n\ncountAndSay(1) = \"1\"\ncountAndSay(n) æ˜¯å¯¹ countAndSay(n-1) çš„æè¿°ï¼Œç„¶åè½¬æ¢æˆå¦ä¸€ä¸ªæ•°å­—å­—ç¬¦ä¸²ã€‚\n\nå‰äº”é¡¹å¦‚ä¸‹ï¼š\n\n\n\n\n\n\n\n\n\n1\n11\n21\n1211\n111221ç¬¬ä¸€é¡¹æ˜¯æ•°å­— 1æè¿°å‰ä¸€é¡¹ï¼Œè¿™ä¸ªæ•°æ˜¯ 1 å³ â€œ ä¸€ ä¸ª 1 â€ï¼Œè®°ä½œ â€œ11â€æè¿°å‰ä¸€é¡¹ï¼Œè¿™ä¸ªæ•°æ˜¯ 11 å³ â€œ äºŒ ä¸ª 1 â€ ï¼Œè®°ä½œ â€œ21â€æè¿°å‰ä¸€é¡¹ï¼Œè¿™ä¸ªæ•°æ˜¯ 21 å³ â€œ ä¸€ ä¸ª 2 + ä¸€ ä¸ª 1 â€ ï¼Œè®°ä½œ â€œ1211â€æè¿°å‰ä¸€é¡¹ï¼Œè¿™ä¸ªæ•°æ˜¯ 1211 å³ â€œ ä¸€ ä¸ª 1 + ä¸€ ä¸ª 2 + äºŒ ä¸ª 1 â€ ï¼Œè®°ä½œ â€œ111221â€\nè¦ æè¿° ä¸€ä¸ªæ•°å­—å­—ç¬¦ä¸²ï¼Œé¦–å…ˆè¦å°†å­—ç¬¦ä¸²åˆ†å‰²ä¸º æœ€å° æ•°é‡çš„ç»„ï¼Œæ¯ä¸ªç»„éƒ½ç”±è¿ç»­çš„æœ€å¤š ç›¸åŒå­—ç¬¦ ç»„æˆã€‚ç„¶åå¯¹äºæ¯ä¸ªç»„ï¼Œå…ˆæè¿°å­—ç¬¦çš„æ•°é‡ï¼Œç„¶åæè¿°å­—ç¬¦ï¼Œå½¢æˆä¸€ä¸ªæè¿°ç»„ã€‚è¦å°†æè¿°è½¬æ¢ä¸ºæ•°å­—å­—ç¬¦ä¸²ï¼Œå…ˆå°†æ¯ç»„ä¸­çš„å­—ç¬¦æ•°é‡ç”¨æ•°å­—æ›¿æ¢ï¼Œå†å°†æ‰€æœ‰æè¿°ç»„è¿æ¥èµ·æ¥ã€‚\nä¾‹å¦‚ï¼Œæ•°å­—å­—ç¬¦ä¸² \"3322251\" çš„æè¿°å¦‚ä¸‹å›¾ï¼š\n\n\n\n\n\n\n\n\n\n\nè¾“å…¥ï¼šn = 1è¾“å‡ºï¼šâ€1â€è§£é‡Šï¼šè¿™æ˜¯ä¸€ä¸ªåŸºæœ¬æ ·ä¾‹ã€‚\n\n\n\n\n\n\n\næ¨¡æ‹Ÿ\nè¿˜æ˜¯å¤ªæ…¢ï¼Œéœ€è¦ä»¥åä¼˜åŒ–\n\n\nclass Solution {\n    public String countAndSay(int n) {\n\n        StringBuilder s = new StringBuilder(\"1\");\n        for(int k = 1;k&lt;n;k++){\n            StringBuilder new_s = new StringBuilder();\n            int l = 0;\n            char c = s.charAt(0);\n            for(int i = 0;i&lt;s.length();i++){\n                if(i!=0 &amp;&amp; s.charAt(i)!=s.charAt(i-1)){\n                    String sss = \"\"+l+c;\n                    new_s.append(sss);\n                    l = 0;\n                }\n                l+=1;\n                c = s.charAt(i);\n            }\n            String sss = \"\"+l+c;\n            new_s.append(sss);\n            s = new_s;\n            //System.out.println(s);\n        }\n        return s.toString();\n\n    }\n}\n39. ç»„åˆæ€»å’Œéš¾åº¦ä¸­ç­‰1661\nç»™å®šä¸€ä¸ªæ— é‡å¤å…ƒç´ çš„æ­£æ•´æ•°æ•°ç»„ candidates å’Œä¸€ä¸ªæ­£æ•´æ•° target ï¼Œæ‰¾å‡º candidates ä¸­æ‰€æœ‰å¯ä»¥ä½¿æ•°å­—å’Œä¸ºç›®æ ‡æ•° target çš„å”¯ä¸€ç»„åˆã€‚\ncandidates ä¸­çš„æ•°å­—å¯ä»¥æ— é™åˆ¶é‡å¤è¢«é€‰å–ã€‚å¦‚æœè‡³å°‘ä¸€ä¸ªæ‰€é€‰æ•°å­—æ•°é‡ä¸åŒï¼Œåˆ™ä¸¤ç§ç»„åˆæ˜¯å”¯ä¸€çš„ã€‚ \nå¯¹äºç»™å®šçš„è¾“å…¥ï¼Œä¿è¯å’Œä¸º target çš„å”¯ä¸€ç»„åˆæ•°å°‘äº 150 ä¸ªã€‚\n\n\n\n\n\n\n\n\n\nè¾“å…¥: candidates = [2,3,6,7], target = 7è¾“å‡º: [[7],[2,2,3]]\n\n\n\n\n\n\n\ndfs\næ ‡å‡†dfs+å‰ªæ\n\n\nclass Solution {\n    public List&lt;List&lt;Integer&gt;&gt; combinationSum(int[] candidates, int target){\n        List&lt;List&lt;Integer&gt;&gt; ans = new ArrayList&lt;List&lt;Integer&gt;&gt;();\n        ArrayList&lt;Integer&gt; ls = new ArrayList&lt;Integer&gt;();\n        dfs(0,0,target,ls,ans,candidates);\n\n        return ans;\n\n    }\n    private void dfs(int k,int sums,int target,List&lt;Integer&gt; ls,List&lt;List&lt;Integer&gt;&gt; ans,int[] candidates){\n        if(sums == target) ans.add(new ArrayList&lt;Integer&gt;(ls));\n        if(sums &gt; target) return ;\n        for(int i = k; i&lt;candidates.length; i++){\n            sums+=candidates[i];\n            ls.add(candidates[i]);\n            dfs(i,sums,target,ls,ans,candidates);\n            sums -= candidates[i];\n            ls.remove(ls.size() - 1);\n        }\n    }\n}\n40. ç»„åˆæ€»å’Œ IIç»™å®šä¸€ä¸ªæ•°ç»„ candidates å’Œä¸€ä¸ªç›®æ ‡æ•° target ï¼Œæ‰¾å‡º candidates ä¸­æ‰€æœ‰å¯ä»¥ä½¿æ•°å­—å’Œä¸º target çš„ç»„åˆã€‚\ncandidates ä¸­çš„æ¯ä¸ªæ•°å­—åœ¨æ¯ä¸ªç»„åˆä¸­åªèƒ½ä½¿ç”¨ä¸€æ¬¡ã€‚\næ³¨æ„ï¼šè§£é›†ä¸èƒ½åŒ…å«é‡å¤çš„ç»„åˆã€‚ \n\n\n\n\n\n\n\n\n\nè¾“å…¥: candidates = [10,1,2,7,6,1,5], target = 8,è¾“å‡º:[[1,1,6],[1,2,5],[1,7],[2,6]]\n41. ç¼ºå¤±çš„ç¬¬ä¸€ä¸ªæ­£æ•°ç»™ä½ ä¸€ä¸ªæœªæ’åºçš„æ•´æ•°æ•°ç»„ nums ï¼Œè¯·ä½ æ‰¾å‡ºå…¶ä¸­æ²¡æœ‰å‡ºç°çš„æœ€å°çš„æ­£æ•´æ•°ã€‚\nè¯·ä½ å®ç°æ—¶é—´å¤æ‚åº¦ä¸º O(n) å¹¶ä¸”åªä½¿ç”¨å¸¸æ•°çº§åˆ«é¢å¤–ç©ºé—´çš„è§£å†³æ–¹æ¡ˆã€‚\n\n\n\n\n\n\n\n\n\nè¾“å…¥ï¼šnums = [1,2,0]è¾“å‡ºï¼š3\n42. æ¥é›¨æ°´ç»™å®š n ä¸ªéè´Ÿæ•´æ•°è¡¨ç¤ºæ¯ä¸ªå®½åº¦ä¸º 1 çš„æŸ±å­çš„é«˜åº¦å›¾ï¼Œè®¡ç®—æŒ‰æ­¤æ’åˆ—çš„æŸ±å­ï¼Œä¸‹é›¨ä¹‹åèƒ½æ¥å¤šå°‘é›¨æ°´ã€‚\n\n\n\n\n\n\n\n\n\n\nè¾“å…¥ï¼šheight = [0,1,0,2,1,0,1,3,2,1,2,1]è¾“å‡ºï¼š6è§£é‡Šï¼šä¸Šé¢æ˜¯ç”±æ•°ç»„ [0,1,0,2,1,0,1,3,2,1,2,1] è¡¨ç¤ºçš„é«˜åº¦å›¾ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥æ¥ 6 ä¸ªå•ä½çš„é›¨æ°´ï¼ˆè“è‰²éƒ¨åˆ†è¡¨ç¤ºé›¨æ°´ï¼‰ã€‚ \n\n\n\n\n\n\n\nè´ªå¿ƒ \nè§‚å¯Ÿå›¾åƒï¼Œå‘ç°ä¼šæœ‰æœ€é«˜ç‚¹ã€‚\n\nä»å·¦ä¸€ç›´åˆ°æœ€é«˜ç‚¹ï¼Œå¯ä»¥ç”¨è´ªå¿ƒè®¡ç®—æ°´é‡\nå³å‘å·¦åˆ°æœ€é«˜ç‚¹ä¹Ÿæ˜¯åŒç†\næœ€åçœ‹å±±é¡¶æ˜¯å¦æœ‰æ°´\n\n\n\nclass Solution {\n    public int trap(int[] height) {\n        int heightest = 0;\n        int heightest_li = 0;\n        int heightest_ri = 0;\n        for(int i = 0;i&lt;height.length;i++){\n            if(height[i]&gt;heightest){\n                heightest = height[i];\n                heightest_li = i;\n            }\n            if(height[i]==heightest){\n                heightest_ri = i;\n            }\n        }\n        int ans = 0;\n        int sums = height[0];\n        int full = 0;\n        int l = height[0];\n        int li = 0;\n        for(int i = 1;i&lt;=heightest_li;i++){\n            sums+=height[i];\n            if(height[i]&gt;l){\n                System.out.println(\"\"+sums+\" \"+full);\n                full+=(i-li)*l;\n                l = height[i];\n                li = i;\n            }\n        }\n        l = height[height.length-1];\n        li = height.length-1;\n\n        for(int i = height.length-1;i&gt;=heightest_ri;i--){\n            sums+=height[i];\n            if(height[i]&gt;l){\n                full+=(li - i)*l;\n                l = height[i];\n                li = i;\n            }\n\n        }\n        for(int i = heightest_li;i&lt;=heightest_ri;i++){\n            sums+=height[i];\n        }\n        full+=(heightest_ri-heightest_li+1)*heightest;\n\n        return full-sums + 2*heightest;\n    }\n}\n43. å­—ç¬¦ä¸²ç›¸ä¹˜ç»™å®šä¸¤ä¸ªä»¥å­—ç¬¦ä¸²å½¢å¼è¡¨ç¤ºçš„éè´Ÿæ•´æ•° num1 å’Œ num2ï¼Œè¿”å› num1 å’Œ num2 çš„ä¹˜ç§¯ï¼Œå®ƒä»¬çš„ä¹˜ç§¯ä¹Ÿè¡¨ç¤ºä¸ºå­—ç¬¦ä¸²å½¢å¼ã€‚\n\n\n\n\n\n\n\n\n\nè¾“å…¥: num1 = â€œ2â€, num2 = â€œ3â€è¾“å‡º: â€œ6â€\n44. é€šé…ç¬¦åŒ¹é…éš¾åº¦å›°éš¾792\nç»™å®šä¸€ä¸ªå­—ç¬¦ä¸² (s) å’Œä¸€ä¸ªå­—ç¬¦æ¨¡å¼ (p) ï¼Œå®ç°ä¸€ä¸ªæ”¯æŒ '?' å’Œ '*' çš„é€šé…ç¬¦åŒ¹é…ã€‚\nâ€˜?â€™ å¯ä»¥åŒ¹é…ä»»ä½•å•ä¸ªå­—ç¬¦ã€‚â€˜*â€™ å¯ä»¥åŒ¹é…ä»»æ„å­—ç¬¦ä¸²ï¼ˆåŒ…æ‹¬ç©ºå­—ç¬¦ä¸²ï¼‰ã€‚\nä¸¤ä¸ªå­—ç¬¦ä¸²å®Œå…¨åŒ¹é…æ‰ç®—åŒ¹é…æˆåŠŸã€‚\nè¯´æ˜:\n\ns å¯èƒ½ä¸ºç©ºï¼Œä¸”åªåŒ…å«ä» a-z çš„å°å†™å­—æ¯ã€‚\np å¯èƒ½ä¸ºç©ºï¼Œä¸”åªåŒ…å«ä» a-z çš„å°å†™å­—æ¯ï¼Œä»¥åŠå­—ç¬¦ ? å’Œ *ã€‚\n\n\n\n\n\n\n\n\n\n\nè¾“å…¥:s = â€œaaâ€p = â€œaâ€è¾“å‡º: falseè§£é‡Š: â€œaâ€ æ— æ³•åŒ¹é… â€œaaâ€ æ•´ä¸ªå­—ç¬¦ä¸²ã€‚\n45. è·³è·ƒæ¸¸æˆ IIç»™ä½ ä¸€ä¸ªéè´Ÿæ•´æ•°æ•°ç»„ nums ï¼Œä½ æœ€åˆä½äºæ•°ç»„çš„ç¬¬ä¸€ä¸ªä½ç½®ã€‚\næ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ä»£è¡¨ä½ åœ¨è¯¥ä½ç½®å¯ä»¥è·³è·ƒçš„æœ€å¤§é•¿åº¦ã€‚\nä½ çš„ç›®æ ‡æ˜¯ä½¿ç”¨æœ€å°‘çš„è·³è·ƒæ¬¡æ•°åˆ°è¾¾æ•°ç»„çš„æœ€åä¸€ä¸ªä½ç½®ã€‚\nå‡è®¾ä½ æ€»æ˜¯å¯ä»¥åˆ°è¾¾æ•°ç»„çš„æœ€åä¸€ä¸ªä½ç½®ã€‚\n\n\n\n\n\n\n\n\n\nè¾“å…¥: nums = [2,3,1,1,4]è¾“å‡º: 2è§£é‡Š: è·³åˆ°æœ€åä¸€ä¸ªä½ç½®çš„æœ€å°è·³è·ƒæ•°æ˜¯ 2ã€‚     ä»ä¸‹æ ‡ä¸º 0 è·³åˆ°ä¸‹æ ‡ä¸º 1 çš„ä½ç½®ï¼Œè·³ 1 æ­¥ï¼Œç„¶åè·³ 3 æ­¥åˆ°è¾¾æ•°ç»„çš„æœ€åä¸€ä¸ªä½ç½®ã€‚\n\n\n\n\n\n\n\nè´ªå¿ƒ\nè·³ä¹‹å‰ï¼Œçœ‹ä¸€ä¸‹è·³å“ªä¸ªæœ€åˆé€‚ï¼ˆä¸‹ä¸€æ¬¡å¯ä»¥è·³çš„æœ€è¿œï¼‰\nè´ªå¿ƒå°±å¥½\n\n\nclass Solution {\n    public int jump(int[] nums) {\n        int l = 0;\n        int jump = nums[l];\n        int ans = 0;\n        while(l&lt;nums.length-1){\n            ans++;\n            int max_jump = 0;\n            int max_out = 0;\n            int max_i = 0;\n            if(l+jump&gt;=nums.length-1) return ans;\n            for(int j = l+1;j&lt;=l+jump;j++){\n                if(nums[j]-(l+jump-j)&gt;=max_out){\n                    max_out = nums[j]-(l+jump-j);\n                    max_jump =nums[j];\n                    max_i =j;\n                }\n            }\n            jump = max_jump;\n            l = max_i; \n            System.out.println(\"\"+max_i+\" \"+max_jump);\n        }\n        return ans;\n    }\n}\n46. å…¨æ’åˆ—ç»™å®šä¸€ä¸ªä¸å«é‡å¤æ•°å­—çš„æ•°ç»„ nums ï¼Œè¿”å›å…¶ æ‰€æœ‰å¯èƒ½çš„å…¨æ’åˆ— ã€‚ä½ å¯ä»¥ æŒ‰ä»»æ„é¡ºåº è¿”å›ç­”æ¡ˆã€‚\n\n\n\n\n\n\n\n\n\nè¾“å…¥ï¼šnums = [1,2,3]è¾“å‡ºï¼š[[1,2,3],[1,3,2],[2,1,3],[2,3,1],[3,1,2],[3,2,1]]\n\n\n\n\n\n\n\ndfs\nå¸¸è§„dfs\n\n\nclass Solution {\n    public List&lt;List&lt;Integer&gt;&gt; permute(int[] nums) {\n        List&lt;List&lt;Integer&gt;&gt; ans = new ArrayList&lt;List&lt;Integer&gt;&gt;();\n        List&lt;Integer&gt; tmp = new ArrayList&lt;Integer&gt;();\n        int[] map = new int[nums.length];\n        dfs(ans,nums,map,0,tmp);\n        return ans;\n        \n    }\n    private void dfs(List&lt;List&lt;Integer&gt;&gt; ans,int[] nums,int[] map,int l,List&lt;Integer&gt; tmp){\n        if(l==nums.length) ans.add(new ArrayList&lt;Integer&gt;(tmp));\n        for(int i = 0;i&lt;nums.length;i++){\n            if(map[i]==0){\n                map[i] = 1;\n                tmp.add(nums[i]);\n                dfs(ans,nums,map,l+1,tmp);\n                tmp.remove(tmp.size()-1);\n                map[i]=0;\n            }\n        }\n    }\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nå’•å’•å’•\n\n\n","slug":"l01","date":"2021-11-04T12:06:25.000Z","categories_index":"LeetCode","tags_index":"å“ˆå¸Œ","author_index":"YFR718"},{"id":"3316961ecf1671c6065b043220187c47","title":"JavaåŸºç¡€","content":"Javaæ¦‚è¿°æ˜¯SUN(Stanford University Networkï¼Œæ–¯å¦ç¦å¤§å­¦ç½‘ç»œå…¬å¸ ) 1995å¹´æ¨å‡ºçš„ä¸€é—¨é«˜çº§ç¼–ç¨‹è¯­è¨€ã€‚\nJavaè¯­è¨€ç‰¹æ€§\nç‰¹ç‚¹ä¸€ï¼šé¢å‘å¯¹è±¡\nä¸¤ä¸ªåŸºæœ¬æ¦‚å¿µï¼šç±»ã€å¯¹è±¡\nä¸‰å¤§ç‰¹æ€§ï¼šå°è£…ã€ç»§æ‰¿ã€å¤šæ€\n\nç‰¹ç‚¹äºŒï¼šå¥å£®æ€§\nå¸æ”¶äº†C/C++è¯­è¨€çš„ä¼˜ç‚¹ï¼Œä½†å»æ‰äº†å…¶å½±å“ç¨‹åºå¥å£®æ€§çš„éƒ¨åˆ†ï¼ˆå¦‚æŒ‡é’ˆã€å†…å­˜çš„ç”³è¯·ä¸é‡Šæ”¾ç­‰ï¼‰ï¼Œæä¾›äº†ä¸€ä¸ªç›¸å¯¹å®‰å…¨çš„å†…å­˜ç®¡ç†å’Œè®¿é—®æœºåˆ¶\n\nç‰¹ç‚¹ä¸‰ï¼šè·¨å¹³å°æ€§\nè·¨å¹³å°æ€§ï¼šé€šè¿‡Javaè¯­è¨€ç¼–å†™çš„åº”ç”¨ç¨‹åºåœ¨ä¸åŒçš„ç³»ç»Ÿå¹³å°ä¸Šéƒ½å¯ä»¥è¿è¡Œã€‚â€œWrite once , Run Anywhereâ€\nåŸç†ï¼šåªè¦åœ¨éœ€è¦è¿è¡Œ java åº”ç”¨ç¨‹åºçš„æ“ä½œç³»ç»Ÿä¸Šï¼Œå…ˆå®‰è£…ä¸€ä¸ªJavaè™šæ‹Ÿæœº (JVM Java Virtual Machine) å³å¯ã€‚ç”±JVMæ¥è´Ÿè´£Javaç¨‹åºåœ¨è¯¥ç³»ç»Ÿä¸­çš„è¿è¡Œã€‚\nå› ä¸ºæœ‰äº†JVMï¼ŒåŒä¸€ä¸ªJava ç¨‹åºåœ¨ä¸‰ä¸ªä¸åŒçš„æ“ä½œç³»ç»Ÿä¸­éƒ½å¯ä»¥æ‰§è¡Œã€‚è¿™æ ·å°±å®ç°äº†Java ç¨‹åºçš„è·¨å¹³å°æ€§ã€‚\n\n\næ ¸å¿ƒæœºåˆ¶â€”Javaè™šæ‹Ÿæœº\nJVMæ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„è®¡ç®—æœºï¼Œå…·æœ‰æŒ‡ä»¤é›†å¹¶ä½¿ç”¨ä¸åŒçš„å­˜å‚¨åŒºåŸŸã€‚è´Ÿè´£æ‰§è¡ŒæŒ‡ä»¤ï¼Œç®¡ç†æ•°æ®ã€å†…å­˜ã€å¯„å­˜å™¨ã€‚\nå¯¹äºä¸åŒçš„å¹³å°ï¼Œæœ‰ä¸åŒçš„è™šæ‹Ÿæœºã€‚\nåªæœ‰æŸå¹³å°æä¾›äº†å¯¹åº”çš„javaè™šæ‹Ÿæœºï¼Œjavaç¨‹åºæ‰å¯åœ¨æ­¤å¹³å°è¿è¡Œ\nJavaè™šæ‹Ÿæœºæœºåˆ¶å±è”½äº†åº•å±‚è¿è¡Œå¹³å°çš„å·®åˆ«ï¼Œå®ç°äº†â€œä¸€æ¬¡ç¼–è¯‘ï¼Œåˆ°å¤„è¿è¡Œâ€\n\næ ¸å¿ƒæœºåˆ¶â€”åƒåœ¾å›æ”¶â€‹        ä¸å†ä½¿ç”¨çš„å†…å­˜ç©ºé—´åº”å›æ”¶â€”â€”åƒåœ¾å›æ”¶ã€‚åœ¨C/C++ç­‰è¯­è¨€ä¸­ï¼Œç”±ç¨‹åºå‘˜è´Ÿè´£å›æ”¶æ— ç”¨å†…å­˜ã€‚Java è¯­è¨€æ¶ˆé™¤äº†ç¨‹åºå‘˜å›æ”¶æ— ç”¨å†…å­˜ç©ºé—´çš„è´£ä»»ï¼šå®ƒæä¾›ä¸€ç§ç³»ç»Ÿçº§çº¿ç¨‹è·Ÿè¸ªå­˜å‚¨ç©ºé—´çš„åˆ†é…æƒ…å†µã€‚å¹¶åœ¨JVMç©ºé—²æ—¶ï¼Œæ£€æŸ¥å¹¶é‡Šæ”¾é‚£äº›å¯è¢«é‡Šæ”¾çš„å­˜å‚¨ç©ºé—´ã€‚åƒåœ¾å›æ”¶åœ¨Javaç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­è‡ªåŠ¨è¿›è¡Œï¼Œç¨‹åºå‘˜æ— æ³•ç²¾ç¡®æ§åˆ¶å’Œå¹²é¢„ã€‚\n\n\n\n\nJavaè¯­è¨€çš„ç¯å¢ƒ\nåŠŸèƒ½\nåŒ…å«\n\n\n\n\nJDK(Java Development Kit    Javaå¼€å‘å·¥å…·åŒ…)\nJDKæ˜¯æä¾›ç»™Javaå¼€å‘äººå‘˜ä½¿ç”¨çš„ï¼Œå…¶ä¸­åŒ…å«äº†javaçš„å¼€å‘å·¥å…·ï¼Œä¹ŸåŒ…æ‹¬äº†JREã€‚æ‰€ä»¥å®‰è£…äº†JDKï¼Œå°±ä¸ç”¨åœ¨å•ç‹¬å®‰è£…JREäº†ã€‚\nJRE + å¼€å‘å·¥å…·é›†ï¼ˆç¼–è¯‘å·¥å…·javac.exe æ‰“åŒ…å·¥å…·jar.exe)\n\n\nJRE(Java Runtime Environment    Javaè¿è¡Œç¯å¢ƒ)\nåŒ…æ‹¬Javaè™šæ‹Ÿæœº(JVM Java Virtual Machine)å’ŒJavaç¨‹åºæ‰€éœ€çš„æ ¸å¿ƒç±»åº“ç­‰ï¼Œå¦‚æœæƒ³è¦è¿è¡Œä¸€ä¸ªå¼€å‘å¥½çš„Javaç¨‹åºï¼Œè®¡ç®—æœºä¸­åªéœ€è¦å®‰è£…JREå³å¯ã€‚\nJVM + Java SEæ ‡å‡†ç±»åº“\n\n\nJVM (Java Virtal Machine Javaè™šæ‹Ÿæœºï¼‰\nJVMæ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„è®¡ç®—æœºï¼Œå…·æœ‰æŒ‡ä»¤é›†å¹¶ä½¿ç”¨ä¸åŒçš„å­˜å‚¨åŒºåŸŸã€‚è´Ÿè´£æ‰§è¡ŒæŒ‡ä»¤ï¼Œç®¡ç†æ•°æ®ã€å†…å­˜ã€å¯„å­˜å™¨ã€‚\n\n\n\n\nHello Javaâ€‹        æˆ‘ä»¬æ¥ç¼–å†™ç¬¬ä¸€ä¸ªç®€å•çš„Javaç¨‹åºï¼š\npublic class HelloJava {\n    public static void main(String[] args) {\n        System.out.println(\"2333\");\n    }\n}\n\npublicç§°ä¸ºè®¿é—®ä¿®é¥°ç¬¦ï¼ˆaccessmodifierï¼‰ï¼Œè¿™äº›ä¿®é¥°ç¬¦ç”¨äºæ§åˆ¶ç¨‹åºçš„å…¶ä»–éƒ¨åˆ†å¯¹è¿™æ®µä»£ç çš„è®¿é—®çº§åˆ«ã€‚\nclassè¡¨æ˜Javaç¨‹åºä¸­çš„å…¨éƒ¨å†…å®¹éƒ½åŒ…å«åœ¨ç±»ä¸­ã€‚\nHelloJavaï¼šç±»åã€‚\nstaticï¼šé™æ€æ–¹æ³•ã€‚\nvoidï¼šæ— å‚æ•°è¿”å›ã€‚\nmainï¼šä¸»æ–¹æ³•ï¼Œç¨‹åºçš„å…¥å£ã€‚\nString[]ï¼šç¨‹åºæ‰§è¡Œçš„å‘½ä»¤è¡Œå‚æ•°ã€‚\nargsï¼šå‚æ•°åã€‚\nSystem.out.println()ï¼šè¾“å‡ºä¸€è¡Œè¯­å¥ã€‚\n\nJavaè¿è¡Œæ­¥éª¤ï¼š\nå°† Java ä»£ç ç¼–å†™åˆ°æ‰©å±•åä¸º .java çš„æ–‡ä»¶ä¸­ã€‚\né€šè¿‡ javac å‘½ä»¤å¯¹è¯¥ java æ–‡ä»¶è¿›è¡Œç¼–è¯‘ã€‚\né€šè¿‡ java å‘½ä»¤å¯¹ç”Ÿæˆçš„ class æ–‡ä»¶è¿›è¡Œè¿è¡Œã€‚\n\nC:\\Users\\24378\\Desktop\\Java&gt;javac f1.java\nC:\\Users\\24378\\Desktop\\Java&gt;java f1\nhello Java\nä¸€äº›è§„èŒƒJavaå‘½åè§„èŒƒ\n\n\n\nç±»å‹(å)\nçº¦æŸ\nåˆ—\n\n\n\n\né¡¹ç›®\nå…¨éƒ¨å°å†™ï¼Œç”»çº¿-åˆ†éš”\nspring-cloud\n\n\nåŒ…\nå…¨éƒ¨å°å†™\ncom.yfr.softmax\n\n\nç±»\nå•æ¬¡é¦–å­—æ¯å¤§å†™\nNewWorld\n\n\nå˜é‡/æ–¹æ³•\né¦–å­—æ¯å°å†™\nuserName\n\n\nå¸¸é‡\nå…¨éƒ¨å¤§å†™ï¼Œä¸‹åˆ’çº¿_åˆ†éš”\nINT_MAX\n\n\n\n\nJavaä»£ç ç¼–å†™è§„èŒƒpublic class HelloJava {\n    public static void main(String[] args) {\n        System.out.println(\"2333\");\n    }\n}\n\næ³¨æ„å¤§æ‹¬å·çš„é£æ ¼\näºŒå…ƒä¸‰å…ƒè¿ç®—ç¬¦ä¸¤è¾¹ç”¨ä¸€ä¸ªç©ºæ ¼éš”å¼€\né€—å·è¯­å¥åå¦‚ä¸æ¢è¡Œï¼Œç´§è·Ÿä¸€ä¸ªç©ºæ ¼\nå°†ç±»ä¼¼æ“ä½œï¼Œæˆ–ä¸€ç»„æ“ä½œæ”¾åœ¨ä¸€èµ·ä¸ç”¨ç©ºè¡Œéš”å¼€ï¼Œè€Œç”¨ç©ºè¡Œéš”å¼€ä¸åŒç»„çš„ä»£ç \næ¯ä¸ªif while forç­‰è¯­å¥ï¼Œéƒ½ä¸è¦çœç•¥å¤§æ‹¬å·{}\n\nJavaæ³¨é‡Š\n\n\n\næ³¨é‡Šç±»å‹\n\n\n\n\n\n\nå•è¡Œæ³¨é‡Š\n//æ³¨é‡Šæ–‡å­—\n\n\n\nå¤šè¡Œæ³¨é‡Š\n/  æ³¨é‡Šæ–‡å­— /\n\n\n\næ–‡æ¡£æ³¨é‡Šï¼š\n/*@author  æŒ‡å®šjavaç¨‹åºçš„ä½œè€…@version  æŒ‡å®šæºæ–‡ä»¶çš„ç‰ˆæœ¬/\n\n\n\n\n# ç”Ÿæˆæ³¨é‡Šæ–‡æ¡£\nPS C:\\Users\\24378\\Desktop\\Java&gt; javadoc -d mydoc -author -version .\\f1.java\næ­£åœ¨åŠ è½½æºæ–‡ä»¶.\\f1.java...\næ­£åœ¨æ„é€  Javadoc ä¿¡æ¯...\n...\nJavaæ³¨æ„äº‹é¡¹\nJavaæºæ–‡ä»¶ä»¥â€œjavaâ€ä¸ºæ‰©å±•åã€‚æºæ–‡ä»¶çš„åŸºæœ¬ç»„æˆéƒ¨åˆ†æ˜¯ç±»ï¼ˆclassï¼‰ï¼Œå¦‚æœ¬ä¾‹ä¸­çš„HelloWorldç±»ã€‚\n\nJavaåº”ç”¨ç¨‹åºçš„æ‰§è¡Œå…¥å£æ˜¯main()æ–¹æ³•ã€‚å®ƒæœ‰å›ºå®šçš„ä¹¦å†™æ ¼å¼ï¼š\npublic static void main(String[] args)  {...}\n\n\n\nJavaè¯­è¨€ä¸¥æ ¼åŒºåˆ†å¤§å°å†™ã€‚\n\nJavaæ–¹æ³•ç”±ä¸€æ¡æ¡è¯­å¥æ„æˆï¼Œæ¯ä¸ªè¯­å¥ä»¥â€œ;â€ç»“æŸã€‚\n\nå¤§æ‹¬å·éƒ½æ˜¯æˆå¯¹å‡ºç°çš„ï¼Œç¼ºä¸€ä¸å¯ã€‚\n\nä¸€ä¸ªæºæ–‡ä»¶ä¸­æœ€å¤šåªèƒ½æœ‰ä¸€ä¸ªpublicç±»ã€‚å…¶å®ƒç±»çš„ä¸ªæ•°ä¸é™ï¼Œå¦‚æœæºæ–‡ä»¶åŒ…å«ä¸€ä¸ªpublicç±»ï¼Œåˆ™æ–‡ä»¶åå¿…é¡»æŒ‰è¯¥ç±»åå‘½åã€‚\n\n\nåŸºæœ¬æ•°æ®ç±»å‹æ•´æ•°\n\n\n\nç±»å‹\nå­˜å‚¨éœ€æ±‚\nå–å€¼èŒƒå›´\nä¾‹\n\n\n\n\nint\n4å­—èŠ‚\nï¼ˆ21äº¿ï¼‰\n10\n\n\nshort\n2å­—èŠ‚\nï¼ˆ32768ï¼‰\n\n\n\nlong\n8å­—èŠ‚\n\n10L\n\n\nbyte\n1å­—èŠ‚\nï¼ˆ128ï¼‰\n\n\n\n\næµ®ç‚¹æ•°\n\n\n\nç±»å‹\nå­˜å‚¨éœ€æ±‚\nç¬¦å·ä½\næŒ‡æ•°ä½\nå°¾æ•°ä½\nä¾‹\n\n\n\n\nfloat\n4å­—èŠ‚\n1\n8\n23\n3.14F\n\n\ndouble\n8å­—èŠ‚\n1\n11\n52\n3.14\n\n\n\n\næ›´è¯¦ç»†\ncharç±»å‹\n\n\n\nç±»å‹\nå­˜å‚¨éœ€æ±‚\n\n\n\n\n\nchar\n2å­—èŠ‚\n1\n\n\n\n\ncharç±»å‹çš„å­—é¢é‡å€¼è¦ç”¨å•å¼•å·æ‹¬èµ·æ¥ã€‚ä¾‹å¦‚ï¼šâ€™Aâ€™.\nåœ¨Javaä¸­ï¼Œcharç±»å‹æè¿°äº†UTF-16ç¼–ç ä¸­çš„ä¸€ä¸ªä»£ç å•å…ƒã€‚å¯¹charç±»å‹å­—ç¬¦è¿è¡Œæ—¶ï¼Œç›´æ¥å½“åšASCIIè¡¨å¯¹åº”çš„æ•´æ•°æ¥å¯¹å¾…ã€‚\nUnicode ç¼–ç :ä¸€ç§ç¼–ç ï¼Œå°†ä¸–ç•Œä¸Šæ‰€æœ‰çš„ç¬¦å·éƒ½çº³å…¥å…¶ä¸­ã€‚æ¯ä¸€ä¸ªç¬¦å·éƒ½ç»™äºˆä¸€ä¸ªç‹¬ä¸€æ— äºŒçš„ç¼–ç ï¼Œä½¿ç”¨ Unicode æ²¡æœ‰ä¹±ç çš„é—®é¢˜ã€‚\nUnicode çš„ç¼ºç‚¹ï¼šUnicode åªè§„å®šäº†ç¬¦å·çš„äºŒè¿›åˆ¶ä»£ç ï¼Œå´æ²¡æœ‰è§„å®šè¿™ä¸ªäºŒè¿›åˆ¶ä»£ç åº”è¯¥å¦‚ä½•å­˜å‚¨ï¼šæ— æ³•åŒºåˆ« Unicode å’ŒASCIIï¼šè®¡ç®—æœºæ— æ³•åŒºåˆ†ä¸‰ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªç¬¦å·è¿˜æ˜¯åˆ†åˆ«è¡¨ç¤ºä¸‰ä¸ªç¬¦å·ã€‚å¦å¤–ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œè‹±æ–‡å­—æ¯åªç”¨ä¸€ä¸ªå­—èŠ‚è¡¨ç¤ºå°±å¤Ÿäº†ï¼Œå¦‚æœunicodeç»Ÿä¸€è§„å®šï¼Œæ¯ä¸ªç¬¦å·ç”¨ä¸‰ä¸ªæˆ–å››ä¸ªå­—èŠ‚è¡¨ç¤ºï¼Œé‚£ä¹ˆæ¯ä¸ªè‹±æ–‡å­—æ¯å‰éƒ½å¿…ç„¶æœ‰äºŒåˆ°ä¸‰ä¸ªå­—èŠ‚æ˜¯0ï¼Œè¿™å¯¹äºå­˜å‚¨ç©ºé—´æ¥è¯´æ˜¯æå¤§çš„æµªè´¹ã€‚\nUTF-8:ä¸€ç§å˜é•¿çš„ç¼–ç æ–¹å¼ã€‚å®ƒå¯ä»¥ä½¿ç”¨ 1-6 ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªç¬¦å·ï¼Œæ ¹æ®ä¸åŒçš„ç¬¦å·è€Œå˜åŒ–å­—èŠ‚é•¿åº¦ã€‚\nUTF-8çš„ç¼–ç è§„åˆ™ï¼š1ï¼‰å¯¹äºå•å­—èŠ‚çš„UTF-8ç¼–ç ï¼Œè¯¥å­—èŠ‚çš„æœ€é«˜ä½ä¸º0ï¼Œå…¶ä½™7ä½ç”¨æ¥å¯¹å­—ç¬¦è¿›è¡Œç¼–ç ï¼ˆç­‰åŒäºASCIIç ï¼‰ã€‚2ï¼‰å¯¹äºå¤šå­—èŠ‚çš„UTF-8ç¼–ç ï¼Œå¦‚æœç¼–ç åŒ…å« n ä¸ªå­—èŠ‚ï¼Œé‚£ä¹ˆç¬¬ä¸€ä¸ªå­—èŠ‚çš„å‰ n ä½ä¸º1ï¼Œç¬¬ä¸€ä¸ªå­—èŠ‚çš„ç¬¬ n+1 ä½ä¸º0ï¼Œè¯¥å­—èŠ‚çš„å‰©ä½™å„ä½ç”¨æ¥å¯¹å­—ç¬¦è¿›è¡Œç¼–ç ã€‚åœ¨ç¬¬ä¸€ä¸ªå­—èŠ‚ä¹‹åçš„æ‰€æœ‰çš„å­—èŠ‚ï¼Œéƒ½æ˜¯æœ€é«˜ä¸¤ä½ä¸ºâ€10â€ï¼Œå…¶ä½™6ä½ç”¨æ¥å¯¹å­—ç¬¦è¿›è¡Œç¼–ç ã€‚\nboolean\n\n\n\nç±»å‹\nå­˜å‚¨éœ€æ±‚\n\n\n\n\n\nboolean\n1ä½\ntrue/flase\n\n\n\n\nå˜é‡å˜é‡çš„å£°æ˜ä¸ä½¿ç”¨æ ‡è¯†ç¬¦ï¼šJava å¯¹å„ç§å˜é‡ã€æ–¹æ³•å’Œç±»ç­‰è¦ç´ å‘½åæ—¶ä½¿ç”¨çš„å­—ç¬¦åºåˆ—ç§°ä¸ºæ ‡è¯†ç¬¦å®šä¹‰åˆæ³•æ ‡è¯†ç¬¦è§„åˆ™ï¼š\n\nç”±26ä¸ªè‹±æ–‡å­—æ¯å¤§å°å†™ï¼Œ0-9 ï¼Œ_æˆ–$ ç»„æˆ\næ•°å­—ä¸å¯ä»¥å¼€å¤´ã€‚\nä¸å¯ä»¥ä½¿ç”¨å…³é”®å­—å’Œä¿ç•™å­—ï¼Œä½†èƒ½åŒ…å«å…³é”®å­—å’Œä¿ç•™å­—ã€‚\nJavaä¸­ä¸¥æ ¼åŒºåˆ†å¤§å°å†™ï¼Œé•¿åº¦æ— é™åˆ¶ã€‚\næ ‡è¯†ç¬¦ä¸èƒ½åŒ…å«ç©ºæ ¼ã€‚\n\nå˜é‡çš„æ¦‚å¿µï¼šå†…å­˜ä¸­çš„ä¸€ä¸ªå­˜å‚¨åŒºåŸŸï¼Œè¯¥åŒºåŸŸçš„æ•°æ®å¯ä»¥åœ¨åŒä¸€ç±»å‹èŒƒå›´å†…ä¸æ–­å˜åŒ–ã€‚å˜é‡æ˜¯ç¨‹åºä¸­æœ€åŸºæœ¬çš„å­˜å‚¨å•å…ƒã€‚åŒ…å«å˜é‡ç±»å‹ã€å˜é‡åå’Œå­˜å‚¨çš„å€¼ã€‚å˜é‡çš„ä½œç”¨ï¼šç”¨äºåœ¨å†…å­˜ä¸­ä¿å­˜æ•°æ®\nä½¿ç”¨å˜é‡æ³¨æ„ï¼š\n\nJavaä¸­æ¯ä¸ªå˜é‡å¿…é¡»å…ˆå£°æ˜ï¼Œåä½¿ç”¨\nä½¿ç”¨å˜é‡åæ¥è®¿é—®è¿™å—åŒºåŸŸçš„æ•°æ®\nå˜é‡çš„ä½œç”¨åŸŸï¼šå…¶å®šä¹‰æ‰€åœ¨çš„ä¸€å¯¹{ }å†…\nå˜é‡åªæœ‰åœ¨å…¶ä½œç”¨åŸŸå†…æ‰æœ‰æ•ˆ\nåŒä¸€ä¸ªä½œç”¨åŸŸå†…ï¼Œä¸èƒ½å®šä¹‰é‡åçš„å˜é‡\n\nå£°æ˜å˜é‡\n\nè¯­æ³•ï¼š&lt;æ•°æ®ç±»å‹&gt; &lt;å˜é‡åç§°&gt;;\n\nä¾‹å¦‚ï¼šint var;\n\n\nå˜é‡çš„èµ‹å€¼\n\nè¯­æ³•ï¼š&lt;å˜é‡åç§°&gt; =  &lt;å€¼&gt;\nä¾‹å¦‚ï¼švar = 10;\n\nå£°æ˜å’Œèµ‹å€¼å˜é‡\n\nè¯­æ³•ï¼š &lt;æ•°æ®ç±»å‹&gt; &lt;å˜é‡å&gt; =  &lt;åˆå§‹åŒ–å€¼&gt;\nä¾‹å¦‚ï¼šint var = 10;\n\nå˜é‡çš„åˆ†ç±»-æŒ‰æ•°æ®ç±»å‹\n\nå˜é‡çš„åˆ†ç±»-æŒ‰å£°æ˜çš„ä½ç½®\n\nåœ¨æ–¹æ³•ä½“å¤–ï¼Œç±»ä½“å†…å£°æ˜çš„å˜é‡ç§°ä¸ºæˆå‘˜å˜é‡ã€‚\nåœ¨æ–¹æ³•ä½“å†…éƒ¨å£°æ˜çš„å˜é‡ç§°ä¸ºå±€éƒ¨å˜é‡ã€‚\n\n\nå¸¸é‡åœ¨Javaä¸­ï¼Œåˆ©ç”¨å…³é”®å­—finalæŒ‡ç¤ºå¸¸é‡ã€‚\nfinal int A = 1000;\næ•°å€¼ç±»å‹ä¹‹é—´çš„è½¬æ¢è‡ªåŠ¨ç±»å‹è½¬æ¢ï¼šå®¹é‡å°çš„ç±»å‹è‡ªåŠ¨è½¬æ¢ä¸ºå®¹é‡å¤§çš„æ•°æ®ç±»å‹ã€‚æ•°æ®ç±»å‹æŒ‰å®¹é‡å¤§å°æ’åºä¸ºï¼š\n\n\næœ‰å¤šç§ç±»å‹çš„æ•°æ®æ··åˆè¿ç®—æ—¶ï¼Œç³»ç»Ÿé¦–å…ˆè‡ªåŠ¨å°†æ‰€æœ‰æ•°æ®è½¬æ¢æˆå®¹é‡æœ€å¤§çš„é‚£ç§æ•°æ®ç±»å‹ï¼Œç„¶åå†è¿›è¡Œè®¡ç®—ã€‚\nbyte,short,charä¹‹é—´ä¸ä¼šç›¸äº’è½¬æ¢ï¼Œä»–ä»¬ä¸‰è€…åœ¨è®¡ç®—æ—¶é¦–å…ˆè½¬æ¢ä¸ºintç±»å‹ã€‚\nbooleanç±»å‹ä¸èƒ½ä¸å…¶å®ƒæ•°æ®ç±»å‹è¿ç®—ã€‚\nå½“æŠŠä»»ä½•åŸºæœ¬æ•°æ®ç±»å‹çš„å€¼å’Œå­—ç¬¦ä¸²(String)è¿›è¡Œè¿æ¥è¿ç®—æ—¶(+)ï¼ŒåŸºæœ¬æ•°æ®ç±»å‹çš„å€¼å°†è‡ªåŠ¨è½¬åŒ–ä¸ºå­—ç¬¦ä¸²(String)ç±»å‹ã€‚\n\nString str1 = 4; //åˆ¤æ–­å¯¹é”™: no\nString str2= 3.5f + \"\"; //åˆ¤æ–­str2å¯¹é”™: yes\nSystem.out.printIn(str2); //è¾“å‡º:â€3.5â€\nSystem.out .println(3+4+\"Hello!\"); //è¾“å‡º:7Hello!\nSystem.out.println(\"Hello!\" +3+4); //è¾“å‡º: Hello!34\nSystem.out.printIn('a'+ 1+\"Hello!\"); //è¾“ å‡º: 98Hello!\nSystem.out.printIn(\"Hello\"+'a'+1); //è¾“å‡º: Helloa1\nå¼ºåˆ¶ç±»å‹è½¬æ¢ï¼šå°†å®¹é‡å¤§çš„æ•°æ®ç±»å‹è½¬æ¢ä¸ºå®¹é‡å°çš„æ•°æ®ç±»å‹ã€‚ä½¿ç”¨æ—¶è¦åŠ ä¸Šå¼ºåˆ¶è½¬æ¢ç¬¦ï¼š()ï¼Œä½†å¯èƒ½é€ æˆç²¾åº¦é™ä½æˆ–æº¢å‡º,æ ¼å¤–è¦æ³¨æ„ã€‚\né€šå¸¸ï¼Œå­—ç¬¦ä¸²ä¸èƒ½ç›´æ¥è½¬æ¢ä¸ºåŸºæœ¬ç±»å‹ï¼Œä½†é€šè¿‡åŸºæœ¬ç±»å‹å¯¹åº”çš„åŒ…è£…ç±»åˆ™å¯ä»¥å®ç°æŠŠå­—ç¬¦ä¸²è½¬æ¢æˆåŸºæœ¬ç±»å‹ã€‚\n// åˆ¤æ–­æ˜¯å¦èƒ½é€šè¿‡ç¼–è¯‘\nshort s = 5;\ns = s - 2; //æŠ¥é”™ï¼šint ä¸èƒ½ç”¨shortå­˜å‚¨\ns = (short) (s - 2); //æ­£ç¡®å†™æ³•\n\nbyte b = 3;\nb = b + 4; //æŠ¥é”™ï¼šint ä¸èƒ½ç”¨byteå­˜å‚¨\nb = (byte) (b + 4); //æ­£ç¡®å†™æ³•\n\nchar a = 'a';\nint i = 5;\nfloat d = .314F;\ndouble result = a + i + d; //æ­£ç¡®\n\nbyte b = 5;\nshort s = 3;\nshort t = s + b; //æŠ¥é”™ï¼šint ä¸èƒ½ç”¨shortå­˜å‚¨\nè¿›åˆ¶ä¸è¿ç®—ç¬¦\n\n\n\nè¿›åˆ¶\n\n\n\n\n\n\näºŒè¿›åˆ¶ (binary)\n0,1\næ»¡2è¿›1.ä»¥0bæˆ–0Bå¼€å¤´\n\n\nåè¿›åˆ¶ (decimal)\n0-9\næ»¡10è¿›1\n\n\nå…«è¿›åˆ¶ (octal)ï¼š\n0-7\næ»¡8è¿›1. ä»¥æ•°å­—0å¼€å¤´è¡¨ç¤º\n\n\nåå…­è¿›åˆ¶ (hex) (hex)(hex)(hex)ï¼š\n0-9ï¼ŒA-F\næ»¡16è¿›1. ä»¥0xæˆ–0Xå¼€å¤´è¡¨ç¤º\n\n\n\n\nè¿›åˆ¶çš„åŸºæœ¬è½¬æ¢ïƒ˜    åè¿›åˆ¶ äºŒè¿›åˆ¶äº’è½¬       äºŒè¿›åˆ¶è½¬æˆåè¿›åˆ¶ ä¹˜ä»¥2çš„å¹‚æ•°       åè¿›åˆ¶è½¬æˆäºŒè¿›åˆ¶ é™¤ä»¥2å–ä½™æ•°ïƒ˜    äºŒè¿›åˆ¶ å…«è¿›åˆ¶äº’è½¬ïƒ˜    äºŒè¿›åˆ¶ åå…­è¿›åˆ¶äº’è½¬ïƒ˜    åè¿›åˆ¶å…«è¿›åˆ¶äº’è½¬ïƒ˜    åè¿›åˆ¶åå…­è¿›åˆ¶äº’è½¬\n\n\n\n\nè¿ç®—ç¬¦\nè¿ç®—\n\n\n\n\nç®—æœ¯è¿ç®—ç¬¦\n+-*/%++â€“\n\n\nèµ‹å€¼è¿ç®—ç¬¦\n=,+=, -=, *=, /=, %=\n\n\næ¯”è¾ƒè¿ç®—ç¬¦ï¼ˆå…³ç³»è¿ç®—ç¬¦ï¼‰\n==,!=,&lt;,&gt;,&lt;=,&gt;=,instanceof\n\n\né€»è¾‘è¿ç®—ç¬¦\n&amp;,\\\n,!,&amp;&amp;,\\\n\\\n,^\n\n\nä½è¿ç®—ç¬¦\n&lt;&lt;,&gt;&gt;,&gt;&gt;&gt;,&amp;,\\\n,^,~\n\n\nä¸‰å…ƒè¿ç®—ç¬¦\n(æ¡ä»¶è¡¨è¾¾å¼)?è¡¨è¾¾å¼1ï¼šè¡¨è¾¾å¼2ï¼›\n\n\n\n\n\n\n\n\n\nä½è¿ç®—ç¬¦çš„ç»†èŠ‚\n\n\n\n\n&lt;&lt;\nç©ºä½è¡¥0ï¼Œè¢«ç§»é™¤çš„é«˜ä½ä¸¢å¼ƒï¼Œç©ºç¼ºä½è¡¥0ã€‚\n\n\n&gt;&gt;\nè¢«ç§»ä½çš„äºŒè¿›åˆ¶æœ€é«˜ä½æ˜¯0ï¼Œå³ç§»åï¼Œç©ºç¼ºä½è¡¥0ï¼›æœ€é«˜ä½æ˜¯1ï¼Œç©ºç¼ºä½è¡¥1ã€‚\n\n\n&gt;&gt;&gt;\nè¢«ç§»ä½äºŒè¿›åˆ¶æœ€é«˜ä½æ— è®ºæ˜¯0æˆ–è€…æ˜¯1ï¼Œç©ºç¼ºä½éƒ½ç”¨0è¡¥ã€‚\n\n\n&amp;\näºŒè¿›åˆ¶ä½è¿›è¡Œ&amp;è¿ç®—ï¼Œåªæœ‰1&amp;1æ—¶ç»“æœæ˜¯1ï¼Œå¦åˆ™æ˜¯0;\n\n\n\\\n\näºŒè¿›åˆ¶ä½è¿›è¡Œ \\\nè¿ç®—ï¼Œåªæœ‰0 \\\n0æ—¶ç»“æœæ˜¯0ï¼Œå¦åˆ™æ˜¯1;\n\n\n^\nç›¸åŒäºŒè¿›åˆ¶ä½è¿›è¡Œ ^ è¿ç®—ï¼Œç»“æœæ˜¯0ï¼›1^1=0 , 0^0=0ä¸ç›¸åŒäºŒè¿›åˆ¶ä½ ^ è¿ç®—ç»“æœæ˜¯1ã€‚1^0=1 , 0^1=1\n\n\n~\næ­£æ•°å–åï¼Œå„äºŒè¿›åˆ¶ç æŒ‰è¡¥ç å„ä½å–åè´Ÿæ•°å–åï¼Œå„äºŒè¿›åˆ¶ç æŒ‰è¡¥ç å„ä½å–å\n\n\n\n\nè¿ç®—ä¼˜å…ˆçº§ï¼š\næ€è€ƒ1ï¼š\nshort s = 3; \ns = s+2;//s1+2è¿ç®—ç»“æœæ˜¯intå‹ï¼Œéœ€è¦å¼ºåˆ¶è½¬æ¢ç±»å‹   \nâ‘  s += 2;    //+= ä¸æ”¹å˜åŸæœ¬çš„æ•°æ®ç±»å‹\n\næ€è€ƒ2ï¼š\nint i = 1;\ni *= 0.1;  //*= ä¸æ”¹å˜åŸæœ¬çš„æ•°æ®ç±»å‹\nSystem.out.println(i);\ni++;\nSystem.out.println(i);\n\næ€è€ƒ3ï¼š\nint m = 2;\nint n = 3;\nn *= m++; \nSystem.out.println(\"m=\" + m); System.out.println(\"n=\" + n); 3ï¼Œ6\n    \næ€è€ƒ4ï¼š\nint n = 10;\nn += (n++) + (++n); //10 + 10 + 12\nSystem.out.println(n);\nâ€œ&amp;â€å’Œâ€œ&amp;&amp;â€çš„åŒºåˆ«ï¼šâ€œ|â€å’Œâ€œ||â€çš„åŒºåˆ«åŒç†ïƒ˜    å•&amp;æ—¶ï¼Œå·¦è¾¹æ— è®ºçœŸå‡ï¼Œå³è¾¹éƒ½è¿›è¡Œè¿ç®—ï¼›ïƒ˜    åŒ&amp;æ—¶ï¼Œå¦‚æœå·¦è¾¹ä¸ºçœŸï¼Œå³è¾¹å‚ä¸è¿ç®—ï¼Œå¦‚æœå·¦è¾¹ä¸ºå‡ï¼Œé‚£ä¹ˆå³è¾¹ä¸å‚ä¸è¿ç®—ã€‚\nint x = 1,y = 1;\nif(x++==2 &amp; ++y==2){\n    x =7;\n}\nSystem.out.println(\"x=\"+x+\",y=\"+y);\n// 2ï¼Œ2\nint x = 1,y = 1;\nif(x++==2 &amp;&amp; ++y==2){\n    x =7;\n}\nSystem.out.println(\"x=\"+x+\",y=\"+y);\n// 2ï¼Œ1\nint x = 1,y = 1;\nif(x++==1 | ++y==1){\n    x =7;\n}\nSystem.out.println(\"x=\"+x+\",y=\"+y);\n// 7ï¼Œ2\n\nint x = 1,y = 1;\nif(x++==1 || ++y==1){\n    x =7;\n}\nSystem.out.println(\"x=\"+x+\",y=\"+y);\n// 7ï¼Œ1\n\nclass Test {\n    public static void main (String [] args) {\n        boolean x=true;\n        boolean y=false;\n        short z=42;\n        //if(y == true)\n        if((z++==42)&amp;&amp;(y=true))z++;\n        if((x=false) || (++z==45)) z++;\n        System.out.println(\"z=\"+z);\n    }\n}\n// z=46\nStringString s = \"123456\";\n\n\n\n\nå¸¸ç”¨æ–¹æ³•\nåŠŸèƒ½\nç¤ºä¾‹/è¯´æ˜\n\n\n\n\ns.substring(x,y)\nè·å¾—å­—ä¸²[x,y-1]\na.substring(0,3)\n\n\ns1 + s2\næ‹¼æ¥å­—ç¬¦ä¸²\ns + â€œ789â€\n\n\nString.jion(â€˜â€™,â€,s1,s2,s3)\nå¤šä¸ªå­—ç¬¦ä¸²æ”¾åœ¨ä¸€èµ·ç”¨åˆ†éš”ç¬¦\né™æ€æ–¹æ³•\n\n\ns.equals(s1)\næ£€æŸ¥ä¸¤å­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰\n\n\n\ns.equalsIgnoreCase(s1)\næ£€æŸ¥ä¸¤å­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰ï¼Œå¿½ç•¥å¤§å°å†™\n\n\n\ns.length()\nè·å–å­—ç¬¦ä¸²é•¿åº¦\nç©ºä¸²ï¼šé•¿åº¦ä¸º0\n\n\ns.codePointCount(0ï¼Œs.length();\nå¾—åˆ°å®é™…çš„é•¿åº¦ï¼Œå³ç ç‚¹æ•°é‡\n\n\n\ns.charAt(n)\nè¿”å›ä½ç½®nçš„ä»£ç å•å…ƒ\n\n\n\nint codePointAt(int index)\nè¿”å›ä»ç»™å®šä½ç½®å¼€å§‹çš„ç ç‚¹ã€‚\n\n\n\nint offsetByCodePoints(int startIndex, int cpCount)\nè¿”å›ä»startIndexä»£ç ç‚¹å¼€å§‹ï¼Œä½ç§»cpCountåçš„ç ç‚¹ç´¢å¼•ã€‚\n\n\n\nint compareTo(String other)\næŒ‰ç…§å­—å…¸é¡ºåºï¼Œå¦‚æœå­—ç¬¦ä¸²ä½äºotherä¹‹å‰ï¼Œè¿”å›ä¸€ä¸ªè´Ÿæ•°ï¼›å¦‚æœå­—ç¬¦ä¸²ä½äºotherä¹‹åï¼Œè¿”å›ä¸€ä¸ªæ­£æ•°ï¼›å¦‚æœä¸¤ä¸ªå­—ç¬¦ä¸²ç›¸ç­‰ï¼Œè¿”å›0ã€‚\n\n\n\nIntStream codePoints()\nå°†è¿™ä¸ªå­—ç¬¦ä¸²çš„ç ç‚¹ä½œä¸ºä¸€ä¸ªæµè¿”å›ã€‚è°ƒç”¨toArrayå°†å®ƒä»¬æ”¾åœ¨ä¸€ä¸ªæ•°ç»„ä¸­ã€‚\n\n\n\nnew String(int[ ] codePoints, int offset, int count)\nnew String(int[ ] codePoints, int offset, int count)\n\n\n\nnew String(int[ ] codePoints, int offset, int count)\nnew String(int[ ] codePoints, int offset, int count)\n\n\n\nboolean equalsIgnoreCase(String other)\nboolean equalsIgnoreCase(String other)\n\n\n\nboolean startsWith(String prefix)\n\n\n\n\nboolean endsWith(String suffix)\nå¦‚æœå­—ç¬¦ä¸²ä»¥suffixå¼€å¤´æˆ–ç»“å°¾ï¼Œåˆ™è¿”å›trueã€‚\n\n\n\nint index0f(String str, int fromIndex)\nè¿”å›ä¸å­—ç¬¦ä¸²stræˆ–ä»£ç ç‚¹cpåŒ¹é…çš„ç¬¬ä¸€ä¸ªå­ä¸²çš„å¼€å§‹ä½ç½®ã€‚è¿™ä¸ªä½ç½®ä»ç´¢å¼•0æˆ–fromIndexå¼€å§‹è®¡ç®—ã€‚å¦‚æœåœ¨åŸå§‹ä¸²ä¸­ä¸å­˜åœ¨strï¼Œè¿”å›-1ã€‚\n\n\n\nint lastIndex0f(String str, int fromIndex)\nint lastIndex0f(String str, int fromIndex)\n\n\n\nint codePointCount(int startIndex, int endIndex)\nè¿”å›startIndexå’ŒendIndex-1ä¹‹é—´çš„ä»£ç ç‚¹æ•°é‡ã€‚æ²¡æœ‰é…æˆå¯¹çš„ä»£ç”¨å­—ç¬¦å°†è®¡å…¥ä»£ç ç‚¹ã€‚\n\n\n\nString replace(CharSequence oldString, CharSequence newString)\nè¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ã€‚è¿™ä¸ªå­—ç¬¦ä¸²ç”¨newStringä»£æ›¿åŸå§‹å­—ç¬¦ä¸²ä¸­æ‰€æœ‰çš„oldStringã€‚å¯ä»¥ç”¨Stringæˆ–StringBuilderå¯¹è±¡ä½œä¸ºCharSequenceå‚æ•°ã€‚\n\n\n\nString toUpperCase( )String toUpperCase( )\nè¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ã€‚è¿™ä¸ªå­—ç¬¦ä¸²å°†åŸå§‹å­—ç¬¦ä¸²ä¸­çš„å¤§å†™å­—æ¯æ”¹ä¸ºå°å†™ï¼Œæˆ–è€…å°†åŸå§‹å­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰å°å†™å­—æ¯æ”¹æˆäº†å¤§å†™å­—æ¯ã€‚\n\n\n\nString trim( )\nè¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ã€‚è¿™ä¸ªå­—ç¬¦ä¸²å°†åˆ é™¤äº†åŸå§‹å­—ç¬¦ä¸²å¤´éƒ¨å’Œå°¾éƒ¨çš„ç©ºæ ¼ã€‚\n\n\n\n\n\n\n\n\n\næ³¨æ„äº‹é¡¹ï¼š\n\nStringæ²¡åŠæ³•ä¿®æ”¹å­—ç¬¦ä¸²ï¼Œå¯ä»¥é€šè¿‡æå–å­—ä¸²+æ‹¼æ¥å®ç°\n\nä¸€å®šä¸è¦ä½¿ç”¨==è¿ç®—ç¬¦æ£€æµ‹ä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰ï¼è¿™ä¸ªè¿ç®—ç¬¦åªèƒ½å¤Ÿç¡®å®šä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦æ”¾ç½®åœ¨åŒä¸€ä¸ªä½ç½®ä¸Šã€‚å®Œå…¨æœ‰å¯èƒ½å°†å†…å®¹ç›¸åŒçš„å¤šä¸ªå­—ç¬¦ä¸²çš„æ‹·è´æ”¾ç½®åœ¨ä¸åŒçš„ä½ç½®ä¸Šã€‚\nif(s.substring(0,3) == \"123\") // false\n\n\nStringBuilderéœ€è¦ç”±è¾ƒçŸ­çš„å­—ç¬¦ä¸²æ„å»ºå­—ç¬¦ä¸²\nStringBuilder builder = new StringBuilder();\n//å½“æ¯æ¬¡éœ€è¦æ·»åŠ ä¸€éƒ¨åˆ†å†…å®¹æ—¶ï¼Œå°±è°ƒç”¨appendæ–¹æ³•ã€‚\nbuilder.append(\"1\");\nbuilder.append(\"2\");\n//åœ¨éœ€è¦æ„å»ºå­—ç¬¦ä¸²æ—¶å°±è°ƒç”¨toStringæ–¹æ³•\nSystem.out.println(builder.toString());\n\n\n\n\n\n\n\n\n\nè¿™ä¸ªç±»çš„å‰èº«æ˜¯StringBufferï¼Œå…¶æ•ˆç‡ç¨æœ‰äº›ä½ï¼Œä½†å…è®¸é‡‡ç”¨å¤šçº¿ç¨‹çš„æ–¹å¼æ‰§è¡Œæ·»åŠ æˆ–åˆ é™¤å­—ç¬¦çš„æ“ä½œã€‚å¦‚æœæ‰€æœ‰å­—ç¬¦ä¸²åœ¨ä¸€ä¸ªå•çº¿ç¨‹ä¸­ç¼–è¾‘ï¼ˆé€šå¸¸éƒ½æ˜¯è¿™æ ·ï¼‰ï¼Œåˆ™åº”è¯¥ç”¨StringBuilderæ›¿ä»£å®ƒã€‚è¿™ä¸¤ä¸ªç±»çš„APIæ˜¯ç›¸åŒçš„ã€‚\nAPI\n\n\n\n\næ–¹æ³•\nåŠŸèƒ½\n\n\n\n\n\nStringBuilder()\næ„é€ ä¸€ä¸ªç©ºçš„å­—ç¬¦ä¸²æ„å»ºå™¨ã€‚\n\n\n\nint length()\nè¿”å›æ„å»ºå™¨æˆ–ç¼“å†²å™¨ä¸­çš„ä»£ç å•å…ƒæ•°é‡ã€‚\n\n\n\nStringBuilder append(String str)\nè¿½åŠ ä¸€ä¸ªå­—ç¬¦ä¸²å¹¶è¿”å›thisã€‚\n\n\n\nStringBuilder append(char c)\nè¿½åŠ ä¸€ä¸ªä»£ç å•å…ƒå¹¶è¿”å›thisã€‚\n\n\n\nStringBuilder appendCodePoint(int cp)\nè¿½åŠ ä¸€ä¸ªä»£ç ç‚¹ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºä¸€ä¸ªæˆ–ä¸¤ä¸ªä»£ç å•å…ƒå¹¶è¿”å›thisã€‚\n\n\n\nvoid setCharAt(int i, char c)\nå°†ç¬¬iä¸ªä»£ç å•å…ƒè®¾ç½®ä¸ºcã€‚\n\n\n\nStringBuilder insert(int offset, String str)\nåœ¨offsetä½ç½®æ’å…¥ä¸€ä¸ªå­—ç¬¦ä¸²å¹¶è¿”å›thisã€‚\n\n\n\nStringBuilder insert(int offset, Char c)\nåœ¨offsetä½ç½®æ’å…¥ä¸€ä¸ªä»£ç å•å…ƒå¹¶è¿”å›thisã€‚\n\n\n\nåœ¨offsetä½ç½®æ’å…¥ä¸€ä¸ªä»£ç å•å…ƒå¹¶è¿”å›thisã€‚\nåœ¨offsetä½ç½®æ’å…¥ä¸€ä¸ªä»£ç å•å…ƒå¹¶è¿”å›thisã€‚\n\n\n\nåœ¨offsetä½ç½®æ’å…¥ä¸€ä¸ªä»£ç å•å…ƒå¹¶è¿”å›thisã€‚\nåœ¨offsetä½ç½®æ’å…¥ä¸€ä¸ªä»£ç å•å…ƒå¹¶è¿”å›thisã€‚\n\n\n\n\næ ‡å‡†è¾“å…¥è¾“å‡ºæ•°æ®è¯»å…¥import java.util.Scanner;\nScanner in = new Scanner(System,in);\n// è¯»å…¥ä¸€è¡Œ\nString name = in.nextLine();\n//è¯»å…¥ä¸€ä¸ªå•è¯\nString name = in.next();\n//è¯»å…¥ä¸€ä¸ªæ•´æ•°\n int a = sc.nextInt();\n\n\n\n\n\næ–¹æ³•\nåŠŸèƒ½\n\n\n\n\nScanner (InputStream in)\nç”¨ç»™å®šçš„è¾“å…¥æµåˆ›å»ºä¸€ä¸ªScannerå¯¹è±¡ã€‚\n\n\nString nextLine( )\nè¯»å–è¾“å…¥çš„ä¸‹ä¸€è¡Œå†…å®¹ã€‚\n\n\nString next( )\nè¯»å–è¾“å…¥çš„ä¸‹ä¸€ä¸ªå•è¯ï¼ˆä»¥ç©ºæ ¼ä½œä¸ºåˆ†éš”ç¬¦ï¼‰ã€‚\n\n\nint nextInt( ) int nextInt( )\nè¯»å–å¹¶è½¬æ¢ä¸‹ä¸€ä¸ªè¡¨ç¤ºæ•´æ•°æˆ–æµ®ç‚¹æ•°çš„å­—ç¬¦åºåˆ—ã€‚\n\n\nboolean hasNext( )\næ£€æµ‹è¾“å…¥ä¸­æ˜¯å¦è¿˜æœ‰å…¶ä»–å•è¯ã€‚\n\n\nboolean hasNextInt( )boolean hasNextDouble( )\næ£€æµ‹æ˜¯å¦è¿˜æœ‰è¡¨ç¤ºæ•´æ•°æˆ–æµ®ç‚¹æ•°çš„ä¸‹ä¸€ä¸ªå­—ç¬¦åºåˆ—ã€‚\n\n\nstatic Console console( )\n\n\n\n\næ ¼å¼åŒ–è¾“å‡ºSystem.out.print(x)\næ¯ä¸€ä¸ªä»¥%å­—ç¬¦å¼€å§‹çš„æ ¼å¼è¯´æ˜ç¬¦éƒ½ç”¨ç›¸åº”çš„å‚æ•°æ›¿æ¢ã€‚æ ¼å¼è¯´æ˜ç¬¦å°¾éƒ¨çš„è½¬æ¢ç¬¦å°†æŒ‡ç¤ºè¢«æ ¼å¼åŒ–çš„æ•°å€¼ç±»å‹ï¼š\n\n\n\n\nè½¬æ¢ç¬¦\nç±»å‹\n\n\n\n\nd\nåè¿›åˆ¶\n\n\nx\nåå…­è¿›åˆ¶\n\n\no\nå…«è¿›åˆ¶\n\n\nf\nå®šç‚¹æµ®ç‚¹æ•°\n\n\ne\næŒ‡æ•°æµ®ç‚¹æ•°\n\n\ng\né€šç”¨æµ®ç‚¹æ•°\n\n\na\nåå…­è¿›åˆ¶æµ®ç‚¹æ•°\n\n\ns\nå­—ç¬¦ä¸²\n\n\nc\nå­—ç¬¦\n\n\nb\nå¸ƒå°”\n\n\nh\næ•£åˆ—ç \n\n\ntx/TX\næ—¥æœŸæ—¶é—´\n\n\n%\nç™¾åˆ†å·\n\n\nn\nè¡Œåˆ†éš”ç¬¦\n\n\n\n\nå¯ä»¥ä½¿ç”¨å¤šä¸ªæ ‡å¿—ï¼Œä¾‹å¦‚ï¼Œâ€œ%, ( .2fâ€ä½¿ç”¨åˆ†ç»„çš„åˆ†éš”ç¬¦å¹¶å°†è´Ÿæ•°æ‹¬åœ¨æ‹¬å·å†…ã€‚\n\n\n\n\næ ‡å¿—\nç›®çš„\n\n\n\n\n+\næ‰“å°æ­£è´Ÿå·\n\n\nç©ºæ ¼\nåœ¨æ­£æ•´æ•°å‰åŠ ç©ºæ ¼\n\n\n0\næ•°å­—å‰è¡¥0\n\n\n-\nå·¦å¯¹é½\n\n\n(\nå°†è´Ÿæ•°æ‰©åœ¨æ‹¬å·é‡Œ\n\n\n,\næ·»åŠ åˆ†ç»„åˆ†éš”ç¬¦\n\n\n#(å¯¹fæ ¼å¼)\nåŒ…å«å°æ•°ç‚¹\n\n\n#(å¯¹xæˆ–0æ ¼å¼)\næ·»åŠ å‰ç¼€0x\n\n\n$\nç»™å®šè¢«æ ¼å¼åŒ–çš„å‚æ•°ç´¢å¼•ã€‚ä¾‹å¦‚ï¼Œ%ISd. %1$x å°†ä»¥åè¿›åˆ¶å’Œåå…­è¿›åˆ¶æ ¼å¼æ‰“å°ç¬¬1ä¸ªå‚æ•°\n\n\n\n&lt;\næ ¼å¼åŒ–å‰é¢è¯´æ˜çš„æ•°å€¼ã€‚ä¾‹å¦‚ï¼Œ%d%&lt;xä»¥åè¿›åˆ¶å’Œåå…­è¿›åˆ¶æ‰“å°åŒä¸€ä¸ªæ•°å€¼\n\n\n\n\n\n\n\næ–‡ä»¶è¾“å…¥ä¸è¾“å‡ºæ–‡ä»¶è¯»å–è¦æƒ³å¯¹æ–‡ä»¶è¿›è¡Œè¯»å–ï¼Œå°±éœ€è¦ä¸€ä¸ªç”¨Fileå¯¹è±¡æ„é€ ä¸€ä¸ªScannerå¯¹è±¡ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\nScanner in = new Scanner(Paths.get(\"myfile.txt\"),\"UTF-8\");\nå¦‚æœæ–‡ä»¶åä¸­åŒ…å«åæ–œæ ç¬¦å·ï¼Œå°±è¦è®°ä½åœ¨æ¯ä¸ªåæ–œæ ä¹‹å‰å†åŠ ä¸€ä¸ªé¢å¤–çš„åæ–œæ ï¼šâ€œc:\\mydirectory\\myfile.txtâ€ã€‚\næ–‡ä»¶å†™å…¥è¦æƒ³å†™å…¥æ–‡ä»¶ï¼Œå°±éœ€è¦æ„é€ ä¸€ä¸ªPrintWriterå¯¹è±¡ã€‚åœ¨æ„é€ å™¨ä¸­ï¼Œåªéœ€è¦æä¾›æ–‡ä»¶åï¼š\nPrintWriter out = new PrintWriter(\"myfile.txt\",\"UTF-8\");\n\n\n\n\n\n\n\n\n\n\nScanner(File f)\næ„é€ ä¸€ä¸ªä»ç»™å®šæ–‡ä»¶è¯»å–æ•°æ®çš„Scannerã€‚\n\n\nScanner(String data)\næ„é€ ä¸€ä¸ªä»ç»™å®šå­—ç¬¦ä¸²è¯»å–æ•°æ®çš„Scannerã€‚\n\n\nPrintWriter(String fileName)\nPrintWriter(String fileName)\n\n\nstatic Path get(String pathname)\næ ¹æ®ç»™å®šçš„è·¯å¾„åæ„é€ ä¸€ä¸ªPathã€‚\n\n\n\n\n\n\n\nå—ä½œç”¨åŸŸ Blockå—ï¼ˆå³å¤åˆè¯­å¥ï¼‰æ˜¯æŒ‡ç”±ä¸€å¯¹å¤§æ‹¬å·æ‹¬èµ·æ¥çš„è‹¥å¹²æ¡ç®€å•çš„Javaè¯­å¥ã€‚å—ç¡®å®šäº†å˜é‡çš„ä½œç”¨åŸŸã€‚ä¸€ä¸ªå—å¯ä»¥åµŒå¥—åœ¨å¦ä¸€ä¸ªå—ä¸­ã€‚\næ³¨æ„ï¼š\n\nä¸èƒ½åœ¨åµŒå¥—çš„ä¸¤ä¸ªå—ä¸­å£°æ˜åŒåçš„å˜é‡ã€‚\nå—å†…å®šä¹‰çš„å˜é‡å—å¤–ä¸èƒ½ä½¿ç”¨ã€‚\n\n\næµç¨‹æ§åˆ¶è¯­å¥\n\n\n\næµç¨‹æ§åˆ¶\n\n\n\n\n\n\né¡ºåºç»“æ„\n\n\n\n\nåˆ†æ”¯è¯­å¥\nif-elseã€switch-case\n\n\n\nå¾ªç¯ç»“æ„\nforã€whileã€do-while\n\n\n\nç‰¹æ®Šæµç¨‹æ§åˆ¶è¯­å¥\nbreakã€continueã€return\n\n\n\n\nswitch (i){\n    case 0:...;\n        break;\n    case 1:...;\n        break;\n    default:...;\n        break;\n}\ncaseæ ‡ç­¾å¯ä»¥æ˜¯ï¼š\nâ— ç±»å‹ä¸ºcharã€byteã€shortæˆ–intçš„å¸¸é‡è¡¨è¾¾å¼ã€‚\nâ— æšä¸¾å¸¸é‡ã€‚\nâ— ä»Java SE 7å¼€å§‹ï¼Œcaseæ ‡ç­¾è¿˜å¯ä»¥æ˜¯å­—ç¬¦ä¸²å­—é¢é‡ã€‚\nå¸¦æ ‡ç­¾çš„breakè¯­å¥æœ‰æ—¶å€™ï¼Œåœ¨åµŒå¥—å¾ˆæ·±çš„å¾ªç¯è¯­å¥ä¸­ä¼šå‘ç”Ÿä¸€äº›ä¸å¯é¢„æ–™çš„äº‹æƒ…ã€‚æ­¤æ—¶å¯èƒ½æ›´åŠ å¸Œæœ›è·³åˆ°åµŒå¥—çš„æ‰€æœ‰å¾ªç¯è¯­å¥ä¹‹å¤–ã€‚é€šè¿‡æ·»åŠ ä¸€äº›é¢å¤–çš„æ¡ä»¶åˆ¤æ–­å®ç°å„å±‚å¾ªç¯çš„æ£€æµ‹å¾ˆä¸æ–¹ä¾¿ã€‚\nè¿™é‡Œæœ‰ä¸€ä¸ªç¤ºä¾‹è¯´æ˜äº†breakè¯­å¥çš„å·¥ä½œçŠ¶æ€ã€‚è¯·æ³¨æ„ï¼Œæ ‡ç­¾å¿…é¡»æ”¾åœ¨å¸Œæœ›è·³å‡ºçš„æœ€å¤–å±‚å¾ªç¯ä¹‹å‰ï¼Œå¹¶ä¸”å¿…é¡»ç´§è·Ÿä¸€ä¸ªå†’å·ã€‚\nlabel:\n{\n    ...\n\tif (condition) break label; // exits b1ock\n\t...\n}\n\nå¤§æ•°å€¼å¦‚æœåŸºæœ¬çš„æ•´æ•°å’Œæµ®ç‚¹æ•°ç²¾åº¦ä¸èƒ½å¤Ÿæ»¡è¶³éœ€æ±‚ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨java.mathåŒ…ä¸­çš„ä¸¤ä¸ªå¾ˆæœ‰ç”¨çš„ç±»ï¼šBigIntegerå’ŒBigDecimalã€‚è¿™ä¸¤ä¸ªç±»å¯ä»¥å¤„ç†åŒ…å«ä»»æ„é•¿åº¦æ•°å­—åºåˆ—çš„æ•°å€¼ã€‚BigIntegerç±»å®ç°äº†ä»»æ„ç²¾åº¦çš„æ•´æ•°è¿ç®—ï¼ŒBigDecimalå®ç°äº†ä»»æ„ç²¾åº¦çš„æµ®ç‚¹æ•°è¿ç®—ã€‚\n//ä½¿ç”¨é™æ€çš„valueOfæ–¹æ³•å¯ä»¥å°†æ™®é€šçš„æ•°å€¼è½¬æ¢ä¸ºå¤§æ•°å€¼\nBigInteger a = BigInteger.valueOf(999999999999999999l);\n\n//ä½¿ç”¨å¤§æ•°å€¼ç±»ä¸­çš„addå’Œmultiplyæ–¹æ³•ã€‚\nBigInteger d = a.multiply(a);\nSystem.out.println(d);\n\n\n\n\nBigInteger\n\n\n\n\n\nBigInteger add(BigInteger other)\n+\n\n\nBigInteger subtract(BigInteger other)\n-\n\n\nBigInteger multiply(BigInteger other)\n*\n\n\nBigInteger divide(BigInteger other)\n/\n\n\nBigInteger divide(BigInteger other)\n%\n\n\nint compareTo(BigInteger other)\nç›¸ç­‰ï¼Œè¿”å›0ï¼›å°äºï¼Œè¿”å›è´Ÿæ•°ï¼›å¦åˆ™ï¼Œè¿”å›æ­£æ•°ã€‚\n\n\nstatic BigInteger valueOf(long x)\nè¿”å›å€¼ç­‰äºxçš„å¤§æ•´æ•°ã€‚\n\n\n\n\n\n\n\n\nBigInteger\n\n\n\n\n\nBigDecimal add(BigDecimal other)\n+\n\n\nBigDecimal subtract(BigDecimal other)\n-\n\n\nBigDecimal multiply(BigDecimal other)\n*\n\n\nBigDecimal multiply(BigDecimal other)\n/\n\n\nint compareTo(BigDecimal other)\næ¯”è¾ƒ\n\n\nstatic BigDecimal valueOf(long x)\n\n\n\nstatic BigDecimal valueOf(long x, int scale)\n\n\n\n\n\nJavaæ•°ç»„æ•°ç»„(Array)ï¼Œæ˜¯å¤šä¸ªç›¸åŒç±»å‹æ•°æ®æŒ‰ä¸€å®šé¡ºåºæ’åˆ—çš„é›†åˆï¼Œå¹¶ä½¿ç”¨ä¸€ä¸ªåå­—å‘½åï¼Œå¹¶é€šè¿‡ç¼–å·çš„æ–¹å¼å¯¹è¿™äº›æ•°æ®è¿›è¡Œç»Ÿä¸€ç®¡ç†ã€‚\næ•°ç»„çš„å¸¸è§æ¦‚å¿µ\n\næ•°ç»„å\nä¸‹æ ‡(æˆ–ç´¢å¼•)\nå…ƒç´ \næ•°ç»„çš„é•¿åº¦\n\nä¸€ç»´æ•°ç»„çš„åˆ›å»ºä¸ä½¿ç”¨// ä¸€ç»´æ•°ç»„çš„å£°æ˜æ–¹å¼ï¼š\ntype var[] æˆ– type[]  var;\n//Javaè¯­è¨€ä¸­å£°æ˜æ•°ç»„æ—¶ä¸èƒ½æŒ‡å®šå…¶é•¿åº¦(æ•°ç»„ä¸­å…ƒç´ çš„æ•°)ï¼Œ ä¾‹å¦‚ï¼š \nint a[5];  //éæ³•\n//åŠ¨æ€åˆå§‹åŒ–ï¼šæ•°ç»„å£°æ˜ä¸”ä¸ºæ•°ç»„å…ƒç´ åˆ†é…ç©ºé—´ä¸èµ‹å€¼çš„æ“ä½œåˆ†å¼€è¿›è¡Œ\nint[] arr = new int[3];\nString names[]; names = new String[3];\n//é™æ€åˆå§‹åŒ–ï¼šåœ¨å®šä¹‰æ•°ç»„çš„åŒæ—¶å°±ä¸ºæ•°ç»„å…ƒç´ åˆ†é…ç©ºé—´å¹¶èµ‹å€¼ã€‚\nint arr[] = new int[]{ 3, 9, 8};\nint[] arr = {3,9,8};\n// å±æ€§length\na.length æŒ‡æ˜æ•°ç»„açš„é•¿åº¦(å…ƒç´ ä¸ªæ•°)\næ•°ç»„çš„é»˜è®¤åˆå§‹åŒ–ä¸å†…å­˜åˆ†ææ•°ç»„æ˜¯å¼•ç”¨ç±»å‹ï¼Œå®ƒçš„å…ƒç´ ç›¸å½“äºç±»çš„æˆå‘˜å˜é‡ï¼Œå› æ­¤æ•°ç»„ä¸€ç»åˆ†é…ç©ºé—´ï¼Œå…¶ä¸­çš„æ¯ä¸ªå…ƒç´ ä¹Ÿè¢«æŒ‰ç…§æˆå‘˜å˜é‡åŒæ ·çš„æ–¹å¼è¢«éšå¼åˆå§‹åŒ–ã€‚\n\nå¯¹äºåŸºæœ¬æ•°æ®ç±»å‹è€Œè¨€ï¼Œé»˜è®¤åˆå§‹åŒ–å€¼å„æœ‰ä¸åŒ\nå¯¹äºå¼•ç”¨æ•°æ®ç±»å‹è€Œè¨€ï¼Œé»˜è®¤åˆå§‹åŒ–å€¼ä¸ºnull(æ³¨æ„ä¸0ä¸åŒï¼\n\n\n\n\n\n\n\n\n\n\næ•°ç»„å…ƒç´ ç±»å‹\nå…ƒç´ é»˜è®¤åˆå§‹å€¼\n\n\n\n\nbyte\n0\n\n\nshort\n0\n\n\nint\n0\n\n\nlong\n0L\n\n\nfloat\n0.0F\n\n\ndouble\n0.0\n\n\nchar\n0 æˆ–å†™ä¸º:â€™\\u0000â€™(è¡¨ç°ä¸ºç©º)\n\n\nboolean\nfalse\n\n\nå¼•ç”¨ç±»å‹\nnull\n\n\n\n\nfor eachå¾ªç¯ä¾æ¬¡å¤„ç†æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ ï¼ˆå…¶ä»–ç±»å‹çš„å…ƒç´ é›†åˆäº¦å¯ï¼‰è€Œä¸å¿…ä¸ºæŒ‡å®šä¸‹æ ‡å€¼è€Œåˆ†å¿ƒã€‚\nfor (v : collection) statement;\n\nint[] ints = new int[100];\nfor (int anInt : ints) {\n    ;\n}\næ•°ç»„çš„æ‹·è´å°†ä¸€ä¸ªæ•°ç»„å˜é‡æ‹·è´ç»™å¦ä¸€ä¸ªæ•°ç»„å˜é‡ã€‚è¿™æ—¶ï¼Œä¸¤ä¸ªå˜é‡å°†å¼•ç”¨åŒä¸€ä¸ªæ•°ç»„ï¼š\nint[] ints = new int[100];\nint[] b = int;\nå°†ä¸€ä¸ªæ•°ç»„çš„æ‰€æœ‰å€¼æ‹·è´åˆ°ä¸€ä¸ªæ–°çš„æ•°ç»„ä¸­å»ï¼Œå°±è¦ä½¿ç”¨Arraysç±»çš„copyOfæ–¹æ³•ï¼š\nint b = Arrays.copyof(a,a.length)\nå¤šç»´æ•°ç»„// æ ¼å¼1ï¼ˆåŠ¨æ€åˆå§‹åŒ–ï¼‰ï¼š\nint[][] arr = new int[3][2];\n// æ ¼å¼2ï¼ˆåŠ¨æ€åˆå§‹åŒ–ï¼‰ï¼š\nint[][] arr = new int[3][];\n// æ¯ä¸ªä¸€ç»´æ•°ç»„éƒ½æ˜¯é»˜è®¤åˆå§‹åŒ–å€¼null (æ³¨æ„ï¼šåŒºåˆ«äºæ ¼å¼1ï¼‰å¯ä»¥å¯¹è¿™ä¸ªä¸‰ä¸ªä¸€ç»´æ•°ç»„åˆ†åˆ«è¿›è¡Œåˆå§‹åŒ–\narr[0] = new int[3];    \narr[1] = new int[1];   \narr[2] = new int[2];\næ³¨ï¼šint[][]arr = new int[][3];  //éæ³•\n// æ ¼å¼3ï¼ˆé™æ€åˆå§‹åŒ–ï¼‰ï¼š\nint[][] arr = new int[][]{{3,8,2},{2,7},{9,0,1,6}};\n// æ³¨æ„ç‰¹æ®Šå†™æ³•æƒ…å†µï¼š\nint[] x,y[]; xæ˜¯ä¸€ç»´æ•°ç»„ï¼Œyæ˜¯äºŒç»´æ•°ç»„ã€‚\n\n// å£°æ˜ï¼šint[] x,y[]; åœ¨ç»™x,yå˜é‡èµ‹å€¼ä»¥åï¼Œä»¥ä¸‹é€‰é¡¹å…è®¸é€šè¿‡ç¼–è¯‘çš„æ˜¯ï¼š\nx[0] = y;  no\ny[0] = x;   yes\ny[0][0] = x;   no\nx[0][0] = y;  no\ny[0][0] = x[0];  yes\nx = y;   no\n// æç¤ºï¼š\nä¸€ç»´æ•°ç»„ï¼šint[] x  æˆ–è€…int x[]   \näºŒç»´æ•°ç»„ï¼šint[][] y æˆ–è€… int[] y[]  æˆ–è€… int y[][]\næ“ä½œæ•°ç»„çš„å·¥å…·ç±»Arraysjava.util.Arraysç±»å³ä¸ºæ“ä½œæ•°ç»„çš„å·¥å…·ç±»ï¼ŒåŒ…å«äº†ç”¨æ¥æ“ä½œæ•°ç»„ï¼ˆæ¯”å¦‚æ’åºå’Œæœç´¢ï¼‰çš„å„ç§æ–¹æ³•ã€‚\n\n\n\n\nå·¥å…·ç±»Arrays\n\n\n\n\n\nboolean equals(int[] a,int[] b)\nåˆ¤æ–­ä¸¤ä¸ªæ•°ç»„æ˜¯å¦ç›¸ç­‰ã€‚\n\n\nString toString(int[] a)\nè¾“å‡ºæ•°ç»„ä¿¡æ¯ã€‚\n\n\nvoid fill(int[] a,int val)\nå°†æŒ‡å®šå€¼å¡«å……åˆ°æ•°ç»„ä¹‹ä¸­ã€‚\n\n\nvoid sort(int[] a)\nå¯¹æ•°ç»„è¿›è¡Œæ’åºã€‚\n\n\nint binarySearch(int[] a,int key)\nå¯¹æ’åºåçš„æ•°ç»„è¿›è¡ŒäºŒåˆ†æ³•æ£€ç´¢æŒ‡å®šçš„å€¼ã€‚\n\n\nstatic type copyOf(type[] a, int length)\n\n\n\nstatic type copyOfRange(type[] a, int start, int end)\n\n\n\nstatic void sort(type[] a)\nä¼˜åŒ–çš„å¿«é€Ÿæ’åºç®—æ³•\n\n\nstatic int binarySearch(type[] a, type v)\n\n\n\nstatic int binarySearch(type[] a, int start, int end, type v)\näºŒåˆ†æœç´¢ç®—æ³•æŸ¥æ‰¾å€¼v\n\n\nstatic void fill(type[] a, type v)\nå°†æ•°ç»„çš„æ‰€æœ‰æ•°æ®å…ƒç´ å€¼è®¾ç½®ä¸ºvã€‚\n\n\nstatic boolean equals(type[] a, type[] b)\nå¦‚æœä¸¤ä¸ªæ•°ç»„å¤§å°ç›¸åŒï¼Œå¹¶ä¸”ä¸‹æ ‡ç›¸åŒçš„å…ƒç´ éƒ½å¯¹åº”ç›¸ç­‰ï¼Œè¿”å›trueã€‚\n\n\n\n\n\n\n\n\n\n\n\nJavaå…³é”®å­—ïƒ˜    å®šä¹‰ï¼šè¢«Javaè¯­è¨€èµ‹äºˆäº†ç‰¹æ®Šå«ä¹‰ï¼Œç”¨åšä¸“é—¨ç”¨é€”çš„å­—ç¬¦ä¸²ï¼ˆå•è¯ï¼‰ïƒ˜    ç‰¹ç‚¹ï¼šå…³é”®å­—ä¸­æ‰€æœ‰å­—æ¯éƒ½ä¸ºå°å†™\n\n\n\n\nç”¨äºå®šä¹‰æ•°æ®ç±»å‹çš„å…³é”®å­—\n\n\n\n\n\n\n\n\nclass\ninterface\nenum\nbyte\nshort\n\n\nint\nlong\nfloat\ndouble\nchar\n\n\nboolean\nvoid\n\n\n\n\n\nç”¨äºå®šä¹‰æµç¨‹æ§åˆ¶çš„å…³é”®å­—\n\n\n\n\n\n\nif\nelse\nswitch\ncase\ndefault\n\n\nwhile\ndo\nfor\nbreak\ncontinue\n\n\nreturn\n\n\n\n\n\n\nç”¨äºå®šä¹‰è®¿é—®æƒé™ä¿®é¥°ç¬¦çš„å…³é”®å­—\n\n\n\n\n\n\nprivate\nprotect\npublic\n\n\n\n\nç”¨äºå®šä¹‰ç±»ï¼Œå‡½æ•°ï¼Œå˜é‡ä¿®é¥°ç¬¦çš„å…³é”®å­—\n\n\n\n\n\n\nabstract\nfinal\nstatic\nsynchronized\n\n\n\nç”¨äºå®šä¹‰ç±»ä¸ç±»ä¹‹é—´å…³ç³»çš„å…³é”®å­—\n\n\n\n\n\n\nextends\nimplements\n\n\n\n\n\nç”¨äºå®šä¹‰å»ºç«‹å®ä¾‹åŠå¼•ç”¨å®ä¾‹ï¼Œåˆ¤æ–­å®ä¾‹çš„å…³é”®å­—\n\n\n\n\n\n\nnew\nthis\nsuper\ninstanceof\n\n\n\nç”¨äºå¼‚å¸¸å¤„ç†çš„å…³é”®å­—\n\n\n\n\n\n\ntry\ncatch\nfinally\nthrow\nthrows\n\n\nç”¨äºåŒ…çš„å…³é”®å­—\n\n\n\n\n\n\npackage\nimport\n\n\n\n\n\nå…¶ä»–ä¿®é¥°ç¬¦å…³é”®å­—\n\n\n\n\n\n\nnative\nstrictfp\ntransient\nvolatile\nassert\n\n\n* ç”¨äºå®šä¹‰æ•°æ®ç±»å‹å€¼çš„å­—é¢å€¼\n\n\n\n\n\n\ntrue\nfalse\nnull\n\n\n\n\n\nJavaä¿ç•™å­—ï¼šç°æœ‰Javaç‰ˆæœ¬å°šæœªä½¿ç”¨ï¼Œä½†ä»¥åç‰ˆæœ¬å¯èƒ½ä¼šä½œä¸ºå…³é”®å­—ä½¿ç”¨ã€‚è‡ªå·±å‘½åæ ‡è¯†ç¬¦æ—¶è¦é¿å…ä½¿ç”¨è¿™äº›ä¿ç•™å­—goto ã€const\nJavaçš„å†…å­˜ç®¡ç†ä¸åƒåœ¾å›æ”¶JVMçš„å†…å­˜ç»“æ„\n\n\n\n\n\n\n\n\n\n\n\næ ˆï¼ˆStackï¼‰\nè™šæ‹Ÿæœºæ ˆç”¨äºå­˜å‚¨å±€éƒ¨å˜é‡ç­‰ã€‚å±€éƒ¨å˜é‡è¡¨å­˜æ”¾äº†ç¼–è¯‘æœŸå¯çŸ¥é•¿åº¦çš„å„ç§åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆbooleanã€byteã€ char ã€ short ã€ int ã€ float ã€ long ã€ doubleï¼‰ã€å¯¹è±¡å¼•ç”¨ï¼ˆreferenceç±»å‹ï¼Œå®ƒä¸ç­‰åŒäºå¯¹è±¡æœ¬èº«ï¼Œæ˜¯å¯¹è±¡åœ¨å †å†…å­˜çš„é¦–åœ°å€ï¼‰ã€‚ æ–¹æ³•æ‰§è¡Œå®Œï¼Œè‡ªåŠ¨é‡Šæ”¾ã€‚\n\n\nå †ï¼ˆHeapï¼‰\næ­¤å†…å­˜åŒºåŸŸçš„å”¯ä¸€ç›®çš„å°±æ˜¯å­˜æ”¾å¯¹è±¡å®ä¾‹ï¼Œå‡ ä¹æ‰€æœ‰çš„å¯¹è±¡å®ä¾‹éƒ½åœ¨è¿™é‡Œåˆ†é…å†…å­˜ã€‚è¿™ä¸€ç‚¹åœ¨Javaè™šæ‹Ÿæœºè§„èŒƒä¸­çš„æè¿°æ˜¯ï¼šæ‰€æœ‰çš„å¯¹è±¡å®ä¾‹ä»¥åŠæ•°ç»„éƒ½è¦åœ¨å †ä¸Šåˆ†é…ã€‚\n\n\næ–¹æ³•åŒºï¼ˆMethod Areaï¼‰\nç”¨äºå­˜å‚¨å·²è¢«è™šæ‹ŸæœºåŠ è½½çš„ç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åçš„ä»£ç ç­‰æ•°æ®ã€‚\n\n\n\n\n\n\n\n\n\n\n\n","slug":"J0-JavaåŸºç¡€","date":"2021-11-04T06:41:20.000Z","categories_index":"JAVA","tags_index":"java","author_index":"YFR718"},{"id":"07213b6ca5497f88ac351468e0325797","title":"Hexo ä¸ªäººåšå®¢æ­å»º","content":"Hexo ä¸ªäººåšå®¢æ­å»ºå®‰è£…æ­¥éª¤\ngithubåˆ›å»ºyfr718.github.ioé¡¹ç›®\n\nå®‰è£…gitã€è®¾ç½®ç”¨æˆ·åå’Œé‚®ç®±ã€sshè¿æ¥github\ngit config --global user.name &quot;ä½ çš„GitHubç”¨æˆ·å&quot;\ngit config --global user.email &quot;ä½ çš„GitHubæ³¨å†Œé‚®ç®±&quot;\nssh-keygen -t rsa -C &quot;ä½ çš„GitHubæ³¨å†Œé‚®ç®±&quot;\n#æ‰“å¼€GitHub_Settings_keys é¡µé¢ï¼Œæ–°å»ºnew SSH Key\n#Titleä¸ºæ ‡é¢˜ï¼Œä»»æ„å¡«å³å¯ï¼Œå°†åˆšåˆšå¤åˆ¶çš„id_rsa.pubå†…å®¹ç²˜è´´è¿›å»ï¼Œæœ€åç‚¹å‡»Add SSH keyã€‚åœ¨Git Bashä¸­æ£€æµ‹GitHubå…¬é’¥è®¾ç½®æ˜¯å¦æˆåŠŸï¼Œè¾“å…¥ \nssh git@github.com\n\n\n\nå®‰è£…Node.js\n# å®‰è£…åï¼Œæ£€æµ‹Node.jsæ˜¯å¦å®‰è£…æˆåŠŸï¼Œåœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ \nnode -v\n\nå®‰è£…Hexo\n# åœ¨ç”µè„‘å¸¸é‡Œåˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå¯ä»¥å‘½åä¸ºBlogï¼ŒHexoæ¡†æ¶ä¸ä»¥åä½ è‡ªå·±å‘å¸ƒçš„ç½‘é¡µéƒ½åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­ã€‚\n# åœ¨ç›¸åº”æ–‡ä»¶å¤¹å®‰è£…Hexo\nnpm install -g hexo-cli \n# åˆå§‹åŒ–åšå®¢\nhexo init blog\n# æŸ¥çœ‹åšå®¢ç½‘é¡µ\nhexo g #ç”Ÿæˆç½‘é¡µ\nhexo s #è¿è¡Œç½‘é¡µ\n# å®Œæˆåï¼Œæ‰“å¼€æµè§ˆå™¨è¾“å…¥åœ°å€ï¼š\nlocalhost:4000\n\n\nHexo å¸¸ç”¨å‘½ä»¤åšå®¢ç®¡ç†npm install hexo -g # å®‰è£…Hexo\nnpm update hexo -g # å‡çº§\nhexo init # åˆå§‹åŒ–åšå®¢\nhexo clean # æ¸…é™¤ç¼“å­˜æ–‡ä»¶ db.json å’Œå·²ç”Ÿæˆçš„é™æ€æ–‡ä»¶ public\nhexo g # è‡ªåŠ¨ç”Ÿæˆç½‘ç«™é™æ€æ–‡ä»¶ï¼Œå¹¶éƒ¨ç½²åˆ°è®¾å®šçš„ä»“åº“\nhexo s # å¯åŠ¨æœ¬åœ°æœåŠ¡å™¨ï¼Œç”¨äºé¢„è§ˆä¸»é¢˜ã€‚é»˜è®¤åœ°å€ï¼š http:&#x2F;&#x2F;localhost:4000&#x2F;\nhexo d # è‡ªåŠ¨ç”Ÿæˆç½‘ç«™é™æ€æ–‡ä»¶ï¼Œå¹¶éƒ¨ç½²åˆ°è®¾å®šçš„ä»“åº“\nhexo clean &amp;&amp; hexo g &amp;&amp; hexo d # æœ¬åœ°æ›´æ–°åé‡æ–°éƒ¨ç½²åˆ°githubä¸Š\næ–‡ç« ç®¡ç†# æ–°å»ºæ–‡ç« \nhexo new æ–‡ç« æ–‡ä»¶å\nä¸€äº›markdownæ ¼å¼\n\n\n\n\n\n\n\n\n123456\n\n\n\n\n\n\næç¤º\nNormal Tips Container\n\n\n\n\n\n\n\n\næ³¨æ„\nWarning!!!\n\n\n\n\n\n\n\n\naaa\nWarning!!!\n\n\n\n\n\n\n\n\nç‰¹åˆ«æ³¨æ„\nDanger!!!\n\n\nClick to see more\n\néšè—å†…å®¹\n\n\n\nå¼•ç”¨å—\n\n","slug":"0.Hexoä¸ªäººåšå®¢æ­å»º","date":"2021-11-02T09:47:00.000Z","categories_index":"å‰ç«¯","tags_index":"hexo","author_index":"YFR718"},{"id":"9b69dffe0262764ac691bc95bc415c22","title":"PythonåŸºç¡€","content":"\n\n\n\n\n\n\n\n\nå¤©æ± Pythonè®­ç»ƒè¥\nPythonåŸºç¡€1.å˜é‡ã€è¿ç®—ç¬¦ä¸æ•°æ®ç±»å‹1.1 æ³¨é‡Š# è¡¨ç¤ºæ³¨é‡Šï¼Œä½œç”¨äºæ•´è¡Œã€‚\nâ€˜â€™â€™ â€˜â€™â€™ æˆ–è€… â€œâ€â€ â€œâ€â€ è¡¨ç¤ºåŒºé—´æ³¨é‡Šï¼Œåœ¨ä¸‰å¼•å·ä¹‹é—´çš„æ‰€æœ‰å†…å®¹è¢«æ³¨é‡Š\n# è¿™æ˜¯ä¸€ä¸ªæ³¨é‡Š\nprint(\"Hello world\")\n'''\nè¿™æ˜¯å¤šè¡Œæ³¨é‡Šï¼Œç”¨ä¸‰ä¸ªå•å¼•å·\n'''\n\"\"\"\nè¿™æ˜¯å¤šè¡Œæ³¨é‡Šï¼Œç”¨ä¸‰ä¸ªåŒå¼•å·\n\"\"\"\n1.2 è¿ç®—ç¬¦\n\n\n\nè¿ç®—ç¬¦\n\n\n\n\n\n\nç®—æœ¯è¿ç®—ç¬¦\n+, -, , /, //, %, *\n\n\n\næ¯”è¾ƒè¿ç®—ç¬¦\n&gt;, &gt;=, &lt;, &lt;=, !=\n\n\n\né€»è¾‘è¿ç®—ç¬¦\nand, or, not\n\n\n\nä½è¿ç®—ç¬¦\n~, &amp;, \\\n, ^, &lt;&lt;, &gt;&gt;\n\n\n\nä¸‰å…ƒè¿ç®—ç¬¦\nx if x&lt;y else y\n\n\n\nå…¶ä»–è¿ç®—ç¬¦\nis, not is, in, not in\n\n\n\n\næ³¨æ„\n\nis, is not å¯¹æ¯”çš„æ˜¯ä¸¤ä¸ªå˜é‡çš„å†…å­˜åœ°å€ï¼šå‡å¦‚æ¯”è¾ƒçš„ä¸¤ä¸ªå˜é‡ï¼ŒæŒ‡å‘çš„éƒ½æ˜¯åœ°å€ä¸å¯å˜çš„ç±»å‹ï¼ˆstrç­‰ï¼‰ï¼Œé‚£ä¹ˆisï¼Œis not å’Œ ==ï¼Œï¼= æ˜¯å®Œå…¨ç­‰ä»·çš„ã€‚\n==, != å¯¹æ¯”çš„æ˜¯ä¸¤ä¸ªå˜é‡çš„å€¼ï¼šå‡å¦‚å¯¹æ¯”çš„ä¸¤ä¸ªå˜é‡ï¼ŒæŒ‡å‘çš„æ˜¯åœ°å€å¯å˜çš„ç±»å‹ï¼ˆlistï¼Œdictï¼Œtupleç­‰ï¼‰ï¼Œåˆ™ä¸¤è€…æ˜¯æœ‰åŒºåˆ«çš„ã€‚\n\nè¿ç®—ç¬¦çš„ä¼˜å…ˆçº§\n\nä¸€å…ƒè¿ç®—ç¬¦ä¼˜äºäºŒå…ƒè¿ç®—ç¬¦ã€‚å¦‚æ­£è´Ÿå·ã€‚\nå…ˆç®—æœ¯è¿ç®—ï¼Œåç§»ä½è¿ç®—ï¼Œæœ€åä½è¿ç®—ã€‚ä¾‹å¦‚ 1 &lt;&lt; 3 + 2 &amp; 7ç­‰ä»·äº (1 &lt;&lt; (3 + 2)) &amp; 7\né€»è¾‘è¿ç®—æœ€åç»“åˆ\n\nä½è¿ç®—åŸç ã€åç å’Œè¡¥ç \näºŒè¿›åˆ¶æœ‰ä¸‰ç§ä¸åŒçš„è¡¨ç¤ºå½¢å¼ï¼šåŸç ã€åç å’Œè¡¥ç ï¼Œè®¡ç®—æœºå†…éƒ¨ä½¿ç”¨è¡¥ç æ¥è¡¨ç¤ºã€‚\nåŸç ï¼šå°±æ˜¯å…¶äºŒè¿›åˆ¶è¡¨ç¤ºï¼ˆæ³¨æ„ï¼Œæœ‰ä¸€ä½ç¬¦å·ä½ï¼‰ã€‚\nåç ï¼šæ­£æ•°çš„åç å°±æ˜¯åŸç ï¼Œè´Ÿæ•°çš„åç æ˜¯ç¬¦å·ä½ä¸å˜ï¼Œå…¶ä½™ä½å–åï¼ˆå¯¹åº”æ­£æ•°æŒ‰ä½å–åï¼‰ã€‚\nè¡¥ç ï¼šæ­£æ•°çš„è¡¥ç å°±æ˜¯åŸç ï¼Œè´Ÿæ•°çš„è¡¥ç æ˜¯åç +1ã€‚\nç¬¦å·ä½ï¼šæœ€é«˜ä½ä¸ºç¬¦å·ä½ï¼Œ0è¡¨ç¤ºæ­£æ•°ï¼Œ1è¡¨ç¤ºè´Ÿæ•°ã€‚åœ¨ä½è¿ç®—ä¸­ç¬¦å·ä½ä¹Ÿå‚ä¸è¿ç®—ã€‚åˆ©ç”¨ä½è¿ç®—å®ç°å¿«é€Ÿè®¡ç®—\n\né€šè¿‡ &lt;&lt; ï¼Œ &gt;&gt; å¿«é€Ÿè®¡ç®—2çš„å€æ•°é—®é¢˜ã€‚\n\né€šè¿‡ ^ å¿«é€Ÿäº¤æ¢ä¸¤ä¸ªæ•´æ•°ã€‚\na ^= b\nb ^= a\na ^= b\n\né€šè¿‡ a &amp; (-a) å¿«é€Ÿè·å–a çš„æœ€åä¸º 1 ä½ç½®çš„æ•´æ•°ã€‚\n\n\nåˆ©ç”¨ä½è¿ç®—å®ç°æ•´æ•°é›†åˆ\n\nä¸€ä¸ªæ•°çš„äºŒè¿›åˆ¶è¡¨ç¤ºå¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªé›†åˆï¼ˆ0 è¡¨ç¤ºä¸åœ¨é›†åˆä¸­ï¼Œ1 è¡¨ç¤ºåœ¨é›†åˆä¸­ï¼‰ã€‚æ¯”å¦‚é›†åˆ {1, 3, 4, 8} ï¼Œå¯ä»¥è¡¨ç¤ºæˆ 01 00 01 10 10 è€Œå¯¹åº”çš„ä½è¿ç®—ä¹Ÿå°±å¯ä»¥çœ‹ä½œæ˜¯å¯¹é›†åˆè¿›è¡Œçš„æ“ä½œã€‚\n\nå…ƒç´ ä¸é›†åˆçš„æ“ä½œï¼š\na | (1&lt;&lt;i) -> æŠŠ i æ’å…¥åˆ°é›†åˆä¸­\na &amp; ~(1&lt;&lt;i) -> æŠŠ i ä»é›†åˆä¸­åˆ é™¤\na &amp; (1&lt;&lt;i) -> åˆ¤æ–­ i æ˜¯å¦å±äºè¯¥é›†åˆï¼ˆé›¶ä¸å±äºï¼Œéé›¶å±äºï¼‰\n\né›†åˆä¹‹é—´çš„æ“ä½œï¼š\na è¡¥ -> ~a\na äº¤ b -> a &amp; b\na å¹¶ b -> a | b\na å·® b -> a &amp; (~b)\n\n\n1.3 å˜é‡å’Œèµ‹å€¼\nåœ¨ä½¿ç”¨å˜é‡ä¹‹å‰ï¼Œéœ€è¦å¯¹å…¶å…ˆèµ‹å€¼ã€‚\nå˜é‡åå¯ä»¥åŒ…æ‹¬å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿ã€ä½†å˜é‡åä¸èƒ½ä»¥æ•°å­—å¼€å¤´ã€‚\nPython å˜é‡åæ˜¯å¤§å°å†™æ•æ„Ÿçš„ï¼Œfoo != Fooã€‚\n\nfirst = 2\nsecond = 3\nthird = first + second\nprint(third) # 5\n1.4 æ•°æ®ç±»å‹ä¸è½¬æ¢Python3 ä¸­æœ‰å…­ä¸ªæ ‡å‡†çš„æ•°æ®ç±»å‹ï¼š\n\nNumberï¼ˆæ•°å­—ï¼‰ï¼šintã€floatã€boolã€complexï¼ˆå¤æ•°ï¼‰ã€‚\nStringï¼ˆå­—ç¬¦ä¸²ï¼‰\nListï¼ˆåˆ—è¡¨ï¼‰\nTupleï¼ˆå…ƒç»„ï¼‰\nSetï¼ˆé›†åˆï¼‰\nDictionaryï¼ˆå­—å…¸ï¼‰\n\nPython3 çš„å…­ä¸ªæ ‡å‡†æ•°æ®ç±»å‹ä¸­ï¼š\n\nä¸å¯å˜æ•°æ®ï¼ˆ3 ä¸ªï¼‰ï¼šNumberï¼ˆæ•°å­—ï¼‰ã€Stringï¼ˆå­—ç¬¦ä¸²ï¼‰ã€Tupleï¼ˆå…ƒç»„ï¼‰ï¼›\nå¯å˜æ•°æ®ï¼ˆ3 ä¸ªï¼‰ï¼šListï¼ˆåˆ—è¡¨ï¼‰ã€Dictionaryï¼ˆå­—å…¸ï¼‰ã€Setï¼ˆé›†åˆï¼‰ã€‚\n\nç®€å•æ•°æ®ç±»å‹\n\næ•´å‹\næµ®ç‚¹å‹\nå¸ƒå°”å‹\n\nå®¹å™¨æ•°æ®ç±»å‹\n\nåˆ—è¡¨\nå…ƒç»„\nå­—å…¸\né›†åˆ\nå­—ç¬¦ä¸²\n\n1.5 print() å‡½æ•°print(*objects, sep=' ', end='\\n', file=sys.stdout, flush=False)\n\nå°†å¯¹è±¡ä»¥å­—ç¬¦ä¸²è¡¨ç¤ºçš„æ–¹å¼æ ¼å¼åŒ–è¾“å‡ºåˆ°æµæ–‡ä»¶å¯¹è±¡fileé‡Œã€‚å…¶ä¸­æ‰€æœ‰éå…³é”®å­—å‚æ•°éƒ½æŒ‰str() æ–¹å¼è¿›è¡Œè½¬æ¢ä¸ºå­—ç¬¦ä¸²è¾“å‡ºï¼›\nå…³é”®å­—å‚æ•°sep æ˜¯å®ç°åˆ†éš”ç¬¦ï¼Œæ¯”å¦‚å¤šä¸ªå‚æ•°è¾“å‡ºæ—¶æƒ³è¦è¾“å‡ºä¸­é—´çš„åˆ†éš”å­—ç¬¦ï¼›\nå…³é”®å­—å‚æ•°end æ˜¯è¾“å‡ºç»“æŸæ—¶çš„å­—ç¬¦ï¼Œé»˜è®¤æ˜¯æ¢è¡Œç¬¦\\n ï¼›\nå…³é”®å­—å‚æ•°file æ˜¯å®šä¹‰æµè¾“å‡ºçš„æ–‡ä»¶ï¼Œå¯ä»¥æ˜¯æ ‡å‡†çš„ç³»ç»Ÿè¾“å‡ºsys.stdout ï¼Œä¹Ÿå¯ä»¥é‡å®šä¹‰ä¸ºåˆ«çš„æ–‡ä»¶ï¼›\nå…³é”®å­—å‚æ•°flush æ˜¯ç«‹å³æŠŠå†…å®¹è¾“å‡ºåˆ°æµæ–‡ä»¶ï¼Œä¸ä½œç¼“å­˜ã€‚\n\nã€ä¾‹å­ã€‘ï¼Œ item å€¼ä¸â€™another stringâ€™ ä¸¤ä¸ªå€¼ä¹‹é—´ç”¨sep è®¾ç½®çš„å‚æ•°&amp; åˆ†å‰²ã€‚ç”±äºend å‚æ•°æ²¡æœ‰è®¾ç½®ï¼Œå› æ­¤é»˜è®¤æ˜¯è¾“å‡ºè§£é‡Šåæ¢è¡Œï¼Œå³end å‚æ•°çš„é»˜è®¤å€¼ä¸º\\n ã€‚\nshoplist = ['apple', 'mango', 'carrot', 'banana']\nprint(\"This is printed with 'sep='&amp;''.\")\nfor item in shoplist:\nprint(item, 'another string', sep='&amp;')\n# This is printed with 'sep='&amp;''.\n# apple&amp;another string\n# mango&amp;another string\n# carrot&amp;another string\n# banana&amp;another string\n2 é€»è¾‘è¯­å¥\n\n\n\nè¯­å¥ç±»å‹\n\n\n\n\n\n\nåˆ¤æ–­\nifâ€¦elifâ€¦else\n\n\n\nwhileå¾ªç¯\nwhileâ€¦elseâ€¦\n\n\n\nforå¾ªç¯\nfor è¿­ä»£å˜é‡ in å¯è¿­ä»£å¯¹è±¡â€¦elseâ€¦\n\n\n\nå…¶ä»–\nbreakã€continueã€pass\n\n\n\n\n# å½“while å¾ªç¯æ­£å¸¸æ‰§è¡Œå®Œçš„æƒ…å†µä¸‹ï¼Œæ‰§è¡Œelse è¾“å‡ºï¼Œå¦‚æœwhile å¾ªç¯ä¸­æ‰§è¡Œäº†è·³å‡ºå¾ªç¯çš„è¯­å¥ï¼Œæ¯”å¦‚ break ï¼Œå°†ä¸æ‰§è¡Œelse ä»£ç å—çš„å†…å®¹ã€‚\ncount = 0\nwhile count &lt; 5:\n    print(\"%d is less than 5\" % count)\n    count = count + 1\nelse:\n\tprint(\"%d is not less than 5\" % count)\nfor i in 'ILoveLSGO':\n\tprint(i, end=' ') # ä¸æ¢è¡Œè¾“å‡º\n# I L o v e L S G O\n\nfor i in range(len(member)):\n\tprint(member[i])\n\t\ndic = &#123;'a': 1, 'b': 2, 'c': 3, 'd': 4&#125;\nfor key, value in dic.items():\n\tprint(key, value, sep=':', end=' ')\n# a:1 b:2 c:3 d:4\n\ndic = &#123;'a': 1, 'b': 2, 'c': 3, 'd': 4&#125;\nfor key in dic.keys():\n\tprint(key, end=' ')\n# a b c d\n\nfor num in range(10, 20): # è¿­ä»£ 10 åˆ° 20 ä¹‹é—´çš„æ•°å­—\n    for i in range(2, num): # æ ¹æ®å› å­è¿­ä»£\n        if num % i == 0: # ç¡®å®šç¬¬ä¸€ä¸ªå› å­\n            j = num / i # è®¡ç®—ç¬¬äºŒä¸ªå› å­\n            print('%d ç­‰äº %d * %d' % (num, i, j))\n            break # è·³å‡ºå½“å‰å¾ªç¯\n    else: # å¾ªç¯çš„ else éƒ¨åˆ†\n    \tprint(num, 'æ˜¯ä¸€ä¸ªè´¨æ•°')\n# 10 ç­‰äº 2 * 5\n# 11 æ˜¯ä¸€ä¸ªè´¨æ•°\n# 12 ç­‰äº 2 * 6\n# 13 æ˜¯ä¸€ä¸ªè´¨æ•°\n# 14 ç­‰äº 2 * 7\n# 15 ç­‰äº 3 * 5\n# 16 ç­‰äº 2 * 8\n# 17 æ˜¯ä¸€ä¸ªè´¨æ•°\n# 18 ç­‰äº 2 * 9\n# 19 æ˜¯ä¸€ä¸ªè´¨æ•°\n\nbreak è¯­å¥å¯ä»¥è·³å‡ºå½“å‰æ‰€åœ¨å±‚çš„å¾ªç¯ã€‚\ncontinue ç»ˆæ­¢æœ¬è½®å¾ªç¯å¹¶å¼€å§‹ä¸‹ä¸€è½®å¾ªç¯ã€‚\npass è¯­å¥çš„æ„æ€æ˜¯â€œä¸åšä»»ä½•äº‹â€ï¼Œå¦‚æœä½ åœ¨éœ€è¦æœ‰è¯­å¥çš„åœ°æ–¹ä¸å†™ä»»ä½•è¯­å¥ï¼Œé‚£ä¹ˆè§£é‡Šå™¨ä¼šæç¤ºå‡ºé”™ï¼Œè€Œ pass è¯­å¥å°±æ˜¯ç”¨æ¥è§£å†³è¿™äº›é—®é¢˜çš„ã€‚\n\n2.1assert å…³é”®è¯assert è¿™ä¸ªå…³é”®è¯æˆ‘ä»¬ç§°ä¹‹ä¸ºâ€œæ–­è¨€â€ï¼Œå½“è¿™ä¸ªå…³é”®è¯åè¾¹çš„æ¡ä»¶ä¸º False æ—¶ï¼Œç¨‹åºè‡ªåŠ¨å´©æºƒå¹¶æŠ›å‡ºAssertionError çš„å¼‚å¸¸ã€‚\nmy_list = ['lsgogroup']\nmy_list.pop(0)\nassert len(my_list) > 0\n2.2 range() å‡½æ•°range([start,] stop[, step=1])\n\nfor i in range(2, 9): # ä¸åŒ…å«9\n\tprint(i)\n\nè¿™ä¸ªBIFï¼ˆBuilt-in functionsï¼‰æœ‰ä¸‰ä¸ªå‚æ•°ï¼Œå…¶ä¸­ç”¨ä¸­æ‹¬å·æ‹¬èµ·æ¥çš„ä¸¤ä¸ªè¡¨ç¤ºè¿™ä¸¤ä¸ªå‚æ•°æ˜¯å¯é€‰çš„ã€‚\nstep=1 è¡¨ç¤ºç¬¬ä¸‰ä¸ªå‚æ•°çš„é»˜è®¤å€¼æ˜¯1ã€‚\nrange è¿™ä¸ªBIFçš„ä½œç”¨æ˜¯ç”Ÿæˆä¸€ä¸ªä»start å‚æ•°çš„å€¼å¼€å§‹åˆ°stop å‚æ•°çš„å€¼ç»“æŸçš„æ•°å­—åºåˆ—ï¼Œè¯¥åºåˆ—åŒ…å«start çš„å€¼ä½†ä¸åŒ…å«stop çš„å€¼ã€‚\n\n2.3 enumerate()å‡½æ•°enumerate(sequence, [start=0])\n\nsequence â€” ä¸€ä¸ªåºåˆ—ã€è¿­ä»£å™¨æˆ–å…¶ä»–æ”¯æŒè¿­ä»£å¯¹è±¡ã€‚\nstart â€” ä¸‹æ ‡èµ·å§‹ä½ç½®ã€‚\nè¿”å› enumerate(æšä¸¾) å¯¹è±¡\n\nseasons = ['Spring', 'Summer', 'Fall', 'Winter']\nlst = list(enumerate(seasons))\nprint(lst)\n# [(0, 'Spring'), (1, 'Summer'), (2, 'Fall'), (3, 'Winter')]\n\nlst = list(enumerate(seasons, start=1)) # ä¸‹æ ‡ä» 1 å¼€å§‹\nprint(lst)\n# [(1, 'Spring'), (2, 'Summer'), (3, 'Fall'), (4, 'Winter')]\nenumerate() ä¸ for å¾ªç¯çš„ç»“åˆä½¿ç”¨\nfor i, a in enumerate(A)\n\tdo something with a\nç”¨ enumerate(A) ä¸ä»…è¿”å›äº† A ä¸­çš„å…ƒç´ ï¼Œè¿˜é¡ºä¾¿ç»™è¯¥å…ƒç´ ä¸€ä¸ªç´¢å¼•å€¼ (é»˜è®¤ä» 0 å¼€å§‹)ã€‚æ­¤å¤–ï¼Œç”¨enumerate(A, j) è¿˜å¯ä»¥ç¡®å®šç´¢å¼•èµ·å§‹å€¼ä¸º j ã€‚\n2.4 æ¨å¯¼å¼åˆ—è¡¨æ¨å¯¼å¼[ expr for value in collection [if condition] ]\n\nx = [-4, -2, 0, 2, 4]\ny = [a * 2 for a in x]\nprint(y)\n# [-8, -4, 0, 4, 8]\n\nx = [i ** 2 for i in range(1, 10)]\nprint(x)\n# [1, 4, 9, 16, 25, 36, 49, 64, 81]\n\nx = [(i, i ** 2) for i in range(6)]\nprint(x)\n# [(0, 0), (1, 1), (2, 4), (3, 9), (4, 16), (5, 25)]\n\nx = [i for i in range(100) if (i % 2) != 0 and (i % 3) == 0]\nprint(x)\n# [3, 9, 15, 21, 27, 33, 39, 45, 51, 57, 63, 69, 75, 81, 87, 93, 99]\n\na = [(i, j) for i in range(0, 3) for j in range(0, 3)]\nprint(a)\n# [(0, 0), (0, 1), (0, 2), (1, 0), (1, 1), (1, 2), (2, 0), (2, 1), (2, 2)]\n\nx = [[i, j] for i in range(0, 3) for j in range(0, 3)]\nprint(x)\n# [[0, 0], [0, 1], [0, 2], [1, 0], [1, 1], [1, 2], [2, 0], [2, 1], [2, 2]]\nx[0][0] = 10\nprint(x)\n# [[10, 0], [0, 1], [0, 2], [1, 0], [1, 1], [1, 2], [2, 0], [2, 1], [2, 2]]\n\na = [(i, j) for i in range(0, 3) if i &lt; 1 for j in range(0, 3) if j > 1]\nprint(a)\n# [(0, 2)]\nå…ƒç»„æ¨å¯¼å¼( expr for value in collection [if condition] )\n\na = (x for x in range(10))\nprint(a)\n# &lt;generator object &lt;genexpr> at 0x0000025BE511CC48>\nprint(tuple(a))\n# (0, 1, 2, 3, 4, 5, 6, 7, 8, 9)\nå­—å…¸æ¨å¯¼å¼&#123; key_expr: value_expr for value in collection [if condition] &#125;\n\nb = &#123;i: i % 2 == 0 for i in range(10) if i % 3 == 0&#125;\nprint(b)\n# &#123;0: True, 3: False, 6: True, 9: False&#125;\né›†åˆæ¨å¯¼å¼&#123; expr for value in collection [if condition] &#125;\n\nc = &#123;i for i in [1, 2, 3, 4, 5, 5, 6, 4, 3, 2, 1]&#125;\nprint(c)\n# &#123;1, 2, 3, 4, 5, 6&#125;\n3 å¼‚å¸¸å¤„ç†å¼‚å¸¸å°±æ˜¯è¿è¡ŒæœŸæ£€æµ‹åˆ°çš„é”™è¯¯ã€‚è®¡ç®—æœºè¯­è¨€é’ˆå¯¹å¯èƒ½å‡ºç°çš„é”™è¯¯å®šä¹‰äº†å¼‚å¸¸ç±»å‹ï¼ŒæŸç§é”™è¯¯å¼•å‘å¯¹åº”çš„å¼‚å¸¸æ—¶ï¼Œå¼‚å¸¸å¤„ç†ç¨‹åºå°†è¢«å¯åŠ¨ï¼Œä»è€Œæ¢å¤ç¨‹åºçš„æ­£å¸¸è¿è¡Œã€‚\n3.1 Python æ ‡å‡†å¼‚å¸¸æ€»ç»“\nBaseExceptionï¼šæ‰€æœ‰å¼‚å¸¸çš„ åŸºç±»\nExceptionï¼šå¸¸è§„å¼‚å¸¸çš„ åŸºç±»\nStandardErrorï¼šæ‰€æœ‰çš„å†…å»ºæ ‡å‡†å¼‚å¸¸çš„åŸºç±»\nArithmeticErrorï¼šæ‰€æœ‰æ•°å€¼è®¡ç®—å¼‚å¸¸çš„åŸºç±»\nFloatingPointErrorï¼šæµ®ç‚¹è®¡ç®—å¼‚å¸¸\nOverflowErrorï¼šæ•°å€¼è¿ç®—è¶…å‡ºæœ€å¤§é™åˆ¶\nZeroDivisionErrorï¼šé™¤æ•°ä¸ºé›¶\nAssertionErrorï¼šæ–­è¨€è¯­å¥ï¼ˆassertï¼‰å¤±è´¥\nAttributeErrorï¼šå°è¯•è®¿é—®æœªçŸ¥çš„å¯¹è±¡å±æ€§\nEOFErrorï¼šæ²¡æœ‰å†…å»ºè¾“å…¥ï¼Œåˆ°è¾¾EOFæ ‡è®°\nEnvironmentErrorï¼šæ“ä½œç³»ç»Ÿå¼‚å¸¸çš„åŸºç±»\nIOErrorï¼šè¾“å…¥/è¾“å‡ºæ“ä½œå¤±è´¥\nOSErrorï¼šæ“ä½œç³»ç»Ÿäº§ç”Ÿçš„å¼‚å¸¸ï¼ˆä¾‹å¦‚æ‰“å¼€ä¸€ä¸ªä¸å­˜åœ¨çš„æ–‡ä»¶ï¼‰\nWindowsErrorï¼šç³»ç»Ÿè°ƒç”¨å¤±è´¥\nImportErrorï¼šå¯¼å…¥æ¨¡å—å¤±è´¥çš„æ—¶å€™\nKeyboardInterruptï¼šç”¨æˆ·ä¸­æ–­æ‰§è¡Œ\nLookupErrorï¼šæ— æ•ˆæ•°æ®æŸ¥è¯¢çš„åŸºç±»\nIndexErrorï¼šç´¢å¼•è¶…å‡ºåºåˆ—çš„èŒƒå›´\nKeyErrorï¼šå­—å…¸ä¸­æŸ¥æ‰¾ä¸€ä¸ªä¸å­˜åœ¨çš„å…³é”®å­—\nMemoryErrorï¼šå†…å­˜æº¢å‡ºï¼ˆå¯é€šè¿‡åˆ é™¤å¯¹è±¡é‡Šæ”¾å†…å­˜ï¼‰\nNameErrorï¼šå°è¯•è®¿é—®ä¸€ä¸ªä¸å­˜åœ¨çš„å˜é‡\nUnboundLocalErrorï¼šè®¿é—®æœªåˆå§‹åŒ–çš„æœ¬åœ°å˜é‡\nReferenceErrorï¼šå¼±å¼•ç”¨è¯•å›¾è®¿é—®å·²ç»åƒåœ¾å›æ”¶äº†çš„å¯¹è±¡\nRuntimeErrorï¼šä¸€èˆ¬çš„è¿è¡Œæ—¶å¼‚å¸¸\nNotImplementedErrorï¼šå°šæœªå®ç°çš„æ–¹æ³•\nSyntaxErrorï¼šè¯­æ³•é”™è¯¯å¯¼è‡´çš„å¼‚å¸¸\nIndentationErrorï¼šç¼©è¿›é”™è¯¯å¯¼è‡´çš„å¼‚å¸¸\nTabErrorï¼šTabå’Œç©ºæ ¼æ··ç”¨\nSystemErrorï¼šä¸€èˆ¬çš„è§£é‡Šå™¨ç³»ç»Ÿå¼‚å¸¸\nTypeErrorï¼šä¸åŒç±»å‹é—´çš„æ— æ•ˆæ“ä½œ\nValueErrorï¼šä¼ å…¥æ— æ•ˆçš„å‚æ•°\nUnicodeErrorï¼šUnicodeç›¸å…³çš„å¼‚å¸¸\nUnicodeDecodeErrorï¼šUnicodeè§£ç æ—¶çš„å¼‚å¸¸\nUnicodeEncodeErrorï¼šUnicodeç¼–ç é”™è¯¯å¯¼è‡´çš„å¼‚å¸¸\nUnicodeTranslateErrorï¼šUnicodeè½¬æ¢é”™è¯¯å¯¼è‡´çš„å¼‚å¸¸\n\nå¼‚å¸¸ä½“ç³»å†…éƒ¨æœ‰å±‚æ¬¡å…³ç³»ï¼ŒPythonå¼‚å¸¸ä½“ç³»ä¸­çš„éƒ¨åˆ†å…³ç³»å¦‚ä¸‹æ‰€ç¤ºï¼š\n\n3.2 Pythonæ ‡å‡†è­¦å‘Šæ€»ç»“\nWarningï¼šè­¦å‘Šçš„åŸºç±»\nDeprecationWarningï¼šå…³äºè¢«å¼ƒç”¨çš„ç‰¹å¾çš„è­¦å‘Š\nFutureWarningï¼šå…³äºæ„é€ å°†æ¥è¯­ä¹‰ä¼šæœ‰æ”¹å˜çš„è­¦å‘Š\nUserWarningï¼šç”¨æˆ·ä»£ç ç”Ÿæˆçš„è­¦å‘Š\nPendingDeprecationWarningï¼šå…³äºç‰¹æ€§å°†ä¼šè¢«åºŸå¼ƒçš„è­¦å‘Š\nRuntimeWarningï¼šå¯ç–‘çš„è¿è¡Œæ—¶è¡Œä¸º(runtime behavior)çš„è­¦å‘Š\nSyntaxWarningï¼šå¯ç–‘è¯­æ³•çš„è­¦å‘Š\nImportWarningï¼šç”¨äºåœ¨å¯¼å…¥æ¨¡å—è¿‡ç¨‹ä¸­è§¦å‘çš„è­¦å‘Š\nUnicodeWarningï¼šä¸Unicodeç›¸å…³çš„è­¦å‘Š\nBytesWarningï¼šä¸å­—èŠ‚æˆ–å­—èŠ‚ç ç›¸å…³çš„è­¦å‘Š\nResourceWarningï¼šä¸èµ„æºä½¿ç”¨ç›¸å…³çš„è­¦å‘Š\n\n3.3 å¼‚å¸¸å¤„ç†è¯­å¥try - excepttry:\n\tæ£€æµ‹èŒƒå›´\nexcept Exception[as reason]:\n\tå‡ºç°å¼‚å¸¸åçš„å¤„ç†ä»£ç \ntry è¯­å¥æŒ‰ç…§å¦‚ä¸‹æ–¹å¼å·¥ä½œï¼š\n\né¦–å…ˆï¼Œæ‰§è¡Œtry å­å¥ï¼ˆåœ¨å…³é”®å­—try å’Œå…³é”®å­—except ä¹‹é—´çš„è¯­å¥ï¼‰\nå¦‚æœæ²¡æœ‰å¼‚å¸¸å‘ç”Ÿï¼Œå¿½ç•¥except å­å¥ï¼Œ try å­å¥æ‰§è¡Œåç»“æŸã€‚\nå¦‚æœåœ¨æ‰§è¡Œtry å­å¥çš„è¿‡ç¨‹ä¸­å‘ç”Ÿäº†å¼‚å¸¸ï¼Œé‚£ä¹ˆtry å­å¥ä½™ä¸‹çš„éƒ¨åˆ†å°†è¢«å¿½ç•¥ã€‚å¦‚æœå¼‚å¸¸çš„ç±»å‹å’Œexcept ä¹‹åçš„åç§°ç›¸ç¬¦ï¼Œé‚£ä¹ˆå¯¹åº”çš„except å­å¥å°†è¢«æ‰§è¡Œã€‚æœ€åæ‰§è¡Œtry è¯­å¥ä¹‹åçš„ä»£ç ã€‚\nå¦‚æœä¸€ä¸ªå¼‚å¸¸æ²¡æœ‰ä¸ä»»ä½•çš„except åŒ¹é…ï¼Œé‚£ä¹ˆè¿™ä¸ªå¼‚å¸¸å°†ä¼šä¼ é€’ç»™ä¸Šå±‚çš„try ä¸­ã€‚\n\ntry:\n    int(\"abc\")\n    s = 1 + '1'\n    f = open('test.txt')\n    print(f.read())\n    f.close()\nexcept OSError as error:\n\tprint('æ‰“å¼€æ–‡ä»¶å‡ºé”™\\nåŸå› æ˜¯ï¼š' + str(error))\nexcept TypeError as error:\n\tprint('ç±»å‹å‡ºé”™\\nåŸå› æ˜¯ï¼š' + str(error))\nexcept ValueError as error:\n\tprint('æ•°å€¼å‡ºé”™\\nåŸå› æ˜¯ï¼š' + str(error))\n# æ•°å€¼å‡ºé”™\n# åŸå› æ˜¯ï¼šinvalid literal for int() with base 10: 'abc'\n\ndict1 = &#123;'a': 1, 'b': 2, 'v': 22&#125;\ntry:\n\tx = dict1['y']\nexcept KeyError:\n\tprint('é”®é”™è¯¯')\nexcept LookupError:\n\tprint('æŸ¥è¯¢é”™è¯¯')\nelse:\n\tprint(x)\n# é”®é”™è¯¯\ntry-except-else è¯­å¥å°è¯•æŸ¥è¯¢ä¸åœ¨dict ä¸­çš„é”®å€¼å¯¹ï¼Œä»è€Œå¼•å‘äº†å¼‚å¸¸ã€‚è¿™ä¸€å¼‚å¸¸å‡†ç¡®åœ°è¯´åº”å±äºKeyError ï¼Œä½†ç”±äºKeyError æ˜¯LookupError çš„å­ç±»ï¼Œä¸”å°†LookupError ç½®äºKeyError ä¹‹å‰ï¼Œå› æ­¤ç¨‹åºä¼˜å…ˆæ‰§è¡Œè¯¥except ä»£ç å—ã€‚æ‰€ä»¥ï¼Œä½¿ç”¨å¤šä¸ªexcept ä»£ç å—æ—¶ï¼Œå¿…é¡»åšæŒå¯¹å…¶è§„èŒƒæ’åºï¼Œè¦ä»æœ€å…·é’ˆå¯¹æ€§çš„å¼‚å¸¸åˆ°æœ€é€šç”¨çš„å¼‚å¸¸ã€‚\ntry:\n    s = 1 + '1'\n    int(\"abc\")\n    f = open('test.txt')\n    print(f.read())\n    f.close()\nexcept (OSError, TypeError, ValueError) as error:\n\tprint('å‡ºé”™äº†ï¼\\nåŸå› æ˜¯ï¼š' + str(error))\n# å‡ºé”™äº†ï¼\n# åŸå› æ˜¯ï¼šunsupported operand type(s) for +: 'int' and 'str'\nä¸€ä¸ª except å­å¥å¯ä»¥åŒæ—¶å¤„ç†å¤šä¸ªå¼‚å¸¸ï¼Œè¿™äº›å¼‚å¸¸å°†è¢«æ”¾åœ¨ä¸€ä¸ªæ‹¬å·é‡Œæˆä¸ºä¸€ä¸ªå…ƒç»„ã€‚\ntry - except - finallytry:\n\tæ£€æµ‹èŒƒå›´\nexcept Exception[as reason]:\n\tå‡ºç°å¼‚å¸¸åçš„å¤„ç†ä»£ç \nfinally:\n\tæ— è®ºå¦‚ä½•éƒ½ä¼šè¢«æ‰§è¡Œçš„ä»£ç \nä¸ç®¡try å­å¥é‡Œé¢æœ‰æ²¡æœ‰å‘ç”Ÿå¼‚å¸¸ï¼Œ finally å­å¥éƒ½ä¼šæ‰§è¡Œã€‚å¦‚æœä¸€ä¸ªå¼‚å¸¸åœ¨try å­å¥é‡Œè¢«æŠ›å‡ºï¼Œè€Œåˆæ²¡æœ‰ä»»ä½•çš„except æŠŠå®ƒæˆªä½ï¼Œé‚£ä¹ˆè¿™ä¸ªå¼‚å¸¸ä¼šåœ¨finally å­å¥æ‰§è¡Œåè¢«æŠ›å‡ºã€‚\ntry - except - elseå¦‚æœåœ¨try å­å¥æ‰§è¡Œæ—¶æ²¡æœ‰å‘ç”Ÿå¼‚å¸¸ï¼ŒPythonå°†æ‰§è¡Œelse è¯­å¥åçš„è¯­å¥ã€‚\ntry:\n\tæ£€æµ‹èŒƒå›´\nexcept(Exception1[, Exception2[,...ExceptionN]]]):\n\tå‘ç”Ÿä»¥ä¸Šå¤šä¸ªå¼‚å¸¸ä¸­çš„ä¸€ä¸ªï¼Œæ‰§è¡Œè¿™å—ä»£ç \nelse:\n\tå¦‚æœæ²¡æœ‰å¼‚å¸¸æ‰§è¡Œè¿™å—ä»£ç \nraiseè¯­å¥Python ä½¿ç”¨raise è¯­å¥æŠ›å‡ºä¸€ä¸ªæŒ‡å®šçš„å¼‚å¸¸ã€‚\ntry:\n\traise NameError('HiThere')\nexcept NameError:\n\tprint('An exception flew by!')\n# An exception flew by!\n4 åˆ—è¡¨ list4.1 åˆ—è¡¨çš„å®šä¹‰åˆ—è¡¨æ˜¯æœ‰åºé›†åˆï¼Œæ²¡æœ‰å›ºå®šå¤§å°ï¼Œèƒ½å¤Ÿä¿å­˜ä»»æ„æ•°é‡ä»»æ„ç±»å‹çš„ Python å¯¹è±¡ï¼Œè¯­æ³•ä¸º [å…ƒç´ 1, å…ƒç´ 2, â€¦, å…ƒç´ n] ã€‚\n\nå…³é”®ç‚¹æ˜¯ã€Œä¸­æ‹¬å· []ã€å’Œã€Œé€—å· ,ã€\nä¸­æ‹¬å· æŠŠæ‰€æœ‰å…ƒç´ ç»‘åœ¨ä¸€èµ·\né€—å· å°†æ¯ä¸ªå…ƒç´ ä¸€ä¸€åˆ†å¼€\n\nåˆ—è¡¨çš„åˆ›å»º\n\nç›´æ¥å®šä¹‰\nåˆ©ç”¨range() åˆ›å»ºåˆ—è¡¨\nåˆ©ç”¨æ¨å¯¼å¼åˆ›å»ºåˆ—è¡¨\n\nx = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday']\n\nx = list(range(10))\n\nx = [i for i in range(100) if (i % 2) != 0 and (i % 3) == 0]\n\nx = [[0 for col in range(3)] for row in range(4)]\nç”±äºlistçš„å…ƒç´ å¯ä»¥æ˜¯ä»»ä½•å¯¹è±¡ï¼Œå› æ­¤åˆ—è¡¨ä¸­æ‰€ä¿å­˜çš„æ˜¯å¯¹è±¡çš„æŒ‡é’ˆã€‚å³ä½¿ä¿å­˜ä¸€ä¸ªç®€å•çš„[1,2,3] ï¼Œä¹Ÿæœ‰3ä¸ªæŒ‡é’ˆå’Œ3ä¸ªæ•´æ•°å¯¹è±¡ã€‚x = [a] * 4 æ“ä½œä¸­ï¼Œåªæ˜¯åˆ›å»º4ä¸ªæŒ‡å‘listçš„å¼•ç”¨ï¼Œæ‰€ä»¥ä¸€æ—¦a æ”¹å˜ï¼Œ x ä¸­4ä¸ªa ä¹Ÿä¼šéšä¹‹æ”¹å˜ã€‚\n4.2 åˆ—è¡¨çš„æ“ä½œæ·»åŠ å…ƒç´ \nlist.append(obj) åœ¨åˆ—è¡¨æœ«å°¾æ·»åŠ æ–°çš„å¯¹è±¡ï¼Œåªæ¥å—ä¸€ä¸ªå‚æ•°ï¼Œå‚æ•°å¯ä»¥æ˜¯ä»»ä½•æ•°æ®ç±»å‹ï¼Œè¢«è¿½åŠ çš„å…ƒç´ åœ¨ listä¸­ä¿æŒç€åŸç»“æ„ç±»å‹ã€‚\nlist.extend(seq) åœ¨åˆ—è¡¨æœ«å°¾ä¸€æ¬¡æ€§è¿½åŠ å¦ä¸€ä¸ªåºåˆ—ä¸­çš„å¤šä¸ªå€¼ï¼ˆç”¨æ–°åˆ—è¡¨æ‰©å±•åŸæ¥çš„åˆ—è¡¨ï¼‰\nlist.insert(index, obj) åœ¨ç¼–å· index ä½ç½®å‰æ’å…¥ obj ã€‚\n\nx = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday']\nx.append('Thursday')\nx.extend(['Thursday', 'Sunday'])\nx.insert(2, 'Sunday')\nåˆ é™¤å…ƒç´ \nlist.remove(obj) ç§»é™¤åˆ—è¡¨ä¸­æŸä¸ªå€¼çš„ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹\nlist.pop([index=-1]) ç§»é™¤åˆ—è¡¨ä¸­çš„ä¸€ä¸ªå…ƒç´ ï¼ˆé»˜è®¤æœ€åä¸€ä¸ªå…ƒç´ ï¼‰ï¼Œå¹¶ä¸”è¿”å›è¯¥å…ƒç´ çš„å€¼\ndel var1[, var2 â€¦â€¦] åˆ é™¤å•ä¸ªæˆ–å¤šä¸ªå¯¹è±¡ã€‚\n\nx = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday']\nx.remove('Monday')\ny = x.pop()\ndel x[0:2]\nè·å–åˆ—è¡¨ä¸­çš„å…ƒç´ \né€šè¿‡å…ƒç´ çš„ç´¢å¼•å€¼ï¼Œä»åˆ—è¡¨è·å–å•ä¸ªå…ƒç´ ï¼Œæ³¨æ„ï¼Œåˆ—è¡¨ç´¢å¼•å€¼æ˜¯ä»0å¼€å§‹çš„ã€‚\né€šè¿‡å°†ç´¢å¼•æŒ‡å®šä¸º-1ï¼Œå¯è®©Pythonè¿”å›æœ€åä¸€ä¸ªåˆ—è¡¨å…ƒç´ ï¼Œç´¢å¼• -2 è¿”å›å€’æ•°ç¬¬äºŒä¸ªåˆ—è¡¨å…ƒç´ ï¼Œä»¥æ­¤ç±»æ¨ã€‚\nåˆ‡ç‰‡çš„é€šç”¨å†™æ³•æ˜¯ start : stop : step\n\nx = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday']\nprint(x[3:]) # ['Thursday', 'Friday']\nprint(x[-3:]) # ['Wednesday', 'Thursday', 'Friday']\nåˆ—è¡¨çš„å¸¸ç”¨æ“ä½œç¬¦\nç­‰å·æ“ä½œç¬¦ï¼š ==\nè¿æ¥æ“ä½œç¬¦ +\né‡å¤æ“ä½œç¬¦ *\næˆå‘˜å…³ç³»æ“ä½œç¬¦ in ã€not in\n\nã€Œç­‰å· ==ã€ï¼Œåªæœ‰æˆå‘˜ã€æˆå‘˜ä½ç½®éƒ½ç›¸åŒæ—¶æ‰è¿”å›Trueã€‚å’Œå…ƒç»„æ‹¼æ¥ä¸€æ ·ï¼Œ åˆ—è¡¨æ‹¼æ¥ä¹Ÿæœ‰ä¸¤ç§æ–¹å¼ï¼Œç”¨ã€ŒåŠ å· +ã€å’Œã€Œä¹˜å· *ã€ï¼Œå‰è€…é¦–å°¾æ‹¼æ¥ï¼Œåè€…å¤åˆ¶æ‹¼æ¥ã€‚\nlist1 = [123, 456]\nlist2 = [456, 123]\nlist3 = [123, 456]\nprint(list1 == list2) # False\nprint(list1 == list3) # True\n\nlist4 = list1 + list2 # extend()\nprint(list4) # [123, 456, 456, 123]\n\nlist5 = list3 * 3\nprint(list5) # [123, 456, 123, 456, 123, 456]\n\nlist3 *= 3\nprint(list3) # [123, 456, 123, 456, 123, 456]\n\nprint(123 in list3) # True\nprint(456 not in list3) # False\nå‰é¢ä¸‰ç§æ–¹æ³•ï¼ˆ append , extend , insert ï¼‰å¯å¯¹åˆ—è¡¨å¢åŠ å…ƒç´ ï¼Œå®ƒä»¬æ²¡æœ‰è¿”å›å€¼ï¼Œæ˜¯ç›´æ¥ä¿®æ”¹äº†åŸæ•°æ®å¯¹è±¡ã€‚å°†ä¸¤ä¸ªlistç›¸åŠ ï¼Œéœ€è¦åˆ›å»ºæ–°çš„ list å¯¹è±¡ï¼Œä»è€Œéœ€è¦æ¶ˆè€—é¢å¤–çš„å†…å­˜ï¼Œç‰¹åˆ«æ˜¯å½“ list è¾ƒå¤§æ—¶ï¼Œå°½é‡ä¸è¦ä½¿ç”¨ â€œ+â€ æ¥æ·»åŠ listã€‚\nåˆ—è¡¨çš„å…¶å®ƒæ–¹æ³•\n\n\n\nlistæ–¹æ³•\n\n\n\n\n\nlist.count(obj)\nç»Ÿè®¡æŸä¸ªå…ƒç´ åœ¨åˆ—è¡¨ä¸­å‡ºç°çš„æ¬¡æ•°\n\n\nlist.index(x[, start[, end]])\nä»åˆ—è¡¨ä¸­æ‰¾å‡ºæŸä¸ªå€¼ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹çš„ç´¢å¼•ä½ç½®\n\n\nlist.reverse()\nåå‘åˆ—è¡¨ä¸­å…ƒç´ \n\n\nlist.sort(key=None, reverse=False)\nå¯¹åŸåˆ—è¡¨è¿›è¡Œæ’åºã€‚\n\n\n\n\n\n\n\n# è·å–åˆ—è¡¨çš„ç¬¬äºŒä¸ªå…ƒç´ \ndef takeSecond(elem):\nreturn elem[1]\nx = [(2, 2), (3, 4), (4, 1), (1, 3)]\nx.sort(key=takeSecond)\nprint(x)\n# [(4, 1), (2, 2), (1, 3), (3, 4)]\nx.sort(key=lambda a: a[0])\nprint(x)\n# [(1, 3), (2, 2), (3, 4), (4, 1)]\n5 å…ƒç»„ã€Œå…ƒç»„ã€å®šä¹‰è¯­æ³•ä¸ºï¼š (å…ƒç´ 1, å…ƒç´ 2, â€¦, å…ƒç´ n)\n\nå°æ‹¬å·æŠŠæ‰€æœ‰å…ƒç´ ç»‘åœ¨ä¸€èµ·\né€—å·å°†æ¯ä¸ªå…ƒç´ ä¸€ä¸€åˆ†å¼€\n\n5.1 åˆ›å»ºå’Œè®¿é—®ä¸€ä¸ªå…ƒç»„\nPython çš„å…ƒç»„ä¸åˆ—è¡¨ç±»ä¼¼ï¼Œä¸åŒä¹‹å¤„åœ¨äºtupleè¢«åˆ›å»ºåå°±ä¸èƒ½å¯¹å…¶è¿›è¡Œä¿®æ”¹ï¼Œç±»ä¼¼å­—ç¬¦ä¸²ã€‚\nå…ƒç»„ä½¿ç”¨å°æ‹¬å·ï¼Œåˆ—è¡¨ä½¿ç”¨æ–¹æ‹¬å·ã€‚\n\nt1 = (1, 10.31, 'python')\nt2 = 1, 10.31, 'python'\nprint(t1, type(t1))\n# (1, 10.31, 'python') &lt;class 'tuple'>\nprint(t2, type(t2))\n# (1, 10.31, 'python') &lt;class 'tuple'>\n\ntuple1 = (1, 2, 3, 4, 5, 6, 7, 8)\nprint(tuple1[1]) # 2\nprint(tuple1[5:]) # (6, 7, 8)\nprint(tuple1[:5]) # (1, 2, 3, 4, 5)\ntuple2 = tuple1[:]\nprint(tuple2) # (1, 2, 3, 4, 5, 6, 7, 8)\n\nåˆ›å»ºå…ƒç»„å¯ä»¥ç”¨å°æ‹¬å· ()ï¼Œä¹Ÿå¯ä»¥ä»€ä¹ˆéƒ½ä¸ç”¨ï¼Œä¸ºäº†å¯è¯»æ€§ï¼Œå»ºè®®è¿˜æ˜¯ç”¨ ()ã€‚\nå…ƒç»„ä¸­åªåŒ…å«ä¸€ä¸ªå…ƒç´ æ—¶ï¼Œéœ€è¦åœ¨å…ƒç´ åé¢æ·»åŠ é€—å·ï¼Œå¦åˆ™æ‹¬å·ä¼šè¢«å½“ä½œè¿ç®—ç¬¦ä½¿ç”¨ï¼š\n\n5.2 æ›´æ–°å’Œåˆ é™¤ä¸€ä¸ªå…ƒç»„å…ƒç»„æœ‰ä¸å¯æ›´æ”¹ (immutable) çš„æ€§è´¨ï¼Œå› æ­¤ä¸èƒ½ç›´æ¥ç»™å…ƒç»„çš„å…ƒç´ èµ‹å€¼ï¼Œä½†æ˜¯åªè¦å…ƒç»„ä¸­çš„å…ƒç´ å¯æ›´æ”¹ (mutable)ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç›´æ¥æ›´æ”¹å…¶å…ƒç´ ï¼Œæ³¨æ„è¿™è·Ÿèµ‹å€¼å…¶å…ƒç´ ä¸åŒã€‚\nweek = ('Monday', 'Tuesday', 'Thursday', 'Friday')\nweek = week[:2] + ('Wednesday',) + week[2:]\nprint(week) # ('Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday')\n\nt1 = (1, 2, 3, [4, 5, 6])\nprint(t1) # (1, 2, 3, [4, 5, 6])\nt1[3][0] = 9\nprint(t1) # (1, 2, 3, [9, 5, 6])\n\n5.3 å…ƒç»„ç›¸å…³çš„æ“ä½œç¬¦\næ¯”è¾ƒæ“ä½œç¬¦\né€»è¾‘æ“ä½œç¬¦\nè¿æ¥æ“ä½œç¬¦ +\né‡å¤æ“ä½œç¬¦ *\næˆå‘˜å…³ç³»æ“ä½œç¬¦ in ã€not in\n\nt1 = (2, 3, 4, 5)\nt2 = ('è€é©¬çš„ç¨‹åºäººç”Ÿ', 'å°é©¬çš„ç¨‹åºäººç”Ÿ')\nt3 = t1 + t2\nprint(t3)\n# (2, 3, 4, 5, 'è€é©¬çš„ç¨‹åºäººç”Ÿ', 'å°é©¬çš„ç¨‹åºäººç”Ÿ')\nt4 = t2 * 2\nprint(t4)\n# ('è€é©¬çš„ç¨‹åºäººç”Ÿ', 'å°é©¬çš„ç¨‹åºäººç”Ÿ', 'è€é©¬çš„ç¨‹åºäººç”Ÿ', 'å°é©¬çš„ç¨‹åºäººç”Ÿ')\n5.4 å†…ç½®æ–¹æ³•\n.count() æ˜¯è®°å½•åœ¨å…ƒç»„  ä¸­è¯¥å…ƒç´ å‡ºç°å‡ æ¬¡\n.index() æ˜¯æ‰¾åˆ°è¯¥å…ƒç´ åœ¨å…ƒç»„çš„ç´¢å¼•\n\nt = (1, 10.31, 'python')\nprint(t.count('python')) # 1\nprint(t.index(10.31)) # 1\n5.5 è§£å‹å…ƒç»„t = (1, 10.31, 'python')\n(a, b, c) = t\nprint(a, b, c)\n# 1 10.31 python\n\nt = (1, 10.31, ('OK', 'python'))\n(a, b, (c, d)) = t\nprint(a, b, c, d)\n# 1 10.31 OK python\n\n# å¦‚æœä½ åªæƒ³è¦å…ƒç»„å…¶ä¸­å‡ ä¸ªå…ƒç´ ï¼Œç”¨é€šé…ç¬¦ã€Œ*ã€ï¼Œè‹±æ–‡å« wildcardï¼Œåœ¨è®¡ç®—æœºè¯­è¨€ä¸­ä»£è¡¨ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ ã€‚ä¸‹ä¾‹å°±æ˜¯æŠŠå¤šä¸ªå…ƒç´ ä¸¢ç»™äº† rest å˜é‡ã€‚\nt = 1, 2, 3, 4, 5\na, b, *rest, c = t\nprint(a, b, c) # 1 2 5\nprint(rest) # [3, 4]\n\n# å¦‚æœä½ æ ¹æœ¬ä¸åœ¨ä¹ rest å˜é‡ï¼Œé‚£ä¹ˆå°±ç”¨é€šé…ç¬¦ã€Œ*ã€åŠ ä¸Šä¸‹åˆ’çº¿ã€Œ_ã€ã€‚\na, b, *_ = t\nprint(a, b) # 1 2\n6 å­—ç¬¦ä¸²6.1 å­—ç¬¦ä¸²çš„å®šä¹‰\nPython ä¸­å­—ç¬¦ä¸²è¢«å®šä¹‰ä¸ºå¼•å·ä¹‹é—´çš„å­—ç¬¦é›†åˆã€‚\nPython æ”¯æŒä½¿ç”¨æˆå¯¹çš„ å•å¼•å· æˆ– åŒå¼•å·\n\nt1 = 'i love Python!'\nprint(t1, type(t1))\n# i love Python! &lt;class 'str'>\nt2 = \"I love Python!\"\nprint(t2, type(t2))\n# I love Python! &lt;class 'str'>\nprint(5 + 8) # 13\nprint('5' + '8') # 58\nPython çš„å¸¸ç”¨è½¬ä¹‰å­—ç¬¦\n\n\n\n\nè½¬ç§»å­—ç¬¦\næè¿°\n\n\n\n\n\\\\\\\\\nåæ–œæ \n\n\n\\\\â€™\nå•å¼•å·\n\n\n\\\\â€\nåŒå¼•å·\n\n\n\\\\n\næ¢è¡Œ\n\n\n\\\\t\nTAB\n\n\n\\\\r\nå›è½¦\n\n\n\n\nåŸå§‹å­—ç¬¦ä¸²åªéœ€è¦åœ¨å­—ç¬¦ä¸²å‰è¾¹åŠ ä¸€ä¸ªè‹±æ–‡å­—æ¯ r å³å¯ã€‚\n6.2 å­—ç¬¦ä¸²çš„åˆ‡ç‰‡ä¸æ‹¼æ¥\nç±»ä¼¼äºå…ƒç»„å…·æœ‰ä¸å¯ä¿®æ”¹æ€§\nä» 0 å¼€å§‹ (å’Œ C ä¸€æ ·)\nåˆ‡ç‰‡é€šå¸¸å†™æˆ start:end è¿™ç§å½¢å¼ï¼ŒåŒ…æ‹¬ã€Œstart ç´¢å¼•ã€å¯¹åº”çš„å…ƒç´ ï¼Œä¸åŒ…æ‹¬ã€Œend ç´¢å¼•ã€å¯¹åº”çš„å…ƒç´ ã€‚\nç´¢å¼•å€¼å¯æ­£å¯è´Ÿï¼Œæ­£ç´¢å¼•ä» 0 å¼€å§‹ï¼Œä»å·¦å¾€å³ï¼›è´Ÿç´¢å¼•ä» -1 å¼€å§‹ï¼Œä»å³å¾€å·¦ã€‚ä½¿ç”¨è´Ÿæ•°ç´¢å¼•æ—¶ï¼Œä¼šä»æœ€åä¸€ä¸ªå…ƒç´ å¼€å§‹è®¡æ•°ã€‚æœ€åä¸€ä¸ªå…ƒç´ çš„ä½ç½®ç¼–å·æ˜¯ -1ã€‚\n\nstr1 = 'I Love LsgoGroup'\nprint(str1[:6]) # I Love\nprint(str1[5]) # e\nprint(str1[:6] + \" æ’å…¥çš„å­—ç¬¦ä¸² \" + str1[6:])\n# I Love æ’å…¥çš„å­—ç¬¦ä¸² LsgoGroup\ns = 'Python'\nprint(s) # Python\nprint(s[2:4]) # th\nprint(s[-5:-2]) # yth\nprint(s[2]) # t\nprint(s[-1]) # n\n6.3 å­—ç¬¦ä¸²çš„å¸¸ç”¨å†…ç½®æ–¹æ³•\ncapitalize() å°†å­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªå­—ç¬¦è½¬æ¢ä¸ºå¤§å†™ã€‚\n\nstr2 = 'xiaoxie'\nprint(str2.capitalize()) # Xiaoxie\n\nlower() è½¬æ¢å­—ç¬¦ä¸²ä¸­æ‰€æœ‰å¤§å†™å­—ç¬¦ä¸ºå°å†™ã€‚\nupper() è½¬æ¢å­—ç¬¦ä¸²ä¸­çš„å°å†™å­—æ¯ä¸ºå¤§å†™ã€‚\nswapcase() å°†å­—ç¬¦ä¸²ä¸­å¤§å†™è½¬æ¢ä¸ºå°å†™ï¼Œå°å†™è½¬æ¢ä¸ºå¤§å†™ã€‚\n\nstr2 = \"DAXIExiaoxie\"\nprint(str2.lower()) # daxiexiaoxie\nprint(str2.upper()) # DAXIEXIAOXIE\nprint(str2.swapcase()) # daxieXIAOXIE\n\ncount(str, beg= 0,end=len(string)) è¿”å›str åœ¨ string é‡Œé¢å‡ºç°çš„æ¬¡æ•°ï¼Œå¦‚æœbeg æˆ–è€…end æŒ‡å®šåˆ™è¿”å›æŒ‡å®šèŒƒå›´å†…str å‡ºç°çš„æ¬¡æ•°ã€‚\n\nstr2 = \"DAXIExiaoxie\"\nprint(str2.count('xi')) # 2\n\nendswith(suffix, beg=0, end=len(string)) æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŒ‡å®šå­å­—ç¬¦ä¸² suffix ç»“æŸï¼Œå¦‚æœæ˜¯ï¼Œè¿”å›True,å¦åˆ™è¿”å› Falseã€‚å¦‚æœ beg å’Œ end æŒ‡å®šå€¼ï¼Œåˆ™åœ¨æŒ‡å®šèŒƒå›´å†…æ£€æŸ¥ã€‚\nstartswith(substr, beg=0,end=len(string)) æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŒ‡å®šå­å­—ç¬¦ä¸² substr å¼€å¤´ï¼Œå¦‚æœæ˜¯ï¼Œè¿”å›Trueï¼Œå¦åˆ™è¿”å› Falseã€‚å¦‚æœ beg å’Œ end æŒ‡å®šå€¼ï¼Œåˆ™åœ¨æŒ‡å®šèŒƒå›´å†…æ£€æŸ¥ã€‚\n\nstr2 = \"DAXIExiaoxie\"\nprint(str2.endswith('ie')) # True\nprint(str2.endswith('xi')) # False\nprint(str2.startswith('Da')) # False\nprint(str2.startswith('DA')) # True\n\nfind(str, beg=0, end=len(string)) æ£€æµ‹ str æ˜¯å¦åŒ…å«åœ¨å­—ç¬¦ä¸²ä¸­ï¼Œå¦‚æœæŒ‡å®šèŒƒå›´ beg å’Œ end ï¼Œåˆ™æ£€æŸ¥æ˜¯å¦åŒ…å«åœ¨æŒ‡å®šèŒƒå›´å†…ï¼Œå¦‚æœåŒ…å«ï¼Œè¿”å›å¼€å§‹çš„ç´¢å¼•å€¼ï¼Œå¦åˆ™è¿”å› -1ã€‚\nrfind(str, beg=0,end=len(string)) ç±»ä¼¼äº find() å‡½æ•°ï¼Œä¸è¿‡æ˜¯ä»å³è¾¹å¼€å§‹æŸ¥æ‰¾ã€‚\n\nstr2 = \"DAXIExiaoxie\"\nprint(str2.find('xi')) # 5\nprint(str2.find('ix')) # -1\nprint(str2.rfind('xi')) # 9\n\nisnumeric() å¦‚æœå­—ç¬¦ä¸²ä¸­åªåŒ…å«æ•°å­—å­—ç¬¦ï¼Œåˆ™è¿”å› Trueï¼Œå¦åˆ™è¿”å› Falseã€‚\n\nstr3 = '12345'\nprint(str3.isnumeric()) # True\nstr3 += 'a'\nprint(str3.isnumeric()) # False\n\nljust(width[, fillchar]) è¿”å›ä¸€ä¸ªåŸå­—ç¬¦ä¸²å·¦å¯¹é½ï¼Œå¹¶ä½¿ç”¨fillchar ï¼ˆé»˜è®¤ç©ºæ ¼ï¼‰å¡«å……è‡³é•¿åº¦width çš„æ–°å­—ç¬¦ä¸²ã€‚\nrjust(width[, fillchar]) è¿”å›ä¸€ä¸ªåŸå­—ç¬¦ä¸²å³å¯¹é½ï¼Œå¹¶ä½¿ç”¨fillchar ï¼ˆé»˜è®¤ç©ºæ ¼ï¼‰å¡«å……è‡³é•¿åº¦width çš„æ–°å­—ç¬¦ä¸²ã€‚\n\nstr4 = '1101'\nprint(str4.ljust(8, '0')) # 11010000\nprint(str4.rjust(8, '0')) # 00001101\n\nlstrip([chars]) æˆªæ‰å­—ç¬¦ä¸²å·¦è¾¹çš„ç©ºæ ¼æˆ–æŒ‡å®šå­—ç¬¦ã€‚\nrstrip([chars]) åˆ é™¤å­—ç¬¦ä¸²æœ«å°¾çš„ç©ºæ ¼æˆ–æŒ‡å®šå­—ç¬¦ã€‚\nstrip([chars]) åœ¨å­—ç¬¦ä¸²ä¸Šæ‰§è¡Œlstrip() å’Œrstrip() ã€‚\n\nstr5 = ' I Love LsgoGroup '\nprint(str5.lstrip()) # 'I Love LsgoGroup '\nprint(str5.lstrip().strip('I')) # ' Love LsgoGroup '\nprint(str5.rstrip()) # ' I Love LsgoGroup'\nprint(str5.strip()) # 'I Love LsgoGroup'\nprint(str5.strip().strip('p')) # 'I Love LsgoGrou'\n\npartition(sub) æ‰¾åˆ°å­å­—ç¬¦ä¸²subï¼ŒæŠŠå­—ç¬¦ä¸²åˆ†ä¸ºä¸€ä¸ªä¸‰å…ƒç»„(pre_sub,sub,fol_sub) ï¼Œå¦‚æœå­—ç¬¦ä¸²ä¸­ä¸åŒ…å«subåˆ™è¿”å›(â€˜åŸå­—ç¬¦ä¸²â€™,â€™â€™,â€™â€™) ã€‚\nrpartition(sub) ç±»ä¼¼äºpartition() æ–¹æ³•ï¼Œä¸è¿‡æ˜¯ä»å³è¾¹å¼€å§‹æŸ¥æ‰¾ã€‚\n\nstr5 = ' I Love LsgoGroup '\nprint(str5.strip().partition('o')) # ('I L', 'o', 've LsgoGroup')\nprint(str5.strip().partition('m')) # ('I Love LsgoGroup', '', '')\nprint(str5.strip().rpartition('o')) # ('I Love LsgoGr', 'o', 'up')\n\nreplace(old, new [, max]) æŠŠ å°†å­—ç¬¦ä¸²ä¸­çš„old æ›¿æ¢æˆnew ï¼Œå¦‚æœmax æŒ‡å®šï¼Œåˆ™æ›¿æ¢ä¸è¶…è¿‡max æ¬¡ã€‚\n\nstr5 = ' I Love LsgoGroup '\nprint(str5.strip().replace('I', 'We')) # We Love LsgoGroup\n\nsplit(str=â€â€, num) ä¸å¸¦å‚æ•°é»˜è®¤æ˜¯ä»¥ç©ºæ ¼ä¸ºåˆ†éš”ç¬¦åˆ‡ç‰‡å­—ç¬¦ä¸²ï¼Œå¦‚æœnum å‚æ•°æœ‰è®¾ç½®ï¼Œåˆ™ä»…åˆ†éš”num ä¸ªå­å­—ç¬¦ä¸²ï¼Œè¿”å›åˆ‡ç‰‡åçš„å­å­—ç¬¦ä¸²æ‹¼æ¥çš„åˆ—è¡¨ã€‚\n\nstr5 = ' I Love LsgoGroup '\nprint(str5.strip().split()) # ['I', 'Love', 'LsgoGroup']\nprint(str5.strip().split('o')) # ['I L', 've Lsg', 'Gr', 'up']\n\nu = \"www.baidu.com.cn\"\n# åˆ†å‰²ä¸¤æ¬¡\nprint(u.split(\".\", 2)) # ['www', 'baidu', 'com.cn']\n\nsplitlines([keepends]) æŒ‰ç…§è¡Œ(â€˜\\râ€™, â€˜\\r\\nâ€™, \\nâ€™)åˆ†éš”ï¼Œè¿”å›ä¸€ä¸ªåŒ…å«å„è¡Œä½œä¸ºå…ƒç´ çš„åˆ—è¡¨ï¼Œå¦‚æœå‚æ•°keepends ä¸ºFalseï¼Œä¸åŒ…å«æ¢è¡Œç¬¦ï¼Œå¦‚æœä¸º Trueï¼Œåˆ™ä¿ç•™æ¢è¡Œç¬¦ã€‚\n\nstr6 = 'I \\n Love \\n LsgoGroup'\nprint(str6.splitlines()) # ['I ', ' Love ', ' LsgoGroup']\nprint(str6.splitlines(True)) # ['I \\n', ' Love \\n', ' LsgoGroup']\n\nmaketrans(intab, outtab) åˆ›å»ºå­—ç¬¦æ˜ å°„çš„è½¬æ¢è¡¨ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºéœ€è¦è½¬æ¢çš„å­—ç¬¦ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¹Ÿæ˜¯å­—ç¬¦ä¸²è¡¨ç¤ºè½¬æ¢çš„ç›®æ ‡ã€‚\ntranslate(table, deletechars=â€â€) æ ¹æ®å‚æ•°table ç»™å‡ºçš„è¡¨ï¼Œè½¬æ¢å­—ç¬¦ä¸²çš„å­—ç¬¦ï¼Œè¦è¿‡æ»¤æ‰çš„å­—ç¬¦æ”¾åˆ°deletechars å‚æ•°ä¸­ã€‚\n\nstr = 'this is string example....wow!!!'\nintab = 'aeiou'\nouttab = '12345'\ntrantab = str.maketrans(intab, outtab)\nprint(trantab) # &#123;97: 49, 111: 52, 117: 53, 101: 50, 105: 51&#125;\nprint(str.translate(trantab)) # th3s 3s str3ng 2x1mpl2....w4w!!!\n6.4 å­—ç¬¦ä¸²æ ¼å¼åŒ–format æ ¼å¼åŒ–å‡½æ•°\nstr = \"&#123;0&#125; Love &#123;1&#125;\".format('I', 'Lsgogroup') # ä½ç½®å‚æ•°\nprint(str) # I Love Lsgogroup\nstr = \"&#123;a&#125; Love &#123;b&#125;\".format(a='I', b='Lsgogroup') # å…³é”®å­—å‚æ•°\nprint(str) # I Love Lsgogroup\nstr = \"&#123;0&#125; Love &#123;b&#125;\".format('I', b='Lsgogroup') # ä½ç½®å‚æ•°è¦åœ¨å…³é”®å­—å‚æ•°ä¹‹å‰\nprint(str) # I Love Lsgogroup\nstr = '&#123;0:.2f&#125;&#123;1&#125;'.format(27.658, 'GB') # ä¿ç•™å°æ•°ç‚¹åä¸¤ä½\nprint(str) # 27.66GB\nPython å­—ç¬¦ä¸²æ ¼å¼åŒ–ç¬¦å·\n\n\n\n\nç¬¦å·\n\n\n\n\n\n%c\næ ¼å¼åŒ–å­—ç¬¦åŠå…¶ASCIIç \n\n\n%s\næ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼Œç”¨str()æ–¹æ³•å¤„ç†å¯¹è±¡\n\n\n%r\næ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼Œç”¨rper()æ–¹æ³•å¤„ç†å¯¹è±¡\n\n\n%d\næ ¼å¼åŒ–æ•´æ•°\n\n\n%o\næ ¼å¼åŒ–æ— ç¬¦å·å…«è¿›åˆ¶æ•°\n\n\n%x\næ ¼å¼åŒ–æ— ç¬¦å·åå…­è¿›åˆ¶æ•°\n\n\n%X\næ ¼å¼åŒ–æ— ç¬¦å·åå…­è¿›åˆ¶æ•°ï¼ˆå¤§å†™ï¼‰\n\n\n%f\næ ¼å¼åŒ–æµ®ç‚¹æ•°å­—ï¼Œå¯æŒ‡å®šå°æ•°ç‚¹åçš„ç²¾åº¦\n\n\n%e\nç”¨ç§‘å­¦è®¡æ•°æ³•æ ¼å¼åŒ–æµ®ç‚¹æ•°\n\n\n%E\nä½œç”¨åŒ%eï¼Œç”¨ç§‘å­¦è®¡æ•°æ³•æ ¼å¼åŒ–æµ®ç‚¹æ•°\n\n\n%g\næ ¹æ®å€¼çš„å¤§å°å†³å®šä½¿ç”¨%fæˆ–%e\n\n\n%G\nä½œç”¨åŒ%gï¼Œæ ¹æ®å€¼çš„å¤§å°å†³å®šä½¿ç”¨%fæˆ–%E\n\n\n\n\nprint('%c' % 97) # a\nprint('%c %c %c' % (97, 98, 99)) # a b c\nprint('%d + %d = %d' % (4, 5, 9)) # 4 + 5 = 9\nprint(\"æˆ‘å« %s ä»Šå¹´ %d å²!\" % ('å°æ˜', 10)) # æˆ‘å« å°æ˜ ä»Šå¹´ 10 å²!\nprint('%o' % 10) # 12\nprint('%x' % 10) # a\nprint('%X' % 10) # A\nprint('%f' % 27.658) # 27.658000\nprint('%e' % 27.658) # 2.765800e+01\nprint('%E' % 27.658) # 2.765800E+01\nprint('%g' % 27.658) # 27.658\ntext = \"I am %d years old.\" % 22\nprint(\"I said: %s.\" % text) # I said: I am 22 years old..\nprint(\"I said: %r.\" % text) # I said: 'I am 22 years old.'\næ ¼å¼åŒ–æ“ä½œç¬¦è¾…åŠ©æŒ‡ä»¤\n\n\n\n\nç¬¦å·\nåŠŸèƒ½\n\n\n\n\nm.n\nm æ˜¯æ˜¾ç¤ºçš„æœ€å°æ€»å®½åº¦,n æ˜¯å°æ•°ç‚¹åçš„ä½æ•°(å¦‚æœå¯ç”¨çš„è¯)\n\n\n-\nç”¨åšå·¦å¯¹é½\n\n\n+\nåœ¨æ­£æ•°å‰é¢æ˜¾ç¤ºåŠ å·( + )\n\n\n#\nåœ¨å…«è¿›åˆ¶æ•°å‰é¢æ˜¾ç¤ºé›¶(â€˜0â€™)ï¼Œåœ¨åå…­è¿›åˆ¶å‰é¢æ˜¾ç¤ºâ€™0xâ€™æˆ–è€…â€™0Xâ€™(å–å†³äºç”¨çš„æ˜¯â€™xâ€™è¿˜æ˜¯â€™Xâ€™)\n\n\n0\næ˜¾ç¤ºçš„æ•°å­—å‰é¢å¡«å……â€™0â€™è€Œä¸æ˜¯é»˜è®¤çš„ç©ºæ ¼\n\n\n\n\nprint('%5.1f' % 27.658) # ' 27.7'\nprint('%.2e' % 27.658) # 2.77e+01\nprint('%10d' % 10) # ' 10'\nprint('%-10d' % 10) # '10 '\nprint('%+d' % 10) # +10\nprint('%#o' % 10) # 0o12\nprint('%#x' % 108) # 0x6c\nprint('%010d' % 5) # 0000000005\n7 å­—å…¸7.1 å¯å˜ç±»å‹ä¸ä¸å¯å˜ç±»å‹\nåºåˆ—æ˜¯ä»¥è¿ç»­çš„æ•´æ•°ä¸ºç´¢å¼•ï¼Œä¸æ­¤ä¸åŒçš„æ˜¯ï¼Œå­—å…¸ä»¥â€å…³é”®å­—â€ä¸ºç´¢å¼•ï¼Œå…³é”®å­—å¯ä»¥æ˜¯ä»»æ„==ä¸å¯å˜ç±»å‹==ï¼Œé€šå¸¸ç”¨å­—ç¬¦ä¸²æˆ–æ•°å€¼ã€‚\nå­—å…¸æ˜¯ Python å”¯ä¸€çš„ä¸€ä¸ª æ˜ å°„ç±»å‹ï¼Œå­—ç¬¦ä¸²ã€å…ƒç»„ã€åˆ—è¡¨å±äºåºåˆ—ç±»å‹ã€‚\n\né‚£ä¹ˆå¦‚ä½•å¿«é€Ÿåˆ¤æ–­ä¸€ä¸ªæ•°æ®ç±»å‹ X æ˜¯ä¸æ˜¯å¯å˜ç±»å‹çš„å‘¢ï¼Ÿä¸¤ç§æ–¹æ³•ï¼š\n\néº»çƒ¦æ–¹æ³•ï¼šç”¨ id(X) å‡½æ•°ï¼Œå¯¹ X è¿›è¡ŒæŸç§æ“ä½œï¼Œæ¯”è¾ƒæ“ä½œå‰åçš„ id ï¼Œå¦‚æœä¸ä¸€æ ·ï¼Œåˆ™ X ä¸å¯å˜ï¼Œå¦‚æœä¸€æ ·ï¼Œåˆ™X å¯å˜ã€‚\nä¾¿æ·æ–¹æ³•ï¼šç”¨ hash(X) ï¼Œåªè¦ä¸æŠ¥é”™ï¼Œè¯æ˜ X å¯è¢«å“ˆå¸Œï¼Œå³ä¸å¯å˜ï¼Œåè¿‡æ¥ä¸å¯è¢«å“ˆå¸Œï¼Œå³å¯å˜ã€‚\n\ni &#x3D; 1\nprint(id(i)) # 140732167000896\ni &#x3D; i + 2\nprint(id(i)) # 140732167000960\nl &#x3D; [1, 2]\nprint(id(l)) # 4300825160\nl.append(&#39;Python&#39;)\nprint(id(l)) # 4300825160\n\næ•´æ•° i åœ¨åŠ  1 ä¹‹åçš„ id å’Œä¹‹å‰ä¸ä¸€æ ·ï¼Œå› æ­¤åŠ å®Œä¹‹åçš„è¿™ä¸ª i (è™½ç„¶åå­—æ²¡å˜)ï¼Œä½†ä¸æ˜¯åŠ ä¹‹å‰çš„é‚£ä¸ª i äº†ï¼Œå› æ­¤æ•´æ•°æ˜¯ä¸å¯å˜ç±»å‹ã€‚\nåˆ—è¡¨ l åœ¨é™„åŠ  â€˜Pythonâ€™ ä¹‹åçš„ id å’Œä¹‹å‰ä¸€æ ·ï¼Œå› æ­¤åˆ—è¡¨æ˜¯å¯å˜ç±»å‹ã€‚\n\nprint(hash('Name')) # -9215951442099718823\nprint(hash((1, 2, 'Python'))) # 823362308207799471\nprint(hash([1, 2, 'Python']))\n# TypeError: unhashable type: 'list'\nprint(hash(&#123;1, 2, 3&#125;))\n# TypeError: unhashable type: 'set'\n\næ•°å€¼ã€å­—ç¬¦å’Œå…ƒç»„ éƒ½èƒ½è¢«å“ˆå¸Œï¼Œå› æ­¤å®ƒä»¬æ˜¯ä¸å¯å˜ç±»å‹ã€‚\nåˆ—è¡¨ã€é›†åˆã€å­—å…¸ä¸èƒ½è¢«å“ˆå¸Œï¼Œå› æ­¤å®ƒæ˜¯å¯å˜ç±»å‹ã€‚\n\n7.2 å­—å…¸çš„å®šä¹‰å­—å…¸ æ˜¯æ— åºçš„ é”®:å€¼ï¼ˆ key:value ï¼‰å¯¹é›†åˆï¼Œé”®å¿…é¡»æ˜¯äº’ä¸ç›¸åŒçš„ï¼ˆåœ¨åŒä¸€ä¸ªå­—å…¸ä¹‹å†…ï¼‰ã€‚\n\ndict å†…éƒ¨å­˜æ”¾çš„é¡ºåºå’Œ key æ”¾å…¥çš„é¡ºåºæ˜¯æ²¡æœ‰å…³ç³»çš„ã€‚\ndict æŸ¥æ‰¾å’Œæ’å…¥çš„é€Ÿåº¦æå¿«ï¼Œä¸ä¼šéšç€ key çš„å¢åŠ è€Œå¢åŠ ï¼Œä½†æ˜¯éœ€è¦å ç”¨å¤§é‡çš„å†…å­˜ã€‚\n\nå­—å…¸ å®šä¹‰è¯­æ³•ä¸º {å…ƒç´ 1, å…ƒç´ 2, â€¦, å…ƒç´ n}\n\nå…¶ä¸­æ¯ä¸€ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªã€Œé”®å€¼å¯¹ã€â€” é”®:å€¼ ( key:value )\nå…³é”®ç‚¹æ˜¯ã€Œå¤§æ‹¬å· {}ã€,ã€Œé€—å· ,ã€å’Œã€Œå†’å· :ã€\nå¤§æ‹¬å· â€” æŠŠæ‰€æœ‰å…ƒç´ ç»‘åœ¨ä¸€èµ·\né€—å· â€” å°†æ¯ä¸ªé”®å€¼å¯¹åˆ†å¼€\nå†’å· â€” å°†é”®å’Œå€¼åˆ†å¼€\n\n7.3 åˆ›å»ºå’Œè®¿é—®å­—å…¸é€šè¿‡å­—ç¬¦ä¸²æˆ–æ•°å€¼ä½œä¸ºkey æ¥åˆ›å»ºå­—å…¸ã€‚\ndic = &#123;'æå®': 'ä¸€åˆ‡çš†æœ‰å¯èƒ½', 'è€å…‹': 'Just do it', 'é˜¿è¿ªè¾¾æ–¯': 'Impossible is nothing'&#125;\nprint('è€å…‹çš„å£å·æ˜¯:', dic['è€å…‹'])\n# è€å…‹çš„å£å·æ˜¯: Just do it\næ³¨æ„ï¼šå¦‚æœæˆ‘ä»¬å–çš„é”®åœ¨å­—å…¸ä¸­ä¸å­˜åœ¨ï¼Œä¼šç›´æ¥æŠ¥é”™KeyError ã€‚\né€šè¿‡å…ƒç»„ä½œä¸ºkey æ¥åˆ›å»ºå­—å…¸ï¼Œä½†ä¸€èˆ¬ä¸è¿™æ ·ä½¿ç”¨ã€‚\ndic = &#123;(1, 2, 3): \"Tom\", \"Age\": 12, 3: [3, 5, 7]&#125;\nprint(dic) # &#123;(1, 2, 3): 'Tom', 'Age': 12, 3: [3, 5, 7]&#125;\nprint(type(dic)) # &lt;class 'dict'>\né€šè¿‡æ„é€ å‡½æ•°dict æ¥åˆ›å»ºå­—å…¸ã€‚\ndict() -&gt; åˆ›å»ºä¸€ä¸ªç©ºçš„å­—å…¸ã€‚\ndic = dict()\ndic['a'] = 1\ndic['b'] = 2\ndic['c'] = 3\nprint(dic)\n# &#123;'a': 1, 'b': 2, 'c': 3&#125;\n7.4 å­—å…¸çš„å†…ç½®æ–¹æ³•dict.fromkeys(seq[, value]) ç”¨äºåˆ›å»ºä¸€ä¸ªæ–°å­—å…¸ï¼Œä»¥åºåˆ— seq ä¸­å…ƒç´ åšå­—å…¸çš„é”®ï¼Œ value ä¸ºå­—å…¸æ‰€æœ‰é”®å¯¹åº”çš„åˆå§‹å€¼ã€‚\nseq = ('name', 'age', 'sex')\ndic1 = dict.fromkeys(seq)\nprint(\"æ–°çš„å­—å…¸ä¸º : %s\" % str(dic1))\n# æ–°çš„å­—å…¸ä¸º : &#123;'name': None, 'age': None, 'sex': None&#125;\ndic2 = dict.fromkeys(seq, 10)\nprint(\"æ–°çš„å­—å…¸ä¸º : %s\" % str(dic2))\n# æ–°çš„å­—å…¸ä¸º : &#123;'name': 10, 'age': 10, 'sex': 10&#125;\ndic3 = dict.fromkeys(seq, ('å°é©¬', '8', 'ç”·'))\nprint(\"æ–°çš„å­—å…¸ä¸º : %s\" % str(dic3))\n# æ–°çš„å­—å…¸ä¸º : &#123;'name': ('å°é©¬', '8', 'ç”·'), 'age': ('å°é©¬', '8', 'ç”·'), 'sex': ('å°é©¬', '8', 'ç”·')&#125;\ndict.keys() è¿”å›ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨ list() æ¥è½¬æ¢ä¸ºåˆ—è¡¨ï¼Œåˆ—è¡¨ä¸ºå­—å…¸ä¸­çš„æ‰€æœ‰é”®ã€‚\ndic = &#123;'Name': 'lsgogroup', 'Age': 7&#125;\nprint(dic.keys()) # dict_keys(['Name', 'Age'])\nlst = list(dic.keys()) # è½¬æ¢ä¸ºåˆ—è¡¨\nprint(lst) # ['Name', 'Age']\ndict.values() è¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼Œå¯ä»¥ä½¿ç”¨ list() æ¥è½¬æ¢ä¸ºåˆ—è¡¨ï¼Œåˆ—è¡¨ä¸ºå­—å…¸ä¸­çš„æ‰€æœ‰å€¼ã€‚\ndic = &#123;'Sex': 'female', 'Age': 7, 'Name': 'Zara'&#125;\nprint(\"å­—å…¸æ‰€æœ‰å€¼ä¸º : \", list(dic.values()))\n# å­—å…¸æ‰€æœ‰å€¼ä¸º : [7, 'female', 'Zara']\ndict.items() ä»¥åˆ—è¡¨è¿”å›å¯éå†çš„ (é”®, å€¼) å…ƒç»„æ•°ç»„ã€‚\ndic = &#123;'Name': 'Lsgogroup', 'Age': 7&#125;\nprint(\"Value : %s\" % dic.items())\n# Value : dict_items([('Name', 'Lsgogroup'), ('Age', 7)])\nprint(tuple(dic.items()))\n# (('Name', 'Lsgogroup'), ('Age', 7))\ndict.get(key, default=None) è¿”å›æŒ‡å®šé”®çš„å€¼ï¼Œå¦‚æœå€¼ä¸åœ¨å­—å…¸ä¸­è¿”å›é»˜è®¤å€¼ã€‚\ndic = &#123;'Name': 'Lsgogroup', 'Age': 27&#125;\nprint(\"Age å€¼ä¸º : %s\" % dic.get('Age')) # Age å€¼ä¸º : 27\nprint(\"Sex å€¼ä¸º : %s\" % dic.get('Sex', \"NA\")) # Sex å€¼ä¸º : NA\ndict.setdefault(key, default=None) å’Œget() æ–¹æ³• ç±»ä¼¼, å¦‚æœé”®ä¸å­˜åœ¨äºå­—å…¸ä¸­ï¼Œå°†ä¼šæ·»åŠ é”®å¹¶å°†å€¼è®¾ä¸ºé»˜è®¤å€¼ã€‚\ndic = &#123;'Name': 'Lsgogroup', 'Age': 7&#125;\nprint(\"Age é”®çš„å€¼ä¸º : %s\" % dic.setdefault('Age', None)) # Age é”®çš„å€¼ä¸º : 7\nprint(\"Sex é”®çš„å€¼ä¸º : %s\" % dic.setdefault('Sex', None)) # Sex é”®çš„å€¼ä¸º : None\nprint(\"æ–°å­—å…¸ä¸ºï¼š\", dic)\n# æ–°å­—å…¸ä¸ºï¼š &#123;'Age': 7, 'Name': 'Lsgogroup', 'Sex': None&#125;\nkey in dict  inæ“ä½œç¬¦ç”¨äºåˆ¤æ–­é”®æ˜¯å¦å­˜åœ¨äºå­—å…¸ä¸­ï¼Œå¦‚æœé”®åœ¨å­—å…¸ dict é‡Œè¿”å›true ï¼Œå¦åˆ™è¿”å›false ã€‚è€Œnot in æ“ä½œç¬¦åˆšå¥½ç›¸åï¼Œå¦‚æœé”®åœ¨å­—å…¸ dict é‡Œè¿”å›false ï¼Œå¦åˆ™è¿”å›true ã€‚\ndic = &#123;'Name': 'Lsgogroup', 'Age': 7&#125;\n# in æ£€æµ‹é”® Age æ˜¯å¦å­˜åœ¨\nif 'Age' in dic:\n\tprint(\"é”® Age å­˜åœ¨\")\nelse:\n\tprint(\"é”® Age ä¸å­˜åœ¨\")\n# æ£€æµ‹é”® Sex æ˜¯å¦å­˜åœ¨ \nif 'Sex' in dic:\n\tprint(\"é”® Sex å­˜åœ¨\")\nelse:\n\tprint(\"é”® Sex ä¸å­˜åœ¨\")\n# not in æ£€æµ‹é”® Age æ˜¯å¦å­˜åœ¨\nif 'Age' not in dic:\n\tprint(\"é”® Age ä¸å­˜åœ¨\")\nelse:\n\tprint(\"é”® Age å­˜åœ¨\")\n# é”® Age å­˜åœ¨\n# é”® Sex ä¸å­˜åœ¨\n# é”® Age å­˜åœ¨\ndict.pop(key[,default]) åˆ é™¤å­—å…¸ç»™å®šé”® key æ‰€å¯¹åº”çš„å€¼ï¼Œè¿”å›å€¼ä¸ºè¢«åˆ é™¤çš„å€¼ã€‚key å€¼å¿…é¡»ç»™å‡ºã€‚è‹¥keyä¸å­˜åœ¨ï¼Œåˆ™è¿”å› default å€¼ã€‚\ndel dict[key] åˆ é™¤å­—å…¸ç»™å®šé”® key æ‰€å¯¹åº”çš„å€¼ã€‚\ndic1 = &#123;1: \"a\", 2: [1, 2]&#125;\nprint(dic1.pop(1), dic1) # a &#123;2: [1, 2]&#125;\n# è®¾ç½®é»˜è®¤å€¼ï¼Œå¿…é¡»æ·»åŠ ï¼Œå¦åˆ™æŠ¥é”™\nprint(dic1.pop(3, \"nokey\"), dic1) # nokey &#123;2: [1, 2]&#125;\ndel dic1[2]\nprint(dic1) # &#123;&#125; \ndict.popitem() éšæœºè¿”å›å¹¶åˆ é™¤å­—å…¸ä¸­çš„ä¸€å¯¹é”®å’Œå€¼ï¼Œå¦‚æœå­—å…¸å·²ç»ä¸ºç©ºï¼Œå´è°ƒç”¨äº†æ­¤æ–¹æ³•ï¼Œå°±æŠ¥å‡ºKeyErrorå¼‚å¸¸ã€‚\ndic1 = &#123;1: \"a\", 2: [1, 2]&#125;\nprint(dic1.popitem()) # (1, 'a')\nprint(dic1) # &#123;2: [1, 2]&#125;\ndict.clear() ç”¨äºåˆ é™¤å­—å…¸å†…æ‰€æœ‰å…ƒç´ ã€‚\ndic = &#123;'Name': 'Zara', 'Age': 7&#125;\nprint(\"å­—å…¸é•¿åº¦ : %d\" % len(dic)) # å­—å…¸é•¿åº¦ : 2\ndict.clear()\nprint(\"å­—å…¸åˆ é™¤åé•¿åº¦ : %d\" % len(dic)) # å­—å…¸åˆ é™¤åé•¿åº¦ : 0\ndict.copy() è¿”å›ä¸€ä¸ªå­—å…¸çš„æµ…å¤åˆ¶ã€‚\ndic1 = &#123;'Name': 'Lsgogroup', 'Age': 7, 'Class': 'First'&#125;\ndic2 = dic1.copy()\nprint(\"æ–°å¤åˆ¶çš„å­—å…¸ä¸º : \", dic2)\n# æ–°å¤åˆ¶çš„å­—å…¸ä¸º : &#123;'Age': 7, 'Name': 'Lsgogroup', 'Class': 'First'&#125;\ndict.update(dict2) æŠŠå­—å…¸å‚æ•° dict2 çš„ key:value å¯¹ æ›´æ–°åˆ°å­—å…¸ dict é‡Œã€‚\ndic = &#123;'Name': 'Lsgogroup', 'Age': 7&#125;\ndic2 = &#123;'Sex': 'female', 'Age': 8&#125;\ndic.update(dic2)\nprint(\"æ›´æ–°å­—å…¸ dict : \", dic)\n# æ›´æ–°å­—å…¸ dict : &#123;'Sex': 'female', 'Age': 8, 'Name': 'Lsgogroup'&#125;\n8 é›†åˆpython ä¸­set ä¸dict ç±»ä¼¼ï¼Œä¹Ÿæ˜¯ä¸€ç»„key çš„é›†åˆï¼Œä½†ä¸å­˜å‚¨value ã€‚ç”±äºkey ä¸èƒ½é‡å¤ï¼Œæ‰€ä»¥ï¼Œåœ¨set ä¸­ï¼Œæ²¡æœ‰é‡å¤çš„key ã€‚\næ³¨æ„ï¼Œ key ä¸ºä¸å¯å˜ç±»å‹ï¼Œå³å¯å“ˆå¸Œçš„å€¼ã€‚\n8.1 é›†åˆçš„åˆ›å»º\nå…ˆåˆ›å»ºå¯¹è±¡å†åŠ å…¥å…ƒç´ ã€‚\nåœ¨åˆ›å»ºç©ºé›†åˆçš„æ—¶å€™åªèƒ½ä½¿ç”¨s = set() ï¼Œå› ä¸ºs = {} åˆ›å»ºçš„æ˜¯ç©ºå­—å…¸ã€‚\n\nbasket = set()\nbasket.add('apple')\nbasket.add('banana')\nprint(basket) # &#123;'banana', 'apple'&#125;\n\nç›´æ¥æŠŠä¸€å †å…ƒç´ ç”¨èŠ±æ‹¬å·æ‹¬èµ·æ¥{å…ƒç´ 1, å…ƒç´ 2, â€¦, å…ƒç´ n} ã€‚\né‡å¤å…ƒç´ åœ¨set ä¸­ä¼šè¢«è‡ªåŠ¨è¢«è¿‡æ»¤ã€‚\n\nbasket = &#123;'apple', 'orange', 'apple', 'pear', 'orange', 'banana'&#125;\nprint(basket) # &#123;'banana', 'apple', 'pear', 'orange'&#125;\n\nä½¿ç”¨set(value) å·¥å‚å‡½æ•°ï¼ŒæŠŠåˆ—è¡¨æˆ–å…ƒç»„è½¬æ¢æˆé›†åˆã€‚\n\na = set('abracadabra')\nprint(a)\n# &#123;'r', 'b', 'd', 'c', 'a'&#125;\nb = set((\"Google\", \"Lsgogroup\", \"Taobao\", \"Taobao\"))\nprint(b)\n# &#123;'Taobao', 'Lsgogroup', 'Google'&#125;\nc = set([\"Google\", \"Lsgogroup\", \"Taobao\", \"Google\"])\nprint(c)\n# &#123;'Taobao', 'Lsgogroup', 'Google'&#125;\nç”±äº set å­˜å‚¨çš„æ˜¯æ— åºé›†åˆï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸å¯ä»¥ä¸ºé›†åˆåˆ›å»ºç´¢å¼•æˆ–æ‰§è¡Œåˆ‡ç‰‡(slice)æ“ä½œï¼Œä¹Ÿæ²¡æœ‰é”®(keys)å¯ç”¨æ¥è·å–é›†åˆä¸­å…ƒç´ çš„å€¼ï¼Œä½†æ˜¯å¯ä»¥åˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯å¦åœ¨é›†åˆä¸­ã€‚\n8.2 è®¿é—®é›†åˆä¸­çš„å€¼\nå¯ä»¥ä½¿ç”¨len() å…§å»ºå‡½æ•°å¾—åˆ°é›†åˆçš„å¤§å°ã€‚\n\nthisset = set(['Google', 'Baidu', 'Taobao'])\nprint(len(thisset)) # 3\n\nå¯ä»¥ä½¿ç”¨for æŠŠé›†åˆä¸­çš„æ•°æ®ä¸€ä¸ªä¸ªè¯»å–å‡ºæ¥ã€‚\n\nthisset = set(['Google', 'Baidu', 'Taobao'])\nfor item in thisset:\nprint(item)\n# Baidu\n# Google\n# Taobao\n\nå¯ä»¥é€šè¿‡in æˆ–not in åˆ¤æ–­ä¸€ä¸ªå…ƒç´ æ˜¯å¦åœ¨é›†åˆä¸­å·²ç»å­˜åœ¨\n\nthisset = set(['Google', 'Baidu', 'Taobao'])\nprint('Taobao' in thisset) # True\nprint('Facebook' not in thisset) # True\n8.3 é›†åˆçš„å†…ç½®æ–¹æ³•\nset.add(elmnt) ç”¨äºç»™é›†åˆæ·»åŠ å…ƒç´ ï¼Œå¦‚æœæ·»åŠ çš„å…ƒç´ åœ¨é›†åˆä¸­å·²å­˜åœ¨ï¼Œåˆ™ä¸æ‰§è¡Œä»»ä½•æ“ä½œã€‚\n\nfruits = &#123;\"apple\", \"banana\", \"cherry\"&#125;\nfruits.add(\"orange\")\nprint(fruits)\n# &#123;'orange', 'cherry', 'banana', 'apple'&#125;\nfruits.add(\"apple\")\nprint(fruits)\n# &#123;'orange', 'cherry', 'banana', 'apple'&#125;\n\nset.update(set) ç”¨äºä¿®æ”¹å½“å‰é›†åˆï¼Œå¯ä»¥æ·»åŠ æ–°çš„å…ƒç´ æˆ–é›†åˆåˆ°å½“å‰é›†åˆä¸­ï¼Œå¦‚æœæ·»åŠ çš„å…ƒç´ åœ¨é›†åˆä¸­å·²å­˜åœ¨ï¼Œåˆ™è¯¥å…ƒç´ åªä¼šå‡ºç°ä¸€æ¬¡ï¼Œé‡å¤çš„ä¼šå¿½ç•¥ã€‚\n\nx = &#123;\"apple\", \"banana\", \"cherry\"&#125;\ny = &#123;\"google\", \"baidu\", \"apple\"&#125;\nx.update(y)\nprint(x)\n# &#123;'cherry', 'banana', 'apple', 'google', 'baidu'&#125;\ny.update([\"lsgo\", \"dreamtech\"])\nprint(y)\n# &#123;'lsgo', 'baidu', 'dreamtech', 'apple', 'google'&#125;\n\nset.remove(item) ç”¨äºç§»é™¤é›†åˆä¸­çš„æŒ‡å®šå…ƒç´ ã€‚å¦‚æœå…ƒç´ ä¸å­˜åœ¨ï¼Œåˆ™ä¼šå‘ç”Ÿé”™è¯¯ã€‚\n\nfruits = &#123;\"apple\", \"banana\", \"cherry\"&#125;\nfruits.remove(\"banana\")\nprint(fruits) # &#123;'apple', 'cherry'&#125;\n\nset.discard(value) ç”¨äºç§»é™¤æŒ‡å®šçš„é›†åˆå…ƒç´ ã€‚remove() æ–¹æ³•åœ¨ç§»é™¤ä¸€ä¸ªä¸å­˜åœ¨çš„å…ƒç´ æ—¶ä¼šå‘ç”Ÿé”™è¯¯ï¼Œè€Œdiscard() æ–¹æ³•ä¸ä¼šã€‚\n\nfruits = &#123;\"apple\", \"banana\", \"cherry\"&#125;\nfruits.discard(\"banana\")\nprint(fruits) # &#123;'apple', 'cherry'&#125;\n\nset.pop() ç”¨äºéšæœºç§»é™¤ä¸€ä¸ªå…ƒç´ ã€‚\n\nfruits = &#123;\"apple\", \"banana\", \"cherry\"&#125;\nx = fruits.pop()\nprint(fruits) # &#123;'cherry', 'apple'&#125;\nprint(x) # banana\nç”±äº set æ˜¯æ— åºå’Œæ— é‡å¤å…ƒç´ çš„é›†åˆï¼Œæ‰€ä»¥ä¸¤ä¸ªæˆ–å¤šä¸ª set å¯ä»¥åšæ•°å­¦æ„ä¹‰ä¸Šçš„é›†åˆæ“ä½œã€‚\n\nset.intersection(set1, set2 â€¦) è¿”å›ä¸¤ä¸ªé›†åˆçš„äº¤é›†ã€‚\nset1 &amp; set2 è¿”å›ä¸¤ä¸ªé›†åˆçš„äº¤é›†ã€‚\nset.intersection_update(set1, set2 â€¦) äº¤é›†ï¼Œåœ¨åŸå§‹çš„é›†åˆä¸Šç§»é™¤ä¸é‡å çš„å…ƒç´ ã€‚\n\na = set('abracadabra')\nb = set('alacazam')\nprint(a) # &#123;'r', 'a', 'c', 'b', 'd'&#125;\nprint(b) # &#123;'c', 'a', 'l', 'm', 'z'&#125;\nc = a.intersection(b)\nprint(c) # &#123;'a', 'c'&#125;\nprint(a &amp; b) # &#123;'c', 'a'&#125;\nprint(a) # &#123;'a', 'r', 'c', 'b', 'd'&#125;\na.intersection_update(b)\nprint(a) # &#123;'a', 'c'&#125;\n\nset.union(set1, set2â€¦) è¿”å›ä¸¤ä¸ªé›†åˆçš„å¹¶é›†ã€‚\nset1 | set2 è¿”å›ä¸¤ä¸ªé›†åˆçš„å¹¶é›†ã€‚\n\na = set('abracadabra')\nb = set('alacazam')\nprint(a) # &#123;'r', 'a', 'c', 'b', 'd'&#125;\nprint(b) # &#123;'c', 'a', 'l', 'm', 'z'&#125;\nprint(a | b) # &#123;'l', 'd', 'm', 'b', 'a', 'r', 'z', 'c'&#125;\nc = a.union(b)\nprint(c) # &#123;'c', 'a', 'd', 'm', 'r', 'b', 'z', 'l'&#125;\n\nset.difference(set) è¿”å›é›†åˆçš„å·®é›†ã€‚\nset1 - set2 è¿”å›é›†åˆçš„å·®é›†ã€‚\nset.difference_update(set) é›†åˆçš„å·®é›†ï¼Œç›´æ¥åœ¨åŸæ¥çš„é›†åˆä¸­ç§»é™¤å…ƒç´ ï¼Œæ²¡æœ‰è¿”å›å€¼ã€‚\n\na = set('abracadabra')\nb = set('alacazam')\nprint(a) # &#123;'r', 'a', 'c', 'b', 'd'&#125;\nprint(b) # &#123;'c', 'a', 'l', 'm', 'z'&#125;\nc = a.difference(b)\nprint(c) # &#123;'b', 'd', 'r'&#125;\nprint(a - b) # &#123;'d', 'b', 'r'&#125;\nprint(a) # &#123;'r', 'd', 'c', 'a', 'b'&#125;\na.difference_update(b)\nprint(a) # &#123;'d', 'r', 'b'&#125;\n\nset.symmetric_difference(set) è¿”å›é›†åˆçš„å¼‚æˆ–ã€‚\nset1 ^ set2 è¿”å›é›†åˆçš„å¼‚æˆ–ã€‚\nset.symmetric_difference_update(set) ç§»é™¤å½“å‰é›†åˆä¸­åœ¨å¦å¤–ä¸€ä¸ªæŒ‡å®šé›†åˆç›¸åŒçš„å…ƒç´ ï¼Œå¹¶å°†å¦å¤–ä¸€ä¸ªæŒ‡å®šé›†åˆä¸­ä¸åŒçš„å…ƒç´ æ’å…¥åˆ°å½“å‰é›†åˆä¸­ã€‚\n\na = set('abracadabra')\nb = set('alacazam')\nprint(a) # &#123;'r', 'a', 'c', 'b', 'd'&#125;\nprint(b) # &#123;'c', 'a', 'l', 'm', 'z'&#125;\nc = a.symmetric_difference(b)\nprint(c) # &#123;'m', 'r', 'l', 'b', 'z', 'd'&#125;\nprint(a ^ b) # &#123;'m', 'r', 'l', 'b', 'z', 'd'&#125;\nprint(a) # &#123;'r', 'd', 'c', 'a', 'b'&#125;\na.symmetric_difference_update(b)\nprint(a) # &#123;'r', 'b', 'm', 'l', 'z', 'd'&#125;\n\nset.issubset(set) åˆ¤æ–­é›†åˆæ˜¯ä¸æ˜¯è¢«å…¶ä»–é›†åˆåŒ…å«ï¼Œå¦‚æœæ˜¯åˆ™è¿”å› Trueï¼Œå¦åˆ™è¿”å› Falseã€‚\nset1 &lt;= set2 åˆ¤æ–­é›†åˆæ˜¯ä¸æ˜¯è¢«å…¶ä»–é›†åˆåŒ…å«ï¼Œå¦‚æœæ˜¯åˆ™è¿”å› Trueï¼Œå¦åˆ™è¿”å› Falseã€‚\n\nx = &#123;\"a\", \"b\", \"c\"&#125;\ny = &#123;\"f\", \"e\", \"d\", \"c\", \"b\", \"a\"&#125;\nz = x.issubset(y)\nprint(z) # True\nprint(x &lt;= y) # True\nx = &#123;\"a\", \"b\", \"c\"&#125;\ny = &#123;\"f\", \"e\", \"d\", \"c\", \"b\"&#125;\nz = x.issubset(y)\nprint(z) # False\nprint(x &lt;= y) # False\n\nset.issuperset(set) ç”¨äºåˆ¤æ–­é›†åˆæ˜¯ä¸æ˜¯åŒ…å«å…¶ä»–é›†åˆï¼Œå¦‚æœæ˜¯åˆ™è¿”å› Trueï¼Œå¦åˆ™è¿”å› Falseã€‚\nset1 &gt;= set2 åˆ¤æ–­é›†åˆæ˜¯ä¸æ˜¯åŒ…å«å…¶ä»–é›†åˆï¼Œå¦‚æœæ˜¯åˆ™è¿”å› Trueï¼Œå¦åˆ™è¿”å› Falseã€‚\n\nx = &#123;\"f\", \"e\", \"d\", \"c\", \"b\", \"a\"&#125;\ny = &#123;\"a\", \"b\", \"c\"&#125;\nz = x.issuperset(y)\nprint(z) # True\nprint(x >= y) # True\nx = &#123;\"f\", \"e\", \"d\", \"c\", \"b\"&#125;\ny = &#123;\"a\", \"b\", \"c\"&#125;\nz = x.issuperset(y)\nprint(z) # False\nprint(x >= y) # False\n\nset.isdisjoint(set) ç”¨äºåˆ¤æ–­ä¸¤ä¸ªé›†åˆæ˜¯ä¸æ˜¯ä¸ç›¸äº¤ï¼Œå¦‚æœæ˜¯è¿”å› Trueï¼Œå¦åˆ™è¿”å› Falseã€‚\n\nx = &#123;\"f\", \"e\", \"d\", \"c\", \"b\"&#125;\ny = &#123;\"a\", \"b\", \"c\"&#125;\nz = x.isdisjoint(y)\nprint(z) # False\nx = &#123;\"f\", \"e\", \"d\", \"m\", \"g\"&#125;\ny = &#123;\"a\", \"b\", \"c\"&#125;\nz = x.isdisjoint(y)\nprint(z) # True\n8.4 é›†åˆçš„è½¬æ¢se = set(range(4))\nli = list(se)\ntu = tuple(se)\nprint(se, type(se)) # &#123;0, 1, 2, 3&#125; &lt;class 'set'>\nprint(li, type(li)) # [0, 1, 2, 3] &lt;class 'list'>\nprint(tu, type(tu)) # (0, 1, 2, 3) &lt;class 'tuple'>\n8.5 ä¸å¯å˜é›†åˆPython æä¾›äº†ä¸èƒ½æ”¹å˜å…ƒç´ çš„é›†åˆçš„å®ç°ç‰ˆæœ¬ï¼Œå³ä¸èƒ½å¢åŠ æˆ–åˆ é™¤å…ƒç´ ï¼Œç±»å‹åå«frozenset ã€‚éœ€è¦æ³¨æ„çš„æ˜¯frozenset ä»ç„¶å¯ä»¥è¿›è¡Œé›†åˆæ“ä½œï¼Œåªæ˜¯ä¸èƒ½ç”¨å¸¦æœ‰update çš„æ–¹æ³•ã€‚\n\nfrozenset([iterable]) è¿”å›ä¸€ä¸ªå†»ç»“çš„é›†åˆï¼Œå†»ç»“åé›†åˆä¸èƒ½å†æ·»åŠ æˆ–åˆ é™¤ä»»ä½•å…ƒç´ ã€‚\n\na = frozenset(range(10)) # ç”Ÿæˆä¸€ä¸ªæ–°çš„ä¸å¯å˜é›†åˆ\nprint(a)\n# frozenset(&#123;0, 1, 2, 3, 4, 5, 6, 7, 8, 9&#125;)\nb = frozenset('lsgogroup')\nprint(b)\n# frozenset(&#123;'g', 's', 'p', 'r', 'u', 'o', 'l'&#125;)\n9 åºåˆ—é’ˆå¯¹åºåˆ—çš„å†…ç½®å‡½æ•°\nlist(sub) æŠŠä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡è½¬æ¢ä¸ºåˆ—è¡¨ã€‚\n\na = list()\nprint(a) # []\nb = 'I Love LsgoGroup'\nb = list(b)\nprint(b)\n# ['I', ' ', 'L', 'o', 'v', 'e', ' ', 'L', 's', 'g', 'o', 'G', 'r', 'o', 'u', 'p']\nc = (1, 1, 2, 3, 5, 8)\nc = list(c)\nprint(c) # [1, 1, 2, 3, 5, 8]\n\ntuple(sub) æŠŠä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡è½¬æ¢ä¸ºå…ƒç»„ã€‚\n\na = tuple()\nprint(a) # ()\nb = 'I Love LsgoGroup'\nb = tuple(b)\nprint(b)\n# ('I', ' ', 'L', 'o', 'v', 'e', ' ', 'L', 's', 'g', 'o', 'G', 'r', 'o', 'u', 'p')\nc = [1, 1, 2, 3, 5, 8]\nc = tuple(c)\nprint(c) # (1, 1, 2, 3, 5, 8)\n\nstr(obj) æŠŠobjå¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²\n\na = 123\na = str(a)\nprint(a) # 123\n\nlen(s) è¿”å›å¯¹è±¡ï¼ˆå­—ç¬¦ã€åˆ—è¡¨ã€å…ƒç»„ç­‰ï¼‰é•¿åº¦æˆ–å…ƒç´ ä¸ªæ•°ã€‚a. s â€” å¯¹è±¡ã€‚\n\na = list()\nprint(len(a)) # 0\nb = ('I', ' ', 'L', 'o', 'v', 'e', ' ', 'L', 's', 'g', 'o', 'G', 'r', 'o', 'u', 'p')\nprint(len(b)) # 16\nc = 'I Love LsgoGroup'\nprint(len(c)) # 16\n\nmax(sub) è¿”å›åºåˆ—æˆ–è€…å‚æ•°é›†åˆä¸­çš„æœ€å¤§å€¼\n\nprint(max(1, 2, 3, 4, 5)) # 5\nprint(max([-8, 99, 3, 7, 83])) # 99\nprint(max('IloveLsgoGroup')) # v\n\nmin(sub) è¿”å›åºåˆ—æˆ–å‚æ•°é›†åˆä¸­çš„æœ€å°å€¼\n\nprint(min(1, 2, 3, 4, 5)) # 1\nprint(min([-8, 99, 3, 7, 83])) # -8\nprint(min('IloveLsgoGroup')) # G\n\nsum(iterable[, start=0]) è¿”å›åºåˆ—iterable ä¸å¯é€‰å‚æ•°start çš„æ€»å’Œã€‚\n\nprint(sum([1, 3, 5, 7, 9])) # 25\nprint(sum([1, 3, 5, 7, 9], 10)) # 35\nprint(sum((1, 3, 5, 7, 9))) # 25\nprint(sum((1, 3, 5, 7, 9), 20)) # 45\n\nsorted(iterable, key=None, reverse=False) å¯¹æ‰€æœ‰å¯è¿­ä»£çš„å¯¹è±¡è¿›è¡Œæ’åºæ“ä½œã€‚a. iterable â€” å¯è¿­ä»£å¯¹è±¡ã€‚  b. key â€” ä¸»è¦æ˜¯ç”¨æ¥è¿›è¡Œæ¯”è¾ƒçš„å…ƒç´ ï¼Œåªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œå…·ä½“çš„å‡½æ•°çš„å‚æ•°å°±æ˜¯å–è‡ªäºå¯è¿­ä»£å¯¹è±¡ä¸­ï¼ŒæŒ‡å®šå¯è¿­ä»£  å¯¹è±¡ä¸­çš„ä¸€ä¸ªå…ƒç´ æ¥è¿›è¡Œæ’åºã€‚  c. reverse â€” æ’åºè§„åˆ™ï¼Œ reverse = True é™åº ï¼Œ reverse = False å‡åºï¼ˆé»˜è®¤ï¼‰ã€‚\nd. è¿”å›é‡æ–°æ’åºçš„åˆ—è¡¨ã€‚\n\n\nx = [-8, 99, 3, 7, 83]\nprint(sorted(x)) # [-8, 3, 7, 83, 99]\nprint(sorted(x, reverse=True)) # [99, 83, 7, 3, -8]\nt = (&#123;\"age\": 20, \"name\": \"a\"&#125;, &#123;\"age\": 25, \"name\": \"b\"&#125;, &#123;\"age\": 10, \"name\": \"c\"&#125;)\nx = sorted(t, key=lambda a: a[\"age\"])\nprint(x)\n# [&#123;'age': 10, 'name': 'c'&#125;, &#123;'age': 20, 'name': 'a'&#125;, &#123;'age': 25, 'name': 'b'&#125;]\n\nreversed(seq) å‡½æ•°è¿”å›ä¸€ä¸ªåè½¬çš„è¿­ä»£å™¨ã€‚a. seq â€” è¦è½¬æ¢çš„åºåˆ—ï¼Œå¯ä»¥æ˜¯ tuple, string, list æˆ– rangeã€‚\n\ns = 'lsgogroup'\nx = reversed(s)\nprint(type(x)) # &lt;class 'reversed'>\nprint(x) # &lt;reversed object at 0x000002507E8EC2C8>\nprint(list(x))\n# ['p', 'u', 'o', 'r', 'g', 'o', 'g', 's', 'l']\nt = ('l', 's', 'g', 'o', 'g', 'r', 'o', 'u', 'p')\nprint(list(reversed(t)))\n# ['p', 'u', 'o', 'r', 'g', 'o', 'g', 's', 'l']\nr = range(5, 9)\nprint(list(reversed(r)))\n# [8, 7, 6, 5]\nx = [-8, 99, 3, 7, 83]\nprint(list(reversed(x)))\n# [83, 7, 3, 99, -8]\n\nenumerate(sequence, [start=0])\n\nseasons = ['Spring', 'Summer', 'Fall', 'Winter']\na = list(enumerate(seasons))\nprint(a)\n# [(0, 'Spring'), (1, 'Summer'), (2, 'Fall'), (3, 'Winter')]\nb = list(enumerate(seasons, 1))\nprint(b)\n# [(1, 'Spring'), (2, 'Summer'), (3, 'Fall'), (4, 'Winter')]\nfor i, element in a:\nprint('&#123;0&#125;,&#123;1&#125;'.format(i, element))\n\nzip(iter1 [,iter2 [â€¦]])a. ç”¨äºå°†å¯è¿­ä»£çš„å¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œå°†å¯¹è±¡ä¸­å¯¹åº”çš„å…ƒç´ æ‰“åŒ…æˆä¸€ä¸ªä¸ªå…ƒç»„ï¼Œç„¶åè¿”å›ç”±è¿™äº›å…ƒç»„ç»„æˆçš„å¯¹è±¡ï¼Œè¿™æ ·åšçš„å¥½å¤„æ˜¯èŠ‚çº¦äº†ä¸å°‘çš„å†…å­˜ã€‚b. æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ list() è½¬æ¢æ¥è¾“å‡ºåˆ—è¡¨ã€‚c. å¦‚æœå„ä¸ªè¿­ä»£å™¨çš„å…ƒç´ ä¸ªæ•°ä¸ä¸€è‡´ï¼Œåˆ™è¿”å›åˆ—è¡¨é•¿åº¦ä¸æœ€çŸ­çš„å¯¹è±¡ç›¸åŒï¼Œåˆ©ç”¨ * å·æ“ä½œç¬¦ï¼Œå¯ä»¥å°†å…ƒç»„è§£å‹ä¸ºåˆ—è¡¨ã€‚\n\na = [1, 2, 3]\nb = [4, 5, 6]\nc = [4, 5, 6, 7, 8]\nzipped = zip(a, b)\nprint(zipped) # &lt;zip object at 0x000000C5D89EDD88>\nprint(list(zipped)) # [(1, 4), (2, 5), (3, 6)]\nzipped = zip(a, c)\nprint(list(zipped)) # [(1, 4), (2, 5), (3, 6)]\na1, a2 = zip(*zip(a, b))\nprint(list(a1)) # [1, 2, 3]\nprint(list(a2)) # [4, 5, 6]\n10 å‡½æ•°ä¸Lambdaè¡¨è¾¾å¼10.1 å‡½æ•°å‡½æ•°çš„å®šä¹‰\nå‡½æ•°ä»¥def å…³é”®è¯å¼€å¤´ï¼Œåæ¥å‡½æ•°åå’Œåœ†æ‹¬å·()ã€‚\nå‡½æ•°æ‰§è¡Œçš„ä»£ç ä»¥å†’å·èµ·å§‹ï¼Œå¹¶ä¸”ç¼©è¿›ã€‚\nreturn [è¡¨è¾¾å¼] ç»“æŸå‡½æ•°ï¼Œé€‰æ‹©æ€§åœ°è¿”å›ä¸€ä¸ªå€¼ç»™è°ƒç”¨æ–¹ã€‚ä¸å¸¦è¡¨è¾¾å¼çš„returnç›¸å½“äºè¿”å›None ã€‚\n\ndef functionname(parameters):\n\"å‡½æ•°_æ–‡æ¡£å­—ç¬¦ä¸²\"\nfunction_suite\nreturn [expression]\nå‡½æ•°å‚æ•°Python çš„å‡½æ•°å…·æœ‰éå¸¸çµæ´»å¤šæ ·çš„å‚æ•°å½¢æ€ï¼Œæ—¢å¯ä»¥å®ç°ç®€å•çš„è°ƒç”¨ï¼Œåˆå¯ä»¥ä¼ å…¥éå¸¸å¤æ‚çš„å‚æ•°ã€‚ä»ç®€åˆ°ç¹çš„å‚æ•°å½¢æ€å¦‚ä¸‹ï¼š\n\nä½ç½®å‚æ•° (positional argument)\ndef functionname(arg1):\n    \"å‡½æ•°_æ–‡æ¡£å­—ç¬¦ä¸²\"\n    function_suite\nreturn [expression]\n\né»˜è®¤å‚æ•° (default argument)\ndef functionname(arg1, arg2=v):\n    \"å‡½æ•°_æ–‡æ¡£å­—ç¬¦ä¸²\"\n    function_suite\nreturn [expression]\n# é»˜è®¤å‚æ•°ä¸€å®šè¦æ”¾åœ¨ä½ç½®å‚æ•° åé¢ï¼Œä¸ç„¶ç¨‹åºä¼šæŠ¥é”™ã€‚\n\nå¯å˜å‚æ•° (variable argument)\ndef functionname(arg1, arg2=v, *args):\n    for var in args:\n\t\tprint(var)\nreturn [expression]\n\n*args - å¯å˜å‚æ•°ï¼Œå¯ä»¥æ˜¯ä»é›¶ä¸ªåˆ°ä»»æ„ä¸ªï¼Œè‡ªåŠ¨ç»„è£…æˆå…ƒç»„ã€‚\nåŠ äº†æ˜Ÿå·ï¼ˆ*ï¼‰çš„å˜é‡åä¼šå­˜æ”¾æ‰€æœ‰æœªå‘½åçš„å˜é‡å‚æ•°ã€‚\n\n\nå…³é”®å­—å‚æ•° (keyword argument)\ndef functionname(arg1, arg2=v, *args, **kw):\n    \"å‡½æ•°_æ–‡æ¡£å­—ç¬¦ä¸²\"\n    function_suite\nreturn [expression]\n\n**kw - å…³é”®å­—å‚æ•°ï¼Œå¯ä»¥æ˜¯ä»é›¶ä¸ªåˆ°ä»»æ„ä¸ªï¼Œè‡ªåŠ¨ç»„è£…æˆå­—å…¸ã€‚\n\ndef printinfo(arg1, *args, **kwargs):\nprint(arg1)\nprint(args)\nprint(kwargs)\nprintinfo(70, 60, 50)\n# 70\n# (60, 50)\n# &#123;&#125;\nprintinfo(70, 60, 50, a=1, b=2)\n# 70\n# (60, 50)\n# &#123;'a': 1, 'b': 2&#125;\nã€Œå¯å˜å‚æ•°ã€å’Œã€Œå…³é”®å­—å‚æ•°ã€çš„åŒå¼‚æ€»ç»“å¦‚ä¸‹ï¼š\n\nå¯å˜å‚æ•°å…è®¸ä¼ å…¥é›¶ä¸ªåˆ°ä»»æ„ä¸ªå‚æ•°ï¼Œå®ƒä»¬åœ¨å‡½æ•°è°ƒç”¨æ—¶è‡ªåŠ¨ç»„è£…ä¸ºä¸€ä¸ªå…ƒç»„ (tuple)ã€‚\nå…³é”®å­—å‚æ•°å…è®¸ä¼ å…¥é›¶ä¸ªåˆ°ä»»æ„ä¸ªå‚æ•°ï¼Œå®ƒä»¬åœ¨å‡½æ•°å†…éƒ¨è‡ªåŠ¨ç»„è£…ä¸ºä¸€ä¸ªå­—å…¸ (dict)ã€‚\n\n\nå‘½åå…³é”®å­—å‚æ•° (name keyword argument)\ndef functionname(arg1, arg2=v, *args, *, nkw, **kw):\n    \"å‡½æ•°_æ–‡æ¡£å­—ç¬¦ä¸²\"\n    function_suite\nreturn [expression]\n\n, nkw - å‘½åå…³é”®å­—å‚æ•°ï¼Œç”¨æˆ·æƒ³è¦è¾“å…¥çš„å…³é”®å­—å‚æ•°ï¼Œå®šä¹‰æ–¹å¼æ˜¯åœ¨nkw å‰é¢åŠ ä¸ªåˆ†éš”ç¬¦ ã€‚\nå¦‚æœè¦é™åˆ¶å…³é”®å­—å‚æ•°çš„åå­—ï¼Œå°±å¯ä»¥ç”¨ã€Œå‘½åå…³é”®å­—å‚æ•°ã€\nä½¿ç”¨å‘½åå…³é”®å­—å‚æ•°æ—¶ï¼Œè¦ç‰¹åˆ«æ³¨æ„ä¸èƒ½ç¼ºå°‘å‚æ•°åã€‚\n\ndef printinfo(arg1, *, nkw, **kwargs):\n    print(arg1)\n    print(nkw)\n    print(kwargs)\nprintinfo(70, nkw=10, a=1, b=2)\n# 70\n# 10\n# &#123;'a': 1, 'b': 2&#125;\nprintinfo(70, 10, a=1, b=2)\n# TypeError: printinfo() takes 1 positional argument but 2 were given\n\næ²¡æœ‰å†™å‚æ•°ånwk ï¼Œå› æ­¤ 10 è¢«å½“æˆã€Œä½ç½®å‚æ•°ã€ï¼Œè€ŒåŸå‡½æ•°åªæœ‰ 1 ä¸ªä½ç½®å‡½æ•°ï¼Œç°åœ¨è°ƒç”¨äº† 2 ä¸ªï¼Œå› æ­¤ç¨‹åºä¼šæŠ¥é”™ã€‚\n\n\nå‚æ•°ç»„åˆ\nåœ¨ Python ä¸­å®šä¹‰å‡½æ•°ï¼Œå¯ä»¥ç”¨ä½ç½®å‚æ•°ã€é»˜è®¤å‚æ•°ã€å¯å˜å‚æ•°ã€å‘½åå…³é”®å­—å‚æ•°å’Œå…³é”®å­—å‚æ•°ï¼Œè¿™ 5 ç§å‚æ•°ä¸­çš„ 4 ä¸ªéƒ½å¯ä»¥ä¸€èµ·ä½¿ç”¨ï¼Œä½†æ˜¯æ³¨æ„ï¼Œå‚æ•°å®šä¹‰çš„é¡ºåºå¿…é¡»æ˜¯ï¼š\n\nä½ç½®å‚æ•°ã€é»˜è®¤å‚æ•°ã€å¯å˜å‚æ•°å’Œå…³é”®å­—å‚æ•°ã€‚\nä½ç½®å‚æ•°ã€é»˜è®¤å‚æ•°ã€å‘½åå…³é”®å­—å‚æ•°å’Œå…³é”®å­—å‚æ•°ã€‚è¦æ³¨æ„å®šä¹‰å¯å˜å‚æ•°å’Œå…³é”®å­—å‚æ•°çš„è¯­æ³•ï¼š\n*args æ˜¯å¯å˜å‚æ•°ï¼Œ args æ¥æ”¶çš„æ˜¯ä¸€ä¸ª tuple\n*kw æ˜¯å…³é”®å­—å‚æ•°ï¼Œ kw æ¥æ”¶çš„æ˜¯ä¸€ä¸ª dictå‘½åå…³é”®å­—å‚æ•°æ˜¯ä¸ºäº†é™åˆ¶è°ƒç”¨è€…å¯ä»¥ä¼ å…¥çš„å‚æ•°åï¼ŒåŒæ—¶å¯ä»¥æä¾›é»˜è®¤å€¼ã€‚å®šä¹‰å‘½åå…³é”®å­—å‚æ•°ä¸è¦å¿˜äº†å†™åˆ†éš”ç¬¦ï¼Œå¦åˆ™å®šä¹‰çš„æ˜¯ä½ç½®å‚æ•°ã€‚\n\nè­¦å‘Šï¼šè™½ç„¶å¯ä»¥ç»„åˆå¤šè¾¾ 5 ç§å‚æ•°ï¼Œä½†ä¸è¦åŒæ—¶ä½¿ç”¨å¤ªå¤šçš„ç»„åˆï¼Œå¦åˆ™å‡½æ•°å¾ˆéš¾æ‡‚ã€‚\n\n\nå˜é‡ä½œç”¨åŸŸ\nPython ä¸­ï¼Œç¨‹åºçš„å˜é‡å¹¶ä¸æ˜¯åœ¨å“ªä¸ªä½ç½®éƒ½å¯ä»¥è®¿é—®çš„ï¼Œè®¿é—®æƒé™å†³å®šäºè¿™ä¸ªå˜é‡æ˜¯åœ¨å“ªé‡Œèµ‹å€¼çš„ã€‚\nå®šä¹‰åœ¨å‡½æ•°å†…éƒ¨çš„å˜é‡æ‹¥æœ‰å±€éƒ¨ä½œç”¨åŸŸï¼Œè¯¥å˜é‡ç§°ä¸ºå±€éƒ¨å˜é‡ã€‚\nå®šä¹‰åœ¨å‡½æ•°å¤–éƒ¨çš„å˜é‡æ‹¥æœ‰å…¨å±€ä½œç”¨åŸŸï¼Œè¯¥å˜é‡ç§°ä¸ºå…¨å±€å˜é‡ã€‚\nå±€éƒ¨å˜é‡åªèƒ½åœ¨å…¶è¢«å£°æ˜çš„å‡½æ•°å†…éƒ¨è®¿é—®ï¼Œè€Œå…¨å±€å˜é‡å¯ä»¥åœ¨æ•´ä¸ªç¨‹åºèŒƒå›´å†…è®¿é—®ã€‚\nå½“å†…éƒ¨ä½œç”¨åŸŸæƒ³ä¿®æ”¹å¤–éƒ¨ä½œç”¨åŸŸçš„å˜é‡æ—¶ï¼Œå°±è¦ç”¨åˆ°global å’Œnonlocal å…³é”®å­—äº†ã€‚\n\nnum = 1\ndef fun1():\n    global num # éœ€è¦ä½¿ç”¨ global å…³é”®å­—å£°æ˜\n    print(num) # 1\n    num = 123\n    print(num) # 123\nfun1()\nprint(num) # 123\n10.2 Lambda è¡¨è¾¾å¼åŒ¿åå‡½æ•°çš„å®šä¹‰lambda argument_list: expression\n\nlambda - å®šä¹‰åŒ¿åå‡½æ•°çš„å…³é”®è¯ã€‚\nargument_list - å‡½æ•°å‚æ•°ï¼Œå®ƒä»¬å¯ä»¥æ˜¯ä½ç½®å‚æ•°ã€é»˜è®¤å‚æ•°ã€å…³é”®å­—å‚æ•°ï¼Œå’Œæ­£è§„å‡½æ•°é‡Œçš„å‚æ•°ç±»å‹ä¸€æ ·ã€‚\n: - å†’å·ï¼Œåœ¨å‡½æ•°å‚æ•°å’Œè¡¨è¾¾å¼ä¸­é—´è¦åŠ ä¸ªå†’å·ã€‚\nexpression - åªæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œè¾“å…¥å‡½æ•°å‚æ•°ï¼Œè¾“å‡ºä¸€äº›å€¼ã€‚\n\næ³¨æ„ï¼š\n\nexpression ä¸­æ²¡æœ‰ return è¯­å¥ï¼Œå› ä¸º lambda ä¸éœ€è¦å®ƒæ¥è¿”å›ï¼Œè¡¨è¾¾å¼æœ¬èº«ç»“æœå°±æ˜¯è¿”å›å€¼ã€‚\nåŒ¿åå‡½æ•°æ‹¥æœ‰è‡ªå·±çš„å‘½åç©ºé—´ï¼Œä¸”ä¸èƒ½è®¿é—®è‡ªå·±å‚æ•°åˆ—è¡¨ä¹‹å¤–æˆ–å…¨å±€å‘½åç©ºé—´é‡Œçš„å‚æ•°ã€‚\n\ndef sqr(x):\nreturn x ** 2\nprint(sqr)\n# &lt;function sqr at 0x000000BABD3A4400>\n\ny = [sqr(x) for x in range(10)]\nprint(y)\n# [0, 1, 4, 9, 16, 25, 36, 49, 64, 81]\n\nlbd_sqr = lambda x: x ** 2\nprint(lbd_sqr)\n# &lt;function &lt;lambda> at 0x000000BABB6AC1E0>\n\ny = [lbd_sqr(x) for x in range(10)]\nprint(y)\n# [0, 1, 4, 9, 16, 25, 36, 49, 64, 81]\n\nsumary = lambda arg1, arg2: arg1 + arg2\nprint(sumary(10, 20)) # 30\nfunc = lambda *args: sum(args)\nprint(func(1, 2, 3, 4, 5)) # 15\nåŒ¿åå‡½æ•°çš„åº”ç”¨å‡½æ•°å¼ç¼–ç¨‹ æ˜¯æŒ‡ä»£ç ä¸­æ¯ä¸€å—éƒ½æ˜¯ä¸å¯å˜çš„ï¼Œéƒ½ç”±çº¯å‡½æ•°çš„å½¢å¼ç»„æˆã€‚è¿™é‡Œçš„çº¯å‡½æ•°ï¼Œæ˜¯æŒ‡å‡½æ•°æœ¬èº«ç›¸äº’ç‹¬ç«‹ã€äº’ä¸å½±å“ï¼Œå¯¹äºç›¸åŒçš„è¾“å…¥ï¼Œæ€»ä¼šæœ‰ç›¸åŒçš„è¾“å‡ºï¼Œæ²¡æœ‰ä»»ä½•å‰¯ä½œç”¨ã€‚\nåŒ¿åå‡½æ•° å¸¸å¸¸åº”ç”¨äºå‡½æ•°å¼ç¼–ç¨‹çš„é«˜é˜¶å‡½æ•° (high-order function)ä¸­ï¼Œä¸»è¦æœ‰ä¸¤ç§å½¢å¼ï¼š\n\nå‚æ•°æ˜¯å‡½æ•° (filter, map)\nè¿”å›å€¼æ˜¯å‡½æ•° (closure)å¦‚ï¼Œåœ¨ filter å’Œmap å‡½æ•°ä¸­çš„åº”ç”¨ï¼š\nfilter(function, iterable) è¿‡æ»¤åºåˆ—ï¼Œè¿‡æ»¤æ‰ä¸ç¬¦åˆæ¡ä»¶çš„å…ƒç´ ï¼Œè¿”å›ä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡ï¼Œå¦‚æœè¦è½¬æ¢ä¸ºåˆ—è¡¨ï¼Œå¯ä»¥ä½¿ç”¨ list() æ¥è½¬æ¢ã€‚\n\nodd = lambda x: x % 2 == 1\ntemplist = filter(odd, [1, 2, 3, 4, 5, 6, 7, 8, 9])\nprint(list(templist)) # [1, 3, 5, 7, 9]\n\nmap(function, *iterables) æ ¹æ®æä¾›çš„å‡½æ•°å¯¹æŒ‡å®šåºåˆ—åšæ˜ å°„ã€‚\n\nm1 = map(lambda x: x ** 2, [1, 2, 3, 4, 5])\nprint(list(m1))\n# [1, 4, 9, 16, 25]\nm2 = map(lambda x, y: x + y, [1, 3, 5, 7, 9], [2, 4, 6, 8, 10])\nprint(list(m2))\n# [3, 7, 11, 15, 19]\n11 ç±»ä¸å¯¹è±¡11.1 å¯¹è±¡ = å±æ€§ + æ–¹æ³•å¯¹è±¡æ˜¯ç±»çš„å®ä¾‹ã€‚æ¢å¥è¯è¯´ï¼Œç±»ä¸»è¦å®šä¹‰å¯¹è±¡çš„ç»“æ„ï¼Œç„¶åæˆ‘ä»¬ä»¥ç±»ä¸ºæ¨¡æ¿åˆ›å»ºå¯¹è±¡ã€‚ç±»ä¸ä½†åŒ…å«æ–¹æ³•å®šä¹‰ï¼Œè€Œä¸”è¿˜åŒ…å«æ‰€æœ‰å®ä¾‹å…±äº«çš„æ•°æ®ã€‚\nå°è£…ï¼šä¿¡æ¯éšè”½æŠ€æœ¯æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å…³é”®å­— class å®šä¹‰ Python ç±»ï¼Œå…³é”®å­—åé¢ç´§è·Ÿç±»çš„åç§°ã€åˆ†å·å’Œç±»çš„å®ç°ã€‚\nclass Turtle: # Pythonä¸­çš„ç±»åçº¦å®šä»¥å¤§å†™å­—æ¯å¼€å¤´\n\"\"\"å…³äºç±»çš„ä¸€ä¸ªç®€å•ä¾‹å­\"\"\"\n    # å±æ€§\n    color = 'green'\n    mouth = 'å¤§å˜´'\n    # æ–¹æ³•\n    def climb(self):\n    \tprint('æˆ‘æ­£åœ¨å¾ˆåŠªåŠ›çš„å‘å‰çˆ¬...')\n    \t\n    \t\ntt = Turtle()\ntt.climb()\n# æˆ‘æ­£åœ¨å¾ˆåŠªåŠ›çš„å‘å‰çˆ¬...\nç»§æ‰¿ï¼šå­ç±»è‡ªåŠ¨å…±äº«çˆ¶ç±»ä¹‹é—´æ•°æ®å’Œæ–¹æ³•çš„æœºåˆ¶\nclass MyList(list):\n\tpass\nlst = MyList([1, 5, 2, 7, 8])\nlst.append(9)\nlst.sort()\nprint(lst)\n# [1, 2, 5, 7, 8, 9]\nå¤šæ€ï¼šä¸åŒå¯¹è±¡å¯¹åŒä¸€æ–¹æ³•å“åº”ä¸åŒçš„è¡ŒåŠ¨\nclass Animal:\n\tdef run(self):\n\t\traise AttributeError('å­ç±»å¿…é¡»å®ç°è¿™ä¸ªæ–¹æ³•')\nclass People(Animal):\n\tdef run(self):\n\t\tprint('äººæ­£åœ¨èµ°')\nclass Pig(Animal):\n\tdef run(self):\n\t\tprint('pig is walking')\n11.2 self æ˜¯ä»€ä¹ˆï¼ŸPython çš„ self ç›¸å½“äº C++ çš„ this æŒ‡é’ˆã€‚\nclass Test:\n    def prt(self):\n        print(self)\n        print(self.__class__)\nt &#x3D; Test()\nt.prt()\n# &lt;__main__.Test object at 0x000000BC5A351208&gt;\n# &lt;class &#39;__main__.Test&#39;&gt;\nç±»çš„æ–¹æ³•ä¸æ™®é€šçš„å‡½æ•°åªæœ‰ä¸€ä¸ªç‰¹åˆ«çš„åŒºåˆ« â€”â€” å®ƒä»¬å¿…é¡»æœ‰ä¸€ä¸ªé¢å¤–çš„ç¬¬ä¸€ä¸ªå‚æ•°åç§°ï¼ˆå¯¹åº”äºè¯¥å®ä¾‹ï¼Œå³è¯¥å¯¹è±¡æœ¬èº«ï¼‰ï¼ŒæŒ‰ç…§æƒ¯ä¾‹å®ƒçš„åç§°æ˜¯ self ã€‚åœ¨è°ƒç”¨æ–¹æ³•æ—¶ï¼Œæˆ‘ä»¬æ— éœ€æ˜ç¡®æä¾›ä¸å‚æ•° self ç›¸å¯¹åº”çš„å‚æ•°ã€‚\nclass Ball:\n    def setName(self, name):\n    \tself.name = name\n    def kick(self):\n    \tprint(\"æˆ‘å«%s,è¯¥æ­»çš„ï¼Œè°è¸¢æˆ‘...\" % self.name)\n11.3 Python çš„é­”æ³•æ–¹æ³•ç±»æœ‰ä¸€ä¸ªåä¸º__init__(self[, param1, param2â€¦]) çš„é­”æ³•æ–¹æ³•ï¼Œè¯¥æ–¹æ³•åœ¨ç±»å®ä¾‹åŒ–æ—¶ä¼šè‡ªåŠ¨è°ƒç”¨ã€‚\nclass Ball:\n    def __init__(self, name):\n    \tself.name = name\n11.4 å…¬æœ‰å’Œç§æœ‰åœ¨ Python ä¸­å®šä¹‰ç§æœ‰å˜é‡åªéœ€è¦åœ¨å˜é‡åæˆ–å‡½æ•°åå‰åŠ ä¸Šâ€œ__â€ä¸¤ä¸ªä¸‹åˆ’çº¿ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°æˆ–å˜é‡å°±ä¼šä¸ºç§æœ‰çš„äº†ã€‚\nclass JustCounter:\n    __secretCount &#x3D; 0 # ç§æœ‰å˜é‡\n    publicCount &#x3D; 0 # å…¬å¼€å˜é‡\n    \n    def __foo(self): # ç§æœ‰æ–¹æ³•\n\t\tprint(&#39;è¿™æ˜¯ç§æœ‰æ–¹æ³•&#39;)\n11.5 ç»§æ‰¿Python åŒæ ·æ”¯æŒç±»çš„ç»§æ‰¿ï¼Œæ´¾ç”Ÿç±»çš„å®šä¹‰å¦‚ä¸‹æ‰€ç¤ºï¼š\nclass DerivedClassName(BaseClassName):\n    &lt;statement-1>\n    .\n    .\n    .\n    &lt;statement-N>\nBaseClassName ï¼ˆç¤ºä¾‹ä¸­çš„åŸºç±»åï¼‰å¿…é¡»ä¸æ´¾ç”Ÿç±»å®šä¹‰åœ¨ä¸€ä¸ªä½œç”¨åŸŸå†…ã€‚é™¤äº†ç±»ï¼Œè¿˜å¯ä»¥ç”¨è¡¨è¾¾å¼ï¼ŒåŸºç±»å®šä¹‰åœ¨å¦ä¸€ä¸ªæ¨¡å—ä¸­æ—¶è¿™ä¸€ç‚¹éå¸¸æœ‰ç”¨ï¼š\nclass DerivedClassName(modname.BaseClassName):\n    &lt;statement-1>\n    .\n    .\n    .\n    &lt;statement-N>\n\nå¦‚æœå­ç±»ä¸­å®šä¹‰ä¸çˆ¶ç±»åŒåçš„æ–¹æ³•æˆ–å±æ€§ï¼Œåˆ™ä¼šè‡ªåŠ¨è¦†ç›–çˆ¶ç±»å¯¹åº”çš„æ–¹æ³•æˆ–å±æ€§ã€‚\n\nclass Fish:\n    def __init__(self):\n        self.x = r.randint(0, 10)\n        self.y = r.randint(0, 10)\n    def move(self):\n    \tself.x -= 1\n    \tprint(\"æˆ‘çš„ä½ç½®\", self.x, self.y)\nclass Shark(Fish): # é²¨é±¼\n    def __init__(self):\n        Fish.__init__(self)\n        self.hungry = True\n\nä½¿ç”¨superå‡½æ•°super().init()\n\nclass Shark(Fish): # é²¨é±¼\n    def __init__(self):\n        super().__init__()\n        self.hungry = True\nPython è™½ç„¶æ”¯æŒå¤šç»§æ‰¿çš„å½¢å¼ï¼Œä½†æˆ‘ä»¬ä¸€èˆ¬ä¸ä½¿ç”¨å¤šç»§æ‰¿ï¼Œå› ä¸ºå®¹æ˜“å¼•èµ·æ··ä¹±ã€‚\néœ€è¦æ³¨æ„åœ†æ‹¬å·ä¸­çˆ¶ç±»çš„é¡ºåºï¼Œè‹¥æ˜¯çˆ¶ç±»ä¸­æœ‰ç›¸åŒçš„æ–¹æ³•åï¼Œè€Œåœ¨å­ç±»ä½¿ç”¨æ—¶æœªæŒ‡å®šï¼ŒPython ä»å·¦è‡³å³æœç´¢ï¼Œå³æ–¹æ³•åœ¨å­ç±»ä¸­æœªæ‰¾åˆ°æ—¶ï¼Œä»å·¦åˆ°å³æŸ¥æ‰¾çˆ¶ç±»ä¸­æ˜¯å¦åŒ…å«æ–¹æ³•ã€‚\n11.6 ç±»ã€ç±»å¯¹è±¡å’Œå®ä¾‹å¯¹è±¡ç±»å¯¹è±¡ï¼šåˆ›å»ºä¸€ä¸ªç±»ï¼Œå…¶å®ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ä¹Ÿåœ¨å†…å­˜å¼€è¾Ÿäº†ä¸€å—ç©ºé—´ï¼Œç§°ä¸ºç±»å¯¹è±¡ï¼Œç±»å¯¹è±¡åªæœ‰ä¸€ä¸ªã€‚\nå®ä¾‹å¯¹è±¡ï¼šå°±æ˜¯é€šè¿‡å®ä¾‹åŒ–ç±»åˆ›å»ºçš„å¯¹è±¡ï¼Œç§°ä¸ºå®ä¾‹å¯¹è±¡ï¼Œå®ä¾‹å¯¹è±¡å¯ä»¥æœ‰å¤šä¸ªã€‚\n# ç±»å¯¹è±¡\nclass A(object):\n\tpass\n# å®ä¾‹åŒ–å¯¹è±¡ aã€bã€céƒ½å±äºå®ä¾‹å¯¹è±¡ã€‚\na = A()\nb = A()\nc = A()\nç±»å±æ€§ï¼šç±»é‡Œé¢æ–¹æ³•å¤–é¢å®šä¹‰çš„å˜é‡ç§°ä¸ºç±»å±æ€§ã€‚ç±»å±æ€§æ‰€å±äºç±»å¯¹è±¡å¹¶ä¸”å¤šä¸ªå®ä¾‹å¯¹è±¡ä¹‹é—´å…±äº«åŒä¸€ä¸ªç±»å±æ€§ï¼Œè¯´ç™½äº†å°±æ˜¯ç±»å±æ€§æ‰€æœ‰çš„é€šè¿‡è¯¥ç±»å®ä¾‹åŒ–çš„å¯¹è±¡éƒ½èƒ½å…±äº«ã€‚\nclass A():\n    a = xx #ç±»å±æ€§\n    def __init__(self):\n    \tA.a = xx #ä½¿ç”¨ç±»å±æ€§å¯ä»¥é€šè¿‡ ï¼ˆç±»å.ç±»å±æ€§ï¼‰è°ƒç”¨ã€‚\nå®ä¾‹å±æ€§ï¼šå®ä¾‹å±æ€§å’Œå…·ä½“çš„æŸä¸ªå®ä¾‹å¯¹è±¡æœ‰å…³ç³»ï¼Œå¹¶ä¸”ä¸€ä¸ªå®ä¾‹å¯¹è±¡å’Œå¦å¤–ä¸€ä¸ªå®ä¾‹å¯¹è±¡æ˜¯ä¸å…±äº«å±æ€§çš„ï¼Œè¯´ç™½äº†å®ä¾‹å±æ€§åªèƒ½åœ¨è‡ªå·±çš„å¯¹è±¡é‡Œé¢ä½¿ç”¨ï¼Œå…¶ä»–çš„å¯¹è±¡ä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œå› ä¸ºself æ˜¯è°è°ƒç”¨ï¼Œå®ƒçš„å€¼å°±å±äºè¯¥å¯¹è±¡ã€‚\nclass ç±»å():\n    __init__(self)ï¼š\n    \tself.name = xx #å®ä¾‹å±æ€§\nç±»å±æ€§å’Œå®ä¾‹å±æ€§åŒºåˆ«\n\nç±»å±æ€§ï¼šç±»å¤–é¢ï¼Œå¯ä»¥é€šè¿‡å®ä¾‹å¯¹è±¡.ç±»å±æ€§å’Œç±»å.ç±»å±æ€§è¿›è¡Œè°ƒç”¨ã€‚ç±»é‡Œé¢ï¼Œé€šè¿‡self.ç±»å±æ€§å’Œç±»å.ç±»å±æ€§è¿›è¡Œè°ƒç”¨ã€‚\nå®ä¾‹å±æ€§ ï¼šç±»å¤–é¢ï¼Œå¯ä»¥é€šè¿‡å®ä¾‹å¯¹è±¡.å®ä¾‹å±æ€§è°ƒç”¨ã€‚ç±»é‡Œé¢ï¼Œé€šè¿‡self.å®ä¾‹å±æ€§è°ƒç”¨ã€‚\nå®ä¾‹å±æ€§å°±ç›¸å½“äºå±€éƒ¨å˜é‡ã€‚å‡ºäº†è¿™ä¸ªç±»æˆ–è€…è¿™ä¸ªç±»çš„å®ä¾‹å¯¹è±¡ï¼Œå°±æ²¡æœ‰ä½œç”¨äº†ã€‚\nç±»å±æ€§å°±ç›¸å½“äºç±»é‡Œé¢çš„å…¨å±€å˜é‡ï¼Œå¯ä»¥å’Œè¿™ä¸ªç±»çš„æ‰€æœ‰å®ä¾‹å¯¹è±¡å…±äº«ã€‚\n\n11.8 ä»€ä¹ˆæ˜¯ç»‘å®šï¼ŸPython ä¸¥æ ¼è¦æ±‚æ–¹æ³•éœ€è¦æœ‰å®ä¾‹æ‰èƒ½è¢«è°ƒç”¨ï¼Œè¿™ç§é™åˆ¶å…¶å®å°±æ˜¯ Python æ‰€è°“çš„ç»‘å®šæ¦‚å¿µã€‚Python å¯¹è±¡çš„æ•°æ®å±æ€§é€šå¸¸å­˜å‚¨åœ¨åä¸º. dict çš„å­—å…¸ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è®¿é—®dict ï¼Œæˆ–åˆ©ç”¨ Python çš„å†…ç½®å‡½æ•°vars() è·å–. dict ã€‚\n11.9 ä¸€äº›ç›¸å…³çš„å†…ç½®å‡½æ•°ï¼ˆBIFï¼‰\nissubclass(class, classinfo) æ–¹æ³•ç”¨äºåˆ¤æ–­å‚æ•° class æ˜¯å¦æ˜¯ç±»å‹å‚æ•° classinfo çš„å­ç±»ã€‚\nä¸€ä¸ªç±»è¢«è®¤ä¸ºæ˜¯å…¶è‡ªèº«çš„å­ç±»ã€‚\nclassinfo å¯ä»¥æ˜¯ç±»å¯¹è±¡çš„å…ƒç»„ï¼Œåªè¦classæ˜¯å…¶ä¸­ä»»ä½•ä¸€ä¸ªå€™é€‰ç±»çš„å­ç±»ï¼Œåˆ™è¿”å›True ã€‚\n\nclass A:\n\tpass\nclass B(A):\n\tpass\nprint(issubclass(B, A)) # True\nprint(issubclass(B, B)) # True\nprint(issubclass(A, B)) # False\nprint(issubclass(B, object)) # True\n\nisinstance(object, classinfo) æ–¹æ³•ç”¨äºåˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯ä¸€ä¸ªå·²çŸ¥çš„ç±»å‹ï¼Œç±»ä¼¼type() ã€‚\ntype() ä¸ä¼šè®¤ä¸ºå­ç±»æ˜¯ä¸€ç§çˆ¶ç±»ç±»å‹ï¼Œä¸è€ƒè™‘ç»§æ‰¿å…³ç³»ã€‚\nisinstance() ä¼šè®¤ä¸ºå­ç±»æ˜¯ä¸€ç§çˆ¶ç±»ç±»å‹ï¼Œè€ƒè™‘ç»§æ‰¿å…³ç³»ã€‚\nå¦‚æœç¬¬ä¸€ä¸ªå‚æ•°ä¸æ˜¯å¯¹è±¡ï¼Œåˆ™æ°¸è¿œè¿”å›False ã€‚\nå¦‚æœç¬¬äºŒä¸ªå‚æ•°ä¸æ˜¯ç±»æˆ–è€…ç”±ç±»å¯¹è±¡ç»„æˆçš„å…ƒç»„ï¼Œä¼šæŠ›å‡ºä¸€ä¸ªTypeError å¼‚å¸¸ã€‚\n\na = 2\nprint(isinstance(a, int)) # True\nprint(isinstance(a, str)) # False\nprint(isinstance(a, (str, int, list))) # True\nclass A:\npass\nclass B(A):\npass\nprint(isinstance(A(), A)) # True\nprint(type(A()) == A) # True\nprint(isinstance(B(), A)) # True\nprint(type(B()) == A) # False\n\nhasattr(object, name) ç”¨äºåˆ¤æ–­å¯¹è±¡æ˜¯å¦åŒ…å«å¯¹åº”çš„å±æ€§ã€‚\n\nclass Coordinate:\n    x = 10\n    y = -5\n    z = 0\npoint1 = Coordinate()\nprint(hasattr(point1, 'x')) # True\nprint(hasattr(point1, 'y')) # True\nprint(hasattr(point1, 'z')) # True\nprint(hasattr(point1, 'no')) # False\n\ngetattr(object, name[, default]) ç”¨äºè¿”å›ä¸€ä¸ªå¯¹è±¡å±æ€§å€¼ã€‚\n\nclass A(object):\n\tbar = 1\na = A()\nprint(getattr(a, 'bar')) # 1\nprint(getattr(a, 'bar2', 3)) # 3\nprint(getattr(a, 'bar2'))\n# AttributeError: 'A' object has no attribute 'bar2'\n\nsetattr(object, name, value) å¯¹åº”å‡½æ•° getattr() ï¼Œç”¨äºè®¾ç½®å±æ€§å€¼ï¼Œè¯¥å±æ€§ä¸ä¸€å®šæ˜¯å­˜åœ¨çš„ã€‚\n\nclass A(object):\nbar = 1\na = A()\nprint(getattr(a, 'bar')) # 1\nsetattr(a, 'bar', 5)\nprint(a.bar) # 5\nsetattr(a, \"age\", 28)\nprint(a.age) # 28\n\ndelattr(object, name) ç”¨äºåˆ é™¤å±æ€§ã€‚\n\nclass property([fget[, fset[, fdel[, doc]]]]) ç”¨äºåœ¨æ–°å¼ç±»ä¸­è¿”å›å±æ€§å€¼ã€‚a. fget â€” è·å–å±æ€§å€¼çš„å‡½æ•°b. fset â€” è®¾ç½®å±æ€§å€¼çš„å‡½æ•°c. fdel â€” åˆ é™¤å±æ€§å€¼å‡½æ•°d. doc â€” å±æ€§æè¿°ä¿¡æ¯\n\n\nclass C(object):\n    def __init__(self):\n    \tself.__x = None\n    def getx(self):\n    \treturn self.__x\n    def setx(self, value):\n    \tself.__x = value\n    def delx(self):\n    \tdel self.__x\n    x = property(getx, setx, delx, \"I'm the 'x' property.\")\ncc = C()\ncc.x = 2\nprint(cc.x) # 2\n12 é­”æ³•æ–¹æ³•é­”æ³•æ–¹æ³•æ€»æ˜¯è¢«åŒä¸‹åˆ’çº¿åŒ…å›´ï¼Œä¾‹å¦‚init ã€‚é­”æ³•æ–¹æ³•æ˜¯é¢å‘å¯¹è±¡çš„ Python çš„ä¸€åˆ‡ï¼Œå¦‚æœä½ ä¸çŸ¥é“é­”æ³•æ–¹æ³•ï¼Œè¯´æ˜ä½ è¿˜æ²¡èƒ½æ„è¯†åˆ°é¢å‘å¯¹è±¡çš„ Python çš„å¼ºå¤§ã€‚é­”æ³•æ–¹æ³•çš„â€œé­”åŠ›â€ä½“ç°åœ¨å®ƒä»¬æ€»èƒ½å¤Ÿåœ¨é€‚å½“çš„æ—¶å€™è¢«è‡ªåŠ¨è°ƒç”¨ã€‚é­”æ³•æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°åº”ä¸ºcls ï¼ˆç±»æ–¹æ³•ï¼‰ æˆ–è€…self ï¼ˆå®ä¾‹æ–¹æ³•ï¼‰ã€‚\n\ncls ï¼šä»£è¡¨ä¸€ä¸ªç±»çš„åç§°\nself ï¼šä»£è¡¨ä¸€ä¸ªå®ä¾‹å¯¹è±¡çš„åç§°\n\n12.1 åŸºæœ¬çš„é­”æ³•æ–¹æ³•init(self[, â€¦]):æ„é€ å™¨ï¼Œå½“ä¸€ä¸ªå®ä¾‹è¢«åˆ›å»ºçš„æ—¶å€™è°ƒç”¨çš„åˆå§‹åŒ–æ–¹æ³•\nclass Rectangle:\n    def __init__(self, x, y):\n    \tself.x = x\n    \tself.y = y\n__new__(cls[, â€¦])\n\nnew æ˜¯åœ¨ä¸€ä¸ªå¯¹è±¡å®ä¾‹åŒ–çš„æ—¶å€™æ‰€è°ƒç”¨çš„ç¬¬ä¸€ä¸ªæ–¹æ³•ï¼Œåœ¨è°ƒç”¨init åˆå§‹åŒ–å‰ï¼Œå…ˆè°ƒç”¨new ã€‚\nnew è‡³å°‘è¦æœ‰ä¸€ä¸ªå‚æ•°cls ï¼Œä»£è¡¨è¦å®ä¾‹åŒ–çš„ç±»ï¼Œæ­¤å‚æ•°åœ¨å®ä¾‹åŒ–æ—¶ç”± Python è§£é‡Šå™¨è‡ªåŠ¨æä¾›ï¼Œåé¢çš„å‚æ•°ç›´æ¥ä¼ é€’ç»™init ã€‚\nnew å¯¹å½“å‰ç±»è¿›è¡Œäº†å®ä¾‹åŒ–ï¼Œå¹¶å°†å®ä¾‹è¿”å›ï¼Œä¼ ç»™init çš„self ã€‚ä½†æ˜¯ï¼Œæ‰§è¡Œäº†new ï¼Œå¹¶ä¸ä¸€å®šä¼šè¿›å…¥init ï¼Œåªæœ‰new è¿”å›äº†ï¼Œå½“å‰ç±»cls çš„å®ä¾‹ï¼Œå½“å‰ç±»çš„init æ‰ä¼šè¿›å…¥ã€‚\nè‹¥new æ²¡æœ‰æ­£ç¡®è¿”å›å½“å‰ç±»cls çš„å®ä¾‹ï¼Œé‚£init æ˜¯ä¸ä¼šè¢«è°ƒç”¨çš„ï¼Œå³ä½¿æ˜¯çˆ¶ç±»çš„å®ä¾‹ä¹Ÿä¸è¡Œï¼Œå°†æ²¡æœ‰init è¢«è°ƒç”¨ã€‚\nå¯åˆ©ç”¨new å®ç°å•ä¾‹æ¨¡å¼ã€‚\nnew æ–¹æ³•ä¸»è¦æ˜¯å½“ä½ ç»§æ‰¿ä¸€äº›ä¸å¯å˜çš„ class æ—¶ï¼ˆæ¯”å¦‚int, str, tuple ï¼‰ï¼Œ æä¾›ç»™ä½ ä¸€ä¸ªè‡ªå®šä¹‰è¿™äº›ç±»çš„å®ä¾‹åŒ–è¿‡ç¨‹çš„é€”å¾„ã€‚\n\n__del__(self)\nææ„å™¨ï¼Œå½“ä¸€ä¸ªå¯¹è±¡å°†è¦è¢«ç³»ç»Ÿå›æ”¶ä¹‹æ—¶è°ƒç”¨çš„æ–¹æ³•ã€‚        Python é‡‡ç”¨è‡ªåŠ¨å¼•ç”¨è®¡æ•°ï¼ˆARCï¼‰æ–¹å¼æ¥å›æ”¶å¯¹è±¡æ‰€å ç”¨çš„ç©ºé—´ï¼Œå½“ç¨‹åºä¸­æœ‰ä¸€ä¸ªå˜é‡å¼•ç”¨è¯¥ Python å¯¹è±¡æ—¶ï¼ŒPythonä¼šè‡ªåŠ¨ä¿è¯è¯¥å¯¹è±¡å¼•ç”¨è®¡æ•°ä¸º 1ï¼›å½“ç¨‹åºä¸­æœ‰ä¸¤ä¸ªå˜é‡å¼•ç”¨è¯¥ Python å¯¹è±¡æ—¶ï¼ŒPython ä¼šè‡ªåŠ¨ä¿è¯è¯¥å¯¹è±¡å¼•ç”¨è®¡æ•°ä¸º 2ï¼Œä¾æ­¤ç±»æ¨ï¼Œå¦‚æœä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨è®¡æ•°å˜æˆäº† 0ï¼Œåˆ™è¯´æ˜ç¨‹åºä¸­ä¸å†æœ‰å˜é‡å¼•ç”¨è¯¥å¯¹è±¡ï¼Œè¡¨æ˜ç¨‹åºä¸å†éœ€è¦è¯¥å¯¹è±¡ï¼Œå› æ­¤Python å°±ä¼šå›æ”¶è¯¥å¯¹è±¡ã€‚        å¤§éƒ¨åˆ†æ—¶å€™ï¼ŒPython çš„ ARC éƒ½èƒ½å‡†ç¡®ã€é«˜æ•ˆåœ°å›æ”¶ç³»ç»Ÿä¸­çš„æ¯ä¸ªå¯¹è±¡ã€‚ä½†å¦‚æœç³»ç»Ÿä¸­å‡ºç°å¾ªç¯å¼•ç”¨çš„æƒ…å†µï¼Œæ¯”å¦‚å¯¹è±¡a æŒæœ‰ä¸€ä¸ªå®ä¾‹å˜é‡å¼•ç”¨å¯¹è±¡ bï¼Œè€Œå¯¹è±¡ b åˆæŒæœ‰ä¸€ä¸ªå®ä¾‹å˜é‡å¼•ç”¨å¯¹è±¡ aï¼Œæ­¤æ—¶ä¸¤ä¸ªå¯¹è±¡çš„å¼•ç”¨è®¡æ•°éƒ½æ˜¯ 1ï¼Œè€Œå®é™…ä¸Šç¨‹åºå·²ç»ä¸å†æœ‰å˜é‡å¼•ç”¨å®ƒä»¬ï¼Œç³»ç»Ÿåº”è¯¥å›æ”¶å®ƒä»¬ï¼Œæ­¤æ—¶ Python çš„åƒåœ¾å›æ”¶å™¨å°±å¯èƒ½æ²¡é‚£ä¹ˆå¿«ï¼Œè¦ç­‰ä¸“é—¨çš„å¾ªç¯åƒåœ¾å›æ”¶å™¨ï¼ˆCyclic Garbage Collectorï¼‰æ¥æ£€æµ‹å¹¶å›æ”¶è¿™ç§å¼•ç”¨å¾ªç¯ã€‚\n__str__(self) :\n\nå½“ä½ æ‰“å°ä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œè§¦å‘str\nå½“ä½ ä½¿ç”¨%s æ ¼å¼åŒ–çš„æ—¶å€™ï¼Œè§¦å‘str\nstr å¼ºè½¬æ•°æ®ç±»å‹çš„æ—¶å€™ï¼Œè§¦å‘str\n\n__repr__(self):\n\nrepr æ˜¯str çš„å¤‡èƒ\næœ‰str çš„æ—¶å€™æ‰§è¡Œstr ,æ²¡æœ‰å®ç°str çš„æ—¶å€™ï¼Œæ‰§è¡Œrepr\nrepr(obj) å†…ç½®å‡½æ•°å¯¹åº”çš„ç»“æœæ˜¯repr çš„è¿”å›å€¼\nå½“ä½ ä½¿ç”¨%r æ ¼å¼åŒ–çš„æ—¶å€™ è§¦å‘repr\n\nstr(self) çš„è¿”å›ç»“æœå¯è¯»æ€§å¼ºã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ str çš„æ„ä¹‰æ˜¯å¾—åˆ°ä¾¿äºäººä»¬é˜…è¯»çš„ä¿¡æ¯ï¼Œå°±åƒä¸‹é¢çš„ â€˜2019-10-11â€™ ä¸€æ ·ã€‚repr(self) çš„è¿”å›ç»“æœåº”æ›´å‡†ç¡®ã€‚æ€ä¹ˆè¯´ï¼Œ repr å­˜åœ¨çš„ç›®çš„åœ¨äºè°ƒè¯•ï¼Œä¾¿äºå¼€å‘è€…ä½¿ç”¨ã€‚\n12.2 ç®—æœ¯è¿ç®—ç¬¦ç±»å‹å·¥å‚å‡½æ•°ï¼ŒæŒ‡çš„æ˜¯ä¸é€šè¿‡ç±»è€Œæ˜¯é€šè¿‡å‡½æ•°æ¥åˆ›å»ºå¯¹è±¡ã€‚\n\n__add__(self, other) å®šä¹‰åŠ æ³•çš„è¡Œä¸ºï¼š +\n__sub__(self, other) å®šä¹‰å‡æ³•çš„è¡Œä¸ºï¼š -\n__mul__(self, other) å®šä¹‰ä¹˜æ³•çš„è¡Œä¸ºï¼š *\n__truediv__(self, other) å®šä¹‰çœŸé™¤æ³•çš„è¡Œä¸ºï¼š /\n__floordiv__(self, other) å®šä¹‰æ•´æ•°é™¤æ³•çš„è¡Œä¸ºï¼š //\n__mod__(self, other) å®šä¹‰å–æ¨¡ç®—æ³•çš„è¡Œä¸ºï¼š %\n__divmod__(self, other) å®šä¹‰å½“è¢« divmod() è°ƒç”¨æ—¶çš„è¡Œä¸º\ndivmod(a, b) æŠŠé™¤æ•°å’Œä½™æ•°è¿ç®—ç»“æœç»“åˆèµ·æ¥ï¼Œè¿”å›ä¸€ä¸ªåŒ…å«å•†å’Œä½™æ•°çš„å…ƒç»„(a // b, a % b) ã€‚\n__mul__(self, other) å®šä¹‰ä¹˜æ³•çš„è¡Œä¸ºï¼š *\n__truediv__(self, other) å®šä¹‰çœŸé™¤æ³•çš„è¡Œä¸ºï¼š /\n__floordiv__(self, other) å®šä¹‰æ•´æ•°é™¤æ³•çš„è¡Œä¸ºï¼š //\n__mod__(self, other) å®šä¹‰å–æ¨¡ç®—æ³•çš„è¡Œä¸ºï¼š %\n__divmod__(self, other) å®šä¹‰å½“è¢« divmod() è°ƒç”¨æ—¶çš„è¡Œä¸º\ndivmod(a, b) æŠŠé™¤æ•°å’Œä½™æ•°è¿ç®—ç»“æœç»“åˆèµ·æ¥ï¼Œè¿”å›ä¸€ä¸ªåŒ…å«å•†å’Œä½™æ•°çš„å…ƒç»„(a // b, a % b) ã€‚\n\n12.3 åç®—æœ¯è¿ç®—ç¬¦åè¿ç®—é­”æ–¹æ–¹æ³•ï¼Œä¸ç®—æœ¯è¿ç®—ç¬¦ä¿æŒä¸€ä¸€å¯¹åº”ï¼Œä¸åŒä¹‹å¤„å°±æ˜¯åè¿ç®—çš„é­”æ³•æ–¹æ³•å¤šäº†ä¸€ä¸ªâ€œrâ€ã€‚å½“æ–‡ä»¶å·¦æ“ä½œä¸æ”¯æŒç›¸åº”çš„æ“ä½œæ—¶è¢«è°ƒç”¨ã€‚\n\n__radd__(self, other) å®šä¹‰åŠ æ³•çš„è¡Œä¸ºï¼š +\n__rsub__(self, other) å®šä¹‰å‡æ³•çš„è¡Œä¸ºï¼š -\n__rmul__(self, other) å®šä¹‰ä¹˜æ³•çš„è¡Œä¸ºï¼š *\n__rtruediv__(self, other) å®šä¹‰çœŸé™¤æ³•çš„è¡Œä¸ºï¼š /\n__rfloordiv__(self, other) å®šä¹‰æ•´æ•°é™¤æ³•çš„è¡Œä¸ºï¼š //\n__rmod__(self, other) å®šä¹‰å–æ¨¡ç®—æ³•çš„è¡Œä¸ºï¼š %\n__rdivmod__(self, other) å®šä¹‰å½“è¢« divmod() è°ƒç”¨æ—¶çš„è¡Œä¸º\n__rpow__(self, other[, module]) å®šä¹‰å½“è¢« power() è°ƒç”¨æˆ– ** è¿ç®—æ—¶çš„è¡Œä¸º\n__rlshift__(self, other) å®šä¹‰æŒ‰ä½å·¦ç§»ä½çš„è¡Œä¸ºï¼š &lt;&lt;\n__rrshift__(self, other) å®šä¹‰æŒ‰ä½å³ç§»ä½çš„è¡Œä¸ºï¼š &gt;&gt;\n__rand__(self, other) å®šä¹‰æŒ‰ä½ä¸æ“ä½œçš„è¡Œä¸ºï¼š &amp;\n__rxor__(self, other) å®šä¹‰æŒ‰ä½å¼‚æˆ–æ“ä½œçš„è¡Œä¸ºï¼š ^\n__ror__(self, other) å®šä¹‰æŒ‰ä½æˆ–æ“ä½œçš„è¡Œä¸ºï¼š |\n\na + bè¿™é‡ŒåŠ æ•°æ˜¯a ï¼Œè¢«åŠ æ•°æ˜¯b ï¼Œå› æ­¤æ˜¯a ä¸»åŠ¨ï¼Œåè¿ç®—å°±æ˜¯å¦‚æœa å¯¹è±¡çš„__add() æ–¹æ³•æ²¡æœ‰å®ç°æˆ–è€…ä¸æ”¯æŒç›¸åº”çš„æ“ä½œï¼Œé‚£ä¹ˆ Python å°±ä¼šè°ƒç”¨b çš„\\radd__() æ–¹æ³•ã€‚\nclass Nint(int):\n    def __radd__(self, other):\n    \treturn int.__sub__(other, self) # æ³¨æ„ self åœ¨åé¢\na &#x3D; Nint(5)\nb &#x3D; Nint(3)\nprint(a + b) # 8\nprint(1 + b) # -2\n12.4 å¢é‡èµ‹å€¼è¿ç®—ç¬¦\n__iadd__(self, other) å®šä¹‰èµ‹å€¼åŠ æ³•çš„è¡Œä¸ºï¼š +=\n__isub__(self, other) å®šä¹‰èµ‹å€¼å‡æ³•çš„è¡Œä¸ºï¼š -=\n__imul__(self, other) å®šä¹‰èµ‹å€¼ä¹˜æ³•çš„è¡Œä¸ºï¼š *=\n__itruediv__(self, other) å®šä¹‰èµ‹å€¼çœŸé™¤æ³•çš„è¡Œä¸ºï¼š /=\n__ifloordiv__(self, other) å®šä¹‰èµ‹å€¼æ•´æ•°é™¤æ³•çš„è¡Œä¸ºï¼š //=\n__imod__(self, other) å®šä¹‰èµ‹å€¼å–æ¨¡ç®—æ³•çš„è¡Œä¸ºï¼š %=\n__ipow__(self, other[, modulo]) å®šä¹‰èµ‹å€¼å¹‚è¿ç®—çš„è¡Œä¸ºï¼š **=\n__ilshift__(self, other) å®šä¹‰èµ‹å€¼æŒ‰ä½å·¦ç§»ä½çš„è¡Œä¸ºï¼š &lt;&lt;=\n__irshift__(self, other) å®šä¹‰èµ‹å€¼æŒ‰ä½å³ç§»ä½çš„è¡Œä¸ºï¼š &gt;&gt;=\n__iand__(self, other) å®šä¹‰èµ‹å€¼æŒ‰ä½ä¸æ“ä½œçš„è¡Œä¸ºï¼š &amp;=\n__ixor__(self, other) å®šä¹‰èµ‹å€¼æŒ‰ä½å¼‚æˆ–æ“ä½œçš„è¡Œä¸ºï¼š ^=\n__ior__(self, other) å®šä¹‰èµ‹å€¼æŒ‰ä½æˆ–æ“ä½œçš„è¡Œä¸ºï¼š |=\n\n12.5 ä¸€å…ƒè¿ç®—ç¬¦\n__neg__(self) å®šä¹‰æ­£å·çš„è¡Œä¸ºï¼š +x\n__pos__(self) å®šä¹‰è´Ÿå·çš„è¡Œä¸ºï¼š -x\n__abs__(self) å®šä¹‰å½“è¢«abs() è°ƒç”¨æ—¶çš„è¡Œä¸º\n__invert__(self) å®šä¹‰æŒ‰ä½æ±‚åçš„è¡Œä¸ºï¼š ~x\n\n12.6 å±æ€§è®¿é—®__getattr(self, name) : å®šä¹‰å½“ç”¨æˆ·è¯•å›¾è·å–ä¸€ä¸ªä¸å­˜åœ¨çš„å±æ€§æ—¶çš„è¡Œä¸ºã€‚__getattribute__(self, name) ï¼šå®šä¹‰å½“è¯¥ç±»çš„å±æ€§è¢«è®¿é—®æ—¶çš„è¡Œä¸ºï¼ˆå…ˆè°ƒç”¨è¯¥æ–¹æ³•ï¼ŒæŸ¥çœ‹æ˜¯å¦å­˜åœ¨è¯¥å±æ€§ï¼Œè‹¥ä¸å­˜åœ¨ï¼Œæ¥ç€å»è°ƒç”¨\\getattr__ ï¼‰ã€‚__setattr__(self, name, value) ï¼šå®šä¹‰å½“ä¸€ä¸ªå±æ€§è¢«è®¾ç½®æ—¶çš„è¡Œä¸ºã€‚__delattr__(self, name) ï¼šå®šä¹‰å½“ä¸€ä¸ªå±æ€§è¢«åˆ é™¤æ—¶çš„è¡Œä¸ºã€‚\n12.7 æè¿°ç¬¦æè¿°ç¬¦å°±æ˜¯å°†æŸç§ç‰¹æ®Šç±»å‹çš„ç±»çš„å®ä¾‹æŒ‡æ´¾ç»™å¦ä¸€ä¸ªç±»çš„å±æ€§ã€‚\n\n__get__(self, instance, owner) ç”¨äºè®¿é—®å±æ€§ï¼Œå®ƒè¿”å›å±æ€§çš„å€¼ã€‚\n\n__set__(self, instance, value) å°†åœ¨å±æ€§åˆ†é…æ“ä½œä¸­è°ƒç”¨ï¼Œä¸è¿”å›ä»»ä½•å†…å®¹ã€‚\n\n__del__(self, instance) æ§åˆ¶åˆ é™¤æ“ä½œï¼Œä¸è¿”å›ä»»ä½•å†…å®¹ã€‚\n\n\n12.8 å®šåˆ¶åºåˆ—åè®®ï¼ˆProtocolsï¼‰ä¸å…¶å®ƒç¼–ç¨‹è¯­è¨€ä¸­çš„æ¥å£å¾ˆç›¸ä¼¼ï¼Œå®ƒè§„å®šä½ å“ªäº›æ–¹æ³•å¿…é¡»è¦å®šä¹‰ã€‚ç„¶è€Œï¼Œåœ¨ Python ä¸­çš„åè®®å°±æ˜¾å¾—ä¸é‚£ä¹ˆæ­£å¼ã€‚äº‹å®ä¸Šï¼Œåœ¨ Python ä¸­ï¼Œåè®®æ›´åƒæ˜¯ä¸€ç§æŒ‡å—ã€‚å®¹å™¨ç±»å‹çš„åè®®\n\nå¦‚æœè¯´ä½ å¸Œæœ›å®šåˆ¶çš„å®¹å™¨æ˜¯ä¸å¯å˜çš„è¯ï¼Œä½ åªéœ€è¦å®šä¹‰__len() å’Œ\\getitem__() æ–¹æ³•ã€‚\nå¦‚æœä½ å¸Œæœ›å®šåˆ¶çš„å®¹å™¨æ˜¯å¯å˜çš„è¯ï¼Œé™¤äº†__len() å’Œ\\getitem() æ–¹æ³•ï¼Œä½ è¿˜éœ€è¦å®šä¹‰\\setitem()å’Œ\\delitem__() ä¸¤ä¸ªæ–¹æ³•ã€‚\n\n__len__(self) å®šä¹‰å½“è¢«len() è°ƒç”¨æ—¶çš„è¡Œä¸ºï¼ˆè¿”å›å®¹å™¨ä¸­å…ƒç´ çš„ä¸ªæ•°ï¼‰ã€‚\n\n__getitem__(self, key) å®šä¹‰è·å–å®¹å™¨ä¸­å…ƒç´ çš„è¡Œä¸ºï¼Œç›¸å½“äºself[key] ã€‚\n__setitem__(self, key, value) å®šä¹‰è®¾ç½®å®¹å™¨ä¸­æŒ‡å®šå…ƒç´ çš„è¡Œä¸ºï¼Œç›¸å½“äºself[key] = value ã€‚\n__delitem__(self, key) å®šä¹‰åˆ é™¤å®¹å™¨ä¸­æŒ‡å®šå…ƒç´ çš„è¡Œä¸ºï¼Œç›¸å½“äºdel self[key] ã€‚\n\n12.9 è¿­ä»£å™¨\nè¿­ä»£æ˜¯ Python æœ€å¼ºå¤§çš„åŠŸèƒ½ä¹‹ä¸€ï¼Œæ˜¯è®¿é—®é›†åˆå…ƒç´ çš„ä¸€ç§æ–¹å¼ã€‚\nè¿­ä»£å™¨æ˜¯ä¸€ä¸ªå¯ä»¥è®°ä½éå†çš„ä½ç½®çš„å¯¹è±¡ã€‚\nè¿­ä»£å™¨å¯¹è±¡ä»é›†åˆçš„ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹è®¿é—®ï¼Œç›´åˆ°æ‰€æœ‰çš„å…ƒç´ è¢«è®¿é—®å®Œç»“æŸã€‚\nè¿­ä»£å™¨åªèƒ½å¾€å‰ä¸ä¼šåé€€ã€‚\nå­—ç¬¦ä¸²ï¼Œåˆ—è¡¨æˆ–å…ƒç»„å¯¹è±¡éƒ½å¯ç”¨äºåˆ›å»ºè¿­ä»£å™¨ï¼š\n\nstring = 'lsgogroup'\nfor c in string:\n\tprint(c)\n\nè¿­ä»£å™¨æœ‰ä¸¤ä¸ªåŸºæœ¬çš„æ–¹æ³•ï¼š iter() å’Œ next() ã€‚\niter(object) å‡½æ•°ç”¨æ¥ç”Ÿæˆè¿­ä»£å™¨ã€‚\nnext(iterator[, default]) è¿”å›è¿­ä»£å™¨çš„ä¸‹ä¸€ä¸ªé¡¹ç›®ã€‚\niterator â€” å¯è¿­ä»£å¯¹è±¡\ndefault â€” å¯é€‰ï¼Œç”¨äºè®¾ç½®åœ¨æ²¡æœ‰ä¸‹ä¸€ä¸ªå…ƒç´ æ—¶è¿”å›è¯¥é»˜è®¤å€¼ï¼Œå¦‚æœä¸è®¾ç½®ï¼Œåˆæ²¡æœ‰ä¸‹ä¸€ä¸ªå…ƒç´ åˆ™ä¼šè§¦å‘StopIteration å¼‚å¸¸ã€‚\n\nlinks = &#123;'B': 'ç™¾åº¦', 'A': 'é˜¿é‡Œ', 'T': 'è…¾è®¯'&#125;\nit = iter(links)\nprint(next(it)) # B\nprint(next(it)) # A\nprint(next(it)) # T\nprint(next(it)) # StopIteration\n\nit = iter(links)\nwhile True:\n    try:\n    \teach = next(it)\n    except StopIteration:\n    \tbreak\n    print(each)\n# B\n# A\n# T\næŠŠä¸€ä¸ªç±»ä½œä¸ºä¸€ä¸ªè¿­ä»£å™¨ä½¿ç”¨éœ€è¦åœ¨ç±»ä¸­å®ç°ä¸¤ä¸ªé­”æ³•æ–¹æ³• iter() ä¸ next() ã€‚\n\n__iter(self) å®šä¹‰å½“è¿­ä»£å®¹å™¨ä¸­çš„å…ƒç´ çš„è¡Œä¸ºï¼Œè¿”å›ä¸€ä¸ªç‰¹æ®Šçš„è¿­ä»£å™¨å¯¹è±¡ï¼Œ è¿™ä¸ªè¿­ä»£å™¨å¯¹è±¡å®ç°äº†next__() æ–¹æ³•å¹¶é€šè¿‡ StopIteration å¼‚å¸¸æ ‡è¯†è¿­ä»£çš„å®Œæˆã€‚\n__next__() è¿”å›ä¸‹ä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡ã€‚\nStopIteration å¼‚å¸¸ç”¨äºæ ‡è¯†è¿­ä»£çš„å®Œæˆï¼Œé˜²æ­¢å‡ºç°æ— é™å¾ªç¯çš„æƒ…å†µï¼Œåœ¨ next() æ–¹æ³•ä¸­æˆ‘ä»¬å¯ä»¥è®¾ç½®åœ¨å®ŒæˆæŒ‡å®šå¾ªç¯æ¬¡æ•°åè§¦å‘ StopIteration å¼‚å¸¸æ¥ç»“æŸè¿­ä»£ã€‚\n\n12.10 ç”Ÿæˆå™¨\nåœ¨ Python ä¸­ï¼Œä½¿ç”¨äº† yield çš„å‡½æ•°è¢«ç§°ä¸ºç”Ÿæˆå™¨ï¼ˆgeneratorï¼‰ã€‚\nè·Ÿæ™®é€šå‡½æ•°ä¸åŒçš„æ˜¯ï¼Œç”Ÿæˆå™¨æ˜¯ä¸€ä¸ªè¿”å›è¿­ä»£å™¨çš„å‡½æ•°ï¼Œåªèƒ½ç”¨äºè¿­ä»£æ“ä½œï¼Œæ›´ç®€å•ç‚¹ç†è§£ç”Ÿæˆå™¨å°±æ˜¯ä¸€ä¸ªè¿­ä»£å™¨ã€‚\nåœ¨è°ƒç”¨ç”Ÿæˆå™¨è¿è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œæ¯æ¬¡é‡åˆ° yield æ—¶å‡½æ•°ä¼šæš‚åœå¹¶ä¿å­˜å½“å‰æ‰€æœ‰çš„è¿è¡Œä¿¡æ¯ï¼Œè¿”å› yield çš„å€¼, å¹¶åœ¨ä¸‹ä¸€æ¬¡æ‰§è¡Œ next() æ–¹æ³•æ—¶ä»å½“å‰ä½ç½®ç»§ç»­è¿è¡Œã€‚\nè°ƒç”¨ä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•°ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªè¿­ä»£å™¨å¯¹è±¡ã€‚\n\n13 æ¨¡å—â€‹        åœ¨å‰é¢æˆ‘ä»¬è„šæœ¬æ˜¯ç”¨ Python è§£é‡Šå™¨æ¥ç¼–ç¨‹ï¼Œå¦‚æœä½ ä» Python è§£é‡Šå™¨é€€å‡ºå†è¿›å…¥ï¼Œé‚£ä¹ˆä½ å®šä¹‰çš„æ‰€æœ‰çš„æ–¹æ³•å’Œå˜é‡å°±éƒ½æ¶ˆå¤±äº†ã€‚â€‹        ä¸ºæ­¤ Python æä¾›äº†ä¸€ä¸ªåŠæ³•ï¼ŒæŠŠè¿™äº›å®šä¹‰å­˜æ”¾åœ¨æ–‡ä»¶ä¸­ï¼Œä¸ºä¸€äº›è„šæœ¬æˆ–è€…äº¤äº’å¼çš„è§£é‡Šå™¨å®ä¾‹ä½¿ç”¨ï¼Œè¿™ä¸ªæ–‡ä»¶è¢«ç§°ä¸ºæ¨¡å—ï¼ˆModuleï¼‰ã€‚â€‹        æ¨¡å—æ˜¯ä¸€ä¸ªåŒ…å«æ‰€æœ‰ä½ å®šä¹‰çš„å‡½æ•°å’Œå˜é‡çš„æ–‡ä»¶ï¼Œå…¶åç¼€åæ˜¯.py ã€‚æ¨¡å—å¯ä»¥è¢«åˆ«çš„ç¨‹åºå¼•å…¥ï¼Œä»¥ä½¿ç”¨è¯¥æ¨¡å—ä¸­çš„å‡½æ•°ç­‰åŠŸèƒ½ã€‚è¿™ä¹Ÿæ˜¯ä½¿ç”¨ Python æ ‡å‡†åº“çš„æ–¹æ³•ã€‚\n13.1 ä»€ä¹ˆæ˜¯æ¨¡å—\nå®¹å™¨ -&gt; æ•°æ®çš„å°è£…\nå‡½æ•° -&gt; è¯­å¥çš„å°è£…\nç±» -&gt; æ–¹æ³•å’Œå±æ€§çš„å°è£…\næ¨¡å— -&gt; ç¨‹åºæ–‡ä»¶\n\n13.2 å‘½åç©ºé—´å‘½åç©ºé—´å› ä¸ºå¯¹è±¡çš„ä¸åŒï¼Œä¹Ÿæœ‰æ‰€åŒºåˆ«ï¼Œå¯ä»¥åˆ†ä¸ºå¦‚ä¸‹å‡ ç§ï¼š\n\nå†…ç½®å‘½åç©ºé—´ï¼ˆBuilt-in Namespacesï¼‰ï¼šPython è¿è¡Œèµ·æ¥ï¼Œå®ƒä»¬å°±å­˜åœ¨äº†ã€‚å†…ç½®å‡½æ•°çš„å‘½åç©ºé—´éƒ½å±äºå†…ç½®å‘½åç©ºé—´ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä»»ä½•ç¨‹åºä¸­ç›´æ¥è¿è¡Œå®ƒä»¬ï¼Œæ¯”å¦‚id() ,ä¸éœ€è¦åšä»€ä¹ˆæ“ä½œï¼Œæ‹¿è¿‡æ¥å°±ç›´æ¥ä½¿ç”¨äº†ã€‚\nå…¨å±€å‘½åç©ºé—´ï¼ˆModuleï¼šGlobal Namespacesï¼‰ï¼šæ¯ä¸ªæ¨¡å—åˆ›å»ºå®ƒè‡ªå·±æ‰€æ‹¥æœ‰çš„å…¨å±€å‘½åç©ºé—´ï¼Œä¸åŒæ¨¡å—çš„å…¨å±€å‘½åç©ºé—´å½¼æ­¤ç‹¬ç«‹ï¼Œä¸åŒæ¨¡å—ä¸­ç›¸åŒåç§°çš„å‘½åç©ºé—´ï¼Œä¹Ÿä¼šå› ä¸ºæ¨¡å—çš„ä¸åŒè€Œä¸ç›¸äº’å¹²æ‰°ã€‚\næœ¬åœ°å‘½åç©ºé—´ï¼ˆFunction &amp; Classï¼šLocal Namespacesï¼‰ï¼šæ¨¡å—ä¸­æœ‰å‡½æ•°æˆ–è€…ç±»ï¼Œæ¯ä¸ªå‡½æ•°æˆ–è€…ç±»æ‰€å®šä¹‰çš„å‘½åç©ºé—´å°±æ˜¯æœ¬åœ°å‘½åç©ºé—´ã€‚å¦‚æœå‡½æ•°è¿”å›äº†ç»“æœæˆ–è€…æŠ›å‡ºå¼‚å¸¸ï¼Œåˆ™æœ¬åœ°å‘½åç©ºé—´ä¹Ÿç»“æŸäº†ã€‚\n\nç¨‹åºåœ¨æŸ¥è¯¢ä¸Šè¿°ä¸‰ç§å‘½åç©ºé—´çš„æ—¶å€™ï¼Œå°±æŒ‰ç…§ä»é‡Œåˆ°å¤–çš„é¡ºåºï¼Œå³ï¼šLocal Namespaces â€”&gt; Global Namesspaces â€”&gt; Built-inNamesspacesã€‚\nimport hello\nhello.hi() # Hi everyone, I love lsgogroup!\nhi() # NameError: name 'hi' is not defined\n13.3 å¯¼å…¥æ¨¡å—\nç¬¬ä¸€ç§ï¼šimport æ¨¡å—å\nç¬¬äºŒç§ï¼šfrom æ¨¡å—å import å‡½æ•°å\nç¬¬ä¸‰ç§ï¼šimport æ¨¡å—å as æ–°åå­—\n\n13.4 if __name == â€˜\\main__â€™â€‹        å¯¹äºå¾ˆå¤šç¼–ç¨‹è¯­è¨€æ¥è¯´ï¼Œç¨‹åºéƒ½å¿…é¡»è¦æœ‰ä¸€ä¸ªå…¥å£ï¼Œè€Œ Python åˆ™ä¸åŒï¼Œå®ƒå±äºè„šæœ¬è¯­è¨€ï¼Œä¸åƒç¼–è¯‘å‹è¯­è¨€é‚£æ ·å…ˆå°†ç¨‹åºç¼–è¯‘æˆäºŒè¿›åˆ¶å†è¿è¡Œï¼Œè€Œæ˜¯åŠ¨æ€çš„é€è¡Œè§£é‡Šè¿è¡Œã€‚ä¹Ÿå°±æ˜¯ä»è„šæœ¬ç¬¬ä¸€è¡Œå¼€å§‹è¿è¡Œï¼Œæ²¡æœ‰ç»Ÿä¸€çš„å…¥å£ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ª const.py æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š\n13.5 æœç´¢è·¯å¾„å½“è§£é‡Šå™¨é‡åˆ° import è¯­å¥ï¼Œå¦‚æœæ¨¡å—åœ¨å½“å‰çš„æœç´¢è·¯å¾„å°±ä¼šè¢«å¯¼å…¥ã€‚\nimport sys\nprint(sys.path)\n# ['C:\\\\ProgramData\\\\Anaconda3\\\\DLLs', 'C:\\\\ProgramData\\\\Anaconda3\\\\lib',\n'C:\\\\ProgramData\\\\Anaconda3', 'C:\\\\ProgramData\\\\Anaconda3\\\\lib\\\\site-packages',...]\nâ€‹        æˆ‘ä»¬ä½¿ç”¨ import è¯­å¥çš„æ—¶å€™ï¼ŒPython è§£é‡Šå™¨æ˜¯æ€æ ·æ‰¾åˆ°å¯¹åº”çš„æ–‡ä»¶çš„å‘¢ï¼Ÿâ€‹        è¿™å°±æ¶‰åŠåˆ° Python çš„æœç´¢è·¯å¾„ï¼Œæœç´¢è·¯å¾„æ˜¯ç”±ä¸€ç³»åˆ—ç›®å½•åç»„æˆçš„ï¼ŒPython è§£é‡Šå™¨å°±ä¾æ¬¡ä»è¿™äº›ç›®å½•ä¸­å»å¯»æ‰¾æ‰€å¼•å…¥çš„æ¨¡å—ã€‚â€‹        è¿™çœ‹èµ·æ¥å¾ˆåƒç¯å¢ƒå˜é‡ï¼Œäº‹å®ä¸Šï¼Œä¹Ÿå¯ä»¥é€šè¿‡å®šä¹‰ç¯å¢ƒå˜é‡çš„æ–¹å¼æ¥ç¡®å®šæœç´¢è·¯å¾„ã€‚æœç´¢è·¯å¾„æ˜¯åœ¨ Python ç¼–è¯‘æˆ–å®‰è£…çš„æ—¶å€™ç¡®å®šçš„ï¼Œå®‰è£…æ–°çš„åº“åº”è¯¥ä¹Ÿä¼šä¿®æ”¹ã€‚æœç´¢è·¯å¾„è¢«å­˜å‚¨åœ¨ sys æ¨¡å—ä¸­çš„ path å˜é‡ä¸­ã€‚\n13.6 åŒ…ï¼ˆpackageï¼‰åŒ…æ˜¯ä¸€ç§ç®¡ç† Python æ¨¡å—å‘½åç©ºé—´çš„å½¢å¼ï¼Œé‡‡ç”¨â€ç‚¹æ¨¡å—åç§°â€ã€‚åˆ›å»ºåŒ…åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ï¼š\n\nåˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œç”¨äºå­˜æ”¾ç›¸å…³çš„æ¨¡å—ï¼Œæ–‡ä»¶å¤¹çš„åå­—å³åŒ…çš„åå­—ã€‚\nåœ¨æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ª init.py çš„æ¨¡å—æ–‡ä»¶ï¼Œå†…å®¹å¯ä»¥ä¸ºç©ºã€‚\nå°†ç›¸å…³çš„æ¨¡å—æ”¾å…¥æ–‡ä»¶å¤¹ä¸­ã€‚\n\nä¸å¦¨å‡è®¾ä½ æƒ³è®¾è®¡ä¸€å¥—ç»Ÿä¸€å¤„ç†å£°éŸ³æ–‡ä»¶å’Œæ•°æ®çš„æ¨¡å—ï¼ˆæˆ–è€…ç§°ä¹‹ä¸ºä¸€ä¸ªâ€åŒ…â€ï¼‰ã€‚\nç°å­˜å¾ˆå¤šç§ä¸åŒçš„éŸ³é¢‘æ–‡ä»¶æ ¼å¼ï¼ˆåŸºæœ¬ä¸Šéƒ½æ˜¯é€šè¿‡åç¼€ååŒºåˆ†çš„ï¼Œä¾‹å¦‚ï¼š.wavï¼Œ.aiffï¼Œ.auï¼‰ï¼Œæ‰€ä»¥ä½ éœ€è¦æœ‰ä¸€ç»„ä¸æ–­å¢åŠ çš„æ¨¡å—ï¼Œç”¨æ¥åœ¨ä¸åŒçš„æ ¼å¼ä¹‹é—´è½¬æ¢ã€‚å¹¶ä¸”é’ˆå¯¹è¿™äº›éŸ³é¢‘æ•°æ®ï¼Œè¿˜æœ‰å¾ˆå¤šä¸åŒçš„æ“ä½œï¼ˆæ¯”å¦‚æ··éŸ³ï¼Œæ·»åŠ å›å£°ï¼Œå¢åŠ å‡è¡¡å™¨åŠŸèƒ½ï¼Œåˆ›å»ºäººé€ ç«‹ä½“å£°æ•ˆæœï¼‰ï¼Œæ‰€ä»¥ä½ è¿˜éœ€è¦ä¸€ç»„æ€ä¹ˆä¹Ÿå†™ä¸å®Œçš„æ¨¡å—æ¥å¤„ç†è¿™äº›æ“ä½œã€‚\n14 datetimeæ¨¡å—14.1 datetimeç±»class datetime(date):\n    def __init__(self, year, month, day, hour, minute, second, microsecond, tzinfo)\n    \tpass\n    def now(cls, tz=None):\n    \tpass\n    def timestamp(self):\n    \tpass\n    def fromtimestamp(cls, t, tz=None):\n    \tpass\n    def date(self):\n    \tpass\n    def time(self):\n    \tpass\n    def year(self):\n    \tpass\n    def month(self):\n    \tpass\n    def day(self):\n    \tpass\n    def hour(self):\n    \tpass\n    def minute(self):\n    \tpass\n    def second(self):\n    \tpass\n    def isoweekday(self):\n    \tpass\n    def strftime(self, fmt):\n    \tpass\n    def combine(cls, date, time, tzinfo=True):\n    \tpass\n\ndatetime.now(tz=None) è·å–å½“å‰çš„æ—¥æœŸæ—¶é—´ï¼Œè¾“å‡ºé¡ºåºä¸ºï¼šå¹´ã€æœˆã€æ—¥ã€æ—¶ã€åˆ†ã€ç§’ã€å¾®ç§’ã€‚\ndatetime.timestamp() è·å–ä»¥ 1970å¹´1æœˆ1æ—¥ä¸ºèµ·ç‚¹è®°å½•çš„ç§’æ•°ã€‚\ndatetime.fromtimestamp(tz=None) ä½¿ç”¨ unixtimestamp åˆ›å»ºä¸€ä¸ª datetimeã€‚\n\nimport datetime\ndt = datetime.datetime(year=2020, month=6, day=25, hour=11, minute=23, second=59)\nprint(dt) # 2020-06-25 11:23:59\nprint(dt.timestamp()) # 1593055439.0\ndt = datetime.datetime.fromtimestamp(1593055439.0)\nprint(dt) # 2020-06-25 11:23:59\nprint(type(dt)) # &lt;class 'datetime.datetime'>\ndt = datetime.datetime.now()\nprint(dt) # 2020-06-25 11:11:03.877853\nprint(type(dt)) # &lt;class 'datetime.datetime'>\n\ndatetime.strftime(fmt) æ ¼å¼åŒ– datetime å¯¹è±¡ã€‚\n\n%a æœ¬åœ°ç®€åŒ–æ˜ŸæœŸåç§°ï¼ˆå¦‚æ˜ŸæœŸä¸€ï¼Œè¿”å› Monï¼‰%A æœ¬åœ°å®Œæ•´æ˜ŸæœŸåç§°ï¼ˆå¦‚æ˜ŸæœŸä¸€ï¼Œè¿”å› Mondayï¼‰%b æœ¬åœ°ç®€åŒ–çš„æœˆä»½åç§°ï¼ˆå¦‚ä¸€æœˆï¼Œè¿”å› Janï¼‰%B æœ¬åœ°å®Œæ•´çš„æœˆä»½åç§°ï¼ˆå¦‚ä¸€æœˆï¼Œè¿”å› Januaryï¼‰%c æœ¬åœ°ç›¸åº”çš„æ—¥æœŸè¡¨ç¤ºå’Œæ—¶é—´è¡¨ç¤º%d æœˆå†…ä¸­çš„ä¸€å¤©ï¼ˆ0-31ï¼‰%H 24å°æ—¶åˆ¶å°æ—¶æ•°ï¼ˆ0-23ï¼‰%I 12å°æ—¶åˆ¶å°æ—¶æ•°ï¼ˆ01-12ï¼‰%j å¹´å†…çš„ä¸€å¤©ï¼ˆ001-366ï¼‰%m æœˆä»½ï¼ˆ01-12ï¼‰%M åˆ†é’Ÿæ•°ï¼ˆ00-59ï¼‰%p æœ¬åœ°A.M.æˆ–P.M.çš„ç­‰ä»·ç¬¦%S ç§’ï¼ˆ00-59ï¼‰%U ä¸€å¹´ä¸­çš„æ˜ŸæœŸæ•°ï¼ˆ00-53ï¼‰æ˜ŸæœŸå¤©ä¸ºæ˜ŸæœŸçš„å¼€å§‹%w æ˜ŸæœŸï¼ˆ0-6ï¼‰ï¼Œæ˜ŸæœŸå¤©ä¸ºæ˜ŸæœŸçš„å¼€å§‹%W ä¸€å¹´ä¸­çš„æ˜ŸæœŸæ•°ï¼ˆ00-53ï¼‰æ˜ŸæœŸä¸€ä¸ºæ˜ŸæœŸçš„å¼€å§‹%x æœ¬åœ°ç›¸åº”çš„æ—¥æœŸè¡¨ç¤º%X æœ¬åœ°ç›¸åº”çš„æ—¶é—´è¡¨ç¤º%y ä¸¤ä½æ•°çš„å¹´ä»½è¡¨ç¤ºï¼ˆ00-99ï¼‰%Y å››ä½æ•°çš„å¹´ä»½è¡¨ç¤ºï¼ˆ0000-9999ï¼‰%Z å½“å‰æ—¶åŒºçš„åç§°ï¼ˆå¦‚æœæ˜¯æœ¬åœ°æ—¶é—´ï¼Œè¿”å›ç©ºå­—ç¬¦ä¸²ï¼‰%% %å·æœ¬èº«\nimport datetime\ndt = datetime.datetime(year=2020, month=6, day=25, hour=11, minute=51, second=49)\ns = dt.strftime(\"'%Y/%m/%d %H:%M:%S\")\nprint(s) # '2020/06/25 11:51:49\ns = dt.strftime('%d %B, %Y, %A')\nprint(s) # 25 June, 2020, Thursday\n\ndatetime.date() Return the date part.\ndatetime.time() Return the time part, with tzinfo None.\ndatetime.year å¹´\ndatetime.month æœˆ\ndatetime.day æ—¥\ndatetime.hour å°æ—¶\ndatetime.minute åˆ†é’Ÿ\ndatetime.second ç§’\ndatetime.isoweekday æ˜ŸæœŸå‡ \n\nåœ¨å¤„ç†å«æœ‰å­—ç¬¦ä¸²æ—¥æœŸçš„æ•°æ®é›†æˆ–è¡¨æ ¼æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§è‡ªåŠ¨è§£æå­—ç¬¦ä¸²çš„æ–¹æ³•ï¼Œæ— è®ºå®ƒæ˜¯ä»€ä¹ˆæ ¼å¼çš„ï¼Œéƒ½å¯ä»¥å°†å…¶è½¬åŒ–ä¸º datetime å¯¹è±¡ã€‚è¿™æ—¶ï¼Œå°±è¦ä½¿ç”¨åˆ° dateutil ä¸­çš„ parser æ¨¡å—ã€‚\n\nparser.parse(timestr, parserinfo=None, **kwargs)\n\nfrom dateutil import parser\ns = '2020-06-25'\ndt = parser.parse(s)\nprint(dt) # 2020-06-25 00:00:00\nprint(type(dt)) # &lt;class 'datetime.datetime'>\ns = 'March 31, 2010, 10:51pm'\ndt = parser.parse(s)\nprint(dt) # 2010-03-31 22:51:00\nprint(type(dt)) # &lt;class 'datetime.datetime'>\n14.2 dateç±»class date:\n    def __init__(self, year, month, day):\n    \tpass\n    def today(cls):\n    \tpass\n\ndate.today() è·å–å½“å‰æ—¥æœŸä¿¡æ¯ã€‚\n\nimport datetime\nd = datetime.date(2020, 6, 25)\nprint(d) # 2020-06-25\nprint(type(d)) # &lt;class 'datetime.date'>\nd = datetime.date.today()\nprint(d) # 2020-06-25\nprint(type(d)) # &lt;class 'datetime.date'>\n14.3 timeç±»class time:\n    def __init__(self, hour, minute, second, microsecond, tzinfo):\n    \tpass\nimport datetime\nt = datetime.time(12, 9, 23, 12980)\nprint(t) # 12:09:23.012980\nprint(type(t)) # &lt;class 'datetime.time'>\n\n# è¾“å…¥\ndate = datetime.date(2019, 10, 2)\n# è¾“å‡º\n2019-10-02 00:00:00\n14.4 timedeltaç±»timedelta è¡¨ç¤ºå…·ä½“æ—¶é—´å®ä¾‹ä¸­çš„ä¸€æ®µæ—¶é—´ã€‚ä½ å¯ä»¥æŠŠå®ƒä»¬ç®€å•æƒ³è±¡æˆä¸¤ä¸ªæ—¥æœŸæˆ–æ—¶é—´ä¹‹é—´çš„é—´éš”ã€‚å®ƒå¸¸å¸¸è¢«ç”¨æ¥ä» datetime å¯¹è±¡ä¸­æ·»åŠ æˆ–ç§»é™¤ä¸€æ®µç‰¹å®šçš„æ—¶é—´ã€‚\nclass timedelta(SupportsAbs[timedelta]):\n    def __init__(self, days, seconds, microseconds, milliseconds, minutes, hours, weeks,):\n    \tpass\n    def days(self):\n    \tpass\n    def total_seconds(self):\n    \tpass\nimport datetime\n\ntd = datetime.timedelta(days=30)\nprint(td) # 30 days, 0:00:00\nprint(type(td)) # &lt;class 'datetime.timedelta'>\nprint(datetime.date.today()) # 2020-07-01\nprint(datetime.date.today() + td) # 2020-07-31\n\ndt1 = datetime.datetime(2020, 1, 31, 10, 10, 0)\ndt2 = datetime.datetime(2019, 1, 31, 10, 10, 0)\ntd = dt1 - dt2\nprint(td) # 365 days, 0:00:00\nprint(type(td)) # &lt;class 'datetime.timedelta'>\n\ntd1 = datetime.timedelta(days=30) # 30 days\ntd2 = datetime.timedelta(weeks=1) # 1 week\ntd = td1 - td2\nprint(td) # 23 days, 0:00:00\nprint(type(td)) # &lt;class 'datetime.timedelta'>\nå¦‚æœå°†ä¸¤ä¸ª datetime å¯¹è±¡ç›¸å‡ï¼Œå°±ä¼šå¾—åˆ°è¡¨ç¤ºè¯¥æ—¶é—´é—´éš”çš„ timedelta å¯¹è±¡ã€‚åŒæ ·åœ°ï¼Œå°†ä¸¤ä¸ªæ—¶é—´é—´éš”ç›¸å‡ï¼Œå¯ä»¥å¾—åˆ°å¦ä¸€ä¸ª timedelta å¯¹è±¡ã€‚\n15 æ–‡ä»¶ä¸æ–‡ä»¶ç³»ç»Ÿ15.1 æ‰“å¼€æ–‡ä»¶open(file, mode=â€™râ€™, buffering=None, encoding=None, errors=None, newline=None, closefd=True)Open file and return a stream. Raise OSError upon failure.a. file : å¿…éœ€ï¼Œæ–‡ä»¶è·¯å¾„ï¼ˆç›¸å¯¹æˆ–è€…ç»å¯¹è·¯å¾„ï¼‰ã€‚b. mode : å¯é€‰ï¼Œæ–‡ä»¶æ‰“å¼€æ¨¡å¼c. buffering : è®¾ç½®ç¼“å†²d. encoding : ä¸€èˆ¬ä½¿ç”¨utf8e. errors : æŠ¥é”™çº§åˆ«f. newline : åŒºåˆ†æ¢è¡Œç¬¦å¸¸è§çš„mode å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š\n\n\n\n\næ‰“å¼€æ¨¡å¼\næ‰§è¡Œæ“ä½œ\n\n\n\n\nâ€˜râ€™\nä»¥åªè¯»æ–¹å¼æ‰“å¼€æ–‡ä»¶ã€‚æ–‡ä»¶çš„æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„å¼€å¤´ã€‚è¿™æ˜¯é»˜è®¤æ¨¡å¼ã€‚\n\n\nâ€˜wâ€™\næ‰“å¼€ä¸€ä¸ªæ–‡ä»¶åªç”¨äºå†™å…¥ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨åˆ™æ‰“å¼€æ–‡ä»¶ï¼Œå¹¶ä»å¼€å¤´å¼€å§‹ç¼–è¾‘ã€‚å³åŸæœ‰å†…å®¹ä¼šè¢«åˆ é™¤ã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶ã€‚\n\n\nâ€˜xâ€™\nå†™æ¨¡å¼ï¼Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œå¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨åˆ™ä¼šæŠ¥é”™ã€‚\n\n\nâ€˜aâ€™\nè¿½åŠ æ¨¡å¼ï¼Œæ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç”¨äºè¿½åŠ ã€‚å¦‚æœè¯¥æ–‡ä»¶å·²å­˜åœ¨ï¼Œæ–‡ä»¶æŒ‡é’ˆå°†ä¼šæ”¾åœ¨æ–‡ä»¶çš„ç»“å°¾ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ–°çš„å†…å®¹å°†ä¼šè¢«å†™å…¥åˆ°å·²æœ‰å†…å®¹ä¹‹åã€‚å¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ›å»ºæ–°æ–‡ä»¶è¿›è¡Œå†™å…¥ã€‚\n\n\nâ€˜bâ€™\nä»¥äºŒè¿›åˆ¶æ¨¡å¼æ‰“å¼€æ–‡ä»¶ã€‚ä¸€èˆ¬ç”¨äºéæ–‡æœ¬æ–‡ä»¶ï¼Œå¦‚ï¼šå›¾ç‰‡ã€‚\n\n\nâ€˜tâ€™\nä»¥æ–‡æœ¬æ¨¡å¼æ‰“å¼€ï¼ˆé»˜è®¤ï¼‰ã€‚ä¸€èˆ¬ç”¨äºæ–‡æœ¬æ–‡ä»¶ï¼Œå¦‚ï¼štxtã€‚\n\n\nâ€˜+â€™\nå¯è¯»å†™æ¨¡å¼ï¼ˆå¯æ·»åŠ åˆ°å…¶å®ƒæ¨¡å¼ä¸­ä½¿ç”¨ï¼‰\n\n\n\n\nf = open('å°†è¿›é…’.txt')\nprint(f)\n# &lt;_io.TextIOWrapper name='å°†è¿›é…’.txt' mode='r' encoding='cp936'>\nfor each in f:\nprint(each)\n15.2 æ–‡ä»¶å¯¹è±¡æ–¹æ³•fileObject.close() ç”¨äºå…³é—­ä¸€ä¸ªå·²æ‰“å¼€çš„æ–‡ä»¶ã€‚å…³é—­åçš„æ–‡ä»¶ä¸èƒ½å†è¿›è¡Œè¯»å†™æ“ä½œï¼Œ å¦åˆ™ä¼šè§¦å‘ValueErroré”™è¯¯ã€‚\nf = open(\"å°†è¿›é…’.txt\")\nprint('FileName:', f.name) # FileName: å°†è¿›é…’.txt\nf.close()\nfileObject.read([size]) ç”¨äºä»æ–‡ä»¶è¯»å–æŒ‡å®šçš„å­—ç¬¦æ•°ï¼Œå¦‚æœæœªç»™å®šæˆ–ä¸ºè´Ÿåˆ™è¯»å–æ‰€æœ‰ã€‚\nf = open('å°†è¿›é…’.txt', 'r')\nline = f.read(20)\nprint(\"è¯»å–çš„å­—ç¬¦ä¸²: %s\" % line)\n# è¯»å–çš„å­—ç¬¦ä¸²: å›ä¸è§ï¼Œé»„æ²³ä¹‹æ°´å¤©ä¸Šæ¥ï¼Œå¥”æµåˆ°æµ·ä¸å¤å›ã€‚\nf.close()\nfileObject.readline() è¯»å–æ•´è¡Œï¼ŒåŒ…æ‹¬ â€œ\\nâ€ å­—ç¬¦ã€‚\nf = open('å°†è¿›é…’.txt', 'r')\nline = f.readline()\nprint(\"è¯»å–çš„å­—ç¬¦ä¸²: %s\" % line)\n# è¯»å–çš„å­—ç¬¦ä¸²: å›ä¸è§ï¼Œé»„æ²³ä¹‹æ°´å¤©ä¸Šæ¥ï¼Œå¥”æµåˆ°æµ·ä¸å¤å›ã€‚\nf.close()\nfileObject.readlines() ç”¨äºè¯»å–æ‰€æœ‰è¡Œ(ç›´åˆ°ç»“æŸç¬¦ EOF)å¹¶è¿”å›åˆ—è¡¨ï¼Œè¯¥åˆ—è¡¨å¯ä»¥ç”± Python çš„forâ€¦ in â€¦ ç»“æ„è¿›è¡Œå¤„ç†ã€‚\nf = open('å°†è¿›é…’.txt', 'r')\nline = f.readline()\nprint(\"è¯»å–çš„å­—ç¬¦ä¸²: %s\" % line)\n# è¯»å–çš„å­—ç¬¦ä¸²: å›ä¸è§ï¼Œé»„æ²³ä¹‹æ°´å¤©ä¸Šæ¥ï¼Œå¥”æµåˆ°æµ·ä¸å¤å›ã€‚\nf.close()\nfileObject.tell() è¿”å›æ–‡ä»¶çš„å½“å‰ä½ç½®ï¼Œå³æ–‡ä»¶æŒ‡é’ˆå½“å‰ä½ç½®ã€‚\nf = open('å°†è¿›é…’.txt', 'r')\nline = f.readline()\nprint(line)\n# å›ä¸è§ï¼Œé»„æ²³ä¹‹æ°´å¤©ä¸Šæ¥ï¼Œå¥”æµåˆ°æµ·ä¸å¤å›ã€‚\npos = f.tell()\nprint(pos) # 42\nf.close()\nfileObject.seek(offset[, whence]) ç”¨äºç§»åŠ¨æ–‡ä»¶è¯»å–æŒ‡é’ˆåˆ°æŒ‡å®šä½ç½®ã€‚a. offset ï¼šå¼€å§‹çš„åç§»é‡ï¼Œä¹Ÿå°±æ˜¯ä»£è¡¨éœ€è¦ç§»åŠ¨åç§»çš„å­—èŠ‚æ•°ï¼Œå¦‚æœæ˜¯è´Ÿæ•°è¡¨ç¤ºä»å€’æ•°ç¬¬å‡ ä½å¼€å§‹ã€‚b. whence ï¼šå¯é€‰ï¼Œé»˜è®¤å€¼ä¸º 0ã€‚ç»™ offset å®šä¹‰ä¸€ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºè¦ä»å“ªä¸ªä½ç½®å¼€å§‹åç§»ï¼›0 ä»£è¡¨ä»æ–‡ä»¶å¼€å¤´å¼€å§‹ç®—èµ·ï¼Œ1 ä»£è¡¨ä»å½“å‰ä½ç½®å¼€å§‹ç®—èµ·ï¼Œ2 ä»£è¡¨ä»æ–‡ä»¶æœ«å°¾ç®—èµ·ã€‚\nf = open('å°†è¿›é…’.txt', 'r')\nline = f.readline()\nprint(line)\n# å›ä¸è§ï¼Œé»„æ²³ä¹‹æ°´å¤©ä¸Šæ¥ï¼Œå¥”æµåˆ°æµ·ä¸å¤å›ã€‚\nline = f.readline()\nprint(line)\n# å›ä¸è§ï¼Œé«˜å ‚æ˜é•œæ‚²ç™½å‘ï¼Œæœå¦‚é’ä¸æš®æˆé›ªã€‚\nf.seek(0, 0)\nline = f.readline()\nprint(line)\n# å›ä¸è§ï¼Œé»„æ²³ä¹‹æ°´å¤©ä¸Šæ¥ï¼Œå¥”æµåˆ°æµ·ä¸å¤å›ã€‚\nf.close()\nfileObject.write(str) ç”¨äºå‘æ–‡ä»¶ä¸­å†™å…¥æŒ‡å®šå­—ç¬¦ä¸²ï¼Œè¿”å›çš„æ˜¯å†™å…¥çš„å­—ç¬¦é•¿åº¦ã€‚\nf = open('workfile.txt', 'wb+')\nprint(f.write(b'0123456789abcdef')) # 16\nprint(f.seek(5)) # 5\nprint(f.read(1)) # b'5'\nprint(f.seek(-3, 2)) # 13\nprint(f.read(1)) # b'd'\nåœ¨æ–‡ä»¶å…³é—­å‰æˆ–ç¼“å†²åŒºåˆ·æ–°å‰ï¼Œå­—ç¬¦ä¸²å†…å®¹å­˜å‚¨åœ¨ç¼“å†²åŒºä¸­ï¼Œè¿™æ—¶ä½ åœ¨æ–‡ä»¶ä¸­æ˜¯çœ‹ä¸åˆ°å†™å…¥çš„å†…å®¹çš„ã€‚å¦‚æœæ–‡ä»¶æ‰“å¼€æ¨¡å¼å¸¦b ï¼Œé‚£å†™å…¥æ–‡ä»¶å†…å®¹æ—¶ï¼Œ str ï¼ˆå‚æ•°ï¼‰è¦ç”¨encode æ–¹æ³•è½¬ä¸ºbytes å½¢å¼ï¼Œå¦åˆ™æŠ¥é”™ï¼š TypeError: a bytes-like object is required, not â€˜strâ€™ ã€‚\nstr = '...'\n# æ–‡æœ¬ = Unicodeå­—ç¬¦åºåˆ—\n# ç›¸å½“äº string ç±»å‹\nstr = b'...'\n# æ–‡æœ¬ = å…«ä½åºåˆ—(0åˆ°255ä¹‹é—´çš„æ•´æ•°)\n# å­—èŠ‚æ–‡å­—æ€»æ˜¯ä»¥â€˜bâ€™æˆ–â€˜Bâ€™ä½œä¸ºå‰ç¼€ï¼›å®ƒä»¬äº§ç”Ÿä¸€ä¸ªå­—èŠ‚ç±»å‹çš„å®ä¾‹ï¼Œè€Œä¸æ˜¯strç±»å‹ã€‚\n# ç›¸å½“äº byte[]\nfileObject.writelines(sequence) å‘æ–‡ä»¶å†™å…¥ä¸€ä¸ªåºåˆ—å­—ç¬¦ä¸²åˆ—è¡¨ï¼Œå¦‚æœéœ€è¦æ¢è¡Œåˆ™è¦è‡ªå·±åŠ å…¥æ¯è¡Œçš„æ¢è¡Œç¬¦\\n ã€‚\nf = open('test.txt', 'w+')\nseq = ['å°é©¬çš„ç¨‹åºäººç”Ÿ\\n', 'è€é©¬çš„ç¨‹åºäººç”Ÿ']\nf.writelines(seq)\nf.seek(0, 0)\nfor each in f:\nprint(each)\n# å°é©¬çš„ç¨‹åºäººç”Ÿ\n# è€é©¬çš„ç¨‹åºäººç”Ÿ\nf.close()\n15.3 ç®€æ´çš„ with è¯­å¥ä¸€äº›å¯¹è±¡å®šä¹‰äº†æ ‡å‡†çš„æ¸…ç†è¡Œä¸ºï¼Œæ— è®ºç³»ç»Ÿæ˜¯å¦æˆåŠŸçš„ä½¿ç”¨äº†å®ƒï¼Œä¸€æ—¦ä¸éœ€è¦å®ƒäº†ï¼Œé‚£ä¹ˆè¿™ä¸ªæ ‡å‡†çš„æ¸…ç†è¡Œä¸ºå°±ä¼šæ‰§è¡Œã€‚å…³é”®è¯ with è¯­å¥å°±å¯ä»¥ä¿è¯è¯¸å¦‚æ–‡ä»¶ä¹‹ç±»çš„å¯¹è±¡åœ¨ä½¿ç”¨å®Œä¹‹åä¸€å®šä¼šæ­£ç¡®çš„æ‰§è¡Œå®ƒçš„æ¸…ç†æ–¹æ³•ã€‚\ntry:\nf = open('myfile.txt', 'w')\nfor line in f:\nprint(line)\nexcept OSError as error:\nprint('å‡ºé”™å•¦!%s' % str(error))\nfinally:\nf.close()\n# å‡ºé”™å•¦!not readable\ntry:\nwith open('myfile.txt', 'w') as f:\nfor line in f:\nprint(line)\nexcept OSError as error:\nprint('å‡ºé”™å•¦!%s' % str(error))\n# å‡ºé”™å•¦!not readable\n16 OSæˆ‘ä»¬æ‰€çŸ¥é“å¸¸ç”¨çš„æ“ä½œç³»ç»Ÿå°±æœ‰ï¼šWindowsï¼ŒMac OSï¼ŒLinuï¼ŒUnixç­‰ï¼Œè¿™äº›æ“ä½œç³»ç»Ÿåº•å±‚å¯¹äºæ–‡ä»¶ç³»ç»Ÿçš„è®¿é—®å·¥ä½œåŸç†æ˜¯ä¸ä¸€æ ·çš„ï¼Œå› æ­¤ä½ å¯èƒ½å°±è¦é’ˆå¯¹ä¸åŒçš„ç³»ç»Ÿæ¥è€ƒè™‘ä½¿ç”¨å“ªäº›æ–‡ä»¶ç³»ç»Ÿæ¨¡å—â€¦â€¦ï¼Œè¿™æ ·çš„åšæ³•æ˜¯éå¸¸ä¸å‹å¥½ä¸”éº»çƒ¦çš„ï¼Œå› ä¸ºè¿™æ ·å°±æ„å‘³ç€å½“ä½ çš„ç¨‹åºè¿è¡Œç¯å¢ƒä¸€æ”¹å˜ï¼Œä½ å°±è¦ç›¸åº”çš„å»ä¿®æ”¹å¤§é‡çš„ä»£ç æ¥åº”å¯¹ã€‚æœ‰äº†OSï¼ˆOperation Systemï¼‰æ¨¡å—ï¼Œæˆ‘ä»¬ä¸éœ€è¦å…³å¿ƒä»€ä¹ˆæ“ä½œç³»ç»Ÿä¸‹ä½¿ç”¨ä»€ä¹ˆæ¨¡å—ï¼ŒOSæ¨¡å—ä¼šå¸®ä½ é€‰æ‹©æ­£ç¡®çš„æ¨¡å—å¹¶è°ƒç”¨ã€‚\n\nos.getcwd() ç”¨äºè¿”å›å½“å‰å·¥ä½œç›®å½•ã€‚\nos.chdir(path) ç”¨äºæ”¹å˜å½“å‰å·¥ä½œç›®å½•åˆ°æŒ‡å®šçš„è·¯å¾„ã€‚\n\nimport os\npath = 'C:\\\\'\nprint(\"å½“å‰å·¥ä½œç›®å½• : %s\" % os.getcwd())\n# å½“å‰å·¥ä½œç›®å½• : C:\\Users\\Administrator\\PycharmProjects\\untitled1\nos.chdir(path)\nprint(\"ç›®å½•ä¿®æ”¹æˆåŠŸ : %s\" % os.getcwd())\n# ç›®å½•ä¿®æ”¹æˆåŠŸ : C:\\\nlistdir (path=â€™.â€™) è¿”å›path æŒ‡å®šçš„æ–‡ä»¶å¤¹åŒ…å«çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹çš„åå­—çš„åˆ—è¡¨ã€‚\nimport os\ndirs = os.listdir()\nfor item in dirs:\nprint(item)\nos.mkdir(path) åˆ›å»ºå•å±‚ç›®å½•ï¼Œå¦‚æœè¯¥ç›®å½•å·²å­˜åœ¨æŠ›å‡ºå¼‚å¸¸ã€‚\nimport os\nif os.path.isdir(r'.\\b') is False:\n    os.mkdir(r'.\\B')\n    os.mkdir(r'.\\B\\A')\nos.mkdir(r'.\\C\\A') # FileNotFoundError\nos.makedirs(path) ç”¨äºé€’å½’åˆ›å»ºå¤šå±‚ç›®å½•ï¼Œå¦‚æœè¯¥ç›®å½•å·²å­˜åœ¨æŠ›å‡ºå¼‚å¸¸ã€‚\nimport os\nos.makedirs(r'.\\E\\A')\nos.remove(path) ç”¨äºåˆ é™¤æŒ‡å®šè·¯å¾„çš„æ–‡ä»¶ã€‚å¦‚æœæŒ‡å®šçš„è·¯å¾„æ˜¯ä¸€ä¸ªç›®å½•ï¼Œå°†æŠ›å‡º OSError ã€‚\nimport os\nprint(\"ç›®å½•ä¸º: %s\" % os.listdir(r'.\\E\\A'))\nos.remove(r'.\\E\\A\\test.txt')\nprint(\"ç›®å½•ä¸º: %s\" % os.listdir(r'.\\E\\A'))\nos.rmdir(path) ç”¨äºåˆ é™¤å•å±‚ç›®å½•ã€‚ä»…å½“è¿™æ–‡ä»¶å¤¹æ˜¯ç©ºçš„æ‰å¯ä»¥, å¦åˆ™, æŠ›å‡º OSError ã€‚\nimport os\nprint(\"ç›®å½•ä¸º: %s\" % os.listdir(r'.\\E'))\nos.rmdir(r'.\\E\\A')\nprint(\"ç›®å½•ä¸º: %s\" % os.listdir(r'.\\E'))\nos.removedirs(path) é€’å½’åˆ é™¤ç›®å½•ï¼Œä»å­ç›®å½•åˆ°çˆ¶ç›®å½•é€å±‚å°è¯•åˆ é™¤ï¼Œé‡åˆ°ç›®å½•éç©ºåˆ™æŠ›å‡ºå¼‚å¸¸ã€‚\nimport os\nprint(\"ç›®å½•ä¸º: %s\" % os.listdir(os.getcwd()))\nos.removedirs(r'.\\E\\A') # å…ˆåˆ é™¤A ç„¶ååˆ é™¤E\nprint(\"ç›®å½•ä¸º: %s\" % os.listdir(os.getcwd()))\nos.rename(src, dst) æ–¹æ³•ç”¨äºå‘½åæ–‡ä»¶æˆ–ç›®å½•ï¼Œä» src åˆ° dst ï¼Œå¦‚æœ dst æ˜¯ä¸€ä¸ªå­˜åœ¨çš„ç›®å½•, å°†æŠ›å‡ºOSError \nimport os\nprint(\"ç›®å½•ä¸º: %s\" % os.listdir(os.getcwd()))\nos.rename(\"test.txt\", \"test2.txt\")\nprint(\"é‡å‘½åæˆåŠŸã€‚\")\nprint(\"ç›®å½•ä¸º: %s\" % os.listdir(os.getcwd()))\nos.system(command) è¿è¡Œç³»ç»Ÿçš„shellå‘½ä»¤ï¼ˆå°†å­—ç¬¦ä¸²è½¬åŒ–æˆå‘½ä»¤ï¼‰\nimport os\npath = os.getcwd() + '\\\\a.py'\na = os.system(r'python %s' % path)\nos.system('calc') # æ‰“å¼€è®¡ç®—å™¨\n\nos.curdir æŒ‡ä»£å½“å‰ç›®å½•ï¼ˆ . ï¼‰\nos.pardir æŒ‡ä»£ä¸Šä¸€çº§ç›®å½•ï¼ˆ .. ï¼‰\nos.sep è¾“å‡ºæ“ä½œç³»ç»Ÿç‰¹å®šçš„è·¯å¾„åˆ†éš”ç¬¦ï¼ˆwinä¸‹ä¸º\\\\ ï¼ŒLinuxä¸‹ä¸º/ ï¼‰\nos.linesep å½“å‰å¹³å°ä½¿ç”¨çš„è¡Œç»ˆæ­¢ç¬¦ï¼ˆwinä¸‹ä¸º\\r\\n ï¼ŒLinuxä¸‹ä¸º\\n ï¼‰\nos.name æŒ‡ä»£å½“å‰ä½¿ç”¨çš„æ“ä½œç³»ç»Ÿï¼ˆåŒ…æ‹¬ï¼šâ€™macâ€™ï¼Œâ€™ntâ€™ï¼‰\n\nimport os\nprint(os.curdir) # .\nprint(os.pardir) # ..\nprint(os.sep) # \\\nprint(os.linesep)\nprint(os.name) # nt\n\nos.path.basename(path) å»æ‰ç›®å½•è·¯å¾„ï¼Œå•ç‹¬è¿”å›æ–‡ä»¶å\nos.path.dirname(path) å»æ‰æ–‡ä»¶åï¼Œå•ç‹¬è¿”å›ç›®å½•è·¯å¾„\nos.path.join(path1[, path2[, â€¦]]) å°† path1 ï¼Œ path2 å„éƒ¨åˆ†ç»„åˆæˆä¸€ä¸ªè·¯å¾„å\nos.path.split(path) åˆ†å‰²æ–‡ä»¶åä¸è·¯å¾„ï¼Œè¿”å›(f_path,f_name) å…ƒç»„ã€‚å¦‚æœå®Œå…¨ä½¿ç”¨ç›®å½•ï¼Œå®ƒä¼šå°†æœ€åä¸€ä¸ªç›®å½•ä½œä¸ºæ–‡ä»¶ååˆ†ç¦»ï¼Œä¸”ä¸ä¼šåˆ¤æ–­æ–‡ä»¶æˆ–è€…ç›®å½•æ˜¯å¦å­˜åœ¨ã€‚\nos.path.splitext(path) åˆ†ç¦»æ–‡ä»¶åä¸æ‰©å±•åï¼Œè¿”å›(f_path,f_name) å…ƒç»„ã€‚\n\nimport os\n# è¿”å›æ–‡ä»¶å\nprint(os.path.basename(r'C:\\test\\lsgo.txt')) # lsgo.txt\n# è¿”å›ç›®å½•è·¯å¾„\nprint(os.path.dirname(r'C:\\test\\lsgo.txt')) # C:\\test\n# å°†ç›®å½•å’Œæ–‡ä»¶ååˆæˆä¸€ä¸ªè·¯å¾„\nprint(os.path.join('C:\\\\', 'test', 'lsgo.txt')) # C:\\test\\lsgo.txt\n# åˆ†å‰²æ–‡ä»¶åä¸è·¯å¾„\nprint(os.path.split(r'C:\\test\\lsgo.txt')) # ('C:\\\\test', 'lsgo.txt')\n# åˆ†ç¦»æ–‡ä»¶åä¸æ‰©å±•å\nprint(os.path.splitext(r'C:\\test\\lsgo.txt')) # ('C:\\\\test\\\\lsgo', '.txt')\n\nos.path.getsize(file) è¿”å›æŒ‡å®šæ–‡ä»¶å¤§å°ï¼Œå•ä½æ˜¯å­—èŠ‚ã€‚\nos.path.getatime(file) è¿”å›æŒ‡å®šæ–‡ä»¶æœ€è¿‘çš„è®¿é—®æ—¶é—´\nos.path.getctime(file) è¿”å›æŒ‡å®šæ–‡ä»¶çš„åˆ›å»ºæ—¶é—´\nos.path.getmtime(file) è¿”å›æŒ‡å®šæ–‡ä»¶çš„æœ€æ–°çš„ä¿®æ”¹æ—¶é—´\næµ®ç‚¹å‹ç§’æ•°ï¼Œå¯ç”¨timeæ¨¡å—çš„gmtime() æˆ–localtime() å‡½æ•°æ¢ç®—\n\nimport os\nimport time\nfile = r'.\\lsgo.txt'\nprint(os.path.getsize(file)) # 30\nprint(os.path.getatime(file)) # 1565593737.347196\nprint(os.path.getctime(file)) # 1565593737.347196\nprint(os.path.getmtime(file)) # 1565593797.9298275\nprint(time.gmtime(os.path.getctime(file)))\n# time.struct_time(tm_year=2019, tm_mon=8, tm_mday=12, tm_hour=7, tm_min=8, tm_sec=57, tm_wday=0,\ntm_yday=224, tm_isdst=0)\nprint(time.localtime(os.path.getctime(file)))\n# time.struct_time(tm_year=2019, tm_mon=8, tm_mday=12, tm_hour=15, tm_min=8, tm_sec=57, tm_wday=0,\ntm_yday=224, tm_isdst=0)\n\nos.path.exists(path) åˆ¤æ–­æŒ‡å®šè·¯å¾„ï¼ˆç›®å½•æˆ–æ–‡ä»¶ï¼‰æ˜¯å¦å­˜åœ¨\nos.path.isabs(path) åˆ¤æ–­æŒ‡å®šè·¯å¾„æ˜¯å¦ä¸ºç»å¯¹è·¯å¾„\nos.path.isdir(path) åˆ¤æ–­æŒ‡å®šè·¯å¾„æ˜¯å¦å­˜åœ¨ä¸”æ˜¯ä¸€ä¸ªç›®å½•\nos.path.isfile(path) åˆ¤æ–­æŒ‡å®šè·¯å¾„æ˜¯å¦å­˜åœ¨ä¸”æ˜¯ä¸€ä¸ªæ–‡ä»¶\nos.path.islink(path) åˆ¤æ–­æŒ‡å®šè·¯å¾„æ˜¯å¦å­˜åœ¨ä¸”æ˜¯ä¸€ä¸ªç¬¦å·é“¾æ¥\nos.path.ismount(path) åˆ¤æ–­æŒ‡å®šè·¯å¾„æ˜¯å¦å­˜åœ¨ä¸”æ˜¯ä¸€ä¸ªæ‚¬æŒ‚ç‚¹\nos.path.samefile(path1,path2) åˆ¤æ–­path1å’Œpath2ä¸¤ä¸ªè·¯å¾„æ˜¯å¦æŒ‡å‘åŒä¸€ä¸ªæ–‡ä»¶\n\nimport os\nprint(os.path.ismount('D:\\\\')) # True\nprint(os.path.ismount('D:\\\\Test')) # False\n17 åºåˆ—åŒ–ä¸ååºåˆ—åŒ–Python çš„ pickle æ¨¡å—å®ç°äº†åŸºæœ¬çš„æ•°æ®åºåˆ—å’Œååºåˆ—åŒ–ã€‚\n\né€šè¿‡ pickle æ¨¡å—çš„åºåˆ—åŒ–æ“ä½œæˆ‘ä»¬èƒ½å¤Ÿå°†ç¨‹åºä¸­è¿è¡Œçš„å¯¹è±¡ä¿¡æ¯ä¿å­˜åˆ°æ–‡ä»¶ä¸­å»ï¼Œæ°¸ä¹…å­˜å‚¨ã€‚\né€šè¿‡ pickle æ¨¡å—çš„ååºåˆ—åŒ–æ“ä½œï¼Œæˆ‘ä»¬èƒ½å¤Ÿä»æ–‡ä»¶ä¸­åˆ›å»ºä¸Šä¸€æ¬¡ç¨‹åºä¿å­˜çš„å¯¹è±¡ã€‚\n\npickleæ¨¡å—ä¸­æœ€å¸¸ç”¨çš„å‡½æ•°ä¸ºï¼špickle.dump(obj, file, [,protocol]) å°†obj å¯¹è±¡åºåˆ—åŒ–å­˜å…¥å·²ç»æ‰“å¼€çš„file ä¸­ã€‚\n\nobj ï¼šæƒ³è¦åºåˆ—åŒ–çš„obj å¯¹è±¡ã€‚\nfile :æ–‡ä»¶åç§°ã€‚\nprotocol ï¼šåºåˆ—åŒ–ä½¿ç”¨çš„åè®®ã€‚å¦‚æœè¯¥é¡¹çœç•¥ï¼Œåˆ™é»˜è®¤ä¸º0ã€‚å¦‚æœä¸ºè´Ÿå€¼æˆ–HIGHEST_PROTOCOL ï¼Œåˆ™ä½¿ç”¨æœ€é«˜çš„åè®®ç‰ˆæœ¬ã€‚\n\npickle.load(file) å°†file ä¸­çš„å¯¹è±¡åºåˆ—åŒ–è¯»å‡ºã€‚\nfile ï¼šæ–‡ä»¶åç§°ã€‚\nimport pickle\ndataList = [[1, 1, 'yes'],\n            [1, 1, 'yes'],\n            [1, 0, 'no'],\n            [0, 1, 'no'],\n            [0, 1, 'no']]\ndataDic = &#123;0: [1, 2, 3, 4],\n            1: ('a', 'b'),\n            2: &#123;'c': 'yes', 'd': 'no'&#125;&#125;\n# ä½¿ç”¨dump()å°†æ•°æ®åºåˆ—åŒ–åˆ°æ–‡ä»¶ä¸­\nfw = open(r'.\\dataFile.pkl', 'wb')\n# Pickle the list using the highest protocol available.\npickle.dump(dataList, fw, -1)\n# Pickle dictionary using protocol 0.\npickle.dump(dataDic, fw)\nfw.close()\n# ä½¿ç”¨load()å°†æ•°æ®ä»æ–‡ä»¶ä¸­åºåˆ—åŒ–è¯»å‡º\nfr = open('dataFile.pkl', 'rb')\ndata1 = pickle.load(fr)\nprint(data1)\ndata2 = pickle.load(fr)\nprint(data2)\nfr.close()\n# [[1, 1, 'yes'], [1, 1, 'yes'], [1, 0, 'no'], [0, 1, 'no'], [0, 1, 'no']]\n# &#123;0: [1, 2, 3, 4], 1: ('a', 'b'), 2: &#123;'c': 'yes', 'd': 'no'&#125;&#125;\n","slug":"P0-Python","date":"2021-11-01T08:38:34.000Z","categories_index":"Python","tags_index":"","author_index":"YFR718"}]